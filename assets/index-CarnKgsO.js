(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function s(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(u){if(u.ep)return;u.ep=!0;const h=s(u);fetch(u.href,h)}})();const global$1=globalThis||void 0||self;/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.19.2
 * @author George Michael Brower
 * @license MIT
 */class Controller{constructor(t,s,o,u,h="div"){this.parent=t,this.object=s,this.property=o,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement(h),this.domElement.classList.add("controller"),this.domElement.classList.add(u),this.$name=document.createElement("div"),this.$name.classList.add("name"),Controller.nextNameID=Controller.nextNameID||0,this.$name.id=`lil-gui-name-${++Controller.nextNameID}`,this.$widget=document.createElement("div"),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.domElement.addEventListener("keydown",f=>f.stopPropagation()),this.domElement.addEventListener("keyup",f=>f.stopPropagation()),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(o)}name(t){return this._name=t,this.$name.textContent=t,this}onChange(t){return this._onChange=t,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(t=!0){return this.disable(!t)}disable(t=!0){return t===this._disabled?this:(this._disabled=t,this.domElement.classList.toggle("disabled",t),this.$disable.toggleAttribute("disabled",t),this)}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(t){const s=this.parent.add(this.object,this.property,t);return s.name(this._name),this.destroy(),s}min(t){return this}max(t){return this}step(t){return this}decimals(t){return this}listen(t=!0){return this._listening=t,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const t=this.save();t!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=t}getValue(){return this.object[this.property]}setValue(t){return this.getValue()!==t&&(this.object[this.property]=t,this._callOnChange(),this.updateDisplay()),this}updateDisplay(){return this}load(t){return this.setValue(t),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class BooleanController extends Controller{constructor(t,s,o){super(t,s,o,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function normalizeColorString(n){let t,s;return(t=n.match(/(#|0x)?([a-f0-9]{6})/i))?s=t[2]:(t=n.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?s=parseInt(t[1]).toString(16).padStart(2,0)+parseInt(t[2]).toString(16).padStart(2,0)+parseInt(t[3]).toString(16).padStart(2,0):(t=n.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(s=t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),s?"#"+s:!1}const STRING={isPrimitive:!0,match:n=>typeof n=="string",fromHexString:normalizeColorString,toHexString:normalizeColorString},INT={isPrimitive:!0,match:n=>typeof n=="number",fromHexString:n=>parseInt(n.substring(1),16),toHexString:n=>"#"+n.toString(16).padStart(6,0)},ARRAY={isPrimitive:!1,match:n=>Array.isArray(n),fromHexString(n,t,s=1){const o=INT.fromHexString(n);t[0]=(o>>16&255)/255*s,t[1]=(o>>8&255)/255*s,t[2]=(o&255)/255*s},toHexString([n,t,s],o=1){o=255/o;const u=n*o<<16^t*o<<8^s*o<<0;return INT.toHexString(u)}},OBJECT={isPrimitive:!1,match:n=>Object(n)===n,fromHexString(n,t,s=1){const o=INT.fromHexString(n);t.r=(o>>16&255)/255*s,t.g=(o>>8&255)/255*s,t.b=(o&255)/255*s},toHexString({r:n,g:t,b:s},o=1){o=255/o;const u=n*o<<16^t*o<<8^s*o<<0;return INT.toHexString(u)}},FORMATS=[STRING,INT,ARRAY,OBJECT];function getColorFormat(n){return FORMATS.find(t=>t.match(n))}class ColorController extends Controller{constructor(t,s,o,u){super(t,s,o,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=getColorFormat(this.initialValue),this._rgbScale=u,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const h=normalizeColorString(this.$text.value);h&&this._setValueFromHexString(h)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(t){if(this._format.isPrimitive){const s=this._format.fromHexString(t);this.setValue(s)}else this._format.fromHexString(t,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(t){return this._setValueFromHexString(t),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class FunctionController extends Controller{constructor(t,s,o){super(t,s,o,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",u=>{u.preventDefault(),this.getValue().call(this.object),this._callOnChange()}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class NumberController extends Controller{constructor(t,s,o,u,h,f){super(t,s,o,"number"),this._initInput(),this.min(u),this.max(h);const g=f!==void 0;this.step(g?f:this._getImplicitStep(),g),this.updateDisplay()}decimals(t){return this._decimals=t,this.updateDisplay(),this}min(t){return this._min=t,this._onUpdateMinMax(),this}max(t){return this._max=t,this._onUpdateMinMax(),this}step(t,s=!0){return this._step=t,this._stepExplicit=s,this}updateDisplay(){const t=this.getValue();if(this._hasSlider){let s=(t-this._min)/(this._max-this._min);s=Math.max(0,Math.min(s,1)),this.$fill.style.width=s*100+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?t:t.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),window.matchMedia("(pointer: coarse)").matches&&(this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any")),this.$widget.appendChild(this.$input),this.$disable=this.$input;const s=()=>{let I=parseFloat(this.$input.value);isNaN(I)||(this._stepExplicit&&(I=this._snap(I)),this.setValue(this._clamp(I)))},o=I=>{const M=parseFloat(this.$input.value);isNaN(M)||(this._snapClampSetValue(M+I),this.$input.value=this.getValue())},u=I=>{I.key==="Enter"&&this.$input.blur(),I.code==="ArrowUp"&&(I.preventDefault(),o(this._step*this._arrowKeyMultiplier(I))),I.code==="ArrowDown"&&(I.preventDefault(),o(this._step*this._arrowKeyMultiplier(I)*-1))},h=I=>{this._inputFocused&&(I.preventDefault(),o(this._step*this._normalizeMouseWheel(I)))};let f=!1,g,v,O,E,_;const p=5,b=I=>{g=I.clientX,v=O=I.clientY,f=!0,E=this.getValue(),_=0,window.addEventListener("mousemove",C),window.addEventListener("mouseup",P)},C=I=>{if(f){const M=I.clientX-g,j=I.clientY-v;Math.abs(j)>p?(I.preventDefault(),this.$input.blur(),f=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(M)>p&&P()}if(!f){const M=I.clientY-O;_-=M*this._step*this._arrowKeyMultiplier(I),E+_>this._max?_=this._max-E:E+_<this._min&&(_=this._min-E),this._snapClampSetValue(E+_)}O=I.clientY},P=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",P)},A=()=>{this._inputFocused=!0},T=()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()};this.$input.addEventListener("input",s),this.$input.addEventListener("keydown",u),this.$input.addEventListener("wheel",h,{passive:!1}),this.$input.addEventListener("mousedown",b),this.$input.addEventListener("focus",A),this.$input.addEventListener("blur",T)}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const t=(T,I,M,j,W)=>(T-I)/(M-I)*(W-j)+j,s=T=>{const I=this.$slider.getBoundingClientRect();let M=t(T,I.left,I.right,this._min,this._max);this._snapClampSetValue(M)},o=T=>{this._setDraggingStyle(!0),s(T.clientX),window.addEventListener("mousemove",u),window.addEventListener("mouseup",h)},u=T=>{s(T.clientX)},h=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",h)};let f=!1,g,v;const O=T=>{T.preventDefault(),this._setDraggingStyle(!0),s(T.touches[0].clientX),f=!1},E=T=>{T.touches.length>1||(this._hasScrollBar?(g=T.touches[0].clientX,v=T.touches[0].clientY,f=!0):O(T),window.addEventListener("touchmove",_,{passive:!1}),window.addEventListener("touchend",p))},_=T=>{if(f){const I=T.touches[0].clientX-g,M=T.touches[0].clientY-v;Math.abs(I)>Math.abs(M)?O(T):(window.removeEventListener("touchmove",_),window.removeEventListener("touchend",p))}else T.preventDefault(),s(T.touches[0].clientX)},p=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",_),window.removeEventListener("touchend",p)},b=this._callOnFinishChange.bind(this),C=400;let P;const A=T=>{if(Math.abs(T.deltaX)<Math.abs(T.deltaY)&&this._hasScrollBar)return;T.preventDefault();const M=this._normalizeMouseWheel(T)*this._step;this._snapClampSetValue(this.getValue()+M),this.$input.value=this.getValue(),clearTimeout(P),P=setTimeout(b,C)};this.$slider.addEventListener("mousedown",o),this.$slider.addEventListener("touchstart",E,{passive:!1}),this.$slider.addEventListener("wheel",A,{passive:!1})}_setDraggingStyle(t,s="horizontal"){this.$slider&&this.$slider.classList.toggle("active",t),document.body.classList.toggle("lil-gui-dragging",t),document.body.classList.toggle(`lil-gui-${s}`,t)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(t){let{deltaX:s,deltaY:o}=t;return Math.floor(t.deltaY)!==t.deltaY&&t.wheelDelta&&(s=0,o=-t.wheelDelta/120,o*=this._stepExplicit?1:10),s+-o}_arrowKeyMultiplier(t){let s=this._stepExplicit?1:10;return t.shiftKey?s*=10:t.altKey&&(s/=10),s}_snap(t){const s=Math.round(t/this._step)*this._step;return parseFloat(s.toPrecision(15))}_clamp(t){return t<this._min&&(t=this._min),t>this._max&&(t=this._max),t}_snapClampSetValue(t){this.setValue(this._clamp(this._snap(t)))}get _hasScrollBar(){const t=this.parent.root.$children;return t.scrollHeight>t.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class OptionController extends Controller{constructor(t,s,o,u){super(t,s,o,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.options(u)}options(t){return this._values=Array.isArray(t)?t:Object.values(t),this._names=Array.isArray(t)?t:Object.keys(t),this.$select.replaceChildren(),this._names.forEach(s=>{const o=document.createElement("option");o.textContent=s,this.$select.appendChild(o)}),this.updateDisplay(),this}updateDisplay(){const t=this.getValue(),s=this._values.indexOf(t);return this.$select.selectedIndex=s,this.$display.textContent=s===-1?t:this._names[s],this}}class StringController extends Controller{constructor(t,s,o){super(t,s,o,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("spellcheck","false"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",u=>{u.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}const stylesheet=`.lil-gui {
  font-family: var(--font-family);
  font-size: var(--font-size);
  line-height: 1;
  font-weight: normal;
  font-style: normal;
  text-align: left;
  color: var(--text-color);
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  --background-color: #1f1f1f;
  --text-color: #ebebeb;
  --title-background-color: #111111;
  --title-text-color: #ebebeb;
  --widget-color: #424242;
  --hover-color: #4f4f4f;
  --focus-color: #595959;
  --number-color: #2cc9ff;
  --string-color: #a2db3c;
  --font-size: 11px;
  --input-font-size: 11px;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;
  --padding: 4px;
  --spacing: 4px;
  --widget-height: 20px;
  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);
  --name-width: 45%;
  --slider-knob-width: 2px;
  --slider-input-width: 27%;
  --color-input-width: 27%;
  --slider-input-min-width: 45px;
  --color-input-min-width: 45px;
  --folder-indent: 7px;
  --widget-padding: 0 0 0 3px;
  --widget-border-radius: 2px;
  --checkbox-size: calc(0.75 * var(--widget-height));
  --scrollbar-width: 5px;
}
.lil-gui, .lil-gui * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
.lil-gui.root {
  width: var(--width, 245px);
  display: flex;
  flex-direction: column;
  background: var(--background-color);
}
.lil-gui.root > .title {
  background: var(--title-background-color);
  color: var(--title-text-color);
}
.lil-gui.root > .children {
  overflow-x: hidden;
  overflow-y: auto;
}
.lil-gui.root > .children::-webkit-scrollbar {
  width: var(--scrollbar-width);
  height: var(--scrollbar-width);
  background: var(--background-color);
}
.lil-gui.root > .children::-webkit-scrollbar-thumb {
  border-radius: var(--scrollbar-width);
  background: var(--focus-color);
}
@media (pointer: coarse) {
  .lil-gui.allow-touch-styles, .lil-gui.allow-touch-styles .lil-gui {
    --widget-height: 28px;
    --padding: 6px;
    --spacing: 6px;
    --font-size: 13px;
    --input-font-size: 16px;
    --folder-indent: 10px;
    --scrollbar-width: 7px;
    --slider-input-min-width: 50px;
    --color-input-min-width: 65px;
  }
}
.lil-gui.force-touch-styles, .lil-gui.force-touch-styles .lil-gui {
  --widget-height: 28px;
  --padding: 6px;
  --spacing: 6px;
  --font-size: 13px;
  --input-font-size: 16px;
  --folder-indent: 10px;
  --scrollbar-width: 7px;
  --slider-input-min-width: 50px;
  --color-input-min-width: 65px;
}
.lil-gui.autoPlace {
  max-height: 100%;
  position: fixed;
  top: 0;
  right: 15px;
  z-index: 1001;
}

.lil-gui .controller {
  display: flex;
  align-items: center;
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
}
.lil-gui .controller.disabled {
  opacity: 0.5;
}
.lil-gui .controller.disabled, .lil-gui .controller.disabled * {
  pointer-events: none !important;
}
.lil-gui .controller > .name {
  min-width: var(--name-width);
  flex-shrink: 0;
  white-space: pre;
  padding-right: var(--spacing);
  line-height: var(--widget-height);
}
.lil-gui .controller .widget {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  min-height: var(--widget-height);
}
.lil-gui .controller.string input {
  color: var(--string-color);
}
.lil-gui .controller.boolean {
  cursor: pointer;
}
.lil-gui .controller.color .display {
  width: 100%;
  height: var(--widget-height);
  border-radius: var(--widget-border-radius);
  position: relative;
}
@media (hover: hover) {
  .lil-gui .controller.color .display:hover:before {
    content: " ";
    display: block;
    position: absolute;
    border-radius: var(--widget-border-radius);
    border: 1px solid #fff9;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
.lil-gui .controller.color input[type=color] {
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.lil-gui .controller.color input[type=text] {
  margin-left: var(--spacing);
  font-family: var(--font-family-mono);
  min-width: var(--color-input-min-width);
  width: var(--color-input-width);
  flex-shrink: 0;
}
.lil-gui .controller.option select {
  opacity: 0;
  position: absolute;
  width: 100%;
  max-width: 100%;
}
.lil-gui .controller.option .display {
  position: relative;
  pointer-events: none;
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  line-height: var(--widget-height);
  max-width: 100%;
  overflow: hidden;
  word-break: break-all;
  padding-left: 0.55em;
  padding-right: 1.75em;
  background: var(--widget-color);
}
@media (hover: hover) {
  .lil-gui .controller.option .display.focus {
    background: var(--focus-color);
  }
}
.lil-gui .controller.option .display.active {
  background: var(--focus-color);
}
.lil-gui .controller.option .display:after {
  font-family: "lil-gui";
  content: "↕";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding-right: 0.375em;
}
.lil-gui .controller.option .widget,
.lil-gui .controller.option select {
  cursor: pointer;
}
@media (hover: hover) {
  .lil-gui .controller.option .widget:hover .display {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number input {
  color: var(--number-color);
}
.lil-gui .controller.number.hasSlider input {
  margin-left: var(--spacing);
  width: var(--slider-input-width);
  min-width: var(--slider-input-min-width);
  flex-shrink: 0;
}
.lil-gui .controller.number .slider {
  width: 100%;
  height: var(--widget-height);
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  padding-right: var(--slider-knob-width);
  overflow: hidden;
  cursor: ew-resize;
  touch-action: pan-y;
}
@media (hover: hover) {
  .lil-gui .controller.number .slider:hover {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number .slider.active {
  background: var(--focus-color);
}
.lil-gui .controller.number .slider.active .fill {
  opacity: 0.95;
}
.lil-gui .controller.number .fill {
  height: 100%;
  border-right: var(--slider-knob-width) solid var(--number-color);
  box-sizing: content-box;
}

.lil-gui-dragging .lil-gui {
  --hover-color: var(--widget-color);
}
.lil-gui-dragging * {
  cursor: ew-resize !important;
}

.lil-gui-dragging.lil-gui-vertical * {
  cursor: ns-resize !important;
}

.lil-gui .title {
  height: var(--title-height);
  line-height: calc(var(--title-height) - 4px);
  font-weight: 600;
  padding: 0 var(--padding);
  -webkit-tap-highlight-color: transparent;
  cursor: pointer;
  outline: none;
  text-decoration-skip: objects;
}
.lil-gui .title:before {
  font-family: "lil-gui";
  content: "▾";
  padding-right: 2px;
  display: inline-block;
}
.lil-gui .title:active {
  background: var(--title-background-color);
  opacity: 0.75;
}
@media (hover: hover) {
  body:not(.lil-gui-dragging) .lil-gui .title:hover {
    background: var(--title-background-color);
    opacity: 0.85;
  }
  .lil-gui .title:focus {
    text-decoration: underline var(--focus-color);
  }
}
.lil-gui.root > .title:focus {
  text-decoration: none !important;
}
.lil-gui.closed > .title:before {
  content: "▸";
}
.lil-gui.closed > .children {
  transform: translateY(-7px);
  opacity: 0;
}
.lil-gui.closed:not(.transition) > .children {
  display: none;
}
.lil-gui.transition > .children {
  transition-duration: 300ms;
  transition-property: height, opacity, transform;
  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);
  overflow: hidden;
  pointer-events: none;
}
.lil-gui .children:empty:before {
  content: "Empty";
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
  display: block;
  height: var(--widget-height);
  font-style: italic;
  line-height: var(--widget-height);
  opacity: 0.5;
}
.lil-gui.root > .children > .lil-gui > .title {
  border: 0 solid var(--widget-color);
  border-width: 1px 0;
  transition: border-color 300ms;
}
.lil-gui.root > .children > .lil-gui.closed > .title {
  border-bottom-color: transparent;
}
.lil-gui + .controller {
  border-top: 1px solid var(--widget-color);
  margin-top: 0;
  padding-top: var(--spacing);
}
.lil-gui .lil-gui .lil-gui > .title {
  border: none;
}
.lil-gui .lil-gui .lil-gui > .children {
  border: none;
  margin-left: var(--folder-indent);
  border-left: 2px solid var(--widget-color);
}
.lil-gui .lil-gui .controller {
  border: none;
}

.lil-gui label, .lil-gui input, .lil-gui button {
  -webkit-tap-highlight-color: transparent;
}
.lil-gui input {
  border: 0;
  outline: none;
  font-family: var(--font-family);
  font-size: var(--input-font-size);
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  background: var(--widget-color);
  color: var(--text-color);
  width: 100%;
}
@media (hover: hover) {
  .lil-gui input:hover {
    background: var(--hover-color);
  }
  .lil-gui input:active {
    background: var(--focus-color);
  }
}
.lil-gui input:disabled {
  opacity: 1;
}
.lil-gui input[type=text],
.lil-gui input[type=number] {
  padding: var(--widget-padding);
  -moz-appearance: textfield;
}
.lil-gui input[type=text]:focus,
.lil-gui input[type=number]:focus {
  background: var(--focus-color);
}
.lil-gui input[type=checkbox] {
  appearance: none;
  width: var(--checkbox-size);
  height: var(--checkbox-size);
  border-radius: var(--widget-border-radius);
  text-align: center;
  cursor: pointer;
}
.lil-gui input[type=checkbox]:checked:before {
  font-family: "lil-gui";
  content: "✓";
  font-size: var(--checkbox-size);
  line-height: var(--checkbox-size);
}
@media (hover: hover) {
  .lil-gui input[type=checkbox]:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button {
  outline: none;
  cursor: pointer;
  font-family: var(--font-family);
  font-size: var(--font-size);
  color: var(--text-color);
  width: 100%;
  height: var(--widget-height);
  text-transform: none;
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  border: none;
}
@media (hover: hover) {
  .lil-gui button:hover {
    background: var(--hover-color);
  }
  .lil-gui button:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button:active {
  background: var(--focus-color);
}

@font-face {
  font-family: "lil-gui";
  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");
}`;function _injectStyles(n){const t=document.createElement("style");t.innerHTML=n;const s=document.querySelector("head link[rel=stylesheet], head style");s?document.head.insertBefore(t,s):document.head.appendChild(t)}let stylesInjected=!1;class GUI{constructor({parent:t,autoPlace:s=t===void 0,container:o,width:u,title:h="Controls",closeFolders:f=!1,injectStyles:g=!0,touchStyles:v=!0}={}){if(this.parent=t,this.root=t?t.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",O=>{(O.code==="Enter"||O.code==="Space")&&(O.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(h),this.parent){this.parent.children.push(this),this.parent.folders.push(this),this.parent.$children.appendChild(this.domElement);return}this.domElement.classList.add("root"),v&&this.domElement.classList.add("allow-touch-styles"),!stylesInjected&&g&&(_injectStyles(stylesheet),stylesInjected=!0),o?o.appendChild(this.domElement):s&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),u&&this.domElement.style.setProperty("--width",u+"px"),this._closeFolders=f}add(t,s,o,u,h){if(Object(o)===o)return new OptionController(this,t,s,o);const f=t[s];switch(typeof f){case"number":return new NumberController(this,t,s,o,u,h);case"boolean":return new BooleanController(this,t,s);case"string":return new StringController(this,t,s);case"function":return new FunctionController(this,t,s)}console.error(`gui.add failed
	property:`,s,`
	object:`,t,`
	value:`,f)}addColor(t,s,o=1){return new ColorController(this,t,s,o)}addFolder(t){const s=new GUI({parent:this,title:t});return this.root._closeFolders&&s.close(),s}load(t,s=!0){return t.controllers&&this.controllers.forEach(o=>{o instanceof FunctionController||o._name in t.controllers&&o.load(t.controllers[o._name])}),s&&t.folders&&this.folders.forEach(o=>{o._title in t.folders&&o.load(t.folders[o._title])}),this}save(t=!0){const s={controllers:{},folders:{}};return this.controllers.forEach(o=>{if(!(o instanceof FunctionController)){if(o._name in s.controllers)throw new Error(`Cannot save GUI with duplicate property "${o._name}"`);s.controllers[o._name]=o.save()}}),t&&this.folders.forEach(o=>{if(o._title in s.folders)throw new Error(`Cannot save GUI with duplicate folder "${o._title}"`);s.folders[o._title]=o.save()}),s}open(t=!0){return this._setClosed(!t),this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}_setClosed(t){this._closed!==t&&(this._closed=t,this._callOnOpenClose(this))}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(t=!0){return this._setClosed(!t),this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const s=this.$children.clientHeight;this.$children.style.height=s+"px",this.domElement.classList.add("transition");const o=h=>{h.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",o))};this.$children.addEventListener("transitionend",o);const u=t?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!t),requestAnimationFrame(()=>{this.$children.style.height=u+"px"})}),this}title(t){return this._title=t,this.$title.textContent=t,this}reset(t=!0){return(t?this.controllersRecursive():this.controllers).forEach(o=>o.reset()),this}onChange(t){return this._onChange=t,this}_callOnChange(t){this.parent&&this.parent._callOnChange(t),this._onChange!==void 0&&this._onChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(t){this.parent&&this.parent._callOnFinishChange(t),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}onOpenClose(t){return this._onOpenClose=t,this}_callOnOpenClose(t){this.parent&&this.parent._callOnOpenClose(t),this._onOpenClose!==void 0&&this._onOpenClose.call(this,t)}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(t=>t.destroy())}controllersRecursive(){let t=Array.from(this.controllers);return this.folders.forEach(s=>{t=t.concat(s.controllersRecursive())}),t}foldersRecursive(){let t=Array.from(this.folders);return this.folders.forEach(s=>{t=t.concat(s.foldersRecursive())}),t}}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function getAugmentedNamespace(n){if(n.__esModule)return n;var t=n.default;if(typeof t=="function"){var s=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(n).forEach(function(o){var u=Object.getOwnPropertyDescriptor(n,o);Object.defineProperty(s,o,u.get?u:{enumerable:!0,get:function(){return n[o]}})}),s}var johnnyFive={exports:{}};function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var browser$3={exports:{}},process=browser$3.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(n){if(cachedSetTimeout===setTimeout)return setTimeout(n,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(n,0);try{return cachedSetTimeout(n,0)}catch{try{return cachedSetTimeout.call(null,n,0)}catch{return cachedSetTimeout.call(this,n,0)}}}function runClearTimeout(n){if(cachedClearTimeout===clearTimeout)return clearTimeout(n);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(n);try{return cachedClearTimeout(n)}catch{try{return cachedClearTimeout.call(null,n)}catch{return cachedClearTimeout.call(this,n)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var n=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(n)}}process.nextTick=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];queue.push(new Item(n,t)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(n,t){this.fun=n,this.array=t}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=!0;process.env={};process.argv=[];process.version="";process.versions={};function noop$1(){}process.on=noop$1;process.addListener=noop$1;process.once=noop$1;process.off=noop$1;process.removeListener=noop$1;process.removeAllListeners=noop$1;process.emit=noop$1;process.prependListener=noop$1;process.prependOnceListener=noop$1;process.listeners=function(n){return[]};process.binding=function(n){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(n){throw new Error("process.chdir is not supported")};process.umask=function(){return 0};var browserExports=browser$3.exports;const process$1=getDefaultExportFromCjs(browserExports);var events={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function(t,s,o){return Function.prototype.apply.call(t,s,o)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:ReflectOwnKeys=function(t){return Object.getOwnPropertyNames(t)};function ProcessEmitWarning(n){console&&console.warn&&console.warn(n)}var NumberIsNaN=Number.isNaN||function(t){return t!==t};function EventEmitter$3(){EventEmitter$3.init.call(this)}events.exports=EventEmitter$3;events.exports.once=once;EventEmitter$3.EventEmitter=EventEmitter$3;EventEmitter$3.prototype._events=void 0;EventEmitter$3.prototype._eventsCount=0;EventEmitter$3.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(EventEmitter$3,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(n){if(typeof n!="number"||n<0||NumberIsNaN(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");defaultMaxListeners=n}});EventEmitter$3.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter$3.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||NumberIsNaN(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function _getMaxListeners(n){return n._maxListeners===void 0?EventEmitter$3.defaultMaxListeners:n._maxListeners}EventEmitter$3.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter$3.prototype.emit=function(t){for(var s=[],o=1;o<arguments.length;o++)s.push(arguments[o]);var u=t==="error",h=this._events;if(h!==void 0)u=u&&h.error===void 0;else if(!u)return!1;if(u){var f;if(s.length>0&&(f=s[0]),f instanceof Error)throw f;var g=new Error("Unhandled error."+(f?" ("+f.message+")":""));throw g.context=f,g}var v=h[t];if(v===void 0)return!1;if(typeof v=="function")ReflectApply(v,this,s);else for(var O=v.length,E=arrayClone(v,O),o=0;o<O;++o)ReflectApply(E[o],this,s);return!0};function _addListener(n,t,s,o){var u,h,f;if(checkListener(s),h=n._events,h===void 0?(h=n._events=Object.create(null),n._eventsCount=0):(h.newListener!==void 0&&(n.emit("newListener",t,s.listener?s.listener:s),h=n._events),f=h[t]),f===void 0)f=h[t]=s,++n._eventsCount;else if(typeof f=="function"?f=h[t]=o?[s,f]:[f,s]:o?f.unshift(s):f.push(s),u=_getMaxListeners(n),u>0&&f.length>u&&!f.warned){f.warned=!0;var g=new Error("Possible EventEmitter memory leak detected. "+f.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");g.name="MaxListenersExceededWarning",g.emitter=n,g.type=t,g.count=f.length,ProcessEmitWarning(g)}return n}EventEmitter$3.prototype.addListener=function(t,s){return _addListener(this,t,s,!1)};EventEmitter$3.prototype.on=EventEmitter$3.prototype.addListener;EventEmitter$3.prototype.prependListener=function(t,s){return _addListener(this,t,s,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(n,t,s){var o={fired:!1,wrapFn:void 0,target:n,type:t,listener:s},u=onceWrapper.bind(o);return u.listener=s,o.wrapFn=u,u}EventEmitter$3.prototype.once=function(t,s){return checkListener(s),this.on(t,_onceWrap(this,t,s)),this};EventEmitter$3.prototype.prependOnceListener=function(t,s){return checkListener(s),this.prependListener(t,_onceWrap(this,t,s)),this};EventEmitter$3.prototype.removeListener=function(t,s){var o,u,h,f,g;if(checkListener(s),u=this._events,u===void 0)return this;if(o=u[t],o===void 0)return this;if(o===s||o.listener===s)--this._eventsCount===0?this._events=Object.create(null):(delete u[t],u.removeListener&&this.emit("removeListener",t,o.listener||s));else if(typeof o!="function"){for(h=-1,f=o.length-1;f>=0;f--)if(o[f]===s||o[f].listener===s){g=o[f].listener,h=f;break}if(h<0)return this;h===0?o.shift():spliceOne(o,h),o.length===1&&(u[t]=o[0]),u.removeListener!==void 0&&this.emit("removeListener",t,g||s)}return this};EventEmitter$3.prototype.off=EventEmitter$3.prototype.removeListener;EventEmitter$3.prototype.removeAllListeners=function(t){var s,o,u;if(o=this._events,o===void 0)return this;if(o.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):o[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete o[t]),this;if(arguments.length===0){var h=Object.keys(o),f;for(u=0;u<h.length;++u)f=h[u],f!=="removeListener"&&this.removeAllListeners(f);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(s=o[t],typeof s=="function")this.removeListener(t,s);else if(s!==void 0)for(u=s.length-1;u>=0;u--)this.removeListener(t,s[u]);return this};function _listeners(n,t,s){var o=n._events;if(o===void 0)return[];var u=o[t];return u===void 0?[]:typeof u=="function"?s?[u.listener||u]:[u]:s?unwrapListeners(u):arrayClone(u,u.length)}EventEmitter$3.prototype.listeners=function(t){return _listeners(this,t,!0)};EventEmitter$3.prototype.rawListeners=function(t){return _listeners(this,t,!1)};EventEmitter$3.listenerCount=function(n,t){return typeof n.listenerCount=="function"?n.listenerCount(t):listenerCount.call(n,t)};EventEmitter$3.prototype.listenerCount=listenerCount;function listenerCount(n){var t=this._events;if(t!==void 0){var s=t[n];if(typeof s=="function")return 1;if(s!==void 0)return s.length}return 0}EventEmitter$3.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(n,t){for(var s=new Array(t),o=0;o<t;++o)s[o]=n[o];return s}function spliceOne(n,t){for(;t+1<n.length;t++)n[t]=n[t+1];n.pop()}function unwrapListeners(n){for(var t=new Array(n.length),s=0;s<t.length;++s)t[s]=n[s].listener||n[s];return t}function once(n,t){return new Promise(function(s,o){function u(f){n.removeListener(t,h),o(f)}function h(){typeof n.removeListener=="function"&&n.removeListener("error",u),s([].slice.call(arguments))}eventTargetAgnosticAddListener(n,t,h,{once:!0}),t!=="error"&&addErrorHandlerIfEventEmitter(n,u,{once:!0})})}function addErrorHandlerIfEventEmitter(n,t,s){typeof n.on=="function"&&eventTargetAgnosticAddListener(n,"error",t,s)}function eventTargetAgnosticAddListener(n,t,s,o){if(typeof n.on=="function")o.once?n.once(t,s):n.on(t,s);else if(typeof n.addEventListener=="function")n.addEventListener(t,function u(h){o.once&&n.removeEventListener(t,u),s(h)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var eventsExports=events.exports;const EventEmitter$4=getDefaultExportFromCjs$1(eventsExports),EventEmitter$2=eventsExports,wm=new WeakMap;let Emitter$g=class extends EventEmitter$2{pause(){wm.set(this,{...this._events}),this._events={__proto__:null}}resume(){const t=wm.get(this);t&&(this._events={__proto__:null,...t},wm.set(this,null))}};Object.assign(Emitter$g.prototype,EventEmitter$2.prototype);var emitter=Emitter$g,chalk={exports:{}},matchOperatorsRe=/[|\\{}()[\]^$+*?.]/g,escapeStringRegexp$1=function(n){if(typeof n!="string")throw new TypeError("Expected a string");return n.replace(matchOperatorsRe,"\\$&")},ansiStyles$1={exports:{}},conversions$5={exports:{}},colorName={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},cssKeywords$2=colorName,reverseKeywords$1={};for(var key$1 in cssKeywords$2)cssKeywords$2.hasOwnProperty(key$1)&&(reverseKeywords$1[cssKeywords$2[key$1]]=key$1);var convert$3=conversions$5.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var model$1 in convert$3)if(convert$3.hasOwnProperty(model$1)){if(!("channels"in convert$3[model$1]))throw new Error("missing channels property: "+model$1);if(!("labels"in convert$3[model$1]))throw new Error("missing channel labels property: "+model$1);if(convert$3[model$1].labels.length!==convert$3[model$1].channels)throw new Error("channel and label counts mismatch: "+model$1);var channels$1=convert$3[model$1].channels,labels=convert$3[model$1].labels;delete convert$3[model$1].channels,delete convert$3[model$1].labels,Object.defineProperty(convert$3[model$1],"channels",{value:channels$1}),Object.defineProperty(convert$3[model$1],"labels",{value:labels})}convert$3.rgb.hsl=function(n){var t=n[0]/255,s=n[1]/255,o=n[2]/255,u=Math.min(t,s,o),h=Math.max(t,s,o),f=h-u,g,v,O;return h===u?g=0:t===h?g=(s-o)/f:s===h?g=2+(o-t)/f:o===h&&(g=4+(t-s)/f),g=Math.min(g*60,360),g<0&&(g+=360),O=(u+h)/2,h===u?v=0:O<=.5?v=f/(h+u):v=f/(2-h-u),[g,v*100,O*100]};convert$3.rgb.hsv=function(n){var t,s,o,u,h,f=n[0]/255,g=n[1]/255,v=n[2]/255,O=Math.max(f,g,v),E=O-Math.min(f,g,v),_=function(p){return(O-p)/6/E+1/2};return E===0?u=h=0:(h=E/O,t=_(f),s=_(g),o=_(v),f===O?u=o-s:g===O?u=1/3+t-o:v===O&&(u=2/3+s-t),u<0?u+=1:u>1&&(u-=1)),[u*360,h*100,O*100]};convert$3.rgb.hwb=function(n){var t=n[0],s=n[1],o=n[2],u=convert$3.rgb.hsl(n)[0],h=1/255*Math.min(t,Math.min(s,o));return o=1-1/255*Math.max(t,Math.max(s,o)),[u,h*100,o*100]};convert$3.rgb.cmyk=function(n){var t=n[0]/255,s=n[1]/255,o=n[2]/255,u,h,f,g;return g=Math.min(1-t,1-s,1-o),u=(1-t-g)/(1-g)||0,h=(1-s-g)/(1-g)||0,f=(1-o-g)/(1-g)||0,[u*100,h*100,f*100,g*100]};function comparativeDistance(n,t){return Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2)+Math.pow(n[2]-t[2],2)}convert$3.rgb.keyword=function(n){var t=reverseKeywords$1[n];if(t)return t;var s=1/0,o;for(var u in cssKeywords$2)if(cssKeywords$2.hasOwnProperty(u)){var h=cssKeywords$2[u],f=comparativeDistance(n,h);f<s&&(s=f,o=u)}return o};convert$3.keyword.rgb=function(n){return cssKeywords$2[n]};convert$3.rgb.xyz=function(n){var t=n[0]/255,s=n[1]/255,o=n[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92;var u=t*.4124+s*.3576+o*.1805,h=t*.2126+s*.7152+o*.0722,f=t*.0193+s*.1192+o*.9505;return[u*100,h*100,f*100]};convert$3.rgb.lab=function(n){var t=convert$3.rgb.xyz(n),s=t[0],o=t[1],u=t[2],h,f,g;return s/=95.047,o/=100,u/=108.883,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,u=u>.008856?Math.pow(u,1/3):7.787*u+16/116,h=116*o-16,f=500*(s-o),g=200*(o-u),[h,f,g]};convert$3.hsl.rgb=function(n){var t=n[0]/360,s=n[1]/100,o=n[2]/100,u,h,f,g,v;if(s===0)return v=o*255,[v,v,v];o<.5?h=o*(1+s):h=o+s-o*s,u=2*o-h,g=[0,0,0];for(var O=0;O<3;O++)f=t+1/3*-(O-1),f<0&&f++,f>1&&f--,6*f<1?v=u+(h-u)*6*f:2*f<1?v=h:3*f<2?v=u+(h-u)*(2/3-f)*6:v=u,g[O]=v*255;return g};convert$3.hsl.hsv=function(n){var t=n[0],s=n[1]/100,o=n[2]/100,u=s,h=Math.max(o,.01),f,g;return o*=2,s*=o<=1?o:2-o,u*=h<=1?h:2-h,g=(o+s)/2,f=o===0?2*u/(h+u):2*s/(o+s),[t,f*100,g*100]};convert$3.hsv.rgb=function(n){var t=n[0]/60,s=n[1]/100,o=n[2]/100,u=Math.floor(t)%6,h=t-Math.floor(t),f=255*o*(1-s),g=255*o*(1-s*h),v=255*o*(1-s*(1-h));switch(o*=255,u){case 0:return[o,v,f];case 1:return[g,o,f];case 2:return[f,o,v];case 3:return[f,g,o];case 4:return[v,f,o];case 5:return[o,f,g]}};convert$3.hsv.hsl=function(n){var t=n[0],s=n[1]/100,o=n[2]/100,u=Math.max(o,.01),h,f,g;return g=(2-s)*o,h=(2-s)*u,f=s*u,f/=h<=1?h:2-h,f=f||0,g/=2,[t,f*100,g*100]};convert$3.hwb.rgb=function(n){var t=n[0]/360,s=n[1]/100,o=n[2]/100,u=s+o,h,f,g,v;u>1&&(s/=u,o/=u),h=Math.floor(6*t),f=1-o,g=6*t-h,h&1&&(g=1-g),v=s+g*(f-s);var O,E,_;switch(h){default:case 6:case 0:O=f,E=v,_=s;break;case 1:O=v,E=f,_=s;break;case 2:O=s,E=f,_=v;break;case 3:O=s,E=v,_=f;break;case 4:O=v,E=s,_=f;break;case 5:O=f,E=s,_=v;break}return[O*255,E*255,_*255]};convert$3.cmyk.rgb=function(n){var t=n[0]/100,s=n[1]/100,o=n[2]/100,u=n[3]/100,h,f,g;return h=1-Math.min(1,t*(1-u)+u),f=1-Math.min(1,s*(1-u)+u),g=1-Math.min(1,o*(1-u)+u),[h*255,f*255,g*255]};convert$3.xyz.rgb=function(n){var t=n[0]/100,s=n[1]/100,o=n[2]/100,u,h,f;return u=t*3.2406+s*-1.5372+o*-.4986,h=t*-.9689+s*1.8758+o*.0415,f=t*.0557+s*-.204+o*1.057,u=u>.0031308?1.055*Math.pow(u,1/2.4)-.055:u*12.92,h=h>.0031308?1.055*Math.pow(h,1/2.4)-.055:h*12.92,f=f>.0031308?1.055*Math.pow(f,1/2.4)-.055:f*12.92,u=Math.min(Math.max(0,u),1),h=Math.min(Math.max(0,h),1),f=Math.min(Math.max(0,f),1),[u*255,h*255,f*255]};convert$3.xyz.lab=function(n){var t=n[0],s=n[1],o=n[2],u,h,f;return t/=95.047,s/=100,o/=108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,u=116*s-16,h=500*(t-s),f=200*(s-o),[u,h,f]};convert$3.lab.xyz=function(n){var t=n[0],s=n[1],o=n[2],u,h,f;h=(t+16)/116,u=s/500+h,f=h-o/200;var g=Math.pow(h,3),v=Math.pow(u,3),O=Math.pow(f,3);return h=g>.008856?g:(h-16/116)/7.787,u=v>.008856?v:(u-16/116)/7.787,f=O>.008856?O:(f-16/116)/7.787,u*=95.047,h*=100,f*=108.883,[u,h,f]};convert$3.lab.lch=function(n){var t=n[0],s=n[1],o=n[2],u,h,f;return u=Math.atan2(o,s),h=u*360/2/Math.PI,h<0&&(h+=360),f=Math.sqrt(s*s+o*o),[t,f,h]};convert$3.lch.lab=function(n){var t=n[0],s=n[1],o=n[2],u,h,f;return f=o/360*2*Math.PI,u=s*Math.cos(f),h=s*Math.sin(f),[t,u,h]};convert$3.rgb.ansi16=function(n){var t=n[0],s=n[1],o=n[2],u=1 in arguments?arguments[1]:convert$3.rgb.hsv(n)[2];if(u=Math.round(u/50),u===0)return 30;var h=30+(Math.round(o/255)<<2|Math.round(s/255)<<1|Math.round(t/255));return u===2&&(h+=60),h};convert$3.hsv.ansi16=function(n){return convert$3.rgb.ansi16(convert$3.hsv.rgb(n),n[2])};convert$3.rgb.ansi256=function(n){var t=n[0],s=n[1],o=n[2];if(t===s&&s===o)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;var u=16+36*Math.round(t/255*5)+6*Math.round(s/255*5)+Math.round(o/255*5);return u};convert$3.ansi16.rgb=function(n){var t=n%10;if(t===0||t===7)return n>50&&(t+=3.5),t=t/10.5*255,[t,t,t];var s=(~~(n>50)+1)*.5,o=(t&1)*s*255,u=(t>>1&1)*s*255,h=(t>>2&1)*s*255;return[o,u,h]};convert$3.ansi256.rgb=function(n){if(n>=232){var t=(n-232)*10+8;return[t,t,t]}n-=16;var s,o=Math.floor(n/36)/5*255,u=Math.floor((s=n%36)/6)/5*255,h=s%6/5*255;return[o,u,h]};convert$3.rgb.hex=function(n){var t=((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255),s=t.toString(16).toUpperCase();return"000000".substring(s.length)+s};convert$3.hex.rgb=function(n){var t=n.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var s=t[0];t[0].length===3&&(s=s.split("").map(function(g){return g+g}).join(""));var o=parseInt(s,16),u=o>>16&255,h=o>>8&255,f=o&255;return[u,h,f]};convert$3.rgb.hcg=function(n){var t=n[0]/255,s=n[1]/255,o=n[2]/255,u=Math.max(Math.max(t,s),o),h=Math.min(Math.min(t,s),o),f=u-h,g,v;return f<1?g=h/(1-f):g=0,f<=0?v=0:u===t?v=(s-o)/f%6:u===s?v=2+(o-t)/f:v=4+(t-s)/f+4,v/=6,v%=1,[v*360,f*100,g*100]};convert$3.hsl.hcg=function(n){var t=n[1]/100,s=n[2]/100,o=1,u=0;return s<.5?o=2*t*s:o=2*t*(1-s),o<1&&(u=(s-.5*o)/(1-o)),[n[0],o*100,u*100]};convert$3.hsv.hcg=function(n){var t=n[1]/100,s=n[2]/100,o=t*s,u=0;return o<1&&(u=(s-o)/(1-o)),[n[0],o*100,u*100]};convert$3.hcg.rgb=function(n){var t=n[0]/360,s=n[1]/100,o=n[2]/100;if(s===0)return[o*255,o*255,o*255];var u=[0,0,0],h=t%1*6,f=h%1,g=1-f,v=0;switch(Math.floor(h)){case 0:u[0]=1,u[1]=f,u[2]=0;break;case 1:u[0]=g,u[1]=1,u[2]=0;break;case 2:u[0]=0,u[1]=1,u[2]=f;break;case 3:u[0]=0,u[1]=g,u[2]=1;break;case 4:u[0]=f,u[1]=0,u[2]=1;break;default:u[0]=1,u[1]=0,u[2]=g}return v=(1-s)*o,[(s*u[0]+v)*255,(s*u[1]+v)*255,(s*u[2]+v)*255]};convert$3.hcg.hsv=function(n){var t=n[1]/100,s=n[2]/100,o=t+s*(1-t),u=0;return o>0&&(u=t/o),[n[0],u*100,o*100]};convert$3.hcg.hsl=function(n){var t=n[1]/100,s=n[2]/100,o=s*(1-t)+.5*t,u=0;return o>0&&o<.5?u=t/(2*o):o>=.5&&o<1&&(u=t/(2*(1-o))),[n[0],u*100,o*100]};convert$3.hcg.hwb=function(n){var t=n[1]/100,s=n[2]/100,o=t+s*(1-t);return[n[0],(o-t)*100,(1-o)*100]};convert$3.hwb.hcg=function(n){var t=n[1]/100,s=n[2]/100,o=1-s,u=o-t,h=0;return u<1&&(h=(o-u)/(1-u)),[n[0],u*100,h*100]};convert$3.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};convert$3.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};convert$3.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};convert$3.gray.hsl=convert$3.gray.hsv=function(n){return[0,0,n[0]]};convert$3.gray.hwb=function(n){return[0,100,n[0]]};convert$3.gray.cmyk=function(n){return[0,0,0,n[0]]};convert$3.gray.lab=function(n){return[n[0],0,0]};convert$3.gray.hex=function(n){var t=Math.round(n[0]/100*255)&255,s=(t<<16)+(t<<8)+t,o=s.toString(16).toUpperCase();return"000000".substring(o.length)+o};convert$3.rgb.gray=function(n){var t=(n[0]+n[1]+n[2])/3;return[t/255*100]};var conversionsExports$1=conversions$5.exports,conversions$4=conversionsExports$1;function buildGraph$1(){for(var n={},t=Object.keys(conversions$4),s=t.length,o=0;o<s;o++)n[t[o]]={distance:-1,parent:null};return n}function deriveBFS$1(n){var t=buildGraph$1(),s=[n];for(t[n].distance=0;s.length;)for(var o=s.pop(),u=Object.keys(conversions$4[o]),h=u.length,f=0;f<h;f++){var g=u[f],v=t[g];v.distance===-1&&(v.distance=t[o].distance+1,v.parent=o,s.unshift(g))}return t}function link$1(n,t){return function(s){return t(n(s))}}function wrapConversion$1(n,t){for(var s=[t[n].parent,n],o=conversions$4[t[n].parent][n],u=t[n].parent;t[u].parent;)s.unshift(t[u].parent),o=link$1(conversions$4[t[u].parent][u],o),u=t[u].parent;return o.conversion=s,o}var route$3=function(n){for(var t=deriveBFS$1(n),s={},o=Object.keys(t),u=o.length,h=0;h<u;h++){var f=o[h],g=t[f];g.parent!==null&&(s[f]=wrapConversion$1(f,t))}return s},conversions$3=conversionsExports$1,route$2=route$3,convert$2={},models$2=Object.keys(conversions$3);function wrapRaw$1(n){var t=function(s){return s==null?s:(arguments.length>1&&(s=Array.prototype.slice.call(arguments)),n(s))};return"conversion"in n&&(t.conversion=n.conversion),t}function wrapRounded$1(n){var t=function(s){if(s==null)return s;arguments.length>1&&(s=Array.prototype.slice.call(arguments));var o=n(s);if(typeof o=="object")for(var u=o.length,h=0;h<u;h++)o[h]=Math.round(o[h]);return o};return"conversion"in n&&(t.conversion=n.conversion),t}models$2.forEach(function(n){convert$2[n]={},Object.defineProperty(convert$2[n],"channels",{value:conversions$3[n].channels}),Object.defineProperty(convert$2[n],"labels",{value:conversions$3[n].labels});var t=route$2(n),s=Object.keys(t);s.forEach(function(o){var u=t[o];convert$2[n][o]=wrapRounded$1(u),convert$2[n][o].raw=wrapRaw$1(u)})});var colorConvert$1=convert$2;ansiStyles$1.exports;(function(n){const t=colorConvert$1,s=(f,g)=>function(){return`\x1B[${f.apply(t,arguments)+g}m`},o=(f,g)=>function(){const v=f.apply(t,arguments);return`\x1B[${38+g};5;${v}m`},u=(f,g)=>function(){const v=f.apply(t,arguments);return`\x1B[${38+g};2;${v[0]};${v[1]};${v[2]}m`};function h(){const f=new Map,g={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};g.color.grey=g.color.gray;for(const E of Object.keys(g)){const _=g[E];for(const p of Object.keys(_)){const b=_[p];g[p]={open:`\x1B[${b[0]}m`,close:`\x1B[${b[1]}m`},_[p]=g[p],f.set(b[0],b[1])}Object.defineProperty(g,E,{value:_,enumerable:!1}),Object.defineProperty(g,"codes",{value:f,enumerable:!1})}const v=E=>E,O=(E,_,p)=>[E,_,p];g.color.close="\x1B[39m",g.bgColor.close="\x1B[49m",g.color.ansi={ansi:s(v,0)},g.color.ansi256={ansi256:o(v,0)},g.color.ansi16m={rgb:u(O,0)},g.bgColor.ansi={ansi:s(v,10)},g.bgColor.ansi256={ansi256:o(v,10)},g.bgColor.ansi16m={rgb:u(O,10)};for(let E of Object.keys(t)){if(typeof t[E]!="object")continue;const _=t[E];E==="ansi16"&&(E="ansi"),"ansi16"in _&&(g.color.ansi[E]=s(_.ansi16,0),g.bgColor.ansi[E]=s(_.ansi16,10)),"ansi256"in _&&(g.color.ansi256[E]=o(_.ansi256,0),g.bgColor.ansi256[E]=o(_.ansi256,10)),"rgb"in _&&(g.color.ansi16m[E]=u(_.rgb,0),g.bgColor.ansi16m[E]=u(_.rgb,10))}return g}Object.defineProperty(n,"exports",{enumerable:!0,get:h})})(ansiStyles$1);var ansiStylesExports=ansiStyles$1.exports,browser$2=!1;const TEMPLATE_REGEX=/(?:\\(u[a-f0-9]{4}|x[a-f0-9]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,STYLE_REGEX=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,STRING_REGEX=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,ESCAPE_REGEX=/\\(u[0-9a-f]{4}|x[0-9a-f]{2}|.)|([^\\])/gi,ESCAPES={n:`
`,r:"\r",t:"	",b:"\b",f:"\f",v:"\v",0:"\0","\\":"\\",e:"\x1B",a:"\x07"};function unescape(n){return n[0]==="u"&&n.length===5||n[0]==="x"&&n.length===3?String.fromCharCode(parseInt(n.slice(1),16)):ESCAPES[n]||n}function parseArguments(n,t){const s=[],o=t.trim().split(/\s*,\s*/g);let u;for(const h of o)if(!isNaN(h))s.push(Number(h));else if(u=h.match(STRING_REGEX))s.push(u[2].replace(ESCAPE_REGEX,(f,g,v)=>g?unescape(g):v));else throw new Error(`Invalid Chalk template style argument: ${h} (in style '${n}')`);return s}function parseStyle(n){STYLE_REGEX.lastIndex=0;const t=[];let s;for(;(s=STYLE_REGEX.exec(n))!==null;){const o=s[1];if(s[2]){const u=parseArguments(o,s[2]);t.push([o].concat(u))}else t.push([o])}return t}function buildStyle(n,t){const s={};for(const u of t)for(const h of u.styles)s[h[0]]=u.inverse?null:h.slice(1);let o=n;for(const u of Object.keys(s))if(Array.isArray(s[u])){if(!(u in o))throw new Error(`Unknown Chalk style: ${u}`);s[u].length>0?o=o[u].apply(o,s[u]):o=o[u]}return o}var templates=(n,t)=>{const s=[],o=[];let u=[];if(t.replace(TEMPLATE_REGEX,(h,f,g,v,O,E)=>{if(f)u.push(unescape(f));else if(v){const _=u.join("");u=[],o.push(s.length===0?_:buildStyle(n,s)(_)),s.push({inverse:g,styles:parseStyle(v)})}else if(O){if(s.length===0)throw new Error("Found extraneous } in Chalk template literal");o.push(buildStyle(n,s)(u.join(""))),u=[],s.pop()}else u.push(E)}),o.push(u.join("")),s.length>0){const h=`Chalk template literal is missing ${s.length} closing bracket${s.length===1?"":"s"} (\`}\`)`;throw new Error(h)}return o.join("")},define_process_env_default$i={};const escapeStringRegexp=escapeStringRegexp$1,ansiStyles=ansiStylesExports,supportsColor=browser$2,template=templates,isSimpleWindowsTerm=process$1.platform==="win32"&&!(define_process_env_default$i.TERM||"").toLowerCase().startsWith("xterm"),levelMapping=["ansi","ansi","ansi256","ansi16m"],skipModels=new Set(["gray"]),styles=Object.create(null);function applyOptions(n,t){t=t||{};const s=0;n.level=t.level===void 0?s:t.level,n.enabled="enabled"in t?t.enabled:n.level>0}function Chalk(n){if(!this||!(this instanceof Chalk)||this.template){const t={};return applyOptions(t,n),t.template=function(){const s=[].slice.call(arguments);return chalkTag.apply(null,[t.template].concat(s))},Object.setPrototypeOf(t,Chalk.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=Chalk,t.template}applyOptions(this,n)}isSimpleWindowsTerm&&(ansiStyles.blue.open="\x1B[94m");for(const n of Object.keys(ansiStyles))ansiStyles[n].closeRe=new RegExp(escapeStringRegexp(ansiStyles[n].close),"g"),styles[n]={get(){const t=ansiStyles[n];return build.call(this,this._styles?this._styles.concat(t):[t],n)}};ansiStyles.color.closeRe=new RegExp(escapeStringRegexp(ansiStyles.color.close),"g");for(const n of Object.keys(ansiStyles.color.ansi))skipModels.has(n)||(styles[n]={get(){const t=this.level;return function(){const o={open:ansiStyles.color[levelMapping[t]][n].apply(null,arguments),close:ansiStyles.color.close,closeRe:ansiStyles.color.closeRe};return build.call(this,this._styles?this._styles.concat(o):[o],n)}}});ansiStyles.bgColor.closeRe=new RegExp(escapeStringRegexp(ansiStyles.bgColor.close),"g");for(const n of Object.keys(ansiStyles.bgColor.ansi)){if(skipModels.has(n))continue;const t="bg"+n[0].toUpperCase()+n.slice(1);styles[t]={get(){const s=this.level;return function(){const u={open:ansiStyles.bgColor[levelMapping[s]][n].apply(null,arguments),close:ansiStyles.bgColor.close,closeRe:ansiStyles.bgColor.closeRe};return build.call(this,this._styles?this._styles.concat(u):[u],n)}}}}const proto=Object.defineProperties(()=>{},styles);function build(n,t){const s=function(){return applyStyle.apply(s,arguments)};s._styles=n;const o=this;return Object.defineProperty(s,"level",{enumerable:!0,get(){return o.level},set(u){o.level=u}}),Object.defineProperty(s,"enabled",{enumerable:!0,get(){return o.enabled},set(u){o.enabled=u}}),s.hasGrey=this.hasGrey||t==="gray"||t==="grey",s.__proto__=proto,s}function applyStyle(){const n=arguments,t=n.length;let s=String(arguments[0]);if(t===0)return"";if(t>1)for(let u=1;u<t;u++)s+=" "+n[u];if(!this.enabled||this.level<=0||!s)return s;const o=ansiStyles.dim.open;isSimpleWindowsTerm&&this.hasGrey&&(ansiStyles.dim.open="");for(const u of this._styles.slice().reverse())s=u.open+s.replace(u.closeRe,u.open)+u.close,s=s.replace(/\r?\n/g,`${u.close}$&${u.open}`);return ansiStyles.dim.open=o,s}function chalkTag(n,t){if(!Array.isArray(t))return[].slice.call(arguments,1).join(" ");const s=[].slice.call(arguments,2),o=[t.raw[0]];for(let u=1;u<t.length;u++)o.push(String(s[u-1]).replace(/[{}\\]/g,"\\$&")),o.push(String(t.raw[u]));return template(n,o.join(""))}Object.defineProperties(Chalk.prototype,styles);chalk.exports=Chalk();chalk.exports.supportsColor=supportsColor;var chalkExports=chalk.exports;const EventEmitter$1=eventsExports,Emitter$f=emitter;let Collection$d=class{constructor(t){const s=this.type;let o=[];if(this.length=0,Array.isArray(t))o=t;else if(Array.isArray(t.pins)){const u=Object.keys(t).filter(h=>h!=="pins");o=t.pins.map(h=>{const f={};return Array.isArray(h)?f.pins=h:f.pin=h,u.reduce((g,v)=>(g[v]=t[v],g),f)})}if(o.length)for(;o.length;){let u=o.shift();typeof s=="function"&&(u instanceof s||u instanceof this.constructor||(u=new s(u))),this.add(u)}}slice(){return new this.constructor([].slice.apply(this,arguments))}};Collection$d.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator];Collection$d.prototype.add=function(...n){let t=this.length;n.length===1&&n[0]instanceof this.constructor&&(n=n[0]);for(let s=0;s<n.length;s++)this.type?(n[s]instanceof this.type||n[s]instanceof this.constructor)&&(this[t++]=n[s]):this[t++]=n[s];return this.length=t};Collection$d.prototype.each=function(n){let t=this.length;for(let s=0;s<t;s++)n.call(this[s],this[s],s);return this};Collection$d.prototype.forEach=function(){[].forEach.apply(this,arguments)};Collection$d.prototype.includes=function(){return[].includes.apply(this,arguments)};Collection$d.prototype.indexOf=function(){return[].indexOf.apply(this,arguments)};Collection$d.prototype.map=function(){return[].map.apply(this,arguments)};Collection$d.prototype.byId=function(n){return[].find.call(this,function(t){return t.id!==void 0&&t.id===n})};Collection$d.installMethodForwarding=(n,t,s={})=>{const{skip:o=[]}=s,u="apply|arguments|bind|call|caller|constructor|domain|length|name|prototype|toString".split("|");return Object.getOwnPropertyNames(t).reduce((h,f)=>(o.includes(f)||u.includes(f)||(h[f]=function(...g){const v=this.length;for(let O=0;O<v;O++)this[O][f](...g);return this}),h),n)};const noop=()=>{};Collection$d.installCallbackReconciliation=(n,t)=>{t.forEach(s=>{n[s]=function(o,u){const h=this.length,f=[];typeof o=="function"&&(u=o,o=1e3),typeof u!="function"&&(u=noop);for(let g=0;g<h;g++)f.push(new Promise(v=>this[g][s](o,()=>v())));return Promise.all(f).then(u),this}})};Collection$d.Emitter=class extends Collection$d{constructor(n){super(n);let t=null,s=5;!Array.isArray(n)&&typeof n=="object"&&n!==null&&(s=n.freq||n.period||s,n.frequency&&(s=1/n.frequency*1e3)),Object.defineProperties(this,{period:{get(){return s},set(o){s!==o&&(s=o),t&&clearInterval(t),t=setInterval(()=>{this.emit("data",this)},s)}}}),this.period=s,this.on("newListener",o=>{o==="change"||o==="data"||this.forEach(u=>{u.on(o,h=>this.emit(o,u,h))})})}add(...n){return n.length&&(super.add(...n),n.forEach(t=>{t&&t.on("change",()=>this.emit("change",t))})),this.length}};Object.assign(Collection$d.Emitter.prototype,EventEmitter$1.prototype,Emitter$f.prototype);Collection$d.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator];var collection=Collection$d,FUNC_ERROR_TEXT="Expected a function",NAN=NaN,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),objectProto=Object.prototype,objectToString=objectProto.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root.Date.now()};function debounce(n,t,s){var o,u,h,f,g,v,O=0,E=!1,_=!1,p=!0;if(typeof n!="function")throw new TypeError(FUNC_ERROR_TEXT);t=toNumber(t)||0,isObject(s)&&(E=!!s.leading,_="maxWait"in s,h=_?nativeMax(toNumber(s.maxWait)||0,t):h,p="trailing"in s?!!s.trailing:p);function b(Z){var oe=o,k=u;return o=u=void 0,O=Z,f=n.apply(k,oe),f}function C(Z){return O=Z,g=setTimeout(T,t),E?b(Z):f}function P(Z){var oe=Z-v,k=Z-O,K=t-oe;return _?nativeMin(K,h-k):K}function A(Z){var oe=Z-v,k=Z-O;return v===void 0||oe>=t||oe<0||_&&k>=h}function T(){var Z=now();if(A(Z))return I(Z);g=setTimeout(T,P(Z))}function I(Z){return g=void 0,p&&o?b(Z):(o=u=void 0,f)}function M(){g!==void 0&&clearTimeout(g),O=0,o=v=u=g=void 0}function j(){return g===void 0?f:I(now())}function W(){var Z=now(),oe=A(Z);if(o=arguments,u=this,v=Z,oe){if(g===void 0)return C(v);if(_)return g=setTimeout(T,t),b(v)}return g===void 0&&(g=setTimeout(T,t)),f}return W.cancel=M,W.flush=j,W}function isObject(n){var t=typeof n;return!!n&&(t=="object"||t=="function")}function isObjectLike(n){return!!n&&typeof n=="object"}function isSymbol(n){return typeof n=="symbol"||isObjectLike(n)&&objectToString.call(n)==symbolTag}function toNumber(n){if(typeof n=="number")return n;if(isSymbol(n))return NAN;if(isObject(n)){var t=typeof n.valueOf=="function"?n.valueOf():n;n=isObject(t)?t+"":t}if(typeof n!="string")return n===0?n:+n;n=n.replace(reTrim,"");var s=reIsBinary.test(n);return s||reIsOctal.test(n)?freeParseInt(n.slice(2),s?2:8):reIsBadHex.test(n)?NAN:+n}var lodash_debounce=debounce,lodash_clonedeep={exports:{}};lodash_clonedeep.exports;(function(n,t){var s=200,o="__lodash_hash_undefined__",u=9007199254740991,h="[object Arguments]",f="[object Array]",g="[object Boolean]",v="[object Date]",O="[object Error]",E="[object Function]",_="[object GeneratorFunction]",p="[object Map]",b="[object Number]",C="[object Object]",P="[object Promise]",A="[object RegExp]",T="[object Set]",I="[object String]",M="[object Symbol]",j="[object WeakMap]",W="[object ArrayBuffer]",Z="[object DataView]",oe="[object Float32Array]",k="[object Float64Array]",K="[object Int8Array]",J="[object Int16Array]",Q="[object Int32Array]",ie="[object Uint8Array]",ue="[object Uint8ClampedArray]",fe="[object Uint16Array]",we="[object Uint32Array]",Te=/[\\^$.*+?()[\]{}|]/g,he=/\w*$/,ce=/^\[object .+?Constructor\]$/,Ce=/^(?:0|[1-9]\d*)$/,pe={};pe[h]=pe[f]=pe[W]=pe[Z]=pe[g]=pe[v]=pe[oe]=pe[k]=pe[K]=pe[J]=pe[Q]=pe[p]=pe[b]=pe[C]=pe[A]=pe[T]=pe[I]=pe[M]=pe[ie]=pe[ue]=pe[fe]=pe[we]=!0,pe[O]=pe[E]=pe[j]=!1;var Ie=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,Le=typeof self=="object"&&self&&self.Object===Object&&self,ee=Ie||Le||Function("return this")(),ae=t&&!t.nodeType&&t,de=ae&&!0&&n&&!n.nodeType&&n,X=de&&de.exports===ae;function re(z,ve){return z.set(ve[0],ve[1]),z}function ge(z,ve){return z.add(ve),z}function ye(z,ve){for(var _e=-1,We=z?z.length:0;++_e<We&&ve(z[_e],_e,z)!==!1;);return z}function Oe(z,ve){for(var _e=-1,We=ve.length,wt=z.length;++_e<We;)z[wt+_e]=ve[_e];return z}function F(z,ve,_e,We){for(var wt=-1,Lt=z?z.length:0;++wt<Lt;)_e=ve(_e,z[wt],wt,z);return _e}function H(z,ve){for(var _e=-1,We=Array(z);++_e<z;)We[_e]=ve(_e);return We}function Se(z,ve){return z==null?void 0:z[ve]}function Me(z){var ve=!1;if(z!=null&&typeof z.toString!="function")try{ve=!!(z+"")}catch{}return ve}function be(z){var ve=-1,_e=Array(z.size);return z.forEach(function(We,wt){_e[++ve]=[wt,We]}),_e}function Ne(z,ve){return function(_e){return z(ve(_e))}}function ze(z){var ve=-1,_e=Array(z.size);return z.forEach(function(We){_e[++ve]=We}),_e}var Xe=Array.prototype,xe=Function.prototype,ut=Object.prototype,dt=ee["__core-js_shared__"],Ue=function(){var z=/[^.]+$/.exec(dt&&dt.keys&&dt.keys.IE_PROTO||"");return z?"Symbol(src)_1."+z:""}(),me=xe.toString,De=ut.hasOwnProperty,Qe=ut.toString,Et=RegExp("^"+me.call(De).replace(Te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tt=X?ee.Buffer:void 0,st=ee.Symbol,Be=ee.Uint8Array,G=Ne(Object.getPrototypeOf,Object),x=Object.create,m=ut.propertyIsEnumerable,L=Xe.splice,N=Object.getOwnPropertySymbols,Y=Tt?Tt.isBuffer:void 0,le=Ne(Object.keys,Object),Ae=nr(ee,"DataView"),Fe=nr(ee,"Map"),Ge=nr(ee,"Promise"),Ye=nr(ee,"Set"),He=nr(ee,"WeakMap"),Je=nr(Object,"create"),St=Tr(Ae),it=Tr(Fe),lr=Tr(Ge),tr=Tr(Ye),ui=Tr(He),Lr=st?st.prototype:void 0,rr=Lr?Lr.valueOf:void 0;function yt(z){var ve=-1,_e=z?z.length:0;for(this.clear();++ve<_e;){var We=z[ve];this.set(We[0],We[1])}}function yr(){this.__data__=Je?Je(null):{}}function Bt(z){return this.has(z)&&delete this.__data__[z]}function Pr(z){var ve=this.__data__;if(Je){var _e=ve[z];return _e===o?void 0:_e}return De.call(ve,z)?ve[z]:void 0}function ci(z){var ve=this.__data__;return Je?ve[z]!==void 0:De.call(ve,z)}function Ft(z,ve){var _e=this.__data__;return _e[z]=Je&&ve===void 0?o:ve,this}yt.prototype.clear=yr,yt.prototype.delete=Bt,yt.prototype.get=Pr,yt.prototype.has=ci,yt.prototype.set=Ft;function $t(z){var ve=-1,_e=z?z.length:0;for(this.clear();++ve<_e;){var We=z[ve];this.set(We[0],We[1])}}function Ut(){this.__data__=[]}function ar(z){var ve=this.__data__,_e=fr(ve,z);if(_e<0)return!1;var We=ve.length-1;return _e==We?ve.pop():L.call(ve,_e,1),!0}function Kr(z){var ve=this.__data__,_e=fr(ve,z);return _e<0?void 0:ve[_e][1]}function Yr(z){return fr(this.__data__,z)>-1}function hi(z,ve){var _e=this.__data__,We=fr(_e,z);return We<0?_e.push([z,ve]):_e[We][1]=ve,this}$t.prototype.clear=Ut,$t.prototype.delete=ar,$t.prototype.get=Kr,$t.prototype.has=Yr,$t.prototype.set=hi;function ir(z){var ve=-1,_e=z?z.length:0;for(this.clear();++ve<_e;){var We=z[ve];this.set(We[0],We[1])}}function ur(){this.__data__={hash:new yt,map:new(Fe||$t),string:new yt}}function fi(z){return Fr(this,z).delete(z)}function Er(z){return Fr(this,z).get(z)}function Xt(z){return Fr(this,z).has(z)}function Sr(z,ve){return Fr(this,z).set(z,ve),this}ir.prototype.clear=ur,ir.prototype.delete=fi,ir.prototype.get=Er,ir.prototype.has=Xt,ir.prototype.set=Sr;function et(z){this.__data__=new $t(z)}function gt(){this.__data__=new $t}function di(z){return this.__data__.delete(z)}function Xr(z){return this.__data__.get(z)}function wr(z){return this.__data__.has(z)}function cr(z,ve){var _e=this.__data__;if(_e instanceof $t){var We=_e.__data__;if(!Fe||We.length<s-1)return We.push([z,ve]),this;_e=this.__data__=new ir(We)}return _e.set(z,ve),this}et.prototype.clear=gt,et.prototype.delete=di,et.prototype.get=Xr,et.prototype.has=wr,et.prototype.set=cr;function hr(z,ve){var _e=pr(z)||Gr(z)?H(z.length,String):[],We=_e.length,wt=!!We;for(var Lt in z)De.call(z,Lt)&&!(wt&&(Lt=="length"||Bi(Lt,We)))&&_e.push(Lt);return _e}function Zr(z,ve,_e){var We=z[ve];(!(De.call(z,ve)&&bn(We,_e))||_e===void 0&&!(ve in z))&&(z[ve]=_e)}function fr(z,ve){for(var _e=z.length;_e--;)if(bn(z[_e][0],ve))return _e;return-1}function dr(z,ve){return z&&Br(ve,Qt(ve),z)}function Dr(z,ve,_e,We,wt,Lt,Vt){var Mt;if(We&&(Mt=Lt?We(z,wt,Lt,Vt):We(z)),Mt!==void 0)return Mt;if(!Jt(z))return z;var xi=pr(z);if(xi){if(Mt=jt(z),!ve)return yn(z,Mt)}else{var mr=Zt(z),Cr=mr==E||mr==_;if(Cn(z))return Ke(z,ve);if(mr==C||mr==h||Cr&&!Lt){if(Me(z))return Lt?z:{};if(Mt=wn(Cr?{}:z),!ve)return En(z,dr(Mt,z))}else{if(!pe[mr])return Lt?z:{};Mt=Ni(z,mr,Dr,ve)}}Vt||(Vt=new et);var Jr=Vt.get(z);if(Jr)return Jr;if(Vt.set(z,Mt),!xi)var Gi=_e?Sn(z):Qt(z);return ye(Gi||z,function(Wr,kr){Gi&&(kr=Wr,Wr=z[kr]),Zr(Mt,kr,Dr(Wr,ve,_e,We,kr,z,Vt))}),Mt}function D(z){return Jt(z)?x(z):{}}function V(z,ve,_e){var We=ve(z);return pr(z)?We:Oe(We,_e(z))}function Ee(z){return Qe.call(z)}function $e(z){if(!Jt(z)||Tn(z))return!1;var ve=mi(z)||Me(z)?Et:ce;return ve.test(Tr(z))}function qe(z){if(!pi(z))return le(z);var ve=[];for(var _e in Object(z))De.call(z,_e)&&_e!="constructor"&&ve.push(_e);return ve}function Ke(z,ve){if(ve)return z.slice();var _e=new z.constructor(z.length);return z.copy(_e),_e}function vt(z){var ve=new z.constructor(z.byteLength);return new Be(ve).set(new Be(z)),ve}function Nr(z,ve){var _e=ve?vt(z.buffer):z.buffer;return new z.constructor(_e,z.byteOffset,z.byteLength)}function Pi(z,ve,_e){var We=ve?_e(be(z),!0):be(z);return F(We,re,new z.constructor)}function Rr(z){var ve=new z.constructor(z.source,he.exec(z));return ve.lastIndex=z.lastIndex,ve}function zt(z,ve,_e){var We=ve?_e(ze(z),!0):ze(z);return F(We,ge,new z.constructor)}function vn(z){return rr?Object(rr.call(z)):{}}function xn(z,ve){var _e=ve?vt(z.buffer):z.buffer;return new z.constructor(_e,z.byteOffset,z.length)}function yn(z,ve){var _e=-1,We=z.length;for(ve||(ve=Array(We));++_e<We;)ve[_e]=z[_e];return ve}function Br(z,ve,_e,We){_e||(_e={});for(var wt=-1,Lt=ve.length;++wt<Lt;){var Vt=ve[wt],Mt=void 0;Zr(_e,Vt,Mt===void 0?z[Vt]:Mt)}return _e}function En(z,ve){return Br(z,Di(z),ve)}function Sn(z){return V(z,Qt,Di)}function Fr(z,ve){var _e=z.__data__;return Rn(ve)?_e[typeof ve=="string"?"string":"hash"]:_e.map}function nr(z,ve){var _e=Se(z,ve);return $e(_e)?_e:void 0}var Di=N?Ne(N,Object):gr,Zt=Ee;(Ae&&Zt(new Ae(new ArrayBuffer(1)))!=Z||Fe&&Zt(new Fe)!=p||Ge&&Zt(Ge.resolve())!=P||Ye&&Zt(new Ye)!=T||He&&Zt(new He)!=j)&&(Zt=function(z){var ve=Qe.call(z),_e=ve==C?z.constructor:void 0,We=_e?Tr(_e):void 0;if(We)switch(We){case St:return Z;case it:return p;case lr:return P;case tr:return T;case ui:return j}return ve});function jt(z){var ve=z.length,_e=z.constructor(ve);return ve&&typeof z[0]=="string"&&De.call(z,"index")&&(_e.index=z.index,_e.input=z.input),_e}function wn(z){return typeof z.constructor=="function"&&!pi(z)?D(G(z)):{}}function Ni(z,ve,_e,We){var wt=z.constructor;switch(ve){case W:return vt(z);case g:case v:return new wt(+z);case Z:return Nr(z,We);case oe:case k:case K:case J:case Q:case ie:case ue:case fe:case we:return xn(z,We);case p:return Pi(z,We,_e);case b:case I:return new wt(z);case A:return Rr(z);case T:return zt(z,We,_e);case M:return vn(z)}}function Bi(z,ve){return ve=ve??u,!!ve&&(typeof z=="number"||Ce.test(z))&&z>-1&&z%1==0&&z<ve}function Rn(z){var ve=typeof z;return ve=="string"||ve=="number"||ve=="symbol"||ve=="boolean"?z!=="__proto__":z===null}function Tn(z){return!!Ue&&Ue in z}function pi(z){var ve=z&&z.constructor,_e=typeof ve=="function"&&ve.prototype||ut;return z===_e}function Tr(z){if(z!=null){try{return me.call(z)}catch{}try{return z+""}catch{}}return""}function Qn(z){return Dr(z,!0,!0)}function bn(z,ve){return z===ve||z!==z&&ve!==ve}function Gr(z){return Fi(z)&&De.call(z,"callee")&&(!m.call(z,"callee")||Qe.call(z)==h)}var pr=Array.isArray;function gi(z){return z!=null&&br(z.length)&&!mi(z)}function Fi(z){return It(z)&&gi(z)}var Cn=Y||vi;function mi(z){var ve=Jt(z)?Qe.call(z):"";return ve==E||ve==_}function br(z){return typeof z=="number"&&z>-1&&z%1==0&&z<=u}function Jt(z){var ve=typeof z;return!!z&&(ve=="object"||ve=="function")}function It(z){return!!z&&typeof z=="object"}function Qt(z){return gi(z)?hr(z):qe(z)}function gr(){return[]}function vi(){return!1}n.exports=Qn})(lodash_clonedeep,lodash_clonedeep.exports);var lodash_clonedeepExports=lodash_clonedeep.exports;const Fn$a={debounce:lodash_debounce,cloneDeep:lodash_clonedeepExports},{ceil,max,min,PI:PI$1}=Math;Fn$a.toFixed=(n,t)=>+(n||0).toFixed(t);Fn$a.map=(n,t,s,o,u)=>(n-t)*(u-o)/(s-t)+o|0;Fn$a.scale=Fn$a.map;const f32A=new Float32Array(1);Fn$a.fmap=(n,t,s,o,u)=>(f32A[0]=(n-t)*(u-o)/(s-t)+o,f32A[0]);Fn$a.fscale=Fn$a.fmap;Fn$a.constrain=(n,t,s)=>min(s,max(t,n));Fn$a.inRange=(n,t,s)=>n>=t&&n<=s;Fn$a.range=function(n,t,s){arguments.length===1&&(t=n-1,n=0),n=n||0,t=t||0,s=s||1;const o=max(ceil((t-n)/s),0);let u=0;const h=[];for(;u<=o;)h[u++]=n,n+=s;return h};Fn$a.uid=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const t=Math.random()*16|0;return(n==="x"?t:t&3|8).toString(16)}).toUpperCase();Fn$a.square=n=>n*n;Fn$a.sum=function(t){let s;return Array.isArray(t)?s=t:s=[].slice.call(arguments),s.reduce((o,u)=>o+u,0)};Fn$a.fma=(n,t,s)=>{let o=134217729*n,u;o=o+(n-o),u=n-o;let h=134217729*t,f;h=h+(t-h),f=t-h;const g=n*t,v=-g+o*h+o*f+u*h+u*f,O=g+s,E=g-(O-s)+(s-(O-g));return O+(E+v)};Fn$a._BV=Fn$a.bitValue=Fn$a.bv=n=>1<<n;Fn$a.int16=(n,t)=>{const s=n<<8|t;return s>>15?((s^65535)+1)*-1:s};Fn$a.uint16=(n,t)=>n<<8|t;Fn$a.int24=(n,t,s)=>{const o=n<<16|t<<8|s;return o>>23?((o^16777215)+1)*-1:o};Fn$a.uint24=(n,t,s)=>n<<16|t<<8|s;Fn$a.int32=(n,t,s,o)=>{const u=n<<24|t<<16|s<<8|o;return u>>31?((u^4294967295)+1)*-1:u};Fn$a.uint32=(n,t,s,o)=>(n<<24|t<<16|s<<8|o)>>>0;Fn$a.bitSize=n=>Math.round(Math.log2(n));const POW="POW_2_",U="u",S="s",MAX=Fn$a.bitSize(Number.MAX_SAFE_INTEGER)+1,bitSizes=[4,8,10,12,16,20,24,32];for(let n=0;n<MAX;n++)Fn$a[POW+n]=2**n;bitSizes.forEach(n=>{const t=Fn$a[POW+n],s=t/2>>>0,o=s-1;Fn$a[U+n]=u=>(u<0&&(u+=t),Fn$a.constrain(u,0,t-1)),Fn$a[S+n]=u=>(u>o&&(u-=t),Fn$a.constrain(u,-s,o))});Fn$a.RAD_TO_DEG=180/PI$1;Fn$a.DEG_TO_RAD=PI$1/180;Fn$a.TAU=2*PI$1;var fn=Fn$a,empty=null;const empty$1=Object.freeze(Object.defineProperty({__proto__:null,default:empty},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(empty$1),Emitter$e=emitter,repl=require$$0,priv$m=new Map;class Repl extends Emitter$e{constructor(t){if(Repl.isActive)return Repl.ref;{super(),Repl.isActive=!0,this.context={},this.ready=!1;const s={opts:t,board:t.board};priv$m.set(this,s),Repl.ref=this}}initialize(t){const s=priv$m.get(this);process$1.stdin.resume(),process$1.stdin.setEncoding("utf8");const o={prompt:">> ",useGlobal:!1};s.board.info("Repl","Initialized");const u=repl.start(o);this.ready=!0,this.cmd=u,this.context=u.context,u.on("exit",()=>{s.board.emit("exit"),s.board.warn("Board","Closing.");const f=setTimeout(()=>{process$1.reallyExit()},1e3),g=setInterval(()=>{let v=!1;if(s.board.length){for(let O=0;O<s.board.length;O++)if(s.board[O].io.pending){v=!0;break}}else v=s.board.io.pending;v||(clearInterval(g),clearTimeout(f),process$1.nextTick(process$1.reallyExit))},1)}),this.inject(s.opts),t&&process$1.nextTick(t)}close(){this.cmd.emit("exit")}inject(t){Object.keys(t).forEach(function(s){Object.defineProperty(this.context,s,Object.getOwnPropertyDescriptor(t,s))},this)}}Repl.isActive=!1;Repl.isBlocked=!1;Repl.ref=null;var repl_1=Repl;let Options$1=class{constructor(t){var s={};typeof t=="number"||typeof t=="string"?s.pin=t:Array.isArray(t)?s.pins=t:s=t,Object.assign(this,s)}};var board_options=Options$1;const Options=board_options,MODES={INPUT:0,OUTPUT:1,ANALOG:2,PWM:3,SERVO:4},pinsToType={20:"UNO",25:"LEONARDO",70:"MEGA"};function Pins$7(n){if(!(this instanceof Pins$7))return new Pins$7(n);const t=n.io,s=t.pins.slice(),o=s.length,u=pinsToType[o]||"OTHER";n.type=u;for(let h=0;h<o;h++)this[h]=s[h];Object.defineProperties(this,{type:{value:u},length:{value:o}}),["isInput","isOutput","isAnalog","isPwm","isServo"].forEach(h=>{t[h]&&(this[h]=t[h])})}Object.entries(MODES).forEach(([n,t])=>{Object.defineProperty(Pins$7,n,{value:t})});function isFirmata({io:n}){return n.name==="Firmata"||n.name==="Mock"}function hasPins({pin:n,pins:t}){return typeof n<"u"||typeof t<"u"&&t.length}Pins$7.isFirmata=isFirmata;Pins$7.Error=({pin:n,type:t,via:s})=>{throw new Error(`Pin Error: ${n} is not a valid ${t} pin (${s})`)};const normalizers=new Map;Pins$7.normalize=function(n,t){var s=t.pins.type,o=isFirmata(t),u=normalizers.get(t),h;return(typeof n=="string"||typeof n=="number"||Array.isArray(n))&&(n=new Options(n)),u||(h=t.io&&typeof t.io.normalize=="function",u=function(f){return o?Pins$7.fromAnalog(Pins$7.translate(f,s)):h?t.io.normalize(f):f},normalizers.set(t,u)),hasPins(n)&&(n.pins?n.pins=n.pins.map(u):n.pin=u(n.pin)),n};Pins$7.normalize.clear=function(){normalizers.clear()};Pins$7.translations={UNO:{dtoa:{14:"A0",15:"A1",16:"A2",17:"A3",18:"A4",19:"A5"},tinker:{I0:"A0",I1:"A1",I2:"A2",I3:"A3",I4:"A4",I5:"A5",O0:11,O1:10,O2:9,O3:6,O4:5,O5:3,D13:13,D12:12,D8:8,D7:7,D4:4,D2:2}},MEGA:{dtoa:{54:"A0",55:"A1",56:"A2",57:"A3",58:"A4",59:"A5",60:"A6",61:"A7",62:"A8",63:"A9"},tinker:{I0:"A0",I1:"A1",I2:"A2",I3:"A3",I4:"A4",I5:"A5",I6:"A6",I7:"A7",I8:"A8",I9:"A9",O0:11,O1:10,O2:9,O3:6,O4:5,O5:3,D13:13,D12:12,D8:8,D7:7,D4:4,D2:2}}};Pins$7.translations.LEONARDO=Pins$7.translations.UNO;Pins$7.translate=function(n,t){var s=Pins$7.translations[t.toUpperCase()];return s?Object.keys(s).reduce(function(o,u){return s[u][o]||o},n):n};Pins$7.fromAnalog=function(n){return typeof n=="string"&&n.length>1&&n[0]==="A"?parseInt(n.slice(1),10):n};Pins$7.identity=function(n,t){return[].findIndex.call(n,function(s){return s.name===t||s.id===t||s.port===t})};Object.keys(MODES).forEach(function(n){var t=n[0]+n.slice(1).toLowerCase();Pins$7.prototype["is"+t]=function(s){var o=this[s]||this[Pins$7.identity(this,s)];return!!(o&&o.supportedModes.includes(MODES[n]))}});Pins$7.prototype.isDigital=function(n){var t=this[n]||this[Pins$7.identity(this,n)];return!!(t&&t.supportedModes.length)};var board_pins=Pins$7,buffer={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup[45]=62;revLookup[95]=63;function getLens(n){var t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=n.indexOf("=");s===-1&&(s=t);var o=s===t?0:4-s%4;return[s,o]}function byteLength(n){var t=getLens(n),s=t[0],o=t[1];return(s+o)*3/4-o}function _byteLength(n,t,s){return(t+s)*3/4-s}function toByteArray(n){var t,s=getLens(n),o=s[0],u=s[1],h=new Arr(_byteLength(n,o,u)),f=0,g=u>0?o-4:o,v;for(v=0;v<g;v+=4)t=revLookup[n.charCodeAt(v)]<<18|revLookup[n.charCodeAt(v+1)]<<12|revLookup[n.charCodeAt(v+2)]<<6|revLookup[n.charCodeAt(v+3)],h[f++]=t>>16&255,h[f++]=t>>8&255,h[f++]=t&255;return u===2&&(t=revLookup[n.charCodeAt(v)]<<2|revLookup[n.charCodeAt(v+1)]>>4,h[f++]=t&255),u===1&&(t=revLookup[n.charCodeAt(v)]<<10|revLookup[n.charCodeAt(v+1)]<<4|revLookup[n.charCodeAt(v+2)]>>2,h[f++]=t>>8&255,h[f++]=t&255),h}function tripletToBase64(n){return lookup[n>>18&63]+lookup[n>>12&63]+lookup[n>>6&63]+lookup[n&63]}function encodeChunk(n,t,s){for(var o,u=[],h=t;h<s;h+=3)o=(n[h]<<16&16711680)+(n[h+1]<<8&65280)+(n[h+2]&255),u.push(tripletToBase64(o));return u.join("")}function fromByteArray(n){for(var t,s=n.length,o=s%3,u=[],h=16383,f=0,g=s-o;f<g;f+=h)u.push(encodeChunk(n,f,f+h>g?g:f+h));return o===1?(t=n[s-1],u.push(lookup[t>>2]+lookup[t<<4&63]+"==")):o===2&&(t=(n[s-2]<<8)+n[s-1],u.push(lookup[t>>10]+lookup[t>>4&63]+lookup[t<<2&63]+"=")),u.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(n,t,s,o,u){var h,f,g=u*8-o-1,v=(1<<g)-1,O=v>>1,E=-7,_=s?u-1:0,p=s?-1:1,b=n[t+_];for(_+=p,h=b&(1<<-E)-1,b>>=-E,E+=g;E>0;h=h*256+n[t+_],_+=p,E-=8);for(f=h&(1<<-E)-1,h>>=-E,E+=o;E>0;f=f*256+n[t+_],_+=p,E-=8);if(h===0)h=1-O;else{if(h===v)return f?NaN:(b?-1:1)*(1/0);f=f+Math.pow(2,o),h=h-O}return(b?-1:1)*f*Math.pow(2,h-o)};ieee754.write=function(n,t,s,o,u,h){var f,g,v,O=h*8-u-1,E=(1<<O)-1,_=E>>1,p=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=o?0:h-1,C=o?1:-1,P=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(g=isNaN(t)?1:0,f=E):(f=Math.floor(Math.log(t)/Math.LN2),t*(v=Math.pow(2,-f))<1&&(f--,v*=2),f+_>=1?t+=p/v:t+=p*Math.pow(2,1-_),t*v>=2&&(f++,v/=2),f+_>=E?(g=0,f=E):f+_>=1?(g=(t*v-1)*Math.pow(2,u),f=f+_):(g=t*Math.pow(2,_-1)*Math.pow(2,u),f=0));u>=8;n[s+b]=g&255,b+=C,g/=256,u-=8);for(f=f<<u|g,O+=u;O>0;n[s+b]=f&255,b+=C,f/=256,O-=8);n[s+b-C]|=P*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const t=base64Js,s=ieee754,o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=E,n.SlowBuffer=W,n.INSPECT_MAX_BYTES=50;const u=2147483647;n.kMaxLength=u;const{Uint8Array:h,ArrayBuffer:f,SharedArrayBuffer:g}=globalThis;E.TYPED_ARRAY_SUPPORT=v(),!E.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function v(){try{const G=new h(1),x={foo:function(){return 42}};return Object.setPrototypeOf(x,h.prototype),Object.setPrototypeOf(G,x),G.foo()===42}catch{return!1}}Object.defineProperty(E.prototype,"parent",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.buffer}}),Object.defineProperty(E.prototype,"offset",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.byteOffset}});function O(G){if(G>u)throw new RangeError('The value "'+G+'" is invalid for option "size"');const x=new h(G);return Object.setPrototypeOf(x,E.prototype),x}function E(G,x,m){if(typeof G=="number"){if(typeof x=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return C(G)}return _(G,x,m)}E.poolSize=8192;function _(G,x,m){if(typeof G=="string")return P(G,x);if(f.isView(G))return T(G);if(G==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G);if(Qe(G,f)||G&&Qe(G.buffer,f)||typeof g<"u"&&(Qe(G,g)||G&&Qe(G.buffer,g)))return I(G,x,m);if(typeof G=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const L=G.valueOf&&G.valueOf();if(L!=null&&L!==G)return E.from(L,x,m);const N=M(G);if(N)return N;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof G[Symbol.toPrimitive]=="function")return E.from(G[Symbol.toPrimitive]("string"),x,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G)}E.from=function(G,x,m){return _(G,x,m)},Object.setPrototypeOf(E.prototype,h.prototype),Object.setPrototypeOf(E,h);function p(G){if(typeof G!="number")throw new TypeError('"size" argument must be of type number');if(G<0)throw new RangeError('The value "'+G+'" is invalid for option "size"')}function b(G,x,m){return p(G),G<=0?O(G):x!==void 0?typeof m=="string"?O(G).fill(x,m):O(G).fill(x):O(G)}E.alloc=function(G,x,m){return b(G,x,m)};function C(G){return p(G),O(G<0?0:j(G)|0)}E.allocUnsafe=function(G){return C(G)},E.allocUnsafeSlow=function(G){return C(G)};function P(G,x){if((typeof x!="string"||x==="")&&(x="utf8"),!E.isEncoding(x))throw new TypeError("Unknown encoding: "+x);const m=Z(G,x)|0;let L=O(m);const N=L.write(G,x);return N!==m&&(L=L.slice(0,N)),L}function A(G){const x=G.length<0?0:j(G.length)|0,m=O(x);for(let L=0;L<x;L+=1)m[L]=G[L]&255;return m}function T(G){if(Qe(G,h)){const x=new h(G);return I(x.buffer,x.byteOffset,x.byteLength)}return A(G)}function I(G,x,m){if(x<0||G.byteLength<x)throw new RangeError('"offset" is outside of buffer bounds');if(G.byteLength<x+(m||0))throw new RangeError('"length" is outside of buffer bounds');let L;return x===void 0&&m===void 0?L=new h(G):m===void 0?L=new h(G,x):L=new h(G,x,m),Object.setPrototypeOf(L,E.prototype),L}function M(G){if(E.isBuffer(G)){const x=j(G.length)|0,m=O(x);return m.length===0||G.copy(m,0,0,x),m}if(G.length!==void 0)return typeof G.length!="number"||Et(G.length)?O(0):A(G);if(G.type==="Buffer"&&Array.isArray(G.data))return A(G.data)}function j(G){if(G>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return G|0}function W(G){return+G!=G&&(G=0),E.alloc(+G)}E.isBuffer=function(x){return x!=null&&x._isBuffer===!0&&x!==E.prototype},E.compare=function(x,m){if(Qe(x,h)&&(x=E.from(x,x.offset,x.byteLength)),Qe(m,h)&&(m=E.from(m,m.offset,m.byteLength)),!E.isBuffer(x)||!E.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(x===m)return 0;let L=x.length,N=m.length;for(let Y=0,le=Math.min(L,N);Y<le;++Y)if(x[Y]!==m[Y]){L=x[Y],N=m[Y];break}return L<N?-1:N<L?1:0},E.isEncoding=function(x){switch(String(x).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},E.concat=function(x,m){if(!Array.isArray(x))throw new TypeError('"list" argument must be an Array of Buffers');if(x.length===0)return E.alloc(0);let L;if(m===void 0)for(m=0,L=0;L<x.length;++L)m+=x[L].length;const N=E.allocUnsafe(m);let Y=0;for(L=0;L<x.length;++L){let le=x[L];if(Qe(le,h))Y+le.length>N.length?(E.isBuffer(le)||(le=E.from(le)),le.copy(N,Y)):h.prototype.set.call(N,le,Y);else if(E.isBuffer(le))le.copy(N,Y);else throw new TypeError('"list" argument must be an Array of Buffers');Y+=le.length}return N};function Z(G,x){if(E.isBuffer(G))return G.length;if(f.isView(G)||Qe(G,f))return G.byteLength;if(typeof G!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof G);const m=G.length,L=arguments.length>2&&arguments[2]===!0;if(!L&&m===0)return 0;let N=!1;for(;;)switch(x){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return ut(G).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return me(G).length;default:if(N)return L?-1:ut(G).length;x=(""+x).toLowerCase(),N=!0}}E.byteLength=Z;function oe(G,x,m){let L=!1;if((x===void 0||x<0)&&(x=0),x>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,x>>>=0,m<=x))return"";for(G||(G="utf8");;)switch(G){case"hex":return Le(this,x,m);case"utf8":case"utf-8":return he(this,x,m);case"ascii":return pe(this,x,m);case"latin1":case"binary":return Ie(this,x,m);case"base64":return Te(this,x,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,x,m);default:if(L)throw new TypeError("Unknown encoding: "+G);G=(G+"").toLowerCase(),L=!0}}E.prototype._isBuffer=!0;function k(G,x,m){const L=G[x];G[x]=G[m],G[m]=L}E.prototype.swap16=function(){const x=this.length;if(x%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let m=0;m<x;m+=2)k(this,m,m+1);return this},E.prototype.swap32=function(){const x=this.length;if(x%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let m=0;m<x;m+=4)k(this,m,m+3),k(this,m+1,m+2);return this},E.prototype.swap64=function(){const x=this.length;if(x%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let m=0;m<x;m+=8)k(this,m,m+7),k(this,m+1,m+6),k(this,m+2,m+5),k(this,m+3,m+4);return this},E.prototype.toString=function(){const x=this.length;return x===0?"":arguments.length===0?he(this,0,x):oe.apply(this,arguments)},E.prototype.toLocaleString=E.prototype.toString,E.prototype.equals=function(x){if(!E.isBuffer(x))throw new TypeError("Argument must be a Buffer");return this===x?!0:E.compare(this,x)===0},E.prototype.inspect=function(){let x="";const m=n.INSPECT_MAX_BYTES;return x=this.toString("hex",0,m).replace(/(.{2})/g,"$1 ").trim(),this.length>m&&(x+=" ... "),"<Buffer "+x+">"},o&&(E.prototype[o]=E.prototype.inspect),E.prototype.compare=function(x,m,L,N,Y){if(Qe(x,h)&&(x=E.from(x,x.offset,x.byteLength)),!E.isBuffer(x))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof x);if(m===void 0&&(m=0),L===void 0&&(L=x?x.length:0),N===void 0&&(N=0),Y===void 0&&(Y=this.length),m<0||L>x.length||N<0||Y>this.length)throw new RangeError("out of range index");if(N>=Y&&m>=L)return 0;if(N>=Y)return-1;if(m>=L)return 1;if(m>>>=0,L>>>=0,N>>>=0,Y>>>=0,this===x)return 0;let le=Y-N,Ae=L-m;const Fe=Math.min(le,Ae),Ge=this.slice(N,Y),Ye=x.slice(m,L);for(let He=0;He<Fe;++He)if(Ge[He]!==Ye[He]){le=Ge[He],Ae=Ye[He];break}return le<Ae?-1:Ae<le?1:0};function K(G,x,m,L,N){if(G.length===0)return-1;if(typeof m=="string"?(L=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,Et(m)&&(m=N?0:G.length-1),m<0&&(m=G.length+m),m>=G.length){if(N)return-1;m=G.length-1}else if(m<0)if(N)m=0;else return-1;if(typeof x=="string"&&(x=E.from(x,L)),E.isBuffer(x))return x.length===0?-1:J(G,x,m,L,N);if(typeof x=="number")return x=x&255,typeof h.prototype.indexOf=="function"?N?h.prototype.indexOf.call(G,x,m):h.prototype.lastIndexOf.call(G,x,m):J(G,[x],m,L,N);throw new TypeError("val must be string, number or Buffer")}function J(G,x,m,L,N){let Y=1,le=G.length,Ae=x.length;if(L!==void 0&&(L=String(L).toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(G.length<2||x.length<2)return-1;Y=2,le/=2,Ae/=2,m/=2}function Fe(Ye,He){return Y===1?Ye[He]:Ye.readUInt16BE(He*Y)}let Ge;if(N){let Ye=-1;for(Ge=m;Ge<le;Ge++)if(Fe(G,Ge)===Fe(x,Ye===-1?0:Ge-Ye)){if(Ye===-1&&(Ye=Ge),Ge-Ye+1===Ae)return Ye*Y}else Ye!==-1&&(Ge-=Ge-Ye),Ye=-1}else for(m+Ae>le&&(m=le-Ae),Ge=m;Ge>=0;Ge--){let Ye=!0;for(let He=0;He<Ae;He++)if(Fe(G,Ge+He)!==Fe(x,He)){Ye=!1;break}if(Ye)return Ge}return-1}E.prototype.includes=function(x,m,L){return this.indexOf(x,m,L)!==-1},E.prototype.indexOf=function(x,m,L){return K(this,x,m,L,!0)},E.prototype.lastIndexOf=function(x,m,L){return K(this,x,m,L,!1)};function Q(G,x,m,L){m=Number(m)||0;const N=G.length-m;L?(L=Number(L),L>N&&(L=N)):L=N;const Y=x.length;L>Y/2&&(L=Y/2);let le;for(le=0;le<L;++le){const Ae=parseInt(x.substr(le*2,2),16);if(Et(Ae))return le;G[m+le]=Ae}return le}function ie(G,x,m,L){return De(ut(x,G.length-m),G,m,L)}function ue(G,x,m,L){return De(dt(x),G,m,L)}function fe(G,x,m,L){return De(me(x),G,m,L)}function we(G,x,m,L){return De(Ue(x,G.length-m),G,m,L)}E.prototype.write=function(x,m,L,N){if(m===void 0)N="utf8",L=this.length,m=0;else if(L===void 0&&typeof m=="string")N=m,L=this.length,m=0;else if(isFinite(m))m=m>>>0,isFinite(L)?(L=L>>>0,N===void 0&&(N="utf8")):(N=L,L=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Y=this.length-m;if((L===void 0||L>Y)&&(L=Y),x.length>0&&(L<0||m<0)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");N||(N="utf8");let le=!1;for(;;)switch(N){case"hex":return Q(this,x,m,L);case"utf8":case"utf-8":return ie(this,x,m,L);case"ascii":case"latin1":case"binary":return ue(this,x,m,L);case"base64":return fe(this,x,m,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,x,m,L);default:if(le)throw new TypeError("Unknown encoding: "+N);N=(""+N).toLowerCase(),le=!0}},E.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Te(G,x,m){return x===0&&m===G.length?t.fromByteArray(G):t.fromByteArray(G.slice(x,m))}function he(G,x,m){m=Math.min(G.length,m);const L=[];let N=x;for(;N<m;){const Y=G[N];let le=null,Ae=Y>239?4:Y>223?3:Y>191?2:1;if(N+Ae<=m){let Fe,Ge,Ye,He;switch(Ae){case 1:Y<128&&(le=Y);break;case 2:Fe=G[N+1],(Fe&192)===128&&(He=(Y&31)<<6|Fe&63,He>127&&(le=He));break;case 3:Fe=G[N+1],Ge=G[N+2],(Fe&192)===128&&(Ge&192)===128&&(He=(Y&15)<<12|(Fe&63)<<6|Ge&63,He>2047&&(He<55296||He>57343)&&(le=He));break;case 4:Fe=G[N+1],Ge=G[N+2],Ye=G[N+3],(Fe&192)===128&&(Ge&192)===128&&(Ye&192)===128&&(He=(Y&15)<<18|(Fe&63)<<12|(Ge&63)<<6|Ye&63,He>65535&&He<1114112&&(le=He))}}le===null?(le=65533,Ae=1):le>65535&&(le-=65536,L.push(le>>>10&1023|55296),le=56320|le&1023),L.push(le),N+=Ae}return Ce(L)}const ce=4096;function Ce(G){const x=G.length;if(x<=ce)return String.fromCharCode.apply(String,G);let m="",L=0;for(;L<x;)m+=String.fromCharCode.apply(String,G.slice(L,L+=ce));return m}function pe(G,x,m){let L="";m=Math.min(G.length,m);for(let N=x;N<m;++N)L+=String.fromCharCode(G[N]&127);return L}function Ie(G,x,m){let L="";m=Math.min(G.length,m);for(let N=x;N<m;++N)L+=String.fromCharCode(G[N]);return L}function Le(G,x,m){const L=G.length;(!x||x<0)&&(x=0),(!m||m<0||m>L)&&(m=L);let N="";for(let Y=x;Y<m;++Y)N+=Tt[G[Y]];return N}function ee(G,x,m){const L=G.slice(x,m);let N="";for(let Y=0;Y<L.length-1;Y+=2)N+=String.fromCharCode(L[Y]+L[Y+1]*256);return N}E.prototype.slice=function(x,m){const L=this.length;x=~~x,m=m===void 0?L:~~m,x<0?(x+=L,x<0&&(x=0)):x>L&&(x=L),m<0?(m+=L,m<0&&(m=0)):m>L&&(m=L),m<x&&(m=x);const N=this.subarray(x,m);return Object.setPrototypeOf(N,E.prototype),N};function ae(G,x,m){if(G%1!==0||G<0)throw new RangeError("offset is not uint");if(G+x>m)throw new RangeError("Trying to access beyond buffer length")}E.prototype.readUintLE=E.prototype.readUIntLE=function(x,m,L){x=x>>>0,m=m>>>0,L||ae(x,m,this.length);let N=this[x],Y=1,le=0;for(;++le<m&&(Y*=256);)N+=this[x+le]*Y;return N},E.prototype.readUintBE=E.prototype.readUIntBE=function(x,m,L){x=x>>>0,m=m>>>0,L||ae(x,m,this.length);let N=this[x+--m],Y=1;for(;m>0&&(Y*=256);)N+=this[x+--m]*Y;return N},E.prototype.readUint8=E.prototype.readUInt8=function(x,m){return x=x>>>0,m||ae(x,1,this.length),this[x]},E.prototype.readUint16LE=E.prototype.readUInt16LE=function(x,m){return x=x>>>0,m||ae(x,2,this.length),this[x]|this[x+1]<<8},E.prototype.readUint16BE=E.prototype.readUInt16BE=function(x,m){return x=x>>>0,m||ae(x,2,this.length),this[x]<<8|this[x+1]},E.prototype.readUint32LE=E.prototype.readUInt32LE=function(x,m){return x=x>>>0,m||ae(x,4,this.length),(this[x]|this[x+1]<<8|this[x+2]<<16)+this[x+3]*16777216},E.prototype.readUint32BE=E.prototype.readUInt32BE=function(x,m){return x=x>>>0,m||ae(x,4,this.length),this[x]*16777216+(this[x+1]<<16|this[x+2]<<8|this[x+3])},E.prototype.readBigUInt64LE=st(function(x){x=x>>>0,Ne(x,"offset");const m=this[x],L=this[x+7];(m===void 0||L===void 0)&&ze(x,this.length-8);const N=m+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24,Y=this[++x]+this[++x]*2**8+this[++x]*2**16+L*2**24;return BigInt(N)+(BigInt(Y)<<BigInt(32))}),E.prototype.readBigUInt64BE=st(function(x){x=x>>>0,Ne(x,"offset");const m=this[x],L=this[x+7];(m===void 0||L===void 0)&&ze(x,this.length-8);const N=m*2**24+this[++x]*2**16+this[++x]*2**8+this[++x],Y=this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+L;return(BigInt(N)<<BigInt(32))+BigInt(Y)}),E.prototype.readIntLE=function(x,m,L){x=x>>>0,m=m>>>0,L||ae(x,m,this.length);let N=this[x],Y=1,le=0;for(;++le<m&&(Y*=256);)N+=this[x+le]*Y;return Y*=128,N>=Y&&(N-=Math.pow(2,8*m)),N},E.prototype.readIntBE=function(x,m,L){x=x>>>0,m=m>>>0,L||ae(x,m,this.length);let N=m,Y=1,le=this[x+--N];for(;N>0&&(Y*=256);)le+=this[x+--N]*Y;return Y*=128,le>=Y&&(le-=Math.pow(2,8*m)),le},E.prototype.readInt8=function(x,m){return x=x>>>0,m||ae(x,1,this.length),this[x]&128?(255-this[x]+1)*-1:this[x]},E.prototype.readInt16LE=function(x,m){x=x>>>0,m||ae(x,2,this.length);const L=this[x]|this[x+1]<<8;return L&32768?L|4294901760:L},E.prototype.readInt16BE=function(x,m){x=x>>>0,m||ae(x,2,this.length);const L=this[x+1]|this[x]<<8;return L&32768?L|4294901760:L},E.prototype.readInt32LE=function(x,m){return x=x>>>0,m||ae(x,4,this.length),this[x]|this[x+1]<<8|this[x+2]<<16|this[x+3]<<24},E.prototype.readInt32BE=function(x,m){return x=x>>>0,m||ae(x,4,this.length),this[x]<<24|this[x+1]<<16|this[x+2]<<8|this[x+3]},E.prototype.readBigInt64LE=st(function(x){x=x>>>0,Ne(x,"offset");const m=this[x],L=this[x+7];(m===void 0||L===void 0)&&ze(x,this.length-8);const N=this[x+4]+this[x+5]*2**8+this[x+6]*2**16+(L<<24);return(BigInt(N)<<BigInt(32))+BigInt(m+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24)}),E.prototype.readBigInt64BE=st(function(x){x=x>>>0,Ne(x,"offset");const m=this[x],L=this[x+7];(m===void 0||L===void 0)&&ze(x,this.length-8);const N=(m<<24)+this[++x]*2**16+this[++x]*2**8+this[++x];return(BigInt(N)<<BigInt(32))+BigInt(this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+L)}),E.prototype.readFloatLE=function(x,m){return x=x>>>0,m||ae(x,4,this.length),s.read(this,x,!0,23,4)},E.prototype.readFloatBE=function(x,m){return x=x>>>0,m||ae(x,4,this.length),s.read(this,x,!1,23,4)},E.prototype.readDoubleLE=function(x,m){return x=x>>>0,m||ae(x,8,this.length),s.read(this,x,!0,52,8)},E.prototype.readDoubleBE=function(x,m){return x=x>>>0,m||ae(x,8,this.length),s.read(this,x,!1,52,8)};function de(G,x,m,L,N,Y){if(!E.isBuffer(G))throw new TypeError('"buffer" argument must be a Buffer instance');if(x>N||x<Y)throw new RangeError('"value" argument is out of bounds');if(m+L>G.length)throw new RangeError("Index out of range")}E.prototype.writeUintLE=E.prototype.writeUIntLE=function(x,m,L,N){if(x=+x,m=m>>>0,L=L>>>0,!N){const Ae=Math.pow(2,8*L)-1;de(this,x,m,L,Ae,0)}let Y=1,le=0;for(this[m]=x&255;++le<L&&(Y*=256);)this[m+le]=x/Y&255;return m+L},E.prototype.writeUintBE=E.prototype.writeUIntBE=function(x,m,L,N){if(x=+x,m=m>>>0,L=L>>>0,!N){const Ae=Math.pow(2,8*L)-1;de(this,x,m,L,Ae,0)}let Y=L-1,le=1;for(this[m+Y]=x&255;--Y>=0&&(le*=256);)this[m+Y]=x/le&255;return m+L},E.prototype.writeUint8=E.prototype.writeUInt8=function(x,m,L){return x=+x,m=m>>>0,L||de(this,x,m,1,255,0),this[m]=x&255,m+1},E.prototype.writeUint16LE=E.prototype.writeUInt16LE=function(x,m,L){return x=+x,m=m>>>0,L||de(this,x,m,2,65535,0),this[m]=x&255,this[m+1]=x>>>8,m+2},E.prototype.writeUint16BE=E.prototype.writeUInt16BE=function(x,m,L){return x=+x,m=m>>>0,L||de(this,x,m,2,65535,0),this[m]=x>>>8,this[m+1]=x&255,m+2},E.prototype.writeUint32LE=E.prototype.writeUInt32LE=function(x,m,L){return x=+x,m=m>>>0,L||de(this,x,m,4,4294967295,0),this[m+3]=x>>>24,this[m+2]=x>>>16,this[m+1]=x>>>8,this[m]=x&255,m+4},E.prototype.writeUint32BE=E.prototype.writeUInt32BE=function(x,m,L){return x=+x,m=m>>>0,L||de(this,x,m,4,4294967295,0),this[m]=x>>>24,this[m+1]=x>>>16,this[m+2]=x>>>8,this[m+3]=x&255,m+4};function X(G,x,m,L,N){be(x,L,N,G,m,7);let Y=Number(x&BigInt(4294967295));G[m++]=Y,Y=Y>>8,G[m++]=Y,Y=Y>>8,G[m++]=Y,Y=Y>>8,G[m++]=Y;let le=Number(x>>BigInt(32)&BigInt(4294967295));return G[m++]=le,le=le>>8,G[m++]=le,le=le>>8,G[m++]=le,le=le>>8,G[m++]=le,m}function re(G,x,m,L,N){be(x,L,N,G,m,7);let Y=Number(x&BigInt(4294967295));G[m+7]=Y,Y=Y>>8,G[m+6]=Y,Y=Y>>8,G[m+5]=Y,Y=Y>>8,G[m+4]=Y;let le=Number(x>>BigInt(32)&BigInt(4294967295));return G[m+3]=le,le=le>>8,G[m+2]=le,le=le>>8,G[m+1]=le,le=le>>8,G[m]=le,m+8}E.prototype.writeBigUInt64LE=st(function(x,m=0){return X(this,x,m,BigInt(0),BigInt("0xffffffffffffffff"))}),E.prototype.writeBigUInt64BE=st(function(x,m=0){return re(this,x,m,BigInt(0),BigInt("0xffffffffffffffff"))}),E.prototype.writeIntLE=function(x,m,L,N){if(x=+x,m=m>>>0,!N){const Fe=Math.pow(2,8*L-1);de(this,x,m,L,Fe-1,-Fe)}let Y=0,le=1,Ae=0;for(this[m]=x&255;++Y<L&&(le*=256);)x<0&&Ae===0&&this[m+Y-1]!==0&&(Ae=1),this[m+Y]=(x/le>>0)-Ae&255;return m+L},E.prototype.writeIntBE=function(x,m,L,N){if(x=+x,m=m>>>0,!N){const Fe=Math.pow(2,8*L-1);de(this,x,m,L,Fe-1,-Fe)}let Y=L-1,le=1,Ae=0;for(this[m+Y]=x&255;--Y>=0&&(le*=256);)x<0&&Ae===0&&this[m+Y+1]!==0&&(Ae=1),this[m+Y]=(x/le>>0)-Ae&255;return m+L},E.prototype.writeInt8=function(x,m,L){return x=+x,m=m>>>0,L||de(this,x,m,1,127,-128),x<0&&(x=255+x+1),this[m]=x&255,m+1},E.prototype.writeInt16LE=function(x,m,L){return x=+x,m=m>>>0,L||de(this,x,m,2,32767,-32768),this[m]=x&255,this[m+1]=x>>>8,m+2},E.prototype.writeInt16BE=function(x,m,L){return x=+x,m=m>>>0,L||de(this,x,m,2,32767,-32768),this[m]=x>>>8,this[m+1]=x&255,m+2},E.prototype.writeInt32LE=function(x,m,L){return x=+x,m=m>>>0,L||de(this,x,m,4,2147483647,-2147483648),this[m]=x&255,this[m+1]=x>>>8,this[m+2]=x>>>16,this[m+3]=x>>>24,m+4},E.prototype.writeInt32BE=function(x,m,L){return x=+x,m=m>>>0,L||de(this,x,m,4,2147483647,-2147483648),x<0&&(x=4294967295+x+1),this[m]=x>>>24,this[m+1]=x>>>16,this[m+2]=x>>>8,this[m+3]=x&255,m+4},E.prototype.writeBigInt64LE=st(function(x,m=0){return X(this,x,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),E.prototype.writeBigInt64BE=st(function(x,m=0){return re(this,x,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ge(G,x,m,L,N,Y){if(m+L>G.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function ye(G,x,m,L,N){return x=+x,m=m>>>0,N||ge(G,x,m,4),s.write(G,x,m,L,23,4),m+4}E.prototype.writeFloatLE=function(x,m,L){return ye(this,x,m,!0,L)},E.prototype.writeFloatBE=function(x,m,L){return ye(this,x,m,!1,L)};function Oe(G,x,m,L,N){return x=+x,m=m>>>0,N||ge(G,x,m,8),s.write(G,x,m,L,52,8),m+8}E.prototype.writeDoubleLE=function(x,m,L){return Oe(this,x,m,!0,L)},E.prototype.writeDoubleBE=function(x,m,L){return Oe(this,x,m,!1,L)},E.prototype.copy=function(x,m,L,N){if(!E.isBuffer(x))throw new TypeError("argument should be a Buffer");if(L||(L=0),!N&&N!==0&&(N=this.length),m>=x.length&&(m=x.length),m||(m=0),N>0&&N<L&&(N=L),N===L||x.length===0||this.length===0)return 0;if(m<0)throw new RangeError("targetStart out of bounds");if(L<0||L>=this.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("sourceEnd out of bounds");N>this.length&&(N=this.length),x.length-m<N-L&&(N=x.length-m+L);const Y=N-L;return this===x&&typeof h.prototype.copyWithin=="function"?this.copyWithin(m,L,N):h.prototype.set.call(x,this.subarray(L,N),m),Y},E.prototype.fill=function(x,m,L,N){if(typeof x=="string"){if(typeof m=="string"?(N=m,m=0,L=this.length):typeof L=="string"&&(N=L,L=this.length),N!==void 0&&typeof N!="string")throw new TypeError("encoding must be a string");if(typeof N=="string"&&!E.isEncoding(N))throw new TypeError("Unknown encoding: "+N);if(x.length===1){const le=x.charCodeAt(0);(N==="utf8"&&le<128||N==="latin1")&&(x=le)}}else typeof x=="number"?x=x&255:typeof x=="boolean"&&(x=Number(x));if(m<0||this.length<m||this.length<L)throw new RangeError("Out of range index");if(L<=m)return this;m=m>>>0,L=L===void 0?this.length:L>>>0,x||(x=0);let Y;if(typeof x=="number")for(Y=m;Y<L;++Y)this[Y]=x;else{const le=E.isBuffer(x)?x:E.from(x,N),Ae=le.length;if(Ae===0)throw new TypeError('The value "'+x+'" is invalid for argument "value"');for(Y=0;Y<L-m;++Y)this[Y+m]=le[Y%Ae]}return this};const F={};function H(G,x,m){F[G]=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:x.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${G}]`,this.stack,delete this.name}get code(){return G}set code(N){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:N,writable:!0})}toString(){return`${this.name} [${G}]: ${this.message}`}}}H("ERR_BUFFER_OUT_OF_BOUNDS",function(G){return G?`${G} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),H("ERR_INVALID_ARG_TYPE",function(G,x){return`The "${G}" argument must be of type number. Received type ${typeof x}`},TypeError),H("ERR_OUT_OF_RANGE",function(G,x,m){let L=`The value of "${G}" is out of range.`,N=m;return Number.isInteger(m)&&Math.abs(m)>2**32?N=Se(String(m)):typeof m=="bigint"&&(N=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(N=Se(N)),N+="n"),L+=` It must be ${x}. Received ${N}`,L},RangeError);function Se(G){let x="",m=G.length;const L=G[0]==="-"?1:0;for(;m>=L+4;m-=3)x=`_${G.slice(m-3,m)}${x}`;return`${G.slice(0,m)}${x}`}function Me(G,x,m){Ne(x,"offset"),(G[x]===void 0||G[x+m]===void 0)&&ze(x,G.length-(m+1))}function be(G,x,m,L,N,Y){if(G>m||G<x){const le=typeof x=="bigint"?"n":"";let Ae;throw x===0||x===BigInt(0)?Ae=`>= 0${le} and < 2${le} ** ${(Y+1)*8}${le}`:Ae=`>= -(2${le} ** ${(Y+1)*8-1}${le}) and < 2 ** ${(Y+1)*8-1}${le}`,new F.ERR_OUT_OF_RANGE("value",Ae,G)}Me(L,N,Y)}function Ne(G,x){if(typeof G!="number")throw new F.ERR_INVALID_ARG_TYPE(x,"number",G)}function ze(G,x,m){throw Math.floor(G)!==G?(Ne(G,m),new F.ERR_OUT_OF_RANGE("offset","an integer",G)):x<0?new F.ERR_BUFFER_OUT_OF_BOUNDS:new F.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${x}`,G)}const Xe=/[^+/0-9A-Za-z-_]/g;function xe(G){if(G=G.split("=")[0],G=G.trim().replace(Xe,""),G.length<2)return"";for(;G.length%4!==0;)G=G+"=";return G}function ut(G,x){x=x||1/0;let m;const L=G.length;let N=null;const Y=[];for(let le=0;le<L;++le){if(m=G.charCodeAt(le),m>55295&&m<57344){if(!N){if(m>56319){(x-=3)>-1&&Y.push(239,191,189);continue}else if(le+1===L){(x-=3)>-1&&Y.push(239,191,189);continue}N=m;continue}if(m<56320){(x-=3)>-1&&Y.push(239,191,189),N=m;continue}m=(N-55296<<10|m-56320)+65536}else N&&(x-=3)>-1&&Y.push(239,191,189);if(N=null,m<128){if((x-=1)<0)break;Y.push(m)}else if(m<2048){if((x-=2)<0)break;Y.push(m>>6|192,m&63|128)}else if(m<65536){if((x-=3)<0)break;Y.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((x-=4)<0)break;Y.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return Y}function dt(G){const x=[];for(let m=0;m<G.length;++m)x.push(G.charCodeAt(m)&255);return x}function Ue(G,x){let m,L,N;const Y=[];for(let le=0;le<G.length&&!((x-=2)<0);++le)m=G.charCodeAt(le),L=m>>8,N=m%256,Y.push(N),Y.push(L);return Y}function me(G){return t.toByteArray(xe(G))}function De(G,x,m,L){let N;for(N=0;N<L&&!(N+m>=x.length||N>=G.length);++N)x[N+m]=G[N];return N}function Qe(G,x){return G instanceof x||G!=null&&G.constructor!=null&&G.constructor.name!=null&&G.constructor.name===x.name}function Et(G){return G!==G}const Tt=function(){const G="0123456789abcdef",x=new Array(256);for(let m=0;m<16;++m){const L=m*16;for(let N=0;N<16;++N)x[L+N]=G[m]+G[N]}return x}();function st(G){return typeof BigInt>"u"?Be:G}function Be(){throw new Error("BigInt not supported")}})(buffer);const Buffer=buffer.Buffer,Blob=buffer.Blob,BlobOptions=buffer.BlobOptions,Buffer$1=buffer.Buffer,File=buffer.File,FileOptions=buffer.FileOptions,INSPECT_MAX_BYTES=buffer.INSPECT_MAX_BYTES,SlowBuffer=buffer.SlowBuffer,TranscodeEncoding=buffer.TranscodeEncoding,atob=buffer.atob,btoa=buffer.btoa,constants=buffer.constants,isAscii=buffer.isAscii,isUtf8=buffer.isUtf8,kMaxLength=buffer.kMaxLength,kStringMaxLength=buffer.kStringMaxLength,resolveObjectURL=buffer.resolveObjectURL,transcode=buffer.transcode,dist=Object.freeze(Object.defineProperty({__proto__:null,Blob,BlobOptions,Buffer:Buffer$1,File,FileOptions,INSPECT_MAX_BYTES,SlowBuffer,TranscodeEncoding,atob,btoa,constants,default:Buffer,isAscii,isUtf8,kMaxLength,kStringMaxLength,resolveObjectURL,transcode},Symbol.toStringTag,{value:"Module"}));var util={},types={},shams$1,hasRequiredShams$1;function requireShams$1(){return hasRequiredShams$1||(hasRequiredShams$1=1,shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},s=Symbol("test"),o=Object(s);if(typeof s=="string"||Object.prototype.toString.call(s)!=="[object Symbol]"||Object.prototype.toString.call(o)!=="[object Symbol]")return!1;var u=42;t[s]=u;for(s in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var h=Object.getOwnPropertySymbols(t);if(h.length!==1||h[0]!==s||!Object.prototype.propertyIsEnumerable.call(t,s))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var f=Object.getOwnPropertyDescriptor(t,s);if(f.value!==u||f.enumerable!==!0)return!1}return!0}),shams$1}var shams,hasRequiredShams;function requireShams(){if(hasRequiredShams)return shams;hasRequiredShams=1;var n=requireShams$1();return shams=function(){return n()&&!!Symbol.toStringTag},shams}var esErrors,hasRequiredEsErrors;function requireEsErrors(){return hasRequiredEsErrors||(hasRequiredEsErrors=1,esErrors=Error),esErrors}var _eval,hasRequired_eval;function require_eval(){return hasRequired_eval||(hasRequired_eval=1,_eval=EvalError),_eval}var range,hasRequiredRange;function requireRange(){return hasRequiredRange||(hasRequiredRange=1,range=RangeError),range}var ref,hasRequiredRef;function requireRef(){return hasRequiredRef||(hasRequiredRef=1,ref=ReferenceError),ref}var syntax,hasRequiredSyntax;function requireSyntax(){return hasRequiredSyntax||(hasRequiredSyntax=1,syntax=SyntaxError),syntax}var type,hasRequiredType;function requireType(){return hasRequiredType||(hasRequiredType=1,type=TypeError),type}var uri,hasRequiredUri;function requireUri(){return hasRequiredUri||(hasRequiredUri=1,uri=URIError),uri}var hasSymbols,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var n=typeof Symbol<"u"&&Symbol,t=requireShams$1();return hasSymbols=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},hasSymbols}var hasProto,hasRequiredHasProto;function requireHasProto(){if(hasRequiredHasProto)return hasProto;hasRequiredHasProto=1;var n={__proto__:null,foo:{}},t=Object;return hasProto=function(){return{__proto__:n}.foo===n.foo&&!(n instanceof t)},hasProto}var implementation,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation;hasRequiredImplementation=1;var n="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,s=Math.max,o="[object Function]",u=function(v,O){for(var E=[],_=0;_<v.length;_+=1)E[_]=v[_];for(var p=0;p<O.length;p+=1)E[p+v.length]=O[p];return E},h=function(v,O){for(var E=[],_=O,p=0;_<v.length;_+=1,p+=1)E[p]=v[_];return E},f=function(g,v){for(var O="",E=0;E<g.length;E+=1)O+=g[E],E+1<g.length&&(O+=v);return O};return implementation=function(v){var O=this;if(typeof O!="function"||t.apply(O)!==o)throw new TypeError(n+O);for(var E=h(arguments,1),_,p=function(){if(this instanceof _){var T=O.apply(this,u(E,arguments));return Object(T)===T?T:this}return O.apply(v,u(E,arguments))},b=s(0,O.length-E.length),C=[],P=0;P<b;P++)C[P]="$"+P;if(_=Function("binder","return function ("+f(C,",")+"){ return binder.apply(this,arguments); }")(p),O.prototype){var A=function(){};A.prototype=O.prototype,_.prototype=new A,A.prototype=null}return _},implementation}var functionBind,hasRequiredFunctionBind;function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var n=requireImplementation();return functionBind=Function.prototype.bind||n,functionBind}var hasown,hasRequiredHasown;function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var n=Function.prototype.call,t=Object.prototype.hasOwnProperty,s=requireFunctionBind();return hasown=s.call(n,t),hasown}var getIntrinsic,hasRequiredGetIntrinsic;function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;hasRequiredGetIntrinsic=1;var n,t=requireEsErrors(),s=require_eval(),o=requireRange(),u=requireRef(),h=requireSyntax(),f=requireType(),g=requireUri(),v=Function,O=function(he){try{return v('"use strict"; return ('+he+").constructor;")()}catch{}},E=Object.getOwnPropertyDescriptor;if(E)try{E({},"")}catch{E=null}var _=function(){throw new f},p=E?function(){try{return arguments.callee,_}catch{try{return E(arguments,"callee").get}catch{return _}}}():_,b=requireHasSymbols()(),C=requireHasProto()(),P=Object.getPrototypeOf||(C?function(he){return he.__proto__}:null),A={},T=typeof Uint8Array>"u"||!P?n:P(Uint8Array),I={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":b&&P?P([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":A,"%AsyncGenerator%":A,"%AsyncGeneratorFunction%":A,"%AsyncIteratorPrototype%":A,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":s,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":v,"%GeneratorFunction%":A,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":b&&P?P(P([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!b||!P?n:P(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":o,"%ReferenceError%":u,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!b||!P?n:P(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":b&&P?P(""[Symbol.iterator]()):n,"%Symbol%":b?Symbol:n,"%SyntaxError%":h,"%ThrowTypeError%":p,"%TypedArray%":T,"%TypeError%":f,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":g,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet};if(P)try{null.error}catch(he){var M=P(P(he));I["%Error.prototype%"]=M}var j=function he(ce){var Ce;if(ce==="%AsyncFunction%")Ce=O("async function () {}");else if(ce==="%GeneratorFunction%")Ce=O("function* () {}");else if(ce==="%AsyncGeneratorFunction%")Ce=O("async function* () {}");else if(ce==="%AsyncGenerator%"){var pe=he("%AsyncGeneratorFunction%");pe&&(Ce=pe.prototype)}else if(ce==="%AsyncIteratorPrototype%"){var Ie=he("%AsyncGenerator%");Ie&&P&&(Ce=P(Ie.prototype))}return I[ce]=Ce,Ce},W={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Z=requireFunctionBind(),oe=requireHasown(),k=Z.call(Function.call,Array.prototype.concat),K=Z.call(Function.apply,Array.prototype.splice),J=Z.call(Function.call,String.prototype.replace),Q=Z.call(Function.call,String.prototype.slice),ie=Z.call(Function.call,RegExp.prototype.exec),ue=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,fe=/\\(\\)?/g,we=function(ce){var Ce=Q(ce,0,1),pe=Q(ce,-1);if(Ce==="%"&&pe!=="%")throw new h("invalid intrinsic syntax, expected closing `%`");if(pe==="%"&&Ce!=="%")throw new h("invalid intrinsic syntax, expected opening `%`");var Ie=[];return J(ce,ue,function(Le,ee,ae,de){Ie[Ie.length]=ae?J(de,fe,"$1"):ee||Le}),Ie},Te=function(ce,Ce){var pe=ce,Ie;if(oe(W,pe)&&(Ie=W[pe],pe="%"+Ie[0]+"%"),oe(I,pe)){var Le=I[pe];if(Le===A&&(Le=j(pe)),typeof Le>"u"&&!Ce)throw new f("intrinsic "+ce+" exists, but is not available. Please file an issue!");return{alias:Ie,name:pe,value:Le}}throw new h("intrinsic "+ce+" does not exist!")};return getIntrinsic=function(ce,Ce){if(typeof ce!="string"||ce.length===0)throw new f("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Ce!="boolean")throw new f('"allowMissing" argument must be a boolean');if(ie(/^%?[^%]*%?$/,ce)===null)throw new h("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var pe=we(ce),Ie=pe.length>0?pe[0]:"",Le=Te("%"+Ie+"%",Ce),ee=Le.name,ae=Le.value,de=!1,X=Le.alias;X&&(Ie=X[0],K(pe,k([0,1],X)));for(var re=1,ge=!0;re<pe.length;re+=1){var ye=pe[re],Oe=Q(ye,0,1),F=Q(ye,-1);if((Oe==='"'||Oe==="'"||Oe==="`"||F==='"'||F==="'"||F==="`")&&Oe!==F)throw new h("property names with quotes must have matching quotes");if((ye==="constructor"||!ge)&&(de=!0),Ie+="."+ye,ee="%"+Ie+"%",oe(I,ee))ae=I[ee];else if(ae!=null){if(!(ye in ae)){if(!Ce)throw new f("base intrinsic for "+ce+" exists, but the property is not available.");return}if(E&&re+1>=pe.length){var H=E(ae,ye);ge=!!H,ge&&"get"in H&&!("originalValue"in H.get)?ae=H.get:ae=ae[ye]}else ge=oe(ae,ye),ae=ae[ye];ge&&!de&&(I[ee]=ae)}}return ae},getIntrinsic}var callBind={exports:{}},esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var n=requireGetIntrinsic(),t=n("%Object.defineProperty%",!0)||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return esDefineProperty=t,esDefineProperty}var gopd,hasRequiredGopd;function requireGopd(){if(hasRequiredGopd)return gopd;hasRequiredGopd=1;var n=requireGetIntrinsic(),t=n("%Object.getOwnPropertyDescriptor%",!0);if(t)try{t([],"length")}catch{t=null}return gopd=t,gopd}var defineDataProperty,hasRequiredDefineDataProperty;function requireDefineDataProperty(){if(hasRequiredDefineDataProperty)return defineDataProperty;hasRequiredDefineDataProperty=1;var n=requireEsDefineProperty(),t=requireSyntax(),s=requireType(),o=requireGopd();return defineDataProperty=function(h,f,g){if(!h||typeof h!="object"&&typeof h!="function")throw new s("`obj` must be an object or a function`");if(typeof f!="string"&&typeof f!="symbol")throw new s("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new s("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new s("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new s("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new s("`loose`, if provided, must be a boolean");var v=arguments.length>3?arguments[3]:null,O=arguments.length>4?arguments[4]:null,E=arguments.length>5?arguments[5]:null,_=arguments.length>6?arguments[6]:!1,p=!!o&&o(h,f);if(n)n(h,f,{configurable:E===null&&p?p.configurable:!E,enumerable:v===null&&p?p.enumerable:!v,value:g,writable:O===null&&p?p.writable:!O});else if(_||!v&&!O&&!E)h[f]=g;else throw new t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},defineDataProperty}var hasPropertyDescriptors_1,hasRequiredHasPropertyDescriptors;function requireHasPropertyDescriptors(){if(hasRequiredHasPropertyDescriptors)return hasPropertyDescriptors_1;hasRequiredHasPropertyDescriptors=1;var n=requireEsDefineProperty(),t=function(){return!!n};return t.hasArrayLengthDefineBug=function(){if(!n)return null;try{return n([],"length",{value:1}).length!==1}catch{return!0}},hasPropertyDescriptors_1=t,hasPropertyDescriptors_1}var setFunctionLength,hasRequiredSetFunctionLength;function requireSetFunctionLength(){if(hasRequiredSetFunctionLength)return setFunctionLength;hasRequiredSetFunctionLength=1;var n=requireGetIntrinsic(),t=requireDefineDataProperty(),s=requireHasPropertyDescriptors()(),o=requireGopd(),u=requireType(),h=n("%Math.floor%");return setFunctionLength=function(g,v){if(typeof g!="function")throw new u("`fn` is not a function");if(typeof v!="number"||v<0||v>4294967295||h(v)!==v)throw new u("`length` must be a positive 32-bit integer");var O=arguments.length>2&&!!arguments[2],E=!0,_=!0;if("length"in g&&o){var p=o(g,"length");p&&!p.configurable&&(E=!1),p&&!p.writable&&(_=!1)}return(E||_||!O)&&(s?t(g,"length",v,!0,!0):t(g,"length",v)),g},setFunctionLength}var hasRequiredCallBind;function requireCallBind(){return hasRequiredCallBind||(hasRequiredCallBind=1,function(n){var t=requireFunctionBind(),s=requireGetIntrinsic(),o=requireSetFunctionLength(),u=requireType(),h=s("%Function.prototype.apply%"),f=s("%Function.prototype.call%"),g=s("%Reflect.apply%",!0)||t.call(f,h),v=requireEsDefineProperty(),O=s("%Math.max%");n.exports=function(p){if(typeof p!="function")throw new u("a function is required");var b=g(t,f,arguments);return o(b,1+O(0,p.length-(arguments.length-1)),!0)};var E=function(){return g(t,h,arguments)};v?v(n.exports,"apply",{value:E}):n.exports.apply=E}(callBind)),callBind.exports}var callBound,hasRequiredCallBound;function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var n=requireGetIntrinsic(),t=requireCallBind(),s=t(n("String.prototype.indexOf"));return callBound=function(u,h){var f=n(u,!!h);return typeof f=="function"&&s(u,".prototype.")>-1?t(f):f},callBound}var isArguments,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments;hasRequiredIsArguments=1;var n=requireShams()(),t=requireCallBound(),s=t("Object.prototype.toString"),o=function(g){return n&&g&&typeof g=="object"&&Symbol.toStringTag in g?!1:s(g)==="[object Arguments]"},u=function(g){return o(g)?!0:g!==null&&typeof g=="object"&&typeof g.length=="number"&&g.length>=0&&s(g)!=="[object Array]"&&s(g.callee)==="[object Function]"},h=function(){return o(arguments)}();return o.isLegacyArguments=u,isArguments=h?o:u,isArguments}var isGeneratorFunction,hasRequiredIsGeneratorFunction;function requireIsGeneratorFunction(){if(hasRequiredIsGeneratorFunction)return isGeneratorFunction;hasRequiredIsGeneratorFunction=1;var n=Object.prototype.toString,t=Function.prototype.toString,s=/^\s*(?:function)?\*/,o=requireShams()(),u=Object.getPrototypeOf,h=function(){if(!o)return!1;try{return Function("return function*() {}")()}catch{}},f;return isGeneratorFunction=function(v){if(typeof v!="function")return!1;if(s.test(t.call(v)))return!0;if(!o){var O=n.call(v);return O==="[object GeneratorFunction]"}if(!u)return!1;if(typeof f>"u"){var E=h();f=E?u(E):!1}return u(v)===f},isGeneratorFunction}var isCallable,hasRequiredIsCallable;function requireIsCallable(){if(hasRequiredIsCallable)return isCallable;hasRequiredIsCallable=1;var n=Function.prototype.toString,t=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,s,o;if(typeof t=="function"&&typeof Object.defineProperty=="function")try{s=Object.defineProperty({},"length",{get:function(){throw o}}),o={},t(function(){throw 42},null,s)}catch(I){I!==o&&(t=null)}else t=null;var u=/^\s*class\b/,h=function(M){try{var j=n.call(M);return u.test(j)}catch{return!1}},f=function(M){try{return h(M)?!1:(n.call(M),!0)}catch{return!1}},g=Object.prototype.toString,v="[object Object]",O="[object Function]",E="[object GeneratorFunction]",_="[object HTMLAllCollection]",p="[object HTML document.all class]",b="[object HTMLCollection]",C=typeof Symbol=="function"&&!!Symbol.toStringTag,P=!(0 in[,]),A=function(){return!1};if(typeof document=="object"){var T=document.all;g.call(T)===g.call(document.all)&&(A=function(M){if((P||!M)&&(typeof M>"u"||typeof M=="object"))try{var j=g.call(M);return(j===_||j===p||j===b||j===v)&&M("")==null}catch{}return!1})}return isCallable=t?function(M){if(A(M))return!0;if(!M||typeof M!="function"&&typeof M!="object")return!1;try{t(M,null,s)}catch(j){if(j!==o)return!1}return!h(M)&&f(M)}:function(M){if(A(M))return!0;if(!M||typeof M!="function"&&typeof M!="object")return!1;if(C)return f(M);if(h(M))return!1;var j=g.call(M);return j!==O&&j!==E&&!/^\[object HTML/.test(j)?!1:f(M)},isCallable}var forEach_1,hasRequiredForEach;function requireForEach(){if(hasRequiredForEach)return forEach_1;hasRequiredForEach=1;var n=requireIsCallable(),t=Object.prototype.toString,s=Object.prototype.hasOwnProperty,o=function(v,O,E){for(var _=0,p=v.length;_<p;_++)s.call(v,_)&&(E==null?O(v[_],_,v):O.call(E,v[_],_,v))},u=function(v,O,E){for(var _=0,p=v.length;_<p;_++)E==null?O(v.charAt(_),_,v):O.call(E,v.charAt(_),_,v)},h=function(v,O,E){for(var _ in v)s.call(v,_)&&(E==null?O(v[_],_,v):O.call(E,v[_],_,v))},f=function(v,O,E){if(!n(O))throw new TypeError("iterator must be a function");var _;arguments.length>=3&&(_=E),t.call(v)==="[object Array]"?o(v,O,_):typeof v=="string"?u(v,O,_):h(v,O,_)};return forEach_1=f,forEach_1}var possibleTypedArrayNames,hasRequiredPossibleTypedArrayNames;function requirePossibleTypedArrayNames(){return hasRequiredPossibleTypedArrayNames||(hasRequiredPossibleTypedArrayNames=1,possibleTypedArrayNames=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),possibleTypedArrayNames}var availableTypedArrays,hasRequiredAvailableTypedArrays;function requireAvailableTypedArrays(){if(hasRequiredAvailableTypedArrays)return availableTypedArrays;hasRequiredAvailableTypedArrays=1;var n=requirePossibleTypedArrayNames(),t=typeof globalThis>"u"?commonjsGlobal:globalThis;return availableTypedArrays=function(){for(var o=[],u=0;u<n.length;u++)typeof t[n[u]]=="function"&&(o[o.length]=n[u]);return o},availableTypedArrays}var whichTypedArray,hasRequiredWhichTypedArray;function requireWhichTypedArray(){if(hasRequiredWhichTypedArray)return whichTypedArray;hasRequiredWhichTypedArray=1;var n=requireForEach(),t=requireAvailableTypedArrays(),s=requireCallBind(),o=requireCallBound(),u=requireGopd(),h=o("Object.prototype.toString"),f=requireShams()(),g=typeof globalThis>"u"?commonjsGlobal:globalThis,v=t(),O=o("String.prototype.slice"),E=Object.getPrototypeOf,_=o("Array.prototype.indexOf",!0)||function(A,T){for(var I=0;I<A.length;I+=1)if(A[I]===T)return I;return-1},p={__proto__:null};f&&u&&E?n(v,function(P){var A=new g[P];if(Symbol.toStringTag in A){var T=E(A),I=u(T,Symbol.toStringTag);if(!I){var M=E(T);I=u(M,Symbol.toStringTag)}p["$"+P]=s(I.get)}}):n(v,function(P){var A=new g[P],T=A.slice||A.set;T&&(p["$"+P]=s(T))});var b=function(A){var T=!1;return n(p,function(I,M){if(!T)try{"$"+I(A)===M&&(T=O(M,1))}catch{}}),T},C=function(A){var T=!1;return n(p,function(I,M){if(!T)try{I(A),T=O(M,1)}catch{}}),T};return whichTypedArray=function(A){if(!A||typeof A!="object")return!1;if(!f){var T=O(h(A),8,-1);return _(v,T)>-1?T:T!=="Object"?!1:C(A)}return u?b(A):null},whichTypedArray}var isTypedArray,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray;hasRequiredIsTypedArray=1;var n=requireWhichTypedArray();return isTypedArray=function(s){return!!n(s)},isTypedArray}var hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,function(n){var t=requireIsArguments(),s=requireIsGeneratorFunction(),o=requireWhichTypedArray(),u=requireIsTypedArray();function h(xe){return xe.call.bind(xe)}var f=typeof BigInt<"u",g=typeof Symbol<"u",v=h(Object.prototype.toString),O=h(Number.prototype.valueOf),E=h(String.prototype.valueOf),_=h(Boolean.prototype.valueOf);if(f)var p=h(BigInt.prototype.valueOf);if(g)var b=h(Symbol.prototype.valueOf);function C(xe,ut){if(typeof xe!="object")return!1;try{return ut(xe),!0}catch{return!1}}n.isArgumentsObject=t,n.isGeneratorFunction=s,n.isTypedArray=u;function P(xe){return typeof Promise<"u"&&xe instanceof Promise||xe!==null&&typeof xe=="object"&&typeof xe.then=="function"&&typeof xe.catch=="function"}n.isPromise=P;function A(xe){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(xe):u(xe)||ee(xe)}n.isArrayBufferView=A;function T(xe){return o(xe)==="Uint8Array"}n.isUint8Array=T;function I(xe){return o(xe)==="Uint8ClampedArray"}n.isUint8ClampedArray=I;function M(xe){return o(xe)==="Uint16Array"}n.isUint16Array=M;function j(xe){return o(xe)==="Uint32Array"}n.isUint32Array=j;function W(xe){return o(xe)==="Int8Array"}n.isInt8Array=W;function Z(xe){return o(xe)==="Int16Array"}n.isInt16Array=Z;function oe(xe){return o(xe)==="Int32Array"}n.isInt32Array=oe;function k(xe){return o(xe)==="Float32Array"}n.isFloat32Array=k;function K(xe){return o(xe)==="Float64Array"}n.isFloat64Array=K;function J(xe){return o(xe)==="BigInt64Array"}n.isBigInt64Array=J;function Q(xe){return o(xe)==="BigUint64Array"}n.isBigUint64Array=Q;function ie(xe){return v(xe)==="[object Map]"}ie.working=typeof Map<"u"&&ie(new Map);function ue(xe){return typeof Map>"u"?!1:ie.working?ie(xe):xe instanceof Map}n.isMap=ue;function fe(xe){return v(xe)==="[object Set]"}fe.working=typeof Set<"u"&&fe(new Set);function we(xe){return typeof Set>"u"?!1:fe.working?fe(xe):xe instanceof Set}n.isSet=we;function Te(xe){return v(xe)==="[object WeakMap]"}Te.working=typeof WeakMap<"u"&&Te(new WeakMap);function he(xe){return typeof WeakMap>"u"?!1:Te.working?Te(xe):xe instanceof WeakMap}n.isWeakMap=he;function ce(xe){return v(xe)==="[object WeakSet]"}ce.working=typeof WeakSet<"u"&&ce(new WeakSet);function Ce(xe){return ce(xe)}n.isWeakSet=Ce;function pe(xe){return v(xe)==="[object ArrayBuffer]"}pe.working=typeof ArrayBuffer<"u"&&pe(new ArrayBuffer);function Ie(xe){return typeof ArrayBuffer>"u"?!1:pe.working?pe(xe):xe instanceof ArrayBuffer}n.isArrayBuffer=Ie;function Le(xe){return v(xe)==="[object DataView]"}Le.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Le(new DataView(new ArrayBuffer(1),0,1));function ee(xe){return typeof DataView>"u"?!1:Le.working?Le(xe):xe instanceof DataView}n.isDataView=ee;var ae=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function de(xe){return v(xe)==="[object SharedArrayBuffer]"}function X(xe){return typeof ae>"u"?!1:(typeof de.working>"u"&&(de.working=de(new ae)),de.working?de(xe):xe instanceof ae)}n.isSharedArrayBuffer=X;function re(xe){return v(xe)==="[object AsyncFunction]"}n.isAsyncFunction=re;function ge(xe){return v(xe)==="[object Map Iterator]"}n.isMapIterator=ge;function ye(xe){return v(xe)==="[object Set Iterator]"}n.isSetIterator=ye;function Oe(xe){return v(xe)==="[object Generator]"}n.isGeneratorObject=Oe;function F(xe){return v(xe)==="[object WebAssembly.Module]"}n.isWebAssemblyCompiledModule=F;function H(xe){return C(xe,O)}n.isNumberObject=H;function Se(xe){return C(xe,E)}n.isStringObject=Se;function Me(xe){return C(xe,_)}n.isBooleanObject=Me;function be(xe){return f&&C(xe,p)}n.isBigIntObject=be;function Ne(xe){return g&&C(xe,b)}n.isSymbolObject=Ne;function ze(xe){return H(xe)||Se(xe)||Me(xe)||be(xe)||Ne(xe)}n.isBoxedPrimitive=ze;function Xe(xe){return typeof Uint8Array<"u"&&(Ie(xe)||X(xe))}n.isAnyArrayBuffer=Xe,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(xe){Object.defineProperty(n,xe,{enumerable:!1,value:function(){throw new Error(xe+" is not supported in userland")}})})}(types)),types}var isBufferBrowser,hasRequiredIsBufferBrowser;function requireIsBufferBrowser(){return hasRequiredIsBufferBrowser||(hasRequiredIsBufferBrowser=1,isBufferBrowser=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}),isBufferBrowser}var inherits_browser={exports:{}},hasRequiredInherits_browser;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,typeof Object.create=="function"?inherits_browser.exports=function(t,s){s&&(t.super_=s,t.prototype=Object.create(s.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(t,s){if(s){t.super_=s;var o=function(){};o.prototype=s.prototype,t.prototype=new o,t.prototype.constructor=t}}),inherits_browser.exports}var hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,function(n){var t={},s=Object.getOwnPropertyDescriptors||function(ae){for(var de=Object.keys(ae),X={},re=0;re<de.length;re++)X[de[re]]=Object.getOwnPropertyDescriptor(ae,de[re]);return X},o=/%[sdj%]/g;n.format=function(ee){if(!Z(ee)){for(var ae=[],de=0;de<arguments.length;de++)ae.push(g(arguments[de]));return ae.join(" ")}for(var de=1,X=arguments,re=X.length,ge=String(ee).replace(o,function(Oe){if(Oe==="%%")return"%";if(de>=re)return Oe;switch(Oe){case"%s":return String(X[de++]);case"%d":return Number(X[de++]);case"%j":try{return JSON.stringify(X[de++])}catch{return"[Circular]"}default:return Oe}}),ye=X[de];de<re;ye=X[++de])M(ye)||!J(ye)?ge+=" "+ye:ge+=" "+g(ye);return ge},n.deprecate=function(ee,ae){if(typeof process$1<"u"&&process$1.noDeprecation===!0)return ee;if(typeof process$1>"u")return function(){return n.deprecate(ee,ae).apply(this,arguments)};var de=!1;function X(){if(!de){if(process$1.throwDeprecation)throw new Error(ae);process$1.traceDeprecation?console.trace(ae):console.error(ae),de=!0}return ee.apply(this,arguments)}return X};var u={},h=/^$/;if(t.NODE_DEBUG){var f=t.NODE_DEBUG;f=f.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),h=new RegExp("^"+f+"$","i")}n.debuglog=function(ee){if(ee=ee.toUpperCase(),!u[ee])if(h.test(ee)){var ae=process$1.pid;u[ee]=function(){var de=n.format.apply(n,arguments);console.error("%s %d: %s",ee,ae,de)}}else u[ee]=function(){};return u[ee]};function g(ee,ae){var de={seen:[],stylize:O};return arguments.length>=3&&(de.depth=arguments[2]),arguments.length>=4&&(de.colors=arguments[3]),I(ae)?de.showHidden=ae:ae&&n._extend(de,ae),k(de.showHidden)&&(de.showHidden=!1),k(de.depth)&&(de.depth=2),k(de.colors)&&(de.colors=!1),k(de.customInspect)&&(de.customInspect=!0),de.colors&&(de.stylize=v),_(de,ee,de.depth)}n.inspect=g,g.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},g.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function v(ee,ae){var de=g.styles[ae];return de?"\x1B["+g.colors[de][0]+"m"+ee+"\x1B["+g.colors[de][1]+"m":ee}function O(ee,ae){return ee}function E(ee){var ae={};return ee.forEach(function(de,X){ae[de]=!0}),ae}function _(ee,ae,de){if(ee.customInspect&&ae&&ue(ae.inspect)&&ae.inspect!==n.inspect&&!(ae.constructor&&ae.constructor.prototype===ae)){var X=ae.inspect(de,ee);return Z(X)||(X=_(ee,X,de)),X}var re=p(ee,ae);if(re)return re;var ge=Object.keys(ae),ye=E(ge);if(ee.showHidden&&(ge=Object.getOwnPropertyNames(ae)),ie(ae)&&(ge.indexOf("message")>=0||ge.indexOf("description")>=0))return b(ae);if(ge.length===0){if(ue(ae)){var Oe=ae.name?": "+ae.name:"";return ee.stylize("[Function"+Oe+"]","special")}if(K(ae))return ee.stylize(RegExp.prototype.toString.call(ae),"regexp");if(Q(ae))return ee.stylize(Date.prototype.toString.call(ae),"date");if(ie(ae))return b(ae)}var F="",H=!1,Se=["{","}"];if(T(ae)&&(H=!0,Se=["[","]"]),ue(ae)){var Me=ae.name?": "+ae.name:"";F=" [Function"+Me+"]"}if(K(ae)&&(F=" "+RegExp.prototype.toString.call(ae)),Q(ae)&&(F=" "+Date.prototype.toUTCString.call(ae)),ie(ae)&&(F=" "+b(ae)),ge.length===0&&(!H||ae.length==0))return Se[0]+F+Se[1];if(de<0)return K(ae)?ee.stylize(RegExp.prototype.toString.call(ae),"regexp"):ee.stylize("[Object]","special");ee.seen.push(ae);var be;return H?be=C(ee,ae,de,ye,ge):be=ge.map(function(Ne){return P(ee,ae,de,ye,Ne,H)}),ee.seen.pop(),A(be,F,Se)}function p(ee,ae){if(k(ae))return ee.stylize("undefined","undefined");if(Z(ae)){var de="'"+JSON.stringify(ae).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ee.stylize(de,"string")}if(W(ae))return ee.stylize(""+ae,"number");if(I(ae))return ee.stylize(""+ae,"boolean");if(M(ae))return ee.stylize("null","null")}function b(ee){return"["+Error.prototype.toString.call(ee)+"]"}function C(ee,ae,de,X,re){for(var ge=[],ye=0,Oe=ae.length;ye<Oe;++ye)Ce(ae,String(ye))?ge.push(P(ee,ae,de,X,String(ye),!0)):ge.push("");return re.forEach(function(F){F.match(/^\d+$/)||ge.push(P(ee,ae,de,X,F,!0))}),ge}function P(ee,ae,de,X,re,ge){var ye,Oe,F;if(F=Object.getOwnPropertyDescriptor(ae,re)||{value:ae[re]},F.get?F.set?Oe=ee.stylize("[Getter/Setter]","special"):Oe=ee.stylize("[Getter]","special"):F.set&&(Oe=ee.stylize("[Setter]","special")),Ce(X,re)||(ye="["+re+"]"),Oe||(ee.seen.indexOf(F.value)<0?(M(de)?Oe=_(ee,F.value,null):Oe=_(ee,F.value,de-1),Oe.indexOf(`
`)>-1&&(ge?Oe=Oe.split(`
`).map(function(H){return"  "+H}).join(`
`).slice(2):Oe=`
`+Oe.split(`
`).map(function(H){return"   "+H}).join(`
`))):Oe=ee.stylize("[Circular]","special")),k(ye)){if(ge&&re.match(/^\d+$/))return Oe;ye=JSON.stringify(""+re),ye.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ye=ye.slice(1,-1),ye=ee.stylize(ye,"name")):(ye=ye.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ye=ee.stylize(ye,"string"))}return ye+": "+Oe}function A(ee,ae,de){var X=ee.reduce(function(re,ge){return ge.indexOf(`
`)>=0,re+ge.replace(/\u001b\[\d\d?m/g,"").length+1},0);return X>60?de[0]+(ae===""?"":ae+`
 `)+" "+ee.join(`,
  `)+" "+de[1]:de[0]+ae+" "+ee.join(", ")+" "+de[1]}n.types=requireTypes();function T(ee){return Array.isArray(ee)}n.isArray=T;function I(ee){return typeof ee=="boolean"}n.isBoolean=I;function M(ee){return ee===null}n.isNull=M;function j(ee){return ee==null}n.isNullOrUndefined=j;function W(ee){return typeof ee=="number"}n.isNumber=W;function Z(ee){return typeof ee=="string"}n.isString=Z;function oe(ee){return typeof ee=="symbol"}n.isSymbol=oe;function k(ee){return ee===void 0}n.isUndefined=k;function K(ee){return J(ee)&&we(ee)==="[object RegExp]"}n.isRegExp=K,n.types.isRegExp=K;function J(ee){return typeof ee=="object"&&ee!==null}n.isObject=J;function Q(ee){return J(ee)&&we(ee)==="[object Date]"}n.isDate=Q,n.types.isDate=Q;function ie(ee){return J(ee)&&(we(ee)==="[object Error]"||ee instanceof Error)}n.isError=ie,n.types.isNativeError=ie;function ue(ee){return typeof ee=="function"}n.isFunction=ue;function fe(ee){return ee===null||typeof ee=="boolean"||typeof ee=="number"||typeof ee=="string"||typeof ee=="symbol"||typeof ee>"u"}n.isPrimitive=fe,n.isBuffer=requireIsBufferBrowser();function we(ee){return Object.prototype.toString.call(ee)}function Te(ee){return ee<10?"0"+ee.toString(10):ee.toString(10)}var he=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ce(){var ee=new Date,ae=[Te(ee.getHours()),Te(ee.getMinutes()),Te(ee.getSeconds())].join(":");return[ee.getDate(),he[ee.getMonth()],ae].join(" ")}n.log=function(){console.log("%s - %s",ce(),n.format.apply(n,arguments))},n.inherits=requireInherits_browser(),n._extend=function(ee,ae){if(!ae||!J(ae))return ee;for(var de=Object.keys(ae),X=de.length;X--;)ee[de[X]]=ae[de[X]];return ee};function Ce(ee,ae){return Object.prototype.hasOwnProperty.call(ee,ae)}var pe=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;n.promisify=function(ae){if(typeof ae!="function")throw new TypeError('The "original" argument must be of type Function');if(pe&&ae[pe]){var de=ae[pe];if(typeof de!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(de,pe,{value:de,enumerable:!1,writable:!1,configurable:!0}),de}function de(){for(var X,re,ge=new Promise(function(F,H){X=F,re=H}),ye=[],Oe=0;Oe<arguments.length;Oe++)ye.push(arguments[Oe]);ye.push(function(F,H){F?re(F):X(H)});try{ae.apply(this,ye)}catch(F){re(F)}return ge}return Object.setPrototypeOf(de,Object.getPrototypeOf(ae)),pe&&Object.defineProperty(de,pe,{value:de,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(de,s(ae))},n.promisify.custom=pe;function Ie(ee,ae){if(!ee){var de=new Error("Promise was rejected with a falsy value");de.reason=ee,ee=de}return ae(ee)}function Le(ee){if(typeof ee!="function")throw new TypeError('The "original" argument must be of type Function');function ae(){for(var de=[],X=0;X<arguments.length;X++)de.push(arguments[X]);var re=de.pop();if(typeof re!="function")throw new TypeError("The last argument must be of type Function");var ge=this,ye=function(){return re.apply(ge,arguments)};ee.apply(this,de).then(function(Oe){process$1.nextTick(ye.bind(null,null,Oe))},function(Oe){process$1.nextTick(Ie.bind(null,Oe,ye))})}return Object.setPrototypeOf(ae,Object.getPrototypeOf(ee)),Object.defineProperties(ae,s(ee)),ae}n.callbackify=Le}(util)),util}var browserSerialport$1,hasRequiredBrowserSerialport;function requireBrowserSerialport(){if(hasRequiredBrowserSerialport)return browserSerialport$1;hasRequiredBrowserSerialport=1;var n=eventsExports.EventEmitter,t=requireUtil(),s=[7,8],o=[1,2],u=["none","even","mark","odd","space"],h=["RTSCTS"],f={baudrate:9600,parity:"none",rtscts:!1,databits:8,stopbits:1,buffersize:256};function g(b){switch(b.dataBits){case 7:b.dataBits="seven";break;case 8:b.dataBits="eight";break}switch(b.stopBits){case 1:b.stopBits="one";break;case 2:b.stopBits="two";break}switch(b.parity){case"none":b.parity="no";break}return b}function v(b,C,P,A){n.call(this);var T=this,I=Array.prototype.slice.call(arguments);A=I.pop(),typeof A!="function"&&(A=null),C=typeof C!="function"&&C||{},P=P??!0,A=A||function(Z){Z&&T.emit("error",Z)};var M;if(C.baudRate=C.baudRate||C.baudrate||f.baudrate,C.dataBits=C.dataBits||C.databits||f.databits,s.indexOf(C.dataBits)===-1){M=new Error('Invalid "databits": '+C.dataBits),A(M);return}if(C.stopBits=C.stopBits||C.stopbits||f.stopbits,o.indexOf(C.stopBits)===-1){M=new Error('Invalid "stopbits": '+C.stopbits),A(M);return}if(C.parity=C.parity||f.parity,u.indexOf(C.parity)===-1){M=new Error('Invalid "parity": '+C.parity),A(M);return}if(!b){M=new Error("Invalid port specified: "+b),A(M);return}if(C.rtscts=f.rtscts,C.flowControl||C.flowcontrol){var j=C.flowControl||C.flowcontrol;if(typeof j=="boolean")C.rtscts=!0;else{var W=j.every(function(Z){var oe=Z.toUpperCase(),k=h.indexOf(oe);if(k<0){var K=new Error('Invalid "flowControl": '+oe+". Valid options: "+h.join(", "));return A(K),!1}else{switch(k){case 0:C.rtscts=!0;break}return!0}});if(!W)return}}if(C.bufferSize=C.bufferSize||C.buffersize||f.buffersize,C.serial=C.serial||typeof chrome<"u"&&chrome.serial,!C.serial)throw new Error("No access to serial ports. Try loading as a Chrome Application.");this.options=g(C),this.options.serial.onReceiveError.addListener(function(Z){switch(Z.error){case"disconnected":case"device_lost":case"system_error":M=new Error("Disconnected"),T.options.disconnectedCallback?T.options.disconnectedCallback(M):T.emit("disconnect",M),T.connectionId>=0&&T.close();break}}),this.path=b,P&&process$1.nextTick(function(){T.open(A)})}t.inherits(v,n),v.prototype.connectionId=-1,v.prototype.open=function(b){var C={bitrate:parseInt(this.options.baudRate,10),dataBits:this.options.dataBits,parityBit:this.options.parity,stopBits:this.options.stopBits,ctsFlowControl:this.options.rtscts};this.options.serial.connect(this.path,C,this.proxy("onOpen",b))},v.prototype.onOpen=function(b,C){if(chrome.runtime.lastError){typeof b=="function"?b(chrome.runtime.lastError):this.emit("error",chrome.runtime.lastError);return}if(this.connectionId=C.connectionId,this.connectionId===-1){this.emit("error",new Error("Could not open port."));return}this.emit("open",C),this._reader=this.proxy("onRead"),this.options.serial.onReceive.addListener(this._reader),typeof b=="function"&&b(chrome.runtime.lastError,C)},v.prototype.onRead=function(b){b&&this.connectionId===b.connectionId&&(this.options.dataCallback?this.options.dataCallback(p(b.data)):this.emit("data",p(b.data)))},v.prototype.write=function(b,C){if(this.connectionId<0){var P=new Error("Serialport not open.");typeof C=="function"?C(P):this.emit("error",P);return}typeof b=="string"&&(b=E(b)),b instanceof ArrayBuffer||(b=_(b)),this.options.serial.send(this.connectionId,b,function(A){typeof C=="function"&&C(chrome.runtime.lastError,A)})},v.prototype.close=function(b){if(this.connectionId<0){var C=new Error("Serialport not open.");typeof b=="function"?b(C):this.emit("error",C);return}this.options.serial.disconnect(this.connectionId,this.proxy("onClose",b))},v.prototype.onClose=function(b,C){this.connectionId=-1,this.emit("close"),this.removeAllListeners(),this._reader&&(this.options.serial.onReceive.removeListener(this._reader),this._reader=null),typeof b=="function"&&b(chrome.runtime.lastError,C)},v.prototype.flush=function(b){if(this.connectionId<0){var C=new Error("Serialport not open.");typeof b=="function"?b(C):this.emit("error",C);return}var P=this;this.options.serial.flush(this.connectionId,function(A){if(chrome.runtime.lastError){typeof b=="function"?b(chrome.runtime.lastError,A):P.emit("error",chrome.runtime.lastError);return}else b(null,A)})},v.prototype.drain=function(b){if(this.connectionId<0){var C=new Error("Serialport not open.");typeof b=="function"?b(C):this.emit("error",C);return}typeof b=="function"&&b()},v.prototype.proxy=function(){for(var b=this,C=[],P=0;P<arguments.length;P++)C[P]=arguments[P];var A=C.splice(0,1)[0],T=function(){for(var I=[],M=0;M<arguments.length;M++)I[M]=arguments[M];var j=C.concat(I);b[A].apply(b,j)};return T},v.prototype.set=function(b,C){this.options.serial.setControlSignals(this.connectionId,b,function(P){C(chrome.runtime.lastError,P)})},v.prototype.isOpen=function(){return this.connectionId>-1};function O(b){typeof chrome<"u"&&chrome.serial?chrome.serial.getDevices(function(C){for(var P=new Array(C.length),A=0;A<C.length;A++)P[A]={comName:C[A].path,manufacturer:C[A].displayName,serialNumber:"",pnpId:"",locationId:"",vendorId:"0x"+(C[A].vendorId||0).toString(16),productId:"0x"+(C[A].productId||0).toString(16)};b(chrome.runtime.lastError,P)}):b(new Error("No access to serial ports. Try loading as a Chrome Application."),null)}function E(b){for(var C=new ArrayBuffer(b.length),P=new Uint8Array(C),A=0;A<b.length;A++)P[A]=b.charCodeAt(A);return C}function _(b){for(var C=new ArrayBuffer(b.length),P=new Uint8Array(C),A=0;A<b.length;A++)P[A]=b[A];return C}function p(b){for(var C=new Buffer(b.byteLength),P=new Uint8Array(b),A=0;A<C.length;++A)C[A]=P[A];return C}return browserSerialport$1={SerialPort:v,list:O,buffer2ArrayBuffer:_,used:[]},browserSerialport$1}var streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=eventsExports.EventEmitter),streamBrowser}const require$$2=getAugmentedNamespace(dist);var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function n(C,P){var A=Object.keys(C);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(C);P&&(T=T.filter(function(I){return Object.getOwnPropertyDescriptor(C,I).enumerable})),A.push.apply(A,T)}return A}function t(C){for(var P=1;P<arguments.length;P++){var A=arguments[P]!=null?arguments[P]:{};P%2?n(Object(A),!0).forEach(function(T){s(C,T,A[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(A)):n(Object(A)).forEach(function(T){Object.defineProperty(C,T,Object.getOwnPropertyDescriptor(A,T))})}return C}function s(C,P,A){return P=f(P),P in C?Object.defineProperty(C,P,{value:A,enumerable:!0,configurable:!0,writable:!0}):C[P]=A,C}function o(C,P){if(!(C instanceof P))throw new TypeError("Cannot call a class as a function")}function u(C,P){for(var A=0;A<P.length;A++){var T=P[A];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(C,f(T.key),T)}}function h(C,P,A){return P&&u(C.prototype,P),Object.defineProperty(C,"prototype",{writable:!1}),C}function f(C){var P=g(C,"string");return typeof P=="symbol"?P:String(P)}function g(C,P){if(typeof C!="object"||C===null)return C;var A=C[Symbol.toPrimitive];if(A!==void 0){var T=A.call(C,P||"default");if(typeof T!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(C)}var v=require$$2,O=v.Buffer,E=requireUtil(),_=E.inspect,p=_&&_.custom||"inspect";function b(C,P,A){O.prototype.copy.call(C,P,A)}return buffer_list=function(){function C(){o(this,C),this.head=null,this.tail=null,this.length=0}return h(C,[{key:"push",value:function(A){var T={data:A,next:null};this.length>0?this.tail.next=T:this.head=T,this.tail=T,++this.length}},{key:"unshift",value:function(A){var T={data:A,next:this.head};this.length===0&&(this.tail=T),this.head=T,++this.length}},{key:"shift",value:function(){if(this.length!==0){var A=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,A}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(A){if(this.length===0)return"";for(var T=this.head,I=""+T.data;T=T.next;)I+=A+T.data;return I}},{key:"concat",value:function(A){if(this.length===0)return O.alloc(0);for(var T=O.allocUnsafe(A>>>0),I=this.head,M=0;I;)b(I.data,T,M),M+=I.data.length,I=I.next;return T}},{key:"consume",value:function(A,T){var I;return A<this.head.data.length?(I=this.head.data.slice(0,A),this.head.data=this.head.data.slice(A)):A===this.head.data.length?I=this.shift():I=T?this._getString(A):this._getBuffer(A),I}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(A){var T=this.head,I=1,M=T.data;for(A-=M.length;T=T.next;){var j=T.data,W=A>j.length?j.length:A;if(W===j.length?M+=j:M+=j.slice(0,A),A-=W,A===0){W===j.length?(++I,T.next?this.head=T.next:this.head=this.tail=null):(this.head=T,T.data=j.slice(W));break}++I}return this.length-=I,M}},{key:"_getBuffer",value:function(A){var T=O.allocUnsafe(A),I=this.head,M=1;for(I.data.copy(T),A-=I.data.length;I=I.next;){var j=I.data,W=A>j.length?j.length:A;if(j.copy(T,T.length-A,0,W),A-=W,A===0){W===j.length?(++M,I.next?this.head=I.next:this.head=this.tail=null):(this.head=I,I.data=j.slice(W));break}++M}return this.length-=M,T}},{key:p,value:function(A,T){return _(this,t(t({},T),{},{depth:0,customInspect:!1}))}}]),C}(),buffer_list}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;function n(f,g){var v=this,O=this._readableState&&this._readableState.destroyed,E=this._writableState&&this._writableState.destroyed;return O||E?(g?g(f):f&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1.nextTick(u,this,f)):process$1.nextTick(u,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(_){!g&&_?v._writableState?v._writableState.errorEmitted?process$1.nextTick(s,v):(v._writableState.errorEmitted=!0,process$1.nextTick(t,v,_)):process$1.nextTick(t,v,_):g?(process$1.nextTick(s,v),g(_)):process$1.nextTick(s,v)}),this)}function t(f,g){u(f,g),s(f)}function s(f){f._writableState&&!f._writableState.emitClose||f._readableState&&!f._readableState.emitClose||f.emit("close")}function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function u(f,g){f.emit("error",g)}function h(f,g){var v=f._readableState,O=f._writableState;v&&v.autoDestroy||O&&O.autoDestroy?f.destroy(g):f.emit("error",g)}return destroy_1={destroy:n,undestroy:o,errorOrDestroy:h},destroy_1}var errorsBrowser={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;function n(g,v){g.prototype=Object.create(v.prototype),g.prototype.constructor=g,g.__proto__=v}var t={};function s(g,v,O){O||(O=Error);function E(p,b,C){return typeof v=="string"?v:v(p,b,C)}var _=function(p){n(b,p);function b(C,P,A){return p.call(this,E(C,P,A))||this}return b}(O);_.prototype.name=O.name,_.prototype.code=g,t[g]=_}function o(g,v){if(Array.isArray(g)){var O=g.length;return g=g.map(function(E){return String(E)}),O>2?"one of ".concat(v," ").concat(g.slice(0,O-1).join(", "),", or ")+g[O-1]:O===2?"one of ".concat(v," ").concat(g[0]," or ").concat(g[1]):"of ".concat(v," ").concat(g[0])}else return"of ".concat(v," ").concat(String(g))}function u(g,v,O){return g.substr(0,v.length)===v}function h(g,v,O){return(O===void 0||O>g.length)&&(O=g.length),g.substring(O-v.length,O)===v}function f(g,v,O){return typeof O!="number"&&(O=0),O+v.length>g.length?!1:g.indexOf(v,O)!==-1}return s("ERR_INVALID_OPT_VALUE",function(g,v){return'The value "'+v+'" is invalid for option "'+g+'"'},TypeError),s("ERR_INVALID_ARG_TYPE",function(g,v,O){var E;typeof v=="string"&&u(v,"not ")?(E="must not be",v=v.replace(/^not /,"")):E="must be";var _;if(h(g," argument"))_="The ".concat(g," ").concat(E," ").concat(o(v,"type"));else{var p=f(g,".")?"property":"argument";_='The "'.concat(g,'" ').concat(p," ").concat(E," ").concat(o(v,"type"))}return _+=". Received type ".concat(typeof O),_},TypeError),s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),s("ERR_METHOD_NOT_IMPLEMENTED",function(g){return"The "+g+" method is not implemented"}),s("ERR_STREAM_PREMATURE_CLOSE","Premature close"),s("ERR_STREAM_DESTROYED",function(g){return"Cannot call "+g+" after a stream was destroyed"}),s("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),s("ERR_STREAM_WRITE_AFTER_END","write after end"),s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),s("ERR_UNKNOWN_ENCODING",function(g){return"Unknown encoding: "+g},TypeError),s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=t,errorsBrowser}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;var n=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function t(o,u,h){return o.highWaterMark!=null?o.highWaterMark:u?o[h]:null}function s(o,u,h,f){var g=t(u,f,h);if(g!=null){if(!(isFinite(g)&&Math.floor(g)===g)||g<0){var v=f?h:"highWaterMark";throw new n(v,g)}return Math.floor(g)}return o.objectMode?16:16*1024}return state={getHighWaterMark:s},state}var browser$1,hasRequiredBrowser$1;function requireBrowser$1(){if(hasRequiredBrowser$1)return browser$1;hasRequiredBrowser$1=1,browser$1=n;function n(s,o){if(t("noDeprecation"))return s;var u=!1;function h(){if(!u){if(t("throwDeprecation"))throw new Error(o);t("traceDeprecation")?console.trace(o):console.warn(o),u=!0}return s.apply(this,arguments)}return h}function t(s){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var o=commonjsGlobal.localStorage[s];return o==null?!1:String(o).toLowerCase()==="true"}return browser$1}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1,_stream_writable=k;function n(X){var re=this;this.next=null,this.entry=null,this.finish=function(){de(re,X)}}var t;k.WritableState=Z;var s={deprecate:requireBrowser$1()},o=requireStreamBrowser(),u=require$$2.Buffer,h=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function f(X){return u.from(X)}function g(X){return u.isBuffer(X)||X instanceof h}var v=requireDestroy(),O=requireState(),E=O.getHighWaterMark,_=requireErrorsBrowser().codes,p=_.ERR_INVALID_ARG_TYPE,b=_.ERR_METHOD_NOT_IMPLEMENTED,C=_.ERR_MULTIPLE_CALLBACK,P=_.ERR_STREAM_CANNOT_PIPE,A=_.ERR_STREAM_DESTROYED,T=_.ERR_STREAM_NULL_VALUES,I=_.ERR_STREAM_WRITE_AFTER_END,M=_.ERR_UNKNOWN_ENCODING,j=v.errorOrDestroy;requireInherits_browser()(k,o);function W(){}function Z(X,re,ge){t=t||require_stream_duplex(),X=X||{},typeof ge!="boolean"&&(ge=re instanceof t),this.objectMode=!!X.objectMode,ge&&(this.objectMode=this.objectMode||!!X.writableObjectMode),this.highWaterMark=E(this,X,"writableHighWaterMark",ge),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ye=X.decodeStrings===!1;this.decodeStrings=!ye,this.defaultEncoding=X.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Oe){Te(re,Oe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=X.emitClose!==!1,this.autoDestroy=!!X.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}Z.prototype.getBuffer=function(){for(var re=this.bufferedRequest,ge=[];re;)ge.push(re),re=re.next;return ge},function(){try{Object.defineProperty(Z.prototype,"buffer",{get:s.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var oe;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(oe=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(re){return oe.call(this,re)?!0:this!==k?!1:re&&re._writableState instanceof Z}})):oe=function(re){return re instanceof this};function k(X){t=t||require_stream_duplex();var re=this instanceof t;if(!re&&!oe.call(k,this))return new k(X);this._writableState=new Z(X,this,re),this.writable=!0,X&&(typeof X.write=="function"&&(this._write=X.write),typeof X.writev=="function"&&(this._writev=X.writev),typeof X.destroy=="function"&&(this._destroy=X.destroy),typeof X.final=="function"&&(this._final=X.final)),o.call(this)}k.prototype.pipe=function(){j(this,new P)};function K(X,re){var ge=new I;j(X,ge),process$1.nextTick(re,ge)}function J(X,re,ge,ye){var Oe;return ge===null?Oe=new T:typeof ge!="string"&&!re.objectMode&&(Oe=new p("chunk",["string","Buffer"],ge)),Oe?(j(X,Oe),process$1.nextTick(ye,Oe),!1):!0}k.prototype.write=function(X,re,ge){var ye=this._writableState,Oe=!1,F=!ye.objectMode&&g(X);return F&&!u.isBuffer(X)&&(X=f(X)),typeof re=="function"&&(ge=re,re=null),F?re="buffer":re||(re=ye.defaultEncoding),typeof ge!="function"&&(ge=W),ye.ending?K(this,ge):(F||J(this,ye,X,ge))&&(ye.pendingcb++,Oe=ie(this,ye,F,X,re,ge)),Oe},k.prototype.cork=function(){this._writableState.corked++},k.prototype.uncork=function(){var X=this._writableState;X.corked&&(X.corked--,!X.writing&&!X.corked&&!X.bufferProcessing&&X.bufferedRequest&&Ce(this,X))},k.prototype.setDefaultEncoding=function(re){if(typeof re=="string"&&(re=re.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((re+"").toLowerCase())>-1))throw new M(re);return this._writableState.defaultEncoding=re,this},Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Q(X,re,ge){return!X.objectMode&&X.decodeStrings!==!1&&typeof re=="string"&&(re=u.from(re,ge)),re}Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ie(X,re,ge,ye,Oe,F){if(!ge){var H=Q(re,ye,Oe);ye!==H&&(ge=!0,Oe="buffer",ye=H)}var Se=re.objectMode?1:ye.length;re.length+=Se;var Me=re.length<re.highWaterMark;if(Me||(re.needDrain=!0),re.writing||re.corked){var be=re.lastBufferedRequest;re.lastBufferedRequest={chunk:ye,encoding:Oe,isBuf:ge,callback:F,next:null},be?be.next=re.lastBufferedRequest:re.bufferedRequest=re.lastBufferedRequest,re.bufferedRequestCount+=1}else ue(X,re,!1,Se,ye,Oe,F);return Me}function ue(X,re,ge,ye,Oe,F,H){re.writelen=ye,re.writecb=H,re.writing=!0,re.sync=!0,re.destroyed?re.onwrite(new A("write")):ge?X._writev(Oe,re.onwrite):X._write(Oe,F,re.onwrite),re.sync=!1}function fe(X,re,ge,ye,Oe){--re.pendingcb,ge?(process$1.nextTick(Oe,ye),process$1.nextTick(ee,X,re),X._writableState.errorEmitted=!0,j(X,ye)):(Oe(ye),X._writableState.errorEmitted=!0,j(X,ye),ee(X,re))}function we(X){X.writing=!1,X.writecb=null,X.length-=X.writelen,X.writelen=0}function Te(X,re){var ge=X._writableState,ye=ge.sync,Oe=ge.writecb;if(typeof Oe!="function")throw new C;if(we(ge),re)fe(X,ge,ye,re,Oe);else{var F=pe(ge)||X.destroyed;!F&&!ge.corked&&!ge.bufferProcessing&&ge.bufferedRequest&&Ce(X,ge),ye?process$1.nextTick(he,X,ge,F,Oe):he(X,ge,F,Oe)}}function he(X,re,ge,ye){ge||ce(X,re),re.pendingcb--,ye(),ee(X,re)}function ce(X,re){re.length===0&&re.needDrain&&(re.needDrain=!1,X.emit("drain"))}function Ce(X,re){re.bufferProcessing=!0;var ge=re.bufferedRequest;if(X._writev&&ge&&ge.next){var ye=re.bufferedRequestCount,Oe=new Array(ye),F=re.corkedRequestsFree;F.entry=ge;for(var H=0,Se=!0;ge;)Oe[H]=ge,ge.isBuf||(Se=!1),ge=ge.next,H+=1;Oe.allBuffers=Se,ue(X,re,!0,re.length,Oe,"",F.finish),re.pendingcb++,re.lastBufferedRequest=null,F.next?(re.corkedRequestsFree=F.next,F.next=null):re.corkedRequestsFree=new n(re),re.bufferedRequestCount=0}else{for(;ge;){var Me=ge.chunk,be=ge.encoding,Ne=ge.callback,ze=re.objectMode?1:Me.length;if(ue(X,re,!1,ze,Me,be,Ne),ge=ge.next,re.bufferedRequestCount--,re.writing)break}ge===null&&(re.lastBufferedRequest=null)}re.bufferedRequest=ge,re.bufferProcessing=!1}k.prototype._write=function(X,re,ge){ge(new b("_write()"))},k.prototype._writev=null,k.prototype.end=function(X,re,ge){var ye=this._writableState;return typeof X=="function"?(ge=X,X=null,re=null):typeof re=="function"&&(ge=re,re=null),X!=null&&this.write(X,re),ye.corked&&(ye.corked=1,this.uncork()),ye.ending||ae(this,ye,ge),this},Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function pe(X){return X.ending&&X.length===0&&X.bufferedRequest===null&&!X.finished&&!X.writing}function Ie(X,re){X._final(function(ge){re.pendingcb--,ge&&j(X,ge),re.prefinished=!0,X.emit("prefinish"),ee(X,re)})}function Le(X,re){!re.prefinished&&!re.finalCalled&&(typeof X._final=="function"&&!re.destroyed?(re.pendingcb++,re.finalCalled=!0,process$1.nextTick(Ie,X,re)):(re.prefinished=!0,X.emit("prefinish")))}function ee(X,re){var ge=pe(re);if(ge&&(Le(X,re),re.pendingcb===0&&(re.finished=!0,X.emit("finish"),re.autoDestroy))){var ye=X._readableState;(!ye||ye.autoDestroy&&ye.endEmitted)&&X.destroy()}return ge}function ae(X,re,ge){re.ending=!0,ee(X,re),ge&&(re.finished?process$1.nextTick(ge):X.once("finish",ge)),re.ended=!0,X.writable=!1}function de(X,re,ge){var ye=X.entry;for(X.entry=null;ye;){var Oe=ye.callback;re.pendingcb--,Oe(ge),ye=ye.next}re.corkedRequestsFree.next=X}return Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(re){this._writableState&&(this._writableState.destroyed=re)}}),k.prototype.destroy=v.destroy,k.prototype._undestroy=v.undestroy,k.prototype._destroy=function(X,re){re(X)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var n=Object.keys||function(O){var E=[];for(var _ in O)E.push(_);return E};_stream_duplex=f;var t=require_stream_readable(),s=require_stream_writable();requireInherits_browser()(f,t);for(var o=n(s.prototype),u=0;u<o.length;u++){var h=o[u];f.prototype[h]||(f.prototype[h]=s.prototype[h])}function f(O){if(!(this instanceof f))return new f(O);t.call(this,O),s.call(this,O),this.allowHalfOpen=!0,O&&(O.readable===!1&&(this.readable=!1),O.writable===!1&&(this.writable=!1),O.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",g)))}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function g(){this._writableState.ended||process$1.nextTick(v,this)}function v(O){O.end()}return Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(E){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=E,this._writableState.destroyed=E)}}),_stream_duplex}var string_decoder={},safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(n,t){var s=require$$2,o=s.Buffer;function u(f,g){for(var v in f)g[v]=f[v]}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?n.exports=s:(u(s,t),t.Buffer=h);function h(f,g,v){return o(f,g,v)}h.prototype=Object.create(o.prototype),u(o,h),h.from=function(f,g,v){if(typeof f=="number")throw new TypeError("Argument must not be a number");return o(f,g,v)},h.alloc=function(f,g,v){if(typeof f!="number")throw new TypeError("Argument must be a number");var O=o(f);return g!==void 0?typeof v=="string"?O.fill(g,v):O.fill(g):O.fill(0),O},h.allocUnsafe=function(f){if(typeof f!="number")throw new TypeError("Argument must be a number");return o(f)},h.allocUnsafeSlow=function(f){if(typeof f!="number")throw new TypeError("Argument must be a number");return s.SlowBuffer(f)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var n=requireSafeBuffer().Buffer,t=n.isEncoding||function(T){switch(T=""+T,T&&T.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(T){if(!T)return"utf8";for(var I;;)switch(T){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return T;default:if(I)return;T=(""+T).toLowerCase(),I=!0}}function o(T){var I=s(T);if(typeof I!="string"&&(n.isEncoding===t||!t(T)))throw new Error("Unknown encoding: "+T);return I||T}string_decoder.StringDecoder=u;function u(T){this.encoding=o(T);var I;switch(this.encoding){case"utf16le":this.text=_,this.end=p,I=4;break;case"utf8":this.fillLast=v,I=4;break;case"base64":this.text=b,this.end=C,I=3;break;default:this.write=P,this.end=A;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(I)}u.prototype.write=function(T){if(T.length===0)return"";var I,M;if(this.lastNeed){if(I=this.fillLast(T),I===void 0)return"";M=this.lastNeed,this.lastNeed=0}else M=0;return M<T.length?I?I+this.text(T,M):this.text(T,M):I||""},u.prototype.end=E,u.prototype.text=O,u.prototype.fillLast=function(T){if(this.lastNeed<=T.length)return T.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);T.copy(this.lastChar,this.lastTotal-this.lastNeed,0,T.length),this.lastNeed-=T.length};function h(T){return T<=127?0:T>>5===6?2:T>>4===14?3:T>>3===30?4:T>>6===2?-1:-2}function f(T,I,M){var j=I.length-1;if(j<M)return 0;var W=h(I[j]);return W>=0?(W>0&&(T.lastNeed=W-1),W):--j<M||W===-2?0:(W=h(I[j]),W>=0?(W>0&&(T.lastNeed=W-2),W):--j<M||W===-2?0:(W=h(I[j]),W>=0?(W>0&&(W===2?W=0:T.lastNeed=W-3),W):0))}function g(T,I,M){if((I[0]&192)!==128)return T.lastNeed=0,"�";if(T.lastNeed>1&&I.length>1){if((I[1]&192)!==128)return T.lastNeed=1,"�";if(T.lastNeed>2&&I.length>2&&(I[2]&192)!==128)return T.lastNeed=2,"�"}}function v(T){var I=this.lastTotal-this.lastNeed,M=g(this,T);if(M!==void 0)return M;if(this.lastNeed<=T.length)return T.copy(this.lastChar,I,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);T.copy(this.lastChar,I,0,T.length),this.lastNeed-=T.length}function O(T,I){var M=f(this,T,I);if(!this.lastNeed)return T.toString("utf8",I);this.lastTotal=M;var j=T.length-(M-this.lastNeed);return T.copy(this.lastChar,0,j),T.toString("utf8",I,j)}function E(T){var I=T&&T.length?this.write(T):"";return this.lastNeed?I+"�":I}function _(T,I){if((T.length-I)%2===0){var M=T.toString("utf16le",I);if(M){var j=M.charCodeAt(M.length-1);if(j>=55296&&j<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=T[T.length-2],this.lastChar[1]=T[T.length-1],M.slice(0,-1)}return M}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=T[T.length-1],T.toString("utf16le",I,T.length-1)}function p(T){var I=T&&T.length?this.write(T):"";if(this.lastNeed){var M=this.lastTotal-this.lastNeed;return I+this.lastChar.toString("utf16le",0,M)}return I}function b(T,I){var M=(T.length-I)%3;return M===0?T.toString("base64",I):(this.lastNeed=3-M,this.lastTotal=3,M===1?this.lastChar[0]=T[T.length-1]:(this.lastChar[0]=T[T.length-2],this.lastChar[1]=T[T.length-1]),T.toString("base64",I,T.length-M))}function C(T){var I=T&&T.length?this.write(T):"";return this.lastNeed?I+this.lastChar.toString("base64",0,3-this.lastNeed):I}function P(T){return T.toString(this.encoding)}function A(T){return T&&T.length?this.write(T):""}return string_decoder}var endOfStream,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var n=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function t(h){var f=!1;return function(){if(!f){f=!0;for(var g=arguments.length,v=new Array(g),O=0;O<g;O++)v[O]=arguments[O];h.apply(this,v)}}}function s(){}function o(h){return h.setHeader&&typeof h.abort=="function"}function u(h,f,g){if(typeof f=="function")return u(h,null,f);f||(f={}),g=t(g||s);var v=f.readable||f.readable!==!1&&h.readable,O=f.writable||f.writable!==!1&&h.writable,E=function(){h.writable||p()},_=h._writableState&&h._writableState.finished,p=function(){O=!1,_=!0,v||g.call(h)},b=h._readableState&&h._readableState.endEmitted,C=function(){v=!1,b=!0,O||g.call(h)},P=function(M){g.call(h,M)},A=function(){var M;if(v&&!b)return(!h._readableState||!h._readableState.ended)&&(M=new n),g.call(h,M);if(O&&!_)return(!h._writableState||!h._writableState.ended)&&(M=new n),g.call(h,M)},T=function(){h.req.on("finish",p)};return o(h)?(h.on("complete",p),h.on("abort",A),h.req?T():h.on("request",T)):O&&!h._writableState&&(h.on("end",E),h.on("close",E)),h.on("end",C),h.on("finish",p),f.error!==!1&&h.on("error",P),h.on("close",A),function(){h.removeListener("complete",p),h.removeListener("abort",A),h.removeListener("request",T),h.req&&h.req.removeListener("finish",p),h.removeListener("end",E),h.removeListener("close",E),h.removeListener("finish",p),h.removeListener("end",C),h.removeListener("error",P),h.removeListener("close",A)}}return endOfStream=u,endOfStream}var async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var n;function t(M,j,W){return j=s(j),j in M?Object.defineProperty(M,j,{value:W,enumerable:!0,configurable:!0,writable:!0}):M[j]=W,M}function s(M){var j=o(M,"string");return typeof j=="symbol"?j:String(j)}function o(M,j){if(typeof M!="object"||M===null)return M;var W=M[Symbol.toPrimitive];if(W!==void 0){var Z=W.call(M,j||"default");if(typeof Z!="object")return Z;throw new TypeError("@@toPrimitive must return a primitive value.")}return(j==="string"?String:Number)(M)}var u=requireEndOfStream(),h=Symbol("lastResolve"),f=Symbol("lastReject"),g=Symbol("error"),v=Symbol("ended"),O=Symbol("lastPromise"),E=Symbol("handlePromise"),_=Symbol("stream");function p(M,j){return{value:M,done:j}}function b(M){var j=M[h];if(j!==null){var W=M[_].read();W!==null&&(M[O]=null,M[h]=null,M[f]=null,j(p(W,!1)))}}function C(M){process$1.nextTick(b,M)}function P(M,j){return function(W,Z){M.then(function(){if(j[v]){W(p(void 0,!0));return}j[E](W,Z)},Z)}}var A=Object.getPrototypeOf(function(){}),T=Object.setPrototypeOf((n={get stream(){return this[_]},next:function(){var j=this,W=this[g];if(W!==null)return Promise.reject(W);if(this[v])return Promise.resolve(p(void 0,!0));if(this[_].destroyed)return new Promise(function(K,J){process$1.nextTick(function(){j[g]?J(j[g]):K(p(void 0,!0))})});var Z=this[O],oe;if(Z)oe=new Promise(P(Z,this));else{var k=this[_].read();if(k!==null)return Promise.resolve(p(k,!1));oe=new Promise(this[E])}return this[O]=oe,oe}},t(n,Symbol.asyncIterator,function(){return this}),t(n,"return",function(){var j=this;return new Promise(function(W,Z){j[_].destroy(null,function(oe){if(oe){Z(oe);return}W(p(void 0,!0))})})}),n),A),I=function(j){var W,Z=Object.create(T,(W={},t(W,_,{value:j,writable:!0}),t(W,h,{value:null,writable:!0}),t(W,f,{value:null,writable:!0}),t(W,g,{value:null,writable:!0}),t(W,v,{value:j._readableState.endEmitted,writable:!0}),t(W,E,{value:function(k,K){var J=Z[_].read();J?(Z[O]=null,Z[h]=null,Z[f]=null,k(p(J,!1))):(Z[h]=k,Z[f]=K)},writable:!0}),W));return Z[O]=null,u(j,function(oe){if(oe&&oe.code!=="ERR_STREAM_PREMATURE_CLOSE"){var k=Z[f];k!==null&&(Z[O]=null,Z[h]=null,Z[f]=null,k(oe)),Z[g]=oe;return}var K=Z[h];K!==null&&(Z[O]=null,Z[h]=null,Z[f]=null,K(p(void 0,!0))),Z[v]=!0}),j.on("readable",C.bind(null,Z)),Z};return async_iterator=I,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1,_stream_readable=K;var n;K.ReadableState=k,eventsExports.EventEmitter;var t=function(H,Se){return H.listeners(Se).length},s=requireStreamBrowser(),o=require$$2.Buffer,u=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function h(F){return o.from(F)}function f(F){return o.isBuffer(F)||F instanceof u}var g=requireUtil(),v;g&&g.debuglog?v=g.debuglog("stream"):v=function(){};var O=requireBuffer_list(),E=requireDestroy(),_=requireState(),p=_.getHighWaterMark,b=requireErrorsBrowser().codes,C=b.ERR_INVALID_ARG_TYPE,P=b.ERR_STREAM_PUSH_AFTER_EOF,A=b.ERR_METHOD_NOT_IMPLEMENTED,T=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,I,M,j;requireInherits_browser()(K,s);var W=E.errorOrDestroy,Z=["error","close","destroy","pause","resume"];function oe(F,H,Se){if(typeof F.prependListener=="function")return F.prependListener(H,Se);!F._events||!F._events[H]?F.on(H,Se):Array.isArray(F._events[H])?F._events[H].unshift(Se):F._events[H]=[Se,F._events[H]]}function k(F,H,Se){n=n||require_stream_duplex(),F=F||{},typeof Se!="boolean"&&(Se=H instanceof n),this.objectMode=!!F.objectMode,Se&&(this.objectMode=this.objectMode||!!F.readableObjectMode),this.highWaterMark=p(this,F,"readableHighWaterMark",Se),this.buffer=new O,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=F.emitClose!==!1,this.autoDestroy=!!F.autoDestroy,this.destroyed=!1,this.defaultEncoding=F.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,F.encoding&&(I||(I=requireString_decoder().StringDecoder),this.decoder=new I(F.encoding),this.encoding=F.encoding)}function K(F){if(n=n||require_stream_duplex(),!(this instanceof K))return new K(F);var H=this instanceof n;this._readableState=new k(F,this,H),this.readable=!0,F&&(typeof F.read=="function"&&(this._read=F.read),typeof F.destroy=="function"&&(this._destroy=F.destroy)),s.call(this)}Object.defineProperty(K.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(H){this._readableState&&(this._readableState.destroyed=H)}}),K.prototype.destroy=E.destroy,K.prototype._undestroy=E.undestroy,K.prototype._destroy=function(F,H){H(F)},K.prototype.push=function(F,H){var Se=this._readableState,Me;return Se.objectMode?Me=!0:typeof F=="string"&&(H=H||Se.defaultEncoding,H!==Se.encoding&&(F=o.from(F,H),H=""),Me=!0),J(this,F,H,!1,Me)},K.prototype.unshift=function(F){return J(this,F,null,!0,!1)};function J(F,H,Se,Me,be){v("readableAddChunk",H);var Ne=F._readableState;if(H===null)Ne.reading=!1,Te(F,Ne);else{var ze;if(be||(ze=ie(Ne,H)),ze)W(F,ze);else if(Ne.objectMode||H&&H.length>0)if(typeof H!="string"&&!Ne.objectMode&&Object.getPrototypeOf(H)!==o.prototype&&(H=h(H)),Me)Ne.endEmitted?W(F,new T):Q(F,Ne,H,!0);else if(Ne.ended)W(F,new P);else{if(Ne.destroyed)return!1;Ne.reading=!1,Ne.decoder&&!Se?(H=Ne.decoder.write(H),Ne.objectMode||H.length!==0?Q(F,Ne,H,!1):Ce(F,Ne)):Q(F,Ne,H,!1)}else Me||(Ne.reading=!1,Ce(F,Ne))}return!Ne.ended&&(Ne.length<Ne.highWaterMark||Ne.length===0)}function Q(F,H,Se,Me){H.flowing&&H.length===0&&!H.sync?(H.awaitDrain=0,F.emit("data",Se)):(H.length+=H.objectMode?1:Se.length,Me?H.buffer.unshift(Se):H.buffer.push(Se),H.needReadable&&he(F)),Ce(F,H)}function ie(F,H){var Se;return!f(H)&&typeof H!="string"&&H!==void 0&&!F.objectMode&&(Se=new C("chunk",["string","Buffer","Uint8Array"],H)),Se}K.prototype.isPaused=function(){return this._readableState.flowing===!1},K.prototype.setEncoding=function(F){I||(I=requireString_decoder().StringDecoder);var H=new I(F);this._readableState.decoder=H,this._readableState.encoding=this._readableState.decoder.encoding;for(var Se=this._readableState.buffer.head,Me="";Se!==null;)Me+=H.write(Se.data),Se=Se.next;return this._readableState.buffer.clear(),Me!==""&&this._readableState.buffer.push(Me),this._readableState.length=Me.length,this};var ue=1073741824;function fe(F){return F>=ue?F=ue:(F--,F|=F>>>1,F|=F>>>2,F|=F>>>4,F|=F>>>8,F|=F>>>16,F++),F}function we(F,H){return F<=0||H.length===0&&H.ended?0:H.objectMode?1:F!==F?H.flowing&&H.length?H.buffer.head.data.length:H.length:(F>H.highWaterMark&&(H.highWaterMark=fe(F)),F<=H.length?F:H.ended?H.length:(H.needReadable=!0,0))}K.prototype.read=function(F){v("read",F),F=parseInt(F,10);var H=this._readableState,Se=F;if(F!==0&&(H.emittedReadable=!1),F===0&&H.needReadable&&((H.highWaterMark!==0?H.length>=H.highWaterMark:H.length>0)||H.ended))return v("read: emitReadable",H.length,H.ended),H.length===0&&H.ended?ge(this):he(this),null;if(F=we(F,H),F===0&&H.ended)return H.length===0&&ge(this),null;var Me=H.needReadable;v("need readable",Me),(H.length===0||H.length-F<H.highWaterMark)&&(Me=!0,v("length less than watermark",Me)),H.ended||H.reading?(Me=!1,v("reading or ended",Me)):Me&&(v("do read"),H.reading=!0,H.sync=!0,H.length===0&&(H.needReadable=!0),this._read(H.highWaterMark),H.sync=!1,H.reading||(F=we(Se,H)));var be;return F>0?be=re(F,H):be=null,be===null?(H.needReadable=H.length<=H.highWaterMark,F=0):(H.length-=F,H.awaitDrain=0),H.length===0&&(H.ended||(H.needReadable=!0),Se!==F&&H.ended&&ge(this)),be!==null&&this.emit("data",be),be};function Te(F,H){if(v("onEofChunk"),!H.ended){if(H.decoder){var Se=H.decoder.end();Se&&Se.length&&(H.buffer.push(Se),H.length+=H.objectMode?1:Se.length)}H.ended=!0,H.sync?he(F):(H.needReadable=!1,H.emittedReadable||(H.emittedReadable=!0,ce(F)))}}function he(F){var H=F._readableState;v("emitReadable",H.needReadable,H.emittedReadable),H.needReadable=!1,H.emittedReadable||(v("emitReadable",H.flowing),H.emittedReadable=!0,process$1.nextTick(ce,F))}function ce(F){var H=F._readableState;v("emitReadable_",H.destroyed,H.length,H.ended),!H.destroyed&&(H.length||H.ended)&&(F.emit("readable"),H.emittedReadable=!1),H.needReadable=!H.flowing&&!H.ended&&H.length<=H.highWaterMark,X(F)}function Ce(F,H){H.readingMore||(H.readingMore=!0,process$1.nextTick(pe,F,H))}function pe(F,H){for(;!H.reading&&!H.ended&&(H.length<H.highWaterMark||H.flowing&&H.length===0);){var Se=H.length;if(v("maybeReadMore read 0"),F.read(0),Se===H.length)break}H.readingMore=!1}K.prototype._read=function(F){W(this,new A("_read()"))},K.prototype.pipe=function(F,H){var Se=this,Me=this._readableState;switch(Me.pipesCount){case 0:Me.pipes=F;break;case 1:Me.pipes=[Me.pipes,F];break;default:Me.pipes.push(F);break}Me.pipesCount+=1,v("pipe count=%d opts=%j",Me.pipesCount,H);var be=(!H||H.end!==!1)&&F!==process$1.stdout&&F!==process$1.stderr,Ne=be?Xe:Et;Me.endEmitted?process$1.nextTick(Ne):Se.once("end",Ne),F.on("unpipe",ze);function ze(Tt,st){v("onunpipe"),Tt===Se&&st&&st.hasUnpiped===!1&&(st.hasUnpiped=!0,dt())}function Xe(){v("onend"),F.end()}var xe=Ie(Se);F.on("drain",xe);var ut=!1;function dt(){v("cleanup"),F.removeListener("close",De),F.removeListener("finish",Qe),F.removeListener("drain",xe),F.removeListener("error",me),F.removeListener("unpipe",ze),Se.removeListener("end",Xe),Se.removeListener("end",Et),Se.removeListener("data",Ue),ut=!0,Me.awaitDrain&&(!F._writableState||F._writableState.needDrain)&&xe()}Se.on("data",Ue);function Ue(Tt){v("ondata");var st=F.write(Tt);v("dest.write",st),st===!1&&((Me.pipesCount===1&&Me.pipes===F||Me.pipesCount>1&&Oe(Me.pipes,F)!==-1)&&!ut&&(v("false write response, pause",Me.awaitDrain),Me.awaitDrain++),Se.pause())}function me(Tt){v("onerror",Tt),Et(),F.removeListener("error",me),t(F,"error")===0&&W(F,Tt)}oe(F,"error",me);function De(){F.removeListener("finish",Qe),Et()}F.once("close",De);function Qe(){v("onfinish"),F.removeListener("close",De),Et()}F.once("finish",Qe);function Et(){v("unpipe"),Se.unpipe(F)}return F.emit("pipe",Se),Me.flowing||(v("pipe resume"),Se.resume()),F};function Ie(F){return function(){var Se=F._readableState;v("pipeOnDrain",Se.awaitDrain),Se.awaitDrain&&Se.awaitDrain--,Se.awaitDrain===0&&t(F,"data")&&(Se.flowing=!0,X(F))}}K.prototype.unpipe=function(F){var H=this._readableState,Se={hasUnpiped:!1};if(H.pipesCount===0)return this;if(H.pipesCount===1)return F&&F!==H.pipes?this:(F||(F=H.pipes),H.pipes=null,H.pipesCount=0,H.flowing=!1,F&&F.emit("unpipe",this,Se),this);if(!F){var Me=H.pipes,be=H.pipesCount;H.pipes=null,H.pipesCount=0,H.flowing=!1;for(var Ne=0;Ne<be;Ne++)Me[Ne].emit("unpipe",this,{hasUnpiped:!1});return this}var ze=Oe(H.pipes,F);return ze===-1?this:(H.pipes.splice(ze,1),H.pipesCount-=1,H.pipesCount===1&&(H.pipes=H.pipes[0]),F.emit("unpipe",this,Se),this)},K.prototype.on=function(F,H){var Se=s.prototype.on.call(this,F,H),Me=this._readableState;return F==="data"?(Me.readableListening=this.listenerCount("readable")>0,Me.flowing!==!1&&this.resume()):F==="readable"&&!Me.endEmitted&&!Me.readableListening&&(Me.readableListening=Me.needReadable=!0,Me.flowing=!1,Me.emittedReadable=!1,v("on readable",Me.length,Me.reading),Me.length?he(this):Me.reading||process$1.nextTick(ee,this)),Se},K.prototype.addListener=K.prototype.on,K.prototype.removeListener=function(F,H){var Se=s.prototype.removeListener.call(this,F,H);return F==="readable"&&process$1.nextTick(Le,this),Se},K.prototype.removeAllListeners=function(F){var H=s.prototype.removeAllListeners.apply(this,arguments);return(F==="readable"||F===void 0)&&process$1.nextTick(Le,this),H};function Le(F){var H=F._readableState;H.readableListening=F.listenerCount("readable")>0,H.resumeScheduled&&!H.paused?H.flowing=!0:F.listenerCount("data")>0&&F.resume()}function ee(F){v("readable nexttick read 0"),F.read(0)}K.prototype.resume=function(){var F=this._readableState;return F.flowing||(v("resume"),F.flowing=!F.readableListening,ae(this,F)),F.paused=!1,this};function ae(F,H){H.resumeScheduled||(H.resumeScheduled=!0,process$1.nextTick(de,F,H))}function de(F,H){v("resume",H.reading),H.reading||F.read(0),H.resumeScheduled=!1,F.emit("resume"),X(F),H.flowing&&!H.reading&&F.read(0)}K.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function X(F){var H=F._readableState;for(v("flow",H.flowing);H.flowing&&F.read()!==null;);}K.prototype.wrap=function(F){var H=this,Se=this._readableState,Me=!1;F.on("end",function(){if(v("wrapped end"),Se.decoder&&!Se.ended){var ze=Se.decoder.end();ze&&ze.length&&H.push(ze)}H.push(null)}),F.on("data",function(ze){if(v("wrapped data"),Se.decoder&&(ze=Se.decoder.write(ze)),!(Se.objectMode&&ze==null)&&!(!Se.objectMode&&(!ze||!ze.length))){var Xe=H.push(ze);Xe||(Me=!0,F.pause())}});for(var be in F)this[be]===void 0&&typeof F[be]=="function"&&(this[be]=function(Xe){return function(){return F[Xe].apply(F,arguments)}}(be));for(var Ne=0;Ne<Z.length;Ne++)F.on(Z[Ne],this.emit.bind(this,Z[Ne]));return this._read=function(ze){v("wrapped _read",ze),Me&&(Me=!1,F.resume())},this},typeof Symbol=="function"&&(K.prototype[Symbol.asyncIterator]=function(){return M===void 0&&(M=requireAsync_iterator()),M(this)}),Object.defineProperty(K.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(K.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(K.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(H){this._readableState&&(this._readableState.flowing=H)}}),K._fromList=re,Object.defineProperty(K.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function re(F,H){if(H.length===0)return null;var Se;return H.objectMode?Se=H.buffer.shift():!F||F>=H.length?(H.decoder?Se=H.buffer.join(""):H.buffer.length===1?Se=H.buffer.first():Se=H.buffer.concat(H.length),H.buffer.clear()):Se=H.buffer.consume(F,H.decoder),Se}function ge(F){var H=F._readableState;v("endReadable",H.endEmitted),H.endEmitted||(H.ended=!0,process$1.nextTick(ye,H,F))}function ye(F,H){if(v("endReadableNT",F.endEmitted,F.length),!F.endEmitted&&F.length===0&&(F.endEmitted=!0,H.readable=!1,H.emit("end"),F.autoDestroy)){var Se=H._writableState;(!Se||Se.autoDestroy&&Se.finished)&&H.destroy()}}typeof Symbol=="function"&&(K.from=function(F,H){return j===void 0&&(j=requireFromBrowser()),j(K,F,H)});function Oe(F,H){for(var Se=0,Me=F.length;Se<Me;Se++)if(F[Se]===H)return Se;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=g;var n=requireErrorsBrowser().codes,t=n.ERR_METHOD_NOT_IMPLEMENTED,s=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,u=n.ERR_TRANSFORM_WITH_LENGTH_0,h=require_stream_duplex();requireInherits_browser()(g,h);function f(E,_){var p=this._transformState;p.transforming=!1;var b=p.writecb;if(b===null)return this.emit("error",new s);p.writechunk=null,p.writecb=null,_!=null&&this.push(_),b(E);var C=this._readableState;C.reading=!1,(C.needReadable||C.length<C.highWaterMark)&&this._read(C.highWaterMark)}function g(E){if(!(this instanceof g))return new g(E);h.call(this,E),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,E&&(typeof E.transform=="function"&&(this._transform=E.transform),typeof E.flush=="function"&&(this._flush=E.flush)),this.on("prefinish",v)}function v(){var E=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(_,p){O(E,_,p)}):O(this,null,null)}g.prototype.push=function(E,_){return this._transformState.needTransform=!1,h.prototype.push.call(this,E,_)},g.prototype._transform=function(E,_,p){p(new t("_transform()"))},g.prototype._write=function(E,_,p){var b=this._transformState;if(b.writecb=p,b.writechunk=E,b.writeencoding=_,!b.transforming){var C=this._readableState;(b.needTransform||C.needReadable||C.length<C.highWaterMark)&&this._read(C.highWaterMark)}},g.prototype._read=function(E){var _=this._transformState;_.writechunk!==null&&!_.transforming?(_.transforming=!0,this._transform(_.writechunk,_.writeencoding,_.afterTransform)):_.needTransform=!0},g.prototype._destroy=function(E,_){h.prototype._destroy.call(this,E,function(p){_(p)})};function O(E,_,p){if(_)return E.emit("error",_);if(p!=null&&E.push(p),E._writableState.length)throw new u;if(E._transformState.transforming)throw new o;return E.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=t;var n=require_stream_transform();requireInherits_browser()(t,n);function t(s){if(!(this instanceof t))return new t(s);n.call(this,s)}return t.prototype._transform=function(s,o,u){u(null,s)},_stream_passthrough}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;var n;function t(p){var b=!1;return function(){b||(b=!0,p.apply(void 0,arguments))}}var s=requireErrorsBrowser().codes,o=s.ERR_MISSING_ARGS,u=s.ERR_STREAM_DESTROYED;function h(p){if(p)throw p}function f(p){return p.setHeader&&typeof p.abort=="function"}function g(p,b,C,P){P=t(P);var A=!1;p.on("close",function(){A=!0}),n===void 0&&(n=requireEndOfStream()),n(p,{readable:b,writable:C},function(I){if(I)return P(I);A=!0,P()});var T=!1;return function(I){if(!A&&!T){if(T=!0,f(p))return p.abort();if(typeof p.destroy=="function")return p.destroy();P(I||new u("pipe"))}}}function v(p){p()}function O(p,b){return p.pipe(b)}function E(p){return!p.length||typeof p[p.length-1]!="function"?h:p.pop()}function _(){for(var p=arguments.length,b=new Array(p),C=0;C<p;C++)b[C]=arguments[C];var P=E(b);if(Array.isArray(b[0])&&(b=b[0]),b.length<2)throw new o("streams");var A,T=b.map(function(I,M){var j=M<b.length-1,W=M>0;return g(I,j,W,function(Z){A||(A=Z),Z&&T.forEach(v),!j&&(T.forEach(v),P(A))})});return b.reduce(O)}return pipeline_1=_,pipeline_1}var streamBrowserify,hasRequiredStreamBrowserify;function requireStreamBrowserify(){if(hasRequiredStreamBrowserify)return streamBrowserify;hasRequiredStreamBrowserify=1,streamBrowserify=s;var n=eventsExports.EventEmitter,t=requireInherits_browser();t(s,n),s.Readable=require_stream_readable(),s.Writable=require_stream_writable(),s.Duplex=require_stream_duplex(),s.Transform=require_stream_transform(),s.PassThrough=require_stream_passthrough(),s.finished=requireEndOfStream(),s.pipeline=requirePipeline(),s.Stream=s;function s(){n.call(this)}return s.prototype.pipe=function(o,u){var h=this;function f(b){o.writable&&o.write(b)===!1&&h.pause&&h.pause()}h.on("data",f);function g(){h.readable&&h.resume&&h.resume()}o.on("drain",g),!o._isStdio&&(!u||u.end!==!1)&&(h.on("end",O),h.on("close",E));var v=!1;function O(){v||(v=!0,o.end())}function E(){v||(v=!0,typeof o.destroy=="function"&&o.destroy())}function _(b){if(p(),n.listenerCount(this,"error")===0)throw b}h.on("error",_),o.on("error",_);function p(){h.removeListener("data",f),o.removeListener("drain",g),h.removeListener("end",O),h.removeListener("close",E),h.removeListener("error",_),o.removeListener("error",_),h.removeListener("end",p),h.removeListener("close",p),o.removeListener("close",p)}return h.on("end",p),h.on("close",p),o.on("close",p),o.emit("pipe",h),o},streamBrowserify}var browser={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var n=1e3,t=n*60,s=t*60,o=s*24,u=o*7,h=o*365.25;ms=function(E,_){_=_||{};var p=typeof E;if(p==="string"&&E.length>0)return f(E);if(p==="number"&&isFinite(E))return _.long?v(E):g(E);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(E))};function f(E){if(E=String(E),!(E.length>100)){var _=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(E);if(_){var p=parseFloat(_[1]),b=(_[2]||"ms").toLowerCase();switch(b){case"years":case"year":case"yrs":case"yr":case"y":return p*h;case"weeks":case"week":case"w":return p*u;case"days":case"day":case"d":return p*o;case"hours":case"hour":case"hrs":case"hr":case"h":return p*s;case"minutes":case"minute":case"mins":case"min":case"m":return p*t;case"seconds":case"second":case"secs":case"sec":case"s":return p*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function g(E){var _=Math.abs(E);return _>=o?Math.round(E/o)+"d":_>=s?Math.round(E/s)+"h":_>=t?Math.round(E/t)+"m":_>=n?Math.round(E/n)+"s":E+"ms"}function v(E){var _=Math.abs(E);return _>=o?O(E,_,o,"day"):_>=s?O(E,_,s,"hour"):_>=t?O(E,_,t,"minute"):_>=n?O(E,_,n,"second"):E+" ms"}function O(E,_,p,b){var C=_>=p*1.5;return Math.round(E/p)+" "+b+(C?"s":"")}return ms}var common,hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;function n(t){o.debug=o,o.default=o,o.coerce=O,o.disable=f,o.enable=h,o.enabled=g,o.humanize=requireMs(),o.destroy=E,Object.keys(t).forEach(_=>{o[_]=t[_]}),o.names=[],o.skips=[],o.formatters={};function s(_){let p=0;for(let b=0;b<_.length;b++)p=(p<<5)-p+_.charCodeAt(b),p|=0;return o.colors[Math.abs(p)%o.colors.length]}o.selectColor=s;function o(_){let p,b=null,C,P;function A(...T){if(!A.enabled)return;const I=A,M=Number(new Date),j=M-(p||M);I.diff=j,I.prev=p,I.curr=M,p=M,T[0]=o.coerce(T[0]),typeof T[0]!="string"&&T.unshift("%O");let W=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(oe,k)=>{if(oe==="%%")return"%";W++;const K=o.formatters[k];if(typeof K=="function"){const J=T[W];oe=K.call(I,J),T.splice(W,1),W--}return oe}),o.formatArgs.call(I,T),(I.log||o.log).apply(I,T)}return A.namespace=_,A.useColors=o.useColors(),A.color=o.selectColor(_),A.extend=u,A.destroy=o.destroy,Object.defineProperty(A,"enabled",{enumerable:!0,configurable:!1,get:()=>b!==null?b:(C!==o.namespaces&&(C=o.namespaces,P=o.enabled(_)),P),set:T=>{b=T}}),typeof o.init=="function"&&o.init(A),A}function u(_,p){const b=o(this.namespace+(typeof p>"u"?":":p)+_);return b.log=this.log,b}function h(_){o.save(_),o.namespaces=_,o.names=[],o.skips=[];let p;const b=(typeof _=="string"?_:"").split(/[\s,]+/),C=b.length;for(p=0;p<C;p++)b[p]&&(_=b[p].replace(/\*/g,".*?"),_[0]==="-"?o.skips.push(new RegExp("^"+_.slice(1)+"$")):o.names.push(new RegExp("^"+_+"$")))}function f(){const _=[...o.names.map(v),...o.skips.map(v).map(p=>"-"+p)].join(",");return o.enable(""),_}function g(_){if(_[_.length-1]==="*")return!0;let p,b;for(p=0,b=o.skips.length;p<b;p++)if(o.skips[p].test(_))return!1;for(p=0,b=o.names.length;p<b;p++)if(o.names[p].test(_))return!0;return!1}function v(_){return _.toString().substring(2,_.toString().length-2).replace(/\.\*\?$/,"*")}function O(_){return _ instanceof Error?_.stack||_.message:_}function E(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o.enable(o.load()),o}return common=n,common}var hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,function(n,t){var s={};t.formatArgs=u,t.save=h,t.load=f,t.useColors=o,t.storage=g(),t.destroy=(()=>{let O=!1;return()=>{O||(O=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let O;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(O=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(O[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function u(O){if(O[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+O[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const E="color: "+this.color;O.splice(1,0,E,"color: inherit");let _=0,p=0;O[0].replace(/%[a-zA-Z%]/g,b=>{b!=="%%"&&(_++,b==="%c"&&(p=_))}),O.splice(p,0,E)}t.log=console.debug||console.log||(()=>{});function h(O){try{O?t.storage.setItem("debug",O):t.storage.removeItem("debug")}catch{}}function f(){let O;try{O=t.storage.getItem("debug")}catch{}return!O&&typeof process$1<"u"&&"env"in process$1&&(O=s.DEBUG),O}function g(){try{return localStorage}catch{}}n.exports=requireCommon()(t);const{formatters:v}=n.exports;v.j=function(O){try{return JSON.stringify(O)}catch(E){return"[UnexpectedJSONParseError]: "+E.message}}}(browser,browser.exports)),browser.exports}var lib$9,hasRequiredLib$9;function requireLib$9(){if(hasRequiredLib$9)return lib$9;hasRequiredLib$9=1;const n=requireStreamBrowserify(),t=requireUtil(),s=requireBrowser()("serialport/stream"),o=Object.freeze([5,6,7,8]),u=Object.freeze([1,1.5,2]),h=Object.freeze(["none","even","mark","odd","space"]),f=Object.freeze(["xon","xoff","xany","rtscts"]),g=Object.freeze({autoOpen:!0,endOnClose:!1,baudRate:9600,dataBits:8,hupcl:!0,lock:!0,parity:"none",rtscts:!1,stopBits:1,xany:!1,xoff:!1,xon:!1,highWaterMark:64*1024}),v=Object.freeze({brk:!1,cts:!1,dtr:!0,dts:!1,rts:!0});function O(p){const b=Buffer.allocUnsafe(p);return b.used=0,b}function E(p,b,C){if(!(this instanceof E))return new E(p,b,C);b instanceof Function&&(C=b,b={});const P={...g,...b};n.Duplex.call(this,{highWaterMark:P.highWaterMark});const A=P.binding||E.Binding;if(!A)throw new TypeError('"Bindings" is invalid pass it as `options.binding` or set it on `SerialPort.Binding`');if(!p)throw new TypeError(`"path" is not defined: ${p}`);if(P.baudrate)throw new TypeError('"baudrate" is an unknown option, did you mean "baudRate"?');if(typeof P.baudRate!="number")throw new TypeError(`"baudRate" must be a number: ${P.baudRate}`);if(o.indexOf(P.dataBits)===-1)throw new TypeError(`"databits" is invalid: ${P.dataBits}`);if(u.indexOf(P.stopBits)===-1)throw new TypeError(`"stopbits" is invalid: ${P.stopbits}`);if(h.indexOf(P.parity)===-1)throw new TypeError(`"parity" is invalid: ${P.parity}`);f.forEach(I=>{if(typeof P[I]!="boolean")throw new TypeError(`"${I}" is not boolean: ${P[I]}`)});const T=new A({bindingOptions:P.bindingOptions});Object.defineProperties(this,{binding:{enumerable:!0,value:T},path:{enumerable:!0,value:p},settings:{enumerable:!0,value:P}}),this.opening=!1,this.closing=!1,this._pool=O(this.settings.highWaterMark),this._kMinPoolSpace=128,this.settings.autoOpen&&this.open(C)}t.inherits(E,n.Duplex),Object.defineProperties(E.prototype,{isOpen:{enumerable:!0,get(){return this.binding.isOpen&&!this.closing}},baudRate:{enumerable:!0,get(){return this.settings.baudRate}}}),E.prototype._error=function(p,b){b?b.call(this,p):this.emit("error",p)},E.prototype._asyncError=function(p,b){process$1.nextTick(()=>this._error(p,b))},E.prototype.open=function(p){if(this.isOpen)return this._asyncError(new Error("Port is already open"),p);if(this.opening)return this._asyncError(new Error("Port is opening"),p);this.opening=!0,s("opening",`path: ${this.path}`),this.binding.open(this.path,this.settings).then(()=>{s("opened",`path: ${this.path}`),this.opening=!1,this.emit("open"),p&&p.call(this,null)},b=>{this.opening=!1,s("Binding #open had an error",b),this._error(b,p)})},E.prototype.update=function(p,b){if(typeof p!="object")throw TypeError('"options" is not an object');if(!this.isOpen)return s("update attempted, but port is not open"),this._asyncError(new Error("Port is not open"),b);const C={...g,...p};this.settings.baudRate=C.baudRate,s("update",`baudRate: ${C.baudRate}`),this.binding.update(this.settings).then(()=>{s("binding.update","finished"),b&&b.call(this,null)},P=>(s("binding.update","error",P),this._error(P,b)))};const _=E.prototype.write;return E.prototype.write=function(p,b,C){return Array.isArray(p)&&(p=Buffer.from(p)),_.call(this,p,b,C)},E.prototype._write=function(p,b,C){if(!this.isOpen)return this.once("open",function(){this._write(p,b,C)});s("_write",`${p.length} bytes of data`),this.binding.write(p).then(()=>{s("binding.write","write finished"),C(null)},P=>{s("binding.write","error",P),P.canceled||this._disconnected(P),C(P)})},E.prototype._writev=function(p,b){s("_writev",`${p.length} chunks of data`);const C=p.map(P=>P.chunk);this._write(Buffer.concat(C),null,b)},E.prototype._read=function(p){if(!this.isOpen){s("_read","queueing _read for after open"),this.once("open",()=>{this._read(p)});return}(!this._pool||this._pool.length-this._pool.used<this._kMinPoolSpace)&&(s("_read","discarding the read buffer pool because it is below kMinPoolSpace"),this._pool=O(this.settings.highWaterMark));const b=this._pool,C=Math.min(b.length-b.used,p),P=b.used;s("_read","reading",{start:P,toRead:C}),this.binding.read(b,P,C).then(({bytesRead:A})=>{if(s("binding.read","finished",{bytesRead:A}),A===0){s("binding.read","Zero bytes read closing readable stream"),this.push(null);return}b.used+=A,this.push(b.slice(P,P+A))},A=>{s("binding.read","error",A),A.canceled||this._disconnected(A),this._read(p)})},E.prototype._disconnected=function(p){if(!this.isOpen){s("disconnected aborted because already closed",p);return}s("disconnected",p),p.disconnected=!0,this.close(null,p)},E.prototype.close=function(p,b){if(b=b||null,!this.isOpen)return s("close attempted, but port is not open"),this._asyncError(new Error("Port is not open"),p);this.closing=!0,s("#close"),this.binding.close().then(()=>{this.closing=!1,s("binding.close","finished"),this.emit("close",b),this.settings.endOnClose&&this.emit("end"),p&&p.call(this,b)},C=>(this.closing=!1,s("binding.close","had an error",C),this._error(C,p)))},E.prototype.set=function(p,b){if(typeof p!="object")throw TypeError('"options" is not an object');if(!this.isOpen)return s("set attempted, but port is not open"),this._asyncError(new Error("Port is not open"),b);const C={...v,...p};s("#set",C),this.binding.set(C).then(()=>{s("binding.set","finished"),b&&b.call(this,null)},P=>(s("binding.set","had an error",P),this._error(P,b)))},E.prototype.get=function(p){if(!this.isOpen)return s("get attempted, but port is not open"),this._asyncError(new Error("Port is not open"),p);s("#get"),this.binding.get().then(b=>{s("binding.get","finished"),p&&p.call(this,null,b)},b=>(s("binding.get","had an error",b),this._error(b,p)))},E.prototype.flush=function(p){if(!this.isOpen)return s("flush attempted, but port is not open"),this._asyncError(new Error("Port is not open"),p);s("#flush"),this.binding.flush().then(()=>{s("binding.flush","finished"),p&&p.call(this,null)},b=>(s("binding.flush","had an error",b),this._error(b,p)))},E.prototype.drain=function(p){if(s("drain"),!this.isOpen)return s("drain queuing on port open"),this.once("open",()=>{this.drain(p)});this.binding.drain().then(()=>{s("binding.drain","finished"),p&&p.call(this,null)},b=>(s("binding.drain","had an error",b),this._error(b,p)))},E.list=async function(p){if(s(".list"),!E.Binding)throw new TypeError("No Binding set on `SerialPort.Binding`");if(p)throw new TypeError("SerialPort.list no longer takes a callback and only returns a promise");return E.Binding.list()},lib$9=E,lib$9}var lib$8={exports:{}};function commonjsRequire(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var bindings={exports:{}},pathBrowserify,hasRequiredPathBrowserify;function requirePathBrowserify(){if(hasRequiredPathBrowserify)return pathBrowserify;hasRequiredPathBrowserify=1;function n(u){if(typeof u!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(u))}function t(u,h){for(var f="",g=0,v=-1,O=0,E,_=0;_<=u.length;++_){if(_<u.length)E=u.charCodeAt(_);else{if(E===47)break;E=47}if(E===47){if(!(v===_-1||O===1))if(v!==_-1&&O===2){if(f.length<2||g!==2||f.charCodeAt(f.length-1)!==46||f.charCodeAt(f.length-2)!==46){if(f.length>2){var p=f.lastIndexOf("/");if(p!==f.length-1){p===-1?(f="",g=0):(f=f.slice(0,p),g=f.length-1-f.lastIndexOf("/")),v=_,O=0;continue}}else if(f.length===2||f.length===1){f="",g=0,v=_,O=0;continue}}h&&(f.length>0?f+="/..":f="..",g=2)}else f.length>0?f+="/"+u.slice(v+1,_):f=u.slice(v+1,_),g=_-v-1;v=_,O=0}else E===46&&O!==-1?++O:O=-1}return f}function s(u,h){var f=h.dir||h.root,g=h.base||(h.name||"")+(h.ext||"");return f?f===h.root?f+g:f+u+g:g}var o={resolve:function(){for(var h="",f=!1,g,v=arguments.length-1;v>=-1&&!f;v--){var O;v>=0?O=arguments[v]:(g===void 0&&(g=process$1.cwd()),O=g),n(O),O.length!==0&&(h=O+"/"+h,f=O.charCodeAt(0)===47)}return h=t(h,!f),f?h.length>0?"/"+h:"/":h.length>0?h:"."},normalize:function(h){if(n(h),h.length===0)return".";var f=h.charCodeAt(0)===47,g=h.charCodeAt(h.length-1)===47;return h=t(h,!f),h.length===0&&!f&&(h="."),h.length>0&&g&&(h+="/"),f?"/"+h:h},isAbsolute:function(h){return n(h),h.length>0&&h.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var h,f=0;f<arguments.length;++f){var g=arguments[f];n(g),g.length>0&&(h===void 0?h=g:h+="/"+g)}return h===void 0?".":o.normalize(h)},relative:function(h,f){if(n(h),n(f),h===f||(h=o.resolve(h),f=o.resolve(f),h===f))return"";for(var g=1;g<h.length&&h.charCodeAt(g)===47;++g);for(var v=h.length,O=v-g,E=1;E<f.length&&f.charCodeAt(E)===47;++E);for(var _=f.length,p=_-E,b=O<p?O:p,C=-1,P=0;P<=b;++P){if(P===b){if(p>b){if(f.charCodeAt(E+P)===47)return f.slice(E+P+1);if(P===0)return f.slice(E+P)}else O>b&&(h.charCodeAt(g+P)===47?C=P:P===0&&(C=0));break}var A=h.charCodeAt(g+P),T=f.charCodeAt(E+P);if(A!==T)break;A===47&&(C=P)}var I="";for(P=g+C+1;P<=v;++P)(P===v||h.charCodeAt(P)===47)&&(I.length===0?I+="..":I+="/..");return I.length>0?I+f.slice(E+C):(E+=C,f.charCodeAt(E)===47&&++E,f.slice(E))},_makeLong:function(h){return h},dirname:function(h){if(n(h),h.length===0)return".";for(var f=h.charCodeAt(0),g=f===47,v=-1,O=!0,E=h.length-1;E>=1;--E)if(f=h.charCodeAt(E),f===47){if(!O){v=E;break}}else O=!1;return v===-1?g?"/":".":g&&v===1?"//":h.slice(0,v)},basename:function(h,f){if(f!==void 0&&typeof f!="string")throw new TypeError('"ext" argument must be a string');n(h);var g=0,v=-1,O=!0,E;if(f!==void 0&&f.length>0&&f.length<=h.length){if(f.length===h.length&&f===h)return"";var _=f.length-1,p=-1;for(E=h.length-1;E>=0;--E){var b=h.charCodeAt(E);if(b===47){if(!O){g=E+1;break}}else p===-1&&(O=!1,p=E+1),_>=0&&(b===f.charCodeAt(_)?--_===-1&&(v=E):(_=-1,v=p))}return g===v?v=p:v===-1&&(v=h.length),h.slice(g,v)}else{for(E=h.length-1;E>=0;--E)if(h.charCodeAt(E)===47){if(!O){g=E+1;break}}else v===-1&&(O=!1,v=E+1);return v===-1?"":h.slice(g,v)}},extname:function(h){n(h);for(var f=-1,g=0,v=-1,O=!0,E=0,_=h.length-1;_>=0;--_){var p=h.charCodeAt(_);if(p===47){if(!O){g=_+1;break}continue}v===-1&&(O=!1,v=_+1),p===46?f===-1?f=_:E!==1&&(E=1):f!==-1&&(E=-1)}return f===-1||v===-1||E===0||E===1&&f===v-1&&f===g+1?"":h.slice(f,v)},format:function(h){if(h===null||typeof h!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof h);return s("/",h)},parse:function(h){n(h);var f={root:"",dir:"",base:"",ext:"",name:""};if(h.length===0)return f;var g=h.charCodeAt(0),v=g===47,O;v?(f.root="/",O=1):O=0;for(var E=-1,_=0,p=-1,b=!0,C=h.length-1,P=0;C>=O;--C){if(g=h.charCodeAt(C),g===47){if(!b){_=C+1;break}continue}p===-1&&(b=!1,p=C+1),g===46?E===-1?E=C:P!==1&&(P=1):E!==-1&&(P=-1)}return E===-1||p===-1||P===0||P===1&&E===p-1&&E===_+1?p!==-1&&(_===0&&v?f.base=f.name=h.slice(1,p):f.base=f.name=h.slice(_,p)):(_===0&&v?(f.name=h.slice(1,E),f.base=h.slice(1,p)):(f.name=h.slice(_,E),f.base=h.slice(_,p)),f.ext=h.slice(E,p)),_>0?f.dir=h.slice(0,_-1):v&&(f.dir="/"),f},sep:"/",delimiter:":",win32:null,posix:null};return o.posix=o,pathBrowserify=o,pathBrowserify}var fileUriToPath_1,hasRequiredFileUriToPath;function requireFileUriToPath(){if(hasRequiredFileUriToPath)return fileUriToPath_1;hasRequiredFileUriToPath=1;var n=requirePathBrowserify().sep||"/";fileUriToPath_1=t;function t(s){if(typeof s!="string"||s.length<=7||s.substring(0,7)!="file://")throw new TypeError("must pass in a file:// URI to convert to a file path");var o=decodeURI(s.substring(7)),u=o.indexOf("/"),h=o.substring(0,u),f=o.substring(u+1);return h=="localhost"&&(h=""),h&&(h=n+n+h),f=f.replace(/^(.+)\|/,"$1:"),n=="\\"&&(f=f.replace(/\//g,"\\")),/^.+\:/.test(f)||(f=n+f),h+f}return fileUriToPath_1}var hasRequiredBindings;function requireBindings(){return hasRequiredBindings||(hasRequiredBindings=1,function(n,t){var s={},o=require$$0,u=requirePathBrowserify(),h=requireFileUriToPath(),f=u.join,g=u.dirname,v=o.accessSync&&function(_){try{o.accessSync(_)}catch{return!1}return!0}||o.existsSync||u.existsSync,O={arrow:s.NODE_BINDINGS_ARROW||" → ",compiled:s.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process$1.platform,arch:process$1.arch,nodePreGyp:"node-v"+process$1.versions.modules+"-"+process$1.platform+"-"+process$1.arch,version:process$1.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","addon-build","release","install-root","bindings"],["module_root","addon-build","debug","install-root","bindings"],["module_root","addon-build","default","install-root","bindings"],["module_root","lib","binding","nodePreGyp","bindings"]]};function E(_){typeof _=="string"?_={bindings:_}:_||(_={}),Object.keys(O).map(function(M){M in _||(_[M]=O[M])}),_.module_root||(_.module_root=t.getRoot(t.getFileName())),u.extname(_.bindings)!=".node"&&(_.bindings+=".node");for(var p=typeof __webpack_require__=="function"?__non_webpack_require__:commonjsRequire,b=[],C=0,P=_.try.length,A,T,I;C<P;C++){A=f.apply(null,_.try[C].map(function(M){return _[M]||M})),b.push(A);try{return T=_.path?p.resolve(A):p(A),_.path||(T.path=A),T}catch(M){if(M.code!=="MODULE_NOT_FOUND"&&M.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(M.message))throw M}}throw I=new Error(`Could not locate the bindings file. Tried:
`+b.map(function(M){return _.arrow+M}).join(`
`)),I.tries=b,I}n.exports=t=E,t.getFileName=function(p){var b=Error.prepareStackTrace,C=Error.stackTraceLimit,P={},A;Error.stackTraceLimit=10,Error.prepareStackTrace=function(I,M){for(var j=0,W=M.length;j<W;j++)if(A=M[j].getFileName(),A!==__filename)if(p){if(A!==p)return}else return},Error.captureStackTrace(P),P.stack,Error.prepareStackTrace=b,Error.stackTraceLimit=C;var T="file://";return A.indexOf(T)===0&&(A=h(A)),A},t.getRoot=function(p){for(var b=g(p),C;;){if(b==="."&&(b=process$1.cwd()),v(f(b,"package.json"))||v(f(b,"node_modules")))return b;if(C===b)throw new Error('Could not find module root given file: "'+p+'". Do you have a `package.json` file? ');C=b,b=f(b,"..")}}}(bindings,bindings.exports)),bindings.exports}var lib$7,hasRequiredLib$8;function requireLib$8(){if(hasRequiredLib$8)return lib$7;hasRequiredLib$8=1;const n=requireBrowser()("serialport/binding-abstract");class t{static async list(){n("list")}constructor(o={}){if(typeof o!="object")throw new TypeError('"options" is not an object')}async open(o,u){if(!o)throw new TypeError('"path" is not a valid port');if(typeof u!="object")throw new TypeError('"options" is not an object');if(n("open"),this.isOpen)throw new Error("Already open")}async close(){if(n("close"),!this.isOpen)throw new Error("Port is not open")}async read(o,u,h){if(!Buffer.isBuffer(o))throw new TypeError('"buffer" is not a Buffer');if(typeof u!="number"||isNaN(h))throw new TypeError(`"offset" is not an integer got "${isNaN(h)?"NaN":typeof u}"`);if(typeof h!="number"||isNaN(h))throw new TypeError(`"length" is not an integer got "${isNaN(h)?"NaN":typeof h}"`);if(n("read"),o.length<u+h)throw new Error("buffer is too small");if(!this.isOpen)throw new Error("Port is not open")}async write(o){if(!Buffer.isBuffer(o))throw new TypeError('"buffer" is not a Buffer');if(n("write",o.length,"bytes"),!this.isOpen)throw n("write","error port is not open"),new Error("Port is not open")}async update(o){if(typeof o!="object")throw TypeError('"options" is not an object');if(typeof o.baudRate!="number")throw new TypeError('"options.baudRate" is not a number');if(n("update"),!this.isOpen)throw new Error("Port is not open")}async set(o){if(typeof o!="object")throw new TypeError('"options" is not an object');if(n("set"),!this.isOpen)throw new Error("Port is not open")}async get(){if(n("get"),!this.isOpen)throw new Error("Port is not open")}async getBaudRate(){if(n("getbaudRate"),!this.isOpen)throw new Error("Port is not open")}async flush(){if(n("flush"),!this.isOpen)throw new Error("Port is not open")}async drain(){if(n("drain"),!this.isOpen)throw new Error("Port is not open")}}return lib$7=t,lib$7}var win32SnParser,hasRequiredWin32SnParser;function requireWin32SnParser(){if(hasRequiredWin32SnParser)return win32SnParser;hasRequiredWin32SnParser=1;const n=[/USB\\(?:.+)\\(.+)/,/FTDIBUS\\(?:.+)\+(.+?)A?\\.+/];return win32SnParser=function(t){if(!t)return null;for(const s of n){const o=t.match(s);if(o)return o[1]}return null},win32SnParser}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;let n=!1;return legacy={wrapWithHiddenComName:async s=>(await s).map(u=>{const h={...u};return Object.defineProperties(h,{comName:{get(){return n||(n=!0,console.warn('"PortInfo.comName" has been deprecated. You should now use "PortInfo.path". The property will be removed in the next major release.')),h.path},enumerable:!1}})})},legacy}var win32,hasRequiredWin32;function requireWin32(){if(hasRequiredWin32)return win32;hasRequiredWin32=1;const n=requireBindings()("bindings.node"),t=requireLib$8(),{promisify:s}=requireUtil(),o=requireWin32SnParser(),u=s(n.list),h=s(n.open),f=s(n.close),g=s(n.read),v=s(n.write),O=s(n.update),E=s(n.set),_=s(n.get),p=s(n.getBaudRate),b=s(n.drain),C=s(n.flush),{wrapWithHiddenComName:P}=requireLegacy();class A extends t{static async list(){const I=await u();return P(I.map(M=>{if(M.pnpId&&!M.serialNumber){const j=o(M.pnpId);if(j)return{...M,serialNumber:j}}return M}))}constructor(I={}){super(I),this.bindingOptions={...I.bindingOptions},this.fd=null,this.writeOperation=null}get isOpen(){return this.fd!==null}async open(I,M){await super.open(I,M),this.openOptions={...this.bindingOptions,...M};const j=await h(I,this.openOptions);this.fd=j}async close(){await super.close();const I=this.fd;return this.fd=null,f(I)}async read(I,M,j){await super.read(I,M,j);try{return{bytesRead:await g(this.fd,I,M,j),buffer:I}}catch(W){throw this.isOpen||(W.canceled=!0),W}}async write(I){return this.writeOperation=super.write(I).then(async()=>{I.length!==0&&(await v(this.fd,I),this.writeOperation=null)}),this.writeOperation}async update(I){return await super.update(I),O(this.fd,I)}async set(I){return await super.set(I),E(this.fd,I)}async get(){return await super.get(),_(this.fd)}async getBaudRate(){return await super.get(),p(this.fd)}async drain(){return await super.drain(),await this.writeOperation,b(this.fd)}async flush(){return await super.flush(),C(this.fd)}}return win32=A,win32}var poller,hasRequiredPoller;function requirePoller(){if(hasRequiredPoller)return poller;hasRequiredPoller=1;const t=requireBrowser()("serialport/bindings/poller"),s=eventsExports,o=requireBindings()("bindings.node").Poller,u={UV_READABLE:1,UV_WRITABLE:2,UV_DISCONNECT:4};function h(g,v){if(g){t("error",g),this.emit("readable",g),this.emit("writable",g),this.emit("disconnect",g);return}v&u.UV_READABLE&&(t('received "readable"'),this.emit("readable",null)),v&u.UV_WRITABLE&&(t('received "writable"'),this.emit("writable",null)),v&u.UV_DISCONNECT&&(t('received "disconnect"'),this.emit("disconnect",null))}class f extends s{constructor(v,O=o){t("Creating poller"),super(),this.poller=new O(v,h.bind(this))}once(v,O){switch(v){case"readable":this.poll(u.UV_READABLE);break;case"writable":this.poll(u.UV_WRITABLE);break;case"disconnect":this.poll(u.UV_DISCONNECT);break}return super.once(v,O)}poll(v){v=v||0,v&u.UV_READABLE&&t('Polling for "readable"'),v&u.UV_WRITABLE&&t('Polling for "writable"'),v&u.UV_DISCONNECT&&t('Polling for "disconnect"'),this.poller.poll(v)}stop(){t("Stopping poller"),this.poller.stop(),this.emitCanceled()}destroy(){t("Destroying poller"),this.poller.destroy(),this.emitCanceled()}emitCanceled(){const v=new Error("Canceled");v.canceled=!0,this.emit("readable",v),this.emit("writable",v),this.emit("disconnect",v)}}return f.EVENTS=u,poller=f,poller}var unixRead_1,hasRequiredUnixRead;function requireUnixRead(){if(hasRequiredUnixRead)return unixRead_1;hasRequiredUnixRead=1;const n=require$$0,s=requireBrowser()("serialport/bindings/unixRead"),{promisify:o}=requireUtil(),u=o(n.read),h=g=>new Promise((v,O)=>{g.poller.once("readable",E=>E?O(E):v())}),f=async({binding:g,buffer:v,offset:O,length:E,fsReadAsync:_=u})=>{if(s("Starting read"),!g.isOpen){const p=new Error("Port is not open");throw p.canceled=!0,p}try{const{bytesRead:p}=await _(g.fd,v,O,E,null);return p===0?f({binding:g,buffer:v,offset:O,length:E,fsReadAsync:_}):(s("Finished read",p,"bytes"),{bytesRead:p,buffer:v})}catch(p){if(s("read error",p),p.code==="EAGAIN"||p.code==="EWOULDBLOCK"||p.code==="EINTR"){if(!g.isOpen){const C=new Error("Port is not open");throw C.canceled=!0,C}return s("waiting for readable because of code:",p.code),await h(g),f({binding:g,buffer:v,offset:O,length:E,fsReadAsync:_})}throw(p.code==="EBADF"||p.code==="ENXIO"||p.code==="UNKNOWN"||p.errno===-1)&&(p.canceled=!0,s("disconnecting",p)),p}};return unixRead_1=f,unixRead_1}var unixWrite_1,hasRequiredUnixWrite;function requireUnixWrite(){if(hasRequiredUnixWrite)return unixWrite_1;hasRequiredUnixWrite=1;const n=require$$0,s=requireBrowser()("serialport/bindings/unixWrite"),{promisify:o}=requireUtil(),u=o(n.write),h=g=>new Promise((v,O)=>{g.poller.once("writable",E=>E?O(E):v())}),f=async({binding:g,buffer:v,offset:O=0,fsWriteAsync:E=u})=>{const _=v.length-O;if(s("Starting write",v.length,"bytes offset",O,"bytesToWrite",_),!g.isOpen)throw new Error("Port is not open");try{const{bytesWritten:p}=await E(g.fd,v,O,_);if(s("write returned: wrote",p,"bytes"),p+O<v.length){if(!g.isOpen)throw new Error("Port is not open");return f({binding:g,buffer:v,offset:p+O,fsWriteAsync:E})}s("Finished writing",p+O,"bytes")}catch(p){if(s("write errored",p),p.code==="EAGAIN"||p.code==="EWOULDBLOCK"||p.code==="EINTR"){if(!g.isOpen)throw new Error("Port is not open");return s("waiting for writable because of code:",p.code),await h(g),f({binding:g,buffer:v,offset:O,fsWriteAsync:E})}throw(p.code==="EBADF"||p.code==="ENXIO"||p.code==="UNKNOWN"||p.errno===-1)&&(p.disconnect=!0,s("disconnecting",p)),s("error",p),p}};return unixWrite_1=f,unixWrite_1}var darwin,hasRequiredDarwin;function requireDarwin(){if(hasRequiredDarwin)return darwin;hasRequiredDarwin=1;const{promisify:n}=requireUtil(),t=requireBindings()("bindings.node"),s=requireLib$8(),o=requirePoller(),u=requireUnixRead(),h=requireUnixWrite(),{wrapWithHiddenComName:f}=requireLegacy(),g=Object.freeze({vmin:1,vtime:0}),v=n(t.list),O=n(t.open),E=n(t.close),_=n(t.update),p=n(t.set),b=n(t.get),C=n(t.getBaudRate),P=n(t.drain),A=n(t.flush);class T extends s{static list(){return f(v())}constructor(M={}){super(M),this.bindingOptions={...g,...M.bindingOptions},this.fd=null,this.writeOperation=null}get isOpen(){return this.fd!==null}async open(M,j){await super.open(M,j),this.openOptions={...this.bindingOptions,...j};const W=await O(M,this.openOptions);this.fd=W,this.poller=new o(W)}async close(){await super.close();const M=this.fd;return this.poller.stop(),this.poller.destroy(),this.poller=null,this.openOptions=null,this.fd=null,E(M)}async read(M,j,W){return await super.read(M,j,W),u({binding:this,buffer:M,offset:j,length:W})}async write(M){return this.writeOperation=super.write(M).then(async()=>{M.length!==0&&(await h({binding:this,buffer:M}),this.writeOperation=null)}),this.writeOperation}async update(M){return await super.update(M),_(this.fd,M)}async set(M){return await super.set(M),p(this.fd,M)}async get(){return await super.get(),b(this.fd)}async getBaudRate(){return await super.get(),C(this.fd)}async drain(){return await super.drain(),await this.writeOperation,P(this.fd)}async flush(){return await super.flush(),A(this.fd)}}return darwin=T,darwin}var lib$6,hasRequiredLib$7;function requireLib$7(){if(hasRequiredLib$7)return lib$6;hasRequiredLib$7=1;const{Transform:n}=requireStreamBrowserify();class t extends n{constructor(o={}){if(super(o),o.delimiter===void 0)throw new TypeError('"delimiter" is not a bufferable object');if(o.delimiter.length===0)throw new TypeError('"delimiter" has a 0 or undefined length');this.includeDelimiter=o.includeDelimiter!==void 0?o.includeDelimiter:!1,this.delimiter=Buffer.from(o.delimiter),this.buffer=Buffer.alloc(0)}_transform(o,u,h){let f=Buffer.concat([this.buffer,o]),g;for(;(g=f.indexOf(this.delimiter))!==-1;)this.push(f.slice(0,g+(this.includeDelimiter?this.delimiter.length:0))),f=f.slice(g+this.delimiter.length);this.buffer=f,h()}_flush(o){this.push(this.buffer),this.buffer=Buffer.alloc(0),o()}}return lib$6=t,lib$6}var lib$5,hasRequiredLib$6;function requireLib$6(){if(hasRequiredLib$6)return lib$5;hasRequiredLib$6=1;const n=requireLib$7();class t extends n{constructor(o){const u={delimiter:Buffer.from(`
`,"utf8"),encoding:"utf8",...o};typeof u.delimiter=="string"&&(u.delimiter=Buffer.from(u.delimiter,u.encoding)),super(u)}}return lib$5=t,lib$5}var linuxList,hasRequiredLinuxList;function requireLinuxList(){if(hasRequiredLinuxList)return linuxList;hasRequiredLinuxList=1;const n=require$$0,t=requireLib$6();function s(g){return/(tty(S|WCH|ACM|USB|AMA|MFD|O|XRUSB)|rfcomm)/.test(g)&&g}function o(g){return{DEVNAME:"path",ID_VENDOR_ENC:"manufacturer",ID_SERIAL_SHORT:"serialNumber",ID_VENDOR_ID:"vendorId",ID_MODEL_ID:"productId",DEVLINKS:"pnpId"}[g.toUpperCase()]}function u(g){return g.replace(/\\x([a-fA-F0-9]{2})/g,(v,O)=>String.fromCharCode(parseInt(O,16)))}function h(g,v){if(g==="pnpId"){const O=v.match(/\/by-id\/([^\s]+)/);return O&&O[1]||void 0}return g==="manufacturer"?u(v):/^0x/.test(v)?v.substr(2):v}function f(){return new Promise((g,v)=>{const O=[],E=n.spawn("udevadm",["info","-e"]),_=E.stdout.pipe(new t);E.on("close",C=>C&&v(new Error(`Error listing ports udevadm exited with error code: ${C}`))),E.on("error",v),_.on("error",v);let p={},b=!1;_.on("data",C=>{const P=C.slice(0,1),A=C.slice(3);if(P==="P"){p={manufacturer:void 0,serialNumber:void 0,pnpId:void 0,locationId:void 0,vendorId:void 0,productId:void 0},b=!1;return}if(!b){if(P==="N"){s(A)?O.push(p):b=!0;return}if(P==="E"){const T=A.match(/^(.+)=(.*)/);if(!T)return;const I=o(T[1]);if(!I)return;p[I]=h(I,T[2])}}}),_.on("finish",()=>g(O))})}return linuxList=f,linuxList}var linux,hasRequiredLinux;function requireLinux(){if(hasRequiredLinux)return linux;hasRequiredLinux=1;const{promisify:n}=requireUtil(),t=requireBindings()("bindings.node"),s=requireLib$8(),o=requireLinuxList(),u=requirePoller(),h=requireUnixRead(),f=requireUnixWrite(),{wrapWithHiddenComName:g}=requireLegacy(),v=Object.freeze({vmin:1,vtime:0}),O=n(t.open),E=n(t.close),_=n(t.update),p=n(t.set),b=n(t.get),C=n(t.getBaudRate),P=n(t.drain),A=n(t.flush);class T extends s{static list(){return g(o())}constructor(M={}){super(M),this.bindingOptions={...v,...M.bindingOptions},this.fd=null,this.writeOperation=null}get isOpen(){return this.fd!==null}async open(M,j){await super.open(M,j),this.openOptions={...this.bindingOptions,...j};const W=await O(M,this.openOptions);this.fd=W,this.poller=new u(W)}async close(){await super.close();const M=this.fd;return this.poller.stop(),this.poller.destroy(),this.poller=null,this.openOptions=null,this.fd=null,E(M)}async read(M,j,W){return await super.read(M,j,W),h({binding:this,buffer:M,offset:j,length:W})}async write(M){return this.writeOperation=super.write(M).then(async()=>{M.length!==0&&(await f({binding:this,buffer:M}),this.writeOperation=null)}),this.writeOperation}async update(M){return await super.update(M),_(this.fd,M)}async set(M){return await super.set(M),p(this.fd,M)}async get(){return await super.get(),b(this.fd)}async getBaudRate(){return await super.get(),C(this.fd)}async drain(){return await super.drain(),await this.writeOperation,P(this.fd)}async flush(){return await super.flush(),A(this.fd)}}return linux=T,linux}var hasRequiredLib$5;function requireLib$5(){if(hasRequiredLib$5)return lib$8.exports;hasRequiredLib$5=1;const n=requireBrowser()("serialport/bindings");switch(process$1.platform){case"win32":n("loading WindowsBinding"),lib$8.exports=requireWin32();break;case"darwin":n("loading DarwinBinding"),lib$8.exports=requireDarwin();break;default:n("loading LinuxBinding"),lib$8.exports=requireLinux()}return lib$8.exports}var lib$4,hasRequiredLib$4;function requireLib$4(){if(hasRequiredLib$4)return lib$4;hasRequiredLib$4=1;const{Transform:n}=requireStreamBrowserify();class t extends n{constructor(o={}){if(super(o),typeof o.length!="number")throw new TypeError('"length" is not a number');if(o.length<1)throw new TypeError('"length" is not greater than 0');this.length=o.length,this.position=0,this.buffer=Buffer.alloc(this.length)}_transform(o,u,h){let f=0;for(;f<o.length;)this.buffer[this.position]=o[f],f++,this.position++,this.position===this.length&&(this.push(this.buffer),this.buffer=Buffer.alloc(this.length),this.position=0);h()}_flush(o){this.push(this.buffer.slice(0,this.position)),this.buffer=Buffer.alloc(this.length),o()}}return lib$4=t,lib$4}var lib$3,hasRequiredLib$3;function requireLib$3(){if(hasRequiredLib$3)return lib$3;hasRequiredLib$3=1;const{Transform:n}=requireStreamBrowserify();class t extends n{constructor(o=50){super(),this.array=[],this.cursor=0,this.lastByteFetchTime=0,this.maxDelayBetweenBytesMs=o}_transform(o,u,h){if(this.maxDelayBetweenBytesMs>0){const f=Date.now();f-this.lastByteFetchTime>this.maxDelayBetweenBytesMs&&(this.array=[],this.cursor=0),this.lastByteFetchTime=f}for(this.cursor+=o.length,Array.from(o).map(f=>this.array.push(f));this.cursor>1&&this.cursor>=this.array[1]+5;){const f=this.array[1]+5,g=Buffer.from(this.array.slice(0,f));this.array=this.array.slice(g.length,this.array.length),this.cursor-=f,this.push(g)}h()}}return lib$3=t,lib$3}var lib$2,hasRequiredLib$2;function requireLib$2(){if(hasRequiredLib$2)return lib$2;hasRequiredLib$2=1;const{Transform:n}=requireStreamBrowserify();class t extends n{constructor(o={}){if(o.delimiter===void 0)throw new TypeError('"delimiter" is not a bufferable object');if(o.delimiter.length===0)throw new TypeError('"delimiter" has a 0 or undefined length');super(o),this.delimiter=Buffer.from(o.delimiter),this.readOffset=0,this.ready=!1}_transform(o,u,h){if(this.ready)return this.push(o),h();const f=this.delimiter;let g=0;for(;this.readOffset<f.length&&g<o.length;)f[this.readOffset]===o[g]?this.readOffset++:this.readOffset=0,g++;if(this.readOffset===f.length){this.ready=!0,this.emit("ready");const v=o.slice(g);v.length>0&&this.push(v)}h()}}return lib$2=t,lib$2}var lib$1,hasRequiredLib$1;function requireLib$1(){if(hasRequiredLib$1)return lib$1;hasRequiredLib$1=1;const{Transform:n}=requireStreamBrowserify();class t extends n{constructor(o){const u={encoding:"utf8",...o};if(u.regex===void 0)throw new TypeError('"options.regex" must be a regular expression pattern or object');u.regex instanceof RegExp||(u.regex=new RegExp(u.regex)),super(u),this.regex=u.regex,this.data=""}_transform(o,u,h){const g=(this.data+o).split(this.regex);this.data=g.pop(),g.forEach(v=>{this.push(v)}),h()}_flush(o){this.push(this.data),this.data="",o()}}return lib$1=t,lib$1}var parsers,hasRequiredParsers;function requireParsers(){return hasRequiredParsers||(hasRequiredParsers=1,parsers={ByteLength:requireLib$4(),CCTalk:requireLib$3(),Delimiter:requireLib$7(),Readline:requireLib$6(),Ready:requireLib$2(),Regex:requireLib$1()}),parsers}var lib,hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1;const n=requireLib$9(),t=requireLib$5(),s=requireParsers();return n.Binding=t,n.parsers=s,lib=n,lib}var encoder7bit,hasRequiredEncoder7bit;function requireEncoder7bit(){return hasRequiredEncoder7bit||(hasRequiredEncoder7bit=1,encoder7bit={to7BitArray(n){let t=0,s=0;const o=[];for(let u of n)t===0?(o.push(u&127),t++,s=u>>7):(o.push(u<<t&127|s),t===6?(o.push(u>>1),t=0):(t++,s=u>>8-t));return t>0&&o.push(s),o},from7BitArray(n){const t=n.length*7>>3,s=[];for(let o=0;o<t;o++){const u=o<<3,h=u/7>>>0,f=u%7;s[o]=n[h]>>f|n[h+1]<<7-f&255}return s}}),encoder7bit}var onewireutils,hasRequiredOnewireutils;function requireOnewireutils(){if(hasRequiredOnewireutils)return onewireutils;hasRequiredOnewireutils=1;const n=requireEncoder7bit(),t={crc8(s){let o=0;for(let u of s)for(let h=8;h;h--){const f=(o^u)&1;o>>=1,f&&(o^=140),u>>=1}return o},readDevices(s){const o=n.from7BitArray(s),u=[];for(let h=0;h<o.length;h+=8){const f=o.slice(h,h+8);if(f.length!==8)continue;t.crc8(f.slice(0,7))!==f[7]&&console.error("ROM invalid!"),u.push(f)}return u}};return onewireutils=t,onewireutils}var firmata$1,hasRequiredFirmata$1;function requireFirmata$1(){if(hasRequiredFirmata$1)return firmata$1;hasRequiredFirmata$1=1;var n={};const t=eventsExports,s=requireEncoder7bit(),o=requireOnewireutils(),u=new Map,h=105,f=106,g=224,v=107,O=108,E=144,_=247,p=111,b=120,C=119,P=118,A=24,T=65,I=115,M=16,j=67,W=8,Z=1,oe=69,k=68,K=66,J=64,Q=60,ie=32,ue=244,fe=109,we=110,Te=117,he=121,ce=192,Ce=208,pe=249,Ie=122,Le=112,ee=96,ae=16,de=32,X=48,re=64,ge=80,ye=96,Oe=112,F=240,H=114,Se=98,Me=113,be=255,Ne=128,ze=Symbol("sendOneWireSearch"),Xe=Symbol("sendOneWireRequest"),xe={[pe](x){x.version.major=x.buffer[1],x.version.minor=x.buffer[2],x.emit("reportversion")},[g](x){const m=x.buffer[0]&15,L=x.buffer[1]|x.buffer[2]<<7;x.pins[x.analogPins[m]]&&(x.pins[x.analogPins[m]].value=L),x.emit(`analog-read-${m}`,L),x.emit("analog-read",{pin:m,value:L})},[E](x){const m=x.buffer[0]&15,L=x.buffer[1]|x.buffer[2]<<7;for(let N=0;N<8;N++){const Y=8*m+N,le=x.pins[Y],Ae=1<<N;if(le&&(le.mode===x.MODES.INPUT||le.mode===x.MODES.PULLUP)){le.value=L>>(N&7)&1,le.value?x.ports[m]|=Ae:x.ports[m]&=~Ae;let{value:Fe}=le;x.emit(`digital-read-${Y}`,Fe),x.emit("digital-read",{pin:Y,value:Fe})}}}},ut={[he](x){const m=x.buffer.length-2,L=Buffer.alloc(Math.round((m-4)/2));let N=0,Y=0;for(let le=4;le<m;le+=2)N=(x.buffer[le]&127|(x.buffer[le+1]&127)<<7)&255,L.writeUInt8(N,Y++);x.firmware={name:L.toString(),version:{major:x.buffer[2],minor:x.buffer[3]}},x.emit("queryfirmware")},[O](x){const m=Object.keys(x.MODES).map(Ae=>x.MODES[Ae]);let L,N,Y=0;function le(Ae){return m.reduce((Fe,Ge)=>(Ae&1<<Ge&&Fe.push(Ge),Fe),[])}if(!x.pins.length)for(let Ae=2,Fe=0;Ae<x.buffer.length-1;Ae++){if(x.buffer[Ae]===127){x.pins.push({supportedModes:le(Y),mode:void 0,value:0,report:1}),Y=0,Fe=0;continue}Fe===0&&(L=x.buffer[Ae],N=(1<<x.buffer[Ae+1])-1,Y|=1<<L,L===x.MODES.ANALOG&&x.RESOLUTION.ADC===null&&(x.RESOLUTION.ADC=N),L===x.MODES.PWM&&x.RESOLUTION.PWM===null&&(x.RESOLUTION.PWM=N)),Fe^=1}x.emit("capability-query")},[we](x){let m=x.buffer[2];x.pins[m].mode=x.buffer[3],x.pins[m].state=x.buffer[4],x.buffer.length>6&&(x.pins[m].state|=x.buffer[5]<<7),x.buffer.length>7&&(x.pins[m].state|=x.buffer[6]<<14),x.emit(`pin-state-${m}`)},[f](x){let m=0,L;for(let N=2;N<x.buffer.length-1;N++)L=x.buffer[N],x.pins[m].analogChannel=L,L!==127&&x.analogPins.push(m),m++;x.emit("analog-mapping-query")},[C](x){const m=[],L=x.buffer[2]&127|(x.buffer[3]&127)<<7,N=x.buffer[4]&127|(x.buffer[5]&127)<<7;for(let Y=6,le=x.buffer.length-1;Y<le;Y+=2)m.push(x.buffer[Y]|x.buffer[Y+1]<<7);x.emit(`I2C-reply-${L}-${N}`,m)},[I](x){const m=x.buffer[2];ut[m]&&ut[m](x)},[K](x){const m=x.buffer[3],L=x.buffer.slice(4,x.buffer.length-1);x.emit(`1-wire-search-reply-${m}`,o.readDevices(L))},[oe](x){const m=x.buffer[3],L=x.buffer.slice(4,x.buffer.length-1);x.emit(`1-wire-search-alarms-reply-${m}`,o.readDevices(L))},[j](x){const m=x.buffer.slice(4,x.buffer.length-1),L=s.from7BitArray(m),N=L[1]<<8|L[0];x.emit(`1-wire-read-reply-${N}`,L.slice(2))},[Me](x){x.emit("string",Buffer.from(x.buffer.slice(2,-1)).toString().replace(/\0/g,""))},[Te](x){const m=x.buffer[2]&127|(x.buffer[3]&127)<<7,L=[x.buffer[4]&127|(x.buffer[5]&127)<<7,x.buffer[6]&127|(x.buffer[7]&127)<<7,x.buffer[8]&127|(x.buffer[9]&127)<<7,x.buffer[10]&127|(x.buffer[11]&127)<<7],N=(L[0]<<24)+(L[1]<<16)+(L[2]<<8)+L[3];x.emit(`ping-read-${m}`,N)},[H](x){const m=x.buffer[2];x.emit(`stepper-done-${m}`,!0)},[Se](x){const m=x.buffer[2],L=x.buffer[3],N=m===6||m===10?Et(x.buffer.slice(4,9)):null;m===6&&x.emit(`stepper-position-${L}`,N),m===10&&x.emit(`stepper-done-${L}`,N),m===36&&x.emit(`multi-stepper-done-${L}`)},[ee](x){const m=x.buffer[2]&F,L=x.buffer[2]&15,N=[];if(m===re){for(let Y=3,le=x.buffer.length;Y<le-1;Y+=2)N.push(x.buffer[Y+1]<<7|x.buffer[Y]);x.emit(`serial-data-${L}`,N)}}};let dt=null;class Ue extends t{constructor(m,L,N){super(),(typeof L=="function"||typeof L>"u")&&(N=L,L={});const Y=this,Ae=Object.assign({},{reportVersionTimeout:5e3,samplingInterval:19,serialport:{baudRate:57600,highWaterMark:256}},L);if(this.isReady=!1,this.MODES={INPUT:0,OUTPUT:1,ANALOG:2,PWM:3,SERVO:4,SHIFT:5,I2C:6,ONEWIRE:7,STEPPER:8,SERIAL:10,PULLUP:11,IGNORE:127,PING_READ:117,UNKOWN:16},this.I2C_MODES={WRITE:0,READ:1,CONTINUOUS_READ:2,STOP_READING:3},this.STEPPER={TYPE:{DRIVER:1,TWO_WIRE:2,THREE_WIRE:3,FOUR_WIRE:4},STEP_SIZE:{WHOLE:0,HALF:1},RUN_STATE:{STOP:0,ACCEL:1,DECEL:2,RUN:3},DIRECTION:{CCW:0,CW:1}},this.SERIAL_MODES={CONTINUOUS_READ:0,STOP_READING:1},this.SERIAL_PORT_IDs={HW_SERIAL0:0,HW_SERIAL1:1,HW_SERIAL2:2,HW_SERIAL3:3,SW_SERIAL0:8,SW_SERIAL1:9,SW_SERIAL2:16,SW_SERIAL3:17,DEFAULT:8},this.SERIAL_PIN_TYPES={RES_RX0:0,RES_TX0:1,RES_RX1:2,RES_TX1:3,RES_RX2:4,RES_TX2:5,RES_RX3:6,RES_TX3:7},this.RESOLUTION={ADC:null,DAC:null,PWM:null},this.HIGH=1,this.LOW=0,this.pins=[],this.ports=Array(16).fill(0),this.analogPins=[],this.version={},this.firmware={},this.buffer=[],this.versionReceived=!1,this.name="Firmata",this.settings=Ae,this.pending=0,this.digitalPortQueue=0,typeof m=="object")this.transport=m;else{if(!dt)throw new Error("Missing Default Transport");this.transport=new dt(m,Ae.serialport)}this.transport.on("close",Ge=>{if(Ge&&Ge.disconnect&&Ge.disconnected){this.emit("disconnect");return}this.emit("close")}),this.transport.on("open",Ge=>{this.emit("open",Ge),this.emit("connect",Ge)}),this.transport.on("error",Ge=>{!this.isReady&&typeof N=="function"?N(Ge):this.emit("error",Ge)}),this.transport.on("data",Ge=>{for(let Ye=0;Ye<Ge.length;Ye++){let He=Ge[Ye];if(!(this.buffer.length===0&&He===0)){this.buffer.push(He);let Je=this.buffer[0],St=this.buffer[this.buffer.length-1];if(Je===F&&St===_){let it=ut[this.buffer[1]];it&&this.versionReceived&&it(this),this.buffer.length=0}else if(Je===F&&this.buffer.length>0){let it=Ge[Ye];it>127&&(this.buffer.length=0,this.buffer.push(it))}else if(Je!==F){let it=Je<F?Je&F:Je;it!==pe&&it!==g&&it!==E&&(this.buffer.length=0)}if(this.buffer.length===3&&Je!==F){let it=Je<F?Je&F:Je;xe[it]?((this.versionReceived||Je===pe)&&(this.versionReceived=!0,xe[it](this)),this.buffer.length=0):this.buffer.length=0}}}}),this.reportVersionTimeoutId=setTimeout(()=>{this.versionReceived===!1&&(this.reportVersion(function(){}),this.queryFirmware(function(){}))},Ae.reportVersionTimeout);function Fe(){Y.isReady=!0,Y.emit("ready"),typeof N=="function"&&N()}this.once("reportversion",()=>{clearTimeout(this.reportVersionTimeoutId),this.versionReceived=!0,this.once("queryfirmware",()=>{if(L.samplingInterval!==void 0&&this.setSamplingInterval(L.samplingInterval),Ae.skipCapabilities){if(this.analogPins=Ae.analogPins||this.analogPins,this.pins=Ae.pins||this.pins,!this.pins.length)for(var Ge=0;Ge<(Ae.pinCount||Ne);Ge++){var Ye=[],He=this.analogPins.indexOf(Ge);He<0&&(He=127),this.pins.push({supportedModes:Ye,analogChannel:He})}this.RESOLUTION.ADC=1023,this.RESOLUTION.PWM=255,Fe()}else this.queryCapabilities(()=>{this.queryAnalogMapping(Fe)})})})}reportVersion(m){this.once("reportversion",m),me(this,[pe])}queryFirmware(m){this.once("queryfirmware",m),me(this,[F,he,_])}analogRead(m,L){this.reportAnalogPin(m,1),this.addListener(`analog-read-${m}`,L)}pwmWrite(m,L){let N;this.pins[m].value=L,m>15?(N=[F,p,m,L&127,L>>7&127],L>16384&&(N[N.length]=L>>14&127),L>2097152&&(N[N.length]=L>>21&127),L>268435456&&(N[N.length]=L>>28&127),N[N.length]=_):N=[g|m,L&127,L>>7&127],me(this,N)}servoConfig(m,L,N){if(typeof m=="object"&&m!==null){let Y=m;m=Y.pin,L=Y.min,N=Y.max}if(typeof m>"u")throw new Error("servoConfig: pin must be specified");if(typeof L>"u")throw new Error("servoConfig: min must be specified");if(typeof N>"u")throw new Error("servoConfig: max must be specified");this.pins[m].mode=this.MODES.SERVO,me(this,[F,Le,m,L&127,L>>7&127,N&127,N>>7&127,_])}servoWrite(...m){this.analogWrite(...m)}pinMode(m,L){L===this.MODES.ANALOG?this.pins[this.analogPins[m]].mode=L:(this.pins[m].mode=L,me(this,[ue,m,L]))}digitalWrite(m,L,N){let Y=this.updateDigitalPort(m,L);N?this.digitalPortQueue|=1<<Y:this.writeDigitalPort(Y)}updateDigitalPort(m,L){const N=m>>3,Y=1<<(m&7);return this.pins[m].value=L,L?this.ports[N]|=Y:this.ports[N]&=~Y,N}flushDigitalPorts(){for(let m=0;m<this.ports.length;m++)this.digitalPortQueue>>m&&this.writeDigitalPort(m);this.digitalPortQueue=0}writeDigitalPort(m){me(this,[E|m,this.ports[m]&127,this.ports[m]>>7&127])}digitalRead(m,L){this.reportDigitalPin(m,1),this.addListener(`digital-read-${m}`,L)}queryCapabilities(m){this.once("capability-query",m),me(this,[F,v,_])}queryAnalogMapping(m){this.once("analog-mapping-query",m),me(this,[F,h,_])}queryPinState(m,L){this.once(`pin-state-${m}`,L),me(this,[F,fe,m,_])}sendString(m){const L=Buffer.from(`${m}\0`,"utf8"),N=[];N.push(F,Me);for(let Y=0,le=L.length;Y<le;Y++)N.push(L[Y]&127,L[Y]>>7&127);N.push(_),me(this,N)}sendI2CConfig(m){return this.i2cConfig(m)}i2cConfig(m){let L=u.get(this),N;return L||(L={},u.set(this,L)),typeof m=="number"?N=m:typeof m=="object"&&m!==null&&(N=Number(m.delay),typeof m.address<"u"&&(L[m.address]||(L[m.address]={stopTX:!0})),typeof m.settings<"u"&&Object.assign(L[m.address],m.settings)),L.delay=N=N||0,De(this,[F,b,N&255,N>>8&255,_]),this}sendI2CWriteRequest(m,L){const N=[];L=L||[],N.push(F,P,m,this.I2C_MODES.WRITE<<3);for(let Y=0,le=L.length;Y<le;Y++)N.push(L[Y]&127,L[Y]>>7&127);N.push(_),De(this,N)}i2cWrite(m,L,N){const Y=[F,P,m,this.I2C_MODES.WRITE<<3];if(arguments.length===3&&!Array.isArray(L)&&!Array.isArray(N))return this.i2cWriteReg(m,L,N);arguments.length===2&&(Array.isArray(L)?(N=L.slice(),L=N.shift()):N=[]);const le=Buffer.from([L].concat(N));for(var Ae=0,Fe=le.length;Ae<Fe;Ae++)Y.push(le[Ae]&127,le[Ae]>>7&127);return Y.push(_),De(this,Y),this}i2cWriteReg(m,L,N){return De(this,[F,P,m,this.I2C_MODES.WRITE<<3,L&127,L>>7&127,N&127,N>>7&127,_]),this}sendI2CReadRequest(m,L,N){De(this,[F,P,m,this.I2C_MODES.READ<<3,L&127,L>>7&127,_]),this.once(`I2C-reply-${m}-0`,N)}i2cRead(m,L,N,Y){arguments.length===3&&typeof L=="number"&&typeof N=="function"&&(Y=N,N=L,L=null);const le=[F,P,m,this.I2C_MODES.CONTINUOUS_READ<<3];let Ae=`I2C-reply-${m}-`;return L!==null?le.push(L&127,L>>7&127):L=0,Ae+=L,le.push(N&127,N>>7&127,_),this.on(Ae,Y),De(this,le),this}i2cStop(m){m!=null&&(typeof m=="number"&&(m={address:m}),me(this,[F,P,m.address,this.I2C_MODES.STOP_READING<<3,_]),Object.keys(this._events).forEach(L=>{L.startsWith(`I2C-reply-${m.address}`)&&this.removeAllListeners(L)}))}i2cReadOnce(m,L,N,Y){arguments.length===3&&typeof L=="number"&&typeof N=="function"&&(Y=N,N=L,L=null);const le=[F,P,m,this.I2C_MODES.READ<<3];let Ae=`I2C-reply-${m}-`;return L!==null?le.push(L&127,L>>7&127):L=0,Ae+=L,le.push(N&127,N>>7&127,_),this.once(Ae,Y),De(this,le),this}sendOneWireConfig(m,L){me(this,[F,I,T,m,L?1:0,_])}sendOneWireSearch(m,L){this[ze](J,`1-wire-search-reply-${m}`,m,L)}sendOneWireAlarmsSearch(m,L){this[ze](k,`1-wire-search-alarms-reply-${m}`,m,L)}[ze](m,L,N,Y){me(this,[F,I,m,N,_]);const le=setTimeout(()=>{Y(new Error("1-Wire device search timeout - are you running ConfigurableFirmata?"))},5e3);this.once(L,Ae=>{clearTimeout(le),Y(null,Ae)})}sendOneWireRead(m,L,N,Y){const le=Math.floor(Math.random()*255),Ae=setTimeout(()=>{Y(new Error("1-Wire device read timeout - are you running ConfigurableFirmata?"))},5e3);this[Xe](m,W,L,N,le,null,null,`1-wire-read-reply-${le}`,Fe=>{clearTimeout(Ae),Y(null,Fe)})}sendOneWireReset(m){this[Xe](m,Z)}sendOneWireWrite(m,L,N){this[Xe](m,ie,L,null,null,null,Array.isArray(N)?N:[N])}sendOneWireDelay(m,L){this[Xe](m,M,null,null,null,L)}sendOneWireWriteAndRead(m,L,N,Y,le){const Ae=Math.floor(Math.random()*255),Fe=setTimeout(()=>{le(new Error("1-Wire device read timeout - are you running ConfigurableFirmata?"))},5e3);this[Xe](m,ie|W,L,Y,Ae,null,Array.isArray(N)?N:[N],`1-wire-read-reply-${Ae}`,Ge=>{clearTimeout(Fe),le(null,Ge)})}[Xe](m,L,N,Y,le,Ae,Fe,Ge,Ye){const He=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];(N||Y||le||Ae||Fe)&&(L=L|Q),N&&He.splice(...[0,8].concat(N)),Y&&(He[8]=Y&255,He[9]=Y>>8&255),le&&(He[10]=le&255,He[11]=le>>8&255),Ae&&(He[12]=Ae&255,He[13]=Ae>>8&255,He[14]=Ae>>16&255,He[15]=Ae>>24&255),Fe&&He.push(...Fe);const Je=[F,I,L,m,...s.to7BitArray(He),_];me(this,Je),Ge&&Ye&&this.once(Ge,Ye)}setSamplingInterval(m){const L=m<10?10:m>65535?65535:m;this.settings.samplingInterval=L,me(this,[F,Ie,L&127,L>>7&127,_])}getSamplingInterval(){return this.settings.samplingInterval}reportAnalogPin(m,L){(L===0||L===1)&&(this.pins[this.analogPins[m]].report=L,me(this,[ce|m,L]))}reportDigitalPin(m,L){const N=m>>3;(L===0||L===1)&&(this.pins[m].report=L,me(this,[Ce|N,L]))}pingRead(m,L){if(!this.pins[m.pin].supportedModes.includes(Te))throw new Error("Please upload PingFirmata to the board");const{pin:N,value:Y,pulseOut:le=0,timeout:Ae=1e6}=m;me(this,[F,Te,N,Y,...Ue.encode([le>>24&255,le>>16&255,le>>8&255,le&255]),...Ue.encode([Ae>>24&255,Ae>>16&255,Ae>>8&255,Ae&255]),_]),this.once(`ping-read-${N}`,L)}accelStepperConfig(m){let{deviceNum:L,invertPins:N,motorPin1:Y,motorPin2:le,motorPin3:Ae,motorPin4:Fe,enablePin:Ge,stepSize:Ye=this.STEPPER.STEP_SIZE.WHOLE,type:He=this.STEPPER.TYPE.FOUR_WIRE}=m;const Je=[F,Se,0,L];let St=(He&7)<<4|(Ye&7)<<1,it=0;typeof Ge<"u"&&(St=St|1),Je.push(St),["stepPin","motorPin1","directionPin","motorPin2","motorPin3","motorPin4","enablePin"].forEach(lr=>{typeof m[lr]<"u"&&Je.push(m[lr])}),Array.isArray(N)&&(N.includes(Y)&&(it|=1),N.includes(le)&&(it|=2),N.includes(Ae)&&(it|=4),N.includes(Fe)&&(it|=8),N.includes(Ge)&&(it|=16)),Je.push(it,_),me(this,Je)}accelStepperZero(m){me(this,[F,Se,1,m,_])}accelStepperStep(m,L,N){me(this,[F,Se,2,m,...Qe(L),_]),N&&this.once(`stepper-done-${m}`,N)}accelStepperTo(m,L,N){me(this,[F,Se,3,m,...Qe(L),_]),N&&this.once(`stepper-done-${m}`,N)}accelStepperEnable(m,L=!0){me(this,[F,Se,4,m,L&1,_])}accelStepperStop(m){me(this,[F,Se,5,m,_])}accelStepperReportPosition(m,L){me(this,[F,Se,6,m,_]),L&&this.once(`stepper-position-${m}`,L)}accelStepperAcceleration(m,L){me(this,[F,Se,8,m,...st(L),_])}accelStepperSpeed(m,L){me(this,[F,Se,9,m,...st(L),_])}multiStepperConfig(m){me(this,[F,Se,32,m.groupNum,...m.devices,_])}multiStepperTo(m,L,N){if(m<0||m>5)throw new RangeError(`Invalid "groupNum": ${m}. Expected "groupNum" between 0-5`);me(this,[F,Se,33,m,...L.reduce((Y,le)=>Y.concat(...Qe(le)),[]),_]),N&&this.once(`multi-stepper-done-${m}`,N)}multiStepperStop(m){if(m<0||m>5)throw new RangeError(`Invalid "groupNum": ${m}. Expected "groupNum" between 0-5`);me(this,[F,Se,35,m,_])}stepperConfig(m,L,N,Y,le,Ae,Fe){me(this,[F,H,0,m,L,N&127,N>>7&127,Y,le,...L===this.STEPPER.TYPE.FOUR_WIRE?[Ae,Fe]:[],_])}stepperStep(m,L,N,Y,le,Ae,Fe){typeof le=="function"&&(Fe=le,le=0,Ae=0),me(this,[F,H,1,m,L,N&127,N>>7&127,N>>14&127,Y&127,Y>>7&127,...le>0||Ae>0?[le&127,le>>7&127,Ae&127,Ae>>7&127]:[],_]),Fe&&this.once(`stepper-done-${m}`,Fe)}serialConfig(m){let L,N,Y,le;if(typeof m=="object"&&m!==null&&(L=m.portId,N=m.baud,Y=m.rxPin,le=m.txPin),typeof L>"u")throw new Error("portId must be specified, see SERIAL_PORT_IDs for options.");N=N||57600;const Ae=[F,ee,ae|L,N&127,N>>7&127,N>>14&127];if(L>7&&typeof Y<"u"&&typeof le<"u")Ae.push(Y,le);else if(L>7)throw new Error("Both RX and TX pins must be defined when using Software Serial.");Ae.push(_),me(this,Ae)}serialWrite(m,L){const N=[F,ee,de|m];for(let Y=0,le=L.length;Y<le;Y++)N.push(L[Y]&127,L[Y]>>7&127);N.push(_),L.length>0&&me(this,N)}serialRead(m,L,N){const Y=[F,ee,X|m,this.SERIAL_MODES.CONTINUOUS_READ];arguments.length===2&&typeof L=="function"?N=L:Y.push(L&127,L>>7&127),Y.push(_),me(this,Y),this.on(`serial-data-${m}`,N)}serialStop(m){me(this,[F,ee,X|m,this.SERIAL_MODES.STOP_READING,_]),this.removeAllListeners(`serial-data-${m}`)}serialClose(m){me(this,[F,ee,ge|m,_])}serialFlush(m){me(this,[F,ee,ye|m,_])}serialListen(m){m<8||me(this,[F,ee,Oe|m,_])}sysexResponse(m,L){if(Ue.SYSEX_RESPONSE[m])throw new Error(`${m} is not an available SYSEX_RESPONSE byte`);return Ue.SYSEX_RESPONSE[m]=N=>L.call(N,N.buffer.slice(2,-1)),this}clearSysexResponse(m){Ue.SYSEX_RESPONSE[m]&&delete Ue.SYSEX_RESPONSE[m]}sysexCommand(m){if(!m||!m.length)throw new Error("Sysex Command cannot be empty");return me(this,[F,...m.slice(),_]),this}reset(){me(this,[be])}static isAcceptablePort(m){return!!/usb|acm|^com/i.test(m.path)}static requestPort(m){if(!dt||dt&&typeof dt.list!="function"){process$1.nextTick(()=>{m(new Error("No Transport provided"),null)});return}dt.list().then(L=>{const N=L.find(Y=>Ue.isAcceptablePort(Y)&&Y);N?m(null,N):m(new Error("No Acceptable Port Found"),null)}).catch(L=>{m(L,null)})}static encode(m){const L=[],N=m.length;for(let Y=0;Y<N;Y++)L.push(m[Y]&127,m[Y]>>7&127);return L}static decode(m){const L=[];if(m.length%2!==0)throw new Error("Firmata.decode(data) called with odd number of data bytes");for(;m.length;){const N=m.shift(),Y=m.shift();L.push(N|Y<<7)}return L}}Ue.prototype.analogWrite=Ue.prototype.pwmWrite,Ue.Board=Ue,Ue.SYSEX_RESPONSE=ut,Ue.MIDI_RESPONSE=xe;function me(x,m){x.pending++,x.transport.write(Buffer.from(m),()=>x.pending--)}function De(x,m){const L=u.get(x);if(!L)throw new Error("I2C is not enabled for this board. To enable, call the i2cConfig() method.");if(m[1]===P){const N=m[2];L[N]||(L[N]={stopTX:!0}),m[3]&A&&(m[3]|=+!L[N].stopTX<<6)}me(x,m)}function Qe(x){const m=x<0;x=Math.abs(x);const L=[x&127,x>>7&127,x>>14&127,x>>21&127,x>>28&7];return m&&(L[L.length-1]|=8),L}function Et(x){let m=x[0]&127|(x[1]&127)<<7|(x[2]&127)<<14|(x[3]&127)<<21|(x[4]&7)<<28;return x[4]>>3&&(m*=-1),m}const Tt=Math.pow(2,23);function st(x){const m=x<0?1:0;x=Math.abs(x);const L=Math.floor(Math.log10(x));let N=0+L;for(x/=Math.pow(10,L);!Number.isInteger(x)&&x<Tt;)N-=1,x*=10;for(;x>Tt;)N+=1,x/=10;return x=Math.trunc(x),N+=11,[x&127,x>>7&127,x>>14&127,x>>21&3|(N&15)<<2|(m&1)<<6]}function Be(x){const m=(x[3]>>2&15)-11,L=x[3]>>6&1;let N=x[0]|x[1]<<7|x[2]<<14|(x[3]&3)<<21;return L&&(N*=-1),N*Math.pow(10,m)}if(n.IS_TEST_MODE){let x=null;Ue.test={i2cPeripheralSettings(m){return u.get(m)},get i2cActive(){return u},set transport(m){x=dt,dt=m},restoreTransport(){dt=x},encode32BitSignedInteger:Qe,decode32BitSignedInteger:Et,encodeCustomFloat:st,decodeCustomFloat:Be,writeToTransport:me,symbols:{SYM_sendOneWireRequest:Xe,SYM_sendOneWireSearch:ze}}}const G=function(x){return dt=x,Ue};return G.Firmata=Ue,firmata$1=G,firmata$1}var com_1,hasRequiredCom;function requireCom(){if(hasRequiredCom)return com_1;hasRequiredCom=1;var n={};const t=eventsExports;class s extends t{constructor(g){super(),this.isOpen=!0,this.baudRate=0,this.path=g}write(g){Buffer.isBuffer(g)&&(g=Array.from(g)),this.lastWrite=g,this.emit("write",g)}static list(){return Promise.resolve([])}}s.SerialPort=s;let o,u,h;try{n.IS_TEST_MODE?o=s:(h=requireLib(),o=h)}catch(f){u=f}if(o==null)if(n.IS_TEST_MODE)o=s;else throw console.log("It looks like serialport didn't install properly."),console.log("More information can be found here https://serialport.io/docs/guide-installation"),console.log(`The result of requiring the package is: ${h}`),console.log(u),"Missing serialport dependency";return com_1=o,com_1}var firmata,hasRequiredFirmata;function requireFirmata(){return hasRequiredFirmata||(hasRequiredFirmata=1,firmata=requireFirmata$1()(requireCom())),firmata}const sleep$1={micro(n){const t=process$1.hrtime();let s=0,o;for(;n>s;)o=process$1.hrtime(t),s=(o[0]*1e9+o[1])/1e3},milli(n){sleep$1.micro(n*1e3)}};var sleep_1=sleep$1,expander,hasRequiredExpander;function requireExpander(){if(hasRequiredExpander)return expander;hasRequiredExpander=1;var n={};const t=requireBoard(),s=emitter,o=sleep_1,u=fn,h=new Map,f=new Map;class g extends s{constructor(){super(),this.HIGH=1,this.LOW=0,this.isReady=!1,this.MODES={},this.pins=[],this.analogPins=[]}}const v={DEFAULT:{initialize:{value(){throw new Error("Expander expects a valid controller")}}},MCP23017:{ADDRESSES:{value:[32]},REGISTER:{value:{IODIRA:0,GPPUA:12,GPIOA:18,OLATA:20,IODIRB:1,GPPUB:13,GPIOB:19,OLATB:21}},initialize:{value(p){const b=h.get(this);b.iodir=[255,255],b.olat=[255,255],b.gpio=[255,255],b.gppu=[0,0],this.address=p.address||this.ADDRESSES[0],p.address=this.address,this.io.i2cConfig(p),this.io.i2cWrite(this.address,[this.REGISTER.IODIRA,b.iodir[this.REGISTER.IODIRA]]),this.io.i2cWrite(this.address,[this.REGISTER.IODIRB,b.iodir[this.REGISTER.IODIRB]]),Object.assign(this.MODES,this.io.MODES);for(let C=0;C<16;C++)this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:0,value:0,report:0,analogChannel:127}),this.pinMode(C,this.MODES.OUTPUT),this.digitalWrite(C,this.LOW);this.name="MCP23017",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(p){return p}},pinMode:{value(p,b){const C=h.get(this),P=p;let A=0,T=null;p<8?A=this.REGISTER.IODIRA:(A=this.REGISTER.IODIRB,p-=8),T=C.iodir[A],b===this.io.MODES.INPUT?T|=1<<p:T&=~(1<<p),this.pins[P].mode=b,this.io.i2cWrite(this.address,[A,T]),C.iodir[A]=T}},digitalWrite:{value(p,b){const C=h.get(this),P=p;let A=0,T=0,I=0;p<8?(A=this.REGISTER.IODIRA,I=this.REGISTER.GPIOA):(A=this.REGISTER.IODIRB,I=this.REGISTER.GPIOB,p-=8),T=C.olat[A],b===this.io.HIGH?T|=1<<p:T&=~(1<<p),this.pins[P].report=0,this.pins[P].value=b,this.io.i2cWrite(this.address,[I,T]),C.olat[A]=T,C.gpio[A]=T}},pullUp:{value(p,b){const C=h.get(this);let P=0,A=0,T=0;p<8?(P=this.REGISTER.IODIRA,T=this.REGISTER.GPPUA):(P=this.REGISTER.IODIRB,T=this.REGISTER.GPPUB,p-=8),A=C.gppu[P],b===this.io.HIGH?A|=1<<p:A&=~(1<<p),this.io.i2cWrite(this.address,[T,A]),C.gppu[P]=A}},digitalRead:{value(p,b){const C=p;let P=0;p<8?P=this.REGISTER.GPIOA:(P=this.REGISTER.GPIOB,p-=8),this.pins[C].report=1,this.on(`digital-read-${C}`,b),this.io.i2cRead(this.address,P,1,A=>{const I=A[0]>>p&1;this.pins[C].value=I,this.emit(`digital-read-${C}`,I)})}}},MCP23008:{ADDRESSES:{value:[32]},REGISTER:{value:{IODIR:0,GPPU:6,GPIO:9,OLAT:10}},initialize:{value(p){const b=h.get(this);b.iodir=[255],b.olat=[255],b.gpio=[255],b.gppu=[0],this.address=p.address||this.ADDRESSES[0],p.address=this.address,this.io.i2cConfig(p),this.io.i2cWrite(this.address,[this.REGISTER.IODIR,b.iodir[this.REGISTER.IODIR]]),Object.assign(this.MODES,this.io.MODES);for(let C=0;C<8;C++)this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:0,value:0,report:0,analogChannel:127}),this.pinMode(C,this.MODES.OUTPUT),this.digitalWrite(C,this.LOW);this.name="MCP23008",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(p){return p}},pinMode:{value(p,b){const C=h.get(this),P=p,A=this.REGISTER.IODIR;let T=C.iodir[A];b===this.io.MODES.INPUT?T|=1<<p:T&=~(1<<p),this.pins[P].mode=b,this.io.i2cWrite(this.address,[A,T]),C.iodir[A]=T}},digitalWrite:{value(p,b){const C=h.get(this),P=p,A=this.REGISTER.IODIR,T=this.REGISTER.GPIO;let I=C.olat[A];b===this.io.HIGH?I|=1<<p:I&=~(1<<p),this.pins[P].report=0,this.pins[P].value=b,this.io.i2cWrite(this.address,[T,I]),C.olat[A]=I,C.gpio[A]=I}},pullUp:{value(p,b){const C=h.get(this),P=this.REGISTER.IODIR,A=this.REGISTER.GPPU;let T=C.gppu[P];b===this.io.HIGH?T|=1<<p:T&=~(1<<p),this.io.i2cWrite(this.address,[A,T]),C.gppu[P]=T}},digitalRead:{value(p,b){const C=p,P=this.REGISTER.GPIO;this.pins[C].report=1,this.on(`digital-read-${p}`,b),this.io.i2cRead(this.address,P,1,A=>{const I=A[0]>>p&1;this.pins[C].value=I,this.emit(`digital-read-${p}`,I)})}}},PCF8574:{ADDRESSES:{value:[32]},REGISTER:{},initialize:{value(p){const b=h.get(this);b.port=0,b.ddr=0,b.pins=0,this.address=p.address||this.ADDRESSES[0],p.address=this.address,this.io.i2cConfig(p),Object.assign(this.MODES,this.io.MODES);for(let C=0;C<8;C++)this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:1,value:0,report:0,analogChannel:127}),this.pinMode(C,this.MODES.OUTPUT),this.digitalWrite(C,this.LOW);this.name="PCF8574",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(p){return p}},pinMode:{value(p,b){const C=h.get(this),P=p;let A=C.port,T=C.ddr;const I=C.pins;b===this.MODES.INPUT?(T&=~(1<<p),A&=~(1<<p)):(T|=1<<p,A&=~(1<<p)),this.pins[P].mode=b,C.port=A,C.ddr=T,this.io.i2cWrite(this.address,I&~T|A)}},digitalWrite:{value(p,b){const C=h.get(this),P=p;let A=C.port;const T=C.ddr,I=C.pins;b?A|=1<<p:A&=~(1<<p),this.pins[P].report=0,this.pins[P].value=b,C.port=A,this.io.i2cWrite(this.address,I&~T|A)}},digitalRead:{value(p,b){const C=h.get(this),P=p;this.pins[P].report=1,this.on(`digital-read-${p}`,b),this.io.i2cRead(this.address,1,A=>{const T=A[0],I=T>>p&1;C.pins=T,this.pins[P].value=I,this.emit(`digital-read-${p}`,I)})}}},PCF8575:{ADDRESSES:{value:[32]},REGISTER:{},initialize:{value(p){const b=h.get(this);b.port=[0,1],b.gpio=[0,0],this.address=p.address||this.ADDRESSES[0],p.address=this.address,this.io.i2cConfig(p),Object.assign(this.MODES,this.io.MODES);for(let C=0;C<16;C++)this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:1,value:0,report:0,analogChannel:127}),this.pinMode(C,this.MODES.OUTPUT),this.digitalWrite(C,this.LOW);this.io.i2cWrite(this.address,b.gpio),this.name="PCF8575",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(p){return p}},pinMode:{value(p,b){const C=p;this.pins[C].mode=b}},digitalWrite:{value(p,b){const C=h.get(this),P=p;let A;p<8?A=0:(A=1,p-=8),b===this.io.HIGH?C.gpio[A]|=1<<p:C.gpio[A]&=~(1<<p),this.pins[P].report=0,this.pins[P].value=b,this.io.i2cWrite(this.address,C.gpio)}},digitalRead:{value(p,b){const C=p;let P;p<8?P=0:(P=1,p-=8),this.pins[C].report=1,this.on(`digital-read-${p}`,b),this.io.i2cRead(this.address,2,A=>{const I=A[P]>>p&1;this.pins[C].value=I,this.emit(`digital-read-${p}`,I)})}}},PCA9685:{ADDRESSES:{value:[64]},REGISTER:{value:{MODE1:0,PRESCALE:254,BASE:6}},initialize:{value(p){const b=h.get(this);b.frequency=u.constrain(p.frequency||1526,24,1526),this.address=p.address||this.ADDRESSES[0],this.pwmRange=p.pwmRange||[0,4095],Object.defineProperties(this,{prescale:{get(){return Math.round(25e6/(4096*b.frequency))-1}},frequency:{get(){return b.frequency}}}),p.address=this.address,this.io.i2cConfig(p),this.io.i2cWriteReg(this.address,this.REGISTER.MODE1,0),this.io.i2cWriteReg(this.address,this.REGISTER.MODE1,16),this.io.i2cWriteReg(this.address,this.REGISTER.PRESCALE,this.prescale),this.io.i2cWriteReg(this.address,this.REGISTER.MODE1,0),o.micro(5),this.io.i2cWriteReg(this.address,this.REGISTER.MODE1,160),Object.assign(this.MODES,this.io.MODES);for(let C=0;C<16;C++)this.pins.push({supportedModes:[this.MODES.OUTPUT,this.MODES.PWM,this.MODES.SERVO],mode:0,value:0,report:0,analogChannel:127}),this.pinMode(C,this.MODES.OUTPUT),this.digitalWrite(C,this.LOW);this.name="PCA9685",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(p){return this.io.name.includes("Tessel 2")?p-1:p}},pinMode:{value(p,b){if(this.pins[p]===void 0)throw new RangeError(`Invalid PCA9685 pin: ${p}`);this.pins[p].mode=b}},digitalWrite:{value(p,b){this.pwmWrite(p,b?255:0)}},analogWrite:{value(p,b){this.pwmWrite(p,b)}},servoWrite:{value(p,b){let C;b<544?(b=u.constrain(b,0,180),C=u.map(b,0,180,this.pwmRange[0]/4,this.pwmRange[1]/4)):C=b/4,C|=0,this.io.i2cWrite(this.address,[this.REGISTER.BASE+4*p,0,0,C,C>>8])}},pwmWrite:{value(p,b){if(this.pins[p]===void 0)throw new RangeError(`Invalid PCA9685 pin: ${p}`);b=u.constrain(b,0,255);let C=0,P=this.pwmRange[1]*b/255;b===0&&(C=0,P=4096),b===255&&(C=4096,P=0),this.io.i2cWrite(this.address,[this.REGISTER.BASE+4*p,C,C>>8,P,P>>8]),this.pins[p].value=b}}},PCF8591:{ADDRESSES:{value:[72]},REGISTER:{},initialize:{value(p){const b=h.get(this);b.control=69,b.reading=!1,this.address=p.address||this.ADDRESSES[0],p.address=this.address,this.io.i2cConfig(p),Object.assign(this.MODES,this.io.MODES);for(let C=0;C<4;C++)this.pins.push({supportedModes:[this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:C});this.analogPins.push(0,1,2,3),this.io.i2cWrite(this.address,b.control),this.name="PCF8591",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(p){return typeof p=="string"&&p[0]==="A"?+p.slice(1):p}},pinMode:{value(p,b){this.pins[p].mode=b}},analogRead:{value(p,b){const C=h.get(this),P=p;this.pins[P].report=1,this.on(`analog-read-${p}`,b),C.reading||(C.reading=!0,this.io.i2cRead(this.address,4,A=>{let T;for(let I=0;I<4;I++)T=A[I]<<2,this.pins[I].value=T,this.pins[I].report&&this.emit(`analog-read-${I}`,T)}))}}},MUXSHIELD2:{initialize:{value(){const p=h.get(this);p.select=[2,4,6,7],p.ios=[null,10,11,12],p.io=[null,14,15,16],p.aio=[null,0,1,2],p.outMode=8,p.pinMap={},p.rowReading=[!1,!1,!1],p.rowMode=[null,null,null],p.rowValues=[0,0,0],Object.assign(this.MODES,{INPUT:0,OUTPUT:1,ANALOG:2}),this.io.pinMode(p.select[0],this.MODES.OUTPUT),this.io.pinMode(p.select[1],this.MODES.OUTPUT),this.io.pinMode(p.select[2],this.MODES.OUTPUT),this.io.pinMode(p.select[3],this.MODES.OUTPUT),this.io.pinMode(p.outMode,this.MODES.OUTPUT),this.io.digitalWrite(p.outMode,this.LOW),this.io.pinMode(p.ios[1],this.MODES.OUTPUT),this.io.pinMode(p.ios[2],this.MODES.OUTPUT),this.io.pinMode(p.ios[3],this.MODES.OUTPUT);let b=1,C=16,P=0;for(let A=0;A<48;A++)(A&C)===C&&(b++,C*=2,P=0),p.pinMap[`IO${b}-${P}`]=A,this.pins.push({row:b,index:P,supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT,this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:A}),this.analogPins.push(A),P++;this.name="MUXSHIELD2",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(p){return p}},pinMode:{value(p,b){const C=h.get(this),P=C.pinMap[p];if(P===void 0)throw new Error(`MUXSHIELD2: Invalid Pin number or name: ${p}`);const A=this.pins[P].row,T=A-1,I=C.rowMode[T];if(I===b)return this;if(I!==null&&I!==b)throw new Error("MUXSHIELD2: Cannot set mixed modes per IO row.");C.rowMode[T]=b;for(let W=0;W<16;W++)this.pins[T+W].mode=b;const M=C.io[A],j=C.ios[A];b===this.MODES.INPUT&&this.io.pinMode(M,this.MODES.INPUT),b===this.MODES.OUTPUT&&(this.io.pinMode(M,this.MODES.OUTPUT),this.io.digitalWrite(j,this.HIGH))}},digitalWrite:{value(p,b){const C=h.get(this),P=C.pinMap[p];if(P===void 0)throw new Error(`MUXSHIELD2: Invalid Pin number or name: ${p}`);const A=this.pins[P].row,T=A-1;let I=C.rowValues[T];const j=(A-1)*16,W=P-j;b?I|=1<<W:I&=~(1<<W),this.io.digitalWrite(C.select[3],this.LOW),this.io.digitalWrite(C.outMode,this.HIGH);const Z=C.select[A-1],oe=C.io[A];for(let k=15;k>=0;k--)this.io.digitalWrite(Z,this.LOW),this.io.digitalWrite(oe,I>>k&1),this.io.digitalWrite(Z,this.HIGH);this.io.digitalWrite(C.select[3],this.HIGH),this.io.digitalWrite(C.outMode,this.LOW),this.pins[P].value=b,C.rowValues[T]=I}},digitalRead:{value(p,b){this.ioRead("digital",p,b)}},analogRead:{value(p,b){this.ioRead("analog",p,b)}},ioRead:{value(p,b,C){const P=h.get(this),A=P.pinMap[b];if(A===void 0)throw new Error(`MUXSHIELD2: Invalid Pin number or name: ${b}`);this.on(`${p}-read-${A}`,C);const T=p==="analog",M=this.pins[A].row-1,j=M*16,W=A-j;this.pins[A].report=1,this.pins[A].channel=W,this.pins[A].ioPin=T?M:M+14;const Z=()=>{const K=Z.lastPinIndex+1;for(let J=K;J<this.pins.length;J++)if(this.pins[J].report===1)return Z.lastPinIndex=J,Z.lastPinIndex;return Z.lastPinIndex=-1,Z()};Z.lastPinIndex=-1;const oe=K=>{const J=Z.lastPinIndex,Q=this.pins[J];this.emit(`${p}-read-${J}`,K),this.io.removeListener(`${p}-read-${Q.ioPin}`,oe),setTimeout(k,10)};var k=()=>{const K=Z(),J=this.pins[K];this.select(J.channel),T?(this.io.pinMode(J.ioPin,this.io.MODES.ANALOG),this.io.analogRead(J.ioPin,oe)):this.io.digitalRead(J.ioPin,oe)};P.rowReading[M]||(P.rowReading[M]=!0,k())}},select:{value(p){const b=h.get(this);this.io.digitalWrite(b.outMode,this.LOW),this.io.digitalWrite(b.select[0],p&1),this.io.digitalWrite(b.select[1],(p&3)>>1),this.io.digitalWrite(b.select[2],(p&7)>>2),this.io.digitalWrite(b.select[3],(p&15)>>3)}}},GROVEPI:{ADDRESSES:{value:[4]},REGISTER:{},COMMANDS:{value:{DIGITAL_READ:1,DIGITAL_WRITE:2,ANALOG_READ:3,ANALOG_WRITE:4,PIN_MODE:5,PING_READ:7}},initialize:{value(p){const b=h.get(this);b.isReading=!1,b.pinMap={D2:2,D3:3,D4:4,D5:5,D6:6,D7:7,D8:8,A0:14,A1:15,A2:16},this.isPwm=P=>{const A=typeof P=="number"?P:parseInt(P[1]);return A===3||A===5||A===6},this.address=p.address||this.ADDRESSES[0],p.address=this.address,this.io.i2cConfig(p),Object.assign(this.MODES,this.io.MODES);let C;for(let P=0;P<17;P++)C=127,P<=1||P>=9&&P<14?this.pins.push({supportedModes:[],mode:0,value:0,report:0,analogChannel:C}):(this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:0,value:0,report:0,analogChannel:C}),this.isPwm(P)&&this.pins[P].supportedModes.push(this.MODES.PWM),P>=14&&P<=17?(this.pins[P].analogChannel=P-14,this.pins[P].supportedModes.push(this.MODES.ANALOG),this.analogPins.push(P),this.pinMode(`A${this.pins[P].analogChannel}`,this.MODES.ANALOG)):(this.pinMode(`D${P}`,this.MODES.OUTPUT),this.digitalWrite(`D${P}`,this.LOW)));this.name="GROVEPI",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(p){return p}},pinMode:{value(p,b){const P=h.get(this).pinMap[p];b===this.io.MODES.INPUT||b===this.io.MODES.ANALOG?this.pins[P].mode=0:this.pins[P].mode=1,this.io.i2cWrite(this.address,[this.COMMANDS.PIN_MODE,P,this.pins[P].mode,0])}},digitalWrite:{value(p,b){const P=h.get(this).pinMap[p];b=b?1:0,this.io.i2cWrite(this.address,[this.COMMANDS.DIGITAL_WRITE,P,b,0]),this.pins[P].value=b}},ioRead:{value(p,b,C){const P=h.get(this),A=P.pinMap[p],T=b==="analog",I=T?3:1,M=T?this.COMMANDS.ANALOG_READ:this.COMMANDS.DIGITAL_READ;this.on(`${b}-read-${A}`,C),this.pins[A].report=1,this.pins[A].command=M,this.pins[A].type=b,this.pins[A].length=I;const j=()=>{const oe=j.lastPinIndex+1;for(let k=oe;k<this.pins.length;k++)if(this.pins[k].report===1)return j.lastPinIndex=k,j.lastPinIndex;return j.lastPinIndex=-1,j()};j.lastPinIndex=-1;const W=(oe,k)=>{const K=this.pins[oe];let J=!0;K.type==="digital"&&this.pins[oe].value===k&&(J=!1),this.pins[oe].value=k,J&&this.emit(`${K.type}-read-${oe}`,k),setTimeout(Z,1)};var Z=()=>{const oe=j(),k=this.pins[oe],K=k.type==="analog";this.io.i2cWrite(this.address,[k.command,oe,0,0]),this.io.i2cReadOnce(this.address,k.length,J=>{let Q;K?Q=(J[1]<<8)+J[2]:Q=J[0],W(oe,Q)})};P.isReading||(P.isReading=!0,Z())}},digitalRead:{value(p,b){this.ioRead(p,"digital",b)}},analogRead:{value(p,b){this.ioRead(p,"analog",b)}},pingRead:{value({pin:p},b){const P=h.get(this).pinMap[p];this.io.i2cWrite(this.address,[this.COMMANDS.PING_READ,P,0,0]),setTimeout(()=>{this.once(`ping-read-${p}`,b),this.io.i2cReadOnce(this.address,3,A=>{const T=Math.round(((A[1]<<8)+A[2])*29*2);this.pins[P].value=T,this.emit(`ping-read-${p}`,T)})},200)}},analogWrite:{value(p,b){this.pwmWrite(p,b)}},pwmWrite:{writable:!0,value(p,b){const P=h.get(this).pinMap[p];b=u.constrain(b,0,255),this.io.i2cWrite(this.address,[this.COMMANDS.ANALOG_WRITE,P,b,0]),this.pins[P].value=b}}},"74HC595":{initialize:{value({pins:p}){const b=h.get(this);if(!p.data)throw new Error("Expected pins.data");if(!p.clock)throw new Error("Expected pins.clock");if(!p.latch)throw new Error("Expected pins.latch");b.data=p.data,b.clock=p.clock,b.latch=p.latch,b.value=0,Object.assign(this.MODES,this.io.MODES),this.pins=[];for(let C=0;C<8;C++)this.pins.push({supportedModes:[this.MODES.OUTPUT],mode:1,value:0,report:0,analogChannel:127});this.portWrite(0,b.value),this.name="74HC595",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(p){return p}},pinMode:{value(p,b){this.pins[p].mode=b}},digitalWrite:{value(p,b){const C=h.get(this);b?C.value|=1<<p:C.value&=~(1<<p),this.pins[p].value=b,this.portWrite(0,C.value)}},portWrite:{writable:!0,configurable:!0,value(p,b){const C=h.get(this);C.value=b,this.board.digitalWrite(C.latch,this.io.LOW),this.board.shiftOut(C.data,C.clock,!0,C.value),this.board.digitalWrite(C.latch,this.io.HIGH);for(let P=0;P<8;P++)this.pins[P].value=C.value>>P&1}}},CD74HC4067:{ADDRESSES:{value:[10,11,12,13]},REGISTER:{},initialize:{value(p){const b=h.get(this);b.reading=!1,this.address=p.address||this.ADDRESSES[0],p.address=this.address,this.io.i2cConfig(p),Object.assign(this.MODES,this.io.MODES);for(let C=0;C<16;C++)this.pins.push({supportedModes:[this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:C}),this.analogPins.push(C);this.name="CD74HC4067",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(p){return typeof p=="string"&&p[0]==="A"?+p.slice(1):p}},pinMode:{value(p,b){this.pins[p].mode=b}},analogRead:{value(p,b){const C=h.get(this),P=p;this.pins[P].report=1,this.on(`analog-read-${p}`,b),this.io.i2cWrite(this.address,P,1),C.reading||(C.reading=!0,this.io.i2cRead(this.address,32,A=>{let T;for(let I=0;I<16;I++){const M=I*2;T=(A[M]<<8)+A[M+1],this.pins[I].value=T,this.pins[I].report&&this.emit(`analog-read-${I}`,T)}}))}}},LIS3DH:{ADDRESSES:{value:[24]},REGISTER:{value:{OUT_ADC1_L:8,OUT_X_L:40,CTRL_REG1:32,CTRL_REG2:33,CTRL_REG3:34,CTRL_REG4:35,CTRL_REG5:36,TEMP_CFG_REG:31}},initialize:{value(p){const b=h.get(this);b.reading=!1,this.address=p.address||this.ADDRESSES[0],p.address=this.address,this.io.i2cConfig(p);let C=7;C=C&-241|112,this.io.i2cWrite(this.address,this.REGISTER.CTRL_REG1,C),this.io.i2cWrite(this.address,this.REGISTER.CTRL_REG4,136),this.io.i2cWrite(this.address,this.REGISTER.CTRL_REG3,16),Object.assign(this.MODES,this.io.MODES);for(let P=0;P<4;P++)P===0?this.pins.push({supportedModes:[],mode:0,value:0,report:0,analogChannel:127}):(this.pins.push({supportedModes:[this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:P}),this.analogPins.push(P));this.name="LIS3DH",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(p){return typeof p=="string"&&p[0]==="A"?+p.slice(1):p}},pinMode:{value(p,b){this.pins[p].mode=b}},analogRead:{value(p,b){const C=h.get(this),P=p;this.pins[P].report=1,this.on(`analog-read-${p}`,b),C.reading||(C.reading=!0,this.io.i2cWrite(this.address,this.REGISTER.TEMP_CFG_REG,128),this.io.i2cRead(this.address,this.REGISTER.OUT_ADC1_L|128,6,A=>{this.pins[1].value=u.scale(u.int16(A[1],A[0]),-32512,32512,1023,0),this.pins[2].value=u.scale(u.int16(A[3],A[2]),-32512,32512,1023,0),this.pins[3].value=u.scale(u.int16(A[5],A[4]),-32512,32512,1023,0);for(let T=1;T<4;T++)this.pins[T].report&&this.emit(`analog-read-${T}`,this.pins[T].value)}))}},i2cConfig:{value(...p){return this.io.i2cConfig.apply(this.io,p)}},i2cWrite:{value(...p){return this.io.i2cWrite.apply(this.io,p)}},i2cWriteReg:{value(...p){return this.io.i2cWriteReg.apply(this.io,p)}},i2cRead:{value(...p){return this.io.i2cRead.apply(this.io,p)}},i2cReadOnce:{value(...p){return this.io.i2cReadOnce.apply(this.io,p)}}},ADS1115:{ADDRESSES:{value:[72,73,74,75]},REGISTER:{value:{CONFIG:1,READ:0,PIN:[193,209,225,241],PIN_DATA:131}},initialize:{value(p){const b=h.get(this);b.reading=!1,this.address=p.address||this.ADDRESSES[0],p.address=this.address,this.io.i2cConfig(p),Object.assign(this.MODES,this.io.MODES);for(let C=0;C<4;C++)this.pins.push({supportedModes:[this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:C}),this.analogPins.push(C);this.name="ADS1115",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(p){return typeof p=="string"&&p[0]==="A"?+p.slice(1):p}},pinMode:{value(p,b){this.pins[p].mode=b}},analogRead:{value(p,b){const C=h.get(this);this.pins[p].report=1;let P=!1;if(this.on(`analog-read-${p}`,b),!C.reading){C.reading=!0;const A=()=>{setTimeout(()=>{P=!0},8)};this.io.i2cWrite(this.address,this.REGISTER.CONFIG,[this.REGISTER.PIN[p],this.REGISTER.PIN_DATA]),A(),this.io.i2cRead(this.address,this.REGISTER.READ,2,T=>{if(P){P=!1;const I=p===this.pins.length-1?0:p+1;this.io.i2cWrite(this.address,this.REGISTER.CONFIG,[this.REGISTER.PIN[I],this.REGISTER.PIN_DATA]);const M=(T[0]<<8)+T[1];this.pins[p].value=M,this.pins[p].report&&this.emit(`analog-read-${p}`,M),p=I,A()}})}}}}};v.CD74HCT4067=v.CD74HC4067,v["74HC4067"]=v.CD74HC4067,v.PCF8574A=Object.assign({},v.PCF8574,{ADDRESSES:{value:[56]}});const O=Object.keys(t.prototype);Object.keys(v).forEach(p=>{O.forEach(b=>{v[p][b]===void 0&&(v[p][b]={writable:!0,configurable:!0,value(){throw new Error(`Expander:${p} does not support ${b}`)}})})});const E=["74HC595"];class _ extends g{constructor(b){super();let C="Expander cannot reuse an active address",P=null,A;if(typeof b=="string"&&(A=b),t.Component.call(this,b=t.Options(b),{normalizePin:!1,requestPin:!1}),E.includes(b.controller)&&typeof this.address>"u"&&(this.address=u.uid()),P=f.get(this.address),P)throw this.bus&&P.bus!==void 0&&P.bus===this.bus&&(C+=" on this bus"),new Error(C);typeof b.controller>"u"&&A&&(b.controller=A),t.Controller.call(this,v,b),h.set(this,{}),typeof this.initialize=="function"&&this.initialize(b),f.set(this.address,this)}}return _.get=p=>{if(!p.address||!p.controller)throw new Error("Expander.get(...) requires an address and controller");if(p.address!==void 0&&(p.address=Number(p.address)),Number.isNaN(p.address))throw new Error("Expander.get(...) expects address to be a number");if(typeof p.controller!="string")throw new Error("Expander.get(...) expects controller name to be a string");const b=f.get(p.address);return b&&b.name===p.controller.toUpperCase()?b:new _(p)},_.byAddress=p=>f.get(p),_.byController=p=>{let b=null;return f.forEach(C=>{C.name===p.toUpperCase()&&(b=C)}),b},_.hasController=p=>v[p]!==void 0,n.IS_TEST_MODE&&(_.Controllers=v,_.purge=()=>{h.clear(),f.clear()}),expander=_,expander}var board,hasRequiredBoard;function requireBoard(){if(hasRequiredBoard)return board;hasRequiredBoard=1;var n={};const t=emitter,s=chalkExports,o=collection,u=fn,h=repl_1,f=board_options,g=board_pins;let v=!!n.IS_TEST_MODE,O;const E=[],_=/usb|acm|^com/i,p="undefined",b={used:[],attempts:[],detect(I){let W;parseFloat(process$1.versions.nw)>=.13?W=requireBrowserSerialport():W=requireLib(),W.list().then(Z=>{const oe=Z.reduce((k,K)=>{let J=!0;return _.test(K.path)||(J=!1),b.used.includes(K.path)&&(J=!1),J&&k.push(K.path),k},[]);if(!oe.length){if(v&&this.abort)return;if(b.attempts[b.used.length]||(b.attempts[b.used.length]=0,this.info("Board","Looking for connected device")),b.attempts[b.used.length]++,b.attempts[b.used.length]>10){this.fail("Board","No connected device found");return}setTimeout(()=>{b.detect.call(this,I)},400);return}this.info("Available",s.grey(oe)),I.call(this,oe[0])})},connect(I,M){const j=requireFirmata().Board;let W=null,Z,oe,k,K;typeof I=="object"&&I.path?(k=I.path,this.info(I.transport||"SerialPort",s.grey(k))):k=I,b.used.push(k);try{Z=new j(I,J=>{J&&(W=J),M.call(this,W,W?"error":"ready",Z)}),Z.name="Firmata",Z.defaultLed=13,Z.port=k,oe=!0}catch(J){W=J}W&&(W=W.message||W),K=oe?"connect":"error",M.call(this,W,K,Z)}};class C extends t{constructor(M={}){super();const j={};let W=!1;Object.assign(this,M),this.timer=null,this.isConnected=!1,this.isReady=!1,this.io=this.io||null,this.register=[],this.occupied=[],this.Drivers={},this.id||(this.id=u.uid()),typeof this.debug===p&&(this.debug=!0),typeof this.repl===p&&(this.repl=!0),typeof this.sigint===p&&(this.sigint=!0),this.pins=null,this.repl&&(h.ref?(j[this.id]=this,h.ref.on("ready",function(){h.ref.inject(j)}),this.repl=h.ref):(j[this.id]=j.board=this,this.repl=new h(j))),M.io?(this.io=M.io,this.isReady=M.io.isReady,this.transport=this.io.transport||null,this.port=this.io.name,this.pins=C.Pins(this),this.RESOLUTION=Object.assign({ADC:1023,DAC:null,PWM:255},this.io.RESOLUTION||{})):this.port&&M.port?b.connect.call(this,this.port,P):b.detect.call(this,function(Z){b.connect.call(this,Z,P)}),!M.port&&this.io!==null&&(this.info("Available",s.grey(this.io.name||"unknown")),["connect","ready"].forEach(Z=>{this.io.once(Z,()=>{Z==="ready"&&!this.isConnected?W=!0:P.call(this,null,Z,this.io),Z==="connect"&&W&&P.call(this,null,"ready",this.io)}),this.io.isReady&&process$1.nextTick(()=>this.io.emit(Z))})),this.once("ready",()=>{const Z=process$1.hrtime();this.millis=function(){return process$1.hrtime(Z)[1]/1e6},["close","disconnect","error","string"].forEach(oe=>{this.io.on(oe,k=>this.emit(oe,k))})}),E.push(this)}}function P(I,M,j){let W=!1;this.io||(this.io=j),M==="error"&&I&&I.message&&(W=!0,this.error("Error",I.message)),M==="connect"&&(this.isConnected=!0,this.port=j.port||j.name,this.info("Connected",s.grey(this.port)),v||(this.timer=setTimeout(()=>{this.error("Device or Firmware Error",`A timeout occurred while connecting to the Board. 

Please check that you've properly flashed the board with the correct firmware.
See: https://github.com/rwaldron/johnny-five/wiki/Getting-Started#trouble-shooting

If connecting to a Leonardo or Leonardo clone, press the 'Reset' button on the board, wait approximately 11 seconds for complete reset, then run your program again.`),this.emit("error",new Error("A timeout occurred while connecting to the Board."))},this.timeout||1e4))),M==="ready"&&(this.timer&&clearTimeout(this.timer),this.isReady=!0,this.pins=C.Pins(this),this.MODES=this.io.MODES,typeof j.debug!==p&&j.debug===!1&&(this.debug=!1),typeof j.repl!==p&&j.repl===!1&&(this.repl=!1),this.repl&&this.repl.initialize(()=>this.emit("ready")),j.name!=="Mock"&&this.sigint&&process$1.on("SIGINT",()=>{this.emit("exit"),this.warn("Board","Closing.");const oe=setTimeout(()=>{process$1.reallyExit()},1e3),k=setInterval(()=>{this.io.pending||(clearInterval(k),clearTimeout(oe),process$1.nextTick(process$1.reallyExit))},1)}),this.RESOLUTION=Object.assign({ADC:1023,DAC:null,PWM:255},j.RESOLUTION||{})),this.repl?M==="connect"&&this.emit(M,I):W||this.emit(M,I)}["digitalWrite","analogWrite","analogRead","digitalRead","pinMode","queryPinState","stepperConfig","stepperStep","sendI2CConfig","sendI2CWriteRequest","sendI2CReadRequest","i2cConfig","i2cWrite","i2cWriteReg","i2cRead","i2cReadOnce","pwmWrite","servoConfig","servoWrite","sysexCommand","sysexResponse","serialConfig","serialWrite","serialRead","serialStop","serialClose","serialFlush","serialListen"].forEach(function(I){C.prototype[I]=function(){return this.io[I].apply(this.io,arguments),this}}),C.prototype.snapshot=function(I){const M=this.snapshot.blacklist,j=this.snapshot.special,W=typeof I=="function";return this.register.reduce((Z,oe)=>(typeof oe.components===p&&Z.push(Object.getOwnPropertyNames(oe).reduce((k,K)=>{const J=oe[K];if(!M.includes(K)&&typeof J!="function")if(W){const Q=I(K,J,oe);Q!==void 0&&(k[K]=Q)}else k[K]=j[K]?j[K](J):J;return k},Object.create(null))),Z),[])},C.prototype.serialize=function(I){return JSON.stringify(this.snapshot(I))},C.prototype.snapshot.blacklist=["board","io","_events","_eventsCount","state"],C.prototype.samplingInterval=function(I){if(this.io.setSamplingInterval)this.io.setSamplingInterval(I);else throw new Error("This IO plugin does not implement an interval adjustment method");return this},C.prototype.snapshot.special={mode:function(I){return["INPUT","OUTPUT","ANALOG","PWM","SERVO"][I]||"unknown"}},C.prototype.shiftOut=function(I,M,j,W){arguments.length===3&&(W=j,j=!0);for(let Z=0;Z<8;Z++)this.io.digitalWrite(M,0),j?this.io.digitalWrite(I,!!(W&1<<7-Z)|0):this.io.digitalWrite(I,!!(W&1<<Z)|0),this.io.digitalWrite(M,1)};const A={specials:["error","fail","warn","info"],colors:{log:"white",error:"red",fail:"inverse",warn:"yellow",info:"cyan"}};C.prototype.log=function(){var I=Array.from(arguments);A.specials.includes(I[0])||I.unshift("log");var M=I.shift(),j=I.shift(),W=I.shift(),Z=A.colors[M],oe=Date.now(),k={type:M,timestamp:oe,class:j,message:"",data:null};typeof I[I.length-1]=="object"&&(k.data=I.pop()),W+=" "+I.join(", "),k.message=W.trim(),this.debug&&console.log([s.grey(oe),s.magenta(j),s[Z](W),I.join(", ")].join(" ")),this.emit(M,k),this.emit("message",k)},A.specials.forEach(function(I){C.prototype[I]=function(){var M=[].slice.call(arguments);M.unshift(I),this.log.apply(this,M)}}),C.prototype.wait=function(I,M){return setTimeout(M,I),this},C.prototype.loop=function(I,M){var j=function(){M(function(){clearInterval(W)})},W=setInterval(j,I);return this},C.map=u.map,C.fmap=u.fmap,C.constrain=u.constrain,C.range=u.range,C.uid=u.uid,C.mount=function(I){var M=typeof I=="number"&&I,j;return I&&I.board?I.board:typeof M=="number"?(j=E[M],j||null):E.length?E[0]:null},C.Component=function(I,M){typeof I===p&&(I={}),typeof M===p&&(M={}),this.board=C.mount(I),this.io=this.board.io,this.id=I.id||C.uid(),this.custom=I.custom||{};var j;if(typeof I.pin=="number"||typeof I.pin=="string")j=[I.pin];else if(Array.isArray(I.pins))j=I.pins.slice();else if(typeof I.pins=="object"&&I.pins!==null){var W=I.pins||I.pin;j=[];for(var Z in W)j.push(W[Z])}I.controller&&(typeof I.controller=="string"&&(I.controller=I.controller.replace(/-/g,"")),O||(O=requireExpander()),O.hasController(I.controller)&&(M={normalizePin:!1,requestPin:!1})),M=C.Component.initialization(M),M.normalizePin&&(I=C.Pins.normalize(I,this.board)),typeof I.pins!==p&&(this.pins=I.pins||[]),typeof I.pin!==p&&(this.pin=I.pin),typeof I.emitter!==p&&(this.emitter=I.emitter),typeof I.address!==p&&(this.address=I.address),typeof I.controller!==p&&(this.controller=I.controller),typeof I.bus!==p&&(this.bus=I.bus),this.board.register.push(this)},C.Component.initialization=function(I){var M={requestPin:!0,normalizePin:!0};return Object.assign({},M,I)},C.Controller=function(I,M){let j;if(typeof M.controller=="string"?j=I[M.controller]||I[M.controller.toUpperCase()]:j=M.controller||I.DEFAULT||null,j===null)throw new Error("No Valid Controller Found");let W=j.requirements&&j.requirements.value;W&&W.options&&Object.keys(W.options).forEach(function(Z){if(typeof M[Z]===p||typeof M[Z]!==W.options[Z].typeof){if(W.options[Z].throws)throw new Error(W.options[Z].message);this.board.warn(this.constructor.name,W.options[Z].message)}},this),Object.defineProperties(this,j)},C.Pins=g,C.Options=function(I){return new f(I)},Object.defineProperty(C,"cache",{get(){return E}}),C.Event=function(I){if(typeof I===p)throw new Error("Board.Event missing Event object");this.type=I.type||"data",this.target=I.target||null,Object.assign(this,I)};class T extends o{constructor(M){let j;if(Array.isArray(M)&&(j=M.slice(),M={ports:j}),!Array.isArray(M)&&typeof M=="object"&&M.ports!==void 0&&(j=M.ports),!Array.isArray(j))throw new Error("Expected ports to be an array");typeof M.debug===p&&(M.debug=!0),typeof M.repl===p&&(M.repl=!0);const W={},Z=j.some(({repl:J})=>J===!1),oe=j.some(({debug:J})=>J===!1),k=j.map(J=>{let Q;return typeof J=="string"?(Q={},_.test(J)?Q.port=J:Q.id=J):Q=J,Q.repl=!1,new C(Q)});super(k),this.debug=M.debug,this.repl=M.repl,oe&&(this.debug=!1),Z&&(this.repl=!1);const K=this.map((J,Q)=>(W[J.id]=J,new Promise(ie=>{this[Q].on("error",ue=>this.emit("error",ue)),this[Q].on("fail",ue=>this.emit("fail",ue)),this[Q].on("ready",()=>ie(this[Q]))})));Promise.all(K).then(()=>{this.each(J=>{J.info("Board ID: ",s.green(J.id))}),this.repl?(this.repl=new h(Object.assign({},W,{board:this})),this.repl.initialize(()=>this.emit("ready",W))):this.emit("ready",W)}).catch(J=>{console.error(s.red(J))})}static get type(){return C}}return o.installMethodForwarding(T.prototype,C.prototype),Object.assign(T.prototype,t.prototype),T.prototype.byId=function(I){for(var M=0;M<this.length;M++)if(this[M].id===I)return this[M];return null},T.prototype.log=C.prototype.log,A.specials.forEach(function(I){T.prototype[I]=function(){var M=[].slice.call(arguments);M.unshift(I),this.log.apply(this,M)}}),v&&(b.purge=function(){b.used.length=0},C.Serial=b,C.purge=function(){C.Pins.normalize.clear(),h.isActive=!1,h.isBlocked=!0,h.ref=null,E.length=0},C.testMode=function(I){if(arguments.length)v=I;else return v}),C.Array=T,C.Collection=T,board=C,board}var altimeter,hasRequiredAltimeter;function requireAltimeter(){if(hasRequiredAltimeter)return altimeter;hasRequiredAltimeter=1;var n={};const t=requireBoard(),s=emitter,{toFixed:o}=fn,u=new Map,h={MPL3115A2:{requirements:{value:{options:{elevation:{throws:!1,message:"Missing `elevation` option. Without a specified base `elevation`, the altitude measurement will be inaccurate. Use the meters value shown on whatismyelevation.com",typeof:"number"}}}},initialize:{value(g,v){const{Drivers:O}=requireSip();O.get(this.board,"MPL3115A2",g).on("data",({altitude:E})=>v(E))}},toMeters:{writable:!0,value(g){return o(g,1)}}},MS5611:{initialize:{value(g,v){const{Drivers:O}=requireSip();O.get(this.board,"MS5611",g).on("data",({altitude:E})=>v(E))}},toMeters:{writable:!0,value(g){return o(g,2)}}},BMP180:{initialize:{value(g,v){const{Drivers:O}=requireSip();O.get(this.board,"BMP180",g).on("data",({altitude:E})=>v(E))}},toMeters:{writable:!0,value(g){return o(g,2)}}},BMP280:{initialize:{value(g,v){const{Drivers:O}=requireSip();O.get(this.board,"BMP280",g).on("data",({altitude:E})=>v(E))}},toMeters:{writable:!0,value(g){return o(g,3)}}},BME280:{initialize:{value(g,v){const{Drivers:O}=requireSip();O.get(this.board,"BME280",g).on("data",({altitude:E})=>v(E))}},toMeters:{writable:!0,value(g){return o(g,3)}}}};h.BMP085=h["BMP-085"]=h.BMP180;class f extends s{constructor(v){super(),t.Component.call(this,v=t.Options(v)),t.Controller.call(this,h,v);const O={},E=v.freq||25;let _=null,p=null;this.toMeters||(this.toMeters=v.toMeters||(C=>C)),u.set(this,O);const b={meters:{get(){return this.toMeters(p)}},feet:{get(){return o(this.meters*3.28084,2)}}};b.m=b.meters,b.ft=b.feet,Object.defineProperties(this,b),typeof this.initialize=="function"&&this.initialize(v,C=>p=C),setInterval(()=>{if(p==null)return;const C={};C.m=C.meters=this.meters,C.ft=C.feet=this.feet,this.emit("data",C),this.meters!==_&&(_=this.meters,this.emit("change",C))},E)}}return n.IS_TEST_MODE&&(f.Controllers=h,f.purge=function(){u.clear()}),altimeter=f,altimeter}var barometer,hasRequiredBarometer;function requireBarometer(){if(hasRequiredBarometer)return barometer;hasRequiredBarometer=1;var n={};const t=requireBoard(),s=emitter,{toFixed:o}=fn,u={MPL115A2:{initialize:{value(f,g){const{Drivers:v}=requireSip();v.get(this.board,"MPL115A2",f).on("data",({pressure:O})=>g(O))}},toPressure:{value(f){return o(65/1023*f+50,2)}}},MPL3115A2:{initialize:{value(f,g){const{Drivers:v}=requireSip();v.get(this.board,"MPL3115A2",f).on("data",({pressure:O})=>g(O))}},toPressure:{value(f){const v=f/4/3377*3.39;return o(v,4)}}},BMP180:{initialize:{value(f,g){const{Drivers:v}=requireSip();v.get(this.board,"BMP180",f).on("data",({pressure:O})=>g(O))}},toPressure:{value(f){return o(f/1e3,3)}}},BMP280:{initialize:{value(f,g){const{Drivers:v}=requireSip();v.get(this.board,"BMP280",f).on("data",({pressure:O})=>g(O))}},toPressure:{value(f){return o(f/1e3,5)}}},BME280:{initialize:{value(f,g){const{Drivers:v}=requireSip();v.get(this.board,"BME280",f).on("data",({pressure:O})=>g(O))}},toPressure:{value(f){return o(f/1e3,5)}}},MS5611:{initialize:{value(f,g){const{Drivers:v}=requireSip();v.get(this.board,"MS5611",f).on("data",({pressure:O})=>g(O))}},toPressure:{value(f){return o(f/1e3,4)}}}};u.BMP085=u.BMP180;class h extends s{constructor(g){super(),t.Component.call(this,g=t.Options(g)),t.Controller.call(this,u,g);const v=g.freq||25;let O=null,E=null;this.toPressure||(this.toPressure=g.toPressure||(_=>_)),typeof this.initialize=="function"&&this.initialize(g,_=>{E=_}),Object.defineProperties(this,{pressure:{get(){return this.toPressure(E)}}}),setInterval(()=>{if(E===null)return;const _={pressure:this.pressure};this.emit("data",_),this.pressure!==O&&(O=this.pressure,this.emit("change",_))},v)}}return n.IS_TEST_MODE&&(h.Controllers=u,h.purge=function(){}),barometer=h,barometer}var gyro,hasRequiredGyro;function requireGyro(){if(hasRequiredGyro)return gyro;hasRequiredGyro=1;var n={};const t=requireBoard(),s=emitter,o=fn,u=o.sum,h=o.toFixed,f=new Map,g=["x","y","z"],v={ANALOG:{initialize:{value(E,_){const p=E.pins||[];let b,C;const P=f.get(this),A={};if(E.sensitivity===void 0)throw new Error("Expected a Sensitivity");b=E.sensitivity,C=E.resolution||4.88,P.K=C/b,p.forEach(function(T,I){this.io.pinMode(T,this.io.MODES.ANALOG),this.io.analogRead(T,M=>{const j=g[I];A[j]=M,_(A)})},this)}},toNormal:{value(E){return E>>2}},toDegreesPerSecond:{value(E,_){const p=this.toNormal(E),b=this.toNormal(_),C=f.get(this);return(p-b)*C.K|0}}},MPU6050:{initialize:{value(E,_){const p=requireSip(),b=f.get(this),C=p.Drivers.get(this.board,"MPU6050",E);b.sensitivity=E.sensitivity||131,C.on("data",({gyro:P})=>{_(P)})}},toNormal:{value(E){return(E>>11)+127}},toDegreesPerSecond:{value(E,_){const p=f.get(this);return h((E-_)/p.sensitivity,4)}}},BNO055:{initialize:{value(E,_){const p=requireSip(),b=f.get(this),C=p.Drivers.get(this.board,"BNO055",E);b.sensitivity=16,C.on("data",({gyro:P})=>{_(P)})}},toNormal:{value(E){return E}},toDegreesPerSecond:{value(E){const _=f.get(this);return h(E/_.sensitivity,4)}}}};v.DEFAULT=v.ANALOG;class O extends s{constructor(_){super();let p=!1;const b=100,C={x:{angle:0,value:0,previous:0,calibration:[],stash:[0,0,0,0,0],center:0,hasValue:!1},y:{angle:0,value:0,previous:0,calibration:[],stash:[0,0,0,0,0],center:0,hasValue:!1},z:{angle:0,value:0,previous:0,calibration:[],stash:[0,0,0,0,0],center:0,hasValue:!1}};t.Component.call(this,_=t.Options(_)),t.Controller.call(this,v,_),this.toNormal||(this.toNormal=_.toNormal||(P=>P)),this.toDegreesPerSecond||(this.toDegreesPerSecond=_.toDegreesPerSecond||(P=>P)),f.set(this,C),typeof this.initialize=="function"&&this.initialize(_,P=>{let A=!1;Object.keys(P).forEach(T=>{const I=P[T],M=C[T];M.previous=M.value,M.stash.shift(),M.stash.push(I),M.hasValue=!0,M.value=u(M.stash)/5|0,!p&&C.x.calibration.length===b&&C.y.calibration.length===b&&(this.z===void 0||C.z.calibration.length===b)?(p=!0,C.x.center=u(C.x.calibration)/b|0,C.y.center=u(C.y.calibration)/b|0,C.z.center=u(C.z.calibration)/b|0,C.x.calibration.length=0,C.y.calibration.length=0,C.z.calibration.length=0):M.calibration.length<b&&M.calibration.push(I),M.previous!==M.value&&(A=!0)}),p&&(C.x.angle+=this.rate.x/100,C.y.angle+=this.rate.y/100,C.z.angle+=this.rate.z/100,this.emit("data",{x:this.x,y:this.y,z:this.z}),A&&this.emit("change",{x:this.x,y:this.y,z:this.z}))}),Object.defineProperties(this,{isCalibrated:{get(){return p},set(P){typeof P=="boolean"&&(p=P)}},pitch:{get(){return{rate:h(this.rate.y,2),angle:h(C.y.angle,2)}}},roll:{get(){return{rate:h(this.rate.x,2),angle:h(C.x.angle,2)}}},yaw:{get(){return{rate:this.z!==void 0?h(this.rate.z,2):0,angle:this.z!==void 0?h(C.z.angle,2):0}}},x:{get(){return h(this.toNormal(C.x.value),4)}},y:{get(){return h(this.toNormal(C.y.value),4)}},z:{get(){return C.z.hasValue?h(this.toNormal(C.z.value),4):void 0}},rate:{get(){const P=this.toDegreesPerSecond(C.x.value,C.x.center),A=this.toDegreesPerSecond(C.y.value,C.y.center),T=C.z.hasValue?this.toDegreesPerSecond(C.z.value,C.z.center):0;return{x:P,y:A,z:T}}}})}recalibrate(){this.isCalibrated=!1}}return Object.defineProperties(O,{TK_4X:{value:.67},TK_1X:{value:.167}}),n.IS_TEST_MODE&&(O.Controllers=v,O.purge=()=>{f.clear()}),gyro=O,gyro}var hygrometer,hasRequiredHygrometer;function requireHygrometer(){if(hasRequiredHygrometer)return hygrometer;hasRequiredHygrometer=1;var n={};const t=requireBoard(),s=emitter,o=fn,u=new Map,{toFixed:h,POW_2_14:f,POW_2_16:g}=o,v=!0,O={SHT31D:{initialize:{value(_,p){const{Drivers:b}=requireSip();b.get(this.board,"SHT31D",_).on("data",({humidity:C})=>p(C))}},toRelativeHumidity:{writable:v,value(_){return h(100*(_/(g-1)),2)}}},HTU21D:{initialize:{value(_,p){const{Drivers:b}=requireSip();b.get(this.board,"HTU21D",_).on("data",({humidity:C})=>p(C))}},toRelativeHumidity:{writable:v,value(_){return h(-6+125*(_/g),2)}}},HIH6130:{initialize:{value(_,p){const{Drivers:b}=requireSip();b.get(this.board,"HIH6130",_).on("data",({humidity:C})=>p(C))}},toRelativeHumidity:{writable:v,value(_){return h(_/(f-1)*100,2)}}},DHT_I2C_NANO_BACKPACK:{initialize:{value(_,p){const{Drivers:b}=requireSip();b.get(this.board,"DHT_I2C_NANO_BACKPACK",_).on("data",({humidity:C})=>p(C))}},toRelativeHumidity:{writable:v,value(_){return h(_/100,1)}}},TH02:{initialize:{value(_,p){const{Drivers:b}=requireSip();b.get(this.board,"TH02",_).on("data",({humidity:C})=>p(C))}},toRelativeHumidity:{writable:v,value(_){return _>100&&(_=0),h(_||0,2)}}},SI7020:{initialize:{value(_,p){const{Drivers:b}=requireSip();b.get(this.board,"SI7020",_).on("data",({humidity:C})=>p(C))}},toRelativeHumidity:{writable:v,value(_){return h(125*_/g-6,2)}}},BME280:{initialize:{value(_,p){const{Drivers:b}=requireSip();b.get(this.board,"BME280",_).on("data",({humidity:C})=>p(C))}},toRelativeHumidity:{writable:v,value(_){return h(_/1024,3)}}}};O.DHT11_I2C_NANO_BACKPACK=O.DHT_I2C_NANO_BACKPACK,O.DHT21_I2C_NANO_BACKPACK=O.DHT_I2C_NANO_BACKPACK,O.DHT22_I2C_NANO_BACKPACK=O.DHT_I2C_NANO_BACKPACK,O.SI7021=O.SI7020;class E extends s{constructor(p){super();const b=p.freq||25;let C=null,P=null;t.Component.call(this,p=t.Options(p)),t.Controller.call(this,O,p),u.set(this,{}),this.toRelativeHumidity||(this.toRelativeHumidity=p.toRelativeHumidity||(T=>T));const A={relativeHumidity:{get(){return this.toRelativeHumidity(P)}}};A.RH=A.relativeHumidity,Object.defineProperties(this,A),typeof this.initialize=="function"&&this.initialize(p,T=>{P=T}),setInterval(()=>{if(P==null||Number.isNaN(this.relativeHumidity))return;const T={};T.RH=T.relativeHumidity=this.relativeHumidity,this.emit("data",T),this.relativeHumidity!==C&&(C=this.relativeHumidity,this.emit("change",T))},b)}}return n.IS_TEST_MODE&&(E.Controllers=O,E.purge=()=>{u.clear()}),hygrometer=E,hygrometer}var compass,hasRequiredCompass;function requireCompass(){if(hasRequiredCompass)return compass;hasRequiredCompass=1;var n={};const t=requireBoard(),s=emitter,{int16:o,RAD_TO_DEG:u,TAU:h}=fn,f=new Map,g={HMC5883L:{REGISTER:{value:{CRA:0,CRB:1,MODE:2,READ:3}},initialize:{value(E,_){const p=f.get(this),b=E.address||30,C=6;p.scale=1,Object.assign(p,new v.Scale(E.gauss||.88)),E.address=b,this.io.i2cConfig(E),this.io.i2cWrite(b,this.REGISTER.CRA,112),this.io.i2cWrite(b,this.REGISTER.CRB,64),this.io.i2cWrite(b,this.REGISTER.MODE,0),this.io.i2cRead(b,this.REGISTER.READ,C,P=>{_({x:o(P[0],P[1]),y:o(P[4],P[5]),z:o(P[2],P[3])})})}},toScaledHeading:{value({x:E,y:_}){const p=f.get(this);return O(E*p.scale,_*p.scale)}}},HMC6352:{REGISTER:{value:{READ:65}},initialize:{value(E,_){const p=f.get(this),b=E.address||33,C=2;p.scale=1,E.delay=10,E.address=b,this.io.i2cConfig(E),this.io.i2cWrite(b,this.REGISTER.READ),this.io.i2cRead(b,this.REGISTER.READ,C,P=>{_({x:((P[0]<<8)+P[1])/10|0,y:null,z:null})})}},toScaledHeading:{value({x:E}){const _=f.get(this);return E*_.scale}}},BNO055:{initialize:{value(E,_){const b=requireSip().Drivers.get(this.board,"BNO055",E),C=f.get(this);C.sensitivity=16,b.on("data",({magnetometer:P})=>{_(P)})}},toScaledHeading:{value(E){const _=f.get(this),p=E.x/_.sensitivity,b=E.y/_.sensitivity;return O(p,b)}}},MAG3110:{REGISTER:{value:{STATUS:0,READ:1,OFFSETS:9,CTRL_REG1:16,CTRL_REG2:17}},initialize:{value(E,_){const p=f.get(this),b=14;let C=!1,P;p.isCalibrated=!1,p.isPreCalibrated=!1,p.hasEmittedCalibration=!1,p.measurements=20,p.offsets={x:0,y:0,z:0},p.accum={x:{offset:null,high:0,low:0},y:{offset:null,high:0,low:0},z:{offset:null,high:0,low:0}},E.delay=2,E.address=b,E.offsets&&(p.isCalibrated=!0,p.isPreCalibrated=!0,Array.isArray(E.offsets)&&(P=E.offsets.slice(),E.offsets={x:P[0],y:P[1],z:P[2]}),p.accum.x.low=E.offsets.x[0],p.accum.x.high=E.offsets.x[1],p.accum.x.offset=(p.accum.x.low+p.accum.x.high)/2,p.accum.y.low=E.offsets.y[0],p.accum.y.high=E.offsets.y[1],p.accum.y.offset=(p.accum.y.low+p.accum.y.high)/2,p.accum.z.low=E.offsets.z[0],p.accum.z.high=E.offsets.z[1],p.accum.z.offset=(p.accum.z.low+p.accum.z.high)/2),this.io.i2cConfig(E),this.io.i2cWrite(b,this.REGISTER.CTRL_REG2,128),this.io.i2cWrite(b,this.REGISTER.CTRL_REG1,1);const A={x:0,y:0,z:0},T=()=>{this.io.i2cReadOnce(b,this.REGISTER.STATUS,1,I=>{!C&&(I[0]===15||I[0]===255)?(C=!0,this.io.i2cReadOnce(b,this.REGISTER.READ,6,M=>{let j=0;C=!1,A.x=o(M[0],M[1]),A.y=o(M[2],M[3]),A.z=o(M[4],M[5]),p.isCalibrated||(p.accum.x.offset===null&&(p.accum.x.offset=A.x,p.accum.x.low=A.x,p.accum.x.high=A.x),p.accum.y.offset===null&&(p.accum.y.offset=A.y,p.accum.y.low=A.y,p.accum.y.high=A.y),p.accum.x.low=Math.min(p.accum.x.low,A.x),p.accum.x.high=Math.max(p.accum.x.high,A.x),p.accum.x.offset=Math.trunc((p.accum.x.low+p.accum.x.high)/2),p.accum.y.low=Math.min(p.accum.y.low,A.y),p.accum.y.high=Math.max(p.accum.y.high,A.y),p.accum.y.offset=Math.trunc((p.accum.y.low+p.accum.y.high)/2),p.accum.z.low=Math.min(p.accum.z.low,A.z),p.accum.z.high=Math.max(p.accum.z.high,A.z),p.accum.z.offset=Math.trunc((p.accum.z.low+p.accum.z.high)/2),--p.measurements,p.measurements||(p.isCalibrated=!0)),p.isCalibrated&&(p.hasEmittedCalibration||(p.hasEmittedCalibration=!0,p.offsets.x=p.accum.x.offset,p.offsets.y=p.accum.y.offset,p.offsets.z=p.accum.z.offset,this.io.i2cWrite(b,this.REGISTER.OFFSETS,[p.offsets.x>>7,p.offsets.x<<1&255,p.offsets.y>>7,p.offsets.y<<1&255,p.offsets.z>>7,p.offsets.z<<1&255]),this.emit("calibrated",{x:[p.accum.x.low,p.accum.x.high],y:[p.accum.y.low,p.accum.y.high],z:[p.accum.z.low,p.accum.z.high]})),j=Math.floor(1e3/80),_(A)),setTimeout(T,j)})):T()})};T()}},calibrate:{value(E){const _=f.get(this);_.isCalibrated=!1,_.measurements=E}},toScaledHeading:{value({y:E,x:_}){const p=f.get(this),b={x:1/(p.accum.x.high-p.accum.x.low),y:1/(p.accum.y.high-p.accum.y.low)};let C=Math.atan2(-E*b.y,_*b.x);return C<0&&(C+=h),Math.trunc(C*u)}}},LSM303C:{initialize:{value(E,_){requireSip().Drivers.get(this.board,"LSM303C",E).on("data",({magnetometer:C})=>{_(C)})}},toScaledHeading:{value({x:E,y:_}){return O(E,_)}}}};class v extends s{constructor(_){super(),t.Component.call(this,_=t.Options(_));const p=_.freq||25;let b={x:null,y:null,z:null};const C={x:0,y:0,z:0,scale:0,register:0,heading:0};t.Controller.call(this,g,_),this.toScaledHeading||(this.toScaledHeading=_.toScaledHeading||(P=>P)),f.set(this,C),typeof this.initialize=="function"&&this.initialize(_,P=>b=P),setInterval(()=>{if(b.x===null)return;let P=!1;C.x=b.x,C.y=b.y,C.z=b.z;const A=this.heading;A!==C.heading&&(C.heading=A,P=!0),this.emit("data",{heading:A}),P&&this.emit("change",{heading:A})},p),Object.defineProperties(this,{bearing:{get(){const P=v.Points.length,A=this.heading;let T;for(let I=0;I<P;I++)if(T=v.Points[I],A>=T.low&&A<=T.high)return{name:T.name,abbr:T.abbr,low:T.low,high:T.high,heading:A}}},raw:{get(){return{x:b.x,y:b.y,z:b.z}}},heading:{get(){return this.toScaledHeading(b)}}})}}v.Scale=class{constructor(E){E===.88?(this.register=0,this.scale=.73):E===1.3?(this.register=1,this.scale=.92):E===1.9?(this.register=2,this.scale=1.22):E===2.5?(this.register=3,this.scale=1.52):E===4?(this.register=4,this.scale=2.27):E===4.7?(this.register=5,this.scale=2.56):E===5.6?(this.register=6,this.scale=3.03):E===8.1?(this.register=7,this.scale=4.35):(this.register=0,this.scale=1),this.register=this.register<<5}};function O(E,_){let p=Math.atan2(_,E);return p<0&&(p+=h),p>h&&(p-=h),p*u}return v.Points=[{name:"North",abbr:"N",low:354.38,high:360},{name:"North",abbr:"N",low:0,high:5.62},{name:"North by East",abbr:"NbE",low:5.63,high:16.87},{name:"North-NorthEast",abbr:"NNE",low:16.88,high:28.12},{name:"NorthEast by North",abbr:"NEbN",low:28.13,high:39.37},{name:"NorthEast",abbr:"NE",low:39.38,high:50.62},{name:"NorthEast by East",abbr:"NEbE",low:50.63,high:61.87},{name:"East-NorthEast",abbr:"ENE",low:61.88,high:73.12},{name:"East by North",abbr:"EbN",low:73.13,high:84.37},{name:"East",abbr:"E",low:84.38,high:95.62},{name:"East by South",abbr:"EbS",low:95.63,high:106.87},{name:"East-SouthEast",abbr:"ESE",low:106.88,high:118.12},{name:"SouthEast by East",abbr:"SEbE",low:118.13,high:129.37},{name:"SouthEast",abbr:"SE",low:129.38,high:140.62},{name:"SouthEast by South",abbr:"SEbS",low:140.63,high:151.87},{name:"South-SouthEast",abbr:"SSE",low:151.88,high:163.12},{name:"South by East",abbr:"SbE",low:163.13,high:174.37},{name:"South",abbr:"S",low:174.38,high:185.62},{name:"South by West",abbr:"SbW",low:185.63,high:196.87},{name:"South-SouthWest",abbr:"SSW",low:196.88,high:208.12},{name:"SouthWest by South",abbr:"SWbS",low:208.13,high:219.37},{name:"SouthWest",abbr:"SW",low:219.38,high:230.62},{name:"SouthWest by West",abbr:"SWbW",low:230.63,high:241.87},{name:"West-SouthWest",abbr:"WSW",low:241.88,high:253.12},{name:"West by South",abbr:"WbS",low:253.13,high:264.37},{name:"West",abbr:"W",low:264.38,high:275.62},{name:"West by North",abbr:"WbN",low:275.63,high:286.87},{name:"West-NorthWest",abbr:"WNW",low:286.88,high:298.12},{name:"NorthWest by West",abbr:"NWbW",low:298.13,high:309.37},{name:"NorthWest",abbr:"NW",low:309.38,high:320.62},{name:"NorthWest by North",abbr:"NWbN",low:320.63,high:331.87},{name:"North-NorthWest",abbr:"NNW",low:331.88,high:343.12},{name:"North by West",abbr:"NbW",low:343.13,high:354.37}],Object.freeze(v.Points),n.IS_TEST_MODE&&(v.Controllers=g,v.purge=()=>{f.clear()}),compass=v,compass}var orientation,hasRequiredOrientation;function requireOrientation(){if(hasRequiredOrientation)return orientation;hasRequiredOrientation=1;var n={};const t=requireBoard(),s=emitter,o=new Map,u={BNO055:{initialize:{value(f,g){requireSip().Drivers.get(this.board,"BNO055",f).on("data",E=>{g(E)})}},toScaledEuler:{value({euler:f}){return{heading:f.heading/16,roll:f.roll/16,pitch:f.pitch/16}}},toScaledQuarternion:{value({quarternion:f}){return{w:f.w*(1/16384),x:f.x*(1/16384),y:f.y*(1/16384),z:f.z*(1/16384)}}},calibration:{get(){return o.get(this).calibration}},isCalibrated:{get(){return(this.calibration>>6&3)===3}}}};class h extends s{constructor(g){super(),t.Component.call(this,g=t.Options(g)),t.Controller.call(this,u,g);const v=g.freq||25,O={euler:{heading:0,roll:0,pitch:0},quarternion:{w:0,x:0,y:0,z:0},calibration:0};let E=null;o.set(this,O),this.toScaledQuarternion||(this.toScaledQuarternion=g.toScaledQuarternion||(_=>_)),this.toScaledEuler||(this.toScaledEuler=g.toScaledEuler||(_=>_)),typeof this.initialize=="function"&&this.initialize(g,_=>E=_),setInterval(()=>{if(E===null)return;let _=!1,p=!1;["heading","roll","pitch"].forEach(C=>{O.euler[C]!==E.orientation.euler[C]&&(_=!0),O.euler[C]=E.orientation.euler[C]}),["w","x","y","z"].forEach(C=>{O.quarternion[C]!==E.orientation.quarternion[C]&&(_=!0),O.quarternion[C]=E.orientation.quarternion[C]}),E.calibration&&(O.calibration!==E.calibration&&(p=!0),O.calibration=E.calibration);const b={euler:this.euler,quarternion:this.quarternion,calibration:this.calibration};this.emit("data",b),_&&this.emit("change",b),p&&this.emit("calibration",this.calibration)},v)}get euler(){return this.toScaledEuler(o.get(this))}get quarternion(){return this.toScaledQuarternion(o.get(this))}}return n.IS_TEST_MODE&&(h.Controllers=u,h.purge=()=>{o.clear()}),orientation=h,orientation}const Emitter$d=emitter;let Withinable$3=class extends Emitter$d{constructor(){super()}within(t,s,o){let u;if(typeof t=="number"&&(u=t,t=[0,u]),!Array.isArray(t))throw new Error("within expected a range array");return typeof s=="function"&&(o=s,s="value"),typeof this[s]>"u"?this:(this.on("data",()=>{const h=this[s];h>=t[0]&&h<=t[1]&&o.call(this,null,h)}),this)}};var withinable=Withinable$3,thermometer,hasRequiredThermometer;function requireThermometer(){if(hasRequiredThermometer)return thermometer;hasRequiredThermometer=1;var n={};const t=requireBoard(),s=eventsExports,o=withinable,{toFixed:u,POW_2_16:h}=fn,{log:f,round:g,trunc:v}=Math,O=273.15;function E(A,T){const I=A.pin;this.io.pinMode(I,this.io.MODES.ANALOG),this.io.analogRead(I,M=>{T.call(this,M)})}const _=new Map,p={MAX31850K:{initialize:{value(A,T){const I={TEMPERATURE_FAMILY:59,CONVERT_TEMPERATURE_COMMAND:68,READ_SCRATCHPAD_COMMAND:190,READ_COUNT:9},M=T.pin,j=T.freq||100,W=Z=>{let oe=0;for(let k=6;k>0;k--)oe=oe*256+Z[k];return oe};A.io.sendOneWireConfig(M,!0),A.io.sendOneWireSearch(M,(Z,oe)=>{if(Z){this.emit("error",Z);return}if(this.devices=oe.filter(J=>J[0]===I.TEMPERATURE_FAMILY,this),oe.length===0){this.emit("error",new Error("FAILED TO FIND TEMPERATURE DEVICE"));return}this.devices.forEach(J=>{this.emit("initialized",W(J))});let k=()=>this.addresses?this.devices.filter(function(J){const Q=W(J);return this.addresses.includes(Q)},this):[this.devices[0]],K=()=>{let J,Q=k(),ie=k();ie.forEach(we=>{A.io.sendOneWireReset(M),A.io.sendOneWireWrite(M,we,I.CONVERT_TEMPERATURE_COMMAND)});let ue=we=>{let Te;if(Q.length===0)return we();Te=Q.pop(),A.io.sendOneWireReset(M),A.io.sendOneWireWriteAndRead(M,Te,I.READ_SCRATCHPAD_COMMAND,I.READ_COUNT,(he,ce)=>{if(!ce[0]&&(Q.push(Te),ce[1]!==0))return we();ue(we)})},fe=()=>{let we;if(ie.length===0){setTimeout(K,j);return}we=ie.pop(),A.io.sendOneWireReset(M),A.io.sendOneWireWriteAndRead(M,we,I.READ_SCRATCHPAD_COMMAND,I.READ_COUNT,(Te,he)=>{if(Te){this.emit("error",Te);return}J=he[1]<<8|he[0],this.emit("data",W(we),J),fe()})};ue(fe)};K()})}},register:{value(A){this.addresses||(this.addresses=[]),this.addresses.push(A)}}},DS18B20:{initialize:{value(A,T){const I={TEMPERATURE_FAMILY:40,CONVERT_TEMPERATURE_COMMAND:68,READ_SCRATCHPAD_COMMAND:190,READ_COUNT:2},M=T.pin,j=T.freq||100;let W,Z,oe;W=k=>{let K,J=0;for(K=6;K>0;K--)J=J*256+k[K];return J},A.io.sendOneWireConfig(M,!0),A.io.sendOneWireSearch(M,(k,K)=>{if(k){this.emit("error",k);return}if(this.devices=K.filter(J=>J[0]===I.TEMPERATURE_FAMILY,this),K.length===0){this.emit("error",new Error("FAILED TO FIND TEMPERATURE DEVICE"));return}this.devices.forEach(J=>{this.emit("initialized",W(J))}),Z=()=>{let J,Q;this.addresses?J=this.devices.filter(function(ie){const ue=W(ie);return this.addresses.includes(ue)},this):J=[this.devices[0]],J.forEach(ie=>{A.io.sendOneWireReset(M),A.io.sendOneWireWrite(M,ie,I.CONVERT_TEMPERATURE_COMMAND)}),A.io.sendOneWireDelay(M,1),oe=()=>{let ie;if(J.length===0){setTimeout(Z,j);return}ie=J.pop(),A.io.sendOneWireReset(M),A.io.sendOneWireWriteAndRead(M,ie,I.READ_SCRATCHPAD_COMMAND,I.READ_COUNT,(ue,fe)=>{if(ue){this.emit("error",ue);return}Q=fe[1]<<8|fe[0],this.emit("data",W(ie),Q),oe()})},oe()},Z()})}},register:{value(A){this.addresses||(this.addresses=[]),this.addresses.push(A)}}}};p.get=(A,T,I)=>{let M,j;_.has(A)||_.set(A,{}),M=_.get(A);const W=`${T}_${I.pin}`;return M[W]||(j=new s,Object.defineProperties(j,p[T]),j.initialize(A,I),M[W]=j),M[W]},p.clear=()=>{_.clear()};const b={ANALOG:{initialize:{value:E}},LM35:{initialize:{value:E},toCelsius:{value(A){const T=this.aref*1e3*A/1023;return g(T/10)}}},LM335:{initialize:{value:E},toCelsius:{value(A){const T=this.aref*1e3*A/1023;return g(T/10-O)}}},TMP36:{initialize:{value:E},toCelsius:{value(A){const T=this.aref*1e3*A/1023;return g(T/10-50)}}},TMP102:{ADDRESSES:{value:[72]},initialize:{value(A,T){const{Drivers:I}=requireSip(),M=I.addressResolver(this,A);this.io.i2cConfig(A),this.io.i2cRead(M,0,2,j=>{let W=(j[0]<<8|j[1])>>4;W&2048&&(W|=63488),W=W>>15?((W^65535)+1)*-1:W,T(W)})}},toCelsius:{value(A){return u(A/16,1)}}},MAX31850K:{initialize:{value(A,T){const I=C.get(this),M=A.address,j=p.get(this.board,"MAX31850K",A);M?(I.address=M,j.register(M)):(j.addressless&&this.emit("error","You cannot have more than one MAX31850K without an address"),j.addressless=!0),j.once("initialized",W=>{I.address||(I.address=W)}),j.on("data",(W,Z)=>{(!M||W===M)&&T(Z)})}},toCelsius:{value(A){return u(A/16,2)}},address:{get(){return C.get(this).address||0}}},DS18B20:{initialize:{value(A,T){const I=C.get(this),M=A.address,j=p.get(this.board,"DS18B20",A);M?(I.address=M,j.register(M)):(j.addressless&&this.emit("error","You cannot have more than one DS18B20 without an address"),j.addressless=!0),j.once("initialized",W=>{I.address||(I.address=W)}),j.on("data",(W,Z)=>{(!M||W===M)&&T(Z)})}},toCelsius:{value(A){return u(A/16,4)}},address:{get(){return C.get(this).address||0}}},SHT31D:{initialize:{value(A,T){const{Drivers:I}=requireSip();I.get(this.board,"SHT31D",A).on("data",({temperature:M})=>T(M))}},toCelsius:{value(A){return u(-45+175*(A/(h-1)),3)}}},HTU21D:{initialize:{value(A,T){const{Drivers:I}=requireSip();I.get(this.board,"HTU21D",A).on("data",({temperature:M})=>T(M))}},toCelsius:{value(A){return u(-46.85+175.72*(A/h),2)}}},HIH6130:{initialize:{value(A,T){const{Drivers:I}=requireSip();I.get(this.board,"HIH6130",A).on("data",({temperature:M})=>T(M))}},toCelsius:{value(A){return g(A/1e3)}}},DHT_I2C_NANO_BACKPACK:{initialize:{value(A,T){const{Drivers:I}=requireSip();I.get(this.board,"DHT_I2C_NANO_BACKPACK",A).on("data",({temperature:M})=>T(M))}},toCelsius:{value(A){return g(A/100)}}},TH02:{initialize:{value(A,T){const{Drivers:I}=requireSip();I.get(this.board,"TH02",A).on("data",({temperature:M})=>T(M))}},toCelsius:{value(A){return u(A,1)}}},MPU6050:{initialize:{value(A,T){const{Drivers:I}=requireSip();I.get(this.board,"MPU6050",A).on("data",({temperature:M})=>T(M))}},toCelsius:{value(A){return g(A/340+36.53)}}},BNO055:{initialize:{value(A,T){const{Drivers:I}=requireSip();I.get(this.board,"BNO055",A).on("data",({temperature:M})=>T(M))}},toCelsius:{value(A){return v(A)}}},MPL115A2:{initialize:{value(A,T){const{Drivers:I}=requireSip();I.get(this.board,"MPL115A2",A).on("data",({temperature:M})=>T(M))}},toCelsius:{value(A){return v((A-498)/-5.35+25)}}},MPL3115A2:{initialize:{value(A,T){const{Drivers:I}=requireSip();I.get(this.board,"MPL3115A2",A).on("data",({temperature:M})=>T(M))}},toCelsius:{value(A){return g(A/16)}}},MS5611:{initialize:{value(A,T){const{Drivers:I}=requireSip();I.get(this.board,"MS5611",A).on("data",({temperature:M})=>T(M))}},toCelsius:{value(A){return u(A,2)}}},GROVE:{initialize:{value:E},toCelsius:{value(A){const W=(1023-A)*1e4/A,Z=1/(f(W/1e4)/3975+1/298.15)-O;return g(Z)}}},TINKERKIT:{initialize:{value:E},toCelsius:{value(A){const W=1e4*(1023/A-1),Z=3950/f(W*120.6685);return g(Z-O)}}},BMP180:{initialize:{value(A,T){const{Drivers:I}=requireSip();I.get(this.board,"BMP180",A).on("data",({temperature:M})=>T(M))}},toCelsius:{value(A){return u(A,1)}}},BMP280:{initialize:{value(A,T){const{Drivers:I}=requireSip();I.get(this.board,"BMP280",A).on("data",({temperature:M})=>T(M))}},toCelsius:{value(A){return u(A,2)}}},BME280:{initialize:{value(A,T){const{Drivers:I}=requireSip();I.get(this.board,"BME280",A).on("data",({temperature:M})=>T(M))}},toCelsius:{value(A){return u(A,2)}}},SI7020:{initialize:{value(A,T){const{Drivers:I}=requireSip();I.get(this.board,"SI7020",A).on("data",({temperature:M})=>T(M))}},toCelsius:{value(A){return u(175.72*A/65536-46.85,1)}}},MCP9808:{ADDRESSES:{value:[24]},initialize:{value(A,T){const{Drivers:I}=requireSip(),M=I.addressResolver(this,A);this.io.i2cConfig(A),this.io.i2cRead(M,5,2,j=>{let W=((j[0]<<8|j[1])&4095)/16;W&4096&&(W-=256),T(W)})}},toCelsius:{value(A){return u(A,2)}}},LSM303C:{initialize:{value(A,T){const{Drivers:I}=requireSip();I.get(this.board,"LSM303C",A).on("data",({temperature:M})=>T(M))}},toCelsius:{value(A){return u(A/8+25,1)}}}};b.BMP085=b.BMP180,b.GY521=b.MPU6050,b.SI7021=b.SI7020,b.DHT11_I2C_NANO_BACKPACK=b.DHT_I2C_NANO_BACKPACK,b.DHT21_I2C_NANO_BACKPACK=b.DHT_I2C_NANO_BACKPACK,b.DHT22_I2C_NANO_BACKPACK=b.DHT_I2C_NANO_BACKPACK,b.DEFAULT=b.ANALOG;var C=new Map;class P extends o{constructor(T){super();let I=null,M=null;t.Component.call(this,T=t.Options(T)),t.Controller.call(this,b,T);const j={enabled:typeof T.enabled>"u"?!0:T.enabled,intervalId:null,freq:T.freq||25,previousFreq:T.freq||25};C.set(this,j),this.aref=T.aref||this.io.aref||5,this.toCelsius||(this.toCelsius=T.toCelsius||(oe=>oe));const W=()=>{if(M==null)return;const oe={};oe.C=oe.celsius=this.celsius,oe.F=oe.fahrenheit=this.fahrenheit,oe.K=oe.kelvin=this.kelvin,this.emit("data",oe),this.celsius!==I&&(I=this.celsius,this.emit("change",oe))},Z={celsius:{get(){return this.toCelsius(M)}},fahrenheit:{get(){return u(this.celsius*9/5+32,2)}},kelvin:{get(){return u(this.celsius+O,2)}},freq:{get(){return j.freq},set(oe){j.freq=oe,j.intervalId&&clearInterval(j.intervalId),j.freq!==null&&(j.intervalId=setInterval(W,oe))}}};Z.C=Z.celsius,Z.F=Z.fahrenheit,Z.K=Z.kelvin,Object.defineProperties(this,Z),typeof this.initialize=="function"&&this.initialize(T,oe=>M=oe),j.enabled&&(this.freq=j.freq)}enable(){const T=C.get(this);return T.enabled||(this.freq=T.freq||T.previousFreq),this}disable(){const T=C.get(this);return T.enabled&&(T.enabled=!1,T.previousFreq=T.freq,this.freq=null),this}}return P.Drivers=p,n.IS_TEST_MODE&&(P.Controllers=b,P.purge=()=>{C.clear()}),thermometer=P,thermometer}var sip,hasRequiredSip;function requireSip(){if(hasRequiredSip)return sip;hasRequiredSip=1;var n={};const t=requireBoard(),s=emitter,o=fn,u=new Map,h=new Map,{int16:f,uint16:g,uint24:v,s32:O,u32:E}=o,_="accelerometer",p="altimeter",b="barometer",C="gyro",P="hygrometer",A="magnetometer",T="orientation",I="thermometer";function M(k,K){const J=u.get(this),Q=Object.create(null);for(const ie of this.components)J[ie]=new M[ie](Object.assign({controller:K.controller||k,freq:K.freq,board:this.board},K)),Q[ie]={get(){return J[ie]}},j[ie]&&(Q[j[ie]]=Q[ie]);Object.defineProperties(this,Q)}M.accelerometer=requireAccelerometer(),M.altimeter=requireAltimeter(),M.barometer=requireBarometer(),M.gyro=requireGyro(),M.hygrometer=requireHygrometer(),M.magnetometer=requireCompass(),M.orientation=requireOrientation(),M.thermometer=requireThermometer();const j={thermometer:"temperature"},W={SHT31D:{ADDRESSES:{value:[68]},REGISTER:{value:{SOFT_RESET:12450,MEASURE_HIGH_REPEATABILITY:9216}},initialize:{value(k,K){const Q=k.io,ie=W.addressResolver(this,K);Q.i2cConfig(K),Q.i2cWrite(ie,[this.REGISTER.SOFT_RESET>>8,this.REGISTER.SOFT_RESET&255]);const ue={temperature:null,humidity:null},fe=()=>{Q.i2cWrite(ie,[this.REGISTER.MEASURE_HIGH_REPEATABILITY>>8,this.REGISTER.MEASURE_HIGH_REPEATABILITY&255]),setTimeout(()=>{Q.i2cReadOnce(ie,6,we=>{ue.temperature=g(we[0],we[1]),ue.humidity=g(we[3],we[4]),this.emit("data",ue),fe()})},16)};fe()}},identifier:{value(k){return`sht-31d-${W.addressResolver(W.SHT31D,k)}`}}},HTU21D:{ADDRESSES:{value:[64]},REGISTER:{value:{HUMIDITY:229,TEMPERATURE:227,SOFT_RESET:254}},initialize:{value(k,K){const J=k.io,Q=W.addressResolver(this,K);K.delay=5e4,J.i2cConfig(K),J.i2cWrite(Q,this.REGISTER.SOFT_RESET);const ie={temperature:null,humidity:null};let ue=0;const fe=()=>{const we=ue===0,Te=we?this.REGISTER.TEMPERATURE:this.REGISTER.HUMIDITY;J.i2cReadOnce(Q,Te,2,he=>{we?ie.temperature=g(he[0],he[1]):ie.humidity=g(he[0],he[1]),++ue===2&&(ue=0,this.emit("data",ie)),fe()})};fe()}},identifier:{value(k){return`htu-s1d-${W.addressResolver(W.HTU21D,k)}`}}},HIH6130:{ADDRESSES:{value:[39]},initialize:{value(k,K){const J=k.io,Q=W.addressResolver(this,K);J.i2cConfig(K);const ie={humidity:null,temperature:null};let ue=36.65;const fe=()=>{J.i2cWrite(Q,160,[0,0]),setTimeout(()=>{J.i2cWrite(Q,128,[0,0]),J.i2cReadOnce(Q,4,we=>{const Te=we[0]>>6;ie.humidity=f(we[0]&63,we[1]),ie.temperature=f(we[2],we[3]>>2),Te===0&&ue--,Te===1&&ue++,this.emit("data",ie),fe()})},ue)};fe()}},identifier:{value(k){return`hih6130-${W.addressResolver(W.HIH6130,k)}`}}},DHT_I2C_NANO_BACKPACK:{ADDRESSES:{value:[10]},REGISTER:{value:{READ:0}},initialize:{value(k,K){const J=k.io,Q=2;let ie=11;const ue=W.addressResolver(this,K);J.i2cConfig(K);const fe=/(\d{2})/.exec(K.controller),we=fe&&fe.length&&fe[0];we&&(ie=+we,Number.isNaN(ie)&&(ie=11));const Te={temperature:null,humidity:null};J.i2cWrite(ue,[Q,ie]),J.i2cRead(ue,4,he=>{Te.humidity=f(he[0],he[1]),Te.temperature=f(he[2],he[3]),this.emit("data",Te)})}},identifier:{value(k){return`dht_i2c_nano_backpack-${W.addressResolver(W.DHT_I2C_NANO_BACKPACK,k)}`}}},MPU6050:{ADDRESSES:{value:[104,105]},REGISTER:{value:{SETUP:[107,0],READ:59}},initialize:{value(k,K){const Q=k.io,ie=W.addressResolver(this,K),ue={accelerometer:{},temperature:{},gyro:{}};Q.i2cConfig(K),Q.i2cWrite(ie,this.REGISTER.SETUP),Q.i2cRead(ie,this.REGISTER.READ,14,fe=>{ue.accelerometer={x:f(fe[0],fe[1]),y:f(fe[2],fe[3]),z:f(fe[4],fe[5])},ue.temperature=f(fe[6],fe[7]),ue.gyro={x:f(fe[8],fe[9]),y:f(fe[10],fe[11]),z:f(fe[12],fe[13])},this.emit("data",ue)})}},identifier:{value(k){return`mpu-6050-${W.addressResolver(W.MPU6050,k)}`}}},BNO055:{ADDRESSES:{value:[40,41]},REGISTER:{value:{READ:{ACCEL:8,MAG:14,GYRO:20,EULER:26,QUARTERNION:32,TEMP:52},LENGTH:{ACCEL:6,MAG:6,GYRO:6,EULER:6,QUARTERNION:8,TEMP:1},OPR_MODE_ADDR:61,OPR_MODES:{CONFIG:0,ACCONLY:1,MAGONLY:2,GYRONLY:3,ACCMAG:4,ACCGYRO:5,MAGGYRO:6,AMG:7,IMUPLUS:8,COMPASS:9,M4G:10,NDOF_FMC_OFF:11,NDOF:12},PWR_MODE_ADDR:62,PWR_MODES:{NORMAL:0,LOW:1,SUSPEND:2},PAGE_ID_ADDR:7,PAGE_STATES:{ZERO:0},CALIBRATION:53,SYS_TRIGGER:63,UNIT_SEL_ADDR:59,AXIS_MAP_CONFIG_ADDR:65,AXIS_MAP_SIGN_ADDR:66}},initialize:{value(k,K){const J=k.io,Q=K.calibrationMask||192,ie=W.addressResolver(this,K),ue={accelerometer:{x:null,y:null,z:null},gyro:{x:null,y:null,z:null},magnetometer:{x:null,y:null,z:null},orientation:{euler:{heading:null,roll:null,pitch:null},quarternion:{w:null,x:null,y:null,z:null}},temperature:null,calibration:null};J.i2cConfig(K),J.i2cWriteReg(ie,this.REGISTER.OPR_MODE_ADDR,this.REGISTER.OPR_MODES.CONFIG),J.i2cWriteReg(ie,this.REGISTER.PAGE_ID_ADDR,this.REGISTER.PAGE_STATES.ZERO),J.i2cWriteReg(ie,this.REGISTER.SYS_TRIGGER,32),new Promise(we=>{setTimeout(()=>{J.i2cWriteReg(ie,this.REGISTER.PWR_MODE_ADDR,this.REGISTER.PWR_MODES.NORMAL),J.i2cWriteReg(ie,this.REGISTER.SYS_TRIGGER,K.enableExternalCrystal?128:0);const Te=K.axisMap||36;J.i2cWriteReg(ie,this.REGISTER.AXIS_MAP_CONFIG_ADDR,Te);const he=K.axisSign||0;J.i2cWriteReg(ie,this.REGISTER.AXIS_MAP_SIGN_ADDR,he),setTimeout(()=>{J.i2cWriteReg(ie,this.REGISTER.OPR_MODE_ADDR,this.REGISTER.OPR_MODES.NDOF),we()},10)},650)}).then(()=>new Promise(we=>{const Te=()=>{J.i2cReadOnce(ie,this.REGISTER.CALIBRATION,1,he=>{const ce=he[0],Ce=ue.calibration!==ce;ue.calibration=ce,Ce&&this.emit("calibration",ue.calibration),(ce&Q)===Q?(this.emit("calibrated"),we()):Te()})};Te()})).then(()=>{J.i2cRead(ie,this.REGISTER.READ.TEMP,2,we=>{ue.temperature=we[0];const Te=ue.calibration!==we[1];ue.calibration=we[1],this.emit("data",ue),Te&&this.emit("calibration",ue.calibration)}),J.i2cRead(ie,this.REGISTER.READ.ACCEL,18,we=>{ue.accelerometer={x:f(we[1],we[0]),y:f(we[3],we[2]),z:f(we[5],we[4])},ue.magnetometer={x:f(we[7],we[6]),y:f(we[9],we[8]),z:f(we[11],we[10])},ue.gyro={x:f(we[13],we[12]),y:f(we[15],we[14]),z:f(we[17],we[16])},this.emit("data",ue)}),J.i2cRead(ie,this.REGISTER.READ.EULER,14,we=>{ue.orientation.euler={heading:f(we[1],we[0]),roll:f(we[3],we[2]),pitch:f(we[5],we[4])},ue.orientation.quarternion={w:f(we[7],we[6]),x:f(we[9],we[8]),y:f(we[11],we[10]),z:f(we[13],we[12])},this.emit("data",ue)})})}},identifier:{value(k){return`bno055-${W.addressResolver(W.BNO055,k)}`}}},MPL115A2:{ADDRESSES:{value:[96]},REGISTER:{value:{COEFFICIENTS:4,PADC_MSB:0,CONVERT:18}},initialize:{value(k,K){const J=k.io,Q=W.addressResolver(this,K);J.i2cConfig(K);const ie={pressure:null,temperature:null},ue={a0:null,b1:null,b2:null,c12:null},fe=he=>{const ce=g(he[0],he[1])>>6,Ce=g(he[2],he[3])>>6;ie.pressure=ue.a0+(ue.b1+ue.c12*Ce)*ce+ue.b2*Ce,ie.temperature=Ce,this.emit("data",ie),we()};var we=()=>{J.i2cWriteReg(Q,this.REGISTER.CONVERT,0),J.i2cReadOnce(Q,this.REGISTER.PADC_MSB,4,fe)};new Promise(he=>{J.i2cReadOnce(Q,this.REGISTER.COEFFICIENTS,8,ce=>{const Ce=f(ce[0],ce[1]),pe=f(ce[2],ce[3]),Ie=f(ce[4],ce[5]),Le=f(ce[6],ce[7])>>2;ue.a0=Ce/8,ue.b1=pe/8192,ue.b2=Ie/16384,ue.c12=Le/4194304,he()})}).then(we)}},identifier:{value(k){return`mpl115a2-${W.addressResolver(W.MPL115A2,k)}`}}},MPL3115A2:{ADDRESSES:{value:[96]},REGISTER:{value:{STATUS:0,PRESSURE:1,CONFIG:19,BAR_IN_MSB:20,BAR_IN_LSB:21,CONTROL:38}},MASK:{value:{STATUS:{PRESSURE_DATA_READ:4},CONTROL:{SBYB:1,OS128:56,ALTIMETER:128,PRESSURE:0},CONFIG:{TDEFE:1,PDEFE:2,DREM:4}}},initialize:{value(k,K){const Q=k.io;let ie=!1,ue=null,fe=0;const we=W.addressResolver(this,K);let Te=0;const he={pressure:0,altitude:0,temperature:0};typeof K.elevation<"u"&&(ue=K.elevation),ue!==null&&ue<=0&&(fe=Math.abs(ue)+1,ue=1);const ce=Le=>{Q.i2cReadOnce(we,this.REGISTER.STATUS,1,ee=>{ee[0]&this.MASK.STATUS.PRESSURE_DATA_READ?Le():setTimeout(()=>{ce(Le)},100)})},Ce=()=>{const Le=ie?this.MASK.CONTROL.PRESSURE:this.MASK.CONTROL.ALTIMETER,ee=this.MASK.CONTROL.SBYB|this.MASK.CONTROL.OS128|Le;Q.i2cWrite(we,this.REGISTER.CONTROL,ee),ce(()=>{Q.i2cReadOnce(we,this.REGISTER.PRESSURE,6,ae=>{const de=v(ae[1],ae[2],ae[3])>>4,X=g(ae[4],ae[5])>>4;let re;if(he.temperature=X,ie)he.pressure=de,this.emit("data",he);else{const ge=ae[1],ye=ae[2],F=(ae[3]>>4)/16;re=(ge<<8|ye)+F,Te=(Te*3+re)/4,he.altitude=Te-fe}ie=!ie,Ce()})})},pe=[],Ie=()=>{Q.i2cWrite(we,this.REGISTER.CONTROL,59),Q.i2cWrite(we,this.REGISTER.CONTROL,57),setTimeout(()=>{Q.i2cReadOnce(we,this.REGISTER.PRESSURE,6,Le=>{const ee=Le[1],ae=Le[2],X=(Le[3]>>4)/4;if(pe.push((ee<<10|ae<<2)+X),pe.length===4){const ge=(pe[0]+pe[1]+pe[2]+pe[3])/4/(1-ue*225577e-10)**5.255;Q.i2cWrite(we,this.REGISTER.BAR_IN_MSB,ge/2>>8),Q.i2cWrite(we,this.REGISTER.BAR_IN_LSB,ge/2&255),Q.i2cWrite(we,this.REGISTER.CONTROL,187),Q.i2cWrite(we,this.REGISTER.CONTROL,185),setTimeout(()=>{Q.i2cReadOnce(we,this.REGISTER.PRESSURE,6,ye=>{const Oe=ye[1],F=ye[2],Se=(ye[3]>>4)/16;Te=(Oe<<8|F)+Se,Ce()})},550)}else Ie()})},500)};Q.i2cConfig(Object.assign(K,{settings:{stopTX:!0}})),Q.i2cWriteReg(we,45,0),Q.i2cWriteReg(we,this.REGISTER.BAR_IN_MSB,0),Q.i2cWriteReg(we,this.REGISTER.BAR_IN_LSB,0),Q.i2cWriteReg(we,this.REGISTER.CONFIG,this.MASK.CONFIG.TDEFE|this.MASK.CONFIG.PDEFE|this.MASK.CONFIG.DREM),ue!==null?Ie():Ce()}},identifier:{value(k){return`mpl3115a2-${W.addressResolver(W.MPL3115A2,k)}`}}},BMP180:{ADDRESSES:{value:[119]},REGISTER:{value:{COEFFICIENTS:170,READ:0,READ_START:244,READ_RESULT:246}},initialize:{value(k,K){const J=k.io;let Q=null,ie=0;typeof K.elevation<"u"&&(Q=K.elevation),(Q!=null&&Q<=0||Q==null)&&(ie=Math.abs(Q)+1,Q=1);const ue=W.addressResolver(this,K),fe=K.mode||3,we=[5,8,14,26][fe],Te=o.constrain(fe,0,3),he={a1:null,a2:null,a3:null,a4:null,a5:null,a6:null,b1:null,b2:null,b5:null,mb:null,mc:null,md:null};J.i2cConfig(K),new Promise(Ce=>{J.i2cReadOnce(ue,this.REGISTER.COEFFICIENTS,22,pe=>{he.a1=f(pe[0],pe[1]),he.a2=f(pe[2],pe[3]),he.a3=f(pe[4],pe[5]),he.a4=g(pe[6],pe[7]),he.a5=g(pe[8],pe[9]),he.a6=g(pe[10],pe[11]),he.b1=f(pe[12],pe[13]),he.b2=f(pe[14],pe[15]),he.mb=f(pe[16],pe[17]),he.mc=f(pe[18],pe[19]),he.md=f(pe[20],pe[21]),Ce()})}).then(()=>{const Ce={altitude:null,pressure:null,temperature:null};let pe=0;const Ie=()=>{const Le=pe===0,ee=Le?46:52+(Te<<6),ae=Le?2:3,de=Le?5:we;J.i2cWriteReg(ue,this.REGISTER.READ_START,ee),setTimeout(()=>{J.i2cReadOnce(ue,this.REGISTER.READ_RESULT,ae,X=>{let re,ge,ye,Oe,F,H,Se,Me,be,Ne,ze;if(Le)ge=f(X[0],X[1]),ye=(ge-he.a6)*he.a5>>15,Oe=(he.mc<<11)/(ye+he.md)>>0,he.b5=ye+Oe|0,Ce.temperature=(he.b5+8>>4)/10;else{ge=v(X[0],X[1],X[2])>>8-Te,Me=he.b5-4e3,Ne=Me*Me,ze=Ne>>12,ye=he.b2*ze>>11,Oe=he.a2*Me>>11,F=ye+Oe,H=((he.a1*4+F<<Te)+2)/4>>0,ye=he.a3*Me>>13,Oe=he.b1*ze>>16,F=ye+Oe+2>>2,Se=he.a4*(F+32768)>>15,be=(ge-H)*(5e4>>Te),be<o.POW_2_31?re=be*2/Se:re=be/Se*2,re>>=0,ye=(re>>8)*(re>>8),ye=ye*3038>>16,Oe=-7357*re>>16,re+=ye+Oe+3791>>4,Ce.pressure=re;const Xe=re/(1-Q*225577e-10)**5.255,xe=44330*(1-re/Xe**(1/5.255));Ce.altitude=Math.round(xe-ie)}++pe===2&&(pe=0,this.emit("data",Ce)),Ie()})},de)};Ie()})}},identifier:{value(k){return`bmp180-${W.addressResolver(W.BMP180,k)}`}}},BMP280:{ADDRESSES:{value:[119]},REGISTER:{value:{COEFFICIENTS:136,CONFIG:245,MEASURE:244,PRESSURE:247,TEMPERATURE:250,RESET:224}},initialize:{value(k,K){const J=k.io;let Q=null,ie=0;typeof K.elevation<"u"&&(Q=K.elevation),(Q!=null&&Q<=0||Q==null)&&(ie=Math.abs(Q)+1,Q=1);const ue=W.addressResolver(this,K),fe={T1:null,T2:null,T3:null,P1:null,P2:null,P3:null,P4:null,P5:null,P6:null,P7:null,P8:null,P9:null};J.i2cConfig(K),J.i2cWrite(ue,this.REGISTER.RESET,182),new Promise(Te=>{J.i2cReadOnce(ue,this.REGISTER.COEFFICIENTS,24,he=>{fe.T1=g(he[1],he[0]),fe.T2=f(he[3],he[2]),fe.T3=f(he[5],he[4]),fe.P1=g(he[7],he[6]),fe.P2=f(he[9],he[8]),fe.P3=f(he[11],he[10]),fe.P4=f(he[13],he[12]),fe.P5=f(he[15],he[14]),fe.P6=f(he[17],he[16]),fe.P7=f(he[19],he[18]),fe.P8=f(he[21],he[20]),fe.P9=f(he[23],he[22]),Te()})}).then(()=>{J.i2cWrite(ue,this.REGISTER.MEASURE,63);const Te={altitude:null,pressure:null,temperature:null};J.i2cRead(ue,this.REGISTER.PRESSURE,6,he=>{let ce=0,Ce,pe,Ie,Le=O(v(he[0],he[1],he[2])),ee=O(v(he[3],he[4],he[5]));Le>>=4,ee>>=4;const de=(ee>>4)-fe.T1;if(pe=((ee>>3)-(fe.T1<<1))*fe.T2>>11,Ie=(de*de>>12)*fe.T3>>14,Ce=pe+Ie,Te.temperature=(Ce*5+128>>8)/100,pe=void 0,Ie=void 0,pe=O(Ce>>1)-64e3,Ie=((pe>>2)*(pe>>2)>>11)*O(fe.P6),Ie+=pe*O(fe.P5)<<1,Ie=(Ie>>2)+(O(fe.P4)<<16),pe=(fe.P3*((pe>>2)*(pe>>2)>>13)>>3)+(O(fe.P2)*pe>>1)>>18,pe=(o.POW_2_15+pe)*O(fe.P1)>>15,pe===0)return 0;ce=E(O(o.POW_2_20)-Le-(Ie>>12))*3125,ce<o.POW_2_31?ce=(ce<<1>>>0)/E(pe):ce=(ce/E(pe)>>>0)*2,ce=E(ce)>>>0;const X=ce>>3;pe=O(fe.P9)*O(X*X>>13)>>12,Ie=O(ce>>2)*O(fe.P8)>>13,ce=E(O(ce)+(pe+Ie+fe.P7>>4)),Te.pressure=ce;const re=ce/(1-Q*225577e-10)**5.255,ge=44330*(1-ce/re**(1/5.255));Te.altitude=Math.round(ge-ie),this.emit("data",Te)})})}},identifier:{value(k){return`bmp280-${W.addressResolver(W.BMP280,k)}`}}},BME280:{ADDRESSES:{value:[119]},REGISTER:{value:{COEFFICIENTS_TP:136,COEFFICIENTS_H:225,CONFIG:245,MEASURE_H:242,MEASURE_TP:244,PRESSURE:247,TEMPERATURE:250,HUMIDITY:253,RESET:224}},initialize:{value(k,K){const J=k.io;let Q=null,ie=0;typeof K.elevation<"u"&&(Q=K.elevation),(Q!=null&&Q<=0||Q==null)&&(ie=Math.abs(Q)+1,Q=1);const ue=W.addressResolver(this,K),fe={T1:null,T2:null,T3:null,P1:null,P2:null,P3:null,P4:null,P5:null,P6:null,P7:null,P8:null,P9:null,H1:null,H2:null,H3:null,H4:null,H5:null,H6:null};J.i2cConfig(K),J.i2cWrite(ue,this.REGISTER.RESET,182),new Promise(Te=>{Promise.all([new Promise(he=>{J.i2cReadOnce(ue,136,24,ce=>{fe.T1=g(ce[1],ce[0]),fe.T2=f(ce[3],ce[2]),fe.T3=f(ce[5],ce[4]),fe.P1=g(ce[7],ce[6]),fe.P2=f(ce[9],ce[8]),fe.P3=f(ce[11],ce[10]),fe.P4=f(ce[13],ce[12]),fe.P5=f(ce[15],ce[14]),fe.P6=f(ce[17],ce[16]),fe.P7=f(ce[19],ce[18]),fe.P8=O(f(ce[21],ce[20])),fe.P9=O(f(ce[23],ce[22])),he()})}),new Promise(he=>{J.i2cReadOnce(ue,161,1,ce=>{fe.H1=o.u8(ce[0]),he()})}),new Promise(he=>{J.i2cReadOnce(ue,225,8,ce=>{fe.H2=O(f(ce[1],ce[0])),fe.H3=O(ce[2]),fe.H4=O(ce[3]<<4|ce[4]&15),fe.H5=O(ce[5]<<4|ce[4]>>4),fe.H6=o.s8(ce[6]),he()})})]).then(Te)}).then(()=>{J.i2cWrite(ue,this.REGISTER.MEASURE_H,5),J.i2cWrite(ue,this.REGISTER.MEASURE_TP,183);const Te={altitude:null,pressure:null,humidity:null,temperature:null},he=Date.now();J.i2cRead(ue,this.REGISTER.PRESSURE,8,ce=>{if(!n.IS_TEST_MODE&&he+1e3>Date.now())return;let Ce=0,pe,Ie,Le,ee,ae=O(v(ce[0],ce[1],ce[2])),de=O(v(ce[3],ce[4],ce[5]));const X=O(g(ce[6],ce[7]));ae>>=4,de>>=4;const ge=(de>>4)-fe.T1;if(Ie=((de>>3)-(fe.T1<<1))*fe.T2>>11,Le=(ge*ge>>12)*fe.T3>>14,pe=Ie+Le,Te.temperature=(pe*5+128>>8)/100,Ie=void 0,Le=void 0,Ie=O(pe>>1)-64e3,Le=((Ie>>2)*(Ie>>2)>>11)*O(fe.P6),Le+=Ie*O(fe.P5)<<1,Le=(Le>>2)+(O(fe.P4)<<16),Ie=(fe.P3*((Ie>>2)*(Ie>>2)>>13)>>3)+(O(fe.P2)*Ie>>1)>>18,Ie=(o.POW_2_15+Ie)*O(fe.P1)>>15,Ie===0)return 0;Ce=E(O(o.POW_2_20)-ae-(Le>>12))*3125,Ce<o.POW_2_31?Ce=(Ce<<1>>>0)/E(Ie):Ce=(Ce/E(Ie)>>>0)*2,Ce=E(Ce)>>>0;const ye=Ce>>3;Ie=O(fe.P9)*O(ye*ye>>13)>>12,Le=O(Ce>>2)*fe.P8>>13,Ce=E(O(Ce)+(Ie+Le+fe.P7>>4)),Te.pressure=Ce;const Oe=Ce/(1-Q*225577e-10)**5.255,F=44330*(1-Ce/Oe**(1/5.255));Te.altitude=Math.round(F-ie),ee=O(pe-76800),ee=((X<<14)-O(fe.H4<<20)-fe.H5*ee+o.POW_2_14>>15)*((((ee*fe.H6>>10)*((ee*fe.H3>>11)+o.POW_2_15)>>10)+o.POW_2_21)*fe.H2+o.POW_2_13>>14),ee-=((ee>>15)*(ee>>15)>>7)*O(fe.H1)>>4,ee=o.constrain(ee,0,419430400),Te.humidity=E(ee>>12),this.emit("data",Te)})})}},identifier:{value(k){return`bme280-${W.addressResolver(W.BME280,k)}`}}},SI7020:{ADDRESSES:{value:[64]},REGISTER:{value:{HUMIDITY:229,TEMPERATURE:224}},initialize:{value(k,K){const J=k.io,Q=W.addressResolver(this,K);K.delay=5e4,J.i2cConfig(K);const ie={temperature:null,humidity:null};J.i2cRead(Q,this.REGISTER.TEMPERATURE,2,ue=>{ie.temperature=g(ue[0],ue[1]),this.emit("data",ie)}),J.i2cRead(Q,this.REGISTER.HUMIDITY,2,ue=>{ie.humidity=g(ue[0],ue[1]),this.emit("data",ie)})}},identifier:{value(k){return`si7020-${W.addressResolver(W.SI7020,k)}`}}},MS5611:{ADDRESSES:{value:[119]},REGISTER:{value:{COEFFICIENTS:162,READ:0,PRESSURE:64,TEMPERATURE:80,RESET:30}},initialize:{value(k,K){const J=k.io;let Q=null,ie=0;typeof K.elevation<"u"&&(Q=K.elevation),(Q!=null&&Q<=0||Q==null)&&(ie=Math.abs(Q)+1,Q=1);const ue=W.addressResolver(this,K),fe={altitude:null,pressure:null,temperature:null},we=K.mode||5,Te=[1,2,3,4,5,10][we],he={C1:null,C2:null,C3:null,C4:null,C5:null,C6:null},ce=Object.keys(he);K.delay=Te*1e3,J.i2cConfig(K),J.i2cWrite(ue,this.REGISTER.RESET),new Promise(pe=>{setTimeout(()=>{const Ie=ce.map((Le,ee)=>{const ae=this.REGISTER.COEFFICIENTS+ee*2;return new Promise(de=>{J.i2cReadOnce(ue,ae,2,X=>{he[Le]=g(X[0],X[1]),de()})})});Promise.all(Ie).then(pe)},50)}).then(()=>{let pe=0,Ie,Le,ee,ae,de,X,re,ge,ye,Oe;const F=()=>{const H=pe===0,Se=(H?80:64)+we;J.i2cWrite(ue,Se),H?(Le=0,ee=0,ae=0,ge=0,ye=0,Oe=0):(Ie=0,de=0,X=0,re=0),setTimeout(()=>{J.i2cReadOnce(ue,this.REGISTER.READ,3,Me=>{if(H)Le=v(Me[0],Me[1],Me[2]),ee=Le-he.C5*o.POW_2_8,ae=2e3+ee*he.C6/o.POW_2_23,ae<2e3&&(ge=ee**2/o.POW_2_31,ye=5*(ae-2e3)**2/2,Oe=5*(ae-2e3)**2/o.POW_2_2,ae<-1500&&(ye=ye+7*(ae+1500)**2,Oe=Oe+11*(ae+1500)**2/2)),ae-=ge,fe.temperature=ae/100;else{Ie=v(Me[0],Me[1],Me[2]),de=he.C2*o.POW_2_16+he.C4*ee/o.POW_2_7,X=he.C1*o.POW_2_15+he.C3*ee/o.POW_2_8,de-=ye,X-=Oe,re=(Ie*X/o.POW_2_21-de)/o.POW_2_15,fe.pressure=re;const be=re/(1-Q*225577e-10)**5.255,Ne=44330*(1-re/be**(1/5.255));fe.altitude=Ne-ie}++pe===2&&(pe=0,this.emit("data",fe)),F()})},Te)};F()})}},identifier:{value(k){return`ms5611-${W.addressResolver(W.MS5611,k)}`}}},TH02:{ADDRESSES:{value:[64]},COMMAND:{value:{MEASURE_HUMIDITY:1,MEASURE_TEMPERATURE:17}},REGISTER:{value:{STATUS:0,READ:1,CONFIG:3}},initialize:{value(k,K){const J=k.io,Q=W.addressResolver(this,K),ie={temperature:null,humidity:null};let ue=0;J.i2cConfig(Object.assign(K,{settings:{stopTX:!0}}));const fe=()=>{const we=ue===0,Te=we?this.COMMAND.MEASURE_TEMPERATURE:this.COMMAND.MEASURE_HUMIDITY;new Promise(ce=>{J.i2cWrite(Q,this.REGISTER.CONFIG,Te);const Ce=()=>{J.i2cReadOnce(Q,this.REGISTER.STATUS,1,pe=>{pe[0]&1?Ce():ce()})};Ce()}).then(()=>{Promise.all([new Promise(ce=>{J.i2cReadOnce(Q,1,1,Ce=>{ce(Ce[0])})}),new Promise(ce=>{J.i2cReadOnce(Q,2,1,Ce=>{ce(Ce[0])})})]).then(ce=>{we?ie.temperature=(g(ce[0],ce[1])>>2)/32-50:ie.humidity=(g(ce[0],ce[1])>>4)/16-24,++ue===2&&(ue=0,this.emit("data",ie)),fe()})})};fe()}},identifier:{value(k){return`th02-${W.addressResolver(W.TH02,k)}`}}},LSM303C:{ADDRESSES:{value:[29,30]},COMMAND:{value:{ACC_SETUP:[4,63,63,63],MAG_SETUP:[216,96,64,216,8,0]}},REGISTER:{value:{ACC_CTRL_SEQ:[35,32,32,32],ACC_STATUS:39,ACC_OUTX_L:40,ACC_OUTX_H:41,ACC_OUTY_L:42,ACC_OUTY_H:43,ACC_OUTZ_L:44,ACC_OUTZ_H:45,MAG_CTRL_SEQ:[32,33,36,32,35,34],MAG_STATUS:39,MAG_OUTX_L:40,MAG_OUTX_H:41,MAG_OUTY_L:42,MAG_OUTY_H:43,MAG_OUTZ_L:44,MAG_OUTZ_H:45,MAG_TEMP_OUT_L:46,MAG_TEMP_OUT_H:47}},initialize:{value(k,K){const J=.06103515625,Q=.00048828125,ie=k.io,ue=this.freq||40,[fe,we]=this.ADDRESSES,Te={},he={},ce={temperature:0,magnetometer:he,accelerometer:Te},Ce=()=>{ie.i2cConfig(Object.assign({},K,{address:fe})),this.REGISTER.ACC_CTRL_SEQ.forEach((de,X)=>{ie.i2cWrite(fe,de,this.COMMAND.ACC_SETUP[X])})},pe=()=>{ie.i2cConfig(Object.assign({},K,{address:we})),this.REGISTER.MAG_CTRL_SEQ.forEach((de,X)=>{ie.i2cWrite(we,de,this.COMMAND.MAG_SETUP[X])})},Ie=de=>{ie.i2cReadOnce(fe,this.REGISTER.ACC_OUTX_L,6,X=>{Te.x=f(X[1],X[0])*J,Te.y=f(X[3],X[2])*J,Te.z=f(X[5],X[4])*J,de()})},Le=de=>{ie.i2cReadOnce(we,this.REGISTER.MAG_OUTX_L,6,X=>{he.x=f(X[1],X[0])*Q,he.y=f(X[3],X[2])*Q,he.z=f(X[5],X[4])*Q,de()})},ee=de=>{ie.i2cReadOnce(we,this.REGISTER.MAG_TEMP_OUT_L,2,X=>{ce.temperature=f(X[1],X[0]),de()})},ae=()=>{Promise.all([new Promise(Ie),new Promise(Le),new Promise(ee)]).then(()=>{this.emit("data",ce),setTimeout(ae,ue)})};Ce(),pe(),ae()}},identifier:{value(k){return`lsm303c-${W.addressResolver(W.LSM303C,k)}`}}}};W.BMP085=W.BMP180,W.GY521=W.MPU6050,W.SI7021=W.SI7020,W.DHT11_I2C_NANO_BACKPACK=W.DHT_I2C_NANO_BACKPACK,W.DHT21_I2C_NANO_BACKPACK=W.DHT_I2C_NANO_BACKPACK,W.DHT22_I2C_NANO_BACKPACK=W.DHT_I2C_NANO_BACKPACK,W.get=(k,K,J={})=>{let Q,ie,ue;return h.has(k)||h.set(k,{}),Q=h.get(k),ie=W[K].identifier.value(J),Q[ie]||(ue=new s,Object.defineProperties(ue,W[K]),ue.initialize(k,J),Q[ie]=ue),Q[ie]},W.addressResolver=(k,K)=>{const J=k.ADDRESSES,Q=K.address||(Array.isArray(J)?J[0]:J.value[0]);return K.address=Q,Q},W.clear=()=>{h.clear()};const Z={MPU6050:{initialize:{value(k){M.call(this,"MPU6050",k)}},components:{value:[_,C,I]}},BNO055:{initialize:{value(k){const K=u.get(this),J="BNO055";K.calibrationMask=k.calibrationMask||192,W.get(this.board,J,k).on("calibrated",()=>this.emit("calibrated")).on("calibration",Q=>this.emit("calibration",Q)),M.call(this,J,k)}},components:{value:[_,C,A,T,I]},calibration:{get(){return this.orientation.calibration}},isCalibrated:{get(){const{calibrationMask:k}=u.get(this);return(this.orientation.calibration&k)===k}}},MPL115A2:{initialize:{value(k){M.call(this,"MPL115A2",k)}},components:{value:[b,I]}},SHT31D:{initialize:{value(k){M.call(this,"SHT31D",k)}},components:{value:[P,I]}},HTU21D:{initialize:{value(k){M.call(this,"HTU21D",k)}},components:{value:[P,I]}},HIH6130:{initialize:{value(k){M.call(this,"HIH6130",k)}},components:{value:[P,I]}},DHT_I2C_NANO_BACKPACK:{initialize:{value(k){M.call(this,"DHT_I2C_NANO_BACKPACK",k)}},components:{value:[P,I]}},MPL3115A2:{initialize:{value(k){M.call(this,"MPL3115A2",k)}},components:{value:[p,b,I]}},BMP180:{initialize:{value(k){M.call(this,"BMP180",k)}},components:{value:[p,b,I]}},BMP280:{initialize:{value(k){M.call(this,"BMP280",k)}},components:{value:[p,b,I]}},BME280:{initialize:{value(k){M.call(this,"BME280",k)}},components:{value:[p,b,P,I]}},SI7020:{initialize:{value(k){M.call(this,"SI7020",k)}},components:{value:[P,I]}},MS5611:{initialize:{value(k){M.call(this,"MS5611",k)}},components:{value:[p,b,I]}},TH02:{initialize:{value(k){M.call(this,"TH02",k)}},components:{value:[P,I]}},LSM303C:{initialize:{value(k){M.call(this,"LSM303C",k)}},components:{value:[A,I,_]}}};Z.BMP085=Z.BMP180,Z.GY521=Z.MPU6050,Z.SI7021=Z.SI7020,Z.DHT11_I2C_NANO_BACKPACK=Z.DHT_I2C_NANO_BACKPACK,Z.DHT21_I2C_NANO_BACKPACK=Z.DHT_I2C_NANO_BACKPACK,Z.DHT22_I2C_NANO_BACKPACK=Z.DHT_I2C_NANO_BACKPACK;class oe extends s{constructor(K){super(),t.Component.call(this,K=t.Options(K)),t.Controller.call(this,Z,K);let J={};u.set(this,J),this.freq=K.freq||20,typeof this.initialize=="function"&&this.initialize(K),this.isReady=!1,setInterval(()=>{this.isReady&&this.emit("data",this)},this.freq);const Q=this.components.slice();this.components&&this.components.length>0&&this.components.forEach(ie=>{this[ie]instanceof s&&this[ie].on("change",()=>{if(Q.length){const ue=Q.indexOf(ie);ue!==-1&&Q.splice(ue,1)}!Q.length&&!this.isReady&&(this.isReady=!0),this.isReady&&this.emit("change",this,ie)})})}}return oe.Drivers=W,n.IS_TEST_MODE&&(oe.Controllers=Z,oe.purge=()=>{u.clear()}),sip=oe,sip}var accelerometer,hasRequiredAccelerometer;function requireAccelerometer(){if(hasRequiredAccelerometer)return accelerometer;hasRequiredAccelerometer=1;var n={};const t=requireBoard(),s=requireExpander(),o=emitter,{constrain:u,fma:h,int16:f,sum:g,toFixed:v,RAD_TO_DEG:O}=fn,E=new Map,_=10,p="x",b="y",C="z",P=[p,b,C];function A({zeroV:W,sensitivity:Z},oe){const k=E.get(this),K={};k.zeroV=W||this.DEFAULTS.zeroV,k.sensitivity=Z||this.DEFAULTS.sensitivity,this.pins.forEach(function(J,Q){this.io.pinMode(J,this.io.MODES.ANALOG),this.io.analogRead(J,ie=>{const ue=P[Q];K[ue]=ie,oe(K)})},this)}function T(W,Z){const oe=E.get(this);let k=oe.zeroV;if(Array.isArray(k)&&k.length>0){const K=P.indexOf(Z);k=k[K||0]}return(W-k)/oe.sensitivity}const I={ANALOG:{DEFAULTS:{value:{zeroV:478,sensitivity:96}},initialize:{value:A},toGravity:{value:T}},MPU6050:{initialize:{value(W,Z){const oe=E.get(this);oe.sensitivity=W.sensitivity||16384;const{Drivers:k}=requireSip();k.get(this.board,"MPU6050",W).on("data",({accelerometer:K})=>Z(K))}},toGravity:{value(W){return v(W/E.get(this).sensitivity,3)}}},BNO055:{initialize:{value(W,Z){const oe=E.get(this);oe.sensitivity=100;const{Drivers:k}=requireSip();k.get(this.board,"BNO055",W).on("data",({accelerometer:K})=>Z(K))}},toGravity:{value(W){return v(W/E.get(this).sensitivity,2)}}},ADXL335:{DEFAULTS:{value:{zeroV:330,sensitivity:66.5}},initialize:{value:A},toGravity:{value(W,Z){return v(T.call(this,W,Z),3)}}},ADXL345:{ADDRESSES:{value:[83]},REGISTER:{value:{POWER:45,DATA_FORMAT:49,DATAX0:50}},initialize:{value(W,Z){const{Drivers:oe}=requireSip(),k=oe.addressResolver(this,W),K=6;this.io.i2cConfig(W),this.io.i2cWrite(k,this.REGISTER.POWER,0),this.io.i2cWrite(k,this.REGISTER.POWER,8);const J=8,Q={2:0,4:1,8:2,16:3}[W.range||2];this.io.i2cWrite(k,this.REGISTER.DATA_FORMAT,J|Q),this.io.i2cRead(k,this.REGISTER.DATAX0,K,ie=>{Z({x:f(ie[1],ie[0]),y:f(ie[3],ie[2]),z:f(ie[5],ie[4])})})}},toGravity:{value(W){return v(W*.00390625,8)}}},MMA7361:{DEFAULTS:{value:{zeroV:[372,372,287],sensitivity:170}},initialize:{value(W,Z){const oe=E.get(this);W.sleepPin!==void 0&&(oe.sleepPin=W.sleepPin,this.io.pinMode(oe.sleepPin,1),this.io.digitalWrite(oe.sleepPin,1)),A.call(this,W,Z)}},toGravity:{value(W,Z){return v(T.call(this,W,Z),3)}},enabledChanged:{value(W){const Z=E.get(this);Z.sleepPin!==void 0&&this.io.digitalWrite(Z.sleepPin,W?1:0)}}},MMA8452:{ADDRESSES:{value:[29]},REGISTER:{value:{STATUS:0,OUT_X_MSB:1,XYZ_DATA_CFG:14,PULSE_CFG:33,PULSE_SRC:34,PULSE_THSX:35,PULSE_THSY:36,PULSE_THSZ:37,PULSE_TMLT:38,PULSE_LTCY:39,PULSE_WIND:40,CTRL_REG1:42,CTRL_REG4:46,CTRL_REG5:47}},initialize:{value(W,Z){const{Drivers:oe}=requireSip(),k=oe.addressResolver(this,W),K=E.get(this),J=[800,400,200,100,50,12,6],Q=J.indexOf(W.odr||800),ie=W.range||2,ue={2:0,4:1,8:2}[ie];W.taps=W.taps||{x:!1,y:!1,z:!0};const fe={x:W.taps.x?8:128,y:W.taps.y?8:128,z:W.taps.z?8:128};K.scale=ie;const we={x:null,y:null,z:null};if(this.io.i2cConfig(Object.assign(W,{settings:{stopTX:!1}})),Q===-1)throw new RangeError("Invalid odr. Expected one of: 800,  400,  200,  100,  50,  12,  6");let Te=8;Te|=Q<<3,this.io.i2cWriteReg(k,this.REGISTER.CTRL_REG1,Te),this.io.i2cWriteReg(k,this.REGISTER.XYZ_DATA_CFG,ue);let he=0;fe.x&128||(he|=3,this.io.i2cWriteReg(k,this.REGISTER.PULSE_THSX,fe.x)),fe.y&128||(he|=12,this.io.i2cWriteReg(k,this.REGISTER.PULSE_THSY,fe.y)),fe.z&128||(he|=48,this.io.i2cWriteReg(k,this.REGISTER.PULSE_THSZ,fe.z)),this.io.i2cWriteReg(k,this.REGISTER.PULSE_CFG,he|64),this.io.i2cWriteReg(k,this.REGISTER.PULSE_TMLT,60/(1e3/J[Q])),this.io.i2cWriteReg(k,this.REGISTER.PULSE_LTCY,200/(1e3/J[Q])),this.io.i2cWriteReg(k,this.REGISTER.PULSE_WIND,255),Te|=1,this.io.i2cWriteReg(k,this.REGISTER.CTRL_REG1,Te),this.io.i2cRead(k,this.REGISTER.STATUS,7,ce=>{(ce.shift()&8)>>>3&&(we.x=f(ce[0],ce[1])>>4,we.y=f(ce[2],ce[3])>>4,we.z=f(ce[4],ce[5])>>4,Z(we))}),this.io.i2cRead(k,this.REGISTER.PULSE_SRC,1,ce=>{const Ce=ce[0],pe=Ce&127;Ce&128&&(this.emit("tap"),pe>>2&1&&(this.emit("tap:single"),pe>>3&1&&this.emit("tap:double")))})}},toGravity:{value(W){return v(W/(2048*E.get(this).scale),4)}}},MMA7660:{ADDRESSES:{value:[76]},REGISTER:{value:{XOUT:0,MODE:7,SR:8}},initialize:{value(W,Z){const{Drivers:oe}=requireSip(),k=oe.addressResolver(this,W),K=3,J=E.get(this);J.sensitivity=21.33,this.io.i2cConfig(W),this.io.i2cWrite(k,this.REGISTER.MODE,0),this.io.i2cWrite(k,this.REGISTER.SR,7),this.io.i2cWrite(k,this.REGISTER.MODE,1),this.io.i2cRead(k,this.REGISTER.XOUT,K,Q=>{Z({x:Q[0]&63,y:Q[1]&63,z:Q[2]&63})})}},toGravity:{value(W){return v(W/E.get(this).sensitivity,3)}}},ESPLORA:{DEFAULTS:{value:{zeroV:[320,330,310],sensitivity:170}},initialize:{value(W,Z){this.pins=[5,11,6],A.call(this,W,Z)}},toGravity:{value(W,Z){return v(T.call(this,W,Z),2)}}},LIS3DH:{ADDRESSES:{value:[24]},REGISTER:{value:{OUT_X_L:40,CTRL_REG1:32,CTRL_REG2:33,CTRL_REG3:34,CTRL_REG4:35,CTRL_REG5:36,TEMP_CFG_REG:31,CLICK_CFG:56,CLICK_SRC:57,CLICK_THS:58,TIME_LIMIT:59,TIME_LATENCY:60,TIME_WINDOW:61}},initialize:{value(W,Z){const oe=E.get(this),k=W.address||24;let K={2:0,4:1,8:2,16:3}[W.range||4];K===void 0&&(K=1);let J=[16380,8190,4096,1365][K];J===void 0&&(J=1);let Q=[80,40,20,10][K];Q===void 0&&(Q=10),oe.divider=J,oe.expander=s.get({address:k,controller:this.controller,bus:this.bus});const ie=136|K<<4;oe.expander.i2cWrite(k,this.REGISTER.CTRL_REG4,ie),oe.expander.i2cReadOnce(k,this.REGISTER.CTRL_REG1,1,ue=>{let fe=ue[0];fe&=-241,fe|=96,oe.expander.i2cWrite(k,this.REGISTER.CTRL_REG1,fe),oe.expander.i2cRead(k,this.REGISTER.OUT_X_L|128,6,Ce=>{Z({x:f(Ce[1],Ce[0]),y:f(Ce[3],Ce[2]),z:f(Ce[5],Ce[4])})}),oe.expander.i2cWrite(k,this.REGISTER.CTRL_REG3,128),oe.expander.i2cWrite(k,this.REGISTER.CTRL_REG5,8),oe.expander.i2cWrite(k,this.REGISTER.CLICK_CFG,42);const we=10,Te=20,he=255;oe.expander.i2cWrite(k,this.REGISTER.CLICK_THS,Q),oe.expander.i2cWrite(k,this.REGISTER.TIME_LIMIT,we),oe.expander.i2cWrite(k,this.REGISTER.TIME_LATENCY,Te),oe.expander.i2cWrite(k,this.REGISTER.TIME_WINDOW,he);let ce=null;oe.expander.i2cRead(k,this.REGISTER.CLICK_SRC,1,Ce=>{const pe=Ce[0],Ie=Date.now();ce===null&&(ce=Ie-101),!(Ie<ce+100)&&pe!==0&&pe&48&&(ce=Ie,this.emit("tap"),pe&16&&this.emit("tap:single"),pe&32&&(this.emit("tap:single"),this.emit("tap:double")))})})}},toGravity:{value(W){return v(W/E.get(this).divider,3)}}},LSM303C:{initialize:{value(W,Z){const{Drivers:oe}=requireSip();oe.get(this.board,"LSM303C",W).on("data",({accelerometer:k})=>Z(k))}},toGravity:{value(W){return v(W,2)}}}};I.TINKERKIT=I.ANALOG,I.MMA8452Q=I.MMA8452,I.DEFAULT=I.ANALOG;function M(W,Z,oe){let k;return k=W*W,k=h(Z,Z,k),k=h(oe,oe,k),Math.sqrt(k)}class j extends o{constructor(Z){super();const oe={enabled:!0,x:{value:0,previous:0,stash:[],orientation:null,inclination:null,acceleration:null,calibration:[]},y:{value:0,previous:0,stash:[],orientation:null,inclination:null,acceleration:null,calibration:[]},z:{value:0,previous:0,stash:[],orientation:null,inclination:null,acceleration:null,calibration:[]}};t.Component.call(this,Z=t.Options(Z)),t.Controller.call(this,I,Z),this.toGravity||(this.toGravity=Z.toGravity||(k=>k)),this.enabledChanged||(this.enabledChanged=()=>{}),E.set(this,oe),typeof this.initialize=="function"&&this.initialize(Z,k=>{let K=!1;oe.enabled&&(Object.keys(k).forEach(J=>{const Q=k[J],ie=oe[J];if(Z.autoCalibrate&&ie.calibration.length<_){const ue=P.indexOf(J);ie.calibration.push(Q),Array.isArray(oe.zeroV)||(oe.zeroV=[]),oe.zeroV[ue]=g(ie.calibration)/ie.calibration.length,J===C&&(oe.zeroV[ue]-=oe.sensitivity)}if(ie.stash.length===0)for(let ue=0;ue<5;ue++)ie.stash[ue]=Q;ie.previous=ie.value,ie.stash.shift(),ie.stash.push(Q),ie.value=g(ie.stash)/5|0,this.acceleration!==ie.acceleration&&(ie.acceleration=this.acceleration,K=!0,this.emit("acceleration",ie.acceleration)),this.orientation!==ie.orientation&&(ie.orientation=this.orientation,K=!0,this.emit("orientation",ie.orientation)),this.inclination!==ie.inclination&&(ie.inclination=this.inclination,K=!0,this.emit("inclination",ie.inclination))}),this.emit("data",{x:oe.x.value,y:oe.y.value,z:oe.z.value}),K&&this.emit("change",{x:this.x,y:this.y,z:this.z}))}),Object.defineProperties(this,{hasAxis:{writable:!0,value(k){return oe[k]?oe[k].stash.length>0:!1}},enable:{value(){return oe.enabled=!0,this.enabledChanged(!0),this}},disable:{value(){return oe.enabled=!1,this.enabledChanged(!1),this}},zeroV:{get(){return oe.zeroV}},pitch:{get(){const k=this.x,K=this.y,J=this.z,Q=this.hasAxis(C)?Math.atan2(k,Math.hypot(K,J)):Math.asin(u(k,-1,1));return v(Q*O,2)}},roll:{get(){const k=this.x,K=this.y,J=this.z,Q=this.hasAxis(C)?Math.atan2(K,Math.hypot(k,J)):Math.asin(u(K,-1,1));return v(Q*O,2)}},x:{get(){return this.toGravity(oe.x.value,p)}},y:{get(){return this.toGravity(oe.y.value,b)}},z:{get(){return this.hasAxis(C)?this.toGravity(oe.z.value,C):0}},acceleration:{get(){return M(this.x,this.y,this.z)}},inclination:{get(){return Math.atan2(this.y,this.x)*O}},orientation:{get(){const k=Math.abs,K=this.x,J=this.y,Q=this.hasAxis(C)?this.z:1,ie=k(K),ue=k(J),fe=k(Q);return ie<ue&&ie<fe?K>0?1:-1:ue<ie&&ue<fe?J>0?2:-2:fe<ie&&fe<ue?Q>0?3:-3:0}}})}}return n.IS_TEST_MODE&&(j.Controllers=I,j.purge=function(){E.clear()}),accelerometer=j,accelerometer}const SI=1.70158,SIO=1.70158*1.525,SB=7.5625,HALF=.5,{PI,cos,sin,sqrt}=Math,ease$1={};ease$1.linear=n=>n;ease$1.inQuad=n=>n*n;ease$1.outQuad=n=>n*(2-n);ease$1.inOutQuad=n=>(n*=2,n<1?HALF*n*n:-HALF*(--n*(n-2)-1));ease$1.inCube=n=>n*n*n;ease$1.outCube=n=>--n*n*n+1;ease$1.inOutCube=n=>(n*=2,n<1?HALF*(n*n*n):HALF*((n-=2)*n*n+2));ease$1.inQuart=n=>n*n*n*n;ease$1.outQuart=n=>1- --n*(n*n*n);ease$1.inOutQuart=n=>(n*=2,n<1?HALF*(n*n*n*n):-HALF*((n-=2)*(n*n*n)-2));ease$1.inQuint=n=>n*n*n*n*n;ease$1.outQuint=n=>--n*(n*n*n*n)+1;ease$1.inOutQuint=n=>(n*=2,n<1?HALF*(n*n*n*n*n):HALF*((n-=2)*(n*n*n*n)+2));ease$1.inSine=n=>1-cos(n*PI/2);ease$1.outSine=n=>sin(n*PI/2);ease$1.inOutSine=n=>HALF*(1-cos(PI*n));ease$1.inExpo=n=>n===0?0:Math.pow(1024,n-1);ease$1.outExpo=n=>n===1?n:1-Math.pow(2,-10*n);ease$1.inOutExpo=n=>n===0?0:n===1?1:(n*=2)<1?HALF*Math.pow(1024,n-1):HALF*(-Math.pow(2,-10*(n-1))+2);ease$1.inCirc=n=>1-sqrt(1-n*n);ease$1.outCirc=n=>sqrt(1- --n*n);ease$1.inOutCirc=n=>(n*=2,n<1?-HALF*(sqrt(1-n*n)-1):HALF*(sqrt(1-(n-=2)*n)+1));ease$1.inBack=n=>n*n*((SI+1)*n-SI);ease$1.outBack=n=>--n*n*((SI+1)*n+SI)+1;ease$1.inOutBack=n=>(n*=2)<1?HALF*(n*n*((SIO+1)*n-SIO)):HALF*((n-=2)*n*((SIO+1)*n+SIO)+2);ease$1.outBounce=n=>n<1/2.75?SB*n*n:n<2/2.75?SB*(n-=1.5/2.75)*n+.75:n<2.5/2.75?SB*(n-=2.25/2.75)*n+.9375:SB*(n-=2.625/2.75)*n+.984375;ease$1.inBounce=n=>1-ease$1.outBounce(1-n);ease$1.inOutBounce=n=>n<HALF?ease$1.inBounce(n*2)*HALF:ease$1.outBounce(n*2-1)*HALF+HALF;const exportables={};Object.keys(ease$1).forEach(n=>{exportables[n.toLowerCase()]=ease$1[n]});var easing=new Proxy({},{get(n,t){return exportables[t.replace(/([a-z])([A-Z])/g,"$1$2").toLowerCase()]}}),temporal$1,hasRequiredTemporal;function requireTemporal(){if(hasRequiredTemporal)return temporal$1;hasRequiredTemporal=1;var n=eventsExports.EventEmitter,t=requireUtil(),s=1e6,o=new n,u={},h=Date.now(),f=!1,g=commonjsGlobal.setImmediate||process$1.nextTick,v=function(){var P=process$1.hrtime();return Math.floor((P[0]*1e9+P[1])/s)},O=function(){return Date.now()},E=O;function _(P){if(!(this instanceof _))return new _(P);this.called=0,this.now=this.calledAt=E(),s!==1e6&&(P.time=~~(P.time*(1e6/s))),this.isRunnable=!0,this.later=this.now+P.time,this.task=P.task,this.type=P.type,this.time=P.time,this.later>h&&(h=this.later),u[this.later]||(u[this.later]=[]),u[this.later].push(this)}t.inherits(_,n),_.deriveOp=function(P,A){return A!=="task"?A:P},_.prototype.stop=function(){this.isRunnable=!1,this.emit("stop")};function p(P){this.refs=[],this.add(P)}t.inherits(p,n),p.prototype.stop=function(){this.refs.forEach(function(P){P.stop()}),this.emit("stop")},p.prototype.add=function(P){var A,T,I,M;for(this.cumulative=this.cumulative||0;P.length;)T=P.shift(),A=Object.keys(T).reduce(_.deriveOp,""),this.cumulative+=T[A],P.length===0&&(I=T.task,T.task=j=>{I.call(this,j),this.emit("end",j),this.cumulative=0}),A==="loop"&&P.length===0?M=o.delay(this.cumulative-T[A],()=>{M=o.loop(T[A],T.task),this.refs.push(M)}):M=o[A](this.cumulative,T.task),this.refs.push(M)},o.queue=function(P){var A=new p(P);return C(),A};var b=E();function C(){f||(f=!0,o.emit("busy"));var P=E(),A=[],T=!0,I,M;for(h<=P&&(T=!1),M=b;M<=P;M++)[].push.apply(A,u[M]||[]);if(A.length){for(;A.length;)I=A.shift(),I.isRunnable&&(I.called++,I.calledAt=P,I.task.call(I,I)),I.type==="loop"&&I.isRunnable&&(T=!0,I.later=P+I.time,I.later>h&&(h=I.later),u[I.later]||(u[I.later]=[]),I.isRunnable&&u[I.later].push(I));for(M=b;M<=P;M++)delete u[M];A.length=0}b=P,T?g(C):(f=!1,o.emit("idle"))}return["loop","delay"].forEach(function(P){o[P]=function(A,T){typeof A=="function"&&(T=A,A=10);var I=new _({time:A,type:P,task:T});return f||C(),I}}),o.wait=o.defer=o.delay,o.repeat=function(P,A,T){return o.loop(A,function(I){T(I),I.called===P&&this.stop()})},o.clear=function(){f=!1,o.removeAllListeners(),u={}},o.resolution=function(P){P===.1||P===.01?(s=1e6*P,E=v):(s=1e6,E=O),b=E()},temporal$1=o,temporal$1}const Emitter$c=emitter,ease=easing,{cloneDeep,constrain:constrain$4}=fn;let temporal,temporalTTL=5e3,Animation$5=class ai extends Emitter$c{constructor(t){super(),temporal||(temporal=requireTemporal()),Object.assign(this,new ai.Segment),this.defaultTarget=t||{}}enqueue(t={}){return typeof t.target>"u"&&(t.target=this.defaultTarget),this.segments.push(t),!this.paused&&!this.isRunning&&this.next(),this}next(){return this.isRunning?this:(this.isRunning=!0,this.segments.length>0?(Object.assign(this,new ai.Segment(this.segments.shift())),this.paused=this.currentSpeed===0,this.onstart&&this.onstart(),this.normalizeKeyframes(),this.reverse&&(this.currentSpeed*=-1),this.currentSpeed!==0?this.play():this.paused=!0):this.playLoop.stop(),this)}pause(){this.emit("animation:pause"),this.playLoop&&this.playLoop.stop(),this.paused=!0,this.onpause&&this.onpause()}stop(){this.emit("animation:stop"),this.segments=[],this.isRunning=!1,this.playLoop&&this.playLoop.stop(),this.onstop&&this.onstop()}speed(t){return typeof t>"u"?this.currentSpeed:(this.currentSpeed=t,this.scaledDuration=this.duration/Math.abs(this.currentSpeed),this.startTime=Date.now()-this.scaledDuration*this.progress,this.endTime=this.startTime+this.scaledDuration,this.paused||this.play(),this)}loopFunction({calledAt:t}){const s=this.calculateProgress(t),o=this.findIndices(s);this.target[ai.render](this.tweenedValue(o,s)),t>this.fallBackTime&&(this.fallBackTime=1/0,this.playLoop&&this.playLoop.stop(),this.playLoop=new ai.TemporalFallback(this)),(this.progress===1&&!this.reverse||s===this.loopback&&this.reverse)&&(this.loop||this.metronomic&&!this.reverse?(this.onloop&&this.onloop(),this.metronomic&&(this.reverse=!this.reverse),this.normalizeKeyframes(),this.progress=this.loopback,this.startTime=Date.now()-this.scaledDuration*this.progress,this.endTime=this.startTime+this.scaledDuration):(this.isRunning=!1,this.oncomplete&&process$1.nextTick(()=>this.oncomplete()),this.segments.length>0?process$1.nextTick(()=>this.next()):this.stop()))}play(){const t=Date.now();this.playLoop&&this.playLoop.stop(),this.paused=!1,this.isRunning=!0,this.scaledDuration=this.duration/Math.abs(this.currentSpeed),this.startTime=t-this.scaledDuration*this.progress,this.endTime=this.startTime+this.scaledDuration,this.fallBackTime=t+temporalTTL,this.frameCount=0,this.fps&&(this.rate=1e3/this.fps),this.rate=this.rate|0,this.playLoop=temporal.loop(this.rate,s=>this.loopFunction(s))}findIndices(t){const s={left:null,right:null};return s.right=this.cuePoints.findIndex(o=>o>=t),s.left=s.right===0?0:s.right-1,s}calculateProgress(t){let s=(t-this.startTime)/this.scaledDuration;return s>1&&(s=1),this.progress=s,this.reverse&&(s=1-s),constrain$4(ease[this.easing](s),0,1)}tweenedValue(t,s){const o={duration:null,progress:null};return this.normalizedKeyFrames.map(h=>{const f={left:null,right:null};for(f.left=t.left;f.left>-1&&h[f.left]===null;f.left--);f.right=h.findIndex((E,_)=>_>=t.right&&E!==null),o.duration=this.cuePoints[f.right]-this.cuePoints[f.left],o.progress=(s-this.cuePoints[f.left])/o.duration,Number.isFinite(o.progress)||(o.progress=this.reverse?0:1);const g=h[f.left],v=h[f.right];o.progress=ease[v.easing](o.progress);let O;return v.position?O=v.position.map((E,_)=>(E-g.position[_])*o.progress+g.position[_]):typeof v.value=="number"&&typeof g.value=="number"?O=(v.value-g.value)*o.progress+g.value:O=this.target[ai.keys].reduce((E,_)=>(E[_]=(v.value[_]-g.value[_])*o.progress+g.value[_],E),{}),O})}normalizeKeyframes(){let t,s=cloneDeep(this.keyFrames);const o=this.cuePoints;return s=this.target[ai.normalize](s),Array.isArray(s[0])||(s=[s]),s.forEach(function(u){for(let h=u.length;h<o.length;h++)u.push(null);u.forEach((h,f,g)=>{h!==null?(typeof h!="object"&&(h={step:h,easing:"linear"}),typeof h.step<"u"&&(h.value=h.step===!1?t:t+h.step),h.easing||(h.easing="linear"),typeof h.copyValue<"u"&&(h.value=g[h.copyValue].value),h.copyFrame&&(h=g[h.copyFrame]),t=h.value):f===g.length-1?h={value:t,easing:"linear"}:h=null,g[f]=h},this)}),this.normalizedKeyFrames=s,this}};Animation$5.keys="@@keys";Animation$5.normalize="@@normalize";Animation$5.render="@@render";Animation$5.TemporalFallback=class{constructor(n){this.interval=setInterval(()=>{n.loopFunction({calledAt:Date.now()})},n.rate)}stop(){this.interval&&clearInterval(this.interval)}};Animation$5.Segment=class{constructor(n){this.cuePoints=[0,1],this.duration=1e3,this.easing="linear",this.loop=!1,this.loopback=0,this.metronomic=!1,this.currentSpeed=1,this.progress=0,this.fps=60,this.rate=1e3/60,this.paused=!1,this.isRunning=!1,this.segments=[],this.onstart=null,this.onpause=null,this.onstop=null,this.oncomplete=null,this.onloop=null,n&&(Object.assign(this,n),n.segments&&(this.segments=n.segments.slice()))}};var animation=Animation$5;const Emitter$b=emitter;let shared;class Bank{constructor(t){this.address=t.address,this.io=t.io,this.io.i2cConfig(t)}read(t,s,o){t?this.io.i2cRead(this.address,t,s,o):this.io.i2cRead(this.address,s,o)}write(t,s){Array.isArray(s)||(s=[s]),this.io.i2cWrite(this.address,t,s)}}let EVS$5=class Zn extends Emitter$b{constructor({io:t}){if(super(),shared)return shared;this.bank={a:new Bank({address:Zn.BANK_A,io:t}),b:new Bank({address:Zn.BANK_B,io:t})},shared=this}setup({bank:t,mode:s},o){this.bank[t].write(s,[o])}read(t,s,o,u){t.sensor&&t.offset&&!Zn.isRawSensor(t)&&(s+=t.offset),this.bank[t.bank].read(s,o,u)}write({bank:t},s,o){this.bank[t].write(s,o)}};EVS$5.shieldPort=n=>{const t=EVS$5[n];if(t===void 0)throw new Error("Invalid EVShield pin name");let s,o,u,h,f,g,v,O=!1;return n.startsWith("BA")?(s=EVS$5.BANK_A,u="a"):(s=EVS$5.BANK_B,u="b"),n.includes("M")&&(h=n.endsWith("M1")?EVS$5.S1:EVS$5.S2),n.includes("S")&&(O=n.endsWith("S1"),o=O?EVS$5.S1_ANALOG:EVS$5.S2_ANALOG,f=O?EVS$5.S1_MODE:EVS$5.S2_MODE,g=O?EVS$5.S1_OFFSET:EVS$5.S2_OFFSET,v=O?EVS$5.S1:EVS$5.S2),{address:s,analog:o,bank:u,mode:f,motor:h,offset:g,port:t,sensor:v}};EVS$5.isRawSensor=({analog:n})=>n===EVS$5.S1_ANALOG||n===EVS$5.S2_ANALOG;EVS$5.BAS1=1;EVS$5.BAS2=2;EVS$5.BBS1=3;EVS$5.BBS2=4;EVS$5.BAM1=5;EVS$5.BAM2=6;EVS$5.BBM1=7;EVS$5.BBM2=8;EVS$5.BANK_A=26;EVS$5.BANK_B=27;EVS$5.S1=1;EVS$5.S2=2;EVS$5.M1=1;EVS$5.M2=2;EVS$5.MM=3;EVS$5.Type_NONE=0;EVS$5.Type_SWITCH=1;EVS$5.Type_ANALOG=2;EVS$5.Type_I2C=9;EVS$5.Type_NXT_LIGHT_REFLECTED=3;EVS$5.Type_NXT_LIGHT=4;EVS$5.Type_NXT_COLOR=13;EVS$5.Type_NXT_COLOR_RGBRAW=4;EVS$5.Type_NXT_COLORRED=14;EVS$5.Type_NXT_COLORGREEN=15;EVS$5.Type_NXT_COLORBLUE=16;EVS$5.Type_NXT_COLORNONE=17;EVS$5.Type_DATABIT0_HIGH=64;EVS$5.S1_MODE=111;EVS$5.S1_ANALOG=112;EVS$5.S1_OFFSET=0;EVS$5.S2_MODE=163;EVS$5.S2_ANALOG=164;EVS$5.S2_OFFSET=52;EVS$5.Type_EV3_LIGHT_REFLECTED=0;EVS$5.Type_EV3_LIGHT=1;EVS$5.Type_EV3_COLOR=2;EVS$5.Type_EV3_COLOR_REFRAW=3;EVS$5.Type_EV3_COLOR_RGBRAW=4;EVS$5.Type_EV3_TOUCH=18;EVS$5.Type_EV3=19;EVS$5.Light=131;EVS$5.Bump=132;EVS$5.ColorMeasure=131;EVS$5.Proximity=131;EVS$5.Touch=131;EVS$5.Ultrasonic=129;EVS$5.Mode=129;EVS$5.Light_Bytes=2;EVS$5.Analog_Bytes=2;EVS$5.Bump_Bytes=1;EVS$5.ColorMeasure_Bytes=2;EVS$5.Proximity_Bytes=2;EVS$5.Touch_Bytes=1;EVS$5.Motor_1=1;EVS$5.Motor_2=2;EVS$5.Motor_Both=3;EVS$5.Motor_Next_Action_Float=0;EVS$5.Motor_Next_Action_Brake=1;EVS$5.Motor_Next_Action_BrakeHold=2;EVS$5.Motor_Stop=96;EVS$5.Motor_Reset=82;EVS$5.Motor_Reverse=0;EVS$5.Motor_Forward=1;EVS$5.Motor_Move_Absolute=0;EVS$5.Motor_Move_Relative=1;EVS$5.Motor_Completion_Dont_Wait=0;EVS$5.Motor_Completion_Wait_For=1;EVS$5.Speed_Full=90;EVS$5.Speed_Medium=60;EVS$5.Speed_Slow=25;EVS$5.CONTROL_SPEED=1;EVS$5.CONTROL_RAMP=2;EVS$5.CONTROL_RELATIVE=4;EVS$5.CONTROL_TACHO=8;EVS$5.CONTROL_BRK=16;EVS$5.CONTROL_ON=32;EVS$5.CONTROL_TIME=64;EVS$5.CONTROL_GO=128;EVS$5.STATUS_SPEED=1;EVS$5.STATUS_RAMP=2;EVS$5.STATUS_MOVING=4;EVS$5.STATUS_TACHO=8;EVS$5.STATUS_BREAK=16;EVS$5.STATUS_OVERLOAD=32;EVS$5.STATUS_TIME=64;EVS$5.STATUS_STALL=128;EVS$5.COMMAND=65;EVS$5.VOLTAGE=110;EVS$5.SETPT_M1=66;EVS$5.SPEED_M1=70;EVS$5.TIME_M1=71;EVS$5.CMD_B_M1=72;EVS$5.CMD_A_M1=73;EVS$5.SETPT_M2=74;EVS$5.SPEED_M2=78;EVS$5.TIME_M2=79;EVS$5.CMD_B_M2=80;EVS$5.CMD_A_M2=81;EVS$5.POSITION_M1=82;EVS$5.POSITION_M2=86;EVS$5.STATUS_M1=90;EVS$5.STATUS_M2=91;EVS$5.TASKS_M1=92;EVS$5.TASKS_M2=93;EVS$5.ENCODER_PID=94;EVS$5.SPEED_PID=100;EVS$5.PASS_COUNT=106;EVS$5.TOLERANCE=107;EVS$5.BTN_PRESS=218;EVS$5.RGB_LED=215;EVS$5.CENTER_RGB_LED=222;var evshield=EVS$5,define_process_env_default$h={};const Board$m=requireBoard(),Collection$c=collection,Emitter$a=emitter,EVS$4=evshield,Fn$9=fn,priv$l=new Map,Pins$6=Board$m.Pins,aliases$1={down:["down","press"],up:["up","release"]},Controllers$f={DEFAULT:{initialize:{value(n,t){const s=priv$l.get(this);Pins$6.isFirmata(this)&&typeof n.pinValue=="string"&&n.pinValue.length>1&&n.pinValue[0]==="A"&&(n.pinValue=this.io.analogPins[+n.pinValue.slice(1)]),this.pin=Number.isNaN(+n.pinValue)?n.pinValue:+n.pinValue,this.io.pinMode(this.pin,this.io.MODES.INPUT),this.pullup&&this.io.digitalWrite(this.pin,this.io.HIGH),this.pulldown&&this.io.digitalWrite(this.pin,this.io.LOW),this.io.digitalRead(this.pin,o=>{o!==s.last&&t(o)})}},toBoolean:{writable:!0,value(n){return n===this.downValue}}},TINKERKIT:{initialize:{value(n,t){const s=priv$l.get(this);let o=0;this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,u=>{u=u>512?1:0,u!==o&&u!==s.last&&t(u),o=u})}},toBoolean:{writable:!0,value(n){return n===this.downValue}}},EVS_EV3:{initialize:{value(n,t){const s=priv$l.get(this);s.previous=0,s.shield=EVS$4.shieldPort(n.pin),s.register=EVS$4.Touch,s.ev3=new EVS$4(Object.assign(n,{io:this.io})),s.ev3.setup(s.shield,EVS$4.Type_EV3_TOUCH),s.ev3.read(s.shield,EVS$4.Touch,EVS$4.Touch_Bytes,o=>{const u=o[0];s.previous!==u&&t(u),s.previous=u})}},toBoolean:{writable:!0,value(n){return n===this.downValue}}},EVS_NXT:{initialize:{value(n,t){const s=priv$l.get(this);s.previous=0,s.shield=EVS$4.shieldPort(n.pin),s.ev3=new EVS$4(Object.assign(n,{io:this.io})),s.ev3.setup(s.shield,EVS$4.Type_ANALOG),s.ev3.read(s.shield,s.shield.analog,EVS$4.Analog_Bytes,o=>{let u=o[0]|o[1]<<8;u=u<300?1:0,s.previous!==u&&t(u),s.previous=u})}},toBoolean:{writable:!0,value(n){return n===this.downValue}}}};class Button extends Emitter$a{constructor(t){super();let s,o=!1,u=1,h=0;const f={interval:null,last:null},g=Fn$9.debounce(O=>{aliases$1[O].forEach(E=>this.emit(E))},7);let v=typeof t=="object"?t.pin:t;Board$m.Component.call(this,t=Board$m.Options(t)),Board$m.Controller.call(this,Controllers$f,t),t.pinValue=v,this.holdtime=t.holdtime||500,this.pullup=t.pullup||t.isPullup||!1,this.pulldown=t.pulldown||t.isPulldown||!1,o=typeof t.invert<"u"?t.invert:this.pullup||!1,o&&(u=u^1,h=h^1),f.last=h,priv$l.set(this,f),Object.defineProperties(this,{value:{get(){return Number(this.isDown)}},invert:{get(){return o},set(O){o=O,u=o?0:1,h=o?1:0,f.last=h}},downValue:{get(){return u},set(O){u=O,h=O^1,o=!!O,f.last=h}},upValue:{get(){return h},set(O){h=O,u=O^1,o=!!O,f.last=u}},isDown:{get(){return this.toBoolean(s)}}}),typeof this.initialize=="function"&&this.initialize(t,O=>{s=O,this.isDown||(f.interval&&clearInterval(f.interval),g("up")),this.isDown&&(g("down"),f.interval=setInterval(()=>{this.isDown&&this.emit("hold")},this.holdtime)),f.last=O})}}class Buttons extends Collection$c.Emitter{constructor(t){super(t)}get type(){return Button}}Collection$c.installMethodForwarding(Buttons.prototype,Button.prototype);Button.Collection=Buttons;define_process_env_default$h.IS_TEST_MODE&&(Button.Controllers=Controllers$f,Button.purge=function(){priv$l.clear()});var button=Button,define_process_env_default$g={};const Board$l=requireBoard(),EVS$3=evshield,Emitter$9=emitter,Fn$8=fn,priv$k=new Map,Controllers$e={EVS_EV3:{initialize:{value(n,t){const s=priv$k.get(this);n.mode&&(n.mode=n.mode.toUpperCase()),s.mode=n.mode==="RAW"?EVS$3.Type_EV3_COLOR_RGBRAW:EVS$3.Type_EV3_COLOR,s.bytes=s.mode===EVS$3.Type_EV3_COLOR_RGBRAW?6:2,s.colors=[[],[0,0,0],[0,0,255],[0,128,0],[255,255,0],[255,0,0],[255,255,255],[139,69,19]],s.shield=EVS$3.shieldPort(n.pin),s.ev3=new EVS$3(Object.assign(n,{io:this.io})),s.ev3.setup(s.shield,EVS$3.Type_EV3),s.ev3.write(s.shield,129+s.shield.offset,s.mode),s.ev3.read(s.shield,EVS$3.ColorMeasure,s.bytes,o=>{let u="";if(s.bytes===2)u+=String(o[0]|o[1]<<8||1);else for(let h=0;h<3;h++)u+=o[h*2].toString(16).padStart(2,"0");t(u)})}},toRGB:{value(n){const t=priv$k.get(this);return t.mode===EVS$3.Type_EV3_COLOR?n>0&&n<8?t.colors[n]:t.colors[0]:(n=String(n),[0,0,0].map((s,o)=>parseInt(n.slice(o*2,o*2+2),16)))}}},EVS_NXT:{initialize:{value(n,t){const s=priv$k.get(this);if(n.mode&&(n.mode=n.mode.toUpperCase()),s.mode=n.mode==="RAW"?EVS$3.Type_NXT_COLOR_RGBRAW:EVS$3.Type_NXT_COLOR,s.bytes=s.mode===EVS$3.Type_NXT_COLOR_RGBRAW?10:1,s.mode===EVS$3.Type_NXT_COLOR_RGBRAW)throw new Error("Raw RGB is not currently supported for the NXT.");s.colors=[[],[0,0,0],[0,0,255],[0,128,0],[255,255,0],[255,0,0],[255,255,255]],s.shield=EVS$3.shieldPort(n.pin),s.ev3=new EVS$3(Object.assign(n,{io:this.io})),s.ev3.setup(s.shield,EVS$3.Type_NXT_COLOR),s.ev3.read(s.shield,112+s.shield.offset,s.bytes,o=>{let u="";s.bytes===1&&(u+=String(o[0])),t(u)})}},toRGB:{value(n){const t=priv$k.get(this);return t.mode===EVS$3.Type_NXT_COLOR?n>0&&n<7?t.colors[n]:t.colors[0]:(n=String(n),[0,0,0].map((s,o)=>parseInt(n.slice(o*2,o*2+2),16)))}}},ISL29125:{ADDRESSES:{value:[68]},REGISTER:{value:{RESET:0,CONFIG1:1,CONFIG2:2,CONFIG3:3,READ:9}},initialize:{value(n,t){const{Drivers:s}=requireSip(),o=s.addressResolver(this,n);this.io.i2cConfig(n),this.io.i2cWriteReg(o,this.REGISTER.RESET,70),this.io.i2cWriteReg(o,this.REGISTER.CONFIG1,13),this.io.i2cWriteReg(o,this.REGISTER.CONFIG2,63),this.io.i2cWriteReg(o,this.REGISTER.CONFIG3,0),this.io.i2cRead(o,this.REGISTER.READ,6,u=>{let h="";const f=u[1]<<8|u[0],g=u[3]<<8|u[2],v=u[5]<<8|u[4],O=[g>>2,f>>2,v>>2].map(E=>Fn$8.constrain(E,0,255));for(let E=0;E<3;E++)h+=O[E].toString(16).padStart(2,"0");t(h)})}},toRGB:{value(n){return n=String(n),[0,0,0].map((t,s)=>parseInt(n.slice(s*2,s*2+2),16))}}}},colorNames=["red","green","blue"];class Color extends Emitter$9{constructor(t){super(),Board$l.Component.call(this,t=Board$l.Options(t)),Board$l.Controller.call(this,Controllers$e,t);const s={},o=t.freq||25;let u=0,h=null;priv$k.set(this,s),this.toRGB||(this.toRGB=t.toRGB||(f=>f)),Object.defineProperties(this,{value:{get(){return u}},rgb:{get(){return this.toRGB(u).reduce((f,g,v)=>(f[colorNames[v]]=g,f),{})}}}),typeof this.initialize=="function"&&this.initialize(t,f=>{u=f}),setInterval(()=>{if(u===void 0)return;const f={rgb:this.rgb};this.emit("data",f),u!==h&&(h=u,this.emit("change",f))},o)}static hexCode(t){return t.red===void 0||t.green===void 0||t.blue===void 0?null:t.length===0?"unknown":colorNames.reduce((s,o)=>s+=t[o].toString(16).padStart(2,"0"),"")}}define_process_env_default$g.IS_TEST_MODE&&(Color.Controllers=Controllers$e,Color.purge=()=>{priv$k.clear()});var color=Color,define_process_env_default$f={};const Board$k=requireBoard(),Expander$5=requireExpander(),Pins$5=Board$k.Pins,Collection$b=collection,{scale:scale$3,fscale:fscale$1,constrain:constrain$3}=fn,priv$j=new Map,Controllers$d={PCA9685:{initialize:{value:function(n){const t=priv$j.get(this);this.address=n.address||64,this.pwmRange=n.pwmRange||[1e3,2e3],this.frequency=n.frequency||50,t.expander=Expander$5.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),this.pin=t.expander.normalize(n.pin)}},update:{writable:!0,value:function(n){priv$j.get(this).expander.servoWrite(this.pin,n)}}},DEFAULT:{initialize:{value:function(n){n.debug&&!this.board.pins.isServo(this.pin)&&Board$k.Pins.Error({pin:this.pin,type:"PWM",via:"Servo"}),this.io.servoConfig(this.pin,this.pwmRange[0],this.pwmRange[1])}},update:{writable:!0,value:function(n){this.io.servoWrite(this.pin,n)}}}},FORWARD="FORWARD",FORWARD_REVERSE="FORWARD_REVERSE",FORWARD_BRAKE_REVERSE="FORWARD_BRAKE_REVERSE",Devices$1={[FORWARD]:{device:{value:FORWARD}},[FORWARD_REVERSE]:{device:{value:FORWARD_REVERSE}},[FORWARD_BRAKE_REVERSE]:{device:{value:FORWARD_BRAKE_REVERSE}}};class ESC{constructor(t){if(!(this instanceof ESC))return new ESC(t);Board$k.Component.call(this,t=Board$k.Options(t));let s;typeof t.controller>"u"&&Pins$5.isFirmata(this)&&(typeof s=="string"&&s.length>1&&s[0]==="A"&&(s=this.io.analogPins[+s.slice(1)]),s=+s,!Number.isNaN(s)&&this.pin!==s&&(this.pin=s)),Board$k.Controller.call(this,Controllers$d,t),Object.defineProperties(this,t.device&&Devices$1[t.device]||Devices$1.FORWARD),this.pwmRange=t.pwmRange||[1e3,2e3],this.neutral=t.neutral,priv$j.set(this,{}),this.initialize(t);const[o,u]=this.pwmRange;if(typeof this.neutral<"u"&&this.neutral<=100&&(this.neutral=scale$3(this.neutral,0,100,o,u)),typeof this.neutral>"u"&&(this.neutral=(o+u)/2),this.neutral=constrain$3(this.neutral,o,u),this.device===FORWARD_REVERSE&&this.neutral===o)throw new Error("Bidirectional (FORWARD_REVERSE) speed controllers require a non-zero neutral point");this.device===FORWARD&&(this.neutral=o),this.throttle(this.neutral)}throttle(t){if(t>0&&t<=100){if(this.device!=="FORWARD")throw new Error("Bidirectional (FORWARD_REVERSE, FORWARD_*_REVERSE) speed controllers require a pulse in usec");t=fscale$1(t,0,100,this.pwmRange[0],this.pwmRange[1])}return this.update(constrain$3(t,this.pwmRange[0],this.pwmRange[1])),this}brake(){return this.update(this.neutral),this}}class ESCs extends Collection$b{constructor(t){super(t)}get type(){return ESC}}Collection$b.installMethodForwarding(ESCs.prototype,ESC.prototype);ESC.Collection=ESCs;define_process_env_default$f.IS_TEST_MODE&&(ESC.Controllers=Controllers$d,ESC.purge=function(){priv$j.clear()});var esc=ESC,define_process_env_default$e={};const Board$j=requireBoard(),Emitter$8=emitter,Collection$a=collection,priv$i=new Map,modes={INPUT:0,OUTPUT:1,ANALOG:2,PWM:3,SERVO:4},LOW="low",HIGH="high",ANALOG="analog",DIGITAL="digital";let Pin$2=class Jn extends Emitter$8{constructor(t){if(super(),t===void 0||typeof t=="object"&&t.addr===void 0&&t.pin===void 0)throw new Error("Pins must have a pin number");const s=typeof t=="object"?t.addr||t.pin||0:t;let o=Jn.isAnalog(t),u=!1;Board$j.Component.call(this,t=Board$j.Options(t)),t.addr=t.addr||t.pin,this.io.analogPins.includes(s)&&(o=!1,u=!0);const f=u?s:typeof t!="object"?t:t.addr,g=t.type||(o?ANALOG:DIGITAL),v={mode:null,last:null,value:0};priv$i.set(this,v),Object.defineProperties(this,{type:{get(){return g}},addr:{get(){return f}},value:{get(){return v.value}},mode:{set(O){priv$i.get(this).mode=O,this.io.pinMode(this.addr,O)},get(){return priv$i.get(this).mode}}}),this.mode=typeof t.as<"u"?t.as:typeof t.mode<"u"?t.mode:o?2:1,this.freq=typeof t.freq<"u"?t.freq:20,(this.mode===0||this.mode===2)&&read(this),g===DIGITAL&&Object.defineProperties(this,{isHigh:{get(){return!!v.value}},isLow:{get(){return!v.value}}})}query(t){let s=this.addr;return this.type===ANALOG&&(s=this.io.analogPins[this.addr]),this.io.queryPinState(s,()=>t(this.io.pins[s])),this}high(){const t=this.type===ANALOG?this.board.RESOLUTION.PWM:1;return Jn.write(this,t),this.emit(HIGH),this}low(){return Jn.write(this,0),this.emit(LOW),this}};function read(n){const t=priv$i.get(n);n.io[`${n.type}Read`](n.addr,s=>t.value=s),setInterval(()=>{let s,o;s=t.value?LOW:HIGH,o=t.value?HIGH:LOW,t.mode===modes.INPUT&&(t.last===null&&(t.last=s),t.last===s&&(t.last=o,n.emit(o,t.value),n.emit("change",t.value))),n.emit("data",t.value)},n.freq)}Object.entries(modes).forEach(([n,t])=>{Object.defineProperty(Pin$2,n,{value:t})});Pin$2.isAnalog=n=>{if(typeof n=="string"&&Pin$2.isPrefixed(n,["I","A"]))return!0;if(typeof n=="object")return Pin$2.isAnalog(typeof n.addr<"u"?n.addr:n.pin)};Pin$2.isPrefixed=(n,t)=>(n=n[0],t.reduce((s,o)=>s||o===n,!1));Pin$2.write=(n,t)=>{const s=priv$i.get(n);s.value=t,n.mode=modes.OUTPUT,n.io[`${n.type}Write`](n.addr,t),n.emit("write",null,t)};Pin$2.read=(n,t)=>{let s=!1;n.type===DIGITAL&&n.mode!==0&&(s=!0,n.mode=modes.INPUT),n.type===ANALOG&&n.mode!==2&&(s=!0,n.mode=modes.ANALOG),s&&read(n),n.on("data",()=>{t.call(n,null,n.value)})};["read","write"].forEach(n=>{Pin$2.prototype[n]=function(t){return Pin$2[n](this,t),this}});let Pins$4=class extends Collection$a.Emitter{constructor(t){super(t)}get type(){return Pin$2}};Collection$a.installMethodForwarding(Pins$4.prototype,Pin$2.prototype);Pin$2.Collection=Pins$4;define_process_env_default$e.IS_TEST_MODE&&(Pin$2.purge=()=>{priv$i.clear()});var pin=Pin$2,define_process_env_default$d={};const Board$i=requireBoard(),Emitter$7=emitter,Pin$1=pin,{toFixed:toFixed$3}=fn,priv$h=new Map,Breakouts={ADAFRUIT_ULTIMATE_GPS:{receiver:{value:"FGPMMOPA6H"}}},Receivers={FGPMMOPA6H:{chip:{value:"MT3339"}}},Chips={DEFAULT:{baud:{value:9600,writable:!0},configure:{value(n){process$1.nextTick(n)}}},MT3339:{baud:{value:9600,writable:!0},configure:{value(n){process$1.nextTick(n)}},frequency:{get(){return priv$h.get(this).frequency},set(n){const t=priv$h.get(this);n<10&&(n=10),t.frequency=n,this.sendCommand(`$PMTK220,${String(1e3/t.frequency)}`)}},restart:{value(n){n===!0?this.sendCommand("$PMTK103"):(this.sendCommand("$PMTK101"),setTimeout(()=>{this.sendCommand("")},1e3))}}}};class GPS extends Emitter$7{constructor(t){super(),Array.isArray(t)&&(t={pins:{rx:t[0],tx:t[1],onOff:t[2]}}),typeof t.pins>"u"&&(t.pins={}),Board$i.Component.call(this,t=Board$i.Options(t));let s=t.breakout||{},o=t.receiver,u=t.chip;Breakouts[s]&&(!o&&Breakouts[s].receiver&&(o=Breakouts[s].receiver.value),!u&&Breakouts[s].chip&&(u=Breakouts[s].chip.value)),u||(o&&Receivers[o].chip?u=Receivers[o].chip.value:u="DEFAULT"),s=typeof s=="string"?Chips[s]:t.breakout,u=typeof u=="string"?Chips[u]:t.chip,o=typeof o=="string"?Receivers[o]:t.receiver,u&&Object.defineProperties(this,u),o&&Object.defineProperties(this,o),s&&Object.defineProperties(this,s),this.fixed=t.fixed||6,this.baud=t.baud||this.baud;let h={sat:{},latitude:0,longitude:0,altitude:0,speed:0,course:0,frequency:1,lowPowerMode:!1};priv$h.set(this,h),Object.defineProperties(this,{latitude:{get(){return h.latitude}},longitude:{get(){return h.longitude}},altitude:{get(){return h.altitude}},sat:{get(){return h.sat}},speed:{get(){return h.speed}},course:{get(){return h.course}},time:{get(){return h.time}}}),this.initialize&&this.initialize(t)}initialize(t){const s=priv$h.get(this);s.portId=t.serialPort||t.portId||t.port||t.bus,typeof s.portId>"u"&&this.io.SERIAL_PORT_IDs&&(s.portId=this.io.SERIAL_PORT_IDs.DEFAULT),["tx","rx"].forEach(o=>{this.pins[o]&&this.io.pinMode(this.pins[o],this.io.MODES.SERIAL)}),this.pins.onOff&&(this.io.pinMode(this.pins.onOff,this.io.MODES.OUTPUT),this.onOff=new Pin$1(this.pins.onOff)),this.io.serialConfig({portId:s.portId,baud:this.baud,rxPin:this.pins.rx,txPin:this.pins.tx}),this.configure&&this.configure(()=>{this.listen(),t.frequency&&(this.frequency=t.frequency)})}sendCommand(t){const s=priv$h.get(this),o=[];for(let h=0;h<t.length;++h)o[h]=t.charCodeAt(h);const u=getNmeaChecksum(t.substring(1));o.push(42,u.charCodeAt(0),u.charCodeAt(1),13,10),this.io.serialWrite(s.portId,o)}listen(){const t=priv$h.get(this);let s="";this.io.serialRead(t.portId,o=>{s+=new Buffer(o).toString("ascii");const u=s.split(`\r
`);if(u.length>1){for(let h=0;h<u.length-1;h++)this.parseNmeaSentence(u[h]);s=u[u.length-1]}})}parseNmeaSentence(t){const s=priv$h.get(this),o=t.split("*");if(o[1]!==getNmeaChecksum(o[0].substring(1)))return;this.emit("sentence",t);const u=o[0].split(","),h={latitude:s.latitude,longitude:s.longitude,altitude:s.altitude,speed:s.speed,course:s.course};switch(u[0]){case"$GPGGA":s.time=u[1],s.latitude=degToDec(u[2],2,u[3],this.fixed),s.longitude=degToDec(u[4],3,u[5],this.fixed),s.altitude=Number(u[9]);break;case"$GPGSA":s.sat.satellites=u.slice(3,15),s.sat.pdop=Number(u[15]),s.sat.hdop=Number(u[16]),s.sat.vdop=Number(u[17]),this.emit("operations",t);break;case"$GPRMC":s.time=u[1],s.latitude=degToDec(u[3],2,u[4],this.fixed),s.longitude=degToDec(u[5],3,u[6],this.fixed),s.course=Number(u[8]),s.speed=toFixed$3(u[7]*.514444,this.fixed);break;case"$GPVTG":s.course=Number(u[1]),s.speed=toFixed$3(u[5]*.514444,this.fixed);break;case"$GPGSV":break;case"$PGACK":this.emit("acknowledge",t);break;default:this.emit("unknown",t);break}this.emit("data",{latitude:s.latitude,longitude:s.longitude,altitude:s.altitude,speed:s.speed,course:s.course,sat:s.sat,time:s.time}),(h.latitude!==s.latitude||h.longitude!==s.longitude||h.altitude!==s.altitude)&&this.emit("change",{latitude:s.latitude,longitude:s.longitude,altitude:s.altitude}),(h.speed!==s.speed||h.course!==s.course)&&this.emit("navigation",{speed:s.speed,course:s.course})}}function degToDec(n,t,s,o){if(n){let u=Number(n.substring(0,t))+Number(n.substring(t))/60;return(s==="S"||s==="W")&&(u*=-1),Number(u.toFixed(o))}else return 0}function getNmeaChecksum(n){let t=0;for(let s=0;s<n.length;++s)t^=n.charCodeAt(s);return t=t.toString(16).toUpperCase(),t.length<2&&(t=`00${t}`.slice(-2)),t}define_process_env_default$d.IS_TEST_MODE&&(GPS.Breakouts=Breakouts,GPS.Chips=Chips,GPS.Receivers=Receivers,GPS.purge=()=>{priv$h.clear()});var gps=GPS,mpr121={MAPS:{MPR121QR2_SHIELD:{KEYS:{0:1,1:2,2:3,3:4,4:5,5:6,6:7,7:8,8:9},TARGETS:{256:0,32:1,4:2,128:3,16:4,2:5,64:6,8:7,1:8}},MPR121:{KEYS:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11},TARGETS:{1:0,2:1,4:2,8:3,16:4,32:5,64:6,128:7,256:8,512:9,1024:10,2048:11}},MPR121_KEYPAD:{KEYS:{0:1,1:2,2:3,3:4,4:5,5:6,6:7,7:8,8:9,9:10,10:11,11:12},TARGETS:{8:0,128:1,2048:2,4:3,64:4,1024:5,2:6,32:7,512:8,1:9,16:10,256:11}},MPR121_SHIELD:{KEYS:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11},TARGETS:{1:0,2:1,4:2,8:3,16:4,32:5,64:6,128:7,256:8,512:9,1024:10,2048:11}}},MPR121_DEFAULT_ADDRESS:90,MPR121_SOFTRESET:128,ELE0_ELE7_TOUCH_STATUS:0,ELE8_ELE11_ELEPROX_TOUCH_STATUS:1,ELE0_7_OOR_STATUS:2,ELE8_11_ELEPROX_OOR_STATUS:3,ELE0_FILTERED_DATA_LSB:4,ELE0_FILTERED_DATA_MSB:5,ELE1_FILTERED_DATA_LSB:6,ELE1_FILTERED_DATA_MSB:7,ELE2_FILTERED_DATA_LSB:8,ELE2_FILTERED_DATA_MSB:9,ELE3_FILTERED_DATA_LSB:10,ELE3_FILTERED_DATA_MSB:11,ELE4_FILTERED_DATA_LSB:12,ELE4_FILTERED_DATA_MSB:13,ELE5_FILTERED_DATA_LSB:14,ELE5_FILTERED_DATA_MSB:15,ELE6_FILTERED_DATA_LSB:16,ELE6_FILTERED_DATA_MSB:17,ELE7_FILTERED_DATA_LSB:18,ELE7_FILTERED_DATA_MSB:19,ELE8_FILTERED_DATA_LSB:20,ELE8_FILTERED_DATA_MSB:21,ELE9_FILTERED_DATA_LSB:22,ELE9_FILTERED_DATA_MSB:23,ELE10_FILTERED_DATA_LSB:24,ELE10_FILTERED_DATA_MSB:25,ELE11_FILTERED_DATA_LSB:26,ELE11_FILTERED_DATA_MSB:27,ELEPROX_FILTERED_DATA_LSB:28,ELEPROX_FILTERED_DATA_MSB:29,ELE0_BASELINE_VALUE:30,ELE1_BASELINE_VALUE:31,ELE2_BASELINE_VALUE:32,ELE3_BASELINE_VALUE:33,ELE4_BASELINE_VALUE:34,ELE5_BASELINE_VALUE:35,ELE6_BASELINE_VALUE:36,ELE7_BASELINE_VALUE:37,ELE8_BASELINE_VALUE:38,ELE9_BASELINE_VALUE:39,ELE10_BASELINE_VALUE:40,ELE11_BASELINE_VALUE:41,ELEPROX_BASELINE_VALUE:42,MHD_RISING:43,NHD_AMOUNT_RISING:44,NCL_RISING:45,FDL_RISING:46,MHD_FALLING:47,NHD_AMOUNT_FALLING:48,NCL_FALLING:49,FDL_FALLING:50,NHD_AMOUNT_TOUCHED:51,NCL_TOUCHED:52,FDL_TOUCHED:53,ELEPROX_MHD_RISING:54,ELEPROX_NHD_AMOUNT_RISING:55,ELEPROX_NCL_RISING:56,ELEPROX_FDL_RISING:57,ELEPROX_MHD_FALLING:58,ELEPROX_NHD_AMOUNT_FALLING:59,ELEPROX_FDL_FALLING:60,ELEPROX_NHD_AMOUNT_TOUCHED:62,ELEPROX_NCL_TOUCHED:63,ELEPROX_FDL_TOUCHED:64,ELE0_TOUCH_THRESHOLD:65,ELE0_RELEASE_THRESHOLD:66,ELE1_TOUCH_THRESHOLD:67,ELE1_RELEASE_THRESHOLD:68,ELE2_TOUCH_THRESHOLD:69,ELE2_RELEASE_THRESHOLD:70,ELE3_TOUCH_THRESHOLD:71,ELE3_RELEASE_THRESHOLD:72,ELE4_TOUCH_THRESHOLD:73,ELE4_RELEASE_THRESHOLD:74,ELE5_TOUCH_THRESHOLD:75,ELE5_RELEASE_THRESHOLD:76,ELE6_TOUCH_THRESHOLD:77,ELE6_RELEASE_THRESHOLD:78,ELE7_TOUCH_THRESHOLD:79,ELE7_RELEASE_THRESHOLD:80,ELE8_TOUCH_THRESHOLD:81,ELE8_RELEASE_THRESHOLD:82,ELE9_TOUCH_THRESHOLD:83,ELE9_RELEASE_THRESHOLD:84,ELE10_TOUCH_THRESHOLD:85,ELE10_RELEASE_THRESHOLD:86,ELE11_TOUCH_THRESHOLD:87,ELE11_RELEASE_THRESHOLD:88,ELEPROX_TOUCH_THRESHOLD:89,ELEPROX_RELEASE_THRESHOLD:90,DEBOUNCE_TOUCH_AND_RELEASE:91,AFE_CONFIGURATION:92,FILTER_CONFIG:93,ELECTRODE_CONFIG:94,ELE0_CURRENT:95,ELE1_CURRENT:96,ELE2_CURRENT:97,ELE3_CURRENT:98,ELE4_CURRENT:99,ELE5_CURRENT:100,ELE6_CURRENT:101,ELE7_CURRENT:102,ELE8_CURRENT:103,ELE9_CURRENT:104,ELE10_CURRENT:105,ELE11_CURRENT:106,ELEPROX_CURRENT:107,ELE0_ELE1_CHARGE_TIME:108,ELE2_ELE3_CHARGE_TIME:109,ELE4_ELE5_CHARGE_TIME:110,ELE6_ELE7_CHARGE_TIME:111,ELE8_ELE9_CHARGE_TIME:112,ELE10_ELE11_CHARGE_TIME:113,ELEPROX_CHARGE_TIME:114,GPIO_CONTROL_0:115,GPIO_CONTROL_1:116,GPIO_DATA:117,GPIO_DIRECTION:118,GPIO_ENABLE:119,GPIO_SET:120,GPIO_CLEAR:121,GPIO_TOGGLE:122,AUTO_CONFIG_CONTROL_0:123,AUTO_CONFIG_CONTROL_1:124,AUTO_CONFIG_USL:125,AUTO_CONFIG_LSL:126,AUTO_CONFIG_TARGET_LEVEL:127,TOUCH_THRESHOLD:15,RELEASE_THRESHOLD:10,NUM_CHANNELS:12},define_process_env_default$c={};const Board$h=requireBoard(),Emitter$6=emitter,Fn$7=fn,{scale:scale$2,toFixed:toFixed$2,uint16:uint16$1}=Fn$7,priv$g=new Map,aliases={down:["down","press","tap","impact","hit","touch"],up:["up","release"],hold:["hold"]};function flatten(n){return n.flat?n.flat():n.reduce((t,s)=>t.concat(s),[])}function flatKeys(n){let t=[];return n.keys&&Array.isArray(n.keys)&&(t=n.keys.slice(),t.every(Array.isArray)&&(t=flatten(t))),t}const Controllers$c={MPR121:{ADDRESSES:{value:[90,91,92,93]},REGISTER:{value:mpr121},initialize:{value(n,t){const{Drivers:s}=requireSip(),o=s.addressResolver(this,n),u=priv$g.get(this),h=this.REGISTER.MAPS[n.controller].KEYS,f=this.REGISTER.MAPS[n.controller].TARGETS,g=Object.keys(h).reduce((E,_)=>(E[_]=h[_],E),[]);let v=flatKeys(n);const O=g.length;this.io.i2cConfig(n),this.io.i2cWrite(o,this.REGISTER.MPR121_SOFTRESET,99),this.io.i2cWrite(o,this.REGISTER.MHD_RISING,1),this.io.i2cWrite(o,this.REGISTER.NHD_AMOUNT_RISING,1),this.io.i2cWrite(o,this.REGISTER.NCL_RISING,0),this.io.i2cWrite(o,this.REGISTER.FDL_RISING,0),this.io.i2cWrite(o,this.REGISTER.MHD_FALLING,1),this.io.i2cWrite(o,this.REGISTER.NHD_AMOUNT_FALLING,1),this.io.i2cWrite(o,this.REGISTER.NCL_FALLING,255),this.io.i2cWrite(o,this.REGISTER.FDL_FALLING,2),this.sensitivity={press:Array(12).fill(.95),release:Array(12).fill(.975)},n.keys&&n.controller==="MPR121_SHIELD"&&(v=v.reverse()),n.sensitivity&&(Array.isArray(n.sensitivity)?n.sensitivity.forEach(function({press:E,release:_},p){typeof E<"u"&&(this.sensitivity.press[p]=E),typeof _<"u"&&(this.sensitivity.release[p]=_)},this):(typeof n.sensitivity.press<"u"&&this.sensitivity.press.fill(n.sensitivity.press),typeof n.sensitivity.release<"u"&&this.sensitivity.release.fill(n.sensitivity.release)));for(let E=0;E<12;E++)this.io.i2cWrite(o,this.REGISTER.ELE0_TOUCH_THRESHOLD+(E<<1),scale$2(toFixed$2(1-this.sensitivity.press[E],3),0,1,0,255)),this.io.i2cWrite(o,this.REGISTER.ELE0_RELEASE_THRESHOLD+(E<<1),scale$2(toFixed$2(1-this.sensitivity.release[E],3),0,1,0,255));this.io.i2cWrite(o,this.REGISTER.FILTER_CONFIG,19),this.io.i2cWrite(o,this.REGISTER.AFE_CONFIGURATION,128),this.io.i2cWrite(o,this.REGISTER.AUTO_CONFIG_CONTROL_0,143),this.io.i2cWrite(o,this.REGISTER.AUTO_CONFIG_USL,228),this.io.i2cWrite(o,this.REGISTER.AUTO_CONFIG_LSL,148),this.io.i2cWrite(o,this.REGISTER.AUTO_CONFIG_TARGET_LEVEL,205),this.io.i2cWrite(o,this.REGISTER.ELECTRODE_CONFIG,204),v.length||(v=Array.from(Object.assign({},h,{length:O}))),u.length=O,u.touches=touches(O),u.keys=v,u.mapping=g,u.targets=f,u.isMultitouch=!0,this.io.i2cRead(o,0,2,E=>t(uint16$1(E[1],E[0])))}},toAlias:{value(n){return priv$g.get(this).keys[n]}},toIndices:{value(n){const t=priv$g.get(this),s=[];for(let o=0;o<12;o++)n&1<<o&&s.push(t.targets[n&1<<o]);return s}}},VKEY:{initialize:{value(n,t){const s=priv$g.get(this),o=n.aref||this.io.aref||5,u=Fn$7.inRange(o,4.5,5.5),h=[1,2,3,4,5,6,7,8,9,10,11,12];let f=flatKeys(n),g=0;f.length||(f=h),s.scale=[u?17:26,u?40:58,u?496:721],g=h.length,s.length=g,s.touches=touches(g),s.mapping=h,s.keys=f,s.isMultitouch=!1,this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,v=>t(v))}},toAlias:{value(n){return priv$g.get(this).keys[n]}},toIndices:{value(n){const t=priv$g.get(this),s=t.length,o=t.scale[0],u=t.scale[1],h=t.scale[2];return n<o||n>h?[]:[s-(n-o)/u|0]}}},ANALOG:{initialize:{value(n,t){let s=flatKeys(n),o=[],u=0;if(n.length&&!s.length&&(s=Array.from({length:n.length},(O,E)=>E)),!s.length)throw new Error("Missing `keys`. Analog Keypad requires either a numeric `length` or a `keys` array.");o=s,u=o.length;const h=priv$g.get(this),f=u+1,g=Math.round(1023/f),v=Array.from({length:f},(O,E)=>{const _=g*E;return Array.from({length:g-1},(p,b)=>_+b)});h.length=u,h.ranges=v,h.touches=touches(u),h.mapping=o,h.keys=s,h.isMultitouch=!0,this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,O=>t(O))}},toAlias:{value(n){return priv$g.get(this).keys[n]}},toIndices:{value(n){const t=priv$g.get(this);let o=t.ranges.findIndex(u=>u.includes(n));return o===t.length&&o--,o<0?[]:[o]}}},AT42QT1070:{ADDRESSES:{value:[27]},REGISTER:{value:{READ:3}},initialize:{value(n,t){const{Drivers:s}=requireSip(),o=s.addressResolver(this,n),u=priv$g.get(this),h=[0,1,2,3,4,5,6];let f=flatKeys(n),g=0;f.length||(f=h),g=h.length,u.length=g,u.touches=touches(g),u.mapping=h,u.keys=f,u.isMultitouch=!0,this.io.i2cConfig(n),this.io.i2cRead(o,this.REGISTER.READ,1,v=>t(v[0]))}},toAlias:{value(n){return priv$g.get(this).keys[n]}},toIndices:{value(n){const t=[];for(let s=0;s<7;s++)n&1<<s&&t.push(s);return t}}},"3X4_I2C_NANO_BACKPACK":{ADDRESSES:{value:[10,11,12,13]},initialize:{value(n,t){const{Drivers:s}=requireSip(),o=s.addressResolver(this,n),u=priv$g.get(this),h=[1,2,3,4,5,6,7,8,9,"*",0,"#"];let f=flatKeys(n),g=0;f.length||(f=h),g=h.length,u.length=g,u.touches=touches(g),u.mapping=h,u.keys=f,u.isMultitouch=!0,this.io.i2cConfig(n),this.io.i2cRead(o,2,v=>t(uint16$1(v[0],v[1])))}},toAlias:{value(n){return priv$g.get(this).keys[n]}},toIndices:{value(n){const t=priv$g.get(this),s=[];for(let o=0;o<t.length;o++)n&1<<o&&s.push(o);return s}}},"4X4_I2C_NANO_BACKPACK":{ADDRESSES:{value:[10,11,12,13]},initialize:{value(n,t){const{Drivers:s}=requireSip(),o=s.addressResolver(this,n),u=priv$g.get(this);let h=flatKeys(n);const f=[1,2,3,"A",4,5,6,"B",7,8,9,"C","*",0,"#","D"];let g=0;h.length||(h=f),g=f.length,u.length=g,u.touches=touches(g),u.mapping=f,u.keys=h,u.isMultitouch=!0,this.io.i2cConfig(n),this.io.i2cRead(o,2,v=>t(uint16$1(v[0],v[1])))}},toAlias:{value(n){return priv$g.get(this).keys[n]}},toIndices:{value(n){const t=priv$g.get(this),s=[];for(let o=0;o<t.length;o++)n&1<<o&&s.push(o);return s}}},SX1509:{ADDRESSES:{value:[10,11,12,13]},REGISTER:{value:{PULLUP:3,OPEN_DRAIN:5,DIR:7,DIR_B:14,DIR_A:15}},initialize:{value(n,t){const{Drivers:s}=requireSip(),o=s.addressResolver(this,n),u=priv$g.get(this);let h=flatKeys(n);const f=[1,2,3,4,5,6,7,8,9,"*",0,"#"];let g=0;h.length||(h=f),g=f.length,u.length=g,u.touches=touches(g),u.mapping=f,u.keys=h,u.isMultitouch=!0,this.io.i2cConfig(n),this.io.i2cWriteReg(o,this.REGISTER.DIR,240),this.io.i2cWriteReg(o,this.REGISTER.OPEN_DRAIN,15),this.io.i2cWriteReg(o,this.REGISTER.PULLUP,240),this.io.i2cRead(o,2,v=>t(uint16$1(v[0],v[1])))}},toAlias:{value(n){return priv$g.get(this).keys[n]}},toIndices:{value(n){const t=priv$g.get(this),s=[];for(let o=0;o<t.length;o++)n&1<<o&&s.push(o);return s}}}};Controllers$c.MPR121QR2=Controllers$c.MPR121;Controllers$c.MPR121QR2_SHIELD=Controllers$c.MPR121;Controllers$c.MPR121_KEYPAD=Controllers$c.MPR121;Controllers$c.MPR121_SHIELD=Controllers$c.MPR121;Controllers$c.QTOUCH=Controllers$c.AT42QT1070;Controllers$c.DEFAULT=Controllers$c.ANALOG;function touches(n){return Array.from({length:n},()=>({timeout:null,value:0}))}class Keypad extends Emitter$6{constructor(t){super(),Board$h.Component.call(this,t=Board$h.Options(t));let s=null;const o={touches:null,timeout:null,length:null,keys:null,mapping:null,holdtime:null},u=Fn$7.debounce(function(h,f){const g={type:h,which:f,timestamp:Date.now()};aliases[h].forEach(function(v){this.emit(v,g)},this),this.emit("change",Object.assign({},g))},5);Board$h.Controller.call(this,Controllers$c,t),o.holdtime=t.holdtime?t.holdtime:500,priv$g.set(this,o),typeof this.initialize=="function"&&this.initialize(t,h=>{s=h;const f=Date.now(),g=this.toIndices(h),v=o.length,O={down:[],hold:[],up:[]};let E=null;for(let _=0;_<v;_++)E=this.toAlias(_),g.includes(_)?(o.touches[_].value===0?(o.touches[_].timeout=f+o.holdtime,O.down.push(E)):o.touches[_].value===1&&o.touches[_].timeout!==null&&f>o.touches[_].timeout&&(o.touches[_].timeout=f+o.holdtime,O.hold.push(E)),o.touches[_].value=1):(o.touches[_].value===1&&(o.touches[_].timeout=null,O.up.push(E)),o.touches[_].value=0),E=null;Object.keys(O).forEach(function(_){const p=O[_];p.length&&u.call(this,_,p)},this)}),Object.defineProperties(this,{isMultitouch:{get(){return o.isMultitouch}},value:{get(){return s}}})}}define_process_env_default$c.IS_TEST_MODE&&(Keypad.Controllers=Controllers$c,Keypad.purge=()=>{priv$g.clear()});var keypad=Keypad,lcdChars={DEFAULT:{0:[14,27,27,27,27,27,14,0],1:[2,6,14,6,6,6,6,0],2:[14,27,3,6,12,24,31,0],3:[14,27,3,14,3,27,14,0],4:[3,7,15,27,31,3,3,0],5:[31,24,30,3,3,27,14,0],6:[14,27,24,30,27,27,14,0],7:[31,3,6,12,12,12,12,0],8:[14,27,27,14,27,27,14,0],9:[14,27,27,15,3,27,14,0],10:[23,21,21,21,23,0,31,0],11:[10,10,10,10,10,0,31,0],12:[23,17,23,20,23,0,31,0],13:[23,17,19,17,23,0,31,0],14:[21,21,23,17,17,0,31,0],15:[23,20,23,17,23,0,31,0],16:[23,20,23,21,23,0,31,0],17:[23,17,18,18,18,0,31,0],18:[23,21,23,21,23,0,31,0],19:[23,21,23,17,23,0,31,0],circle:[0,14,17,17,17,14,0,0],cdot:[0,14,17,21,17,14,0,0],donut:[0,14,31,27,31,14,0,0],ball:[0,14,31,31,31,14,0,0],square:[0,31,17,17,17,31,0,0],sdot:[0,31,17,21,17,31,0,0],fbox:[0,31,31,31,31,31,0,0],sbox:[0,0,14,10,14,0,0,0],sfbox:[0,0,14,14,14,0,0,0],bigpointerright:[8,12,10,9,10,12,8,0],bigpointerleft:[2,6,10,18,10,6,2,0],arrowright:[8,12,10,9,10,12,8,0],arrowleft:[2,6,10,18,10,6,2,0],ascprogress1:[16,16,16,16,16,16,16,16],ascprogress2:[24,24,24,24,24,24,24,24],ascprogress3:[28,28,28,28,28,28,28,28],ascprogress4:[30,30,30,30,30,30,30,30],fullprogress:[31,31,31,31,31,31,31,31],descprogress1:[1,1,1,1,1,1,1,1],descprogress2:[3,3,3,3,3,3,3,3],descprogress3:[7,7,7,7,7,7,7,7],descprogress4:[15,15,15,15,15,15,15,15],ascchart1:[31,0,0,0,0,0,0,0],ascchart2:[31,31,0,0,0,0,0,0],ascchart3:[31,31,31,0,0,0,0,0],ascchart4:[31,31,31,31,0,0,0,0],ascchart5:[31,31,31,31,31,0,0,0],ascchart6:[31,31,31,31,31,31,0,0],ascchart7:[31,31,31,31,31,31,31,0],descchart1:[0,0,0,0,0,0,0,31],descchart2:[0,0,0,0,0,0,31,31],descchart3:[0,0,0,0,0,31,31,31],descchart4:[0,0,0,0,31,31,31,31],descchart5:[0,0,0,31,31,31,31,31],descchart6:[0,0,31,31,31,31,31,31],descchart7:[0,31,31,31,31,31,31,31],borderleft1:[1,1,1,1,1,1,1,1],borderleft2:[3,2,2,2,2,2,2,3],borderleft3:[7,4,4,4,4,4,4,7],borderleft4:[15,8,8,8,8,8,8,15],borderleft5:[31,16,16,16,16,16,16,31],bordertopbottom5:[31,0,0,0,0,0,0,31],borderright1:[16,16,16,16,16,16,16,16],borderright2:[24,8,8,8,8,8,8,24],borderright3:[28,4,4,4,4,4,4,28],borderright4:[30,2,2,2,2,2,2,30],borderright5:[31,1,1,1,1,1,1,31],box1:[3,3,3,0,0,0,0,0],box2:[24,24,24,0,0,0,0,0],box3:[27,27,27,0,0,0,0,0],box4:[0,0,0,0,3,3,3,0],box5:[3,3,3,0,3,3,3,0],box6:[24,24,24,0,3,3,3,0],box7:[27,27,27,0,3,3,3,0],box8:[0,0,0,0,24,24,24,0],box9:[3,3,3,0,24,24,24,0],box10:[24,24,24,0,24,24,24,0],box11:[27,27,27,0,24,24,24,0],box12:[0,0,0,0,27,27,27,0],box13:[3,3,3,0,27,27,27,0],box14:[24,24,24,0,27,27,27,0],box15:[27,27,27,0,27,27,27,0],euro:[3,4,30,8,30,8,7,0],cent:[0,0,14,17,16,21,14,8],speaker:[1,3,15,15,15,3,1,0],sound:[8,16,0,24,0,16,8,0],x:[0,27,14,4,14,27,0,0],target:[0,10,17,21,17,10,0,0],pointerright:[0,8,12,14,12,8,0,0],pointerup:[0,0,4,14,31,0,0,0],pointerleft:[0,2,6,14,6,2,0,0],pointerdown:[0,0,31,14,4,0,0,0],arrowne:[0,15,3,5,9,16,0,0],arrownw:[0,30,24,20,18,1,0,0],arrowsw:[0,1,18,20,24,30,0,0],arrowse:[0,16,9,5,3,15,0,0],dice1:[0,0,0,4,0,0,0,0],dice2:[0,16,0,0,0,1,0,0],dice3:[0,16,0,4,0,1,0,0],dice4:[0,17,0,0,0,17,0,0],dice5:[0,17,0,4,0,17,0,0],dice6:[0,17,0,17,0,17,0,0],bell:[4,14,14,14,31,0,4,0],smile:[0,10,0,17,14,0,0,0],note:[2,3,2,14,30,12,0,0],clock:[0,14,21,23,17,14,0,0],heart:[0,10,31,31,31,14,4,0],duck:[0,12,29,15,15,6,0,0],check:[0,1,3,22,28,8,0,0],retarrow:[1,1,5,9,31,8,4,0],runninga:[6,6,5,14,20,4,10,17],runningb:[6,6,4,14,14,4,10,10]}},conversions$2={exports:{}},cssKeywords$1={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},cssKeywords=cssKeywords$1,reverseKeywords={};for(var key in cssKeywords)cssKeywords.hasOwnProperty(key)&&(reverseKeywords[cssKeywords[key].join()]=key);var convert$1=conversions$2.exports={rgb:{channels:3},hsl:{channels:3},hsv:{channels:3},hwb:{channels:3},cmyk:{channels:4},xyz:{channels:3},lab:{channels:3},lch:{channels:3},hex:{channels:1},keyword:{channels:1},ansi16:{channels:1},ansi256:{channels:1},hcg:{channels:3}};for(var model in convert$1)if(convert$1.hasOwnProperty(model)){if(!("channels"in convert$1[model]))throw new Error("missing channels property: "+model);var channels=convert$1[model].channels;delete convert$1[model].channels,Object.defineProperty(convert$1[model],"channels",{value:channels})}convert$1.rgb.hsl=function(n){var t=n[0]/255,s=n[1]/255,o=n[2]/255,u=Math.min(t,s,o),h=Math.max(t,s,o),f=h-u,g,v,O;return h===u?g=0:t===h?g=(s-o)/f:s===h?g=2+(o-t)/f:o===h&&(g=4+(t-s)/f),g=Math.min(g*60,360),g<0&&(g+=360),O=(u+h)/2,h===u?v=0:O<=.5?v=f/(h+u):v=f/(2-h-u),[g,v*100,O*100]};convert$1.rgb.hsv=function(n){var t=n[0],s=n[1],o=n[2],u=Math.min(t,s,o),h=Math.max(t,s,o),f=h-u,g,v,O;return h===0?v=0:v=f/h*1e3/10,h===u?g=0:t===h?g=(s-o)/f:s===h?g=2+(o-t)/f:o===h&&(g=4+(t-s)/f),g=Math.min(g*60,360),g<0&&(g+=360),O=h/255*1e3/10,[g,v,O]};convert$1.rgb.hwb=function(n){var t=n[0],s=n[1],o=n[2],u=convert$1.rgb.hsl(n)[0],h=1/255*Math.min(t,Math.min(s,o));return o=1-1/255*Math.max(t,Math.max(s,o)),[u,h*100,o*100]};convert$1.rgb.cmyk=function(n){var t=n[0]/255,s=n[1]/255,o=n[2]/255,u,h,f,g;return g=Math.min(1-t,1-s,1-o),u=(1-t-g)/(1-g)||0,h=(1-s-g)/(1-g)||0,f=(1-o-g)/(1-g)||0,[u*100,h*100,f*100,g*100]};convert$1.rgb.keyword=function(n){return reverseKeywords[n.join()]};convert$1.keyword.rgb=function(n){return cssKeywords[n]};convert$1.rgb.xyz=function(n){var t=n[0]/255,s=n[1]/255,o=n[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92;var u=t*.4124+s*.3576+o*.1805,h=t*.2126+s*.7152+o*.0722,f=t*.0193+s*.1192+o*.9505;return[u*100,h*100,f*100]};convert$1.rgb.lab=function(n){var t=convert$1.rgb.xyz(n),s=t[0],o=t[1],u=t[2],h,f,g;return s/=95.047,o/=100,u/=108.883,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,u=u>.008856?Math.pow(u,1/3):7.787*u+16/116,h=116*o-16,f=500*(s-o),g=200*(o-u),[h,f,g]};convert$1.hsl.rgb=function(n){var t=n[0]/360,s=n[1]/100,o=n[2]/100,u,h,f,g,v;if(s===0)return v=o*255,[v,v,v];o<.5?h=o*(1+s):h=o+s-o*s,u=2*o-h,g=[0,0,0];for(var O=0;O<3;O++)f=t+1/3*-(O-1),f<0&&f++,f>1&&f--,6*f<1?v=u+(h-u)*6*f:2*f<1?v=h:3*f<2?v=u+(h-u)*(2/3-f)*6:v=u,g[O]=v*255;return g};convert$1.hsl.hsv=function(n){var t=n[0],s=n[1]/100,o=n[2]/100,u,h;return o===0?[0,0,0]:(o*=2,s*=o<=1?o:2-o,h=(o+s)/2,u=2*s/(o+s),[t,u*100,h*100])};convert$1.hsv.rgb=function(n){var t=n[0]/60,s=n[1]/100,o=n[2]/100,u=Math.floor(t)%6,h=t-Math.floor(t),f=255*o*(1-s),g=255*o*(1-s*h),v=255*o*(1-s*(1-h));switch(o*=255,u){case 0:return[o,v,f];case 1:return[g,o,f];case 2:return[f,o,v];case 3:return[f,g,o];case 4:return[v,f,o];case 5:return[o,f,g]}};convert$1.hsv.hsl=function(n){var t=n[0],s=n[1]/100,o=n[2]/100,u,h;return h=(2-s)*o,u=s*o,u/=h<=1?h:2-h,u=u||0,h/=2,[t,u*100,h*100]};convert$1.hwb.rgb=function(n){var t=n[0]/360,s=n[1]/100,o=n[2]/100,u=s+o,h,f,g,v;u>1&&(s/=u,o/=u),h=Math.floor(6*t),f=1-o,g=6*t-h,h&1&&(g=1-g),v=s+g*(f-s);var O,E,_;switch(h){default:case 6:case 0:O=f,E=v,_=s;break;case 1:O=v,E=f,_=s;break;case 2:O=s,E=f,_=v;break;case 3:O=s,E=v,_=f;break;case 4:O=v,E=s,_=f;break;case 5:O=f,E=s,_=v;break}return[O*255,E*255,_*255]};convert$1.cmyk.rgb=function(n){var t=n[0]/100,s=n[1]/100,o=n[2]/100,u=n[3]/100,h,f,g;return h=1-Math.min(1,t*(1-u)+u),f=1-Math.min(1,s*(1-u)+u),g=1-Math.min(1,o*(1-u)+u),[h*255,f*255,g*255]};convert$1.xyz.rgb=function(n){var t=n[0]/100,s=n[1]/100,o=n[2]/100,u,h,f;return u=t*3.2406+s*-1.5372+o*-.4986,h=t*-.9689+s*1.8758+o*.0415,f=t*.0557+s*-.204+o*1.057,u=u>.0031308?1.055*Math.pow(u,1/2.4)-.055:u*=12.92,h=h>.0031308?1.055*Math.pow(h,1/2.4)-.055:h*=12.92,f=f>.0031308?1.055*Math.pow(f,1/2.4)-.055:f*=12.92,u=Math.min(Math.max(0,u),1),h=Math.min(Math.max(0,h),1),f=Math.min(Math.max(0,f),1),[u*255,h*255,f*255]};convert$1.xyz.lab=function(n){var t=n[0],s=n[1],o=n[2],u,h,f;return t/=95.047,s/=100,o/=108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,u=116*s-16,h=500*(t-s),f=200*(s-o),[u,h,f]};convert$1.lab.xyz=function(n){var t=n[0],s=n[1],o=n[2],u,h,f,g;return t<=8?(h=t*100/903.3,g=7.787*(h/100)+16/116):(h=100*Math.pow((t+16)/116,3),g=Math.pow(h/100,1/3)),u=u/95.047<=.008856?u=95.047*(s/500+g-16/116)/7.787:95.047*Math.pow(s/500+g,3),f=f/108.883<=.008859?f=108.883*(g-o/200-16/116)/7.787:108.883*Math.pow(g-o/200,3),[u,h,f]};convert$1.lab.lch=function(n){var t=n[0],s=n[1],o=n[2],u,h,f;return u=Math.atan2(o,s),h=u*360/2/Math.PI,h<0&&(h+=360),f=Math.sqrt(s*s+o*o),[t,f,h]};convert$1.lch.lab=function(n){var t=n[0],s=n[1],o=n[2],u,h,f;return f=o/360*2*Math.PI,u=s*Math.cos(f),h=s*Math.sin(f),[t,u,h]};convert$1.rgb.ansi16=function(n){var t=n[0],s=n[1],o=n[2],u=1 in arguments?arguments[1]:convert$1.rgb.hsv(n)[2];if(u=Math.round(u/50),u===0)return 30;var h=30+(Math.round(o/255)<<2|Math.round(s/255)<<1|Math.round(t/255));return u===2&&(h+=60),h};convert$1.hsv.ansi16=function(n){return convert$1.rgb.ansi16(convert$1.hsv.rgb(n),n[2])};convert$1.rgb.ansi256=function(n){var t=n[0],s=n[1],o=n[2];if(t===s&&s===o)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;var u=16+36*Math.round(t/255*5)+6*Math.round(s/255*5)+Math.round(o/255*5);return u};convert$1.ansi16.rgb=function(n){var t=n%10;if(t===0||t===7)return n>50&&(t+=3.5),t=t/10.5*255,[t,t,t];var s=(~~(n>50)+1)*.5,o=(t&1)*s*255,u=(t>>1&1)*s*255,h=(t>>2&1)*s*255;return[o,u,h]};convert$1.ansi256.rgb=function(n){if(n>=232){var t=(n-232)*10+8;return[t,t,t]}n-=16;var s,o=Math.floor(n/36)/5*255,u=Math.floor((s=n%36)/6)/5*255,h=s%6/5*255;return[o,u,h]};convert$1.rgb.hex=function(n){var t=((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255),s=t.toString(16).toUpperCase();return"000000".substring(s.length)+s};convert$1.hex.rgb=function(n){var t=n.toString(16).match(/[a-f0-9]{6}/i);if(!t)return[0,0,0];var s=parseInt(t[0],16),o=s>>16&255,u=s>>8&255,h=s&255;return[o,u,h]};convert$1.rgb.hcg=function(n){var t=n[0]/255,s=n[1]/255,o=n[2]/255,u=Math.max(Math.max(t,s),o),h=Math.min(Math.min(t,s),o),f=u-h,g,v;return f<1?g=h/(1-f):g=0,f<=0?v=0:u===t?v=(s-o)/f%6:u===s?v=2+(o-t)/f:v=4+(t-s)/f+4,v/=6,v%=1,[v*360,f*100,g*100]};convert$1.hsl.hcg=function(n){var t=n[1]/100,s=n[2]/100,o=1,u=0;return s<.5?o=2*t*s:o=2*t*(1-s),o<1&&(u=(s-.5*o)/(1-o)),[n[0],o*100,u*100]};convert$1.hsv.hcg=function(n){var t=n[1]/100,s=n[2]/100,o=t*s,u=0;return o<1&&(u=(s-o)/(1-o)),[n[0],o*100,u*100]};convert$1.hcg.rgb=function(n){var t=n[0]/360,s=n[1]/100,o=n[2]/100;if(s===0)return[o*255,o*255,o*255];var u=[0,0,0],h=t%1*6,f=h%1,g=1-f,v=0;switch(Math.floor(h)){case 0:u[0]=1,u[1]=f,u[2]=0;break;case 1:u[0]=g,u[1]=1,u[2]=0;break;case 2:u[0]=0,u[1]=1,u[2]=f;break;case 3:u[0]=0,u[1]=g,u[2]=1;break;case 4:u[0]=f,u[1]=0,u[2]=1;break;default:u[0]=1,u[1]=0,u[2]=g}return v=(1-s)*o,[(s*u[0]+v)*255,(s*u[1]+v)*255,(s*u[2]+v)*255]};convert$1.hcg.hsv=function(n){var t=n[1]/100,s=n[2]/100,o=t+s*(1-t),u=0;return o>0&&(u=t/o),[n[0],u*100,o*100]};convert$1.hcg.hsl=function(n){var t=n[1]/100,s=n[2]/100,o=s*(1-t)+.5*t,u=0;return o>0&&o<.5?u=t/(2*o):o>=.5&&o<1&&(u=t/(2*(1-o))),[n[0],u*100,o*100]};var conversionsExports=conversions$2.exports,conversions$1=conversionsExports,models$1=Object.keys(conversions$1);function buildGraph(){for(var n={},t=models$1.length,s=0;s<t;s++)n[models$1[s]]={distance:-1,parent:null};return n}function deriveBFS(n){var t=buildGraph(),s=[n];for(t[n].distance=0;s.length;)for(var o=s.pop(),u=Object.keys(conversions$1[o]),h=u.length,f=0;f<h;f++){var g=u[f],v=t[g];v.distance===-1&&(v.distance=t[o].distance+1,v.parent=o,s.unshift(g))}return t}function link(n,t){return function(s){return t(n(s))}}function wrapConversion(n,t){for(var s=[t[n].parent,n],o=conversions$1[t[n].parent][n],u=t[n].parent;t[u].parent;)s.unshift(t[u].parent),o=link(conversions$1[t[u].parent][u],o),u=t[u].parent;return o.conversion=s,o}var route$1=function(n){for(var t=deriveBFS(n),s={},o=Object.keys(t),u=o.length,h=0;h<u;h++){var f=o[h],g=t[f];g.parent!==null&&(s[f]=wrapConversion(f,t))}return s},conversions=conversionsExports,route=route$1,convert={},models=Object.keys(conversions);function wrapRaw(n){var t=function(s){return s==null?s:(arguments.length>1&&(s=Array.prototype.slice.call(arguments)),n(s))};return"conversion"in n&&(t.conversion=n.conversion),t}function wrapRounded(n){var t=function(s){if(s==null)return s;arguments.length>1&&(s=Array.prototype.slice.call(arguments));var o=n(s);if(typeof o=="object")for(var u=o.length,h=0;h<u;h++)o[h]=Math.round(o[h]);return o};return"conversion"in n&&(t.conversion=n.conversion),t}models.forEach(function(n){convert[n]={},Object.defineProperty(convert[n],"channels",{value:conversions[n].channels});var t=route(n),s=Object.keys(t);s.forEach(function(o){var u=t[o];convert[n][o]=wrapRounded(u),convert[n][o].raw=wrapRaw(u)})});var colorConvert=convert,define_process_env_default$b={};const Board$g=requireBoard(),Animation$4=animation,Expander$4=requireExpander(),converter=colorConvert,{constrain:constrain$2,map:map$1}=fn,priv$f=new Map,Controllers$b={DEFAULT:{initialize:{value({pins:n,debug:t}){RGB$2.colors.forEach((s,o)=>{const u=n[o];t&&!this.board.pins.isPwm(u)&&Board$g.Pins.Error({pin:u,type:"PWM",via:"Led.RGB"}),this.io.pinMode(u,this.io.MODES.PWM),this.pins[o]=u})}},write:{writable:!0,value(n){const t=priv$f.get(this);RGB$2.colors.forEach((s,o)=>{const u=this.pins[o];let h=n[s];t.isAnode&&(h=255-constrain$2(h,0,255)),h=map$1(h,0,255,0,this.board.RESOLUTION.PWM),this.io.analogWrite(u,h)})}}},PCA9685:{initialize:{value({address:n,pwmRange:t,frequency:s,pins:o}){const u=priv$f.get(this);this.address=n||64,this.pwmRange=t||[0,4095],this.frequency=s||200,u.expander=Expander$4.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),RGB$2.colors.forEach((h,f)=>{this.pins[f]=u.expander.normalize(o[f]),u.expander.analogWrite(this.pins[f],0)})}},write:{writable:!0,value(n){const t=priv$f.get(this);RGB$2.colors.forEach((s,o)=>{const u=this.pins[o];let h=n[s];t.isAnode&&(h=255-constrain$2(h,0,255)),t.expander.analogWrite(u,h)})}}},BLINKM:{REGISTER:{value:{GO_TO_RGB_COLOR_NOW:110,STOP_SCRIPT:111}},initialize:{value(n){this.address=n.address||9,n.address=this.address,this.board.Drivers[this.address]||(this.io.i2cConfig(n),this.board.Drivers[this.address]={initialized:!1},this.io.i2cWrite(this.address,[this.REGISTER.STOP_SCRIPT]),this.board.Drivers[this.address].initialized=!0)}},write:{writable:!0,value({red:n,green:t,blue:s}){this.io.i2cWrite(this.address,[this.REGISTER.GO_TO_RGB_COLOR_NOW,n,t,s])}}}};Controllers$b.ESPLORA={initialize:{value(n){n.pins=[5,10,9],this.pins=[],Controllers$b.DEFAULT.initialize.value.call(this,n)}},write:Controllers$b.DEFAULT.write};let RGB$2=class Mr{constructor(t){Array.isArray(t)?t={pins:t}:typeof t.pins=="object"&&!Array.isArray(t.pins)&&(t.pins=[t.pins.red,t.pins.green,t.pins.blue]),Board$g.Component.call(this,t=Board$g.Options(t)),Board$g.Controller.call(this,Controllers$b,t);const s={red:255,green:255,blue:255,intensity:100,isAnode:t.isAnode||!1,interval:null,values:{red:255,green:255,blue:255}};priv$f.set(this,s),Object.defineProperties(this,{isOn:{get(){return Mr.colors.some(o=>s[o]>0)}},isRunning:{get(){return!!s.interval}},isAnode:{get(){return s.isAnode}},values:{get(){return Object.assign({},s.values)}},update:{value(o){const u=priv$f.get(this);o=o||this.color(),u.values=Mr.ToScaledRGB(u.intensity,o),this.write(u.values),Object.assign(u,o)}}}),this.initialize(t),this.off()}color(t,s,o){const u=priv$f.get(this);let h;if(arguments.length===0)return h=this.isOn?u:u.prev,Mr.colors.reduce((g,v)=>(g[v]=Math.round(h[v]),g),{});const f=Mr.ToRGB(t,s,o);return Mr.colors.forEach(g=>{let v=f[g];if(v==null)throw new Error(`Led.RGB.color: invalid color ([${[f.red,f.green,f.blue].join(",")}])`);v=constrain$2(v,0,255),f[g]=v}),this.update(f),this}on(){const t=priv$f.get(this);let s;return this.isOn||(s=t.prev||{red:255,green:255,blue:255},t.prev=null,this.update(s)),this}off(){const t=priv$f.get(this);return this.isOn&&(t.prev=Mr.colors.reduce((s,o)=>(s[o]=t[o],s),{}),this.update({red:0,green:0,blue:0})),this}blink(t,s){const o=priv$f.get(this);return this.stop(),typeof t=="function"&&(s=t,t=null),o.interval=setInterval(()=>{this.toggle(),typeof s=="function"&&s()},t||100),this}toggle(){return this[this.isOn?"off":"on"]()}stop(){const t=priv$f.get(this);return t.interval&&clearInterval(t.interval),t.animation&&t.animation.stop(),t.interval=null,this}intensity(t){const s=priv$f.get(this);return arguments.length===0?s.intensity:(s.intensity=constrain$2(t,0,100),this.update(),this)}[Animation$4.normalize](t){const s=priv$f.get(this);return t[0]===null&&(t[0]=s.values),t.reduce((o,u)=>{const h=u;let f={},g=null,v=s.intensity;if(u!==null){if(typeof h=="number")throw new Error("RGB LEDs expect a complete keyFrame object or hexadecimal string value");typeof h=="string"&&(g=h),Array.isArray(h)?g=h:typeof h=="object"&&(typeof h.color<"u"?g=h.color:g=h),typeof u.intensity=="number"&&(v=u.intensity,delete u.intensity),f.easing=u.easing||"linear",f.value=Mr.ToScaledRGB(v,Mr.ToRGB(g))}else f=u;return o.push(f),o},[])}[Animation$4.render](t){return this.color(t[0])}};RGB$2.prototype[Animation$4.keys]=RGB$2.colors;RGB$2.colors=["red","green","blue"];RGB$2.ToScaledRGB=(n,t)=>{const s=n/100;return RGB$2.colors.reduce((o,u)=>(o[u]=Math.round(t[u]*s),o),{})};RGB$2.ToRGB=(n,t,s)=>{let o={},u=0,h;if(typeof n<"u"&&(u|=4),typeof t<"u"&&(u|=2),typeof s<"u"&&(u|=1),(u|4)===4){if(h=n,h==null)throw new Error(`Invalid color (${h})`);if(Array.isArray(h))o={red:h[0],green:h[1],blue:h[2]};else if(typeof h=="object")o={red:h.red,green:h.green,blue:h.blue};else if(typeof h=="string")if(/^#?[0-9A-Fa-f]{6}$/.test(h))h.length===7&&h[0]==="#"&&(h=h.slice(1)),o={red:parseInt(h.slice(0,2),16),green:parseInt(h.slice(2,4),16),blue:parseInt(h.slice(4,6),16)};else if(/^rgb/.test(h)){const f=h.match(/^rgba?\(([^)]+)\)$/)[1].split(/[\s,]+/);isPercentString(f[0])&&f.forEach((g,v)=>{v<=2&&(f[v]=Math.round(parseInt(g,10)/100*255))}),o={red:parseInt(f[0],10),green:parseInt(f[1],10),blue:parseInt(f[2],10)},f.length>3&&(isPercentString(f[3])&&(f[3]=parseInt(f[3],10)/100),o=RGB$2.ToScaledRGB(100*parseFloat(f[3]),o))}else return RGB$2.ToRGB(converter.keyword.rgb(h.toLowerCase()))}else o={red:n,green:t,blue:s};return o};function isPercentString(n){return typeof n=="string"&&n.endsWith("%")}RGB$2.prototype.strobe=RGB$2.prototype.blink;define_process_env_default$b.IS_TEST_MODE&&(RGB$2.Controllers=Controllers$b,RGB$2.purge=()=>{priv$f.clear()});var rgb=RGB$2,Board$f=requireBoard(),Pin=pin,lcdCharacters=lcdChars,RGB$1=rgb;const priv$e=new Map;function sleepus(n){const t=process$1.hrtime();let s,o=0;for(;n>o;)s=process$1.hrtime(t),o=(s[0]*1e9+s[1])/1e3}function sleep(n){sleepus(n*1e3)}let Expander$3=class{constructor(t,s){this.address=t,this.mask=255,this.memory=0,this.io=s}pinMode(t,s){s===1?this.mask&=~(1<<t):this.mask|=1<<t}portMode(t){this.mask=t===0?255:0}portWrite(t){this.memory=t&~this.mask,this.io.i2cWrite(this.address,this.memory)}};const REGISTER={DEFAULT:{SHIFT_LEFT:4,CLEAR:1,HOME:2,ENTRY:4,DISPLAY:8,DIMENSIONS:32,CURSORSHIFT:16,SETCGRAMADDR:64,SETDDRAMADDR:128,DATA:64,COMMAND:128,ENTRYRIGHT:0,ENTRYLEFT:2,ENTRYSHIFTINCREMENT:1,ENTRYSHIFTDECREMENT:0,DISPLAYON:4,DISPLAYOFF:0,CURSORON:2,CURSOROFF:0,BLINKON:1,BLINKOFF:0,DISPLAYMOVE:8,CURSORMOVE:0,MOVERIGHT:4,MOVELEFT:0,BITMODE:{4:0,8:16},LINE:{1:0,2:8},DOTS:{"5x10":4,"5x8":0},BACKLIGHT_ON:8,BACKLIGHT_OFF:0,MEMORYLIMIT:8,EN:4,RW:2,RS:1,D4:4,D5:5,D6:6,D7:7}},Controllers$a={JHD1313M1:{REGISTER:{value:REGISTER.DEFAULT},CHARS:{value:lcdCharacters.DEFAULT},initialize:{value(n){this.address={lcd:n.address||62,rgb:98},n.address=this.address,this.io.i2cConfig(n),this.lines=n.lines||2,this.rows=n.rows||2,this.cols=n.cols||16,this.dots=n.dots||"5x8";const s={display:this.REGISTER.DISPLAY|this.REGISTER.DISPLAYON|this.REGISTER.CURSOROFF|this.REGISTER.BLINKOFF,characters:{},index:this.REGISTER.MEMORYLIMIT-1,backlight:{polarity:1,pin:null,value:null}};priv$e.set(this,s);{const o=this.REGISTER.DIMENSIONS|this.REGISTER.LINE[2];sleep(50),this.command(o),sleep(5),this.command(o),this.command(o),this.command(o),sleep(5),this.command(this.REGISTER.ENTRY|this.REGISTER.ENTRYLEFT|this.REGISTER.ENTRYSHIFTDECREMENT),this.on(),this.clear(),this.home()}this.bgOn(),n.color?this.bgColor(n.color):this.bgColor("black")}},clear:{value(){return this.command(this.REGISTER.CLEAR)}},setCursor:{value(n,t){return this.command(t===0?n|128:n|192)}},autoscroll:{value(){const n=priv$e.get(this);return n.display=this.REGISTER.ENTRYLEFT|this.REGISTER.ENTRYSHIFTINCREMENT,this.command(this.REGISTER.ENTRY|n.display),this}},bgColor:{value(n,t,s){const o=RGB$1.ToRGB(n,t,s),u=this.address.rgb;return this.io.i2cWrite(u,[0,0]),this.io.i2cWrite(u,[1,0]),this.io.i2cWrite(u,[4,o.red]),this.io.i2cWrite(u,[3,o.green]),this.io.i2cWrite(u,[2,o.blue]),this}},bgOn:{value(){return this.io.i2cWrite(this.address.rgb,[this.REGISTER.BACKLIGHT_ON,170]),this}},bgOff:{value(){return this.io.i2cWrite(this.address.rgb,[this.REGISTER.BACKLIGHT_ON,0]),this}},command:{value(n,t){return arguments.length===1&&(t=n,n=this.REGISTER.COMMAND),n===this.REGISTER.DATA?this.send(t):this.writeBits(this.REGISTER.COMMAND,t)}},send:{value(n){return this.writeBits(this.REGISTER.DATA,n)}},writeBits:{value(n,t){return this.io.i2cWrite(this.address.lcd,[n,t]),this}},hilo:{value(n){n.call(this)}}},PCF8574:{REGISTER:{value:Object.assign({},REGISTER.DEFAULT,{COMMAND:0,DATA:1,BACKLIGHT_ON:255,BACKLIGHT_OFF:0})},CHARS:{value:lcdCharacters.DEFAULT},initialize:{value(n){this.bitMode=n.bitMode||4,this.lines=n.lines||2,this.rows=n.rows||2,this.cols=n.cols||16,this.dots=n.dots||"5x8",n.address||(n.address=["PCF8574A","PCF8574AT"].includes(n.controller)?63:39),this.io.i2cConfig(n),this.address={lcd:n.address},this.expander=new Expander$3(this.address.lcd,this.io),this.expander.portMode(this.io.MODES.OUTPUT),this.expander.portWrite(0);const t=n.backlight||{polarity:0,pin:3};t.pin=typeof t.pin>"u"?3:t.pin,t.polarity=typeof t.polarity>"u"?0:t.polarity;const s=this.REGISTER.BITMODE[this.bitMode]|this.REGISTER.LINE[this.lines]|this.REGISTER.DOTS[this.dots],o=this.REGISTER.DISPLAY|this.REGISTER.DISPLAYON|this.REGISTER.CURSOROFF|this.REGISTER.BLINKOFF,u=this.REGISTER.ENTRYLEFT|this.REGISTER.ENTRYSHIFTDECREMENT,h={display:o,characters:{},index:this.REGISTER.MEMORYLIMIT-1,backlight:{polarity:t.polarity,pinMask:1<<t.pin,statusMask:0},data:[1<<this.REGISTER.D4,1<<this.REGISTER.D5,1<<this.REGISTER.D6,1<<this.REGISTER.D7]};priv$e.set(this,h);let f=3<<this.REGISTER.SHIFT_LEFT;this.expander.portWrite(f),this.pulse(f),sleep(4),this.expander.portWrite(f),this.pulse(f),sleep(4),this.expander.portWrite(f),this.pulse(f),f=2<<this.REGISTER.SHIFT_LEFT,this.expander.portWrite(f),this.pulse(f),this.command(this.REGISTER.DIMENSIONS|s),this.command(h.display),h.display=u,this.command(this.REGISTER.ENTRY|h.display),this.on(),this.clear(),this.backlight()}},clear:{value(){return this.command(this.REGISTER.CLEAR),sleep(2),this}},backlight:{value(n){const t=priv$e.get(this);let s;return n=typeof n>"u"?255:n,t.backlight.pinMask!==0&&(t.backlight.polarity===0&&n>0||t.backlight.polarity===1&&n===0?s=255:s=0,t.backlight.statusMask=t.backlight.pinMask&s,this.expander.portWrite(t.backlight.statusMask)),this}},createChar:{value(n,t){const s=priv$e.get(this);let o;typeof n=="number"?o=n&7:(o=s.index,s.index--,s.index===-1&&(s.index=this.REGISTER.MEMORYLIMIT-1)),this.command(this.REGISTER.SETCGRAMADDR|o<<3);{sleep(1);for(let u=0;u<8;u++)this.command(this.REGISTER.DATA,t[u]),sleep(1)}return s.characters[n]=o,o}},noBacklight:{value(){this.backlight(0)}},on:{value(){const n=priv$e.get(this);return n.display|=this.REGISTER.DISPLAYON,this.command(this.REGISTER.DISPLAY|n.display),this}},off:{value(){const n=priv$e.get(this);return n.display&=~this.REGISTER.DISPLAYON,this.command(this.REGISTER.DISPLAY|n.display),this}},hilo:{value(n){n.call(this)}},command:{value(n,t){return arguments.length===1&&(t=n,n=this.REGISTER.COMMAND),this.send(n,t),this}},send:{writable:!0,value(n,t){return this.writeBits(n,t>>4),this.writeBits(n,t&15),this}},writeBits:{writable:!0,value(n,t){const s=priv$e.get(this);let o=0;for(let u=0;u<4;u++)(t&1)===1&&(o|=s.data[u]),t=t>>1;return n===this.REGISTER.DATA&&(n=this.REGISTER.RS),o|=n|s.backlight.statusMask,this.pulse(o),this}},pulse:{writable:!0,value(n){this.expander.portWrite(n|this.REGISTER.EN),this.expander.portWrite(n&~this.REGISTER.EN)}}},PARALLEL:{REGISTER:{value:REGISTER.DEFAULT},CHARS:{value:lcdCharacters.DEFAULT},initialize:{value(n){this.bitMode=n.bitMode||4,this.lines=n.lines||2,this.rows=n.rows||2,this.cols=n.cols||16,this.dots=n.dots||"5x8",Array.isArray(n.pins)?this.pins={rs:n.pins[0],en:n.pins[1],data:[n.pins[5],n.pins[4],n.pins[3],n.pins[2]]}:this.pins=n.pins;const t=this.REGISTER.DISPLAY|this.REGISTER.DISPLAYON,s={display:t,characters:{},index:this.REGISTER.MEMORYLIMIT-1,backlight:{polarity:1,pin:null,value:null}};if(priv$e.set(this,s),n.pins.forEach(function(o){this.io.pinMode(o,1)},this),this.io.digitalWrite(this.pins.rs,this.io.LOW),this.io.digitalWrite(this.pins.en,this.io.LOW),n.backlight){if(typeof n.backlight=="number"){const o=n.backlight;n.backlight={pin:o}}n.backlight.pin&&(s.backlight.pin=new Pin({pin:n.backlight.pin,board:this.board}),s.backlight.pin.high())}this.command(3),sleep(4),this.command(3),sleep(4),this.command(3),this.bitMode===4&&this.command(2),this.command(this.REGISTER.LINE[this.lines]|this.REGISTER.DOTS[this.dots]),this.command(t),this.clear(),this.home()}}}};Controllers$a.LCM1602=Controllers$a.LCD1602=Controllers$a.LCM1602IIC=Controllers$a.LCD2004=Controllers$a.PCF8574A=Controllers$a.PCF8574AT=Controllers$a.PCF8574T=Controllers$a.PCF8574;Controllers$a.MJKDZ=Object.assign({},Controllers$a.PCF8574,{REGISTER:{value:Object.assign({},REGISTER.DEFAULT,{SHIFT_LEFT:0,COMMAND:0,DATA:6,EN:16,RW:5,RS:6,D4:0,D5:1,D6:2,D7:3})},writeBits:{writable:!0,value(n,t){const s=priv$e.get(this);let o=0;for(let u=0;u<4;u++)(t&1)===1&&(o|=s.data[u]),t=t>>1;return n===this.REGISTER.DATA&&(n=1<<this.REGISTER.RS),o|=n|s.backlight.statusMask,this.pulse(o),this}}});Controllers$a.DEFAULT=Controllers$a.PARALLEL;class LCD{constructor(t){Board$f.Component.call(this,t=Board$f.Options(t)),Board$f.Controller.call(this,Controllers$a,t),this.ctype=t.controller,this.initialize&&this.initialize(t),Object.defineProperties(this,{characters:{get(){return Object.assign({},priv$e.get(this).characters)}}})}command(t,s){return typeof s>"u"&&(s=t,t=128),this.bitMode===4&&this.send(s>>4),this.send(s),this}send(t){let s=0,o={4:8,8:128}[this.bitMode];for(;o>0;o=o>>1)this.io.digitalWrite(this.pins.data[s],this.io[t&o?"HIGH":"LOW"]),s++;return this.io.digitalWrite(this.pins.en,this.io.LOW),this.io.digitalWrite(this.pins.en,this.io.HIGH),sleepus(1),this.io.digitalWrite(this.pins.en,this.io.LOW),sleepus(37),this}hilo(t){this.io.digitalWrite(this.pins.rs,this.io.HIGH),t.call(this),this.io.digitalWrite(this.pins.rs,this.io.LOW)}print(t,s){let o,u,h,f;return t=`${t}`,s=s||{},o=priv$e.get(this),u=s.dontProcessSpecials||!1,h=!u&&RE_SPECIALS.test(t),t.length===1?this.hilo(function(){this.command(this.REGISTER.DATA,t.charCodeAt(0))}):h?(f=t.replace(RE_SPECIALS,(g,v)=>{const O=o.characters[v];return typeof O=="number"?String.fromCharCode(O):g}),this.print(f,{dontProcessSpecials:!0})):this.hilo(function(){Array.from(t).forEach(function(g){this.command(this.REGISTER.DATA,g.charCodeAt(0))},this)}),this}write(t){return this.hilo.call(this,function(){this.command(this.REGISTER.DATA,t)}),this}clear(){return this.command(this.REGISTER.CLEAR),sleep(2),this}home(){return this.command(this.REGISTER.HOME),sleep(2),this}setCursor(t,s){const o=[0,64,20,84];return this.command(this.REGISTER.SETDDRAMADDR|t+o[s]),this}backlight(t){const s=priv$e.get(this);return t=typeof t>"u",s.backlight.pin instanceof Pin&&(t?s.backlight.pin.high():s.backlight.pin.low()),t?s.display|=this.REGISTER.DISPLAYON:s.display&=~this.REGISTER.DISPLAYON,this.command(s.display),this}noBacklight(){const t=priv$e.get(this);return t.backlight.pin instanceof Pin&&t.backlight.pin.high(),this.backlight(!1)}on(){const t=priv$e.get(this);return t.display|=this.REGISTER.DISPLAYON,this.command(t.display),this}off(){const t=priv$e.get(this);return t.display&=~this.REGISTER.DISPLAYON,this.command(t.display),this}cursor(t,s){if(typeof s<"u"&&typeof t<"u")return this.setCursor(s,t);const o=priv$e.get(this);return o.display|=this.REGISTER.CURSORON,this.command(o.display),this}noCursor(){const t=priv$e.get(this);return t.display&=~this.REGISTER.CURSORON,this.command(t.display),this}blink(){const t=priv$e.get(this);return t.display|=this.REGISTER.BLINKON,this.command(t.display),this}noBlink(){const t=priv$e.get(this);return t.display&=~this.REGISTER.BLINKON,this.command(t.display),this}autoscroll(){const t=priv$e.get(this);return t.display|=this.REGISTER.ENTRYSHIFTINCREMENT,this.command(this.REGISTER.ENTRY|t.display),this}noAutoscroll(){const t=priv$e.get(this);return t.display&=~this.REGISTER.ENTRYSHIFTINCREMENT,this.command(this.REGISTER.ENTRY|t.display),this}createChar(t,s){const o=priv$e.get(this);let u;return typeof t=="number"?u=t&7:(u=o.index,o.index--,o.index===-1&&(o.index=this.REGISTER.MEMORYLIMIT-1)),this.command(this.REGISTER.SETCGRAMADDR|u<<3),this.hilo(function(){for(let h=0;h<8;h++)this.command(this.REGISTER.DATA,s[h])}),o.characters[t]=u,u}useChar(t){const s=priv$e.get(this);if(typeof s.characters[t]>"u"){const o=this.createChar(t,this.CHARS[t]);for(const u in s.characters)if(t!==u&&s.characters[u]===o){delete s.characters[u];break}s.characters[t]=o}return this}}const RE_SPECIALS=/:(\w+):/g;LCD.POSITIVE=0;LCD.NEGATIVE=1;LCD.Characters=lcdCharacters;var lcd=LCD,define_process_env_default$a={};const Board$e=requireBoard(),Animation$3=animation,Expander$2=requireExpander(),{constrain:constrain$1,map,scale:scale$1}=fn,Pins$3=Board$e.Pins,priv$d=new Map,Controllers$9={PCA9685:{initialize:{value({address:n,pwmRange:t,frequency:s,pin:o}){const u=priv$d.get(this);this.address=n||64,this.pwmRange=t||[0,4095],this.frequency=s||200,u.expander=Expander$2.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),this.pin=u.expander.normalize(o),u.mode=this.io.MODES.PWM}},update:{writable:!0,value(n){const t=priv$d.get(this),s=typeof n<"u"?n:t.value,o=t.isAnode?255-Board$e.constrain(s,0,255):s;this.write(o)}},write:{writable:!0,value(n){priv$d.get(this).expander.analogWrite(this.pin,n)}}},DEFAULT:{initialize:{value({pin:n},t){const s=priv$d.get(this),o=Pins$3.isFirmata(this);let u;o&&typeof t=="string"&&t.length>1&&t[0]==="A"&&(t=this.io.analogPins[+t.slice(1)]),u=this.io.defaultLed||13,t=+t,o&&this.io.analogPins.includes(t)?(this.pin=t,s.mode=this.io.MODES.OUTPUT):(this.pin=typeof n>"u"?u:n,s.mode=this.io.MODES[this.board.pins.isPwm(this.pin)?"PWM":"OUTPUT"]),this.io.pinMode(this.pin,s.mode)}},update:{writable:!0,value(n){const t=priv$d.get(this),s=typeof n<"u"?n:t.value;let o=t.isAnode?255-Board$e.constrain(s,0,255):s;o=map(o,0,255,0,this.board.RESOLUTION.PWM),o!==this.io.LOW&&o!==this.io.HIGH&&this.mode!==this.io.MODES.PWM&&Board$e.Pins.Error({pin:this.pin,type:"PWM",via:"Led"}),t.mode===this.io.MODES.OUTPUT&&(o=s),this.write(o)}},write:{writable:!0,value(n){const t=priv$d.get(this);t.mode===this.io.MODES.OUTPUT&&this.io.digitalWrite(this.pin,n),t.mode===this.io.MODES.PWM&&this.io.analogWrite(this.pin,n)}}}};let Led$3=class{constructor(t){const s=typeof t=="object"?t.pin:t;Board$e.Component.call(this,t=Board$e.Options(t)),Board$e.Controller.call(this,Controllers$9,t);const o={isAnode:t.isAnode,isOn:!1,isRunning:!1,value:null,direction:1,mode:null,intensity:0,interval:null};priv$d.set(this,o),Object.defineProperties(this,{value:{get(){return o.value}},mode:{get(){return o.mode}},isOn:{get(){return!!o.value}},isRunning:{get(){return o.isRunning}},animation:{get(){return o.animation}}}),typeof this.initialize=="function"&&this.initialize(t,s)}on(){const t=priv$d.get(this);return t.mode===this.io.MODES.OUTPUT&&(t.value=this.io.HIGH),t.mode===this.io.MODES.PWM&&(t.value===null&&(t.value=255),t.interval||(t.value=255),t.value===0&&(t.value=255)),this.update(),this}off(){const t=priv$d.get(this);return t.value=0,this.update(),this}toggle(){return this[this.isOn?"off":"on"]()}brightness(t){const s=priv$d.get(this);return s.value=t,this.update(),this}intensity(t){const s=priv$d.get(this);return arguments.length===0?s.intensity:(s.intensity=constrain$1(t,0,100),this.brightness(scale$1(s.intensity,0,100,0,255)))}[Animation$3.normalize](t){const s=priv$d.get(this);return t[0]===null&&(t[0]={value:s.value||0}),t.map(o=>(o!==null&&(typeof o=="number"?o={value:o}:(typeof o.brightness=="number"&&(o.value=o.brightness,delete o.brightness),typeof o.intensity=="number"&&(o.value=scale$1(o.intensity,0,100,0,255),delete o.intensity)),o.easing||(o.easing="linear")),o))}[Animation$3.render](t){const s=priv$d.get(this);return s.value=t[0],this.update()}pulse(t,s){const o=priv$d.get(this);this.stop();const u={duration:typeof t=="number"?t:1e3,keyFrames:[0,255],metronomic:!0,loop:!0,easing:"inOutSine",onloop(){typeof s=="function"&&s()}};return typeof t=="object"&&Object.assign(u,t),typeof t=="function"&&(s=t),o.isRunning=!0,o.animation=o.animation||new Animation$3(this),o.animation.enqueue(u),this}fade(t,s,o){const u=priv$d.get(this);this.stop();const h={duration:typeof s=="number"?s:1e3,keyFrames:[null,typeof t=="number"?t:255],easing:"outSine",oncomplete(){u.isRunning=!1,typeof o=="function"&&o()}};return typeof t=="object"&&Object.assign(h,t),typeof t=="function"&&(o=t),typeof s=="object"&&Object.assign(h,s),typeof s=="function"&&(o=s),u.isRunning=!0,u.animation=u.animation||new Animation$3(this),u.animation.enqueue(h),this}fadeIn(t,s){return this.fade(255,t||1e3,s)}fadeOut(t,s){return this.fade(0,t||1e3,s)}blink(t,s){const o=priv$d.get(this);return this.stop(),typeof t=="function"&&(s=t,t=null),o.isRunning=!0,o.interval=setInterval(()=>{this.toggle(),typeof s=="function"&&s()},t||100),this}stop(){const t=priv$d.get(this);return t.interval&&clearInterval(t.interval),t.animation&&t.animation.stop(),t.interval=null,t.isRunning=!1,this}};Led$3.prototype.strobe=Led$3.prototype.blink;define_process_env_default$a.IS_TEST_MODE&&(Led$3.Controllers=Controllers$9,Led$3.purge=function(){priv$d.clear()});var led$1=Led$3;const Animation$2=animation,Led$2=led$1,Collection$9=collection;class Leds extends Collection$9{constructor(t){super(t)}get type(){return Led$2}[Animation$2.normalize](t){return t.map((s,o)=>s!==null?this[o][Animation$2.normalize](s):s)}[Animation$2.render](t){return this.each((s,o)=>s[Animation$2.render]([t[o]]))}}Collection$9.installMethodForwarding(Leds.prototype,Led$2.prototype,{skip:[Animation$2.normalize,Animation$2.render]});Collection$9.installCallbackReconciliation(Leds.prototype,["pulse","fade","fadeIn","fadeOut","blink"]);Led$2.Collection=Leds;var leds=Leds;const Animation$1=animation,Collection$8=collection,RGB=rgb;class RGBs extends Collection$8{constructor(t){super(t)}get type(){return RGB}[Animation$1.normalize](t){return t.map((s,o)=>s!==null?this[o][Animation$1.normalize](s):s)}[Animation$1.render](t){return this.each((s,o)=>s[Animation$1.render]([t[o]]))}}Collection$8.installMethodForwarding(RGBs.prototype,RGB.prototype,{skip:[Animation$1.normalize,Animation$1.render]});Collection$8.installCallbackReconciliation(RGBs.prototype,["blink"]);RGBs.prototype[Animation$1.keys]=RGB.colors;var rgbs=RGBs,ledChars={MATRIX_CHARS:{" ":[0,0,0,0,0,0,0,0],"!":[4,4,4,4,0,0,4,0],'"':[10,10,10,0,0,0,0,0],"#":[10,10,31,10,31,10,10,0],$:[4,15,20,14,5,30,4,0],"%":[24,25,2,4,8,19,3,0],"&":[12,18,20,8,21,18,13,0],"'":[12,4,8,0,0,0,0,0],"(":[2,4,8,8,8,4,2,0],")":[8,4,2,2,2,4,8,0],"*":[0,4,21,14,21,4,0,0],"+":[0,4,4,31,4,4,0,0],",":[0,0,0,0,12,4,8,0],"-":[0,0,0,31,0,0,0,0],".":[0,0,0,0,0,12,12,0],"/":[0,1,2,4,8,16,0,0],"[":[14,8,8,8,8,8,14,0],"\\":[0,16,8,4,2,1,0,0],"]":[14,2,2,2,2,2,14,0],"^":[4,10,17,0,0,0,0,0],_:[0,0,0,0,0,0,31,0],"`":[16,8,4,0,0,0,0,0],":":[0,12,12,0,12,12,0,0],";":[0,12,12,0,12,4,8,0],"<":[2,4,8,16,8,4,2,0],"=":[0,0,31,0,31,0,0,0],">":[8,4,2,1,2,4,8,0],"?":[14,17,1,2,4,0,4,0],"@":[14,17,1,13,21,21,14,0],"{":[2,4,4,8,4,4,2,0],"|":[4,4,4,0,4,4,4,0],"}":[8,4,4,2,4,4,8,0],"~":[8,21,2,0,0,0,0,0],0:[14,17,19,21,25,17,14,0],1:[4,12,4,4,4,4,14,0],2:[14,17,1,2,4,8,31,0],3:[31,2,4,2,1,17,14,0],4:[2,6,10,18,31,2,2,0],5:[31,16,30,1,1,17,14,0],6:[6,8,16,30,17,17,14,0],7:[31,1,2,4,4,4,4,0],8:[30,17,17,14,17,17,14,0],9:[14,17,17,15,1,2,12,0],A:[8,20,34,62,34,34,34,34],B:[60,34,34,62,34,34,60,0],C:[60,64,64,64,64,64,60,0],D:[124,66,66,66,66,66,124,0],E:[124,64,64,124,64,64,64,124],F:[124,64,64,124,64,64,64,64],G:[60,64,64,64,64,68,68,60],H:[68,68,68,124,68,68,68,68],I:[124,16,16,16,16,16,16,124],J:[60,8,8,8,8,8,72,48],K:[0,36,40,48,32,48,40,36],L:[64,64,64,64,64,64,64,124],M:[129,195,165,153,129,129,129,129],N:[0,66,98,82,74,70,66,0],O:[60,66,66,66,66,66,66,60],P:[60,34,34,34,60,32,32,32],Q:[28,34,34,34,34,38,34,29],R:[60,34,34,34,60,36,34,33],S:[0,30,32,32,62,2,2,60],T:[0,62,8,8,8,8,8,8],U:[66,66,66,66,66,66,34,28],V:[66,66,66,66,66,66,36,24],W:[0,73,73,73,73,42,28,0],X:[0,65,34,20,8,20,34,65],Y:[65,34,20,8,8,8,8,8],Z:[0,127,2,4,8,16,32,127],a:[0,0,14,1,15,17,15,0],b:[16,16,22,25,17,17,30,0],c:[0,0,14,17,16,17,14,0],d:[1,1,13,19,17,17,15,0],e:[0,0,14,17,31,16,14,0],f:[2,5,4,14,4,4,4,0],g:[0,13,19,19,13,1,14,0],h:[16,16,22,25,17,17,17,0],i:[4,0,12,4,4,4,14,0],j:[2,0,6,2,2,18,12,0],k:[8,8,9,10,12,10,9,0],l:[12,4,4,4,4,4,14,0],m:[0,0,26,21,21,21,21,0],n:[0,0,22,25,17,17,17,0],o:[0,0,14,17,17,17,14,0],p:[0,22,25,25,22,16,16,0],q:[0,13,19,19,13,1,1,0],r:[0,0,22,25,16,16,16,0],s:[0,0,15,16,30,1,31,0],t:[8,8,28,8,8,9,6,0],u:[0,0,18,18,18,18,13,0],v:[0,0,17,17,17,10,4,0],w:[0,0,17,17,21,21,10,0],x:[0,0,17,10,4,10,17,0],y:[0,0,17,17,19,13,1,14],z:[0,0,31,2,4,8,31,0],euro:[14,16,124,32,124,32,16,14],cent:[0,60,66,64,64,82,60,32],angryface:[0,102,102,0,24,36,66,129],circle:[60,66,129,129,129,129,66,60],cdot:[60,66,129,153,153,129,66,60],donut:[60,126,255,231,231,255,126,60],equality:[0,255,255,0,0,255,255,0],ball:[60,126,255,255,255,255,126,60],thinsquare:[255,129,129,129,129,129,129,255],thicksquare:[255,255,195,195,195,195,255,255],centeredsquare1:[0,0,60,60,60,60,0,0],centeredsquare2:[0,0,60,60,60,60,0,0],arrowright:[0,4,6,255,255,6,4,0],arrowleft:[0,32,96,255,255,96,32,0],note:[4,6,7,4,60,124,124,56],clock:[60,82,145,145,143,129,66,60],heartoutline:[102,153,129,129,66,36,24,0],heartfull:[102,255,255,255,126,60,24,0],thincheck:[0,0,1,2,4,136,80,32],thickcheck:[0,1,3,6,140,216,112,32],speaker:[3,7,63,63,63,63,7,3],sound:[0,64,128,0,192,0,128,64],xbig:[195,231,126,60,60,126,231,195],target:[60,126,195,219,219,195,126,60],bell:[24,60,60,60,60,126,0,24],smile:[0,102,102,0,0,129,66,60],frown:[0,102,102,0,0,60,66,129],winkright:[0,96,102,0,0,129,66,60],winkleft:[0,6,102,0,0,129,66,60],blink:[0,0,102,0,0,129,66,60],laughing:[0,102,102,0,255,129,66,60],tongueout:[0,102,102,0,0,126,10,4],expressionless:[0,102,102,0,0,255,0,0],ascprogress1:[128,128,128,128,128,128,128,128],ascprogress2:[192,192,192,192,192,192,192,192],ascprogress3:[224,224,224,224,224,224,224,224],ascprogress4:[240,240,240,240,240,240,240,240],ascprogress5:[248,248,248,248,248,248,248,248],ascprogress6:[252,252,252,252,252,252,252,252],ascprogress7:[254,254,254,254,254,254,254,254],fullprogress:[255,255,255,255,255,255,255,255],descprogress1:[127,127,127,127,127,127,127,127],descprogress2:[63,63,63,63,63,63,63,63],descprogress3:[31,31,31,31,31,31,31,31],descprogress4:[15,15,15,15,15,15,15,15],descprogress5:[7,7,7,7,7,7,7,7],descprogress6:[3,3,3,3,3,3,3,3],descprogress7:[1,1,1,1,1,1,1,1],ascchart1:[255,0,0,0,0,0,0,0],ascchart2:[255,255,0,0,0,0,0,0],ascchart3:[255,255,255,0,0,0,0,0],ascchart4:[255,255,255,255,0,0,0,0],ascchart5:[255,255,255,255,255,0,0,0],ascchart6:[255,255,255,255,255,255,0,0],ascchart7:[255,255,255,255,255,255,255,0],ascchart8:[255,255,255,255,255,255,255,255],descchart1:[0,255,255,255,255,255,255,255],descchart2:[0,0,255,255,255,255,255,255],descchart3:[0,0,0,255,255,255,255,255],descchart4:[0,0,0,0,255,255,255,255],descchart5:[0,0,0,0,0,255,255,255],descchart6:[0,0,0,0,0,0,255,255],descchart7:[0,0,0,0,0,0,0,255],descchart8:[0,0,0,0,0,0,0,0],borderleft1:[1,1,1,1,1,1,1,1],borderleft2:[3,2,2,2,2,2,2,3],borderleft3:[7,4,4,4,4,4,4,7],borderleft4:[15,8,8,8,8,8,8,15],borderleft5:[31,16,16,16,16,16,16,31],borderleft6:[63,32,32,32,32,32,32,63],borderleft7:[127,64,64,64,64,64,64,127],borderleft8:[255,128,128,128,128,128,128,255],bordertopbottom5:[255,0,0,0,0,0,0,255],borderright1:[128,128,128,128,128,128,128,128],borderright2:[192,64,64,64,64,64,64,192],borderright3:[224,32,32,32,32,32,32,224],borderright4:[240,16,16,16,16,16,16,240],borderright5:[248,8,8,8,8,8,8,248],borderright6:[252,4,4,4,4,4,4,252],borderright7:[254,2,2,2,2,2,2,254],borderright8:[255,1,1,1,1,1,1,255],box1:[224,224,224,0,0,0,0,0],box2:[7,7,7,0,0,0,0,0],box3:[231,231,231,0,0,0,0,0],box4:[0,0,0,0,0,7,7,7],box5:[7,7,7,0,0,7,7,7],box6:[224,224,224,0,0,7,7,7],box7:[231,231,231,0,0,7,7,7],box8:[0,0,0,0,0,224,224,224],box9:[7,7,7,0,0,224,224,224],box10:[224,224,224,0,0,224,224,224],box11:[231,231,231,0,0,224,224,224],box12:[0,0,0,0,0,231,231,231],box13:[7,7,7,0,0,231,231,231],box14:[224,224,224,0,0,231,231,231],box15:[231,231,231,0,0,231,231,231],checkerboard1:[170,85,170,85,170,85,170,85],checkerboard2:[85,170,85,170,85,170,85,170],checkerboard3:[93,234,87,186,85,238,85,187],checkerboard4:[204,51,51,204,204,51,51,204],checkerboard5:[204,204,51,51,204,204,51,51],checkerboard6:[51,204,204,51,51,204,204,51],checkerboard7:[51,51,204,204,51,51,204,204],pointerright:[32,48,56,60,60,56,48,32],pointerup:[0,0,24,60,126,255,0,0],pointerleft:[4,12,28,60,60,28,12,4],pointerdown:[0,0,255,126,60,24,0,0],arrowne:[0,62,6,10,18,34,64,128],arrownw:[0,124,96,80,72,68,2,1],arrowsw:[1,2,68,72,80,96,124,0],arrowse:[128,64,34,18,10,6,62,0],dice1:[0,0,0,24,24,0,0,0],dice2:[192,192,0,0,0,0,3,3],dice3:[192,192,0,24,24,0,3,3],dice4:[195,195,0,0,0,0,195,195],dice5:[195,195,0,24,24,0,195,195],dice6:[195,195,0,195,195,0,195,195],outlinedplus1:[60,36,231,129,129,231,36,60],outlinedplus2:[255,231,231,129,129,231,231,255],twoboxes1:[240,144,144,240,15,9,9,15],twoboxes2:[240,144,144,254,18,18,30,0],twoboxes3:[240,144,188,244,36,60,0,0],twoboxes4:[240,248,216,248,120,0,0,0],twoboxes5:[15,9,9,15,240,144,144,240],fourboxes:[255,153,153,255,255,153,153,255],chain1:[240,248,216,248,120,0,0,0],chain2:[240,144,188,244,47,61,9,15]},SPECIAL_CHARS:{0:[60,102,102,102,102,102,102,60],1:[24,56,120,24,24,24,24,24],2:[60,102,6,12,24,48,96,126],3:[60,102,6,28,6,6,102,60],4:[14,30,54,102,102,126,6,6],5:[126,96,96,124,6,6,102,60],6:[60,102,96,124,102,102,102,60],7:[126,126,6,12,24,24,24,24],8:[60,102,102,60,102,102,102,60],9:[60,102,102,62,6,6,102,60],10:[94,82,82,82,82,94,0,255],11:[36,36,36,36,36,36,0,255],12:[94,66,68,72,80,94,0,255],13:[94,66,78,66,66,94,0,255],14:[82,82,94,66,66,66,0,255],15:[94,80,94,66,66,94,0,255],16:[94,80,94,82,82,94,0,255],17:[94,66,68,72,72,72,0,255],18:[94,82,94,82,82,94,0,255],19:[94,82,94,66,66,94,0,255]},DIGIT_CHARS:{0:126,1:48,2:109,3:121,4:51,5:91,6:95,7:112,8:127,9:123," ":0,".":128,":":255,"!":176,A:119,a:125,B:127,b:31,C:78,c:13,D:126,d:61,E:79,e:111,F:71,f:71,G:94,g:123,H:55,h:23,I:48,i:16,J:60,j:56,K:55,k:23,L:14,l:6,M:85,m:85,N:21,n:21,O:126,o:29,P:103,p:103,Q:115,q:115,R:119,r:5,S:91,s:91,T:70,t:15,U:62,u:28,V:39,v:35,W:63,w:43,X:37,x:37,Y:59,y:51,Z:109,z:109}},define_process_env_default$9={};const Board$d=requireBoard(),ledCharacters=ledChars,priv$c=new Map;let LedControl$2=class $r{constructor(t){Board$d.Component.call(this,t=Board$d.Options(t)),Board$d.Controller.call(this,Controllers$8,t),this.digitOrder=1,this.isMatrix||(this.colon=t.colon||!1);const s=t.devices||(t.addresses?t.addresses.length:1);this.memory=Array(64).fill(0),t.dims=t.dims||$r.MATRIX_DIMENSIONS["8x8"],typeof t.dims=="string"&&(t.dims=$r.MATRIX_DIMENSIONS[t.dims]),Array.isArray(t.dims)&&(t.dims={rows:t.dims[0],columns:t.dims[1]});const o={devices:s,digits:t.digits||8,isMatrix:!!t.isMatrix,isBicolor:!!t.isBicolor,rows:t.dims.rows,columns:t.dims.columns};if(!(o.columns===8||o.columns===16)||!(o.rows===8||o.rows===16)||o.columns+o.rows===32)throw new Error("Invalid matrix dimensions specified: must be 8x8, 16x8 or 8x16");Object.defineProperties(this,{devices:{get(){return o.devices}},digits:{get(){return o.digits}},isMatrix:{get(){return o.isMatrix}},isBicolor:{get(){return o.isBicolor}},rows:{get(){return o.rows}},columns:{get(){return o.columns}}}),priv$c.set(this,o),this.initialize(t)}each(t){for(let s=0;s<this.devices;s++)t.call(this,s)}on(t){return typeof t>"u"?this.each(function(s){this.on(s)}):this.send(t,this.OP.SHUTDOWN||$r.OP.SHUTDOWN,1),this}off(t){return typeof t>"u"?this.each(function(s){this.off(s)}):this.send(t,this.OP.SHUTDOWN||$r.OP.SHUTDOWN,0),this}digit(t,s,o){let u,h,f,g,v,O=!1;return arguments.length<3?(u=Array.from(arguments),this.each(function(E){this.digit.apply(this,(u.unshift(E),u))}),this):this.isMatrix?(this.draw.apply(this,arguments),this):(h=t*this.digits,g=String(o),s=Number(s),f=s,this.digitOrder===-1&&(f=this.digits-f-1),g.length===2&&g[1]==="."&&(O=!0,g=g[0]),v=$r.DIGIT_CHARS[g],v||(v=Math.abs(Number(g))),O&&(v=v|$r.DIGIT_CHARS["."]),this.memory[h+f]=v,this.sendDigit(t,f,v),this)}print(t,s){const o=/([0-9A-Za-z][.]|[0-9A-Za-z:]|[\s])/g;let u;if(s=s||{device:0},this.isMatrix)throw new Error("Led.Matrix does not yet support the print method");return typeof t!="string"&&(t=String(t)),u=t.match(o),this.colon&&u.length>2&&u[2]!==":"&&u[2]!==" "&&u.splice(2,0," "),(u||[]).forEach(function(h,f){this.digit(s.device,f,h)},this),this}brightness(t,s){return arguments.length===1?(s=t,this.each(function(o){this.brightness(o,s)})):this.send(t,this.OP.BRIGHTNESS||$r.OP.BRIGHTNESS,Board$d.map(s,0,100,0,15)),this}column(t,s,o){let u;if(!this.isMatrix)throw new Error("The `column` method is only supported for Matrix devices");if(arguments.length===2)o=s,s=t,this.each(function(h){this.column(h,s,o)});else for(let h=0;h<this.rows;h++)u=o>>this.rows-1-h,u=u&1,this.led(t,h,s,u);return this}draw(t,s){let o;if(arguments.length===1)s=t,this.each(function(u){this.draw(u,s)});else if(this.isMatrix){if(Array.isArray(s)?o=s:o=ledCharacters.MATRIX_CHARS[s],o!==void 0){if(o.length!==this.rows&&o.length!==this.columns)throw new Error(`Invalid character: ${o}`);const u=o.length;for(let h=0;h<this.rows-u;h++)o.push(0);o.forEach(function(h,f){this.row(t,f,h)},this)}}else this.digit.apply(this,arguments);return this}device(t){const s={};return Object.keys($r.prototype).forEach(o=>{s[o]=this[o].bind(this,t)}),Object.getOwnPropertyNames(this).forEach(o=>{this[o]&&typeof this[o]=="function"&&(s[o]=this[o].bind(this,t))}),s}},addresses=new Set([112,113,114,115,116,117,118,119]);const Controllers$8={HT16K33:{OP:{value:{SHUTDOWN:32,BRIGHTNESS:224,BLINK:128}},initialize:{writable:!0,value(n){const t=priv$c.get(this),s=Array.from(addresses);if(s.length===0)throw new Error("There are no available HT16K33 controller addresses");this.addresses=n.addresses||(n.address?[n.address]:null),this.addresses===null&&(this.addresses=s.slice(0,t.devices)),this.addresses.forEach(o=>{if(!addresses.has(o))throw new Error(`Invalid HT16K33 controller address: ${o}`);addresses.delete(o)}),this.rotation=n.rotation||1,this.columns===16&&!n.rotation&&(this.rotation=0),this.buffer=Array(this.rows).fill([]),this.isMatrix||(this.colon=!0),n.addresses=this.addresses,this.io.i2cConfig(n),this.each(function(o){this.on(o),this.blink(o,!1),this.brightness(o,100),this.clear(o)})}},blink:{writable:!0,value(n,t){if(arguments.length===1)t=n,this.each(function(s){this.blink(s,t)});else{let s=null;switch(t){case!1:s=0;break;case"slow":s=6;break;case"normal":s=4;break;case"fast":s=2;break}if(s==null)return;this.send(n,this.OP.BLINK|1,s)}return this}},clear:{writable:!0,value(n){let t;if(typeof n>"u")this.each(function(s){this.clear(s)});else{t=n*this.columns;for(let s=0;s<this.rows;s++)this.memory[t+s]=0,this.buffer[n][s]=0;this.writeDisplay(n)}return this}},led:{writable:!0,value(n,t,s,o){if(arguments.length===3)return o=s,s=t,t=n,this.each(function(u){this.led(u,t,s,o)}),this;{let u=s,h=t,f,g=this.rows,v=this.columns;if(h<0||h>=g)return this;if(u<0||u>=v)return this;switch(this.rotation){case 1:v=this.rows,g=this.columns,f=u,u=h,h=f,u=v-u-1;break;case 2:u=v-u-1,h=g-h-1;break;case 3:v=this.rows,g=this.columns,f=u,u=h,h=f,h=g-h-1;break}this.isBicolor?o===LedControl$2.COLORS.GREEN?(this.buffer[n][h]|=1<<u,this.buffer[n][h]&=~(1<<u+8)):o===LedControl$2.COLORS.YELLOW?this.buffer[n][h]|=1<<u+8|1<<u:o===LedControl$2.COLORS.RED?(this.buffer[n][h]|=1<<u+8,this.buffer[n][h]&=~(1<<u)):this.buffer[n][h]&=~(1<<u)&~(1<<u+8):(v===8&&g===8&&(u+=v-1,u%=v),o?this.buffer[n][h]|=1<<u:this.buffer[n][h]&=~(1<<u)),this.writeDisplay(n)}return this}},writeDisplay:{writable:!0,value(n){const t=[0];for(let s=0;s<8;s++)t.push(this.buffer[n][s]&255),t.push(this.buffer[n][s]>>8);this.io.i2cWrite(this.addresses[n],t)}},row:{writable:!0,value(n,t,s){if(!this.isMatrix)throw new Error("The `row` method is only supported for Matrix devices");if(typeof s=="number"&&(s=`0000000000000000${parseInt(s,10).toString(2)}`.substr(0-this.columns,this.columns)),arguments.length===2)s=t,t=n,this.each(function(o){this.row(o,t,s)});else for(let o=0;o<this.columns;o++)this.led(n,t,o,parseInt(s[o],10));return this}},scanLimit:{writable:!0,value(){throw new Error("The `scanLimit` method is not implemented for HT16K33 devices")}},send:{writable:!0,value(n,t,s){if(arguments.length!==3)throw new Error("The `send` method expects three arguments: device, opcode, data");return this.io.i2cWrite(this.addresses[n],[t|s]),this}},sendDigit:{writable:!0,value(n,t,s){return s>0&&s<255&&(s=`00000000${s.toString(2)}`.slice(-8).split(""),s=s.shift()+s.reverse().join(""),s=parseInt(s,2)),this.buffer[n][t]=s,this.writeDisplay(n),this}}},DEFAULT:{OP:{value:{}},initialize:{writable:!0,value({pins:n}){this.pins={data:n.data,clock:n.clock,cs:n.cs||n.latch},["data","clock","cs"].forEach(function(t){this.io.pinMode(this.pins[t],this.io.MODES.OUTPUT)},this),this.digitOrder=-1,this.digitOrder=-1;for(let t=0;t<this.devices;t++)this.isMatrix&&this.send(t,LedControl$2.OP.DECODING,0),this.send(t,LedControl$2.OP.BRIGHTNESS,3),this.send(t,LedControl$2.OP.SCANLIMIT,7),this.send(t,LedControl$2.OP.SHUTDOWN,1),this.send(t,LedControl$2.OP.DISPLAYTEST,0),this.clear(t),this.on(t);return this}},clear:{writable:!0,value(n){let t;if(typeof n>"u")this.each(function(s){this.clear(s)});else{t=n*8;for(let s=0;s<8;s++)this.memory[t+s]=0,this.send(n,s+1,0)}return this}},sendDigit:{writable:!0,value(n,t,s){return this.send(n,t+1,s),this}},led:{writable:!0,value(n,t,s,o){let u,h;return arguments.length===3?(o=s,s=t,t=n,this.each(function(f){this.led(f,t,s,o)})):(u=n*this.columns,h=128>>s,o?this.memory[u+t]=this.memory[u+t]|h:(h=~h,this.memory[u+t]=this.memory[u+t]&h),this.send(n,t+1,this.memory[u+t])),this}},row:{writable:!0,value(n,t,s){if(!this.isMatrix)throw new Error("The `row` method is only supported for Matrix devices");let o;return typeof s=="string"&&(s=parseInt(s,2)),arguments.length===2?(s=t,t=n,this.each(function(u){this.row(u,t,s)})):(o=n*this.columns,this.memory[o+t]=s,this.send(n,t+1,this.memory[o+t])),this}},scanLimit:{writable:!0,value(n,t){return arguments.length===1?(t=n,this.each(function(s){this.scanLimit(s,t)})):this.send(n,LedControl$2.OP.SCANLIMIT,t),this}},send:{writable:!0,value(n,t,s){if(arguments.length!==3)throw new Error("`send` expects three arguments: device, opcode, data");const o=n*2,u=this.devices*2,h=[];if(n<this.devices){for(let f=0;f<u;f++)h[f]=0;h[o+1]=t,h[o]=s,this.io.digitalWrite(this.pins.cs,this.io.LOW);for(let f=u;f>0;f--)this.board.shiftOut(this.pins.data,this.pins.clock,h[f-1]);this.io.digitalWrite(this.pins.cs,this.io.HIGH)}return this}}}};LedControl$2.DEFAULTS={DECODING:0,BRIGHTNESS:3,SCANLIMIT:7,SHUTDOWN:1,DISPLAYTEST:0};Object.freeze(LedControl$2.DEFAULTS);LedControl$2.OP={};LedControl$2.OP.NOOP=0;LedControl$2.OP.DIGIT0=1;LedControl$2.OP.DIGIT1=2;LedControl$2.OP.DIGIT2=3;LedControl$2.OP.DIGIT3=4;LedControl$2.OP.DIGIT4=5;LedControl$2.OP.DIGIT5=6;LedControl$2.OP.DIGIT6=7;LedControl$2.OP.DIGIT7=8;LedControl$2.OP.DECODEMODE=9;LedControl$2.OP.INTENSITY=10;LedControl$2.OP.SCANLIMIT=11;LedControl$2.OP.SHUTDOWN=12;LedControl$2.OP.DISPLAYTEST=15;LedControl$2.OP.BRIGHTNESS=LedControl$2.OP.INTENSITY;LedControl$2.OP.DECODING=LedControl$2.OP.DECODEMODE;LedControl$2.OP.DISPLAY=LedControl$2.OP.DISPLAYTEST;LedControl$2.OP.POWERDOWN=LedControl$2.OP.SHUTDOWN;Object.freeze(LedControl$2.OP);LedControl$2.COLORS={RED:1,YELLOW:2,GREEN:3};LedControl$2.DIRECTIONS={UP:1,RIGHT:2,DOWN:3,LEFT:4,1:"UP",2:"RIGHT",3:"DOWN",4:"LEFT"};Object.freeze(LedControl$2.DIRECTIONS);const digits$1=[[224,160,160,160,160,160,224,0],[64,192,64,64,64,64,224,0],[224,32,32,224,128,128,224,0],[224,32,32,96,32,32,224,0],[32,96,160,224,32,32,32,0],[224,128,128,224,32,32,224,0],[224,128,128,224,160,160,224,0],[224,32,32,32,32,32,32,0],[224,160,160,64,160,160,224,0],[224,160,160,224,32,32,224,0]];let charName="";for(let n=0;n<10;n++)for(let t=0;t<10;t++){charName=`${n}${t}`,ledCharacters.MATRIX_CHARS[charName]=[];for(let s=0;s<8;s++)ledCharacters.MATRIX_CHARS[charName][s]=digits$1[n][s]|digits$1[t][s]>>>4}LedControl$2.MATRIX_DIMENSIONS={"16x8":{rows:16,columns:8},"8x16":{rows:8,columns:16},"8x8":{rows:8,columns:8}};LedControl$2.MATRIX_CHARS=ledCharacters.MATRIX_CHARS;LedControl$2.DIGIT_CHARS=ledCharacters.DIGIT_CHARS;define_process_env_default$9.IS_TEST_MODE&&(LedControl$2.Controllers=Controllers$8,LedControl$2.purge=()=>{addresses=new Set([112,113,114,115,116,117,118,119]),priv$c.clear()});var ledcontrol=LedControl$2;const LedControl$1=ledcontrol;class Matrix extends LedControl$1{constructor(t){t.isMatrix=!0,super(t)}static get CHARS(){return LedControl$1.MATRIX_CHARS}}var matrix=Matrix;const LedControl=ledcontrol;class Digits extends LedControl{constructor(t){t.isMatrix=!1,super(t)}static get CHARS(){return LedControl.DIGIT_CHARS}}var digits=Digits;const Led$1=led$1;Led$1.Collection=leds;Led$1.RGB=rgb;Led$1.RGB.Collection=rgbs;Led$1.Matrix=matrix;Led$1.Digits=digits;var led=Led$1,define_process_env_default$8={};const Board$c=requireBoard(),EVS$2=evshield,Withinable$2=withinable,{uint16,toFixed:toFixed$1,scale}=fn,priv$b=new Map,Controllers$7={DEFAULT:{initialize:{value(n,t){this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,t)}},toIntensityLevel:{value(n){return toFixed$1(scale(n,0,1023,0,100)/100,2)}}},EVS_EV3:{initialize:{value(n,t){const s=priv$b.get(this);n.mode&&(n.mode=n.mode.toUpperCase()),s.mode=n.mode==="REFLECTED"?EVS$2.Type_EV3_LIGHT_REFLECTED:EVS$2.Type_EV3_LIGHT,s.shield=EVS$2.shieldPort(n.pin),s.ev3=new EVS$2(Object.assign(n,{io:this.io})),s.ev3.setup(s.shield,EVS$2.Type_EV3),s.ev3.write(s.shield,129+s.shield.offset,s.mode),s.ev3.read(s.shield,EVS$2.Light,EVS$2.Light_Bytes,o=>{const u=o[0]|o[1]<<8;t(u)})}},toIntensityLevel:{value(n){return toFixed$1(n/100,2)}}},EVS_NXT:{initialize:{value(n,t){const s=priv$b.get(this);n.mode&&(n.mode=n.mode.toUpperCase()),s.mode=n.mode==="REFLECTED"?EVS$2.Type_NXT_LIGHT_REFLECTED:EVS$2.Type_NXT_LIGHT,s.shield=EVS$2.shieldPort(n.pin),s.ev3=new EVS$2(Object.assign(n,{io:this.io})),s.ev3.setup(s.shield,s.mode),s.ev3.read(s.shield,s.shield.analog,EVS$2.Analog_Bytes,o=>{t(o[0]|o[1]<<8)})}},toIntensityLevel:{value(n){return toFixed$1(scale(n,0,1023,100,0)/100,2)}}},TSL2561:{ADDRESSES:{value:[41,57,73]},REGISTER:{value:{CONTROL:0,TIMING:1,READ:44}},initialize:{value(n,t){const s=de=>de|128,{Drivers:o}=requireSip(),u=o.addressResolver(this,n);this.io.i2cConfig(n),this.io.i2cWriteReg(u,s(this.REGISTER.CONTROL),3);const h=14,f=9,g=64,v=498,O=446,E=128,_=532,p=721,b=192,C=575,P=891,A=256,T=624,I=1022,M=312,j=367,W=508,Z=410,oe=210,k=251,K=666,J=24,Q=18,ie=666,ue=0,fe=0,we=0,Te=16,he=[13,101,402],ce=[15,120,450],Ce=[29975,4071,65536];let pe=Te,Ie=0,Le=he[Ie],ee=0;Object.defineProperties(this,{gain:{get(){return pe},set(de){if(de!==we&&de!==Te)throw new RangeError("Invalid gain. Expected one of: 0, 16");pe=de,this.io.i2cWriteReg(u,s(this.REGISTER.TIMING),Ie|pe)}},integration:{get(){return Le},set(de){if(Ie=he.indexOf(de),Ie===-1)throw new RangeError("Invalid integration. Expected one of: 13, 101, 402");Le=de,this.io.i2cWriteReg(u,s(this.REGISTER.TIMING),Ie|pe)}},lux:{get(){return ee}}}),this.gain=pe,this.integration=Le;const ae=()=>{setTimeout(()=>{this.io.i2cReadOnce(u,s(this.REGISTER.READ),4,de=>{let X=uint16(de[1],de[0]),re=uint16(de[3],de[2]),ge=0,ye=0,Oe=Ce[Ie];pe||(Oe=Oe<<4),X=X*Oe>>10,re=re*Oe>>10;let F=0;X&&(F=(re<<f+1)/X),F=Math.round(F);const H=F+1>>1;H>=0&&H<=g?(ge=v,ye=O):H<=E?(ge=_,ye=p):H<=b?(ge=C,ye=P):H<=A?(ge=T,ye=I):H<=M?(ge=j,ye=W):H<=Z?(ge=oe,ye=k):H<=K?(ge=J,ye=Q):H>ie&&(ge=ue,ye=fe);let Se=X*ge-re*ye;Se<0&&(Se=0),Se+=1<<h-1,ee=Se>>>h,t(ee),ae()})},ce[Ie])};ae()}},toLux:{value(n){return n}},toIntensityLevel:{value(n){return toFixed$1(scale(n,0,17e3,0,100)/100,2)}}},BH1750:{ADDRESSES:{value:[35,92]},initialize:{value(n,t){const{Drivers:s}=requireSip(),o=s.addressResolver(this,n),u=n.mode||16;this.io.i2cConfig(n),this.io.i2cWrite(o,u);const h=()=>{setTimeout(()=>{this.io.i2cReadOnce(o,2,f=>{t(uint16(f[0],f[1])),h()})},120)};h()}},toLux:{value(n){return Math.round(n/1.2)}},toIntensityLevel:{value(n){return toFixed$1(scale(n/1.2,0,65535,0,100)/100,2)}}}};Controllers$7.ALSPT19=Controllers$7["ALS-PT19"]=Controllers$7.DEFAULT;class Light extends Withinable$2{constructor(t){super(),Board$c.Component.call(this,t=Board$c.Options(t)),Board$c.Controller.call(this,Controllers$7,t);let s=0,o=0,{freq:u=25}=t;priv$b.set(this,{}),this.toIntensityLevel||(this.toIntensityLevel=t.toIntensityLevel||(f=>f)),this.toLux||(this.toLux=t.toLux||(f=>f)),Object.defineProperties(this,{value:{get(){return s}},level:{get(){return this.toIntensityLevel(s)}}}),typeof this.initialize=="function"&&this.initialize(t,f=>s=f),typeof this.lux>"u"&&Object.defineProperty(this,"lux",{get(){return this.toLux(s)}});const h={level:0,lux:0};setInterval(()=>{h.level=this.level,h.lux=this.lux,this.emit("data",h),s!==o&&(o=s,this.emit("change",h))},u)}}define_process_env_default$8.IS_TEST_MODE&&(Light.Controllers=Controllers$7,Light.purge=function(){priv$b.clear()});var light=Light,define_process_env_default$7={};const Board$b=requireBoard(),Emitter$5=emitter,{constrain,fscale}=fn,priv$a=new Map,axes=["x","y"];class Multiplexer{constructor({pins:t,io:s}){this.pins=t,this.io=s,this.io.pinMode(this.pins[0],this.io.MODES.OUTPUT),this.io.pinMode(this.pins[1],this.io.MODES.OUTPUT),this.io.pinMode(this.pins[2],this.io.MODES.OUTPUT),this.io.pinMode(this.pins[3],this.io.MODES.OUTPUT)}select(t){this.io.digitalWrite(this.pins[0],t&1?this.io.HIGH:this.io.LOW),this.io.digitalWrite(this.pins[1],t&2?this.io.HIGH:this.io.LOW),this.io.digitalWrite(this.pins[2],t&4?this.io.HIGH:this.io.LOW),this.io.digitalWrite(this.pins[3],t&8?this.io.HIGH:this.io.LOW)}}const Controllers$6={ANALOG:{initialize:{value({pins:n},t){const s={x:null,y:null};n.forEach((o,u)=>{this.io.pinMode(o,this.io.MODES.ANALOG),this.io.analogRead(o,h=>{s[axes[u]]=h,s.x!==null&&s.y!==null&&(t({x:s.x,y:s.y}),s.x=null,s.y=null)})})}},toAxis:{value(n,t){const s=priv$a.get(this);return constrain(fscale(n-s[t].zeroV,-511,511,-1,1),-1,1)}}},ESPLORA:{initialize:{value(n,t){const s=new Multiplexer({pins:[18,19,20,21],io:this.io}),o=[11,12];let u=1;const h={x:null,y:null};this.io.pinMode(4,this.io.MODES.ANALOG);const f=v=>{h[axes[u]]=v,h.x!==null&&h.y!==null&&(t({x:h.x,y:h.y}),h.x=null,h.y=null),this.io.removeListener("analog-read-4",f),setTimeout(g,10)};var g=()=>{s.select(o[u^=1]),this.io.analogRead(4,f)};g()}},toAxis:{value(n,t){const s=priv$a.get(this);return constrain(fscale(n-s[t].zeroV,-511,511,-1,1),-1,1)}}}};Controllers$6.DEFAULT=Controllers$6.ANALOG;class Joystick extends Emitter$5{constructor(t){super(),Board$b.Component.call(this,t=Board$b.Options(t)),Board$b.Controller.call(this,Controllers$6,t),this.toAxis||(this.toAxis=t.toAxis||(o=>o));const s={x:{invert:!1,value:0,previous:0,zeroV:0,calibrated:!1},y:{invert:!1,value:0,previous:0,zeroV:0,calibrated:!1}};s.x.zeroV=t.zeroV===void 0?0:t.zeroV.x||0,s.y.zeroV=t.zeroV===void 0?0:t.zeroV.y||0,s.x.invert=t.invertX||t.invert||!1,s.y.invert=t.invertY||t.invert||!1,priv$a.set(this,s),typeof this.initialize=="function"&&this.initialize(t,o=>{let u=!1;const h={x:null,y:null};Object.keys(o).forEach(f=>{const g=o[f],v=s[f];v.value=g,s[f].calibrated||(s[f].calibrated=!0,s[f].zeroV=g,u=!0),h[f]=this[f];const O=Math.abs(h[f]),E=Math.abs(v.previous);(O<E||O>E)&&(u=!0),v.previous=h[f]}),this.emit("data",{x:h.x,y:h.y}),u&&this.emit("change",{x:h.x,y:h.y})}),Object.defineProperties(this,{x:{get(){return this.toAxis(s.x.value,"x")*(s.x.invert?-1:1)}},y:{get(){return this.toAxis(s.y.value,"y")*(s.y.invert?-1:1)}}})}}define_process_env_default$7.IS_TEST_MODE&&(Joystick.Controllers=Controllers$6,Joystick.purge=()=>{priv$a.clear()});var joystick=Joystick,define_process_env_default$6={};const Board$a=requireBoard(),Collection$7=collection,Emitter$4=emitter,priv$9=new Map;function analogInitializer({pin:n},t){const s=priv$9.get(this);this.io.pinMode(n,this.io.MODES.ANALOG),setTimeout(()=>{s.isCalibrated=!0,this.emit("calibrated")},10),this.io.analogRead(n,t)}const initialize={value:analogInitializer},Controllers$5={PIR:{initialize:{value(n,t){const s=priv$9.get(this),o=typeof n.calibrationDelay<"u"?n.calibrationDelay:2e3;this.io.pinMode(n.pin,this.io.MODES.INPUT),setTimeout(()=>{s.isCalibrated=!0,this.emit("calibrated")},o),this.io.digitalRead(n.pin,t)}},toBoolean:{value(n){return!!n}}},GP2Y0D805Z0F:{ADDRESSES:{value:[38]},initialize:{value(n,t){const{Drivers:s}=requireSip(),o=s.addressResolver(this,n),u=priv$9.get(this);setTimeout(()=>{u.isCalibrated=!0,this.emit("calibrated")},10),this.io.i2cConfig(n),this.io.i2cWriteReg(o,3,254),this.io.i2cWrite(o,[0]),this.io.i2cRead(o,1,h=>{t(h[0]&2)})}},toBoolean:{value(n){return n===0}}},GP2Y0D810Z0F:{initialize,toBoolean:{value(n){return n>>9===0}}},GP2Y0A60SZLF:{initialize,toBoolean:{value(n){return n>>9===1}}}};Controllers$5.GP2Y0D815Z0F=Controllers$5.GP2Y0D810Z0F;Controllers$5["HC-SR501"]=Controllers$5.PIR;Controllers$5.HCSR501=Controllers$5.PIR;Controllers$5["0D805"]=Controllers$5.GP2Y0D805Z0F;Controllers$5[805]=Controllers$5.GP2Y0D805Z0F;Controllers$5["0D810"]=Controllers$5.GP2Y0D810Z0F;Controllers$5[810]=Controllers$5.GP2Y0D810Z0F;Controllers$5["0D815"]=Controllers$5.GP2Y0D815Z0F;Controllers$5[815]=Controllers$5.GP2Y0D815Z0F;Controllers$5["0A60SZLF"]=Controllers$5.GP2Y0A60SZLF;Controllers$5["60SZLF"]=Controllers$5.GP2Y0A60SZLF;Controllers$5.DEFAULT=Controllers$5.PIR;class Motion extends Emitter$4{constructor(t){super(),Board$a.Component.call(this,t=Board$a.Options(t)),Board$a.Controller.call(this,Controllers$5,t);let s=!1;const o=t.freq||25,u={value:!1,isCalibrated:!1};priv$9.set(this,u),Object.defineProperties(this,{detectedMotion:{get(){return this.toBoolean(u.value)}},isCalibrated:{get(){return u.isCalibrated}}}),typeof this.initialize=="function"&&this.initialize(t,h=>u.value=h),setInterval(()=>{let h=!1;const f={timestamp:Date.now(),detectedMotion:this.detectedMotion,isCalibrated:u.isCalibrated};u.isCalibrated&&this.detectedMotion&&!s&&this.emit("motionstart",f),u.isCalibrated&&!this.detectedMotion&&s&&this.emit("motionend",f),s!==this.detectedMotion&&(h=!0),this.emit("data",f),h&&this.emit("change",f),s=this.detectedMotion},o)}}Motion.Collection=class extends Collection$7.Emitter{constructor(n){super(n)}get type(){return Motion}};Collection$7.installMethodForwarding(Motion.Collection.prototype,Motion.prototype);define_process_env_default$6.IS_TEST_MODE&&(Motion.Controllers=Controllers$5,Motion.purge=()=>{priv$9.clear()});var motion=Motion,define_process_env_default$5={};const Board$9=requireBoard(),Fn$6=fn,Collection$6=collection,Withinable$1=withinable,priv$8=new Map;function median(n){const t=n.sort((u,h)=>u-h),s=t.length,o=Math.floor(s/2);return s%2?t[o]:(t[o-1]+t[o])/2}let Sensor$2=class extends Withinable$1{constructor(t){super();let s=1023,o=null,u=-1;const h=[];Board$9.Component.call(this,t=Board$9.Options(t)),t.type||(t.type="analog"),this.io.RESOLUTION&&this.io.RESOLUTION.ADC&&this.io.RESOLUTION.ADC!==s&&(s=this.io.RESOLUTION.ADC),this.mode=t.type==="digital"?this.io.MODES.INPUT:this.io.MODES.ANALOG,this.io.pinMode(this.pin,this.mode);const f={enabled:typeof t.enabled>"u"?!0:t.enabled,booleanBarrier:t.type==="digital"?0:null,intervalId:null,scale:null,value:0,median:0,freq:t.freq||25,previousFreq:t.freq||25};priv$8.set(this,f),this.range=t.range||[0,s],this.limit=t.limit||null,this.threshold=t.threshold===void 0?1:t.threshold,this.isScaled=!1,this.io[`${t.type}Read`](this.pin,v=>{o=v,t.type!=="digital"&&h.push(o)});const g=()=>{let v;if(t.type==="digital"){this.emit("data",o),u!==o&&(this.emit("change",o),u=o);return}h.length>0&&(f.median=median(h));const O=Math.round(f.median);this.emit("data",O),(f.median<=u-this.threshold||f.median>=u+this.threshold)&&(this.emit("change",O),u=f.median),this.limit&&(f.median<=this.limit[0]&&(v="lower"),f.median>=this.limit[1]&&(v="upper"),v&&(this.emit("limit",{boundary:v,value:O}),this.emit(`limit:${v}`,O))),h.length=0};Object.defineProperties(this,{raw:{get(){return o}},analog:{get(){return t.type==="digital"?o:o===null?0:Fn$6.map(this.raw,0,s,0,255)|0}},constrained:{get(){return t.type==="digital"?o:o===null?0:Fn$6.constrain(this.raw,0,255)}},boolean:{get(){const v=priv$8.get(this);let O=v.booleanBarrier;const E=v.scale||[0,s];return O===null&&(O=E[0]+(E[1]-E[0])/2),this.value>O}},scaled:{get(){let v,O;return f.scale&&o!==null?t.type==="digital"?f.scale[o]:(v=Fn$6.fmap(o,this.range[0],this.range[1],f.scale[0],f.scale[1]),O=Fn$6.constrain(v,f.scale[0],f.scale[1]),O):this.constrained}},freq:{get(){return f.freq},set(v){f.freq=v,f.intervalId&&clearInterval(f.intervalId),f.freq!==null&&(f.intervalId=setInterval(g,v))}},value:{get(){return f.scale?(this.isScaled=!0,this.scaled):o}},resolution:{get(){return s}}}),define_process_env_default$5.IS_TEST_MODE&&Object.defineProperties(this,{state:{get(){return priv$8.get(this)}}}),f.enabled&&(this.freq=f.freq)}enable(){const t=priv$8.get(this);return t.enabled||(this.freq=t.freq||t.previousFreq),this}disable(){const t=priv$8.get(this);return t.enabled&&(t.enabled=!1,t.previousFreq=t.freq,this.freq=null),this}scale(t,s){return this.isScaled=!0,priv$8.get(this).scale=Array.isArray(t)?t:[t,s],this}scaleTo(t,s){const o=Array.isArray(t)?t:[t,s];return Fn$6.map(this.raw,0,this.resolution,o[0],o[1])}fscaleTo(t,s){const o=Array.isArray(t)?t:[t,s];return Fn$6.fmap(this.raw,0,this.resolution,o[0],o[1])}booleanAt(t){return priv$8.get(this).booleanBarrier=t,this}};class Sensors extends Collection$6.Emitter{constructor(t){super(t)}get type(){return Sensor$2}}Collection$6.installMethodForwarding(Sensors.prototype,Sensor$2.prototype);Sensor$2.Collection=Sensors;define_process_env_default$5.IS_TEST_MODE&&(Sensor$2.purge=()=>{priv$8.clear()});var sensor=Sensor$2,define_process_env_default$4={};const Board$8=requireBoard(),Collection$5=collection,priv$7=new Map,encoded={cathode:[63,6,91,79,102,109,125,7,127,103],anode:[64,121,36,48,25,18,2,120,0,24]};let ShiftRegister$1=class _s{constructor(t){if(!(this instanceof _s))return new _s(t);Array.isArray(t)?t={pins:{data:t[0],clock:t[1],latch:t[2],reset:t.length===4?t[3]:null}}:typeof t.pins=="object"&&Array.isArray(t.pins)&&(t.pins={data:t.pins[0],clock:t.pins[1],latch:t.pins[2],reset:t.pins.length===4?t.pins[3]:null}),Board$8.Component.call(this,t=Board$8.Options(t)),this.size=t.size||1,this.pins.reset=typeof t.pins.reset<"u"?t.pins.reset:null;const s=typeof t.isAnode<"u"?t.isAnode:!1,o=s?255:0,u={isAnode:s,value:new Array(this.size).fill(o),encoded:encoded[s?"anode":"cathode"],clear:o};priv$7.set(this,u),Object.defineProperties(this,{isAnode:{get(){return s}},value:{get(){return u.value}}})}display(t){const s=priv$7.get(this);let o;if(typeof t=="number")return this.display(String(t));if(typeof t=="string"){const u=t.match(/([0-9]{1}\.*)/g);u&&u.length&&(o=u.map(h=>h.length===1?s.encoded[h]|128:s.encoded[h[0]]))}return this.send(o),s.value=o,this}send(t){const s=priv$7.get(this);let o=Array.from(arguments);return o.length===1&&(o=[t]),Array.isArray(t)&&(o=t),this.io.digitalWrite(this.pins.latch,this.io.LOW),o.forEach(function(u){if(typeof u=="string"&&(u=u.charCodeAt(0)),this.isAnode&&u!==255&&!s.encoded.includes(u)&&!s.encoded.includes(u&-129)){const h=encoded.anode.findIndex(f=>f===u);h!==-1&&(u=encoded.cathode[h])}this.board.shiftOut(this.pins.data,this.pins.clock,!0,u)},this),this.io.digitalWrite(this.pins.latch,this.io.HIGH),s.value=o,this}clear(){const t=priv$7.get(this);return this.send(Array(this.size).fill(t.clear))}reset(){if(this.pins.reset===null)throw new Error("ShiftRegister was not initialized with a reset pin");return this.io.digitalWrite(this.pins.clock,this.io.LOW),this.io.digitalWrite(this.pins.reset,this.io.LOW),this.io.digitalWrite(this.pins.clock,this.io.HIGH),this.io.digitalWrite(this.pins.reset,this.io.HIGH),this}};class ShiftRegisters extends Collection$5{constructor(t){super(t)}get type(){return ShiftRegister$1}}Collection$5.installMethodForwarding(ShiftRegisters.prototype,ShiftRegister$1.prototype);Collection$5.installMethodForwarding(ShiftRegisters.prototype,ShiftRegister$1.prototype);ShiftRegister$1.Collection=ShiftRegisters;define_process_env_default$4.IS_TEST_MODE&&(ShiftRegister$1.purge=()=>{priv$7.clear()});var shiftregister=ShiftRegister$1,define_process_env_default$3={};const Board$7=requireBoard(),Collection$4=collection,Emitter$3=emitter,EVS$1=evshield,Expander$1=requireExpander(),Fn$5=fn,Sensor$1=sensor,ShiftRegister=shiftregister,priv$6=new Map,registers=new Map;function registerKey(n){return["clock","data","latch"].reduce((t,s)=>`${t}.${n[s]}`,"")}function latch(n,t,s){return s?n|=1<<t:n&=~(1<<t)}function updateShiftRegister(n,t){const s=registerKey(n.settings.register),o=registers.get(n.board)[s];let u=o.value;const h=priv$6.get(n).bits,f=t!=="reverse";u=latch(u,h.a,f),u=latch(u,h.b,!f),o.value!==u&&o.send(u)}const Controllers$4={DEFAULT:{},ShiftRegister:{initialize:{value({register:n,bits:t}){const s=registerKey(n);if(!t||t.a===void 0||t.b===void 0)throw new Error("ShiftRegister Motors MUST contain HBRIDGE bits {a, b}");priv$6.get(this).bits=t,registers.has(this.board)||registers.set(this.board,{}),registers.get(this.board)[s]||(registers.get(this.board)[s]=new ShiftRegister({board:this.board,pins:n})),this.io.pinMode(this.pins.pwm,this.io.MODES.PWM)}},dir:{value(n){return this.stop(),updateShiftRegister(this,n.name),this.direction=n,process$1.nextTick(()=>this.emit(n.name)),this}}},PCA9685:{initialize:{value({address:n,pwmRange:t,frequency:s}){const o=priv$6.get(this);this.address=n||64,this.pwmRange=t||[0,4080],this.frequency=s||50,o.expander=Expander$1.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),Object.keys(this.pins).forEach(u=>{this.pins[u]=o.expander.normalize(this.pins[u])})}},setPWM:{writable:!0,value(n,t){priv$6.get(this).expander.analogWrite(n,t)}},setPin:{writable:!0,value(n,t){priv$6.get(this).expander.digitalWrite(n,t)}}},PCA9685_Hybrid:{initialize:{value({address:n,pwmRange:t,frequency:s}){const o=priv$6.get(this);this.address=n||64,this.pwmRange=t||[0,4080],this.frequency=s||50,o.expander=Expander$1.get({address:this.address,controller:"PCA9685",bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),this.pins.pwm=o.expander.normalize(this.pins.pwm)}},setPWM:{writable:!0,value(n,t){priv$6.get(this).expander.analogWrite(n,t)}}},EVS_EV3:{initialize:{value(n){const t=priv$6.get(this);t.shield=EVS$1.shieldPort(n.pin),t.ev3=new EVS$1(Object.assign(n,{io:this.io})),this.settings.pins={pwm:n.pin,dir:n.pin}}},setPWM:{value(n,t){const s=priv$6.get(this),o=s.shield.motor===EVS$1.M1?EVS$1.SPEED_M1:EVS$1.SPEED_M2;let u=Fn$5.scale(t,0,255,0,100)|0;if(t===0)s.ev3.write(s.shield,EVS$1.COMMAND,EVS$1.Motor_Reset);else{this.direction.value||(u=-u);const h=[u,0,0,EVS$1.CONTROL_SPEED|EVS$1.CONTROL_GO];s.ev3.write(s.shield,o,h)}}},setPin:{value(n,t){this.setPWM(this.pin,t)}},validatePins:{value(){if(typeof this.settings.pin>"u")throw new Error("Pin must be defined")}}},GROVE_I2C_MOTOR_DRIVER:{REGISTER:{value:{ADDRESS:15}},COMMANDS:{value:{SET_SPEED:130,SET_PWM_FREQUENCY:132,SET_DIRECTION:170,NOOP:1}},initialize:{value(n){const t=priv$6.get(this);let s=priv$6.get("GROVE_I2C_MOTOR_DRIVER");s||(s={direction:{A:1,B:1},speed:{A:0,B:0}},priv$6.set("GROVE_I2C_MOTOR_DRIVER",s)),t.shared=s,t.pin=n.pin.toUpperCase(),this.settings.pins={pwm:n.pin,dir:n.pin},this.address=n.address||this.REGISTER.ADDRESS,n.address=this.address,this.io.i2cConfig(n)}},setPWM:{value(n,t){const s=priv$6.get(this),o=Board$7.constrain(t,0,255)|0;s.shared.speed[s.pin]=o,this.io.i2cWrite(this.address,[this.COMMANDS.SET_SPEED,s.shared.speed.A,s.shared.speed.B])}},setPin:{value(n,t){const s=priv$6.get(this);s.shared.direction[s.pin]=t?1:2;const o=s.shared.direction.A&3,h=(s.shared.direction.B&3)<<2|o;this.io.i2cWrite(this.address,[this.COMMANDS.SET_DIRECTION,h,this.COMMANDS.NOOP])}},validatePins:{value(){if(typeof this.settings.pin>"u")throw new Error("Pin must be defined")}}}};Controllers$4.EVS_NXT=Controllers$4.EVS_EV3;const Devices={NONDIRECTIONAL:{pins:{get(){return this.settings.pin?{pwm:this.settings.pin}:this.settings.pins||{}}},dir:{writable:!0,configurable:!0,value(n){return n=n||this.speed(),this}},resume:{value(){const n=this.speed();return this.speed({speed:n}),this}}},DIRECTIONAL:{pins:{get(){return Array.isArray(this.settings.pins)?{pwm:this.settings.pins[0],dir:this.settings.pins[1]}:this.settings.pins}},dir:{writable:!0,configurable:!0,value(n){return this.stop(),this.setPin(this.pins.dir,n.value),this.direction=n,process$1.nextTick(()=>this.emit(n.name)),this}}},CDIR:{pins:{get(){return Array.isArray(this.settings.pins)?{pwm:this.settings.pins[0],dir:this.settings.pins[1],cdir:this.settings.pins[2]}:this.settings.pins}},dir:{value(n){return this.stop(),this.direction=n,this.setPin(this.pins.cdir,1^n.value),this.setPin(this.pins.dir,n.value),process$1.nextTick(()=>this.emit(n.name)),this}},brake:{value(n){return this.speed({speed:0,saveSpeed:!1}),this.setPin(this.pins.dir,1,127),this.setPin(this.pins.cdir,1,128,127),this.speed({speed:255,saveSpeed:!1,braking:!0}),process$1.nextTick(()=>this.emit("brake")),n&&this.board.wait(n,()=>this.stop()),this}}}};class Motor extends Emitter$3{constructor(t){super();var s,o;Board$7.Component.call(this,t=Board$7.Options(t)),this.settings=t,typeof this.settings.device>"u"&&(this.settings.device="DIRECTIONAL",typeof this.settings.pins>"u"&&typeof this.settings.register!="object"&&(this.settings.device="NONDIRECTIONAL"),this.settings.pins&&(Array.isArray(this.settings.pins)?this.settings.device=["NONDIRECTIONAL","DIRECTIONAL","CDIR"][this.settings.pins.length-1]:(typeof this.settings.pins.dir>"u"?this.settings.device="NONDIRECTIONAL":this.settings.device="DIRECTIONAL",typeof this.settings.pins.cdir<"u"&&(this.settings.device="CDIR")))),typeof this.settings.controller=="string"&&(this.settings.controller.startsWith("EVS")||this.settings.controller.startsWith("GROVE_I2C"))&&(this.settings.device="DIRECTIONAL"),s=typeof this.settings.device=="string"?Devices[this.settings.device]:this.settings.device,this.threshold=typeof this.settings.threshold<"u"?this.settings.threshold:30,this.invertPWM=typeof this.settings.invertPWM<"u"?this.settings.invertPWM:!1,Object.defineProperties(this,s),this.settings.register&&(this.settings.controller="ShiftRegister"),this.settings.controller&&(typeof this.settings.controller=="string"?Controllers$4[this.settings.controller]:this.settings.controller,Board$7.Controller.call(this,Controllers$4,t)),this.settings.current&&(this.settings.current.board=this.board,this.current=new Sensor$1(this.settings.current)),o={isOn:!1,currentSpeed:typeof this.settings.speed<"u"?this.settings.speed:128,braking:!1,enabled:!1},priv$6.set(this,o),Object.defineProperties(this,{isOn:{get:function(){return o.isOn}},currentSpeed:{get:function(){return o.currentSpeed}},braking:{get:function(){return o.braking}},enabled:{get:function(){return o.enabled}}}),this.direction={value:1},this.initialize&&this.initialize(t),this.validatePins(),this.enable(),this.dir(this.direction)}}Motor.prototype.initialize=function(){this.io.pinMode(this.pins.pwm,this.io.MODES.PWM),["dir","cdir","brake","enable"].forEach(n=>{typeof this.pins[n]<"u"&&this.io.pinMode(this.pins[n],this.io.MODES.OUTPUT)})};Motor.prototype.setPin=function(n,t){this.io.digitalWrite(n,t)};Motor.prototype.setPWM=function(n,t){this.io.analogWrite(n,Fn$5.map(t,0,255,0,this.board.RESOLUTION.PWM))};Motor.prototype.speed=function(n){var t=priv$6.get(this);return typeof n>"u"?t.currentSpeed:(typeof n=="number"&&(n={speed:n}),n.speed=Board$7.constrain(n.speed,0,255),n.saveSpeed=typeof n.saveSpeed<"u"?n.saveSpeed:!0,n.speed<this.threshold&&(n.speed=0),t.isOn=n.speed!==0,n.saveSpeed&&(t.currentSpeed=n.speed),n.braking&&(t.braking=!0),this.invertPWM&&this.direction.value===1&&(n.speed^=255),this.setPWM(this.pins.pwm,n.speed),this)};Motor.prototype.start=function(n){return this.pins.brake&&this.braking&&this.setPin(this.pins.brake,0),n=typeof n<"u"?n:this.speed(),this.speed({speed:n,braking:!1}),n>0&&process$1.nextTick(()=>this.emit("start")),this};Motor.prototype.stop=function(){return this.speed({speed:0,saveSpeed:!1}),process$1.nextTick(()=>this.emit("stop")),this};Motor.prototype.brake=function(n){if(typeof this.pins.brake>"u")this.board.io.name!=="Mock"&&console.log("Non-braking motor type"),this.stop();else if(this.setPin(this.pins.brake,1),this.setPin(this.pins.dir,1),this.speed({speed:255,saveSpeed:!1,braking:!0}),process$1.nextTick(()=>this.emit("brake")),n){var t=this;this.board.wait(n,function(){t.resume()})}return this};Motor.prototype.release=function(){return this.resume(),process$1.nextTick(()=>this.emit("release")),this};Motor.prototype.resume=function(){var n=this.speed();return this.dir(this.direction),this.start(n),this};Motor.prototype.enable=function(){var n=priv$6.get(this);typeof this.pins.enable<"u"&&!n.enabled&&(this.setPin(this.pins.enable,1),n.enabled=!0)};Motor.prototype.disable=function(){var n=priv$6.get(this);typeof this.pins.enable<"u"&&n.enabled&&(this.setPin(this.pins.enable,0),n.enabled=!1)};Motor.prototype.validatePins=function(){if(typeof this.pins.pwm>"u")throw new Error("PWM pin must be defined");if(typeof this.pins.dir>"u"&&this.settings.device!=="NONDIRECTIONAL")throw new Error("DIR pin must be defined");if(this.settings.device==="CDIR"&&typeof this.pins.cdir>"u")throw new Error("CDIR pin must be defined for three wire motors")};[{name:"forward",abbr:"fwd",value:1},{name:"reverse",abbr:"rev",value:0}].forEach(n=>{Motor.prototype[n.name]=Motor.prototype[n.abbr]=function(t){return this.dir(n),this.start(t),this}});Motor.SHIELD_CONFIGS={ADAFRUIT_V1:{M1:{pins:{pwm:11},register:{data:8,clock:4,latch:12},bits:{a:2,b:3}},M2:{pins:{pwm:3},register:{data:8,clock:4,latch:12},bits:{a:1,b:4}},M3:{pins:{pwm:6},register:{data:8,clock:4,latch:12},bits:{a:5,b:7}},M4:{pins:{pwm:5},register:{data:8,clock:4,latch:12},bits:{a:0,b:6}}},ADAFRUIT_V2:{M1:{pins:{pwm:8,dir:9,cdir:10},address:96,controller:"PCA9685"},M2:{pins:{pwm:13,dir:12,cdir:11},address:96,controller:"PCA9685"},M3:{pins:{pwm:2,dir:3,cdir:4},address:96,controller:"PCA9685"},M4:{pins:{pwm:7,dir:6,cdir:5},address:96,controller:"PCA9685"}},SEEED_STUDIO:{A:{pins:{pwm:9,dir:8,cdir:11}},B:{pins:{pwm:10,dir:12,cdir:13}}},FREETRONICS_HBRIDGE:{A:{pins:{pwm:6,dir:4,cdir:7}},B:{pins:{pwm:5,dir:3,cdir:2}}},ARDUINO_MOTOR_SHIELD_R3_1:{A:{pins:{pwm:3,dir:12}},B:{pins:{pwm:11,dir:13}}},ARDUINO_MOTOR_SHIELD_R3_2:{A:{pins:{pwm:3,dir:12,brake:9}},B:{pins:{pwm:11,dir:13,brake:8}}},ARDUINO_MOTOR_SHIELD_R3_3:{A:{pins:{pwm:3,dir:12,brake:9,current:"A0"}},B:{pins:{pwm:11,dir:13,brake:8,current:"A1"}}},DF_ROBOT:{A:{pins:{pwm:6,dir:7}},B:{pins:{pwm:5,dir:4}}},NKC_ELECTRONICS_KIT:{A:{pins:{pwm:9,dir:12}},B:{pins:{pwm:10,dir:13}}},RUGGED_CIRCUITS:{A:{pins:{pwm:3,dir:12}},B:{pins:{pwm:11,dir:13}}},SPARKFUN_ARDUMOTO:{A:{pins:{pwm:3,dir:12}},B:{pins:{pwm:11,dir:13}}},POLOLU_DRV8835_SHIELD:{M1:{pins:{pwm:9,dir:7}},M2:{pins:{pwm:10,dir:8}}},POLOLU_VNH5019_SHIELD:{M1:{pins:{pwm:9,dir:2,cdir:4,enable:6}},M2:{pins:{pwm:10,dir:7,cdir:8,enable:12}}},MICRO_MAGICIAN_V2:{A:{pins:{pwm:6,dir:8},invertPWM:!0},B:{pins:{pwm:5,dir:7},invertPWM:!0}},SPARKFUN_LUDUS:{A:{pins:{pwm:3,dir:4,cdir:5}},B:{pins:{pwm:6,dir:7,cdir:8}}},SPARKFUN_DUAL_HBRIDGE_EDISON_BLOCK:{A:{pins:{pwm:20,dir:33,cdir:46,enable:47}},B:{pins:{pwm:14,dir:48,cdir:36,enable:47}}},PICAR_V:{A:{controller:"PCA9685_Hybrid",pins:{pwm:4,dir:"GPIO17"}},B:{controller:"PCA9685_Hybrid",pins:{pwm:5,dir:"GPIO27"}}}};class Motors extends Collection$4{constructor(t){super(t)}get type(){return Motor}}Collection$4.installMethodForwarding(Motors.prototype,Motor.prototype);Motor.Collection=Motors;define_process_env_default$3.IS_TEST_MODE&&(Motor.Controllers=Controllers$4,Motor.purge=function(){priv$6.clear(),registers.clear()});var motor=Motor;function NanoTimer(n){var t=process$1.version,s=t.split(".")[0];s=s.split("v")[1];var o=t.split(".")[1];s==0&&o<10&&(console.log("Error: Please update to the latest version of node! This library requires 0.10.x or later"),process$1.exit(0)),this.intervalT1=null,this.timeOutT1=null,this.intervalCount=1,this.deferredInterval=!1,this.deferredTimeout=!1,this.deferredTimeoutRef=null,this.deferredIntervalRef=null,this.timeoutCallbackRef=null,this.intervalCallbackRef=null,this.timeoutImmediateRef=null,this.intervalImmediateRef=null,this.intervalErrorChecked=!1,this.intervalType="",n&&(this.logging=!0)}NanoTimer.prototype.time=function(n,t,s,o){if(o){var u=process$1.hrtime();t?(t.push(function(){var f=process$1.hrtime(u);s=="s"?o(f[0]+f[1]/1e9):s=="m"?o(f[0]/1e3+f[1]/1e6):s=="u"?o(f[0]/1e6+f[1]/1e3):s=="n"?o(f[0]/1e9+f[1]):o(f)}),n.apply(null,t)):n(function(){var f=process$1.hrtime(u);s=="s"?o(f[0]+f[1]/1e9):s=="m"?o(f[0]/1e3+f[1]/1e6):s=="u"?o(f[0]/1e6+f[1]/1e3):s=="n"?o(f[0]/1e9+f[1]):o(f)})}else{var u=process$1.hrtime();t?n.apply(null,t):n();var h=process$1.hrtime(u);return s=="s"?h[0]+h[1]/1e9:s=="m"?h[0]/1e3+h[1]/1e6:s=="u"?h[0]/1e6+h[1]/1e3:s=="n"?h[0]/1e9+h[1]:process$1.hrtime(u)}};NanoTimer.prototype.setInterval=function(n,t,s,o){this.intervalErrorChecked||(n?typeof n!="function"&&(console.log("Task argument to setInterval must be a function reference"),process$1.exit(1)):(console.log("A task function must be specified to setInterval"),process$1.exit(1)),s?typeof s!="string"&&(console.log("Interval argument to setInterval must be a string specified as an integer followed by 's' for seconds, 'm' for milli, 'u' for micro, and 'n' for nanoseconds. Ex. 2u"),process$1.exit(1)):(console.log("An interval argument must be specified"),process$1.exit(1)),o&&(typeof o!="function"?(console.log("Callback argument to setInterval must be a function reference"),process$1.exit(1)):this.intervalCallbackRef=o),this.intervalType=s[s.length-1],this.intervalType=="s"?this.intervalTime=s.slice(0,s.length-1)*1e9:this.intervalType=="m"?this.intervalTime=s.slice(0,s.length-1)*1e6:this.intervalType=="u"?this.intervalTime=s.slice(0,s.length-1)*1e3:this.intervalType=="n"?this.intervalTime=s.slice(0,s.length-1):(console.log("Error with argument: "+s+': Incorrect interval format. Format is an integer followed by "s" for seconds, "m" for milli, "u" for micro, and "n" for nanoseconds. Ex. 2u'),process$1.exit(1)),this.intervalErrorChecked=!0);var u=this;this.intervalTime>0?(this.intervalT1==null&&(this.intervalT1=process$1.hrtime()),this.intervalTime*this.intervalCount>8e15&&(this.intervalT1=process$1.hrtime(),this.intervalCount=1),this.difArray=process$1.hrtime(this.intervalT1),this.difTime=this.difArray[0]*1e9+this.difArray[1],this.difTime<this.intervalTime*this.intervalCount?this.intervalTime>25e6?this.deferredInterval==!1?(this.deferredInterval=!0,msDelay=(this.intervalTime-25e6)/1e6,this.deferredIntervalRef=setTimeout(function(){u.setInterval(n,t,s,o)},msDelay)):(this.deferredIntervalRef=null,this.intervalImmediateRef=setImmediate(function(){u.setInterval(n,t,s,o)})):this.intervalImmediateRef=setImmediate(function(){u.setInterval(n,t,s,o)}):(this.intervalImmediateRef=null,this.logging&&console.log("nanotimer log: cycle time at - "+this.difTime),t?n.apply(null,t):n(),this.intervalT1&&(this.intervalCount++,this.deferredInterval=!1,this.intervalImmediateRef=setImmediate(function(){u.setInterval(n,t,s,o)})))):(this.intervalT1==null&&(this.intervalT1=process$1.hrtime(),this.intervalContinue=!0),this.intervalContinue==!0?(t?n.apply(null,t):n(),setImmediate(function(){u.setInterval(n,t,s,o)})):(this.intervalT1=null,this.intervalCount=1,o()))};NanoTimer.prototype.setTimeout=function(n,t,s,o){n?typeof n!="function"&&(console.log("Task argument to setTimeout must be a function reference"),process$1.exit(1)):(console.log("A task function must be specified to setTimeout"),process$1.exit(1)),s?typeof s!="string"&&(console.log("Delay argument to setTimeout must be a string specified as an integer followed by 's' for seconds, 'm' for milli, 'u' for micro, and 'n' for nanoseconds. Ex. 2u"),process$1.exit(1)):(console.log("A delay argument must be specified"),process$1.exit(1)),o&&(typeof o!="function"?(console.log("Callback argument to setTimeout must be a function reference"),process$1.exit(1)):this.timeoutCallbackRef=o);var u=this,h=s[s.length-1];if(h=="s")var f=s.slice(0,s.length-1)*1e9;else if(h=="m")var f=s.slice(0,s.length-1)*1e6;else if(h=="u")var f=s.slice(0,s.length-1)*1e3;else if(h=="n")var f=s.slice(0,s.length-1);else console.log("Error with argument: "+s+': Incorrect delay format. Format is an integer followed by "s" for seconds, "m" for milli, "u" for micro, and "n" for nanoseconds. Ex. 2u'),process$1.exit(1);this.timeOutT1==null&&(this.timeOutT1=process$1.hrtime());var g=process$1.hrtime(this.timeOutT1),v=g[0]*1e9+g[1];if(v<f)f>25e6?this.deferredTimeout==!1?(this.deferredTimeout=!0,msDelay=(f-25e6)/1e6,this.deferredTimeoutRef=setTimeout(function(){u.setTimeout(n,t,s,o)},msDelay)):(this.deferredTimeoutRef=null,this.timeoutImmediateRef=setImmediate(function(){u.setTimeout(n,t,s,o)})):this.timeoutImmediateRef=setImmediate(function(){u.setTimeout(n,t,s,o)});else if(this.timeoutImmediateRef=null,this.timeOutT1=null,this.deferredTimeout=!1,this.logging==!0&&console.log("nanotimer log: actual wait - "+v),t?n.apply(null,t):n(),o){var O={waitTime:v};o(O)}};NanoTimer.prototype.clearInterval=function(){this.deferredIntervalRef&&(clearTimeout(this.deferredIntervalRef),this.deferredInterval=!1),this.intervalImmediateRef&&clearImmediate(this.intervalImmediateRef),this.intervalT1=null,this.intervalCount=1,this.intervalErrorChecked=!1,this.intervalCallbackRef&&this.intervalCallbackRef()};NanoTimer.prototype.clearTimeout=function(){if(this.deferredTimeoutRef){clearTimeout(this.deferredTimeoutRef);var n=process$1.hrtime(this.timeOutT1),t=n[0]*1e9+n[1];this.deferredTimeout=!1}if(this.timeoutImmediateRef&&clearImmediate(this.timeoutImmediateRef),this.timeOutT1=null,this.timeoutCallbackRef){var s={waitTime:t};this.timeoutCallbackRef(s)}};var nanoTimer=NanoTimer;const Board$6=requireBoard(),Timer=nanoTimer,MICROSECONDS_PER_SECOND=1e6,priv$5=new Map;let defaultOctave=4;function clearTimer(n){return n.timer&&(n.timer.clearInterval(),delete n.timer),n}const Controllers$3={DEFAULT:{initialize:{writable:!0,value(){this.io.pinMode(this.pin,this.io.MODES.OUTPUT)}},tone:{writable:!0,value(n,t){if(isNaN(n)||isNaN(t))throw new Error("Piezo.tone: invalid tone or duration");clearTimer(this),this.timer=new Timer;let s=1;return this.timer.setInterval(()=>{s=s===1?0:1,this.io.digitalWrite(this.pin,s),this.timer.difTime/1e6>t&&clearTimer(this)},null,`${n}u`,()=>{}),this}},noTone:{writable:!0,value(){return this.io.digitalWrite(this.pin,0),clearTimer(this)}}},I2C_BACKPACK:{ADDRESSES:{value:[10]},REGISTER:{value:{NO_TONE:0,TONE:1}},initialize:{writable:!0,value(n){const{Drivers:t}=requireSip(),s=t.addressResolver(this,n),o=priv$5.get(this);this.io.i2cConfig(n),o.address=s}},tone:{writable:!0,value(n,t){const s=priv$5.get(this);if(isNaN(n)||isNaN(t))throw new Error("Piezo.tone: invalid tone or duration");return this.io.i2cWrite(s.address,[this.REGISTER.TONE,this.pin,n>>8&255,n&255,t>>24&255,t>>16&255,t>>8&255,t&255]),this}},noTone:{writable:!0,value(){const n=priv$5.get(this);return this.io.i2cWrite(n.address,[this.REGISTER.NO_TONE,this.pin]),this}}}};class Piezo{constructor(t){Board$6.Component.call(this,t=Board$6.Options(t)),Board$6.Controller.call(this,Controllers$3,t);const s={isPlaying:!1,timeout:null,address:null};priv$5.set(this,s),Object.defineProperties(this,{isPlaying:{get(){return s.isPlaying}}}),typeof this.initialize=="function"&&this.initialize(t)}note(t,s){return this.frequency(Piezo.Parsers.hzFromInput(t),s)}tone(t,s){return this.frequency(Piezo.ToFrequency(t),s)}frequency(t,s){return this.tone(Piezo.ToTone(t),s)}play(t,s){typeof t!="object"&&(t={song:t}),typeof t.song=="string"&&(t.song=Piezo.ToSong(t.song,t.beats)),t.song&&!Array.isArray(t.song)&&(t.song=[t.song]);const o=priv$5.get(this),u=t.tempo||250,h=Math.round(6e4/u),f=t.song||[];let g,v=0;const O=()=>{if(v===f.length){o.isPlaying=!1,typeof s=="function"&&s(t);return}const E=f[v],_=Piezo.Parsers.hzFromInput(E);g=Piezo.Parsers.beatFromNote(E)*h,v++,_===null?this.noTone():this.frequency(_,g),o.timeout=setTimeout(O,g)};return o.isPlaying=!0,O(),this}off(){return this.noTone()}stop(){const t=priv$5.get(this);return t.timeout&&(clearTimeout(t.timeout),t.timeout=null),this}}Piezo.Notes={c0:16,"c#0":17,d0:18,"d#0":19,e0:21,f0:22,"f#0":23,g0:25,"g#0":26,a0:28,"a#0":29,b0:31,c1:33,"c#1":35,d1:37,"d#1":39,e1:41,f1:44,"f#1":47,g1:49,"g#1":52,a1:55,"a#1":58,b1:62,c2:65,"c#2":69,d2:73,"d#2":78,e2:82,f2:87,"f#2":93,g2:98,"g#2":104,a2:110,"a#2":117,b2:124,c3:131,"c#3":139,d3:147,"d#3":156,e3:165,f3:175,"f#3":185,g3:196,"g#3":208,a3:220,"a#3":233,b3:247,c4:262,"c#4":277,d4:294,"d#4":311,e4:330,f4:349,"f#4":370,g4:392,"g#4":415,a4:440,"a#4":466,b4:494,c5:523,"c#5":554,d5:587,"d#5":622,e5:659,f5:698,"f#5":740,g5:784,"g#5":831,a5:880,"a#5":932,b5:988,c6:1047,"c#6":1109,d6:1175,"d#6":1245,e6:1319,f6:1397,"f#6":1480,g6:1568,"g#6":1661,a6:1760,"a#6":1865,b6:1976,c7:2093,"c#7":2217,d7:2349,"d#7":2489,e7:2637,f7:2794,"f#7":2960,g7:3136,"g#7":3322,a7:3520,"a#7":3729,b7:3951,c8:4186,"c#8":4435,d8:4699,"d#8":4978,e8:5274,f8:5588,"f#8":5920,g8:6272,"g#8":6645,a8:7040,"a#8":7459,b8:7902};Piezo.Frequencies=Object.keys(Piezo.Notes).reduce((n,t)=>(n[Piezo.Notes[t]]=t,n),{});Piezo.Parsers={};Piezo.Parsers.hzFromInput=n=>{let t=n;return Array.isArray(n)&&(t=n[0]),typeof t=="number"&&Piezo.Frequencies[t]||(typeof t=="string"&&(t=t.toLowerCase().trim(),(t.endsWith("#")||t.length===1)&&(t+=defaultOctave),t=Piezo.Notes[t]||null),isNaN(t)&&(t=null)),t};Piezo.Parsers.beatFromNote=n=>{let t=1;return Array.isArray(n)&&n[1]!==void 0&&(t=n[1]),t};Piezo.isValidOctave=n=>typeof n=="number"&&n>=0&&n<=8;Piezo.defaultOctave=n=>(Piezo.isValidOctave(n)&&(defaultOctave=n),defaultOctave);Piezo.ToFrequency=n=>{const s=n/MICROSECONDS_PER_SECOND*2;return Math.round(1/s)};Piezo.ToTone=n=>{const s=1/n/2;return Math.round(s*MICROSECONDS_PER_SECOND)};Piezo.ToSong=(n,t=1)=>{const s=n.split(" "),o=[];let u,h;for(;s.length;)u=s.shift(),/^[0-9]+$/.test(u)&&(u=parseInt(u,10)),h=o[o.length-1],h&&h[0]===u?h[1]+=t:o.push([u,t]);return o};var piezo=Piezo,define_process_env_default$2={};const Board$5=requireBoard(),Collection$3=collection,EVS=evshield,Fn$4=fn,Withinable=withinable,Pins$2=Board$5.Pins,toFixed=Fn$4.toFixed,priv$4=new Map;function analogHandler(n,t){this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,s=>{t.call(this,s)})}const Controllers$2={GP2Y0A21YK:{initialize:{value:analogHandler},toCm:{value(n){return toFixed(12343.85*n**-1.15,2)}}},GP2D120XJ00F:{initialize:{value:analogHandler},toCm:{value(n){return toFixed(2914/(n+5)-1,2)}}},GP2Y0A02YK0F:{initialize:{value:analogHandler},toCm:{value(n){return toFixed(10650.08*n**-.935-10,2)}}},GP2Y0A41SK0F:{initialize:{value:analogHandler},toCm:{value(n){return toFixed(2076/(n-11),2)}}},GP2Y0A710K0F:{initialize:{value:analogHandler},toCm:{value(n){return toFixed(38631e4*n**-2.463343,0)}}},SRF10:{ADDRESSES:{value:[112]},initialize:{value(n,t){const{Drivers:s}=requireSip(),o=s.addressResolver(this,n),u=65;this.io.i2cConfig(n),this.io.i2cWrite(o,[1,16]),this.io.i2cWrite(o,[2,255]);const h=()=>{this.io.i2cWrite(o,[0,81]),setTimeout(()=>{this.io.i2cWrite(o,[2]),this.io.i2cReadOnce(o,2,f=>t(f[0]<<8|f[1])),h()},u)};h()}},toCm:{value(n){return n}}},MB1000:{initialize:{value:analogHandler},toCm:{value(n){return toFixed(n/2*2.54,2)}}},MB1003:{initialize:{value:analogHandler},toCm:{value(n){return toFixed(n/2,1)}}},MB1230:{initialize:{value:analogHandler},toCm:{value(n){return n>>0}}},HCSR04:{initialize:{value(n,t){let s=n.pinValue;const o=65;Pins$2.isFirmata(this)&&(typeof s=="string"&&s.length>1&&s[0]==="A"&&(s=this.io.analogPins[+s.slice(1)]),s=+s,this.io.analogPins.includes(s)&&(n.pin=s),this.pin=n.pin);const u={pin:n.pin,value:this.io.HIGH,pulseOut:5},h=()=>{this.io.pingRead(u,f=>{t(f),setTimeout(h,o)})};h()}},toCm:{value(n){return toFixed(n/29.1/2,1)}}},HCSR04I2CBACKPACK:{ADDRESSES:{value:[39]},initialize:{value(n,t){const{Drivers:s}=requireSip(),o=s.addressResolver(this,n),u=90;this.io.i2cConfig(n),typeof n.pin>"u"&&(this.pin=8);const h=()=>{this.io.i2cReadOnce(o,2,f=>{t((f[0]<<8)+f[1]),setTimeout(h,u)})};h()}},toCm:{value(n){return toFixed(n/29.1/2,1)}}},LIDARLITE:{ADDRESSES:{value:[98]},REGISTER:{value:{ENABLE:0,READ:143}},initialize:{value(n,t){const{Drivers:s}=requireSip(),o=s.addressResolver(this,n);this.io.i2cConfig(n);const u=()=>{this.io.i2cWrite(o,this.REGISTER.ENABLE,4),setTimeout(()=>{this.io.i2cReadOnce(o,this.REGISTER.READ,2,h=>{t((h[0]<<8)+h[1]),u()})},20)};u()}},toCm:{value(n){return n>>0}}},EVS_EV3_IR:{initialize:{value(n,t){const s=priv$4.get(this);s.shield=EVS.shieldPort(n.pin),s.ev3=new EVS(Object.assign(n,{io:this.io})),s.ev3.setup(s.shield,EVS.Type_EV3),s.ev3.read(s.shield,EVS.Proximity,EVS.Proximity_Bytes,o=>t(o[0]|o[1]<<8))}},toCm:{value(n){return n}}},EVS_EV3_US:{initialize:{value(n,t){const s=priv$4.get(this);s.shield=EVS.shieldPort(n.pin),s.ev3=new EVS(Object.assign(n,{io:this.io})),s.ev3.setup(s.shield,EVS.Type_EV3),s.ev3.read(s.shield,EVS.Proximity,EVS.Proximity_Bytes,o=>t(o[0]|o[1]<<8))}},toCm:{value(n){return n/10}}}};Controllers$2["2Y0A21"]=Controllers$2.GP2Y0A21YK;Controllers$2["2D120X"]=Controllers$2.GP2D120XJ00F;Controllers$2["2Y0A02"]=Controllers$2.GP2Y0A02YK0F;Controllers$2["0A41"]=Controllers$2.GP2Y0A41SK0F;Controllers$2["0A21"]=Controllers$2.GP2Y0A21YK;Controllers$2["0A02"]=Controllers$2.GP2Y0A02YK0F;Controllers$2["41SK0F"]=Controllers$2.GP2Y0A41SK0F;Controllers$2["21YK"]=Controllers$2.GP2Y0A21YK;Controllers$2["2YK0F"]=Controllers$2.GP2Y0A02YK0F;Controllers$2.MB1010=Controllers$2.MB1000;Controllers$2["LV-MaxSonar-EZ"]=Controllers$2.MB1000;Controllers$2["LV-MaxSonar-EZ0"]=Controllers$2.MB1000;Controllers$2["LV-MaxSonar-EZ1"]=Controllers$2.MB1010;Controllers$2["HRLV-MaxSonar-EZ0"]=Controllers$2.MB1003;Controllers$2["XL-MaxSonar-EZ3"]=Controllers$2.MB1230;["HC-SR04","SR04","SRF05","SRF06","PARALLAXPING","SEEEDPING","GROVEPING","PING_PULSE_IN","ULTRASONIC_PING"].forEach(n=>{Controllers$2[n]=Controllers$2.HCSR04});["HCSR04-I2C-BACKPACK","HC-SR04-I2C-BACKPACK","SR04-I2C-BACKPACK","SR04I2CBACKPACK","PINGI2CBACKPACK","PING-I2C-BACKPACK","HCSR04_I2C_BACKPACK","HC_SR04_I2C_BACKPACK","SR04_I2C_BACKPACK","SR04I2CBACKPACK","PINGI2CBACKPACK","PING_I2C_BACKPACK"].forEach(n=>{Controllers$2[n]=Controllers$2.HCSR04I2CBACKPACK});Controllers$2["LIDAR-Lite"]=Controllers$2.LIDARLITE;Controllers$2.DEFAULT=Controllers$2.GP2Y0A21YK;class Proximity extends Withinable{constructor(t){super();const s=typeof t=="object"?t.pin:t;Board$5.Component.call(this,t=Board$5.Options(t)),Board$5.Controller.call(this,Controllers$2,t);const o={},u=t.freq||25;let h=0,f=0;this.toCm||(this.toCm=t.toCm||(g=>g)),priv$4.set(this,o),Object.defineProperties(this,{centimeters:{get(){return this.toCm(h)}},cm:{get(){return this.centimeters}},inches:{get(){return toFixed(this.centimeters*.39,2)}},in:{get(){return this.inches}}}),typeof this.initialize=="function"&&(t.pinValue=s,this.initialize(t,g=>h=g)),setInterval(()=>{if(h===void 0)return;const g={cm:this.cm,centimeters:this.centimeters,in:this.in,inches:this.inches};this.emit("data",g),h!==f&&(f=h,this.emit("change",g))},u)}}Proximity.Collection=class extends Collection$3.Emitter{constructor(n){super(n)}get type(){return Proximity}};Collection$3.installMethodForwarding(Proximity.Collection.prototype,Proximity.prototype);Proximity.Controllers=Object.keys(Controllers$2);define_process_env_default$2.IS_TEST_MODE&&(Proximity.Controllers=Controllers$2,Proximity.purge=()=>{priv$4.clear()});var proximity=Proximity;const Board$4=requireBoard(),Emitter$2=emitter,Fn$3=fn,Led=led,Sensor=sensor,CALIBRATED_MIN_VALUE=0,CALIBRATED_MAX_VALUE=1e3,LINE_ON_THRESHOLD=200,LINE_NOISE_THRESHOLD=50,priv$3=new Map,Controllers$1={DEFAULT:{initialize:{value(n){if(typeof n.emitter>"u")throw new Error("Emitter pin is required");if(!n.pins||n.pins.length===0)throw new Error("Pins must be defined");const t=priv$3.get(this);t.emitter=new Led({board:this.board,pin:n.emitter}),t.sensorStates=n.pins.map(s=>{const o=new Sensor({board:this.board,freq:t.freq,pin:s}),u={sensor:o,rawValue:0,dataReceived:!1};return o.on("data",h=>{onData(this,u,h)}),u})}}}};function onData(n,t,s){const o=priv$3.get(n);t.dataReceived=!0,t.rawValue=s,o.sensorStates.every(({dataReceived:h})=>h)&&(n.emit("data",n.raw),o.autoCalibrate&&setCalibration(o.calibration,n.raw),n.isCalibrated&&(n.emit("calibratedData",n.values),n.emit("line",n.line)),o.sensorStates.forEach(h=>{h.dataReceived=!1}))}function setCalibration(n,t){t.forEach((s,o)=>{(n.min[o]===void 0||s<n.min[o])&&(n.min[o]=s),(n.max[o]===void 0||s>n.max[o])&&(n.max[o]=s)})}function calibrationIsValid(n,t){return n&&n.max&&n.max.length===t.length&&n.min&&n.min.length===t.length}function calibratedValues(n){return n.raw.map((t,s)=>Fn$3.constrain(Fn$3.scale(t,n.calibration.min[s],n.calibration.max[s],CALIBRATED_MIN_VALUE,CALIBRATED_MAX_VALUE),CALIBRATED_MIN_VALUE,CALIBRATED_MAX_VALUE))}function maxLineValue(n){return(n.sensors.length-1)*CALIBRATED_MAX_VALUE}function getLine(n,t){const s=priv$3.get(n);let o=!1,u=0,h=0;if(t=!!t,n.values.forEach((f,g)=>{f=t?CALIBRATED_MAX_VALUE-f:f,f>LINE_ON_THRESHOLD&&(o=!0),f>LINE_NOISE_THRESHOLD&&(u+=f*g*CALIBRATED_MAX_VALUE,h+=f)}),!o){const f=maxLineValue(n)+1,g=f/2;return s.lastLine<g?0:f}return s.lastLine=Math.floor(u/h)}class ReflectanceArray extends Emitter$2{constructor(t){super(),Board$4.Component.call(this,t=Board$4.Options(t)),Board$4.Controller.call(this,Controllers$1,t);const{autoCalibrate:s=!1,freq:o=25}=t,u={autoCalibrate:s,freq:o,lastLine:0,isOn:!1,calibration:{min:[],max:[]}};priv$3.set(this,u),typeof this.initialize=="function"&&this.initialize(t),Object.defineProperties(this,{isOn:{get(){return u.emitter.isOn}},isCalibrated:{get(){return calibrationIsValid(this.calibration,this.sensors)}},isOnLine:{get(){const h=this.line;return h>CALIBRATED_MIN_VALUE&&h<maxLineValue(this)}},sensors:{get(){return u.sensorStates.map(({sensor:h})=>h)}},calibration:{get(){return u.calibration}},raw:{get(){return u.sensorStates.map(({rawValue:h})=>h)}},values:{get(){return this.isCalibrated?calibratedValues(this):this.raw}},line:{get(){return this.isCalibrated?getLine(this):0}}})}enable(){return priv$3.get(this).emitter.on(),this}disable(){return priv$3.get(this).emitter.off(),this}calibrate(){return this.once("data",t=>{setCalibration(priv$3.get(this).calibration,t),this.emit("calibrated")}),this}calibrateUntil(t){const s=()=>{this.calibrate(),this.once("calibrated",()=>{t()||s()})};return s(),this}loadCalibration(t){if(!calibrationIsValid(t,this.sensors))throw new Error("Calibration data not properly set: {min: [], max: []}");return priv$3.get(this).calibration=t,this}}var reflectancearray=ReflectanceArray,define_process_env_default$1={};const Board$3=requireBoard(),Collection$2=collection,Pins$1=Board$3.Pins,priv$2=new Map;class Relay{constructor(t){const s=typeof t=="object"?t.pin:t;Board$3.Component.call(this,t=Board$3.Options(t)),t.type=t.type||"NO";const o={isInverted:t.type==="NC",isClosed:!1,value:null};priv$2.set(this,o),Object.defineProperties(this,{value:{get(){return Number(this.isClosed)}},type:{get(){return o.isInverted?"NC":"NO"}},isClosed:{get(){return o.isClosed}}}),Pins$1.isFirmata(this)&&typeof s=="string"&&s[0]==="A"&&(this.pin=this.io.analogPins[+s.slice(1)],this.io.pinMode(this.pin,this.io.MODES.OUTPUT))}close(){const t=priv$2.get(this);return this.io.digitalWrite(this.pin,t.isInverted?this.io.LOW:this.io.HIGH),t.isClosed=!0,this}open(){const t=priv$2.get(this);return this.io.digitalWrite(this.pin,t.isInverted?this.io.HIGH:this.io.LOW),t.isClosed=!1,this}toggle(){return priv$2.get(this).isClosed?this.open():this.close(),this}}class Relays extends Collection$2{constructor(t){super(t)}get type(){return Relay}}Collection$2.installMethodForwarding(Relays.prototype,Relay.prototype);Relay.Collection=Relays;define_process_env_default$1.IS_TEST_MODE&&(Relay.purge=()=>{priv$2.clear()});var relay=Relay,define_process_env_default={};const Board$2=requireBoard(),Pins=Board$2.Pins,Expander=requireExpander(),Collection$1=collection,Emitter$1=emitter,Fn$2=fn,Animation=animation,priv$1=new Map,Controllers={PCA9685:{initialize:{value({address:n,pwmRange:t,frequency:s,pin:o}){const u=priv$1.get(this);this.address=n||64,this.pwmRange=t||[450,1850],this.frequency=s||50,u.expander=Expander.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),this.pin=u.expander.normalize(o)}},update:{writable:!0,value(n){priv$1.get(this).expander.servoWrite(this.pin,n)}}},Standard:{initialize:{value({debug:n,pwmRange:t}){n&&!this.board.pins.isServo(this.pin)&&Board$2.Pins.Error({pin:this.pin,type:"PWM",via:"Servo"}),Array.isArray(t)?this.io.servoConfig(this.pin,t[0],t[1]):this.io.pinMode(this.pin,this.mode)}},update:{writable:!0,value(n){if(this.last&&this.last.degrees===n)return this;let t=Fn$2.map(n,this.degreeRange[0],this.degreeRange[1],this.pwmRange[0],this.pwmRange[1]);t|=0,this.io.servoWrite(this.pin,t)}}}};Controllers.DEFAULT=Controllers.Standard;class Servo extends Emitter$1{constructor(t){super();const s=[];let o=typeof t=="object"?t.pin:t;Board$2.Component.call(this,t=Board$2.Options(t)),this.degreeRange=t.degreeRange||[0,180],this.pwmRange=t.pwmRange||[600,2400],this.range=t.range||this.degreeRange,this.deadband=t.deadband||[90,90],this.fps=t.fps||100,this.offset=t.offset||0,this.range=t.range||[0-this.offset,180-this.offset],this.mode=this.io.MODES.SERVO,this.interval=null,this.value=null,this.type=t.type||"standard",t.isInverted&&console.warn("The 'isInverted' property has been renamed 'invert'"),this.invert=t.isInverted||t.invert||!1,typeof t.controller>"u"&&Pins.isFirmata(this)&&(typeof o=="string"&&o.length>1&&o[0]==="A"&&(o=this.io.analogPins[+o.slice(1)]),o=+o,!Number.isNaN(o)&&this.pin!==o&&(this.pin=o)),Board$2.Controller.call(this,Controllers,t),priv$1.set(this,{history:s}),Object.defineProperties(this,{history:{get(){return s.slice(-5)}},last:{get(){return s[s.length-1]}},position:{get(){return s.length?s[s.length-1].degrees:-1}}}),this.initialize(t),typeof t.startAt<"u"?(this.startAt=t.startAt,this.to(t.startAt)):this.startAt=(this.degreeRange[1]-this.degreeRange[0])/2+this.degreeRange[0],t.center&&this.center(),t.type==="continuous"&&this.stop()}to(t,s,o){const u=priv$1.get(this),h={};if(typeof t=="object")Object.assign(h,t),h.duration=t.duration||t.interval||1e3,h.cuePoints=t.cuePoints||[0,1],h.keyFrames=t.keyFrames||[null,{value:typeof t.degrees=="number"?t.degrees:this.startAt}],h.oncomplete=()=>{process$1.nextTick(()=>{typeof t.oncomplete=="function"&&t.oncomplete(),this.emit("move:complete")})},u.isRunning=!0,u.animation=u.animation||new Animation(this),u.animation.enqueue(h);else{const f=t;t=Fn$2.constrain(t,this.range[0],this.range[1]),typeof s<"u"?(h.duration=s,h.keyFrames=[null,{degrees:t}],h.fps=o||this.fps,this.to(h)):(this.value=t,t+=this.offset,this.invert&&(t=Fn$2.map(t,this.degreeRange[0],this.degreeRange[1],this.degreeRange[1],this.degreeRange[0])),this.update(t),u.history.length>5&&u.history.shift(),u.history.push({timestamp:Date.now(),degrees:t,target:f}))}return this}step(t,s){return this.to(this.last.target+t,s)}move(t,s){return console.warn("Servo.prototype.move has been renamed to Servo.prototype.to"),this.to(t,s)}min(t,s){return this.to(this.range[0],t,s)}max(t,s){return this.to(this.range[1],t,s)}center(t,s){return this.to(Math.abs((this.range[0]+this.range[1])/2),t,s)}home(){return this.to(this.startAt)}sweep(t){const s={keyFrames:[{value:this.range[0]},{value:this.range[1]}],metronomic:!0,loop:!0,easing:"inOutSine"};return Array.isArray(t)?s.keyFrames=rangeToKeyFrames(t):typeof t=="object"&&t!==null&&(Object.assign(s,t),Array.isArray(s.range)&&(s.keyFrames=rangeToKeyFrames(s.range))),this.to(s)}stop(){const t=priv$1.get(this);return t.animation&&t.animation.stop(),this.type==="continuous"?this.to(this.deadband.reduce((s,o)=>Math.round((s+o)/2))):clearInterval(this.interval),this}}Servo.prototype[Animation.normalize]=function(n){const t=this.last?this.last.target:this.startAt;return n[0]===null&&(n[0]={value:t}),typeof n[0]=="number"&&(n[0]={value:t+n[0]}),n.map(s=>(s!==null&&(typeof s=="number"?s={step:s}:(typeof s.degrees=="number"&&(s.value=s.degrees,delete s.degrees),typeof s.copyDegrees=="number"&&(s.copyValue=s.copyDegrees,delete s.copyDegrees)),s.easing||(s.easing="linear")),s))};Servo.prototype[Animation.render]=function(n){return this.to(n[0])};function rangeToKeyFrames(n){return n.map(t=>({value:t}))}["clockWise","cw","counterClockwise","ccw"].forEach(n=>{Servo.prototype[n]=function(t){let s;return t=t===void 0?1:t,this.type!=="continuous"&&this.board.error("Servo",`Servo.prototype.${n} is only available for continuous servos`),n==="cw"||n==="clockWise"?s=[t,0,1,this.deadband[1]+1,this.range[1]]:s=[t,0,1,this.deadband[0]-1,this.range[0]],this.to(Fn$2.scale.apply(null,s)|0)}});Servo.Continuous=class extends Servo{constructor(n){const t={};typeof n=="object"?Object.assign(t,n):t.pin=n,t.type="continuous",super(t)}};class Servos extends Collection$1{constructor(t){super(t)}get type(){return Servo}[Animation.normalize](t){return t.map((s,o)=>{if(s!==null&&Array.isArray(s)){let u=this[o];u instanceof Servos&&(u=u[0]);const h=u.last?u.last.target:u.startAt;return s[0]===null&&(s[0]={value:h}),Array.isArray(s)&&s[0]===null&&(t[o][0]={value:h}),this[o][Animation.normalize](s)}return s&&typeof s.degrees=="number"&&(s.value=s.degrees,delete s.degrees),s})}[Animation.render](t){return this.each((s,o)=>s.to(t[o]))}}Collection$1.installMethodForwarding(Servos.prototype,Servo.prototype,{skip:[Animation.normalize,Animation.render]});Servo.Collection=Servos;define_process_env_default.IS_TEST_MODE&&(Servo.Controllers=Controllers,Servo.purge=()=>{priv$1.clear()});var servo=Servo;const Board$1=requireBoard(),Fn$1=fn,priv=new Map,steppers=new Map,TAU=Fn$1.TAU,MAXSTEPPERS=6;class Step{constructor(t){this.rpm=180,this.direction=-1,this.speed=0,this.accel=0,this.decel=0,this.stepper=t}move(t,s,o,u,h,f){this.stepper.io.stepperStep.apply(this.stepper.io,[this.stepper.id,s,t,o,u,h,f])}}Step.PROPERTIES=["rpm","direction","speed","accel","decel"];Step.DEFAULTS=[180,-1,0,0,0];function MotorPins(n){let t=0;for(n=n.slice();n.length;)this[`motor${++t}`]=n.shift()}function isSupported({pins:n,MODES:t}){return n.some(({supportedModes:s})=>s.includes(t.STEPPER))}class Stepper{constructor(t){const s=[];let o;if(Board$1.Component.call(this,t=Board$1.Options(t)),!isSupported(this.io))throw new Error("Stepper is not supported");if(!t.pins)throw new Error("Stepper requires a `pins` object or array");if(!t.stepsPerRev)throw new Error("Stepper requires a `stepsPerRev` number value");if(steppers.set(this.board,steppers.get(this.board)||[]),this.id=steppers.get(this.board).length,this.id>=MAXSTEPPERS)throw new Error(`Stepper cannot exceed max steppers (${MAXSTEPPERS})`);if(Array.isArray(this.pins)){if(this.pins.length===2&&!t.type)throw new Error("Stepper requires a `type` number value (DRIVER, TWO_WIRE)");t.type===Stepper.TYPE.DRIVER?this.pins={step:this.pins[0],dir:this.pins[1]}:this.pins=new MotorPins(this.pins)}if(t.type||(this.pins.dir?t.type=Stepper.TYPE.DRIVER:this.pins.motor3?t.type=Stepper.TYPE.FOUR_WIRE:t.type=Stepper.TYPE.TWO_WIRE),s.push(this.id,t.type,t.stepsPerRev),t.type===Stepper.TYPE.DRIVER){if(typeof this.pins.dir>"u"||typeof this.pins.step>"u")throw new Error("Stepper.TYPE.DRIVER expects: `pins.dir`, `pins.step`");s.push(this.pins.dir,this.pins.step)}if(t.type===Stepper.TYPE.TWO_WIRE){if(typeof this.pins.motor1>"u"||typeof this.pins.motor2>"u")throw new Error("Stepper.TYPE.TWO_WIRE expects: `pins.motor1`, `pins.motor2`");s.push(this.pins.motor1,this.pins.motor2)}if(t.type===Stepper.TYPE.FOUR_WIRE){if(typeof this.pins.motor1>"u"||typeof this.pins.motor2>"u"||typeof this.pins.motor3>"u"||typeof this.pins.motor4>"u")throw new Error("Stepper.TYPE.FOUR_WIRE expects: `pins.motor1`, `pins.motor2`, `pins.motor3`, `pins.motor4`");s.push(this.pins.motor1,this.pins.motor2,this.pins.motor3,this.pins.motor4)}s.slice(3).forEach(u=>{this.io.pinMode(u,this.io.MODES.STEPPER)}),this.io.stepperConfig.apply(this.io,s),steppers.get(this.board).push(this),o=Step.PROPERTIES.reduce((u,h,f)=>(u[h]=typeof t[h]<"u"?t[h]:Step.DEFAULTS[f],u),{isRunning:!1,type:t.type,pins:this.pins}),priv.set(this,o),Object.defineProperties(this,{type:{get(){return o.type}},pins:{get(){return o.pins}}})}rpm(t){const s=priv.get(this);return typeof t>"u"?s.rpm:(s.rpm=t,s.speed=Math.round(t*TAU*100/60),this)}speed(t){const s=priv.get(this);return typeof t>"u"?s.speed:(s.speed=t,s.rpm=Math.round(t/TAU/100*60),this)}ccw(){return this.direction(0)}cw(){return this.direction(1)}step(t,s){let o,u,h,f,g;o=typeof t=="object"?t.steps||0:Math.floor(t),u=new Step(this),h=priv.get(this),f=[],g=!0;function v(O){g=!1,s&&s(O)}return f.push(o),typeof t=="object"&&Step.PROPERTIES.forEach(O=>{typeof t[O]<"u"&&this[O](t[O])}),h.speed||(this.rpm(h.rpm),u.speed=this.speed()),Step.PROPERTIES.slice(1).forEach(O=>{f.push(u[O]=this[O]())}),o===0&&v(new Error("Must set a number of steps when calling `step()`")),u.direction<0&&v(new Error("Must set a direction before calling `step()`")),g&&(h.isRunning=!0,f.push(O=>{h.isRunning=!1,s(null,O)}),u.move.apply(u,f)),this}}Object.defineProperties(Stepper,{TYPE:{value:Object.freeze({DRIVER:1,TWO_WIRE:2,FOUR_WIRE:4})},RUNSTATE:{value:Object.freeze({STOP:0,ACCEL:1,DECEL:2,RUN:3})},DIRECTION:{value:Object.freeze({CCW:0,CW:1})}});["direction","accel","decel"].forEach(n=>{Stepper.prototype[n]=function(t){const s=priv.get(this);return typeof t>"u"?s[n]:(s[n]=t,this)}});var stepper=Stepper;const Board=requireBoard(),Collection=collection,Emitter=emitter,Fn=fn;class Switch extends Emitter{constructor(t){super(),Board.Component.call(this,t=Board.Options(t));const s=Fn.debounce(v=>this.emit(v,this),5);t.type=t.type||"NO";const o=t.type==="NO";let u=null,h=typeof t.invert<"u"?t.invert:o||!1,f=1,g=0;h&&(f^=1,g^=1),this.io.pinMode(this.pin,this.io.MODES.INPUT),o&&this.io.digitalWrite(this.pin,this.io.HIGH),this.io.digitalRead(this.pin,v=>{u=v,s.call(this,this.isOpen?"open":"close")}),Object.defineProperties(this,{value:{get(){return Number(this.isOpen)}},invert:{get(){return h},set(v){h=v,f=h?0:1,g=h?1:0}},closeValue:{get(){return f},set(v){f=v,g=v^1}},openValue:{get(){return g},set(v){g=v,f=v^1}},isOpen:{get(){return u===g}},isClosed:{get(){return u===f}}})}}class Switches extends Collection.Emitter{constructor(t){super(t)}get type(){return Switch}}Collection.installMethodForwarding(Switches.prototype,Switch.prototype);Switch.Collection=Switches;var _switch=Switch;johnnyFive.exports;(function(n){n.exports={Accelerometer:requireAccelerometer(),Animation:animation,Altimeter:requireAltimeter(),Barometer:requireBarometer(),Board:requireBoard(),Button:button,Color:color,Collection:collection,Compass:requireCompass(),ESC:esc,Expander:requireExpander(),Fn:fn,GPS:gps,Gyro:requireGyro(),Hygrometer:requireHygrometer(),SIP:requireSip(),Keypad:keypad,LCD:lcd,Led:led,LedControl:ledcontrol,Light:light,Joystick:joystick,Motion:motion,Motor:motor,Orientation:requireOrientation(),Piezo:piezo,Pin:pin,Proximity:proximity,ReflectanceArray:reflectancearray,Relay:relay,Repl:repl_1,Sensor:sensor,Servo:servo,ShiftRegister:shiftregister,Stepper:stepper,Switch:_switch,Thermometer:requireThermometer()},n.exports.Board.Virtual=function(t){let s;return t instanceof n.exports.Expander?s={io:t}:s=t,new n.exports.Board(Object.assign({},{repl:!1,debug:!1,sigint:!1},s))},n.exports.Sensor.Analog=n.exports.Sensor,n.exports.Sensor.Digital=function(t){let s,o="digital";return typeof t=="number"||typeof t=="string"?(s=t,t={type:o,pin:s}):t.type=o,new n.exports.Sensor(t)},n.exports.IMU=n.exports.SIP,n.exports.Multi=n.exports.SIP,n.exports.Luxmeter=n.exports.Light,n.exports.Magnetometer=n.exports.Compass,n.exports.Ping=n.exports.Proximity,n.exports.Sonar=n.exports.Proximity,n.exports.Boards=n.exports.Board.Collection,n.exports.Buttons=n.exports.Button.Collection,n.exports.ESCs=n.exports.ESC.Collection,n.exports.Leds=n.exports.Led.Collection,n.exports.Led.RGBs=n.exports.Led.RGB.Collection,n.exports.Motors=n.exports.Motor.Collection,n.exports.Pins=n.exports.Pin.Collection,n.exports.Relays=n.exports.Relay.Collection,n.exports.Sensors=n.exports.Sensor.Collection,n.exports.Servos=n.exports.Servo.Collection,n.exports.Switches=n.exports.Switch.Collection,n.exports.Touchpad=n.exports.Keypad})(johnnyFive);var johnnyFiveExports=johnnyFive.exports;const five$1=getDefaultExportFromCjs$1(johnnyFiveExports),pines=[];let contadorIndice=0,intervalo=1e3,loopID=-1;function enablePins(){{for(let t=0;t<13;t++){var n=new five.Pin({pin:t,mode:1});pines.push(n),n.low()}console.log("pins.js: start!!!, pines",pines)}}function prender(...n){console.log("pines : ",n);for(let t=0;t<n.length;t++){const s=pines[n[t]];console.log("pin: ",s),s.high()}}global$1.prender=prender;global$1.encender=prender;function apagar(...n){console.log("pines : ",n);for(let t=0;t<n.length;t++)pines[n[t]].low()}global$1.apagar=apagar;function onceArduino(...n){console.log("pines : ",n),loopID=setInterval(()=>{pines[n[contadorIndice]].high(),contadorIndice>0&&pines[n[contadorIndice-1]].low(),contadorIndice++,contadorIndice>=n.length&&clearInterval(loopID)},intervalo)}global$1.onceArduino=onceArduino;function cambiarIntervalo(n){intervalo=n,clearInterval(loopID),loopArduino()}global$1.cambiarIntervalo=cambiarIntervalo;global$1.five=five$1;function handleIOReady(n){console.log("handleIOReady");const t=global$1.board=new johnnyFiveExports.Board({io:n,repl:!1});t.on("message",s=>{console.log("board message: ",s)}),t.on("ready",()=>{console.log("johnny five in browser !!!!"),enablePins()}),t.on("error",console.error)}var firmataExports=requireFirmata$1();const{EventEmitter}=eventsExports;class SerialPort extends EventEmitter{constructor(t,s){super(s),this.options=s||{},this.browser=!0,this.path=this.options.path,this.isOpen=!1,this.port=null,this.writer=null,this.reader=null,this.baudRate=this.options.baudRate,this.requestOptions=this.options.requestOptions||{},this.options.autoOpen&&this.open()}list(t){return navigator.serial.getPorts().then(s=>{if(t)return t(null,s)}).catch(s=>{if(t)return t(s)})}open(t){window.navigator.serial.requestPort(this.requestOptions).then(s=>{if(this.port=s,!this.isOpen)return this.port.open({baudRate:this.baudRate||57600})}).then(()=>this.writer=this.port.writable.getWriter()).then(()=>this.reader=this.port.readable.getReader()).then(async()=>{for(this.emit("open"),this.isOpen=!0,t(null);this.port.readable.locked;)try{const{value:s,done:o}=await this.reader.read();if(o)break;this.emit("data",Buffer.from(s))}catch(s){console.error(s)}}).catch(s=>{t(s)})}async close(t){try{await this.reader.releaseLock(),await this.writer.releaseLock(),await this.port.close(),this.isOpen=!1}catch(s){if(t)return t(s);throw s}t&&t(null)}async set(t={},s){try{const o={};Object.prototype.hasOwnProperty.call(t,"dtr")&&(o.dataTerminalReady=t.dtr),Object.prototype.hasOwnProperty.call(t,"rts")&&(o.requestToSend=t.rts),Object.prototype.hasOwnProperty.call(t,"brk")&&(o.break=t.brk),Object.keys(o).length>0&&await this.port.setSignals(o)}catch(o){if(s)return s(o);throw o}if(s)return s(null)}write(t,s){if(this.writer.write(t),s)return s(null)}async read(t){let s;try{s=await this.reader.read()}catch(o){if(t)return t(o);throw o}t&&t(null,s)}flush(t){if(console.warn("flush method is a NOP right now"),t)return t(null)}drain(t){if(console.warn("drain method is a NOP right now"),t)return t(null)}}var browserSerialport=SerialPort;const SerialPort$1=getDefaultExportFromCjs$1(browserSerialport),serialPortCallback$1=n=>{console.log("serialport callback"),n!=null&&console.error("serialError: ",n)},serialPort=new SerialPort$1(null,{autoOpen:!1,callback:serialPortCallback$1}),initFirmata=n=>{try{serialPort.open(serialPortCallback);const t=new firmataExports.Firmata(serialPort,firmataCallback);t.once("ready",n(t))}catch(t){console.log("error: ",t)}};function firmataCallback(n){console.log("firmata callback"),n!=null&&console.log("argF: ",n)}const serialPortCallback=n=>{console.log("serialport callback2"),n!=null&&console.error("serialError2: ",n)};function handleStart(n){console.log("handleStart");try{initFirmata(n)}catch(t){console.log(t)}}function init(){handleStart(handleIOReady)}const gui=new GUI;gui.add(window.location,"reload");gui.add({init},"init");var browserProcessHrtime=process$1.hrtime||hrtime,performance=commonjsGlobal.performance||{},performanceNow=performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return new Date().getTime()};function hrtime(n){var t=performanceNow.call(performance)*.001,s=Math.floor(t),o=Math.floor(t%1*1e9);return n&&(s=s-n[0],o=o-n[1],o<0&&(s--,o+=1e9)),[s,o]}const hrtime$1=getDefaultExportFromCjs$1(browserProcessHrtime);process$1.hrtime=hrtime$1;var codemirror={exports:{}},hasRequiredCodemirror;function requireCodemirror(){return hasRequiredCodemirror||(hasRequiredCodemirror=1,function(n,t){var s=s||{};s.scope={},s.findInternal=function(o,u,h){o instanceof String&&(o=String(o));for(var f=o.length,g=0;g<f;g++){var v=o[g];if(u.call(h,v,g,o))return{i:g,v}}return{i:-1,v:void 0}},s.ASSUME_ES5=!1,s.ASSUME_NO_NATIVE_MAP=!1,s.ASSUME_NO_NATIVE_SET=!1,s.SIMPLE_FROUND_POLYFILL=!1,s.ISOLATE_POLYFILLS=!1,s.FORCE_POLYFILL_PROMISE=!1,s.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,s.defineProperty=s.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,h){return o==Array.prototype||o==Object.prototype||(o[u]=h.value),o},s.getGlobal=function(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var u=0;u<o.length;++u){var h=o[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")},s.global=s.getGlobal(commonjsGlobal),s.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",s.TRUST_ES6_POLYFILLS=!s.ISOLATE_POLYFILLS||s.IS_SYMBOL_NATIVE,s.polyfills={},s.propertyToPolyfillSymbol={},s.POLYFILL_PREFIX="$jscp$",s.polyfill=function(o,u,h,f){u&&(s.ISOLATE_POLYFILLS?s.polyfillIsolated(o,u,h,f):s.polyfillUnisolated(o,u,h,f))},s.polyfillUnisolated=function(o,u,h,f){for(h=s.global,o=o.split("."),f=0;f<o.length-1;f++){var g=o[f];if(!(g in h))return;h=h[g]}o=o[o.length-1],f=h[o],u=u(f),u!=f&&u!=null&&s.defineProperty(h,o,{configurable:!0,writable:!0,value:u})},s.polyfillIsolated=function(o,u,h,f){var g=o.split(".");o=g.length===1,f=g[0],f=!o&&f in s.polyfills?s.polyfills:s.global;for(var v=0;v<g.length-1;v++){var O=g[v];if(!(O in f))return;f=f[O]}g=g[g.length-1],h=s.IS_SYMBOL_NATIVE&&h==="es6"?f[g]:null,u=u(h),u!=null&&(o?s.defineProperty(s.polyfills,g,{configurable:!0,writable:!0,value:u}):u!==h&&(s.propertyToPolyfillSymbol[g]===void 0&&(h=1e9*Math.random()>>>0,s.propertyToPolyfillSymbol[g]=s.IS_SYMBOL_NATIVE?s.global.Symbol(g):s.POLYFILL_PREFIX+h+"$"+g),s.defineProperty(f,s.propertyToPolyfillSymbol[g],{configurable:!0,writable:!0,value:u})))},s.polyfill("Array.prototype.find",function(o){return o||function(u,h){return s.findInternal(this,u,h).v}},"es6","es3"),function(o,u){n.exports=u()}(commonjsGlobal,function(){function o(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function u(e){for(var r=e.childNodes.length;0<r;--r)e.removeChild(e.firstChild);return e}function h(e,r){return u(e).appendChild(r)}function f(e,r,a,l){if(e=document.createElement(e),a&&(e.className=a),l&&(e.style.cssText=l),typeof r=="string")e.appendChild(document.createTextNode(r));else if(r)for(a=0;a<r.length;++a)e.appendChild(r[a]);return e}function g(e,r,a,l){return e=f(e,r,a,l),e.setAttribute("role","presentation"),e}function v(e,r){if(r.nodeType==3&&(r=r.parentNode),e.contains)return e.contains(r);do if(r.nodeType==11&&(r=r.host),r==e)return!0;while(r=r.parentNode)}function O(e){try{var r=e.activeElement}catch{r=e.body||null}for(;r&&r.shadowRoot&&r.shadowRoot.activeElement;)r=r.shadowRoot.activeElement;return r}function E(e,r){var a=e.className;o(r).test(a)||(e.className+=(a?" ":"")+r)}function _(e,r){e=e.split(" ");for(var a=0;a<e.length;a++)e[a]&&!o(e[a]).test(r)&&(r+=" "+e[a]);return r}function p(e){return e.display.wrapper.ownerDocument}function b(e){var r=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,r)}}function C(e,r,a){r||(r={});for(var l in e)!e.hasOwnProperty(l)||a===!1&&r.hasOwnProperty(l)||(r[l]=e[l]);return r}function P(e,r,a,l,c){for(r==null&&(r=e.search(/[^\s\u00a0]/),r==-1&&(r=e.length)),l=l||0,c=c||0;;){var d=e.indexOf("	",l);if(0>d||d>=r)return c+(r-l);c+=d-l,c+=a-c%a,l=d+1}}function A(e,r){for(var a=0;a<e.length;++a)if(e[a]==r)return a;return-1}function T(e,r,a){for(var l=0,c=0;;){var d=e.indexOf("	",l);d==-1&&(d=e.length);var y=d-l;if(d==e.length||c+y>=r)return l+Math.min(y,r-c);if(c+=d-l,c+=a-c%a,l=d+1,c>=r)return l}}function I(e){for(;Hn.length<=e;)Hn.push(M(Hn)+" ");return Hn[e]}function M(e){return e[e.length-1]}function j(e,r){for(var a=[],l=0;l<e.length;l++)a[l]=r(e[l],l);return a}function W(e,r,a){for(var l=0,c=a(r);l<e.length&&a(e[l])<=c;)l++;e.splice(l,0,r)}function Z(){}function oe(e,r){return Object.create?e=Object.create(e):(Z.prototype=e,e=new Z),r&&C(r,e),e}function k(e){return/\w/.test(e)||""<e&&(e.toUpperCase()!=e.toLowerCase()||Cl.test(e))}function K(e,r){return r?-1<r.source.indexOf("\\w")&&k(e)?!0:r.test(e):k(e)}function J(e){for(var r in e)if(e.hasOwnProperty(r)&&e[r])return!1;return!0}function Q(e){return 768<=e.charCodeAt(0)&&Al.test(e)}function ie(e,r,a){for(;(0>a?0<r:r<e.length)&&Q(e.charAt(r));)r+=a;return r}function ue(e,r,a){for(var l=r>a?-1:1;;){if(r==a)return r;var c=(r+a)/2;if(c=0>l?Math.ceil(c):Math.floor(c),c==r)return e(c)?r:a;e(c)?a=c:r=c+l}}function fe(e,r,a,l){if(!e)return l(r,a,"ltr",0);for(var c=!1,d=0;d<e.length;++d){var y=e[d];(y.from<a&&y.to>r||r==a&&y.to==r)&&(l(Math.max(y.from,r),Math.min(y.to,a),y.level==1?"rtl":"ltr",d),c=!0)}c||l(r,a,"ltr")}function we(e,r,a){var l;nn=null;for(var c=0;c<e.length;++c){var d=e[c];if(d.from<r&&d.to>r)return c;d.to==r&&(d.from!=d.to&&a=="before"?l=c:nn=c),d.from==r&&(d.from!=d.to&&a!="before"?l=c:nn=c)}return l??nn}function Te(e,r){var a=e.order;return a==null&&(a=e.order=_l(e.text,r)),a}function he(e,r,a){if(e.removeEventListener)e.removeEventListener(r,a,!1);else if(e.detachEvent)e.detachEvent("on"+r,a);else{var l=(e=e._handlers)&&e[r];l&&(a=A(l,a),-1<a&&(e[r]=l.slice(0,a).concat(l.slice(a+1))))}}function ce(e,r){var a=e._handlers&&e._handlers[r]||zn;if(a.length)for(var l=Array.prototype.slice.call(arguments,2),c=0;c<a.length;++c)a[c].apply(null,l)}function Ce(e,r,a){return typeof r=="string"&&(r={type:r,preventDefault:function(){this.defaultPrevented=!0}}),ce(e,a||r.type,e,r),de(r)||r.codemirrorIgnore}function pe(e){var r=e._handlers&&e._handlers.cursorActivity;if(r){e=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]);for(var a=0;a<r.length;++a)A(e,r[a])==-1&&e.push(r[a])}}function Ie(e,r){return 0<(e._handlers&&e._handlers[r]||zn).length}function Le(e){e.prototype.on=function(r,a){je(this,r,a)},e.prototype.off=function(r,a){he(this,r,a)}}function ee(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function ae(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function de(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==0}function X(e){ee(e),ae(e)}function re(e){var r=e.which;return r==null&&(e.button&1?r=1:e.button&2?r=3:e.button&4&&(r=2)),er&&e.ctrlKey&&r==1&&(r=3),r}function ge(e,r){2<arguments.length&&(r.dependencies=Array.prototype.slice.call(arguments,2)),Rs[e]=r}function ye(e){if(typeof e=="string"&&Oi.hasOwnProperty(e))e=Oi[e];else if(e&&typeof e.name=="string"&&Oi.hasOwnProperty(e.name)){var r=Oi[e.name];typeof r=="string"&&(r={name:r}),e=oe(r,e),e.name=r.name}else{if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return ye("application/xml");if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return ye("application/json")}return typeof e=="string"?{name:e}:e||{name:"null"}}function Oe(e,r){r=ye(r);var a=Rs[r.name];if(!a)return Oe(e,"text/plain");if(e=a(e,r),Ii.hasOwnProperty(r.name)){a=Ii[r.name];for(var l in a)a.hasOwnProperty(l)&&(e.hasOwnProperty(l)&&(e["_"+l]=e[l]),e[l]=a[l])}if(e.name=r.name,r.helperType&&(e.helperType=r.helperType),r.modeProps)for(var c in r.modeProps)e[c]=r.modeProps[c];return e}function F(e,r){e=Ii.hasOwnProperty(e)?Ii[e]:Ii[e]={},C(r,e)}function H(e,r){if(r===!0)return r;if(e.copyState)return e.copyState(r);e={};for(var a in r){var l=r[a];l instanceof Array&&(l=l.concat([])),e[a]=l}return e}function Se(e,r){for(var a;e.innerMode&&(a=e.innerMode(r),!(!a||a.mode==e));)r=a.state,e=a.mode;return a||{mode:e,state:r}}function Me(e,r,a){return e.startState?e.startState(r,a):!0}function be(e,r){if(r-=e.first,0>r||r>=e.size)throw Error("There is no line "+(r+e.first)+" in the document.");for(;!e.lines;)for(var a=0;;++a){var l=e.children[a],c=l.chunkSize();if(r<c){e=l;break}r-=c}return e.lines[r]}function Ne(e,r,a){var l=[],c=r.line;return e.iter(r.line,a.line+1,function(d){d=d.text,c==a.line&&(d=d.slice(0,a.ch)),c==r.line&&(d=d.slice(r.ch)),l.push(d),++c}),l}function ze(e,r,a){var l=[];return e.iter(r,a,function(c){l.push(c.text)}),l}function Xe(e,r){if(r-=e.height)for(;e;e=e.parent)e.height+=r}function xe(e){if(e.parent==null)return null;var r=e.parent;e=A(r.lines,e);for(var a=r.parent;a;r=a,a=a.parent)for(var l=0;a.children[l]!=r;++l)e+=a.children[l].chunkSize();return e+r.first}function ut(e,r){var a=e.first;e:do{for(var l=0;l<e.children.length;++l){var c=e.children[l],d=c.height;if(r<d){e=c;continue e}r-=d,a+=c.chunkSize()}return a}while(!e.lines);for(l=0;l<e.lines.length&&(c=e.lines[l].height,!(r<c));++l)r-=c;return a+l}function dt(e,r){return r>=e.first&&r<e.first+e.size}function Ue(e,r){return String(e.lineNumberFormatter(r+e.firstLineNumber))}function me(e,r,a){if(a===void 0&&(a=null),!(this instanceof me))return new me(e,r,a);this.line=e,this.ch=r,this.sticky=a}function De(e,r){return e.line-r.line||e.ch-r.ch}function Qe(e,r){return e.sticky==r.sticky&&De(e,r)==0}function Et(e){return me(e.line,e.ch)}function Tt(e,r){return 0>De(e,r)?r:e}function st(e,r){return 0>De(e,r)?e:r}function Be(e,r){if(r.line<e.first)return me(e.first,0);var a=e.first+e.size-1;return r.line>a?me(a,be(e,a).text.length):(e=be(e,r.line).text.length,a=r.ch,r=a==null||a>e?me(r.line,e):0>a?me(r.line,0):r,r)}function G(e,r){for(var a=[],l=0;l<r.length;l++)a[l]=Be(e,r[l]);return a}function x(e,r,a,l){var c=[e.state.modeGen],d={};Ge(e,r.text,e.doc.mode,a,function($,B){return c.push($,B)},d,l);var y=a.state;l=function($){a.baseTokens=c;var B=e.state.overlays[$],q=1,te=0;a.state=!0,Ge(e,r.text,B.mode,a,function(ne,se){for(var Re=q;te<ne;){var Pe=c[q];Pe>ne&&c.splice(q,1,ne,c[q+1],Pe),q+=2,te=Math.min(ne,Pe)}if(se)if(B.opaque)c.splice(Re,q-Re,ne,"overlay "+se),q=Re+2;else for(;Re<q;Re+=2)ne=c[Re+1],c[Re+1]=(ne?ne+" ":"")+"overlay "+se},d),a.state=y,a.baseTokens=null,a.baseTokenPos=1};for(var w=0;w<e.state.overlays.length;++w)l(w);return{styles:c,classes:d.bgClass||d.textClass?d:null}}function m(e,r,a){if(!r.styles||r.styles[0]!=e.state.modeGen){var l=L(e,xe(r)),c=r.text.length>e.options.maxHighlightLength&&H(e.doc.mode,l.state),d=x(e,r,l);c&&(l.state=c),r.stateAfter=l.save(!c),r.styles=d.styles,d.classes?r.styleClasses=d.classes:r.styleClasses&&(r.styleClasses=null),a===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return r.styles}function L(e,r,a){var l=e.doc,c=e.display;if(!l.mode.startState)return new xr(l,!0,r);var d=Ye(e,r,a),y=d>l.first&&be(l,d-1).stateAfter,w=y?xr.fromSaved(l,y,d):new xr(l,Me(l.mode),d);return l.iter(d,r,function($){N(e,$.text,w);var B=w.line;$.stateAfter=B==r-1||B%5==0||B>=c.viewFrom&&B<c.viewTo?w.save():null,w.nextLine()}),a&&(l.modeFrontier=w.line),w}function N(e,r,a,l){var c=e.doc.mode;for(e=new bt(r,e.options.tabSize,a),e.start=e.pos=l||0,r==""&&Y(c,a.state);!e.eol();)le(c,e,a.state),e.start=e.pos}function Y(e,r){if(e.blankLine)return e.blankLine(r);if(e.innerMode&&(e=Se(e,r),e.mode.blankLine))return e.mode.blankLine(e.state)}function le(e,r,a,l){for(var c=0;10>c;c++){l&&(l[0]=Se(e,a).mode);var d=e.token(r,a);if(r.pos>r.start)return d}throw Error("Mode "+e.name+" failed to advance stream.")}function Ae(e,r,a,l){var c=e.doc,d=c.mode;r=Be(c,r);var y=be(c,r.line);a=L(e,r.line,a),e=new bt(y.text,e.options.tabSize,a);var w;for(l&&(w=[]);(l||e.pos<r.ch)&&!e.eol();){e.start=e.pos;var $=le(d,e,a.state);l&&w.push(new Bo(e,$,H(c.mode,a.state)))}return l?w:new Bo(e,$,a.state)}function Fe(e,r){if(e)for(;;){var a=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!a)break;e=e.slice(0,a.index)+e.slice(a.index+a[0].length);var l=a[1]?"bgClass":"textClass";r[l]==null?r[l]=a[2]:new RegExp("(?:^|\\s)"+a[2]+"(?:$|\\s)").test(r[l])||(r[l]+=" "+a[2])}return e}function Ge(e,r,a,l,c,d,y){var w=a.flattenSpans;w==null&&(w=e.options.flattenSpans);var $=0,B=null,q=new bt(r,e.options.tabSize,l),te=e.options.addModeClass&&[null];for(r==""&&Fe(Y(a,l.state),d);!q.eol();){if(q.pos>e.options.maxHighlightLength){w=!1,y&&N(e,r,l,q.pos),q.pos=r.length;var ne=null}else ne=Fe(le(a,q,l.state,te),d);if(te){var se=te[0].name;se&&(ne="m-"+(ne?se+" "+ne:se))}if(!w||B!=ne){for(;$<q.start;)$=Math.min(q.start,$+5e3),c($,B);B=ne}q.start=q.pos}for(;$<q.pos;)e=Math.min(q.pos,$+5e3),c(e,B),$=e}function Ye(e,r,a){for(var l,c,d=e.doc,y=a?-1:r-(e.doc.mode.innerMode?1e3:100);r>y;--r){if(r<=d.first)return d.first;var w=be(d,r-1),$=w.stateAfter;if($&&(!a||r+($ instanceof jn?$.lookAhead:0)<=d.modeFrontier))return r;w=P(w.text,null,e.options.tabSize),(c==null||l>w)&&(c=r-1,l=w)}return c}function He(e,r){if(e.modeFrontier=Math.min(e.modeFrontier,r),!(e.highlightFrontier<r-10)){for(var a=e.first,l=r-1;l>a;l--){var c=be(e,l).stateAfter;if(c&&(!(c instanceof jn)||l+c.lookAhead<r)){a=l+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,a)}}function Je(e,r,a){this.marker=e,this.from=r,this.to=a}function St(e,r){if(e)for(var a=0;a<e.length;++a){var l=e[a];if(l.marker==r)return l}}function it(e,r){if(r.full)return null;var a=dt(e,r.from.line)&&be(e,r.from.line).markedSpans,l=dt(e,r.to.line)&&be(e,r.to.line).markedSpans;if(!a&&!l)return null;e=r.from.ch;var c=r.to.ch,d=De(r.from,r.to)==0,y;if(a)for(var w=0;w<a.length;++w){var $=a[w],B=$.marker;if($.from==null||(B.inclusiveLeft?$.from<=e:$.from<e)||!($.from!=e||B.type!="bookmark"||d&&$.marker.insertLeft)){var q=$.to==null||(B.inclusiveRight?$.to>=e:$.to>e);(y||(y=[])).push(new Je(B,$.from,q?null:$.to))}}a=y;var te;if(l)for(y=0;y<l.length;++y)w=l[y],$=w.marker,(w.to==null||($.inclusiveRight?w.to>=c:w.to>c)||w.from==c&&$.type=="bookmark"&&(!d||w.marker.insertLeft))&&(B=w.from==null||($.inclusiveLeft?w.from<=c:w.from<c),(te||(te=[])).push(new Je($,B?null:w.from-c,w.to==null?null:w.to-c)));if(l=r.text.length==1,c=M(r.text).length+(l?e:0),a)for(d=0;d<a.length;++d)y=a[d],y.to==null&&(w=St(te,y.marker),w?l&&(y.to=w.to==null?null:w.to+c):y.to=e);if(te)for(e=0;e<te.length;++e)d=te[e],d.to!=null&&(d.to+=c),d.from==null?St(a,d.marker)||(d.from=c,l&&(a||(a=[])).push(d)):(d.from+=c,l&&(a||(a=[])).push(d));if(a&&(a=lr(a)),te&&te!=a&&(te=lr(te)),e=[a],!l){r=r.text.length-2;var ne;if(0<r&&a)for(l=0;l<a.length;++l)a[l].to==null&&(ne||(ne=[])).push(new Je(a[l].marker,null,null));for(a=0;a<r;++a)e.push(ne);e.push(te)}return e}function lr(e){for(var r=0;r<e.length;++r){var a=e[r];a.from!=null&&a.from==a.to&&a.marker.clearWhenEmpty!==!1&&e.splice(r--,1)}return e.length?e:null}function tr(e,r,a){var l=null;if(e.iter(r.line,a.line+1,function(q){if(q.markedSpans)for(var te=0;te<q.markedSpans.length;++te){var ne=q.markedSpans[te].marker;!ne.readOnly||l&&A(l,ne)!=-1||(l||(l=[])).push(ne)}}),!l)return null;for(e=[{from:r,to:a}],r=0;r<l.length;++r){a=l[r];for(var c=a.find(0),d=0;d<e.length;++d){var y=e[d];if(!(0>De(y.to,c.from)||0<De(y.from,c.to))){var w=[d,1],$=De(y.from,c.from),B=De(y.to,c.to);(0>$||!a.inclusiveLeft&&!$)&&w.push({from:y.from,to:c.from}),(0<B||!a.inclusiveRight&&!B)&&w.push({from:c.to,to:y.to}),e.splice.apply(e,w),d+=w.length-3}}}return e}function ui(e){var r=e.markedSpans;if(r){for(var a=0;a<r.length;++a)r[a].marker.detachLine(e);e.markedSpans=null}}function Lr(e,r){if(r){for(var a=0;a<r.length;++a)r[a].marker.attachLine(e);e.markedSpans=r}}function rr(e,r){var a=e.lines.length-r.lines.length;if(a!=0)return a;a=e.find();var l=r.find(),c=De(a.from,l.from)||(e.inclusiveLeft?-1:0)-(r.inclusiveLeft?-1:0);return c?-c:(a=De(a.to,l.to)||(e.inclusiveRight?1:0)-(r.inclusiveRight?1:0))?a:r.id-e.id}function yt(e,r){if(e=Or&&e.markedSpans,e){for(var a,l=0;l<e.length;++l)if(a=e[l],a.marker.collapsed&&(r?a.from:a.to)==null&&(!c||0>rr(c,a.marker)))var c=a.marker}return c}function yr(e,r,a,l,c){if(e=be(e,r),e=Or&&e.markedSpans)for(r=0;r<e.length;++r){var d=e[r];if(d.marker.collapsed){var y=d.marker.find(0),w=De(y.from,a)||(d.marker.inclusiveLeft?-1:0)-(c.inclusiveLeft?-1:0),$=De(y.to,l)||(d.marker.inclusiveRight?1:0)-(c.inclusiveRight?1:0);if(!(0<=w&&0>=$||0>=w&&0<=$)&&(0>=w&&(d.marker.inclusiveRight&&c.inclusiveLeft?0<=De(y.to,a):0<De(y.to,a))||0<=w&&(d.marker.inclusiveRight&&c.inclusiveLeft?0>=De(y.from,l):0>De(y.from,l))))return!0}}}function Bt(e){for(var r;r=yt(e,!0);)e=r.find(-1,!0).line;return e}function Pr(e,r){e=be(e,r);var a=Bt(e);return e==a?r:xe(a)}function ci(e,r){if(r>e.lastLine())return r;var a=be(e,r);if(!Ft(e,a))return r;for(;e=yt(a,!1);)a=e.find(1,!0).line;return xe(a)+1}function Ft(e,r){var a=Or&&r.markedSpans;if(a){for(var l,c=0;c<a.length;++c)if(l=a[c],l.marker.collapsed&&(l.from==null||!l.marker.widgetNode&&l.from==0&&l.marker.inclusiveLeft&&$t(e,r,l)))return!0}}function $t(e,r,a){if(a.to==null)return r=a.marker.find(1,!0),$t(e,r.line,St(r.line.markedSpans,a.marker));if(a.marker.inclusiveRight&&a.to==r.text.length)return!0;for(var l,c=0;c<r.markedSpans.length;++c)if(l=r.markedSpans[c],l.marker.collapsed&&!l.marker.widgetNode&&l.from==a.to&&(l.to==null||l.to!=a.from)&&(l.marker.inclusiveLeft||a.marker.inclusiveRight)&&$t(e,r,l))return!0}function Ut(e){e=Bt(e);for(var r=0,a=e.parent,l=0;l<a.lines.length;++l){var c=a.lines[l];if(c==e)break;r+=c.height}for(e=a.parent;e;a=e,e=a.parent)for(l=0;l<e.children.length&&(c=e.children[l],c!=a);++l)r+=c.height;return r}function ar(e){if(e.height==0)return 0;for(var r=e.text.length,a,l=e;a=yt(l,!0);)a=a.find(0,!0),l=a.from.line,r+=a.from.ch-a.to.ch;for(l=e;a=yt(l,!1);)e=a.find(0,!0),r-=l.text.length-e.from.ch,l=e.to.line,r+=l.text.length-e.to.ch;return r}function Kr(e){var r=e.display;e=e.doc,r.maxLine=be(e,e.first),r.maxLineLength=ar(r.maxLine),r.maxLineChanged=!0,e.iter(function(a){var l=ar(a);l>r.maxLineLength&&(r.maxLineLength=l,r.maxLine=a)})}function Yr(e,r){return!e||/^\s*$/.test(e)?null:(r=r.addModeClass?Ll:$l,r[e]||(r[e]=e.replace(/\S+/g,"cm-$&")))}function hi(e,r){var a=g("span",null,null,Dt?"padding-right: .1px":null);a={pre:g("pre",[a],"CodeMirror-line"),content:a,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")},r.measure={};for(var l=0;l<=(r.rest?r.rest.length:0);l++){var c=l?r.rest[l-1]:r.line,d=void 0;a.pos=0,a.addToken=ur;var y=e.display.measure;if(Es!=null)y=Es;else{var w=h(y,document.createTextNode("AخA")),$=en(w,0,1).getBoundingClientRect();w=en(w,1,2).getBoundingClientRect(),u(y),y=$&&$.left!=$.right?Es=3>w.right-$.right:!1}y&&(d=Te(c,e.doc.direction))&&(a.addToken=fi(a.addToken,d)),a.map=[];var B=r!=e.display.externalMeasured&&xe(c);e:{var q=w=$=y=void 0,te=void 0,ne=void 0,se=void 0;d=a,B=m(e,c,B);var Re=c.markedSpans,Pe=c.text,Ve=0;if(Re)for(var Ct=Pe.length,ke=0,ct=1,ot="",ht=0;;){if(ht==ke){te=q=w=ne="",$=y=null,ht=1/0;for(var pt=[],Ze=void 0,ft=0;ft<Re.length;++ft){var rt=Re[ft],lt=rt.marker;if(lt.type=="bookmark"&&rt.from==ke&&lt.widgetNode)pt.push(lt);else if(rt.from<=ke&&(rt.to==null||rt.to>ke||lt.collapsed&&rt.to==ke&&rt.from==ke)){if(rt.to!=null&&rt.to!=ke&&ht>rt.to&&(ht=rt.to,q=""),lt.className&&(te+=" "+lt.className),lt.css&&(ne=(ne?ne+";":"")+lt.css),lt.startStyle&&rt.from==ke&&(w+=" "+lt.startStyle),lt.endStyle&&rt.to==ht&&(Ze||(Ze=[])).push(lt.endStyle,rt.to),lt.title&&((y||(y={})).title=lt.title),lt.attributes)for(var Nt in lt.attributes)(y||(y={}))[Nt]=lt.attributes[Nt];lt.collapsed&&(!$||0>rr($.marker,lt))&&($=rt)}else rt.from>ke&&ht>rt.from&&(ht=rt.from)}if(Ze)for(ft=0;ft<Ze.length;ft+=2)Ze[ft+1]==ht&&(q+=" "+Ze[ft]);if(!$||$.from==ke)for(Ze=0;Ze<pt.length;++Ze)Er(d,0,pt[Ze]);if($&&($.from||0)==ke){if(Er(d,($.to==null?Ct+1:$.to)-ke,$.marker,$.from==null),$.to==null)break e;$.to==ke&&($=!1)}}if(ke>=Ct)break;for(pt=Math.min(Ct,ht);;){if(ot){if(Ze=ke+ot.length,$||(ft=Ze>pt?ot.slice(0,pt-ke):ot,d.addToken(d,ft,se?se+te:te,w,ke+ft.length==ht?q:"",ne,y)),Ze>=pt){ot=ot.slice(pt-ke),ke=pt;break}ke=Ze,w=""}ot=Pe.slice(Ve,Ve=B[ct++]),se=Yr(B[ct++],d.cm.options)}}else for(y=1;y<B.length;y+=2)d.addToken(d,Pe.slice(Ve,Ve=B[y]),Yr(B[y+1],d.cm.options))}c.styleClasses&&(c.styleClasses.bgClass&&(a.bgClass=_(c.styleClasses.bgClass,a.bgClass||"")),c.styleClasses.textClass&&(a.textClass=_(c.styleClasses.textClass,a.textClass||""))),a.map.length==0&&(c=a.map,d=c.push,y=a.content,$=y.appendChild,w=e.display.measure,ys==null&&(q=f("span","​"),h(w,f("span",[q,document.createTextNode("x")])),w.firstChild.offsetHeight!=0&&(ys=1>=q.offsetWidth&&2<q.offsetHeight&&!(tt&&8>mt))),w=ys?f("span","​"):f("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px"),w.setAttribute("cm-text",""),d.call(c,0,0,$.call(y,w))),l==0?(r.measure.map=a.map,r.measure.cache={}):((r.measure.maps||(r.measure.maps=[])).push(a.map),(r.measure.caches||(r.measure.caches=[])).push({}))}return Dt&&(Nt=a.content.lastChild,/\bcm-tab\b/.test(Nt.className)||Nt.querySelector&&Nt.querySelector(".cm-tab"))&&(a.content.className="cm-tab-wrap-hack"),ce(e,"renderLine",e,r.line,a.pre),a.pre.className&&(a.textClass=_(a.pre.className,a.textClass||"")),a}function ir(e){var r=f("span","•","cm-invalidchar");return r.title="\\u"+e.charCodeAt(0).toString(16),r.setAttribute("aria-label",r.title),r}function ur(e,r,a,l,c,d,y){if(r){if(e.splitSpaces){var w=e.trailingSpace;if(1<r.length&&!/  /.test(r))w=r;else{for(var $="",B=0;B<r.length;B++){var q=r.charAt(B);q!=" "||!w||B!=r.length-1&&r.charCodeAt(B+1)!=32||(q=" "),$+=q,w=q==" "}w=$}}else w=r;if($=w,B=e.cm.state.specialChars,q=!1,B.test(r)){w=document.createDocumentFragment();for(var te=0;;){B.lastIndex=te;var ne=B.exec(r),se=ne?ne.index-te:r.length-te;if(se){var Re=document.createTextNode($.slice(te,te+se));tt&&9>mt?w.appendChild(f("span",[Re])):w.appendChild(Re),e.map.push(e.pos,e.pos+se,Re),e.col+=se,e.pos+=se}if(!ne)break;te+=se+1,ne[0]=="	"?(ne=e.cm.options.tabSize,ne-=e.col%ne,se=w.appendChild(f("span",I(ne),"cm-tab")),se.setAttribute("role","presentation"),se.setAttribute("cm-text","	"),e.col+=ne):(ne[0]=="\r"||ne[0]==`
`?(se=w.appendChild(f("span",ne[0]=="\r"?"␍":"␤","cm-invalidchar")),se.setAttribute("cm-text",ne[0])):(se=e.cm.options.specialCharPlaceholder(ne[0]),se.setAttribute("cm-text",ne[0]),tt&&9>mt?w.appendChild(f("span",[se])):w.appendChild(se)),e.col+=1),e.map.push(e.pos,e.pos+1,se),e.pos++}}else e.col+=r.length,w=document.createTextNode($),e.map.push(e.pos,e.pos+r.length,w),tt&&9>mt&&(q=!0),e.pos+=r.length;if(e.trailingSpace=$.charCodeAt(r.length-1)==32,a||l||c||q||d||y){if(r=a||"",l&&(r+=l),c&&(r+=c),l=f("span",[w],r,d),y)for(var Pe in y)y.hasOwnProperty(Pe)&&Pe!="style"&&Pe!="class"&&l.setAttribute(Pe,y[Pe]);return e.content.appendChild(l)}e.content.appendChild(w)}}function fi(e,r){return function(a,l,c,d,y,w,$){c=c?c+" cm-force-border":"cm-force-border";for(var B=a.pos,q=B+l.length;;){for(var te=void 0,ne=0;ne<r.length&&(te=r[ne],!(te.to>B&&te.from<=B));ne++);if(te.to>=q)return e(a,l,c,d,y,w,$);e(a,l.slice(0,te.to-B),c,d,null,w,$),d=null,l=l.slice(te.to-B),B=te.to}}}function Er(e,r,a,l){var c=!l&&a.widgetNode;c&&e.map.push(e.pos,e.pos+r,c),!l&&e.cm.display.input.needsContentAttribute&&(c||(c=e.content.appendChild(document.createElement("span"))),c.setAttribute("cm-marker",a.id)),c&&(e.cm.display.input.setUneditable(c),e.content.appendChild(c)),e.pos+=r,e.trailingSpace=!1}function Xt(e,r,a){for(var l=this.line=r,c;l=yt(l,!1);)l=l.find(1,!0).line,(c||(c=[])).push(l);this.size=(this.rest=c)?xe(M(this.rest))-a+1:1,this.node=this.text=null,this.hidden=Ft(e,r)}function Sr(e,r,a){var l=[],c;for(c=r;c<a;)r=new Xt(e.doc,be(e.doc,c),c),c+=r.size,l.push(r);return l}function et(e,r){if(e=e.ownsGroup)try{var a=e.delayedCallbacks,l=0;do{for(;l<a.length;l++)a[l].call(null);for(var c=0;c<e.ops.length;c++){var d=e.ops[c];if(d.cursorActivityHandlers)for(;d.cursorActivityCalled<d.cursorActivityHandlers.length;)d.cursorActivityHandlers[d.cursorActivityCalled++].call(null,d.cm)}}while(l<a.length)}finally{$i=null,r(e)}}function gt(e,r){var a=e._handlers&&e._handlers[r]||zn;if(a.length){var l=Array.prototype.slice.call(arguments,2);if($i)var c=$i.delayedCallbacks;else sn?c=sn:(c=sn=[],setTimeout(di,0));for(var d=function(w){c.push(function(){return a[w].apply(null,l)})},y=0;y<a.length;++y)d(y)}}function di(){var e=sn;sn=null;for(var r=0;r<e.length;++r)e[r]()}function Xr(e,r,a,l){for(var c=0;c<r.changes.length;c++){var d=r.changes[c];if(d=="text"){d=e;var y=r,w=y.text.className,$=cr(d,y);y.text==y.node&&(y.node=$.pre),y.text.parentNode.replaceChild($.pre,y.text),y.text=$.pre,$.bgClass!=y.bgClass||$.textClass!=y.textClass?(y.bgClass=$.bgClass,y.textClass=$.textClass,hr(d,y)):w&&(y.text.className=w)}else if(d=="gutter")Zr(e,r,a,l);else if(d=="class")hr(e,r);else if(d=="widget"){d=e,y=r,w=l,y.alignable&&(y.alignable=null),$=o("CodeMirror-linewidget");for(var B=y.node.firstChild,q;B;B=q)q=B.nextSibling,$.test(B.className)&&y.node.removeChild(B);dr(d,y,w)}}r.changes=null}function wr(e){return e.node==e.text&&(e.node=f("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),tt&&8>mt&&(e.node.style.zIndex=2)),e.node}function cr(e,r){var a=e.display.externalMeasured;return a&&a.line==r.line?(e.display.externalMeasured=null,r.measure=a.measure,a.built):hi(e,r)}function hr(e,r){var a=r.bgClass?r.bgClass+" "+(r.line.bgClass||""):r.line.bgClass;if(a&&(a+=" CodeMirror-linebackground"),r.background)a?r.background.className=a:(r.background.parentNode.removeChild(r.background),r.background=null);else if(a){var l=wr(r);r.background=l.insertBefore(f("div",null,a),l.firstChild),e.display.input.setUneditable(r.background)}r.line.wrapClass?wr(r).className=r.line.wrapClass:r.node!=r.text&&(r.node.className=""),r.text.className=(r.textClass?r.textClass+" "+(r.line.textClass||""):r.line.textClass)||""}function Zr(e,r,a,l){if(r.gutter&&(r.node.removeChild(r.gutter),r.gutter=null),r.gutterBackground&&(r.node.removeChild(r.gutterBackground),r.gutterBackground=null),r.line.gutterClass){var c=wr(r);r.gutterBackground=f("div",null,"CodeMirror-gutter-background "+r.line.gutterClass,"left: "+(e.options.fixedGutter?l.fixedPos:-l.gutterTotalWidth)+"px; width: "+l.gutterTotalWidth+"px"),e.display.input.setUneditable(r.gutterBackground),c.insertBefore(r.gutterBackground,r.text)}if(c=r.line.gutterMarkers,e.options.lineNumbers||c){var d=wr(r),y=r.gutter=f("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?l.fixedPos:-l.gutterTotalWidth)+"px");if(y.setAttribute("aria-hidden","true"),e.display.input.setUneditable(y),d.insertBefore(y,r.text),r.line.gutterClass&&(y.className+=" "+r.line.gutterClass),!e.options.lineNumbers||c&&c["CodeMirror-linenumbers"]||(r.lineNumber=y.appendChild(f("div",Ue(e.options,a),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+l.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),c)for(r=0;r<e.display.gutterSpecs.length;++r)a=e.display.gutterSpecs[r].className,(d=c.hasOwnProperty(a)&&c[a])&&y.appendChild(f("div",[d],"CodeMirror-gutter-elt","left: "+l.gutterLeft[a]+"px; width: "+l.gutterWidth[a]+"px"))}}function fr(e,r,a,l){var c=cr(e,r);return r.text=r.node=c.pre,c.bgClass&&(r.bgClass=c.bgClass),c.textClass&&(r.textClass=c.textClass),hr(e,r),Zr(e,r,a,l),dr(e,r,l),r.node}function dr(e,r,a){if(Dr(e,r.line,r,a,!0),r.rest)for(var l=0;l<r.rest.length;l++)Dr(e,r.rest[l],r,a,!1)}function Dr(e,r,a,l,c){if(r.widgets){var d=wr(a),y=0;for(r=r.widgets;y<r.length;++y){var w=r[y],$=f("div",[w.node],"CodeMirror-linewidget"+(w.className?" "+w.className:""));w.handleMouseEvents||$.setAttribute("cm-ignore-events","true");var B=w,q=$,te=l;if(B.noHScroll){(a.alignable||(a.alignable=[])).push(q);var ne=te.wrapperWidth;q.style.left=te.fixedPos+"px",B.coverGutter||(ne-=te.gutterTotalWidth,q.style.paddingLeft=te.gutterTotalWidth+"px"),q.style.width=ne+"px"}B.coverGutter&&(q.style.zIndex=5,q.style.position="relative",B.noHScroll||(q.style.marginLeft=-te.gutterTotalWidth+"px")),e.display.input.setUneditable($),c&&w.above?d.insertBefore($,a.gutter||a.text):d.appendChild($),gt(w,"redraw")}}}function D(e){if(e.height!=null)return e.height;var r=e.doc.cm;if(!r)return 0;if(!v(document.body,e.node)){var a="position: relative;";e.coverGutter&&(a+="margin-left: -"+r.display.gutters.offsetWidth+"px;"),e.noHScroll&&(a+="width: "+r.display.wrapper.clientWidth+"px;"),h(r.display.measure,f("div",[e.node],null,a))}return e.height=e.node.parentNode.offsetHeight}function V(e,r){for(r=r.target||r.srcElement;r!=e.wrapper;r=r.parentNode)if(!r||r.nodeType==1&&r.getAttribute("cm-ignore-events")=="true"||r.parentNode==e.sizer&&r!=e.mover)return!0}function Ee(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function $e(e){if(e.cachedPaddingH)return e.cachedPaddingH;var r=h(e.measure,f("pre","x","CodeMirror-line-like"));return r=window.getComputedStyle?window.getComputedStyle(r):r.currentStyle,r={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)},isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function qe(e){return 50-e.display.nativeBarWidth}function Ke(e){return e.display.scroller.clientWidth-qe(e)-e.display.barWidth}function vt(e){return e.display.scroller.clientHeight-qe(e)-e.display.barHeight}function Nr(e,r,a){if(e.line==r)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var l=0;l<e.rest.length;l++)if(e.rest[l]==r)return{map:e.measure.maps[l],cache:e.measure.caches[l]};for(r=0;r<e.rest.length;r++)if(xe(e.rest[r])>a)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}}function Pi(e,r){if(r>=e.display.viewFrom&&r<e.display.viewTo)return e.display.view[Jt(e,r)];if((e=e.display.externalMeasured)&&r>=e.lineN&&r<e.lineN+e.size)return e}function Rr(e,r){var a=xe(r),l=Pi(e,a);if(l&&!l.text?l=null:l&&l.changes&&(Xr(e,l,a,gi(e)),e.curOp.forceUpdate=!0),!l){var c=Bt(r);l=xe(c),c=e.display.externalMeasured=new Xt(e.doc,c,l),c.lineN=l,l=c.built=hi(e,c),c.text=l.pre,h(e.display.lineMeasure,l.pre),l=c}return e=Nr(l,r,a),{line:r,view:l,rect:null,map:e.map,cache:e.cache,before:e.before,hasHeights:!1}}function zt(e,r,a,l,c){r.before&&(a=-1);var d=a+(l||"");if(r.cache.hasOwnProperty(d))e=r.cache[d];else{if(r.rect||(r.rect=r.view.text.getBoundingClientRect()),!r.hasHeights){var y=r.view,w=r.rect,$=e.options.lineWrapping,B=$&&Ke(e);if(!y.measure.heights||$&&y.measure.width!=B){var q=y.measure.heights=[];if($)for(y.measure.width=B,y=y.text.firstChild.getClientRects(),$=0;$<y.length-1;$++){B=y[$];var te=y[$+1];2<Math.abs(B.bottom-te.bottom)&&q.push((B.bottom+te.top)/2-w.top)}q.push(w.bottom-w.top)}r.hasHeights=!0}if(q=l,y=vn(r.map,a,q),l=y.node,w=y.start,$=y.end,a=y.collapse,l.nodeType==3){for(var ne=0;4>ne;ne++){for(;w&&Q(r.line.text.charAt(y.coverStart+w));)--w;for(;y.coverStart+$<y.coverEnd&&Q(r.line.text.charAt(y.coverStart+$));)++$;if(tt&&9>mt&&w==0&&$==y.coverEnd-y.coverStart)var se=l.parentNode.getBoundingClientRect();else{if(se=en(l,w,$).getClientRects(),$=Go,q=="left")for(B=0;B<se.length&&($=se[B]).left==$.right;B++);else for(B=se.length-1;0<=B&&($=se[B]).left==$.right;B--);se=$}if(se.left||se.right||w==0)break;$=w,--w,a="right"}tt&&11>mt&&((ne=!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI)||(ws!=null?ne=ws:(q=h(e.display.measure,f("span","x")),ne=q.getBoundingClientRect(),q=en(q,0,1).getBoundingClientRect(),ne=ws=1<Math.abs(ne.left-q.left)),ne=!ne),ne||(ne=screen.logicalXDPI/screen.deviceXDPI,q=screen.logicalYDPI/screen.deviceYDPI,se={left:se.left*ne,right:se.right*ne,top:se.top*q,bottom:se.bottom*q}))}else 0<w&&(a=q="right"),se=e.options.lineWrapping&&1<(ne=l.getClientRects()).length?ne[q=="right"?ne.length-1:0]:l.getBoundingClientRect();for(!(tt&&9>mt)||w||se&&(se.left||se.right)||(se=(se=l.parentNode.getClientRects()[0])?{left:se.left,right:se.left+pr(e.display),top:se.top,bottom:se.bottom}:Go),l=se.top-r.rect.top,w=se.bottom-r.rect.top,ne=(l+w)/2,q=r.view.measure.heights,y=0;y<q.length-1&&!(ne<q[y]);y++);a={left:(a=="right"?se.right:se.left)-r.rect.left,right:(a=="left"?se.left:se.right)-r.rect.left,top:y?q[y-1]:0,bottom:q[y]},se.left||se.right||(a.bogus=!0),e.options.singleCursorHeightPerLine||(a.rtop=l,a.rbottom=w),e=a,e.bogus||(r.cache[d]=e)}return{left:e.left,right:e.right,top:c?e.rtop:e.top,bottom:c?e.rbottom:e.bottom}}function vn(e,r,a){for(var l,c,d,y,w,$,B=0;B<e.length;B+=3)if(w=e[B],$=e[B+1],r<w?(c=0,d=1,y="left"):r<$?(c=r-w,d=c+1):(B==e.length-3||r==$&&e[B+3]>r)&&(d=$-w,c=d-1,r>=$&&(y="right")),c!=null){if(l=e[B+2],w==$&&a==(l.insertLeft?"left":"right")&&(y=a),a=="left"&&c==0)for(;B&&e[B-2]==e[B-3]&&e[B-1].insertLeft;)l=e[(B-=3)+2],y="left";if(a=="right"&&c==$-w)for(;B<e.length-3&&e[B+3]==e[B+4]&&!e[B+5].insertLeft;)l=e[(B+=3)+2],y="right";break}return{node:l,start:c,end:d,collapse:y,coverStart:w,coverEnd:$}}function xn(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var r=0;r<e.rest.length;r++)e.measure.caches[r]={}}function yn(e){e.display.externalMeasure=null,u(e.display.lineMeasure);for(var r=0;r<e.display.view.length;r++)xn(e.display.view[r])}function Br(e){yn(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function En(e){return Hr&&Un?-(e.body.getBoundingClientRect().left-parseInt(getComputedStyle(e.body).marginLeft)):e.defaultView.pageXOffset||(e.documentElement||e.body).scrollLeft}function Sn(e){return Hr&&Un?-(e.body.getBoundingClientRect().top-parseInt(getComputedStyle(e.body).marginTop)):e.defaultView.pageYOffset||(e.documentElement||e.body).scrollTop}function Fr(e){e=Bt(e).widgets;var r=0;if(e)for(var a=0;a<e.length;++a)e[a].above&&(r+=D(e[a]));return r}function nr(e,r,a,l,c){return c||(c=Fr(r),a.top+=c,a.bottom+=c),l=="line"||(l||(l="local"),r=Ut(r),r=l=="local"?r+e.display.lineSpace.offsetTop:r-e.display.viewOffset,(l=="page"||l=="window")&&(c=e.display.lineSpace.getBoundingClientRect(),r+=c.top+(l=="window"?0:Sn(p(e))),e=c.left+(l=="window"?0:En(p(e))),a.left+=e,a.right+=e),a.top+=r,a.bottom+=r),a}function Di(e,r,a){if(a=="div")return r;var l=r.left;return r=r.top,a=="page"?(l-=En(p(e)),r-=Sn(p(e))):a!="local"&&a||(a=e.display.sizer.getBoundingClientRect(),l+=a.left,r+=a.top),e=e.display.lineSpace.getBoundingClientRect(),{left:l-e.left,top:r-e.top}}function Zt(e,r,a,l,c){l||(l=be(e.doc,r.line));var d=l;return r=r.ch,l=zt(e,Rr(e,l),r,c),nr(e,d,l,a)}function jt(e,r,a,l,c,d){function y(ne,se){return ne=zt(e,c,ne,se?"right":"left",d),se?ne.left=ne.right:ne.right=ne.left,nr(e,l,ne,a)}function w(ne,se,Re){return y(Re?ne-1:ne,$[se].level==1!=Re)}l=l||be(e.doc,r.line),c||(c=Rr(e,l));var $=Te(l,e.doc.direction),B=r.ch;if(r=r.sticky,B>=l.text.length?(B=l.text.length,r="before"):0>=B&&(B=0,r="after"),!$)return y(r=="before"?B-1:B,r=="before");var q=we($,B,r),te=nn;return q=w(B,q,r=="before"),te!=null&&(q.other=w(B,te,r!="before")),q}function wn(e,r){var a=0;return r=Be(e.doc,r),e.options.lineWrapping||(a=pr(e.display)*r.ch),r=be(e.doc,r.line),e=Ut(r)+e.display.lineSpace.offsetTop,{left:a,right:a,top:e,bottom:e+r.height}}function Ni(e,r,a,l,c){return e=me(e,r,a),e.xRel=c,l&&(e.outside=l),e}function Bi(e,r,a){var l=e.doc;if(a+=e.display.viewOffset,0>a)return Ni(l.first,0,null,-1,-1);var c=ut(l,a),d=l.first+l.size-1;if(c>d)return Ni(l.first+l.size-1,be(l,d).text.length,null,1,1);0>r&&(r=0);for(var y=be(l,c);;){d=Tr(e,y,c,r,a);var w=void 0,$=d.ch+(0<d.xRel||0<d.outside?1:0);if(y=Or&&y.markedSpans)for(var B=0;B<y.length;++B){var q=y[B];q.marker.collapsed&&(q.from==null||q.from<$)&&(q.to==null||q.to>$)&&(!w||0>rr(w,q.marker))&&(w=q.marker)}if(!w||(d=w.find(1),d.line==c))return d;y=be(l,c=d.line)}}function Rn(e,r,a,l){l-=Fr(r),r=r.text.length;var c=ue(function(d){return zt(e,a,d-1).bottom<=l},r,0);return r=ue(function(d){return zt(e,a,d).top>l},c,r),{begin:c,end:r}}function Tn(e,r,a,l){return a||(a=Rr(e,r)),l=nr(e,r,zt(e,a,l),"line").top,Rn(e,r,a,l)}function pi(e,r,a,l){return e.bottom<=a?!1:e.top>a?!0:(l?e.left:e.right)>r}function Tr(e,r,a,l,c){c-=Ut(r);var d=Rr(e,r),y=Fr(r),w=0,$=r.text.length,B=!0,q=Te(r,e.doc.direction);q&&(q=(e.options.lineWrapping?bn:Qn)(e,r,a,d,q,l,c),w=(B=q.level!=1)?q.from:q.to-1,$=B?q.to:q.from-1);var te=null,ne=null;q=ue(function(Re){var Pe=zt(e,d,Re);return Pe.top+=y,Pe.bottom+=y,pi(Pe,l,c,!1)?(Pe.top<=c&&Pe.left<=l&&(te=Re,ne=Pe),!0):!1},w,$);var se=!1;return ne?(w=l-ne.left<ne.right-l,B=w==B,q=te+(B?0:1),B=B?"after":"before",w=w?ne.left:ne.right):(B||q!=$&&q!=w||q++,B=q==0?"after":q==r.text.length?"before":zt(e,d,q-(B?1:0)).bottom+y<=c==B?"after":"before",se=jt(e,me(a,q,B),"line",r,d),w=se.left,se=c<se.top?-1:c>=se.bottom?1:0),q=ie(r.text,q,1),Ni(a,q,B,se,l-w)}function Qn(e,r,a,l,c,d,y){var w=ue(function(q){q=c[q];var te=q.level!=1;return pi(jt(e,me(a,te?q.to:q.from,te?"before":"after"),"line",r,l),d,y,!0)},0,c.length-1),$=c[w];if(0<w){var B=$.level!=1;B=jt(e,me(a,B?$.from:$.to,B?"after":"before"),"line",r,l),pi(B,d,y,!0)&&B.top>y&&($=c[w-1])}return $}function bn(e,r,a,l,c,d,y){y=Rn(e,r,l,y),a=y.begin,y=y.end,/\s/.test(r.text.charAt(y-1))&&y--;for(var w=r=null,$=0;$<c.length;$++){var B=c[$];if(!(B.from>=y||B.to<=a)){var q=zt(e,l,B.level!=1?Math.min(y,B.to)-1:Math.max(a,B.from)).right;q=q<d?d-q+1e9:q-d,(!r||w>q)&&(r=B,w=q)}}return r||(r=c[c.length-1]),r.from<a&&(r={from:a,to:r.to,level:r.level}),r.to>y&&(r={from:r.from,to:y,level:r.level}),r}function Gr(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(ni==null){ni=f("pre",null,"CodeMirror-line-like");for(var r=0;49>r;++r)ni.appendChild(document.createTextNode("x")),ni.appendChild(f("br"));ni.appendChild(document.createTextNode("x"))}return h(e.measure,ni),r=ni.offsetHeight/50,3<r&&(e.cachedTextHeight=r),u(e.measure),r||1}function pr(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var r=f("span","xxxxxxxxxx"),a=f("pre",[r],"CodeMirror-line-like");return h(e.measure,a),r=r.getBoundingClientRect(),r=(r.right-r.left)/10,2<r&&(e.cachedCharWidth=r),r||10}function gi(e){for(var r=e.display,a={},l={},c=r.gutters.clientLeft,d=r.gutters.firstChild,y=0;d;d=d.nextSibling,++y){var w=e.display.gutterSpecs[y].className;a[w]=d.offsetLeft+d.clientLeft+c,l[w]=d.clientWidth}return{fixedPos:Fi(r),gutterTotalWidth:r.gutters.offsetWidth,gutterLeft:a,gutterWidth:l,wrapperWidth:r.wrapper.clientWidth}}function Fi(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Cn(e){var r=Gr(e.display),a=e.options.lineWrapping,l=a&&Math.max(5,e.display.scroller.clientWidth/pr(e.display)-3);return function(c){if(Ft(e.doc,c))return 0;var d=0;if(c.widgets)for(var y=0;y<c.widgets.length;y++)c.widgets[y].height&&(d+=c.widgets[y].height);return a?d+(Math.ceil(c.text.length/l)||1)*r:d+r}}function mi(e){var r=e.doc,a=Cn(e);r.iter(function(l){var c=a(l);c!=l.height&&Xe(l,c)})}function br(e,r,a,l){var c=e.display;if(!a&&(r.target||r.srcElement).getAttribute("cm-not-content")=="true")return null;a=c.lineSpace.getBoundingClientRect();try{var d=r.clientX-a.left,y=r.clientY-a.top}catch{return null}r=Bi(e,d,y);var w;return l&&0<r.xRel&&(w=be(e.doc,r.line).text).length==r.ch&&(l=P(w,w.length,e.options.tabSize)-w.length,r=me(r.line,Math.max(0,Math.round((d-$e(e.display).left)/pr(e.display))-l))),r}function Jt(e,r){if(r>=e.display.viewTo||(r-=e.display.viewFrom,0>r))return null;e=e.display.view;for(var a=0;a<e.length;a++)if(r-=e[a].size,0>r)return a}function It(e,r,a,l){r==null&&(r=e.doc.first),a==null&&(a=e.doc.first+e.doc.size),l||(l=0);var c=e.display;if(l&&a<c.viewTo&&(c.updateLineNumbers==null||c.updateLineNumbers>r)&&(c.updateLineNumbers=r),e.curOp.viewChanged=!0,r>=c.viewTo)Or&&Pr(e.doc,r)<c.viewTo&&gr(e);else if(a<=c.viewFrom)Or&&ci(e.doc,a+l)>c.viewFrom?gr(e):(c.viewFrom+=l,c.viewTo+=l);else if(r<=c.viewFrom&&a>=c.viewTo)gr(e);else if(r<=c.viewFrom){var d=vi(e,a,a+l,1);d?(c.view=c.view.slice(d.index),c.viewFrom=d.lineN,c.viewTo+=l):gr(e)}else if(a>=c.viewTo)(d=vi(e,r,r,-1))?(c.view=c.view.slice(0,d.index),c.viewTo=d.lineN):gr(e);else{d=vi(e,r,r,-1);var y=vi(e,a,a+l,1);d&&y?(c.view=c.view.slice(0,d.index).concat(Sr(e,d.lineN,y.lineN)).concat(c.view.slice(y.index)),c.viewTo+=l):gr(e)}(e=c.externalMeasured)&&(a<e.lineN?e.lineN+=l:r<e.lineN+e.size&&(c.externalMeasured=null))}function Qt(e,r,a){e.curOp.viewChanged=!0;var l=e.display,c=e.display.externalMeasured;c&&r>=c.lineN&&r<c.lineN+c.size&&(l.externalMeasured=null),r<l.viewFrom||r>=l.viewTo||(e=l.view[Jt(e,r)],e.node!=null&&(e=e.changes||(e.changes=[]),A(e,a)==-1&&e.push(a)))}function gr(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function vi(e,r,a,l){var c=Jt(e,r),d=e.display.view;if(!Or||a==e.doc.first+e.doc.size)return{index:c,lineN:a};for(var y=e.display.viewFrom,w=0;w<c;w++)y+=d[w].size;if(y!=r){if(0<l){if(c==d.length-1)return null;r=y+d[c].size-r,c++}else r=y-r;a+=r}for(;Pr(e.doc,a)!=a;){if(c==(0>l?0:d.length-1))return null;a+=l*d[c-(0>l?1:0)].size,c+=l}return{index:c,lineN:a}}function z(e){e=e.display.view;for(var r=0,a=0;a<e.length;a++){var l=e[a];l.hidden||l.node&&!l.changes||++r}return r}function ve(e){e.display.input.showSelection(e.display.input.prepareSelection())}function _e(e,r){r===void 0&&(r=!0);var a=e.doc,l={},c=l.cursors=document.createDocumentFragment(),d=l.selection=document.createDocumentFragment(),y=e.options.$customCursor;y&&(r=!0);for(var w=0;w<a.sel.ranges.length;w++)if(r||w!=a.sel.primIndex){var $=a.sel.ranges[w];if(!($.from().line>=e.display.viewTo||$.to().line<e.display.viewFrom)){var B=$.empty();if(y){var q=y(e,$);q&&We(e,q,c)}else(B||e.options.showCursorWhenSelecting)&&We(e,$.head,c);B||Lt(e,$,d)}}return l}function We(e,r,a){var l=jt(e,r,"div",null,null,!e.options.singleCursorHeightPerLine),c=a.appendChild(f("div"," ","CodeMirror-cursor"));c.style.left=l.left+"px",c.style.top=l.top+"px",c.style.height=Math.max(0,l.bottom-l.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)&&(r=Zt(e,r,"div",null,null),r=r.right-r.left,c.style.width=(0<r?r:e.defaultCharWidth())+"px"),l.other&&(e=a.appendChild(f("div"," ","CodeMirror-cursor CodeMirror-secondarycursor")),e.style.display="",e.style.left=l.other.left+"px",e.style.top=l.other.top+"px",e.style.height=.85*(l.other.bottom-l.other.top)+"px")}function wt(e,r){return e.top-r.top||e.left-r.left}function Lt(e,r,a){function l(se,Re,Pe,Ve){0>Re&&(Re=0),Re=Math.round(Re),Ve=Math.round(Ve),w.appendChild(f("div",null,"CodeMirror-selected","position: absolute; left: "+se+`px;
                             top: `+Re+"px; width: "+(Pe??q-se)+`px;
                             height: `+(Ve-Re)+"px"))}function c(se,Re,Pe){function Ve(Ze,ft){return Zt(e,me(se,Ze),"div",ke,ft)}function Ct(Ze,ft,rt){return Ze=Tn(e,ke,null,Ze),ft=ft=="ltr"==(rt=="after")?"left":"right",rt=rt=="after"?Ze.begin:Ze.end-(/\s/.test(ke.text.charAt(Ze.end-1))?2:1),Ve(rt,ft)[ft]}var ke=be(y,se),ct=ke.text.length,ot,ht,pt=Te(ke,y.direction);return fe(pt,Re||0,Pe??ct,function(Ze,ft,rt,lt){var Nt=rt=="ltr",kt=Ve(Ze,Nt?"left":"right"),Yt=Ve(ft-1,Nt?"right":"left"),oi=Re==null&&Ze==0,li=Pe==null&&ft==ct,As=lt==0;lt=!pt||lt==pt.length-1,3>=Yt.top-kt.top?(ft=(te?oi:li)&&As?B:(Nt?kt:Yt).left,l(ft,kt.top,((te?li:oi)&&lt?q:(Nt?Yt:kt).right)-ft,kt.bottom)):(Nt?(Nt=te&&oi&&As?B:kt.left,oi=te?q:Ct(Ze,rt,"before"),Ze=te?B:Ct(ft,rt,"after"),li=te&&li&&lt?q:Yt.right):(Nt=te?Ct(Ze,rt,"before"):B,oi=!te&&oi&&As?q:kt.right,Ze=!te&&li&&lt?B:Yt.left,li=te?Ct(ft,rt,"after"):q),l(Nt,kt.top,oi-Nt,kt.bottom),kt.bottom<Yt.top&&l(B,kt.bottom,null,Yt.top),l(Ze,Yt.top,li-Ze,Yt.bottom)),(!ot||0>wt(kt,ot))&&(ot=kt),0>wt(Yt,ot)&&(ot=Yt),(!ht||0>wt(kt,ht))&&(ht=kt),0>wt(Yt,ht)&&(ht=Yt)}),{start:ot,end:ht}}var d=e.display,y=e.doc,w=document.createDocumentFragment(),$=$e(e.display),B=$.left,q=Math.max(d.sizerWidth,Ke(e)-d.sizer.offsetLeft)-$.right,te=y.direction=="ltr";if(d=r.from(),r=r.to(),d.line==r.line)c(d.line,d.ch,r.ch);else{var ne=be(y,d.line);$=be(y,r.line),$=Bt(ne)==Bt($),d=c(d.line,d.ch,$?ne.text.length+1:null).end,r=c(r.line,$?0:null,r.ch).start,$&&(d.top<r.top-2?(l(d.right,d.top,null,d.bottom),l(B,r.top,r.left,r.bottom)):l(d.right,d.top,r.left-d.right,d.bottom)),d.bottom<r.top&&l(B,d.bottom,null,r.top)}a.appendChild(w)}function Vt(e){if(e.state.focused){var r=e.display;clearInterval(r.blinker);var a=!0;r.cursorDiv.style.visibility="",0<e.options.cursorBlinkRate?r.blinker=setInterval(function(){e.hasFocus()||Cr(e),r.cursorDiv.style.visibility=(a=!a)?"":"hidden"},e.options.cursorBlinkRate):0>e.options.cursorBlinkRate&&(r.cursorDiv.style.visibility="hidden")}}function Mt(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||mr(e))}function xi(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Cr(e))},100)}function mr(e,r){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),e.options.readOnly!="nocursor"&&(e.state.focused||(ce(e,"focus",e,r),e.state.focused=!0,E(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),Dt&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Vt(e))}function Cr(e,r){e.state.delayingBlurEvent||(e.state.focused&&(ce(e,"blur",e,r),e.state.focused=!1,ii(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Jr(e){for(var r=e.display,a=r.lineDiv.offsetTop,l=Math.max(0,r.scroller.getBoundingClientRect().top),c=r.lineDiv.getBoundingClientRect().top,d=0,y=0;y<r.view.length;y++){var w=r.view[y],$=e.options.lineWrapping,B=0;if(!w.hidden){if(c+=w.line.height,tt&&8>mt){$=w.node.offsetTop+w.node.offsetHeight;var q=$-a;a=$}else{var te=w.node.getBoundingClientRect();q=te.bottom-te.top,!$&&w.text.firstChild&&(B=w.text.firstChild.getBoundingClientRect().right-te.left-1)}if($=w.line.height-q,(.005<$||-.005>$)&&(c<l&&(d-=$),Xe(w.line,q),Gi(w.line),w.rest))for(q=0;q<w.rest.length;q++)Gi(w.rest[q]);B>e.display.sizerWidth&&(B=Math.ceil(B/pr(e.display)),B>e.display.maxLineLength&&(e.display.maxLineLength=B,e.display.maxLine=w.line,e.display.maxLineChanged=!0))}}2<Math.abs(d)&&(r.scroller.scrollTop+=d)}function Gi(e){if(e.widgets)for(var r=0;r<e.widgets.length;++r){var a=e.widgets[r],l=a.node.parentNode;l&&(a.height=l.offsetHeight)}}function Wr(e,r,a){var l=a&&a.top!=null?Math.max(0,a.top):e.scroller.scrollTop;l=Math.floor(l-e.lineSpace.offsetTop);var c=a&&a.bottom!=null?a.bottom:l+e.wrapper.clientHeight;if(l=ut(r,l),c=ut(r,c),a&&a.ensure){var d=a.ensure.from.line;a=a.ensure.to.line,d<l?(l=d,c=ut(r,Ut(be(r,d))+e.wrapper.clientHeight)):Math.min(a,r.lastLine())>=c&&(l=ut(r,Ut(be(r,a))-e.wrapper.clientHeight),c=a)}return{from:l,to:Math.max(c,l+1)}}function kr(e,r){var a=e.display,l=Gr(e.display);0>r.top&&(r.top=0);var c=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:a.scroller.scrollTop,d=vt(e),y={};r.bottom-r.top>d&&(r.bottom=r.top+d);var w=e.doc.height+Ee(a),$=r.top<l;return l=r.bottom>w-l,r.top<c?y.scrollTop=$?0:r.top:r.bottom>c+d&&(d=Math.min(r.top,(l?w:r.bottom)-d),d!=c&&(y.scrollTop=d)),c=e.options.fixedGutter?0:a.gutters.offsetWidth,d=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:a.scroller.scrollLeft-c,e=Ke(e)-a.gutters.offsetWidth,(a=r.right-r.left>e)&&(r.right=r.left+e),10>r.left?y.scrollLeft=0:r.left<d?y.scrollLeft=Math.max(0,r.left+c-(a?0:10)):r.right>e+d-3&&(y.scrollLeft=r.right+(a?0:10)-e),y}function An(e,r){r!=null&&(_n(e),e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+r)}function yi(e){_n(e);var r=e.getCursor();e.curOp.scrollToPos={from:r,to:r,margin:e.options.cursorScrollMargin}}function Wi(e,r,a){r==null&&a==null||_n(e),r!=null&&(e.curOp.scrollLeft=r),a!=null&&(e.curOp.scrollTop=a)}function _n(e){var r=e.curOp.scrollToPos;if(r){e.curOp.scrollToPos=null;var a=wn(e,r.from),l=wn(e,r.to);Os(e,a,l,r.margin)}}function Os(e,r,a,l){r=kr(e,{left:Math.min(r.left,a.left),top:Math.min(r.top,a.top)-l,right:Math.max(r.right,a.right),bottom:Math.max(r.bottom,a.bottom)+l}),Wi(e,r.scrollLeft,r.scrollTop)}function ki(e,r){2>Math.abs(e.doc.scrollTop-r)||(_r||ts(e,{top:r}),Is(e,r,!0),_r&&ts(e),qi(e,100))}function Is(e,r,a){r=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,r)),(e.display.scroller.scrollTop!=r||a)&&(e.doc.scrollTop=r,e.display.scrollbars.setScrollTop(r),e.display.scroller.scrollTop!=r&&(e.display.scroller.scrollTop=r))}function Qr(e,r,a,l){r=Math.max(0,Math.min(r,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(a?r==e.doc.scrollLeft:2>Math.abs(e.doc.scrollLeft-r))&&!l||(e.doc.scrollLeft=r,Ps(e),e.display.scroller.scrollLeft!=r&&(e.display.scroller.scrollLeft=r),e.display.scrollbars.setScrollLeft(r))}function Ui(e){var r=e.display,a=r.gutters.offsetWidth,l=Math.round(e.doc.height+Ee(e.display));return{clientHeight:r.scroller.clientHeight,viewHeight:r.wrapper.clientHeight,scrollWidth:r.scroller.scrollWidth,clientWidth:r.scroller.clientWidth,viewWidth:r.wrapper.clientWidth,barLeft:e.options.fixedGutter?a:0,docHeight:l,scrollHeight:l+qe(e)+r.barHeight,nativeBarWidth:r.nativeBarWidth,gutterWidth:a}}function Ei(e,r){r||(r=Ui(e));var a=e.display.barWidth,l=e.display.barHeight;for(Ms(e,r),r=0;4>r&&a!=e.display.barWidth||l!=e.display.barHeight;r++)a!=e.display.barWidth&&e.options.lineWrapping&&Jr(e),Ms(e,Ui(e)),a=e.display.barWidth,l=e.display.barHeight}function Ms(e,r){var a=e.display,l=a.scrollbars.update(r);a.sizer.style.paddingRight=(a.barWidth=l.right)+"px",a.sizer.style.paddingBottom=(a.barHeight=l.bottom)+"px",a.heightForcer.style.borderBottom=l.bottom+"px solid transparent",l.right&&l.bottom?(a.scrollbarFiller.style.display="block",a.scrollbarFiller.style.height=l.bottom+"px",a.scrollbarFiller.style.width=l.right+"px"):a.scrollbarFiller.style.display="",l.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(a.gutterFiller.style.display="block",a.gutterFiller.style.height=l.bottom+"px",a.gutterFiller.style.width=r.gutterWidth+"px"):a.gutterFiller.style.display=""}function $s(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&ii(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Wo[e.options.scrollbarStyle](function(r){e.display.wrapper.insertBefore(r,e.display.scrollbarFiller),je(r,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),r.setAttribute("cm-not-content","true")},function(r,a){a=="horizontal"?Qr(e,r):ki(e,r)},e),e.display.scrollbars.addClass&&E(e.display.wrapper,e.display.scrollbars.addClass)}function ei(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Pl,markArrays:null},e=e.curOp,$i?$i.ops.push(e):e.ownsGroup=$i={ops:[e],delayedCallbacks:[]}}function ti(e){(e=e.curOp)&&et(e,function(r){for(var a=0;a<r.ops.length;a++)r.ops[a].cm.curOp=null;for(r=r.ops,a=0;a<r.length;a++){var l=r[a],c=l.cm,d=c.display,y=c.display;!y.scrollbarsClipped&&y.scroller.offsetWidth&&(y.nativeBarWidth=y.scroller.offsetWidth-y.scroller.clientWidth,y.heightForcer.style.height=qe(c)+"px",y.sizer.style.marginBottom=-y.nativeBarWidth+"px",y.sizer.style.borderRightWidth=qe(c)+"px",y.scrollbarsClipped=!0),l.updateMaxLine&&Kr(c),l.mustUpdate=l.viewChanged||l.forceUpdate||l.scrollTop!=null||l.scrollToPos&&(l.scrollToPos.from.line<d.viewFrom||l.scrollToPos.to.line>=d.viewTo)||d.maxLineChanged&&c.options.lineWrapping,l.update=l.mustUpdate&&new Vn(c,l.mustUpdate&&{top:l.scrollTop,ensure:l.scrollToPos},l.forceUpdate)}for(a=0;a<r.length;a++)l=r[a],l.updatedDisplay=l.mustUpdate&&es(l.cm,l.update);for(a=0;a<r.length;a++)l=r[a],c=l.cm,d=c.display,l.updatedDisplay&&Jr(c),l.barMeasure=Ui(c),d.maxLineChanged&&!c.options.lineWrapping&&(y=d.maxLine.text.length,y=zt(c,Rr(c,d.maxLine),y,void 0),l.adjustWidthTo=y.left+3,c.display.sizerWidth=l.adjustWidthTo,l.barMeasure.scrollWidth=Math.max(d.scroller.clientWidth,d.sizer.offsetLeft+l.adjustWidthTo+qe(c)+c.display.barWidth),l.maxScrollLeft=Math.max(0,d.sizer.offsetLeft+l.adjustWidthTo-Ke(c))),(l.updatedDisplay||l.selectionChanged)&&(l.preparedSelection=d.input.prepareSelection());for(a=0;a<r.length;a++)l=r[a],c=l.cm,l.adjustWidthTo!=null&&(c.display.sizer.style.minWidth=l.adjustWidthTo+"px",l.maxScrollLeft<c.doc.scrollLeft&&Qr(c,Math.min(c.display.scroller.scrollLeft,l.maxScrollLeft),!0),c.display.maxLineChanged=!1),d=l.focus&&l.focus==O(p(c)),l.preparedSelection&&c.display.input.showSelection(l.preparedSelection,d),(l.updatedDisplay||l.startHeight!=c.doc.height)&&Ei(c,l.barMeasure),l.updatedDisplay&&is(c,l.barMeasure),l.selectionChanged&&Vt(c),c.state.focused&&l.updateInput&&c.display.input.reset(l.typing),d&&Mt(l.cm);for(a=0;a<r.length;a++){var w=void 0;if(l=r[a],c=l.cm,d=c.display,y=c.doc,l.updatedDisplay&&Ls(c,l.update),d.wheelStartX==null||l.scrollTop==null&&l.scrollLeft==null&&!l.scrollToPos||(d.wheelStartX=d.wheelStartY=null),l.scrollTop!=null&&Is(c,l.scrollTop,l.forceScroll),l.scrollLeft!=null&&Qr(c,l.scrollLeft,!0,!0),l.scrollToPos){var $=Be(y,l.scrollToPos.from),B=Be(y,l.scrollToPos.to),q=l.scrollToPos.margin;q==null&&(q=0),c.options.lineWrapping||$!=B||(B=$.sticky=="before"?me($.line,$.ch+1,"before"):$,$=$.ch?me($.line,$.sticky=="before"?$.ch-1:$.ch,"after"):$);for(var te=0;5>te;te++){var ne=!1;w=jt(c,$);var se=B&&B!=$?jt(c,B):w;w={left:Math.min(w.left,se.left),top:Math.min(w.top,se.top)-q,right:Math.max(w.left,se.left),bottom:Math.max(w.bottom,se.bottom)+q},se=kr(c,w);var Re=c.doc.scrollTop,Pe=c.doc.scrollLeft;if(se.scrollTop!=null&&(ki(c,se.scrollTop),1<Math.abs(c.doc.scrollTop-Re)&&(ne=!0)),se.scrollLeft!=null&&(Qr(c,se.scrollLeft),1<Math.abs(c.doc.scrollLeft-Pe)&&(ne=!0)),!ne)break}B=w,Ce(c,"scrollCursorIntoView")||(q=c.display,te=q.sizer.getBoundingClientRect(),$=null,ne=q.wrapper.ownerDocument,0>B.top+te.top?$=!0:B.bottom+te.top>(ne.defaultView.innerHeight||ne.documentElement.clientHeight)&&($=!1),$==null||Rl||(B=f("div","​",null,`position: absolute;
                         top: `+(B.top-q.viewOffset-c.display.lineSpace.offsetTop)+`px;
                         height: `+(B.bottom-B.top+qe(c)+q.barHeight)+`px;
                         left: `+B.left+"px; width: "+Math.max(2,B.right-B.left)+"px;"),c.display.lineSpace.appendChild(B),B.scrollIntoView($),c.display.lineSpace.removeChild(B)))}if(B=l.maybeHiddenMarkers,$=l.maybeUnhiddenMarkers,B)for(q=0;q<B.length;++q)B[q].lines.length||ce(B[q],"hide");if($)for(B=0;B<$.length;++B)$[B].lines.length&&ce($[B],"unhide");d.wrapper.offsetHeight&&(y.scrollTop=c.display.scroller.scrollTop),l.changeObjs&&ce(c,"changes",c,l.changeObjs),l.update&&l.update.finish()}})}function qt(e,r){if(e.curOp)return r();ei(e);try{return r()}finally{ti(e)}}function At(e,r){return function(){if(e.curOp)return r.apply(e,arguments);ei(e);try{return r.apply(e,arguments)}finally{ti(e)}}}function Pt(e){return function(){if(this.curOp)return e.apply(this,arguments);ei(this);try{return e.apply(this,arguments)}finally{ti(this)}}}function _t(e){return function(){var r=this.cm;if(!r||r.curOp)return e.apply(this,arguments);ei(r);try{return e.apply(this,arguments)}finally{ti(r)}}}function qi(e,r){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(r,b(zo,e))}function zo(e){var r=e.doc;if(!(r.highlightFrontier>=e.display.viewTo)){var a=+new Date+e.options.workTime,l=L(e,r.highlightFrontier),c=[];r.iter(l.line,Math.min(r.first+r.size,e.display.viewTo+500),function(d){if(l.line>=e.display.viewFrom){var y=d.styles,w=d.text.length>e.options.maxHighlightLength?H(r.mode,l.state):null,$=x(e,d,l,!0);for(w&&(l.state=w),d.styles=$.styles,w=d.styleClasses,($=$.classes)?d.styleClasses=$:w&&(d.styleClasses=null),$=!y||y.length!=d.styles.length||w!=$&&(!w||!$||w.bgClass!=$.bgClass||w.textClass!=$.textClass),w=0;!$&&w<y.length;++w)$=y[w]!=d.styles[w];$&&c.push(l.line),d.stateAfter=l.save()}else d.text.length<=e.options.maxHighlightLength&&N(e,d.text,l),d.stateAfter=l.line%5==0?l.save():null;if(l.nextLine(),+new Date>a)return qi(e,e.options.workDelay),!0}),r.highlightFrontier=l.line,r.modeFrontier=Math.max(r.modeFrontier,l.line),c.length&&qt(e,function(){for(var d=0;d<c.length;d++)Qt(e,c[d],"text")})}}function es(e,r){var a=e.display,l=e.doc;if(r.editorIsHidden)return gr(e),!1;if(!r.force&&r.visible.from>=a.viewFrom&&r.visible.to<=a.viewTo&&(a.updateLineNumbers==null||a.updateLineNumbers>=a.viewTo)&&a.renderedView==a.view&&z(e)==0)return!1;Ds(e)&&(gr(e),r.dims=gi(e));var c=l.first+l.size,d=Math.max(r.visible.from-e.options.viewportMargin,l.first),y=Math.min(c,r.visible.to+e.options.viewportMargin);return a.viewFrom<d&&20>d-a.viewFrom&&(d=Math.max(l.first,a.viewFrom)),a.viewTo>y&&20>a.viewTo-y&&(y=Math.min(c,a.viewTo)),Or&&(d=Pr(e.doc,d),y=ci(e.doc,y)),l=d!=a.viewFrom||y!=a.viewTo||a.lastWrapHeight!=r.wrapperHeight||a.lastWrapWidth!=r.wrapperWidth,c=e.display,c.view.length==0||d>=c.viewTo||y<=c.viewFrom?(c.view=Sr(e,d,y),c.viewFrom=d):(c.viewFrom>d?c.view=Sr(e,d,c.viewFrom).concat(c.view):c.viewFrom<d&&(c.view=c.view.slice(Jt(e,d))),c.viewFrom=d,c.viewTo<y?c.view=c.view.concat(Sr(e,c.viewTo,y)):c.viewTo>y&&(c.view=c.view.slice(0,Jt(e,y)))),c.viewTo=y,a.viewOffset=Ut(be(e.doc,a.viewFrom)),e.display.mover.style.top=a.viewOffset+"px",y=z(e),!l&&y==0&&!r.force&&a.renderedView==a.view&&(a.updateLineNumbers==null||a.updateLineNumbers>=a.viewTo)?!1:(e.hasFocus()?d=null:(d=O(p(e)))&&v(e.display.lineDiv,d)?(d={activeElt:d},window.getSelection&&(c=p(e).defaultView.getSelection(),c.anchorNode&&c.extend&&v(e.display.lineDiv,c.anchorNode)&&(d.anchorNode=c.anchorNode,d.anchorOffset=c.anchorOffset,d.focusNode=c.focusNode,d.focusOffset=c.focusOffset))):d=null,4<y&&(a.lineDiv.style.display="none"),jo(e,a.updateLineNumbers,r.dims),4<y&&(a.lineDiv.style.display=""),a.renderedView=a.view,(y=d)&&y.activeElt&&y.activeElt!=O(y.activeElt.ownerDocument)&&(y.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(y.activeElt.nodeName)&&y.anchorNode&&v(document.body,y.anchorNode)&&v(document.body,y.focusNode)&&(c=y.activeElt.ownerDocument,d=c.defaultView.getSelection(),c=c.createRange(),c.setEnd(y.anchorNode,y.anchorOffset),c.collapse(!1),d.removeAllRanges(),d.addRange(c),d.extend(y.focusNode,y.focusOffset))),u(a.cursorDiv),u(a.selectionDiv),a.gutters.style.height=a.sizer.style.minHeight=0,l&&(a.lastWrapHeight=r.wrapperHeight,a.lastWrapWidth=r.wrapperWidth,qi(e,400)),a.updateLineNumbers=null,!0)}function Ls(e,r){for(var a=r.viewport,l=!0;;l=!1){if(l&&e.options.lineWrapping&&r.oldDisplayWidth!=Ke(e))l&&(r.visible=Wr(e.display,e.doc,a));else if(a&&a.top!=null&&(a={top:Math.min(e.doc.height+Ee(e.display)-vt(e),a.top)}),r.visible=Wr(e.display,e.doc,a),r.visible.from>=e.display.viewFrom&&r.visible.to<=e.display.viewTo)break;if(!es(e,r))break;Jr(e),l=Ui(e),ve(e),Ei(e,l),is(e,l),r.force=!1}r.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(r.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function ts(e,r){if(r=new Vn(e,r),es(e,r)){Jr(e),Ls(e,r);var a=Ui(e);ve(e),Ei(e,a),is(e,a),r.finish()}}function jo(e,r,a){function l(ne){var se=ne.nextSibling;return Dt&&er&&e.display.currentWheelTarget==ne?ne.style.display="none":ne.parentNode.removeChild(ne),se}var c=e.display,d=e.options.lineNumbers,y=c.lineDiv,w=y.firstChild,$=c.view;c=c.viewFrom;for(var B=0;B<$.length;B++){var q=$[B];if(!q.hidden)if(q.node&&q.node.parentNode==y){for(;w!=q.node;)w=l(w);w=d&&r!=null&&r<=c&&q.lineNumber,q.changes&&(-1<A(q.changes,"gutter")&&(w=!1),Xr(e,q,c,a)),w&&(u(q.lineNumber),q.lineNumber.appendChild(document.createTextNode(Ue(e.options,c)))),w=q.node.nextSibling}else{var te=fr(e,q,c,a);y.insertBefore(te,w)}c+=q.size}for(;w;)w=l(w)}function rs(e){e.sizer.style.marginLeft=e.gutters.offsetWidth+"px",gt(e,"gutterChanged",e)}function is(e,r){e.display.sizer.style.minHeight=r.docHeight+"px",e.display.heightForcer.style.top=r.docHeight+"px",e.display.gutters.style.height=r.docHeight+e.display.barHeight+qe(e)+"px"}function Ps(e){var r=e.display,a=r.view;if(r.alignWidgets||r.gutters.firstChild&&e.options.fixedGutter){for(var l=Fi(r)-r.scroller.scrollLeft+e.doc.scrollLeft,c=r.gutters.offsetWidth,d=l+"px",y=0;y<a.length;y++)if(!a[y].hidden){e.options.fixedGutter&&(a[y].gutter&&(a[y].gutter.style.left=d),a[y].gutterBackground&&(a[y].gutterBackground.style.left=d));var w=a[y].alignable;if(w)for(var $=0;$<w.length;$++)w[$].style.left=d}e.options.fixedGutter&&(r.gutters.style.left=l+c+"px")}}function Ds(e){if(!e.options.lineNumbers)return!1;var r=e.doc;r=Ue(e.options,r.first+r.size-1);var a=e.display;if(r.length!=a.lineNumChars){var l=a.measure.appendChild(f("div",[f("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),c=l.firstChild.offsetWidth;return l=l.offsetWidth-c,a.lineGutter.style.width="",a.lineNumInnerWidth=Math.max(c,a.lineGutter.offsetWidth-l)+1,a.lineNumWidth=a.lineNumInnerWidth+l,a.lineNumChars=a.lineNumInnerWidth?r.length:-1,a.lineGutter.style.width=a.lineNumWidth+"px",rs(e.display),!0}return!1}function ns(e,r){for(var a=[],l=!1,c=0;c<e.length;c++){var d=e[c],y=null;if(typeof d!="string"&&(y=d.style,d=d.className),d=="CodeMirror-linenumbers")if(r)l=!0;else continue;a.push({className:d,style:y})}return r&&!l&&a.push({className:"CodeMirror-linenumbers",style:null}),a}function Ns(e){var r=e.gutters,a=e.gutterSpecs;u(r),e.lineGutter=null;for(var l=0;l<a.length;++l){var c=a[l],d=c.className;c=c.style;var y=r.appendChild(f("div",null,"CodeMirror-gutter "+d));c&&(y.style.cssText=c),d=="CodeMirror-linenumbers"&&(e.lineGutter=y,y.style.width=(e.lineNumWidth||1)+"px")}r.style.display=a.length?"":"none",rs(e)}function Hi(e){Ns(e.display),It(e),Ps(e)}function Vo(e,r,a,l){this.input=a,this.scrollbarFiller=f("div",null,"CodeMirror-scrollbar-filler"),this.scrollbarFiller.setAttribute("cm-not-content","true"),this.gutterFiller=f("div",null,"CodeMirror-gutter-filler"),this.gutterFiller.setAttribute("cm-not-content","true"),this.lineDiv=g("div",null,"CodeMirror-code"),this.selectionDiv=f("div",null,null,"position: relative; z-index: 1"),this.cursorDiv=f("div",null,"CodeMirror-cursors"),this.measure=f("div",null,"CodeMirror-measure"),this.lineMeasure=f("div",null,"CodeMirror-measure"),this.lineSpace=g("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");var c=g("div",[this.lineSpace],"CodeMirror-lines");this.mover=f("div",[c],null,"position: relative"),this.sizer=f("div",[this.mover],"CodeMirror-sizer"),this.sizerWidth=null,this.heightForcer=f("div",null,null,"position: absolute; height: 50px; width: 1px;"),this.gutters=f("div",null,"CodeMirror-gutters"),this.lineGutter=null,this.scroller=f("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll"),this.scroller.setAttribute("tabIndex","-1"),this.wrapper=f("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror"),Hr&&105<=Do&&(this.wrapper.style.clipPath="inset(0px)"),this.wrapper.setAttribute("translate","no"),tt&&8>mt&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0),Dt||_r&&Qi||(this.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(this.wrapper):e(this.wrapper)),this.reportedViewFrom=this.reportedViewTo=this.viewFrom=this.viewTo=r.first,this.view=[],this.externalMeasured=this.renderedView=null,this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0,this.updateLineNumbers=null,this.nativeBarWidth=this.barHeight=this.barWidth=0,this.scrollbarsClipped=!1,this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null,this.alignWidgets=!1,this.maxLine=this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null,this.maxLineLength=0,this.maxLineChanged=!1,this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null,this.shift=!1,this.activeTouch=this.selForContextMenu=null,this.gutterSpecs=ns(l.gutters,l.lineNumbers),Ns(this),a.init(this)}function Bs(e){var r=e.wheelDeltaX,a=e.wheelDeltaY;return r==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(r=e.detail),a==null&&e.detail&&e.axis==e.VERTICAL_AXIS?a=e.detail:a==null&&(a=e.wheelDelta),{x:r,y:a}}function Ko(e){return e=Bs(e),e.x*=Ir,e.y*=Ir,e}function Fs(e,r){Hr&&Do==102&&(e.display.chromeScrollHack==null?e.display.sizer.style.pointerEvents="none":clearTimeout(e.display.chromeScrollHack),e.display.chromeScrollHack=setTimeout(function(){e.display.chromeScrollHack=null,e.display.sizer.style.pointerEvents=""},100));var a=Bs(r),l=a.x;a=a.y;var c=Ir;r.deltaMode===0&&(l=r.deltaX,a=r.deltaY,c=1);var d=e.display,y=d.scroller,w=y.scrollWidth>y.clientWidth,$=y.scrollHeight>y.clientHeight;if(l&&w||a&&$){if(a&&er&&Dt){w=r.target;var B=d.view;e:for(;w!=y;w=w.parentNode)for(var q=0;q<B.length;q++)if(B[q].node==w){e.display.currentWheelTarget=w;break e}}!l||_r||or||c==null?(a&&c!=null&&(c*=a,$=e.doc.scrollTop,w=$+d.wrapper.clientHeight,0>c?$=Math.max(0,$+c-50):w=Math.min(e.doc.height,w+c+50),ts(e,{top:$,bottom:w})),20>Kn&&r.deltaMode!==0&&(d.wheelStartX==null?(d.wheelStartX=y.scrollLeft,d.wheelStartY=y.scrollTop,d.wheelDX=l,d.wheelDY=a,setTimeout(function(){if(d.wheelStartX!=null){var te=y.scrollLeft-d.wheelStartX,ne=y.scrollTop-d.wheelStartY;te=ne&&d.wheelDY&&ne/d.wheelDY||te&&d.wheelDX&&te/d.wheelDX,d.wheelStartX=d.wheelStartY=null,te&&(Ir=(Ir*Kn+te)/(Kn+1),++Kn)}},200)):(d.wheelDX+=l,d.wheelDY+=a))):(a&&$&&ki(e,Math.max(0,y.scrollTop+a*c)),Qr(e,Math.max(0,y.scrollLeft+l*c)),(!a||a&&$)&&ee(r),d.wheelStartX=null)}}function sr(e,r,a){e=e&&e.options.selectionsMayTouch,a=r[a],r.sort(function($,B){return De($.from(),B.from())}),a=A(r,a);for(var l=1;l<r.length;l++){var c=r[l],d=r[l-1],y=De(d.to(),c.from());if(e&&!c.empty()?0<y:0<=y){y=st(d.from(),c.from());var w=Tt(d.to(),c.to());c=d.empty()?c.from()==c.head:d.from()==d.head,l<=a&&--a,r.splice(--l,2,new nt(c?w:y,c?y:w))}}return new Kt(r,a)}function Ar(e,r){return new Kt([new nt(e,r||e)],0)}function Ur(e){return e.text?me(e.from.line+e.text.length-1,M(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function Gs(e,r){if(0>De(e,r.from))return e;if(0>=De(e,r.to))return Ur(r);var a=e.line+r.text.length-(r.to.line-r.from.line)-1,l=e.ch;return e.line==r.to.line&&(l+=Ur(r).ch-r.to.ch),me(a,l)}function ss(e,r){for(var a=[],l=0;l<e.sel.ranges.length;l++){var c=e.sel.ranges[l];a.push(new nt(Gs(c.anchor,r),Gs(c.head,r)))}return sr(e.cm,a,e.sel.primIndex)}function Ws(e,r,a){return e.line==r.line?me(a.line,e.ch-r.ch+a.ch):me(a.line+(e.line-r.line),e.ch)}function os(e){e.doc.mode=Oe(e.options,e.doc.modeOption),zi(e)}function zi(e){e.doc.iter(function(r){r.stateAfter&&(r.stateAfter=null),r.styles&&(r.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,qi(e,100),e.state.modeGen++,e.curOp&&It(e)}function ks(e,r){return r.from.ch==0&&r.to.ch==0&&M(r.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function ls(e,r,a,l){function c(Re,Pe,Ve){Re.text=Pe,Re.stateAfter&&(Re.stateAfter=null),Re.styles&&(Re.styles=null),Re.order!=null&&(Re.order=null),ui(Re),Lr(Re,Ve),Pe=l?l(Re):1,Pe!=Re.height&&Xe(Re,Pe),gt(Re,"change",Re,r)}function d(Re,Pe){for(var Ve=[];Re<Pe;++Re)Ve.push(new Mi($[Re],a?a[Re]:null,l));return Ve}var y=r.from,w=r.to,$=r.text,B=be(e,y.line),q=be(e,w.line),te=M($),ne=a?a[$.length-1]:null,se=w.line-y.line;r.full?(e.insert(0,d(0,$.length)),e.remove($.length,e.size-$.length)):ks(e,r)?(w=d(0,$.length-1),c(q,q.text,ne),se&&e.remove(y.line,se),w.length&&e.insert(y.line,w)):B==q?$.length==1?c(B,B.text.slice(0,y.ch)+te+B.text.slice(w.ch),ne):(se=d(1,$.length-1),se.push(new Mi(te+B.text.slice(w.ch),ne,l)),c(B,B.text.slice(0,y.ch)+$[0],a?a[0]:null),e.insert(y.line+1,se)):$.length==1?(c(B,B.text.slice(0,y.ch)+$[0]+q.text.slice(w.ch),a?a[0]:null),e.remove(y.line+1,se)):(c(B,B.text.slice(0,y.ch)+$[0],a?a[0]:null),c(q,te+q.text.slice(w.ch),ne),ne=d(1,$.length-1),1<se&&e.remove(y.line+1,se-1),e.insert(y.line+1,ne)),gt(e,"change",e,r)}function qr(e,r,a){function l(c,d,y){if(c.linked)for(var w=0;w<c.linked.length;++w){var $=c.linked[w];if($.doc!=d){var B=y&&$.sharedHist;(!a||B)&&(r($.doc,B),l($.doc,c,B))}}}l(e,null,!0)}function Us(e,r){if(r.cm)throw Error("This document is already in use.");e.doc=r,r.cm=e,mi(e),os(e),qs(e),e.options.direction=r.direction,e.options.lineWrapping||Kr(e),e.options.mode=r.modeOption,It(e)}function qs(e){(e.doc.direction=="rtl"?E:ii)(e.display.lineDiv,"CodeMirror-rtl")}function Yo(e){qt(e,function(){qs(e),It(e)})}function On(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function as(e,r){var a={from:Et(r.from),to:Ur(r),text:Ne(e,r.from,r.to)};return js(e,a,r.from.line,r.to.line+1),qr(e,function(l){return js(l,a,r.from.line,r.to.line+1)},!0),a}function Hs(e){for(;e.length&&M(e).ranges;)e.pop()}function zs(e,r,a,l){var c=e.history;c.undone.length=0;var d=+new Date,y;if(y=c.lastOp==l||c.lastOrigin==r.origin&&r.origin&&(r.origin.charAt(0)=="+"&&c.lastModTime>d-(e.cm?e.cm.options.historyEventDelay:500)||r.origin.charAt(0)=="*")){if(c.lastOp==l){Hs(c.done);var w=M(c.done)}else c.done.length&&!M(c.done).ranges?w=M(c.done):1<c.done.length&&!c.done[c.done.length-2].ranges?(c.done.pop(),w=M(c.done)):w=void 0;y=w}if(y){var $=M(w.changes);De(r.from,r.to)==0&&De(r.from,$.to)==0?$.to=Ur(r):w.changes.push(as(e,r))}else for((w=M(c.done))&&w.ranges||In(e.sel,c.done),w={changes:[as(e,r)],generation:c.generation},c.done.push(w);c.done.length>c.undoDepth;)c.done.shift(),c.done[0].ranges||c.done.shift();c.done.push(a),c.generation=++c.maxGeneration,c.lastModTime=c.lastSelTime=d,c.lastOp=c.lastSelOp=l,c.lastOrigin=c.lastSelOrigin=r.origin,$||ce(e,"historyAdded")}function In(e,r){var a=M(r);a&&a.ranges&&a.equals(e)||r.push(e)}function js(e,r,a,l){var c=r["spans_"+e.id],d=0;e.iter(Math.max(e.first,a),Math.min(e.first+e.size,l),function(y){y.markedSpans&&((c||(c=r["spans_"+e.id]={}))[d]=y.markedSpans),++d})}function Vs(e,r){var a;if(a=r["spans_"+e.id]){for(var l=[],c=0;c<r.text.length;++c){var d=l,y=d.push,w=void 0,$=a[c];if($){for(var B=0;B<$.length;++B)$[B].marker.explicitlyCleared?w||(w=$.slice(0,B)):w&&w.push($[B]);w=w?w.length?w:null:$}else w=null;y.call(d,w)}a=l}else a=null;if(e=it(e,r),!a)return e;if(!e)return a;for(r=0;r<a.length;++r)if(l=a[r],c=e[r],l&&c)e:for(d=0;d<c.length;++d){for(y=c[d],w=0;w<l.length;++w)if(l[w].marker==y.marker)continue e;l.push(y)}else c&&(a[r]=c);return a}function Si(e,r,a){for(var l=[],c=0;c<e.length;++c){var d=e[c];if(d.ranges)l.push(a?Kt.prototype.deepCopy.call(d):d);else{d=d.changes;var y=[];l.push({changes:y});for(var w=0;w<d.length;++w){var $=d[w],B;if(y.push({from:$.from,to:$.to,text:$.text}),r)for(var q in $)(B=q.match(/^spans_(\d+)$/))&&-1<A(r,Number(B[1]))&&(M(y)[q]=$[q],delete $[q])}}}return l}function us(e,r,a,l){return l?(e=e.anchor,a&&(l=0>De(r,e),l!=0>De(a,e)?(e=r,r=a):l!=0>De(r,a)&&(r=a)),new nt(e,r)):new nt(a||r,r)}function Mn(e,r,a,l,c){c==null&&(c=e.cm&&(e.cm.display.shift||e.extend)),Ot(e,new Kt([us(e.sel.primary(),r,a,c)],0),l)}function Ks(e,r,a){for(var l=[],c=e.cm&&(e.cm.display.shift||e.extend),d=0;d<e.sel.ranges.length;d++)l[d]=us(e.sel.ranges[d],r[d],null,c);r=sr(e.cm,l,e.sel.primIndex),Ot(e,r,a)}function cs(e,r,a,l){var c=e.sel.ranges.slice(0);c[r]=a,Ot(e,sr(e.cm,c,e.sel.primIndex),l)}function Xo(e,r,a){return a={ranges:r.ranges,update:function(l){this.ranges=[];for(var c=0;c<l.length;c++)this.ranges[c]=new nt(Be(e,l[c].anchor),Be(e,l[c].head))},origin:a&&a.origin},ce(e,"beforeSelectionChange",e,a),e.cm&&ce(e.cm,"beforeSelectionChange",e.cm,a),a.ranges!=r.ranges?sr(e.cm,a.ranges,a.ranges.length-1):r}function Ys(e,r,a){var l=e.history.done,c=M(l);c&&c.ranges?(l[l.length-1]=r,$n(e,r,a)):Ot(e,r,a)}function Ot(e,r,a){$n(e,r,a),r=e.sel;var l=e.cm?e.cm.curOp.id:NaN,c=e.history,d=a&&a.origin,y;if(!(y=l==c.lastSelOp)&&(y=d&&c.lastSelOrigin==d)&&!(y=c.lastModTime==c.lastSelTime&&c.lastOrigin==d)){y=M(c.done);var w=d.charAt(0);y=w=="*"||w=="+"&&y.ranges.length==r.ranges.length&&y.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}y?c.done[c.done.length-1]=r:In(r,c.done),c.lastSelTime=+new Date,c.lastSelOrigin=d,c.lastSelOp=l,a&&a.clearRedo!==!1&&Hs(c.undone)}function $n(e,r,a){(Ie(e,"beforeSelectionChange")||e.cm&&Ie(e.cm,"beforeSelectionChange"))&&(r=Xo(e,r,a));var l=a&&a.bias||(0>De(r.primary().head,e.sel.primary().head)?-1:1);Xs(e,Js(e,r,l,!0)),a&&a.scroll===!1||!e.cm||e.cm.getOption("readOnly")=="nocursor"||yi(e.cm)}function Xs(e,r){r.equals(e.sel)||(e.sel=r,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,pe(e.cm)),gt(e,"cursorActivity",e))}function Zs(e){Xs(e,Js(e,e.sel,null,!1))}function Js(e,r,a,l){for(var c,d=0;d<r.ranges.length;d++){var y=r.ranges[d],w=r.ranges.length==e.sel.ranges.length&&e.sel.ranges[d],$=Ln(e,y.anchor,w&&w.anchor,a,l);w=y.head==y.anchor?$:Ln(e,y.head,w&&w.head,a,l),(c||$!=y.anchor||w!=y.head)&&(c||(c=r.ranges.slice(0,d)),c[d]=new nt($,w))}return c?sr(e.cm,c,r.primIndex):r}function wi(e,r,a,l,c){var d=be(e,r.line);if(d.markedSpans)for(var y=0;y<d.markedSpans.length;++y){var w=d.markedSpans[y],$=w.marker,B="selectLeft"in $?!$.selectLeft:$.inclusiveLeft,q="selectRight"in $?!$.selectRight:$.inclusiveRight;if((w.from==null||(B?w.from<=r.ch:w.from<r.ch))&&(w.to==null||(q?w.to>=r.ch:w.to>r.ch))){if(c&&(ce($,"beforeCursorEnter"),$.explicitlyCleared))if(d.markedSpans){--y;continue}else break;if($.atomic)return a&&(y=$.find(0>l?1:-1),w=void 0,(0>l?q:B)&&(y=Qs(e,y,-l,y&&y.line==r.line?d:null)),y&&y.line==r.line&&(w=De(y,a))&&(0>l?0>w:0<w))?wi(e,y,r,l,c):(a=$.find(0>l?-1:1),(0>l?B:q)&&(a=Qs(e,a,l,a.line==r.line?d:null)),a?wi(e,a,r,l,c):null)}}return r}function Ln(e,r,a,l,c){return l=l||1,r=wi(e,r,a,l,c)||!c&&wi(e,r,a,l,!0)||wi(e,r,a,-l,c)||!c&&wi(e,r,a,-l,!0),r||(e.cantEdit=!0,me(e.first,0))}function Qs(e,r,a,l){return 0>a&&r.ch==0?r.line>e.first?Be(e,me(r.line-1)):null:0<a&&r.ch==(l||be(e,r.line)).text.length?r.line<e.first+e.size-1?me(r.line+1,0):null:new me(r.line,r.ch+a)}function eo(e){e.setSelection(me(e.firstLine(),0),me(e.lastLine()),vr)}function to(e,r,a){var l={canceled:!1,from:r.from,to:r.to,text:r.text,origin:r.origin,cancel:function(){return l.canceled=!0}};return a&&(l.update=function(c,d,y,w){c&&(l.from=Be(e,c)),d&&(l.to=Be(e,d)),y&&(l.text=y),w!==void 0&&(l.origin=w)}),ce(e,"beforeChange",e,l),e.cm&&ce(e.cm,"beforeChange",e.cm,l),l.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:l.from,to:l.to,text:l.text,origin:l.origin}}function Ri(e,r,a){if(e.cm){if(!e.cm.curOp)return At(e.cm,Ri)(e,r,a);if(e.cm.state.suppressEdits)return}if(!((Ie(e,"beforeChange")||e.cm&&Ie(e.cm,"beforeChange"))&&(r=to(e,r,!0),!r)))if(a=Fo&&!a&&tr(e,r.from,r.to))for(var l=a.length-1;0<=l;--l)ro(e,{from:a[l].from,to:a[l].to,text:l?[""]:r.text,origin:r.origin});else ro(e,r)}function ro(e,r){if(r.text.length!=1||r.text[0]!=""||De(r.from,r.to)!=0){var a=ss(e,r);zs(e,r,a,e.cm?e.cm.curOp.id:NaN),ji(e,r,a,it(e,r));var l=[];qr(e,function(c,d){d||A(l,c.history)!=-1||(oo(c.history,r),l.push(c.history)),ji(c,r,null,it(c,r))})}}function Pn(e,r,a){var l=e.cm&&e.cm.state.suppressEdits;if(!l||a){for(var c=e.history,d,y=e.sel,w=r=="undo"?c.done:c.undone,$=r=="undo"?c.undone:c.done,B=0;B<w.length&&(d=w[B],a?!d.ranges||d.equals(e.sel):d.ranges);B++);if(B!=w.length){for(c.lastOrigin=c.lastSelOrigin=null;;)if(d=w.pop(),d.ranges){if(In(d,$),a&&!d.equals(e.sel)){Ot(e,d,{clearRedo:!1});return}y=d}else{if(l){w.push(d);return}break}var q=[];In(y,$),$.push({changes:q,generation:c.generation}),c.generation=d.generation||++c.maxGeneration;var te=Ie(e,"beforeChange")||e.cm&&Ie(e.cm,"beforeChange");for(a=function(ne){var se=d.changes[ne];if(se.origin=r,te&&!to(e,se,!1))return w.length=0,{};q.push(as(e,se));var Re=ne?ss(e,se):M(w);ji(e,se,Re,Vs(e,se)),!ne&&e.cm&&e.cm.scrollIntoView({from:se.from,to:Ur(se)});var Pe=[];qr(e,function(Ve,Ct){Ct||A(Pe,Ve.history)!=-1||(oo(Ve.history,se),Pe.push(Ve.history)),ji(Ve,se,null,Vs(Ve,se))})},l=d.changes.length-1;0<=l;--l)if(c=a(l))return c.v}}}function io(e,r){if(r!=0&&(e.first+=r,e.sel=new Kt(j(e.sel.ranges,function(c){return new nt(me(c.anchor.line+r,c.anchor.ch),me(c.head.line+r,c.head.ch))}),e.sel.primIndex),e.cm)){It(e.cm,e.first,e.first-r,r);for(var a=e.cm.display,l=a.viewFrom;l<a.viewTo;l++)Qt(e.cm,l,"gutter")}}function ji(e,r,a,l){if(e.cm&&!e.cm.curOp)return At(e.cm,ji)(e,r,a,l);if(r.to.line<e.first)io(e,r.text.length-1-(r.to.line-r.from.line));else if(!(r.from.line>e.lastLine())){if(r.from.line<e.first){var c=r.text.length-1-(e.first-r.from.line);io(e,c),r={from:me(e.first,0),to:me(r.to.line+c,r.to.ch),text:[M(r.text)],origin:r.origin}}c=e.lastLine(),r.to.line>c&&(r={from:r.from,to:me(c,be(e,c).text.length),text:[r.text[0]],origin:r.origin}),r.removed=Ne(e,r.from,r.to),a||(a=ss(e,r)),e.cm?Zo(e.cm,r,l):ls(e,r,l),$n(e,a,vr),e.cantEdit&&Ln(e,me(e.firstLine(),0))&&(e.cantEdit=!1)}}function Zo(e,r,a){var l=e.doc,c=e.display,d=r.from,y=r.to,w=!1,$=d.line;e.options.lineWrapping||($=xe(Bt(be(l,d.line))),l.iter($,y.line+1,function(B){if(B==c.maxLine)return w=!0})),-1<l.sel.contains(r.from,r.to)&&pe(e),ls(l,r,a,Cn(e)),e.options.lineWrapping||(l.iter($,d.line+r.text.length,function(B){var q=ar(B);q>c.maxLineLength&&(c.maxLine=B,c.maxLineLength=q,c.maxLineChanged=!0,w=!1)}),w&&(e.curOp.updateMaxLine=!0)),He(l,d.line),qi(e,400),a=r.text.length-(y.line-d.line)-1,r.full?It(e):d.line!=y.line||r.text.length!=1||ks(e.doc,r)?It(e,d.line,y.line+1,a):Qt(e,d.line,"text"),a=Ie(e,"changes"),((l=Ie(e,"change"))||a)&&(r={from:d,to:y,text:r.text,removed:r.removed,origin:r.origin},l&&gt(e,"change",e,r),a&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(r)),e.display.selForContextMenu=null}function Ti(e,r,a,l,c){l||(l=a),0>De(l,a)&&(l=[l,a],a=l[0],l=l[1]),typeof r=="string"&&(r=e.splitLines(r)),Ri(e,{from:a,to:l,text:r,origin:c})}function no(e,r,a,l){a<e.line?e.line+=l:r<e.line&&(e.line=r,e.ch=0)}function so(e,r,a,l){for(var c=0;c<e.length;++c){var d=e[c],y=!0;if(d.ranges)for(d.copied||(d=e[c]=d.deepCopy(),d.copied=!0),y=0;y<d.ranges.length;y++)no(d.ranges[y].anchor,r,a,l),no(d.ranges[y].head,r,a,l);else{for(var w=0;w<d.changes.length;++w){var $=d.changes[w];if(a<$.from.line)$.from=me($.from.line+l,$.from.ch),$.to=me($.to.line+l,$.to.ch);else if(r<=$.to.line){y=!1;break}}y||(e.splice(0,c+1),c=0)}}}function oo(e,r){var a=r.from.line,l=r.to.line;r=r.text.length-(l-a)-1,so(e.done,a,l,r),so(e.undone,a,l,r)}function Vi(e,r,a,l){var c=r,d=r;return typeof r=="number"?d=be(e,Math.max(e.first,Math.min(r,e.first+e.size-1))):c=xe(r),c==null?null:(l(d,c)&&e.cm&&Qt(e.cm,c,a),d)}function Ki(e){this.lines=e,this.parent=null;for(var r=0,a=0;a<e.length;++a)e[a].parent=this,r+=e[a].height;this.height=r}function Yi(e){this.children=e;for(var r=0,a=0,l=0;l<e.length;++l){var c=e[l];r+=c.chunkSize(),a+=c.height,c.parent=this}this.size=r,this.height=a,this.parent=null}function Jo(e,r,a,l){var c=new ln(e,a,l),d=e.cm;return d&&c.noHScroll&&(d.display.alignWidgets=!0),Vi(e,r,"widget",function(y){var w=y.widgets||(y.widgets=[]);return c.insertAt==null?w.push(c):w.splice(Math.min(w.length,Math.max(0,c.insertAt)),0,c),c.line=y,d&&!Ft(e,y)&&(w=Ut(y)<e.scrollTop,Xe(y,y.height+D(c)),w&&An(d,c.height),d.curOp.forceUpdate=!0),!0}),d&&gt(d,"lineWidgetAdded",d,c,typeof r=="number"?r:xe(r)),c}function bi(e,r,a,l,c){if(l&&l.shared)return Qo(e,r,a,l,c);if(e.cm&&!e.cm.curOp)return At(e.cm,bi)(e,r,a,l,c);var d=new jr(e,c);if(c=De(r,a),l&&C(l,d,!1),0<c||c==0&&d.clearWhenEmpty!==!1)return d;if(d.replacedWith&&(d.collapsed=!0,d.widgetNode=g("span",[d.replacedWith],"CodeMirror-widget"),l.handleMouseEvents||d.widgetNode.setAttribute("cm-ignore-events","true"),l.insertLeft&&(d.widgetNode.insertLeft=!0)),d.collapsed){if(yr(e,r.line,r,a,d)||r.line!=a.line&&yr(e,a.line,r,a,d))throw Error("Inserting collapsed marker partially overlapping an existing one");Or=!0}d.addToHistory&&zs(e,{from:r,to:a,origin:"markText"},e.sel,NaN);var y=r.line,w=e.cm,$;if(e.iter(y,a.line+1,function(B){w&&d.collapsed&&!w.options.lineWrapping&&Bt(B)==w.display.maxLine&&($=!0),d.collapsed&&y!=r.line&&Xe(B,0);var q=new Je(d,y==r.line?r.ch:null,y==a.line?a.ch:null),te=e.cm&&e.cm.curOp;(te=te&&window.WeakSet&&(te.markedSpans||(te.markedSpans=new WeakSet)))&&B.markedSpans&&te.has(B.markedSpans)?B.markedSpans.push(q):(B.markedSpans=B.markedSpans?B.markedSpans.concat([q]):[q],te&&te.add(B.markedSpans)),q.marker.attachLine(B),++y}),d.collapsed&&e.iter(r.line,a.line+1,function(B){Ft(e,B)&&Xe(B,0)}),d.clearOnEnter&&je(d,"beforeCursorEnter",function(){return d.clear()}),d.readOnly&&(Fo=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),d.collapsed&&(d.id=++ko,d.atomic=!0),w){if($&&(w.curOp.updateMaxLine=!0),d.collapsed)It(w,r.line,a.line+1);else if(d.className||d.startStyle||d.endStyle||d.css||d.attributes||d.title)for(l=r.line;l<=a.line;l++)Qt(w,l,"text");d.atomic&&Zs(w.doc),gt(w,"markerAdded",w,d)}return d}function Qo(e,r,a,l,c){l=C(l),l.shared=!1;var d=[bi(e,r,a,l,c)],y=d[0],w=l.widgetNode;return qr(e,function($){w&&(l.widgetNode=w.cloneNode(!0)),d.push(bi($,Be($,r),Be($,a),l,c));for(var B=0;B<$.linked.length;++B)if($.linked[B].isParent)return;y=M(d)}),new an(d,y)}function lo(e){return e.findMarks(me(e.first,0),e.clipPos(me(e.lastLine())),function(r){return r.parent})}function el(e){for(var r=function(l){l=e[l];var c=[l.primary.doc];qr(l.primary.doc,function(w){return c.push(w)});for(var d=0;d<l.markers.length;d++){var y=l.markers[d];A(c,y.doc)==-1&&(y.parent=null,l.markers.splice(d--,1))}},a=0;a<e.length;a++)r(a)}function tl(e){var r=this;if(ao(r),!Ce(r,e)&&!V(r.display,e)){ee(e),tt&&(Uo=+new Date);var a=br(r,e,!0),l=e.dataTransfer.files;if(a&&!r.isReadOnly())if(l&&l.length&&window.FileReader&&window.File)for(var c=l.length,d=Array(c),y=0,w=function(){++y==c&&At(r,function(){a=Be(r.doc,a);var q={from:a,to:a,text:r.doc.splitLines(d.filter(function(te){return te!=null}).join(r.doc.lineSeparator())),origin:"paste"};Ri(r.doc,q),Ys(r.doc,Ar(Be(r.doc,a),Be(r.doc,Ur(q))))})()},$=function(q,te){if(r.options.allowDropFileTypes&&A(r.options.allowDropFileTypes,q.type)==-1)w();else{var ne=new FileReader;ne.onerror=function(){return w()},ne.onload=function(){var se=ne.result;/[\x00-\x08\x0e-\x1f]{2}/.test(se)||(d[te]=se),w()},ne.readAsText(q)}},B=0;B<l.length;B++)$(l[B],B);else if(r.state.draggingText&&-1<r.doc.sel.contains(a))r.state.draggingText(e),setTimeout(function(){return r.display.input.focus()},20);else try{if($=e.dataTransfer.getData("Text")){if(r.state.draggingText&&!r.state.draggingText.copy&&(B=r.listSelections()),$n(r.doc,Ar(a,a)),B)for(l=0;l<B.length;++l)Ti(r.doc,"",B[l].anchor,B[l].head,"drag");r.replaceSelection($,"around","paste"),r.display.input.focus()}}catch{}}}function ao(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function uo(e){if(document.getElementsByClassName){for(var r=document.getElementsByClassName("CodeMirror"),a=[],l=0;l<r.length;l++){var c=r[l].CodeMirror;c&&a.push(c)}a.length&&a[0].operation(function(){for(var d=0;d<a.length;d++)e(a[d])})}}function rl(){var e;je(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,uo(il)},100))}),je(window,"blur",function(){return uo(Cr)})}function il(e){var r=e.display;r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null,r.scrollbarsClipped=!1,e.setSize()}function nl(e){var r=e.split(/-(?!$)/);e=r[r.length-1];for(var a,l,c,d,y=0;y<r.length-1;y++){var w=r[y];if(/^(cmd|meta|m)$/i.test(w))d=!0;else if(/^a(lt)?$/i.test(w))a=!0;else if(/^(c|ctrl|control)$/i.test(w))l=!0;else if(/^s(hift)?$/i.test(w))c=!0;else throw Error("Unrecognized modifier name: "+w)}return a&&(e="Alt-"+e),l&&(e="Ctrl-"+e),d&&(e="Cmd-"+e),c&&(e="Shift-"+e),e}function sl(e){var r={},a;for(a in e)if(e.hasOwnProperty(a)){var l=e[a];if(!/^(name|fallthrough|(de|at)tach)$/.test(a)){if(l!="...")for(var c=j(a.split(" "),nl),d=0;d<c.length;d++){if(d==c.length-1)var y=c.join(" "),w=l;else y=c.slice(0,d+1).join(" "),w="...";var $=r[y];if(!$)r[y]=w;else if($!=w)throw Error("Inconsistent bindings for "+y)}delete e[a]}}for(var B in r)e[B]=r[B];return e}function Ci(e,r,a,l){r=Dn(r);var c=r.call?r.call(e,l):r[e];if(c===!1)return"nothing";if(c==="...")return"multi";if(c!=null&&a(c))return"handled";if(r.fallthrough){if(Object.prototype.toString.call(r.fallthrough)!="[object Array]")return Ci(e,r.fallthrough,a,l);for(c=0;c<r.fallthrough.length;c++){var d=Ci(e,r.fallthrough[c],a,l);if(d)return d}}}function co(e){return e=typeof e=="string"?e:Vr[e.keyCode],e=="Ctrl"||e=="Alt"||e=="Shift"||e=="Mod"}function ho(e,r,a){var l=e;return r.altKey&&l!="Alt"&&(e="Alt-"+e),(No?r.metaKey:r.ctrlKey)&&l!="Ctrl"&&(e="Ctrl-"+e),(No?r.ctrlKey:r.metaKey)&&l!="Mod"&&(e="Cmd-"+e),!a&&r.shiftKey&&l!="Shift"&&(e="Shift-"+e),e}function fo(e,r){if(or&&e.keyCode==34&&e.char)return!1;var a=Vr[e.keyCode];return a==null||e.altGraphKey?!1:(e.keyCode==3&&e.code&&(a=e.code),ho(a,e,r))}function Dn(e){return typeof e=="string"?hn[e]:e}function Ai(e,r){for(var a=e.doc.sel.ranges,l=[],c=0;c<a.length;c++){for(var d=r(a[c]);l.length&&0>=De(d.from,M(l).to);){var y=l.pop();if(0>De(y.from,d.from)){d.from=y.from;break}}l.push(d)}qt(e,function(){for(var w=l.length-1;0<=w;w--)Ti(e.doc,"",l[w].from,l[w].to,"+delete");yi(e)})}function hs(e,r,a){return r=ie(e.text,r+a,a),0>r||r>e.text.length?null:r}function fs(e,r,a){return e=hs(e,r.ch,a),e==null?null:new me(r.line,e,0>a?"after":"before")}function ds(e,r,a,l,c){if(e&&(r.doc.direction=="rtl"&&(c=-c),e=Te(a,r.doc.direction))){e=0>c?M(e):e[0];var d=0>c==(e.level==1)?"after":"before";if(0<e.level||r.doc.direction=="rtl"){var y=Rr(r,a),w=0>c?a.text.length-1:0,$=zt(r,y,w).top;w=ue(function(B){return zt(r,y,B).top==$},0>c==(e.level==1)?e.from:e.to-1,w),d=="before"&&(w=hs(a,w,1))}else w=0>c?e.to:e.from;return new me(l,w,d)}return new me(l,0>c?a.text.length:0,0>c?"before":"after")}function ol(e,r,a,l){var c=Te(r,e.doc.direction);if(!c)return fs(r,a,l);a.ch>=r.text.length?(a.ch=r.text.length,a.sticky="before"):0>=a.ch&&(a.ch=0,a.sticky="after");var d=we(c,a.ch,a.sticky),y=c[d];if(e.doc.direction=="ltr"&&y.level%2==0&&(0<l?y.to>a.ch:y.from<a.ch))return fs(r,a,l);var w=function(se,Re){return hs(r,se instanceof me?se.ch:se,Re)},$,B=function(se){return e.options.lineWrapping?($=$||Rr(e,r),Tn(e,r,$,se)):{begin:0,end:r.text.length}},q=B(a.sticky=="before"?w(a,-1):a.ch);if(e.doc.direction=="rtl"||y.level==1){var te=y.level==1==0>l,ne=w(a,te?1:-1);if(ne!=null&&(te?ne<=y.to&&ne<=q.end:ne>=y.from&&ne>=q.begin))return new me(a.line,ne,te?"before":"after")}return y=function(se,Re,Pe){for(var Ve=function(ot,ht){return ht?new me(a.line,w(ot,1),"before"):new me(a.line,ot,"after")};0<=se&&se<c.length;se+=Re){var Ct=c[se],ke=0<Re==(Ct.level!=1),ct=ke?Pe.begin:w(Pe.end,-1);if(Ct.from<=ct&&ct<Ct.to||(ct=ke?Ct.from:w(Ct.to,-1),Pe.begin<=ct&&ct<Pe.end))return Ve(ct,ke)}},(d=y(d+l,l,q))?d:(q=0<l?q.end:w(q.begin,-1),q==null||0<l&&q==r.text.length||!(d=y(0<l?0:c.length-1,l,B(q)))?null:d)}function po(e,r){var a=be(e.doc,r),l=Bt(a);return l!=a&&(r=xe(l)),ds(!0,e,l,r,1)}function go(e,r){var a=po(e,r.line),l=be(e.doc,a.line);return e=Te(l,e.doc.direction),e&&e[0].level!=0?a:(l=Math.max(a.ch,l.text.search(/\S/)),me(a.line,r.line==a.line&&r.ch<=l&&r.ch?0:l,a.sticky))}function Nn(e,r,a){if(typeof r=="string"&&(r=dn[r],!r))return!1;e.display.input.ensurePolled();var l=e.display.shift,c=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),a&&(e.display.shift=!1),c=r(e)!=qn}finally{e.display.shift=l,e.state.suppressEdits=!1}return c}function Xi(e,r,a,l){var c=e.state.keySeq;if(c){if(co(r))return"handled";if(/'$/.test(r)?e.state.keySeq=null:Nl.set(50,function(){e.state.keySeq==c&&(e.state.keySeq=null,e.display.input.reset())}),mo(e,c+" "+r,a,l))return!0}return mo(e,r,a,l)}function mo(e,r,a,l){e:{for(var c=0;c<e.state.keyMaps.length;c++){var d=Ci(r,e.state.keyMaps[c],l,e);if(d){l=d;break e}}l=e.options.extraKeys&&Ci(r,e.options.extraKeys,l,e)||Ci(r,e.options.keyMap,l,e)}return l=="multi"&&(e.state.keySeq=r),l=="handled"&&gt(e,"keyHandled",e,r,a),(l=="handled"||l=="multi")&&(ee(a),Vt(e)),!!l}function vo(e,r){var a=fo(r,!0);return a?r.shiftKey&&!e.state.keySeq?Xi(e,"Shift-"+a,r,function(l){return Nn(e,l,!0)})||Xi(e,a,r,function(l){if(typeof l=="string"?/^go[A-Z]/.test(l):l.motion)return Nn(e,l)}):Xi(e,a,r,function(l){return Nn(e,l)}):!1}function ll(e,r,a){return Xi(e,"'"+a+"'",r,function(l){return Nn(e,l,!0)})}function xo(e){if((!e.target||e.target==this.display.input.getField())&&(this.curOp.focus=O(p(this)),!Ce(this,e))){tt&&11>mt&&e.keyCode==27&&(e.returnValue=!1);var r=e.keyCode;this.display.shift=r==16||e.shiftKey;var a=vo(this,e);or&&(Ts=a?r:null,!a&&r==88&&!Ml&&(er?e.metaKey:e.ctrlKey)&&this.replaceSelection("",null,"cut")),_r&&!er&&!a&&r==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),r!=18||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||al(this)}}function al(e){function r(l){l.keyCode!=18&&l.altKey||(ii(a,"CodeMirror-crosshair"),he(document,"keyup",r),he(document,"mouseover",r))}var a=e.display.lineDiv;E(a,"CodeMirror-crosshair"),je(document,"keyup",r),je(document,"mouseover",r)}function yo(e){e.keyCode==16&&(this.doc.sel.shift=!1),Ce(this,e)}function Eo(e){if(!(e.target&&e.target!=this.display.input.getField()||V(this.display,e)||Ce(this,e)||e.ctrlKey&&!e.altKey||er&&e.metaKey)){var r=e.keyCode,a=e.charCode;or&&r==Ts?(Ts=null,ee(e)):(!or||e.which&&!(10>e.which)||!vo(this,e))&&(r=String.fromCharCode(a??r),r!="\b"&&!ll(this,e,r)&&this.display.input.onKeyPress(e))}}function ul(e,r){var a=+new Date;return gn&&gn.compare(a,e,r)?(pn=gn=null,"triple"):pn&&pn.compare(a,e,r)?(gn=new bs(a,e,r),pn=null,"double"):(pn=new bs(a,e,r),gn=null,"single")}function So(e){var r=this.display;if(!(Ce(this,e)||r.activeTouch&&r.input.supportsTouch())){if(r.input.ensurePolled(),r.shift=e.shiftKey,V(r,e))Dt||(r.scroller.draggable=!1,setTimeout(function(){return r.scroller.draggable=!0},100));else if(!Bn(this,e,"gutterClick",!0)){var a=br(this,e),l=re(e),c=a?ul(a,l):"single";p(this).defaultView.focus(),l==1&&this.state.selectingText&&this.state.selectingText(e),(!a||!cl(this,l,a,c,e))&&(l==1?a?hl(this,a,c,e):(e.target||e.srcElement)==r.scroller&&ee(e):l==2?(a&&Mn(this.doc,a),setTimeout(function(){return r.input.focus()},20)):l==3&&(vs?this.display.input.onContextMenu(e):xi(this)))}}}function cl(e,r,a,l,c){var d="Click";return l=="double"?d="Double"+d:l=="triple"&&(d="Triple"+d),Xi(e,ho((r==1?"Left":r==2?"Middle":"Right")+d,c),c,function(y){if(typeof y=="string"&&(y=dn[y]),!y)return!1;var w=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),w=y(e,a)!=qn}finally{e.state.suppressEdits=!1}return w})}function hl(e,r,a,l){tt?setTimeout(b(Mt,e),0):e.curOp.focus=O(p(e));var c=e.getOption("configureMouse");c=c?c(e,a,l):{},c.unit==null&&(c.unit=(Tl?l.shiftKey&&l.metaKey:l.altKey)?"rectangle":a=="single"?"char":a=="double"?"word":"line"),(c.extend==null||e.doc.extend)&&(c.extend=e.doc.extend||l.shiftKey),c.addNew==null&&(c.addNew=er?l.metaKey:l.ctrlKey),c.moveOnDrag==null&&(c.moveOnDrag=!(er?l.altKey:l.ctrlKey));var d=e.doc.sel,y;e.options.dragDrop&&Ol&&!e.isReadOnly()&&a=="single"&&-1<(y=d.contains(r))&&(0>De((y=d.ranges[y]).from(),r)||0<r.xRel)&&(0<De(y.to(),r)||0>r.xRel)?fl(e,l,r,c):dl(e,l,r,c)}function fl(e,r,a,l){var c=e.display,d=!1,y=At(e,function(B){Dt&&(c.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:xi(e)),he(c.wrapper.ownerDocument,"mouseup",y),he(c.wrapper.ownerDocument,"mousemove",w),he(c.scroller,"dragstart",$),he(c.scroller,"drop",y),d||(ee(B),l.addNew||Mn(e.doc,a,null,null,l.extend),Dt&&!kn||tt&&mt==9?setTimeout(function(){c.wrapper.ownerDocument.body.focus({preventScroll:!0}),c.input.focus()},20):c.input.focus())}),w=function(B){d=d||10<=Math.abs(r.clientX-B.clientX)+Math.abs(r.clientY-B.clientY)},$=function(){return d=!0};Dt&&(c.scroller.draggable=!0),e.state.draggingText=y,y.copy=!l.moveOnDrag,je(c.wrapper.ownerDocument,"mouseup",y),je(c.wrapper.ownerDocument,"mousemove",w),je(c.scroller,"dragstart",$),je(c.scroller,"drop",y),e.state.delayingBlurEvent=!0,setTimeout(function(){return c.input.focus()},20),c.scroller.dragDrop&&c.scroller.dragDrop()}function wo(e,r,a){return a=="char"?new nt(r,r):a=="word"?e.findWordAt(r):a=="line"?new nt(me(r.line,0),Be(e.doc,me(r.line+1,0))):(e=a(e,r),new nt(e.from,e.to))}function dl(e,r,a,l){function c(ke){if(De(se,ke)!=0)if(se=ke,l.unit=="rectangle"){var ct=[],ot=e.options.tabSize,ht=P(be($,a.line).text,a.ch,ot),pt=P(be($,ke.line).text,ke.ch,ot),Ze=Math.min(ht,pt);ht=Math.max(ht,pt),pt=Math.min(a.line,ke.line);for(var ft=Math.min(e.lastLine(),Math.max(a.line,ke.line));pt<=ft;pt++){var rt=be($,pt).text,lt=T(rt,Ze,ot);Ze==ht?ct.push(new nt(me(pt,lt),me(pt,lt))):rt.length>lt&&ct.push(new nt(me(pt,lt),me(pt,T(rt,ht,ot))))}ct.length||ct.push(new nt(a,a)),Ot($,sr(e,B.ranges.slice(0,te).concat(ct),te),{origin:"*mouse",scroll:!1}),e.scrollIntoView(ke)}else ct=ne,Ze=wo(e,ke,l.unit),ke=ct.anchor,0<De(Ze.anchor,ke)?(ot=Ze.head,ke=st(ct.from(),Ze.anchor)):(ot=Ze.anchor,ke=Tt(ct.to(),Ze.head)),ct=B.ranges.slice(0),ct[te]=pl(e,new nt(Be($,ke),ot)),Ot($,sr(e,ct,te),xs)}function d(ke){var ct=++Pe,ot=br(e,ke,!0,l.unit=="rectangle");if(ot)if(De(ot,se)!=0){e.curOp.focus=O(p(e)),c(ot);var ht=Wr(w,$);(ot.line>=ht.to||ot.line<ht.from)&&setTimeout(At(e,function(){Pe==ct&&d(ke)}),150)}else{var pt=ke.clientY<Re.top?-20:ke.clientY>Re.bottom?20:0;pt&&setTimeout(At(e,function(){Pe==ct&&(w.scroller.scrollTop+=pt,d(ke))}),50)}}function y(ke){e.state.selectingText=!1,Pe=1/0,ke&&(ee(ke),w.input.focus()),he(w.wrapper.ownerDocument,"mousemove",Ve),he(w.wrapper.ownerDocument,"mouseup",Ct),$.history.lastSelOrigin=null}tt&&xi(e);var w=e.display,$=e.doc;ee(r);var B=$.sel,q=B.ranges;if(l.addNew&&!l.extend)var te=$.sel.contains(a),ne=-1<te?q[te]:new nt(a,a);else ne=$.sel.primary(),te=$.sel.primIndex;l.unit=="rectangle"?(l.addNew||(ne=new nt(a,a)),a=br(e,r,!0,!0),te=-1):(r=wo(e,a,l.unit),ne=l.extend?us(ne,r.anchor,r.head,l.extend):r),l.addNew?te==-1?(te=q.length,Ot($,sr(e,q.concat([ne]),te),{scroll:!1,origin:"*mouse"})):1<q.length&&q[te].empty()&&l.unit=="char"&&!l.extend?(Ot($,sr(e,q.slice(0,te).concat(q.slice(te+1)),0),{scroll:!1,origin:"*mouse"}),B=$.sel):cs($,te,ne,xs):(te=0,Ot($,new Kt([ne],0),xs),B=$.sel);var se=a,Re=w.wrapper.getBoundingClientRect(),Pe=0,Ve=At(e,function(ke){ke.buttons!==0&&re(ke)?d(ke):y(ke)}),Ct=At(e,y);e.state.selectingText=Ct,je(w.wrapper.ownerDocument,"mousemove",Ve),je(w.wrapper.ownerDocument,"mouseup",Ct)}function pl(e,r){var a=r.anchor,l=r.head,c=be(e.doc,a.line);if(De(a,l)==0&&a.sticky==l.sticky||(c=Te(c),!c))return r;var d=we(c,a.ch,a.sticky),y=c[d];if(y.from!=a.ch&&y.to!=a.ch)return r;var w=d+(y.from==a.ch==(y.level!=1)?0:1);return w==0||w==c.length?r:(l.line!=a.line?e=0<(l.line-a.line)*(e.doc.direction=="ltr"?1:-1):(e=we(c,l.ch,l.sticky),d=e-d||(l.ch-a.ch)*(y.level==1?-1:1),e=e==w-1||e==w?0>d:0<d),c=c[w+(e?-1:0)],c=(w=e==(c.level==1))?c.from:c.to,w=w?"after":"before",a.ch==c&&a.sticky==w?r:new nt(new me(a.line,c,w),l))}function Bn(e,r,a,l){if(r.touches)var c=r.touches[0].clientX,d=r.touches[0].clientY;else try{c=r.clientX,d=r.clientY}catch{return!1}if(c>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;l&&ee(r),l=e.display;var y=l.lineDiv.getBoundingClientRect();if(d>y.bottom||!Ie(e,a))return de(r);for(d-=y.top-l.viewOffset,y=0;y<e.display.gutterSpecs.length;++y){var w=l.gutters.childNodes[y];if(w&&w.getBoundingClientRect().right>=c)return c=ut(e.doc,d),ce(e,a,e,c,e.display.gutterSpecs[y].className,r),de(r)}}function Ro(e,r){var a;(a=V(e.display,r))||(a=Ie(e,"gutterContextMenu")?Bn(e,r,"gutterContextMenu",!1):!1),!a&&!Ce(e,r,"contextmenu")&&!vs&&e.display.input.onContextMenu(r)}function To(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Br(e)}function gl(e,r,a){!r!=!(a&&a!=Li)&&(a=e.display.dragFunctions,r=r?je:he,r(e.display.scroller,"dragstart",a.start),r(e.display.scroller,"dragenter",a.enter),r(e.display.scroller,"dragover",a.over),r(e.display.scroller,"dragleave",a.leave),r(e.display.scroller,"drop",a.drop))}function ml(e){e.options.lineWrapping?(E(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(ii(e.display.wrapper,"CodeMirror-wrap"),Kr(e)),mi(e),It(e),Br(e),setTimeout(function(){return Ei(e)},100)}function xt(e,r){var a=this;if(!(this instanceof xt))return new xt(e,r);this.options=r=r?C(r):{},C(Ho,r,!1);var l=r.value;typeof l=="string"?l=new Wt(l,r.mode,null,r.lineSeparator,r.direction):r.mode&&(l.modeOption=r.mode),this.doc=l;var c=new xt.inputStyles[r.inputStyle](this);e=this.display=new Vo(e,l,c,r),e.wrapper.CodeMirror=this,To(this),r.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),$s(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new zr,keySeq:null,specialChars:null},r.autofocus&&!Qi&&e.input.focus(),tt&&11>mt&&setTimeout(function(){return a.display.input.reset(!0)},20),vl(this),qo||(rl(),qo=!0),ei(this),this.curOp.forceUpdate=!0,Us(this,l),r.autofocus&&!Qi||this.hasFocus()?setTimeout(function(){a.hasFocus()&&!a.state.focused&&mr(a)},20):Cr(this);for(var d in Xn)Xn.hasOwnProperty(d)&&Xn[d](this,r[d],Li);for(Ds(this),r.finishInit&&r.finishInit(this),l=0;l<Cs.length;++l)Cs[l](this);ti(this),Dt&&r.lineWrapping&&getComputedStyle(e.lineDiv).textRendering=="optimizelegibility"&&(e.lineDiv.style.textRendering="auto")}function vl(e){function r(){l.activeTouch&&(c=setTimeout(function(){return l.activeTouch=null},1e3),d=l.activeTouch,d.end=+new Date)}function a(w,$){if($.left==null)return!0;var B=$.left-w.left;return w=$.top-w.top,400<B*B+w*w}var l=e.display;je(l.scroller,"mousedown",At(e,So)),tt&&11>mt?je(l.scroller,"dblclick",At(e,function(w){if(!Ce(e,w)){var $=br(e,w);!$||Bn(e,w,"gutterClick",!0)||V(e.display,w)||(ee(w),w=e.findWordAt($),Mn(e.doc,w.anchor,w.head))}})):je(l.scroller,"dblclick",function(w){return Ce(e,w)||ee(w)}),je(l.scroller,"contextmenu",function(w){return Ro(e,w)}),je(l.input.getField(),"contextmenu",function(w){l.scroller.contains(w.target)||Ro(e,w)});var c,d={end:0};je(l.scroller,"touchstart",function(w){var $;($=!Ce(e,w))&&(w.touches.length!=1?$=!1:($=w.touches[0],$=1>=$.radiusX&&1>=$.radiusY),$=!$),$&&!Bn(e,w,"gutterClick",!0)&&(l.input.ensurePolled(),clearTimeout(c),$=+new Date,l.activeTouch={start:$,moved:!1,prev:300>=$-d.end?d:null},w.touches.length==1&&(l.activeTouch.left=w.touches[0].pageX,l.activeTouch.top=w.touches[0].pageY))}),je(l.scroller,"touchmove",function(){l.activeTouch&&(l.activeTouch.moved=!0)}),je(l.scroller,"touchend",function(w){var $=l.activeTouch;if($&&!V(l,w)&&$.left!=null&&!$.moved&&300>new Date-$.start){var B=e.coordsChar(l.activeTouch,"page");$=!$.prev||a($,$.prev)?new nt(B,B):!$.prev.prev||a($,$.prev.prev)?e.findWordAt(B):new nt(me(B.line,0),Be(e.doc,me(B.line+1,0))),e.setSelection($.anchor,$.head),e.focus(),ee(w)}r()}),je(l.scroller,"touchcancel",r),je(l.scroller,"scroll",function(){l.scroller.clientHeight&&(ki(e,l.scroller.scrollTop),Qr(e,l.scroller.scrollLeft,!0),ce(e,"scroll",e))}),je(l.scroller,"mousewheel",function(w){return Fs(e,w)}),je(l.scroller,"DOMMouseScroll",function(w){return Fs(e,w)}),je(l.wrapper,"scroll",function(){return l.wrapper.scrollTop=l.wrapper.scrollLeft=0}),l.dragFunctions={enter:function(w){Ce(e,w)||X(w)},over:function(w){if(!Ce(e,w)){var $=br(e,w);if($){var B=document.createDocumentFragment();We(e,$,B),e.display.dragCursor||(e.display.dragCursor=f("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),h(e.display.dragCursor,B)}X(w)}},start:function(w){if(tt&&(!e.state.draggingText||100>+new Date-Uo))X(w);else if(!Ce(e,w)&&!V(e.display,w)&&(w.dataTransfer.setData("Text",e.getSelection()),w.dataTransfer.effectAllowed="copyMove",w.dataTransfer.setDragImage&&!kn)){var $=f("img",null,null,"position: fixed; left: 0; top: 0;");$.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",or&&($.width=$.height=1,e.display.wrapper.appendChild($),$._top=$.offsetTop),w.dataTransfer.setDragImage($,0,0),or&&$.parentNode.removeChild($)}},drop:At(e,tl),leave:function(w){Ce(e,w)||ao(e)}};var y=l.input.getField();je(y,"keyup",function(w){return yo.call(e,w)}),je(y,"keydown",At(e,xo)),je(y,"keypress",At(e,Eo)),je(y,"focus",function(w){return mr(e,w)}),je(y,"blur",function(w){return Cr(e,w)})}function Zi(e,r,a,l){var c=e.doc,d;a==null&&(a="add"),a=="smart"&&(c.mode.indent?d=L(e,r).state:a="prev");var y=e.options.tabSize,w=be(c,r),$=P(w.text,null,y);w.stateAfter&&(w.stateAfter=null);var B=w.text.match(/^\s*/)[0];if(!l&&!/\S/.test(w.text)){var q=0;a="not"}else if(a=="smart"&&(q=c.mode.indent(d,w.text.slice(B.length),w.text),q==qn||150<q)){if(!l)return;a="prev"}if(a=="prev"?q=r>c.first?P(be(c,r-1).text,null,y):0:a=="add"?q=$+e.options.indentUnit:a=="subtract"?q=$-e.options.indentUnit:typeof a=="number"&&(q=$+a),q=Math.max(0,q),a="",l=0,e.options.indentWithTabs)for(e=Math.floor(q/y);e;--e)l+=y,a+="	";if(l<q&&(a+=I(q-l)),a!=B)return Ti(c,a,me(r,0),me(r,B.length),"+input"),w.stateAfter=null,!0;for(y=0;y<c.sel.ranges.length;y++)if(w=c.sel.ranges[y],w.head.line==r&&w.head.ch<B.length){r=me(r,B.length),cs(c,y,new nt(r,r));break}}function ps(e,r,a,l,c){var d=e.doc;e.display.shift=!1,l||(l=d.sel);var y=+new Date-200,w=c=="paste"||e.state.pasteIncoming>y,$=Ss(r),B=null;if(w&&1<l.ranges.length)if(Ht&&Ht.text.join(`
`)==r){if(l.ranges.length%Ht.text.length==0){B=[];for(var q=0;q<Ht.text.length;q++)B.push(d.splitLines(Ht.text[q]))}}else $.length==l.ranges.length&&e.options.pasteLinesPerSelection&&(B=j($,function(Pe){return[Pe]}));q=e.curOp.updateInput;for(var te=l.ranges.length-1;0<=te;te--){var ne=l.ranges[te],se=ne.from(),Re=ne.to();ne.empty()&&(a&&0<a?se=me(se.line,se.ch-a):e.state.overwrite&&!w?Re=me(Re.line,Math.min(be(d,Re.line).text.length,Re.ch+M($).length)):w&&Ht&&Ht.lineWise&&Ht.text.join(`
`)==$.join(`
`)&&(se=Re=me(se.line,0))),ne={from:se,to:Re,text:B?B[te%B.length]:$,origin:c||(w?"paste":e.state.cutIncoming>y?"cut":"+input")},Ri(e.doc,ne),gt(e,"inputRead",e,ne)}r&&!w&&Co(e,r),yi(e),2>e.curOp.updateInput&&(e.curOp.updateInput=q),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function bo(e,r){var a=e.clipboardData&&e.clipboardData.getData("Text");if(a)return e.preventDefault(),r.isReadOnly()||r.options.disableInput||!r.hasFocus()||qt(r,function(){return ps(r,a,0,null,"paste")}),!0}function Co(e,r){if(e.options.electricChars&&e.options.smartIndent)for(var a=e.doc.sel,l=a.ranges.length-1;0<=l;l--){var c=a.ranges[l];if(!(100<c.head.ch||l&&a.ranges[l-1].head.line==c.head.line)){var d=e.getModeAt(c.head),y=!1;if(d.electricChars){for(var w=0;w<d.electricChars.length;w++)if(-1<r.indexOf(d.electricChars.charAt(w))){y=Zi(e,c.head.line,"smart");break}}else d.electricInput&&d.electricInput.test(be(e.doc,c.head.line).text.slice(0,c.head.ch))&&(y=Zi(e,c.head.line,"smart"));y&&gt(e,"electricInput",e,c.head.line)}}}function Ao(e){for(var r=[],a=[],l=0;l<e.doc.sel.ranges.length;l++){var c=e.doc.sel.ranges[l].head.line;c={anchor:me(c,0),head:me(c+1,0)},a.push(c),r.push(e.getRange(c.anchor,c.head))}return{text:r,ranges:a}}function _o(e,r,a,l){e.setAttribute("autocorrect",a?"":"off"),e.setAttribute("autocapitalize",l?"":"off"),e.setAttribute("spellcheck",!!r)}function Oo(){var e=f("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),r=f("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return Dt?e.style.width="1000px":e.setAttribute("wrap","off"),Ji&&(e.style.border="1px solid black"),_o(e),r}function gs(e,r,a,l,c){function d(Pe){if(l=="codepoint"){var Ve=$.text.charCodeAt(r.ch+(0<a?0:-1));Ve=isNaN(Ve)?null:new me(r.line,Math.max(0,Math.min($.text.length,r.ch+a*((0<a?55296<=Ve&&56320>Ve:56320<=Ve&&57343>Ve)?2:1))),-a)}else Ve=c?ol(e.cm,$,r,a):fs($,r,a);if(Ve==null)if((Pe=!Pe)&&(Pe=r.line+B,Pe<e.first||Pe>=e.first+e.size?Pe=!1:(r=new me(Pe,r.ch,r.sticky),Pe=$=be(e,Pe))),Pe)r=ds(c,e.cm,$,r.line,B);else return!1;else r=Ve;return!0}var y=r,w=a,$=be(e,r.line),B=c&&e.direction=="rtl"?-a:a;if(l=="char"||l=="codepoint")d();else if(l=="column")d(!0);else if(l=="word"||l=="group")for(var q=null,te=l=="group",ne=e.cm&&e.cm.getHelper(r,"wordChars"),se=!0;!(0>a)||d(!se);se=!1){var Re=$.text.charAt(r.ch)||`
`;if(Re=K(Re,ne)?"w":te&&Re==`
`?"n":!te||/\s/.test(Re)?null:"p",!te||se||Re||(Re="s"),q&&q!=Re){0>a&&(a=1,d(),r.sticky="after");break}if(Re&&(q=Re),0<a&&!d(!se))break}return w=Ln(e,r,y,w,!0),Qe(y,w)&&(w.hitSide=!0),w}function Io(e,r,a,l){var c=e.doc,d=r.left;if(l=="page"){var y=Math.min(e.display.wrapper.clientHeight,p(e).defaultView.innerHeight||c(e).documentElement.clientHeight);y=Math.max(y-.5*Gr(e.display),3),y=(0<a?r.bottom:r.top)+a*y}else l=="line"&&(y=0<a?r.bottom+3:r.top-3);for(;r=Bi(e,d,y),!!r.outside;){if(0>a?0>=y:y>=c.height){r.hitSide=!0;break}y+=5*a}return r}function Mo(e,r){var a=Pi(e,r.line);if(!a||a.hidden)return null;var l=be(e.doc,r.line);return a=Nr(a,l,r.line),e=Te(l,e.doc.direction),l="left",e&&(l=we(e,r.ch)%2?"right":"left"),r=vn(a.map,r.ch,l),r.offset=r.collapse=="right"?r.end:r.start,r}function xl(e){for(;e;e=e.parentNode)if(/CodeMirror-gutter-wrapper/.test(e.className))return!0;return!1}function _i(e,r){return r&&(e.bad=!0),e}function yl(e,r,a,l,c){function d(se){return function(Re){return Re.id==se}}function y(){q&&(B+=te,ne&&(B+=te),q=ne=!1)}function w(se){se&&(y(),B+=se)}function $(se){if(se.nodeType==1){var Re=se.getAttribute("cm-text");if(Re)w(Re);else{Re=se.getAttribute("cm-marker");var Pe;if(Re)se=e.findMarks(me(l,0),me(c+1,0),d(+Re)),se.length&&(Pe=se[0].find(0))&&w(Ne(e.doc,Pe.from,Pe.to).join(te));else if(se.getAttribute("contenteditable")!="false"&&(Pe=/^(pre|div|p|li|table|br)$/i.test(se.nodeName),/^br$/i.test(se.nodeName)||se.textContent.length!=0)){for(Pe&&y(),Re=0;Re<se.childNodes.length;Re++)$(se.childNodes[Re]);/^(pre|p)$/i.test(se.nodeName)&&(ne=!0),Pe&&(q=!0)}}}else se.nodeType==3&&w(se.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(var B="",q=!1,te=e.doc.lineSeparator(),ne=!1;$(r),r!=a;)r=r.nextSibling,ne=!1;return B}function Gn(e,r,a){if(r==e.display.lineDiv){var l=e.display.lineDiv.childNodes[a];if(!l)return _i(e.clipPos(me(e.display.viewTo-1)),!0);r=null,a=0}else for(l=r;;l=l.parentNode){if(!l||l==e.display.lineDiv)return null;if(l.parentNode&&l.parentNode==e.display.lineDiv)break}for(var c=0;c<e.display.view.length;c++){var d=e.display.view[c];if(d.node==l)return El(d,r,a)}}function El(e,r,a){function l(q,te,ne){for(var se=-1;se<(B?B.length:0);se++)for(var Re=0>se?$.map:B[se],Pe=0;Pe<Re.length;Pe+=3){var Ve=Re[Pe+2];if(Ve==q||Ve==te)return te=xe(0>se?e.line:e.rest[se]),se=Re[Pe]+ne,(0>ne||Ve!=q)&&(se=Re[Pe+(ne?1:0)]),me(te,se)}}var c=e.text.firstChild,d=!1;if(!r||!v(c,r))return _i(me(xe(e.line),0),!0);if(r==c&&(d=!0,r=c.childNodes[a],a=0,!r))return a=e.rest?M(e.rest):e.line,_i(me(xe(a),a.text.length),d);var y=r.nodeType==3?r:null,w=r;for(y||r.childNodes.length!=1||r.firstChild.nodeType!=3||(y=r.firstChild,a&&(a=y.nodeValue.length));w.parentNode!=c;)w=w.parentNode;var $=e.measure,B=$.maps;if(r=l(y,w,a))return _i(r,d);for(c=w.nextSibling,y=y?y.nodeValue.length-a:0;c;c=c.nextSibling){if(r=l(c,c.firstChild,0))return _i(me(r.line,r.ch-y),d);y+=c.textContent.length}for(w=w.previousSibling;w;w=w.previousSibling){if(r=l(w,w.firstChild,-1))return _i(me(r.line,r.ch+a),d);a+=w.textContent.length}}var Gt=navigator.userAgent,$o=navigator.platform,_r=/gecko\/\d/i.test(Gt),Lo=/MSIE \d/.test(Gt),Po=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Gt),Wn=/Edge\/(\d+)/.exec(Gt),tt=Lo||Po||Wn,mt=tt&&(Lo?document.documentMode||6:+(Wn||Po)[1]),Dt=!Wn&&/WebKit\//.test(Gt),Sl=Dt&&/Qt\/\d+\.\d+/.test(Gt),Hr=!Wn&&/Chrome\/(\d+)/.exec(Gt),Do=Hr&&+Hr[1],or=/Opera\//.test(Gt),kn=/Apple Computer/.test(navigator.vendor),wl=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(Gt),Rl=/PhantomJS/.test(Gt),Ji=kn&&(/Mobile\/\w+/.test(Gt)||2<navigator.maxTouchPoints),Un=/Android/.test(Gt),Qi=Ji||Un||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(Gt),er=Ji||/Mac/.test($o),Tl=/\bCrOS\b/.test(Gt),bl=/win/i.test($o),ri=or&&Gt.match(/Version\/(\d*\.\d*)/);ri&&(ri=Number(ri[1])),ri&&15<=ri&&(or=!1,Dt=!0);var No=er&&(Sl||or&&(ri==null||12.11>ri)),vs=_r||tt&&9<=mt,ii=function(e,r){var a=e.className;if(r=o(r).exec(a)){var l=a.slice(r.index+r[0].length);e.className=a.slice(0,r.index)+(l?r[1]+l:"")}},en=document.createRange?function(e,r,a,l){var c=document.createRange();return c.setEnd(l||e,a),c.setStart(e,r),c}:function(e,r,a){var l=document.body.createTextRange();try{l.moveToElementText(e.parentNode)}catch{return l}return l.collapse(!0),l.moveEnd("character",a),l.moveStart("character",r),l},tn=function(e){e.select()};Ji?tn=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:tt&&(tn=function(e){try{e.select()}catch{}});var zr=function(){this.f=this.id=null,this.time=0,this.handler=b(this.onTimeout,this)};zr.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},zr.prototype.set=function(e,r){this.f=r,r=+new Date+e,(!this.id||r<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=r)};var qn={toString:function(){return"CodeMirror.Pass"}},vr={scroll:!1},xs={origin:"*mouse"},rn={origin:"+move"},Hn=[""],Cl=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Al=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,nn=null,_l=function(){function e(y,w,$){this.level=y,this.from=w,this.to=$}var r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,a=/[stwN]/,l=/[LRr]/,c=/[Lb1n]/,d=/[1n]/;return function(y,w){var $=w=="ltr"?"L":"R";if(y.length==0||w=="ltr"&&!r.test(y))return!1;for(var B=y.length,q=[],te=0;te<B;++te){var ne=q,se=ne.push,Re=y.charCodeAt(te);Re=247>=Re?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(Re):1424<=Re&&1524>=Re?"R":1536<=Re&&1785>=Re?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(Re-1536):1774<=Re&&2220>=Re?"r":8192<=Re&&8203>=Re?"w":Re==8204?"b":"L",se.call(ne,Re)}for(te=0,ne=$;te<B;++te)se=q[te],se=="m"?q[te]=ne:ne=se;for(te=0,ne=$;te<B;++te)se=q[te],se=="1"&&ne=="r"?q[te]="n":l.test(se)&&(ne=se,se=="r"&&(q[te]="R"));for(te=1,ne=q[0];te<B-1;++te)se=q[te],se=="+"&&ne=="1"&&q[te+1]=="1"?q[te]="1":se!=","||ne!=q[te+1]||ne!="1"&&ne!="n"||(q[te]=ne),ne=se;for(te=0;te<B;++te)if(ne=q[te],ne==",")q[te]="N";else if(ne=="%"){for(ne=te+1;ne<B&&q[ne]=="%";++ne);for(se=te&&q[te-1]=="!"||ne<B&&q[ne]=="1"?"1":"N";te<ne;++te)q[te]=se;te=ne-1}for(te=0,ne=$;te<B;++te)se=q[te],ne=="L"&&se=="1"?q[te]="L":l.test(se)&&(ne=se);for(ne=0;ne<B;++ne)if(a.test(q[ne])){for(te=ne+1;te<B&&a.test(q[te]);++te);for(se=(ne?q[ne-1]:$)=="L",se=se==((te<B?q[te]:$)=="L")?se?"L":"R":$;ne<te;++ne)q[ne]=se;ne=te-1}$=[];var Pe;for(te=0;te<B;)if(c.test(q[te])){for(ne=te,++te;te<B&&c.test(q[te]);++te);$.push(new e(0,ne,te))}else{var Ve=te;for(ne=$.length,se=w=="rtl"?1:0,++te;te<B&&q[te]!="L";++te);for(Re=Ve;Re<te;)if(d.test(q[Re])){for(Ve<Re&&($.splice(ne,0,new e(1,Ve,Re)),ne+=se),Ve=Re,++Re;Re<te&&d.test(q[Re]);++Re);$.splice(ne,0,new e(2,Ve,Re)),ne+=se,Ve=Re}else++Re;Ve<te&&$.splice(ne,0,new e(1,Ve,te))}return w=="ltr"&&($[0].level==1&&(Pe=y.match(/^\s+/))&&($[0].from=Pe[0].length,$.unshift(new e(0,0,Pe[0].length))),M($).level==1&&(Pe=y.match(/\s+$/))&&(M($).to-=Pe[0].length,$.push(new e(0,B-Pe[0].length,B)))),w=="rtl"?$.reverse():$}}(),zn=[],je=function(e,r,a){e.addEventListener?e.addEventListener(r,a,!1):e.attachEvent?e.attachEvent("on"+r,a):(e=e._handlers||(e._handlers={}),e[r]=(e[r]||zn).concat(a))},Ol=function(){if(tt&&9>mt)return!1;var e=f("div");return"draggable"in e||"dragDrop"in e}(),ys,Es,Ss=`

b`.split(/\n/).length!=3?function(e){for(var r=0,a=[],l=e.length;r<=l;){var c=e.indexOf(`
`,r);c==-1&&(c=e.length);var d=e.slice(r,e.charAt(c-1)=="\r"?c-1:c),y=d.indexOf("\r");y!=-1?(a.push(d.slice(0,y)),r+=y+1):(a.push(d),r=c+1)}return a}:function(e){return e.split(/\r\n?|\n/)},Il=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){try{var r=e.ownerDocument.selection.createRange()}catch{}return r&&r.parentElement()==e?r.compareEndPoints("StartToEnd",r)!=0:!1},Ml=function(){var e=f("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),ws=null,Rs={},Oi={},Ii={},bt=function(e,r,a){this.pos=this.start=0,this.string=e,this.tabSize=r||8,this.lineStart=this.lastColumnPos=this.lastColumnValue=0,this.lineOracle=a};bt.prototype.eol=function(){return this.pos>=this.string.length},bt.prototype.sol=function(){return this.pos==this.lineStart},bt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},bt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},bt.prototype.eat=function(e){var r=this.string.charAt(this.pos);if(typeof e=="string"?r==e:r&&(e.test?e.test(r):e(r)))return++this.pos,r},bt.prototype.eatWhile=function(e){for(var r=this.pos;this.eat(e););return this.pos>r},bt.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},bt.prototype.skipToEnd=function(){this.pos=this.string.length},bt.prototype.skipTo=function(e){if(e=this.string.indexOf(e,this.pos),-1<e)return this.pos=e,!0},bt.prototype.backUp=function(e){this.pos-=e},bt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=P(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?P(this.string,this.lineStart,this.tabSize):0)},bt.prototype.indentation=function(){return P(this.string,null,this.tabSize)-(this.lineStart?P(this.string,this.lineStart,this.tabSize):0)},bt.prototype.match=function(e,r,a){if(typeof e=="string"){var l=function(d){return a?d.toLowerCase():d},c=this.string.substr(this.pos,e.length);if(l(c)==l(e))return r!==!1&&(this.pos+=e.length),!0}else return(e=this.string.slice(this.pos).match(e))&&0<e.index?null:(e&&r!==!1&&(this.pos+=e[0].length),e)},bt.prototype.current=function(){return this.string.slice(this.start,this.pos)},bt.prototype.hideFirstChars=function(e,r){this.lineStart+=e;try{return r()}finally{this.lineStart-=e}},bt.prototype.lookAhead=function(e){var r=this.lineOracle;return r&&r.lookAhead(e)},bt.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var jn=function(e,r){this.state=e,this.lookAhead=r},xr=function(e,r,a,l){this.state=r,this.doc=e,this.line=a,this.maxLookAhead=l||0,this.baseTokens=null,this.baseTokenPos=1};xr.prototype.lookAhead=function(e){var r=this.doc.getLine(this.line+e);return r!=null&&e>this.maxLookAhead&&(this.maxLookAhead=e),r},xr.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var r=this.baseTokens[this.baseTokenPos+1];return{type:r&&r.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},xr.prototype.nextLine=function(){this.line++,0<this.maxLookAhead&&this.maxLookAhead--},xr.fromSaved=function(e,r,a){return r instanceof jn?new xr(e,H(e.mode,r.state),a,r.lookAhead):new xr(e,H(e.mode,r),a)},xr.prototype.save=function(e){return e=e!==!1?H(this.doc.mode,this.state):this.state,0<this.maxLookAhead?new jn(e,this.maxLookAhead):e};var Bo=function(e,r,a){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=r||null,this.state=a},Fo=!1,Or=!1,Mi=function(e,r,a){this.text=e,Lr(this,r),this.height=a?a(this):1};Mi.prototype.lineNo=function(){return xe(this)},Le(Mi);var $l={},Ll={},$i=null,sn=null,Go={left:0,right:0,top:0,bottom:0},ni,si=function(e,r,a){this.cm=a;var l=this.vert=f("div",[f("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),c=this.horiz=f("div",[f("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");l.tabIndex=c.tabIndex=-1,e(l),e(c),je(l,"scroll",function(){l.clientHeight&&r(l.scrollTop,"vertical")}),je(c,"scroll",function(){c.clientWidth&&r(c.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,tt&&8>mt&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};si.prototype.update=function(e){var r=e.scrollWidth>e.clientWidth+1,a=e.scrollHeight>e.clientHeight+1,l=e.nativeBarWidth;return a?(this.vert.style.display="block",this.vert.style.bottom=r?l+"px":"0",this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+(e.viewHeight-(r?l:0)))+"px"):(this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0"),r?(this.horiz.style.display="block",this.horiz.style.right=a?l+"px":"0",this.horiz.style.left=e.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+(e.viewWidth-e.barLeft-(a?l:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&0<e.clientHeight&&(l==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:a?l:0,bottom:r?l:0}},si.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},si.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},si.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=er&&!wl?"12px":"18px",this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new zr,this.disableVert=new zr},si.prototype.enableZeroWidthBar=function(e,r,a){function l(){var c=e.getBoundingClientRect();(a=="vert"?document.elementFromPoint(c.right-1,(c.top+c.bottom)/2):document.elementFromPoint((c.right+c.left)/2,c.bottom-1))!=e?e.style.visibility="hidden":r.set(1e3,l)}e.style.visibility="",r.set(1e3,l)},si.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var on=function(){};on.prototype.update=function(){return{bottom:0,right:0}},on.prototype.setScrollLeft=function(){},on.prototype.setScrollTop=function(){},on.prototype.clear=function(){};var Wo={native:si,null:on},Pl=0,Vn=function(e,r,a){var l=e.display;this.viewport=r,this.visible=Wr(l,e.doc,r),this.editorIsHidden=!l.wrapper.offsetWidth,this.wrapperHeight=l.wrapper.clientHeight,this.wrapperWidth=l.wrapper.clientWidth,this.oldDisplayWidth=Ke(e),this.force=a,this.dims=gi(e),this.events=[]};Vn.prototype.signal=function(e,r){Ie(e,r)&&this.events.push(arguments)},Vn.prototype.finish=function(){for(var e=0;e<this.events.length;e++)ce.apply(null,this.events[e])};var Kn=0,Ir=null;tt?Ir=-.53:_r?Ir=15:Hr?Ir=-.7:kn&&(Ir=-1/3);var Kt=function(e,r){this.ranges=e,this.primIndex=r};Kt.prototype.primary=function(){return this.ranges[this.primIndex]},Kt.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var r=0;r<this.ranges.length;r++){var a=this.ranges[r],l=e.ranges[r];if(!Qe(a.anchor,l.anchor)||!Qe(a.head,l.head))return!1}return!0},Kt.prototype.deepCopy=function(){for(var e=[],r=0;r<this.ranges.length;r++)e[r]=new nt(Et(this.ranges[r].anchor),Et(this.ranges[r].head));return new Kt(e,this.primIndex)},Kt.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},Kt.prototype.contains=function(e,r){r||(r=e);for(var a=0;a<this.ranges.length;a++){var l=this.ranges[a];if(0<=De(r,l.from())&&0>=De(e,l.to()))return a}return-1};var nt=function(e,r){this.anchor=e,this.head=r};nt.prototype.from=function(){return st(this.anchor,this.head)},nt.prototype.to=function(){return Tt(this.anchor,this.head)},nt.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Ki.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,r){for(var a=e,l=e+r;a<l;++a){var c=this.lines[a];this.height-=c.height;var d=c;d.parent=null,ui(d),gt(c,"delete")}this.lines.splice(e,r)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,r,a){for(this.height+=a,this.lines=this.lines.slice(0,e).concat(r).concat(this.lines.slice(e)),e=0;e<r.length;++e)r[e].parent=this},iterN:function(e,r,a){for(r=e+r;e<r;++e)if(a(this.lines[e]))return!0}},Yi.prototype={chunkSize:function(){return this.size},removeInner:function(e,r){this.size-=r;for(var a=0;a<this.children.length;++a){var l=this.children[a],c=l.chunkSize();if(e<c){var d=Math.min(r,c-e),y=l.height;if(l.removeInner(e,d),this.height-=y-l.height,c==d&&(this.children.splice(a--,1),l.parent=null),(r-=d)==0)break;e=0}else e-=c}25>this.size-r&&(1<this.children.length||!(this.children[0]instanceof Ki))&&(e=[],this.collapse(e),this.children=[new Ki(e)],this.children[0].parent=this)},collapse:function(e){for(var r=0;r<this.children.length;++r)this.children[r].collapse(e)},insertInner:function(e,r,a){this.size+=r.length,this.height+=a;for(var l=0;l<this.children.length;++l){var c=this.children[l],d=c.chunkSize();if(e<=d){if(c.insertInner(e,r,a),c.lines&&50<c.lines.length){for(r=e=c.lines.length%25+25;r<c.lines.length;)a=new Ki(c.lines.slice(r,r+=25)),c.height-=a.height,this.children.splice(++l,0,a),a.parent=this;c.lines=c.lines.slice(0,e),this.maybeSpill()}break}e-=d}},maybeSpill:function(){if(!(10>=this.children.length)){var e=this;do{var r=e.children.splice(e.children.length-5,5);if(r=new Yi(r),e.parent){e.size-=r.size,e.height-=r.height;var a=A(e.parent.children,e);e.parent.children.splice(a+1,0,r)}else a=new Yi(e.children),a.parent=e,e.children=[a,r],e=a;r.parent=e.parent}while(10<e.children.length);e.parent.maybeSpill()}},iterN:function(e,r,a){for(var l=0;l<this.children.length;++l){var c=this.children[l],d=c.chunkSize();if(e<d){if(d=Math.min(r,d-e),c.iterN(e,d,a))return!0;if((r-=d)==0)break;e=0}else e-=d}}};var ln=function(e,r,a){if(a)for(var l in a)a.hasOwnProperty(l)&&(this[l]=a[l]);this.doc=e,this.node=r};ln.prototype.clear=function(){var e=this.doc.cm,r=this.line.widgets,a=this.line,l=xe(a);if(l!=null&&r){for(var c=0;c<r.length;++c)r[c]==this&&r.splice(c--,1);r.length||(a.widgets=null);var d=D(this);Xe(a,Math.max(0,a.height-d)),e&&(qt(e,function(){var y=-d;Ut(a)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&An(e,y),Qt(e,l,"widget")}),gt(e,"lineWidgetCleared",e,this,l))}},ln.prototype.changed=function(){var e=this,r=this.height,a=this.doc.cm,l=this.line;this.height=null;var c=D(this)-r;c&&(Ft(this.doc,l)||Xe(l,l.height+c),a&&qt(a,function(){a.curOp.forceUpdate=!0,Ut(l)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&An(a,c),gt(a,"lineWidgetChanged",a,e,xe(l))}))},Le(ln);var ko=0,jr=function(e,r){this.lines=[],this.type=r,this.doc=e,this.id=++ko};jr.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,r=e&&!e.curOp;if(r&&ei(e),Ie(this,"clear")){var a=this.find();a&&gt(this,"clear",a.from,a.to)}for(var l=a=null,c=0;c<this.lines.length;++c){var d=this.lines[c],y=St(d.markedSpans,this);e&&!this.collapsed?Qt(e,xe(d),"text"):e&&(y.to!=null&&(l=xe(d)),y.from!=null&&(a=xe(d)));for(var w=d,$=void 0,B=d.markedSpans,q=y,te=0;te<B.length;++te)B[te]!=q&&($||($=[])).push(B[te]);w.markedSpans=$,y.from==null&&this.collapsed&&!Ft(this.doc,d)&&e&&Xe(d,Gr(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(c=0;c<this.lines.length;++c)d=Bt(this.lines[c]),y=ar(d),y>e.display.maxLineLength&&(e.display.maxLine=d,e.display.maxLineLength=y,e.display.maxLineChanged=!0);a!=null&&e&&this.collapsed&&It(e,a,l+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Zs(e.doc)),e&&gt(e,"markerCleared",e,this,a,l),r&&ti(e),this.parent&&this.parent.clear()}},jr.prototype.find=function(e,r){e==null&&this.type=="bookmark"&&(e=1);for(var a,l,c=0;c<this.lines.length;++c){var d=this.lines[c],y=St(d.markedSpans,this);if(y.from!=null&&(a=me(r?d:xe(d),y.from),e==-1))return a;if(y.to!=null&&(l=me(r?d:xe(d),y.to),e==1))return l}return a&&{from:a,to:l}},jr.prototype.changed=function(){var e=this,r=this.find(-1,!0),a=this,l=this.doc.cm;r&&l&&qt(l,function(){var c=r.line,d=xe(r.line);(d=Pi(l,d))&&(xn(d),l.curOp.selectionChanged=l.curOp.forceUpdate=!0),l.curOp.updateMaxLine=!0,Ft(a.doc,c)||a.height==null||(d=a.height,a.height=null,(d=D(a)-d)&&Xe(c,c.height+d)),gt(l,"markerChanged",l,e)})},jr.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var r=this.doc.cm.curOp;r.maybeHiddenMarkers&&A(r.maybeHiddenMarkers,this)!=-1||(r.maybeUnhiddenMarkers||(r.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},jr.prototype.detachLine=function(e){this.lines.splice(A(this.lines,e),1),!this.lines.length&&this.doc.cm&&(e=this.doc.cm.curOp,(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this))},Le(jr);var an=function(e,r){for(this.markers=e,this.primary=r,r=0;r<e.length;++r)e[r].parent=this};an.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();gt(this,"clear")}},an.prototype.find=function(e,r){return this.primary.find(e,r)},Le(an);var Dl=0,Wt=function(e,r,a,l,c){if(!(this instanceof Wt))return new Wt(e,r,a,l,c);a==null&&(a=0),Yi.call(this,[new Ki([new Mi("",null)])]),this.first=a,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=a,a=me(a,0),this.sel=Ar(a),this.history=new On(null),this.id=++Dl,this.modeOption=r,this.lineSep=l,this.direction=c=="rtl"?"rtl":"ltr",this.extend=!1,typeof e=="string"&&(e=this.splitLines(e)),ls(this,{from:a,to:a,text:e}),Ot(this,Ar(a),vr)};Wt.prototype=oe(Yi.prototype,{constructor:Wt,iter:function(e,r,a){a?this.iterN(e-this.first,r-e,a):this.iterN(this.first,this.first+this.size,e)},insert:function(e,r){for(var a=0,l=0;l<r.length;++l)a+=r[l].height;this.insertInner(e-this.first,r,a)},remove:function(e,r){this.removeInner(e-this.first,r)},getValue:function(e){var r=ze(this,this.first,this.first+this.size);return e===!1?r:r.join(e||this.lineSeparator())},setValue:_t(function(e){var r=me(this.first,0),a=this.first+this.size-1;Ri(this,{from:r,to:me(a,be(this,a).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Wi(this.cm,0,0),Ot(this,Ar(r),vr)}),replaceRange:function(e,r,a,l){r=Be(this,r),a=a?Be(this,a):r,Ti(this,e,r,a,l)},getRange:function(e,r,a){return e=Ne(this,Be(this,e),Be(this,r)),a===!1?e:a===""?e.join(""):e.join(a||this.lineSeparator())},getLine:function(e){return(e=this.getLineHandle(e))&&e.text},getLineHandle:function(e){if(dt(this,e))return be(this,e)},getLineNumber:function(e){return xe(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=be(this,e)),Bt(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Be(this,e)},getCursor:function(e){var r=this.sel.primary();return e==null||e=="head"?r.head:e=="anchor"?r.anchor:e=="end"||e=="to"||e===!1?r.to():r.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:_t(function(e,r,a){e=Be(this,typeof e=="number"?me(e,r||0):e),Ot(this,Ar(e,null),a)}),setSelection:_t(function(e,r,a){var l=Be(this,e);e=Be(this,r||e),Ot(this,Ar(l,e),a)}),extendSelection:_t(function(e,r,a){Mn(this,Be(this,e),r&&Be(this,r),a)}),extendSelections:_t(function(e,r){Ks(this,G(this,e),r)}),extendSelectionsBy:_t(function(e,r){e=j(this.sel.ranges,e),Ks(this,G(this,e),r)}),setSelections:_t(function(e,r,a){if(e.length){for(var l=[],c=0;c<e.length;c++)l[c]=new nt(Be(this,e[c].anchor),Be(this,e[c].head||e[c].anchor));r==null&&(r=Math.min(e.length-1,this.sel.primIndex)),Ot(this,sr(this.cm,l,r),a)}}),addSelection:_t(function(e,r,a){var l=this.sel.ranges.slice(0);l.push(new nt(Be(this,e),Be(this,r||e))),Ot(this,sr(this.cm,l,l.length-1),a)}),getSelection:function(e){for(var r=this.sel.ranges,a,l=0;l<r.length;l++){var c=Ne(this,r[l].from(),r[l].to());a=a?a.concat(c):c}return e===!1?a:a.join(e||this.lineSeparator())},getSelections:function(e){for(var r=[],a=this.sel.ranges,l=0;l<a.length;l++){var c=Ne(this,a[l].from(),a[l].to());e!==!1&&(c=c.join(e||this.lineSeparator())),r[l]=c}return r},replaceSelection:function(e,r,a){for(var l=[],c=0;c<this.sel.ranges.length;c++)l[c]=e;this.replaceSelections(l,r,a||"+input")},replaceSelections:_t(function(e,r,a){for(var l=[],c=this.sel,d=0;d<c.ranges.length;d++){var y=c.ranges[d];l[d]={from:y.from(),to:y.to(),text:this.splitLines(e[d]),origin:a}}if(e=r&&r!="end"){for(e=[],c=a=me(this.first,0),d=0;d<l.length;d++){var w=l[d];y=Ws(w.from,a,c);var $=Ws(Ur(w),a,c);a=w.to,c=$,r=="around"?(w=this.sel.ranges[d],w=0>De(w.head,w.anchor),e[d]=new nt(w?$:y,w?y:$)):e[d]=new nt(y,y)}e=new Kt(e,this.sel.primIndex)}for(r=e,e=l.length-1;0<=e;e--)Ri(this,l[e]);r?Ys(this,r):this.cm&&yi(this.cm)}),undo:_t(function(){Pn(this,"undo")}),redo:_t(function(){Pn(this,"redo")}),undoSelection:_t(function(){Pn(this,"undo",!0)}),redoSelection:_t(function(){Pn(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,r=0,a=0,l=0;l<e.done.length;l++)e.done[l].ranges||++r;for(l=0;l<e.undone.length;l++)e.undone[l].ranges||++a;return{undo:r,redo:a}},clearHistory:function(){var e=this;this.history=new On(this.history),qr(this,function(r){return r.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Si(this.history.done),undone:Si(this.history.undone)}},setHistory:function(e){var r=this.history=new On(this.history);r.done=Si(e.done.slice(0),null,!0),r.undone=Si(e.undone.slice(0),null,!0)},setGutterMarker:_t(function(e,r,a){return Vi(this,e,"gutter",function(l){var c=l.gutterMarkers||(l.gutterMarkers={});return c[r]=a,!a&&J(c)&&(l.gutterMarkers=null),!0})}),clearGutter:_t(function(e){var r=this;this.iter(function(a){a.gutterMarkers&&a.gutterMarkers[e]&&Vi(r,a,"gutter",function(){return a.gutterMarkers[e]=null,J(a.gutterMarkers)&&(a.gutterMarkers=null),!0})})}),lineInfo:function(e){if(typeof e=="number"){if(!dt(this,e))return null;var r=e;if(e=be(this,e),!e)return null}else if(r=xe(e),r==null)return null;return{line:r,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:_t(function(e,r,a){return Vi(this,e,r=="gutter"?"gutter":"class",function(l){var c=r=="text"?"textClass":r=="background"?"bgClass":r=="gutter"?"gutterClass":"wrapClass";if(l[c]){if(o(a).test(l[c]))return!1;l[c]+=" "+a}else l[c]=a;return!0})}),removeLineClass:_t(function(e,r,a){return Vi(this,e,r=="gutter"?"gutter":"class",function(l){var c=r=="text"?"textClass":r=="background"?"bgClass":r=="gutter"?"gutterClass":"wrapClass",d=l[c];if(d)if(a==null)l[c]=null;else{var y=d.match(o(a));if(!y)return!1;var w=y.index+y[0].length;l[c]=d.slice(0,y.index)+(y.index&&w!=d.length?" ":"")+d.slice(w)||null}else return!1;return!0})}),addLineWidget:_t(function(e,r,a){return Jo(this,e,r,a)}),removeLineWidget:function(e){e.clear()},markText:function(e,r,a){return bi(this,Be(this,e),Be(this,r),a,a&&a.type||"range")},setBookmark:function(e,r){return r={replacedWith:r&&(r.nodeType==null?r.widget:r),insertLeft:r&&r.insertLeft,clearWhenEmpty:!1,shared:r&&r.shared,handleMouseEvents:r&&r.handleMouseEvents},e=Be(this,e),bi(this,e,e,r,"bookmark")},findMarksAt:function(e){e=Be(this,e);var r=[],a=be(this,e.line).markedSpans;if(a)for(var l=0;l<a.length;++l){var c=a[l];(c.from==null||c.from<=e.ch)&&(c.to==null||c.to>=e.ch)&&r.push(c.marker.parent||c.marker)}return r},findMarks:function(e,r,a){e=Be(this,e),r=Be(this,r);var l=[],c=e.line;return this.iter(e.line,r.line+1,function(d){if(d=d.markedSpans)for(var y=0;y<d.length;y++){var w=d[y];w.to!=null&&c==e.line&&e.ch>=w.to||w.from==null&&c!=e.line||w.from!=null&&c==r.line&&w.from>=r.ch||a&&!a(w.marker)||l.push(w.marker.parent||w.marker)}++c}),l},getAllMarks:function(){var e=[];return this.iter(function(r){if(r=r.markedSpans)for(var a=0;a<r.length;++a)r[a].from!=null&&e.push(r[a].marker)}),e},posFromIndex:function(e){var r,a=this.first,l=this.lineSeparator().length;return this.iter(function(c){if(c=c.text.length+l,c>e)return r=e,!0;e-=c,++a}),Be(this,me(a,r))},indexFromPos:function(e){e=Be(this,e);var r=e.ch;if(e.line<this.first||0>e.ch)return 0;var a=this.lineSeparator().length;return this.iter(this.first,e.line,function(l){r+=l.text.length+a}),r},copy:function(e){var r=new Wt(ze(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return r.scrollTop=this.scrollTop,r.scrollLeft=this.scrollLeft,r.sel=this.sel,r.extend=!1,e&&(r.history.undoDepth=this.history.undoDepth,r.setHistory(this.getHistory())),r},linkedDoc:function(e){e||(e={});var r=this.first,a=this.first+this.size;for(e.from!=null&&e.from>r&&(r=e.from),e.to!=null&&e.to<a&&(a=e.to),r=new Wt(ze(this,r,a),e.mode||this.modeOption,r,this.lineSep,this.direction),e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],e=lo(this),a=0;a<e.length;a++){var l=e[a],c=l.find(),d=r.clipPos(c.from);c=r.clipPos(c.to),De(d,c)&&(d=bi(r,d,c,l.primary,l.primary.type),l.markers.push(d),d.parent=l)}return r},unlinkDoc:function(e){if(e instanceof xt&&(e=e.doc),this.linked){for(var r=0;r<this.linked.length;++r)if(this.linked[r].doc==e){this.linked.splice(r,1),e.unlinkDoc(this),el(lo(this));break}}if(e.history==this.history){var a=[e.id];qr(e,function(l){return a.push(l.id)},!0),e.history=new On(null),e.history.done=Si(this.history.done,a),e.history.undone=Si(this.history.undone,a)}},iterLinkedDocs:function(e){qr(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Ss(e)},lineSeparator:function(){return this.lineSep||`
`},setDirection:_t(function(e){e!="rtl"&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(r){return r.order=null}),this.cm&&Yo(this.cm))})}),Wt.prototype.eachLine=Wt.prototype.iter;for(var Uo=0,qo=!1,Vr={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},un=0;10>un;un++)Vr[un+48]=Vr[un+96]=String(un);for(var Yn=65;90>=Yn;Yn++)Vr[Yn]=String.fromCharCode(Yn);for(var cn=1;12>=cn;cn++)Vr[cn+111]=Vr[cn+63235]="F"+cn;var hn={basic:{Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},pcDefault:{"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},emacsy:{"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},macDefault:{"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]}};hn.default=er?hn.macDefault:hn.pcDefault;var dn={selectAll:eo,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),vr)},killLine:function(e){return Ai(e,function(r){if(r.empty()){var a=be(e.doc,r.head.line).text.length;return r.head.ch==a&&r.head.line<e.lastLine()?{from:r.head,to:me(r.head.line+1,0)}:{from:r.head,to:me(r.head.line,a)}}return{from:r.from(),to:r.to()}})},deleteLine:function(e){return Ai(e,function(r){return{from:me(r.from().line,0),to:Be(e.doc,me(r.to().line+1,0))}})},delLineLeft:function(e){return Ai(e,function(r){return{from:me(r.from().line,0),to:r.from()}})},delWrappedLineLeft:function(e){return Ai(e,function(r){var a=e.charCoords(r.head,"div").top+5;return{from:e.coordsChar({left:0,top:a},"div"),to:r.from()}})},delWrappedLineRight:function(e){return Ai(e,function(r){var a=e.charCoords(r.head,"div").top+5;return a=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:a},"div"),{from:r.from(),to:a}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(me(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(me(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(r){return po(e,r.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(r){return go(e,r.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(r){r=r.head.line;for(var a=be(e.doc,r),l=a,c;c=yt(l,!1);)l=c.find(1,!0).line;return l!=a&&(r=xe(l)),ds(!0,e,a,r,-1)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(r){return r=e.cursorCoords(r.head,"div").top+5,e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div")},rn)},goLineLeft:function(e){return e.extendSelectionsBy(function(r){return r=e.cursorCoords(r.head,"div").top+5,e.coordsChar({left:0,top:r},"div")},rn)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(r){var a=e.cursorCoords(r.head,"div").top+5;return a=e.coordsChar({left:0,top:a},"div"),a.ch<e.getLine(a.line).search(/\S/)?go(e,r.head):a},rn)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("	")},insertSoftTab:function(e){for(var r=[],a=e.listSelections(),l=e.options.tabSize,c=0;c<a.length;c++){var d=a[c].from();d=P(e.getLine(d.line),d.ch,l),r.push(I(l-d%l))}e.replaceSelections(r)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return qt(e,function(){for(var r=e.listSelections(),a=[],l=0;l<r.length;l++)if(r[l].empty()){var c=r[l].head,d=be(e.doc,c.line).text;if(d){if(c.ch==d.length&&(c=new me(c.line,c.ch-1)),0<c.ch)c=new me(c.line,c.ch+1),e.replaceRange(d.charAt(c.ch-1)+d.charAt(c.ch-2),me(c.line,c.ch-2),c,"+transpose");else if(c.line>e.doc.first){var y=be(e.doc,c.line-1).text;y&&(c=new me(c.line,1),e.replaceRange(d.charAt(0)+e.doc.lineSeparator()+y.charAt(y.length-1),me(c.line-1,y.length-1),c,"+transpose"))}}a.push(new nt(c,c))}e.setSelections(a)})},newlineAndIndent:function(e){return qt(e,function(){for(var r=e.listSelections(),a=r.length-1;0<=a;a--)e.replaceRange(e.doc.lineSeparator(),r[a].anchor,r[a].head,"+input");for(r=e.listSelections(),a=0;a<r.length;a++)e.indentLine(r[a].from().line,null,!0);yi(e)})},openLine:function(e){return e.replaceSelection(`
`,"start")},toggleOverwrite:function(e){return e.toggleOverwrite()}},Nl=new zr,Ts=null,bs=function(e,r,a){this.time=e,this.pos=r,this.button=a};bs.prototype.compare=function(e,r,a){return this.time+400>e&&De(r,this.pos)==0&&a==this.button};var pn,gn,Li={toString:function(){return"CodeMirror.Init"}},Ho={},Xn={};xt.defaults=Ho,xt.optionHandlers=Xn;var Cs=[];xt.defineInitHook=function(e){return Cs.push(e)};var Ht=null,at=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new zr,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};at.prototype.init=function(e){function r(w){for(w=w.target;w;w=w.parentNode){if(w==y)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(w.className))break}return!1}function a(w){if(r(w)&&!Ce(d,w)){if(d.somethingSelected())Ht={lineWise:!1,text:d.getSelections()},w.type=="cut"&&d.replaceSelection("",null,"cut");else if(d.options.lineWiseCopyCut){var $=Ao(d);Ht={lineWise:!0,text:$.text},w.type=="cut"&&d.operation(function(){d.setSelections($.ranges,0,vr),d.replaceSelection("",null,"cut")})}else return;if(w.clipboardData){w.clipboardData.clearData();var B=Ht.text.join(`
`);if(w.clipboardData.setData("Text",B),w.clipboardData.getData("Text")==B){w.preventDefault();return}}var q=Oo();w=q.firstChild,d.display.lineSpace.insertBefore(q,d.display.lineSpace.firstChild),w.value=Ht.text.join(`
`);var te=O(y.ownerDocument);tn(w),setTimeout(function(){d.display.lineSpace.removeChild(q),te.focus(),te==y&&c.showPrimarySelection()},50)}}var l=this,c=this,d=c.cm,y=c.div=e.lineDiv;y.contentEditable=!0,_o(y,d.options.spellcheck,d.options.autocorrect,d.options.autocapitalize),je(y,"paste",function(w){!r(w)||Ce(d,w)||bo(w,d)||11>=mt&&setTimeout(At(d,function(){return l.updateFromDOM()}),20)}),je(y,"compositionstart",function(w){l.composing={data:w.data,done:!1}}),je(y,"compositionupdate",function(w){l.composing||(l.composing={data:w.data,done:!1})}),je(y,"compositionend",function(w){l.composing&&(w.data!=l.composing.data&&l.readFromDOMSoon(),l.composing.done=!0)}),je(y,"touchstart",function(){return c.forceCompositionEnd()}),je(y,"input",function(){l.composing||l.readFromDOMSoon()}),je(y,"copy",a),je(y,"cut",a)},at.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},at.prototype.prepareSelection=function(){var e=_e(this.cm,!1);return e.focus=O(this.div.ownerDocument)==this.div,e},at.prototype.showSelection=function(e,r){e&&this.cm.display.view.length&&((e.focus||r)&&this.showPrimarySelection(),this.showMultipleSelections(e))},at.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},at.prototype.showPrimarySelection=function(){var e=this.getSelection(),r=this.cm,a=r.doc.sel.primary(),l=a.from();if(a=a.to(),r.display.viewTo==r.display.viewFrom||l.line>=r.display.viewTo||a.line<r.display.viewFrom)e.removeAllRanges();else{var c=Gn(r,e.anchorNode,e.anchorOffset),d=Gn(r,e.focusNode,e.focusOffset);if(!c||c.bad||!d||d.bad||De(st(c,d),l)!=0||De(Tt(c,d),a)!=0)if(c=r.display.view,l=l.line>=r.display.viewFrom&&Mo(r,l)||{node:c[0].measure.map[2],offset:0},a=a.line<r.display.viewTo&&Mo(r,a),a||(a=c[c.length-1].measure,a=a.maps?a.maps[a.maps.length-1]:a.map,a={node:a[a.length-1],offset:a[a.length-2]-a[a.length-3]}),l&&a){c=e.rangeCount&&e.getRangeAt(0);try{var y=en(l.node,l.offset,a.offset,a.node)}catch{}y&&(!_r&&r.state.focused?(e.collapse(l.node,l.offset),y.collapsed||(e.removeAllRanges(),e.addRange(y))):(e.removeAllRanges(),e.addRange(y)),c&&e.anchorNode==null?e.addRange(c):_r&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}},at.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},at.prototype.showMultipleSelections=function(e){h(this.cm.display.cursorDiv,e.cursors),h(this.cm.display.selectionDiv,e.selection)},at.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},at.prototype.selectionInEditor=function(){var e=this.getSelection();return e.rangeCount?(e=e.getRangeAt(0).commonAncestorContainer,v(this.div,e)):!1},at.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&(this.selectionInEditor()&&O(this.div.ownerDocument)==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},at.prototype.blur=function(){this.div.blur()},at.prototype.getField=function(){return this.div},at.prototype.supportsTouch=function(){return!0},at.prototype.receivedFocus=function(){function e(){a.cm.state.focused&&(a.pollSelection(),a.polling.set(a.cm.options.pollInterval,e))}var r=this,a=this;this.selectionInEditor()?setTimeout(function(){return r.pollSelection()},20):qt(this.cm,function(){return a.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,e)},at.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},at.prototype.pollSelection=function(){if(this.readDOMTimeout==null&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),r=this.cm;if(Un&&Hr&&this.cm.display.gutterSpecs.length&&xl(e.anchorNode))this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();else if(!this.composing){this.rememberSelection();var a=Gn(r,e.anchorNode,e.anchorOffset),l=Gn(r,e.focusNode,e.focusOffset);a&&l&&qt(r,function(){Ot(r.doc,Ar(a,l),vr),(a.bad||l.bad)&&(r.curOp.selectionChanged=!0)})}}},at.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,r=e.display,a=e.doc.sel.primary(),l=a.from(),c=a.to();if(l.ch==0&&l.line>e.firstLine()&&(l=me(l.line-1,be(e.doc,l.line-1).length)),c.ch==be(e.doc,c.line).text.length&&c.line<e.lastLine()&&(c=me(c.line+1,0)),l.line<r.viewFrom||c.line>r.viewTo-1)return!1;var d;l.line==r.viewFrom||(d=Jt(e,l.line))==0?(a=xe(r.view[0].line),d=r.view[0].node):(a=xe(r.view[d].line),d=r.view[d-1].node.nextSibling);var y=Jt(e,c.line);if(y==r.view.length-1?(c=r.viewTo-1,r=r.lineDiv.lastChild):(c=xe(r.view[y+1].line)-1,r=r.view[y+1].node.previousSibling),!d)return!1;for(r=e.doc.splitLines(yl(e,d,r,a,c)),d=Ne(e.doc,me(a,0),me(c,be(e.doc,c).text.length));1<r.length&&1<d.length;)if(M(r)==M(d))r.pop(),d.pop(),c--;else if(r[0]==d[0])r.shift(),d.shift(),a++;else break;var w=0;y=0;for(var $=r[0],B=d[0],q=Math.min($.length,B.length);w<q&&$.charCodeAt(w)==B.charCodeAt(w);)++w;for($=M(r),B=M(d),q=Math.min($.length-(r.length==1?w:0),B.length-(d.length==1?w:0));y<q&&$.charCodeAt($.length-y-1)==B.charCodeAt(B.length-y-1);)++y;if(r.length==1&&d.length==1&&a==l.line)for(;w&&w>l.ch&&$.charCodeAt($.length-y-1)==B.charCodeAt(B.length-y-1);)w--,y++;if(r[r.length-1]=$.slice(0,$.length-y).replace(/^\u200b+/,""),r[0]=r[0].slice(w).replace(/\u200b+$/,""),l=me(a,w),a=me(c,d.length?M(d).length-y:0),1<r.length||r[0]||De(l,a))return Ti(e.doc,r,l,a,"+input"),!0},at.prototype.ensurePolled=function(){this.forceCompositionEnd()},at.prototype.reset=function(){this.forceCompositionEnd()},at.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},at.prototype.readFromDOMSoon=function(){var e=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing)if(e.composing.done)e.composing=null;else return;e.updateFromDOM()},80))},at.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||qt(this.cm,function(){return It(e.cm)})},at.prototype.setUneditable=function(e){e.contentEditable="false"},at.prototype.onKeyPress=function(e){e.charCode==0||this.composing||(e.preventDefault(),this.cm.isReadOnly()||At(this.cm,ps)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0))},at.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!="nocursor")},at.prototype.onContextMenu=function(){},at.prototype.resetPosition=function(){},at.prototype.needsContentAttribute=!0;var Rt=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new zr,this.hasSelection=!1,this.composing=null,this.resetting=!1};Rt.prototype.init=function(e){function r(y){if(!Ce(c,y)){if(c.somethingSelected())Ht={lineWise:!1,text:c.getSelections()};else if(c.options.lineWiseCopyCut){var w=Ao(c);Ht={lineWise:!0,text:w.text},y.type=="cut"?c.setSelections(w.ranges,null,vr):(l.prevInput="",d.value=w.text.join(`
`),tn(d))}else return;y.type=="cut"&&(c.state.cutIncoming=+new Date)}}var a=this,l=this,c=this.cm;this.createField(e);var d=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),Ji&&(d.style.width="0px"),je(d,"input",function(){tt&&9<=mt&&a.hasSelection&&(a.hasSelection=null),l.poll()}),je(d,"paste",function(y){Ce(c,y)||bo(y,c)||(c.state.pasteIncoming=+new Date,l.fastPoll())}),je(d,"cut",r),je(d,"copy",r),je(e.scroller,"paste",function(y){if(!V(e,y)&&!Ce(c,y))if(d.dispatchEvent){var w=new Event("paste");w.clipboardData=y.clipboardData,d.dispatchEvent(w)}else c.state.pasteIncoming=+new Date,l.focus()}),je(e.lineSpace,"selectstart",function(y){V(e,y)||ee(y)}),je(d,"compositionstart",function(){var y=c.getCursor("from");l.composing&&l.composing.range.clear(),l.composing={start:y,range:c.markText(y,c.getCursor("to"),{className:"CodeMirror-composing"})}}),je(d,"compositionend",function(){l.composing&&(l.poll(),l.composing.range.clear(),l.composing=null)})},Rt.prototype.createField=function(e){this.wrapper=Oo(),this.textarea=this.wrapper.firstChild},Rt.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Rt.prototype.prepareSelection=function(){var e=this.cm,r=e.display,a=e.doc,l=_e(e);if(e.options.moveInputWithCursor){e=jt(e,a.sel.primary().head,"div"),a=r.wrapper.getBoundingClientRect();var c=r.lineDiv.getBoundingClientRect();l.teTop=Math.max(0,Math.min(r.wrapper.clientHeight-10,e.top+c.top-a.top)),l.teLeft=Math.max(0,Math.min(r.wrapper.clientWidth-10,e.left+c.left-a.left))}return l},Rt.prototype.showSelection=function(e){var r=this.cm.display;h(r.cursorDiv,e.cursors),h(r.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Rt.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing&&e)){var r=this.cm;this.resetting=!0,r.somethingSelected()?(this.prevInput="",e=r.getSelection(),this.textarea.value=e,r.state.focused&&tn(this.textarea),tt&&9<=mt&&(this.hasSelection=e)):e||(this.prevInput=this.textarea.value="",tt&&9<=mt&&(this.hasSelection=null)),this.resetting=!1}},Rt.prototype.getField=function(){return this.textarea},Rt.prototype.supportsTouch=function(){return!1},Rt.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!Qi||O(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch{}},Rt.prototype.blur=function(){this.textarea.blur()},Rt.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Rt.prototype.receivedFocus=function(){this.slowPoll()},Rt.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Rt.prototype.fastPoll=function(){function e(){a.poll()||r?(a.pollingFast=!1,a.slowPoll()):(r=!0,a.polling.set(60,e))}var r=!1,a=this;a.pollingFast=!0,a.polling.set(20,e)},Rt.prototype.poll=function(){var e=this,r=this.cm,a=this.textarea,l=this.prevInput;if(this.contextMenuPending||this.resetting||!r.state.focused||Il(a)&&!l&&!this.composing||r.isReadOnly()||r.options.disableInput||r.state.keySeq)return!1;var c=a.value;if(c==l&&!r.somethingSelected())return!1;if(tt&&9<=mt&&this.hasSelection===c||er&&/[\uf700-\uf7ff]/.test(c))return r.display.input.reset(),!1;if(r.doc.sel==r.display.selForContextMenu){var d=c.charCodeAt(0);if(d!=8203||l||(l="​"),d==8666)return this.reset(),this.cm.execCommand("undo")}var y=0;for(d=Math.min(l.length,c.length);y<d&&l.charCodeAt(y)==c.charCodeAt(y);)++y;return qt(r,function(){ps(r,c.slice(y),l.length-y,null,e.composing?"*compose":null),1e3<c.length||-1<c.indexOf(`
`)?a.value=e.prevInput="":e.prevInput=c,e.composing&&(e.composing.range.clear(),e.composing.range=r.markText(e.composing.start,r.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Rt.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Rt.prototype.onKeyPress=function(){tt&&9<=mt&&(this.hasSelection=null),this.fastPoll()},Rt.prototype.onContextMenu=function(e){function r(){if(y.selectionStart!=null){var se=c.somethingSelected(),Re="​"+(se?y.value:"");y.value="⇚",y.value=Re,l.prevInput=se?"":"​",y.selectionStart=1,y.selectionEnd=Re.length,d.selForContextMenu=c.doc.sel}}function a(){if(l.contextMenuPending==a&&(l.contextMenuPending=!1,l.wrapper.style.cssText=q,y.style.cssText=B,tt&&9>mt&&d.scrollbars.setScrollTop(d.scroller.scrollTop=$),y.selectionStart!=null)){(!tt||tt&&9>mt)&&r();var se=0,Re=function(){d.selForContextMenu==c.doc.sel&&y.selectionStart==0&&0<y.selectionEnd&&l.prevInput=="​"?At(c,eo)(c):10>se++?d.detectingSelectAll=setTimeout(Re,500):(d.selForContextMenu=null,d.input.reset())};d.detectingSelectAll=setTimeout(Re,200)}}var l=this,c=l.cm,d=c.display,y=l.textarea;l.contextMenuPending&&l.contextMenuPending();var w=br(c,e),$=d.scroller.scrollTop;if(w&&!or){c.options.resetSelectionOnContextMenu&&c.doc.sel.contains(w)==-1&&At(c,Ot)(c.doc,Ar(w),vr);var B=y.style.cssText,q=l.wrapper.style.cssText;if(w=l.wrapper.offsetParent.getBoundingClientRect(),l.wrapper.style.cssText="position: static",y.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(e.clientY-w.top-5)+"px; left: "+(e.clientX-w.left-5)+`px;
      z-index: 1000; background: `+(tt?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`,Dt)var te=y.ownerDocument.defaultView.scrollY;if(d.input.focus(),Dt&&y.ownerDocument.defaultView.scrollTo(null,te),d.input.reset(),c.somethingSelected()||(y.value=l.prevInput=" "),l.contextMenuPending=a,d.selForContextMenu=c.doc.sel,clearTimeout(d.detectingSelectAll),tt&&9<=mt&&r(),vs){X(e);var ne=function(){he(window,"mouseup",ne),setTimeout(a,20)};je(window,"mouseup",ne)}else setTimeout(a,50)}},Rt.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=e=="nocursor",this.textarea.readOnly=!!e},Rt.prototype.setUneditable=function(){},Rt.prototype.needsContentAttribute=!1,function(e){function r(l,c,d,y){e.defaults[l]=c,d&&(a[l]=y?function(w,$,B){B!=Li&&d(w,$,B)}:d)}var a=e.optionHandlers;e.defineOption=r,e.Init=Li,r("value","",function(l,c){return l.setValue(c)},!0),r("mode",null,function(l,c){l.doc.modeOption=c,os(l)},!0),r("indentUnit",2,os,!0),r("indentWithTabs",!1),r("smartIndent",!0),r("tabSize",4,function(l){zi(l),Br(l),It(l)},!0),r("lineSeparator",null,function(l,c){if(l.doc.lineSep=c){var d=[],y=l.doc.first;l.doc.iter(function($){for(var B=0;;){var q=$.text.indexOf(c,B);if(q==-1)break;B=q+c.length,d.push(me(y,q))}y++});for(var w=d.length-1;0<=w;w--)Ti(l.doc,c,d[w],me(d[w].line,d[w].ch+c.length))}}),r("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(l,c,d){l.state.specialChars=new RegExp(c.source+(c.test("	")?"":"|	"),"g"),d!=Li&&l.refresh()}),r("specialCharPlaceholder",ir,function(l){return l.refresh()},!0),r("electricChars",!0),r("inputStyle",Qi?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor")},!0),r("spellcheck",!1,function(l,c){return l.getInputField().spellcheck=c},!0),r("autocorrect",!1,function(l,c){return l.getInputField().autocorrect=c},!0),r("autocapitalize",!1,function(l,c){return l.getInputField().autocapitalize=c},!0),r("rtlMoveVisually",!bl),r("wholeLineUpdateBefore",!0),r("theme","default",function(l){To(l),Hi(l)},!0),r("keyMap","default",function(l,c,d){c=Dn(c),(d=d!=Li&&Dn(d))&&d.detach&&d.detach(l,c),c.attach&&c.attach(l,d||null)}),r("extraKeys",null),r("configureMouse",null),r("lineWrapping",!1,ml,!0),r("gutters",[],function(l,c){l.display.gutterSpecs=ns(c,l.options.lineNumbers),Hi(l)},!0),r("fixedGutter",!0,function(l,c){l.display.gutters.style.left=c?Fi(l.display)+"px":"0",l.refresh()},!0),r("coverGutterNextToScrollbar",!1,function(l){return Ei(l)},!0),r("scrollbarStyle","native",function(l){$s(l),Ei(l),l.display.scrollbars.setScrollTop(l.doc.scrollTop),l.display.scrollbars.setScrollLeft(l.doc.scrollLeft)},!0),r("lineNumbers",!1,function(l,c){l.display.gutterSpecs=ns(l.options.gutters,c),Hi(l)},!0),r("firstLineNumber",1,Hi,!0),r("lineNumberFormatter",function(l){return l},Hi,!0),r("showCursorWhenSelecting",!1,ve,!0),r("resetSelectionOnContextMenu",!0),r("lineWiseCopyCut",!0),r("pasteLinesPerSelection",!0),r("selectionsMayTouch",!1),r("readOnly",!1,function(l,c){c=="nocursor"&&(Cr(l),l.display.input.blur()),l.display.input.readOnlyChanged(c)}),r("screenReaderLabel",null,function(l,c){l.display.input.screenReaderLabelChanged(c===""?null:c)}),r("disableInput",!1,function(l,c){c||l.display.input.reset()},!0),r("dragDrop",!0,gl),r("allowDropFileTypes",null),r("cursorBlinkRate",530),r("cursorScrollMargin",0),r("cursorHeight",1,ve,!0),r("singleCursorHeightPerLine",!0,ve,!0),r("workTime",100),r("workDelay",100),r("flattenSpans",!0,zi,!0),r("addModeClass",!1,zi,!0),r("pollInterval",100),r("undoDepth",200,function(l,c){return l.doc.history.undoDepth=c}),r("historyEventDelay",1250),r("viewportMargin",10,function(l){return l.refresh()},!0),r("maxHighlightLength",1e4,zi,!0),r("moveInputWithCursor",!0,function(l,c){c||l.display.input.resetPosition()}),r("tabindex",null,function(l,c){return l.display.input.getField().tabIndex=c||""}),r("autofocus",null),r("direction","ltr",function(l,c){return l.doc.setDirection(c)},!0),r("phrases",null)}(xt),function(e){var r=e.optionHandlers,a=e.helpers={};e.prototype={constructor:e,focus:function(){p(this).defaultView.focus(),this.display.input.focus()},setOption:function(l,c){var d=this.options,y=d[l];(d[l]!=c||l=="mode")&&(d[l]=c,r.hasOwnProperty(l)&&At(this,r[l])(this,c,y),ce(this,"optionChange",this,l))},getOption:function(l){return this.options[l]},getDoc:function(){return this.doc},addKeyMap:function(l,c){this.state.keyMaps[c?"push":"unshift"](Dn(l))},removeKeyMap:function(l){for(var c=this.state.keyMaps,d=0;d<c.length;++d)if(c[d]==l||c[d].name==l)return c.splice(d,1),!0},addOverlay:Pt(function(l,c){var d=l.token?l:e.getMode(this.options,l);if(d.startState)throw Error("Overlays may not be stateful.");W(this.state.overlays,{mode:d,modeSpec:l,opaque:c&&c.opaque,priority:c&&c.priority||0},function(y){return y.priority}),this.state.modeGen++,It(this)}),removeOverlay:Pt(function(l){for(var c=this.state.overlays,d=0;d<c.length;++d){var y=c[d].modeSpec;if(y==l||typeof l=="string"&&y.name==l){c.splice(d,1),this.state.modeGen++,It(this);break}}}),indentLine:Pt(function(l,c,d){typeof c!="string"&&typeof c!="number"&&(c=c==null?this.options.smartIndent?"smart":"prev":c?"add":"subtract"),dt(this.doc,l)&&Zi(this,l,c,d)}),indentSelection:Pt(function(l){for(var c=this.doc.sel.ranges,d=-1,y=0;y<c.length;y++){var w=c[y];if(w.empty())w.head.line>d&&(Zi(this,w.head.line,l,!0),d=w.head.line,y==this.doc.sel.primIndex&&yi(this));else{var $=w.from();w=w.to();var B=Math.max(d,$.line);for(d=Math.min(this.lastLine(),w.line-(w.ch?0:1))+1,w=B;w<d;++w)Zi(this,w,l);w=this.doc.sel.ranges,$.ch==0&&c.length==w.length&&0<w[y].from().ch&&cs(this.doc,y,new nt($,w[y].to()),vr)}}}),getTokenAt:function(l,c){return Ae(this,l,c)},getLineTokens:function(l,c){return Ae(this,me(l),c,!0)},getTokenTypeAt:function(l){l=Be(this.doc,l);var c=m(this,be(this.doc,l.line)),d=0,y=(c.length-1)/2;if(l=l.ch,l==0)c=c[2];else for(;;){var w=d+y>>1;if((w?c[2*w-1]:0)>=l)y=w;else if(c[2*w+1]<l)d=w+1;else{c=c[2*w+2];break}}return d=c?c.indexOf("overlay "):-1,0>d?c:d==0?null:c.slice(0,d-1)},getModeAt:function(l){var c=this.doc.mode;return c.innerMode?e.innerMode(c,this.getTokenAt(l).state).mode:c},getHelper:function(l,c){return this.getHelpers(l,c)[0]},getHelpers:function(l,c){var d=[];if(!a.hasOwnProperty(c))return d;var y=a[c];if(l=this.getModeAt(l),typeof l[c]=="string")y[l[c]]&&d.push(y[l[c]]);else if(l[c])for(var w=0;w<l[c].length;w++){var $=y[l[c][w]];$&&d.push($)}else l.helperType&&y[l.helperType]?d.push(y[l.helperType]):y[l.name]&&d.push(y[l.name]);for(c=0;c<y._global.length;c++)w=y._global[c],w.pred(l,this)&&A(d,w.val)==-1&&d.push(w.val);return d},getStateAfter:function(l,c){var d=this.doc;return l=Math.max(d.first,Math.min(l??d.first+d.size-1,d.first+d.size-1)),L(this,l+1,c).state},cursorCoords:function(l,c){var d=this.doc.sel.primary();return l=l==null?d.head:typeof l=="object"?Be(this.doc,l):l?d.from():d.to(),jt(this,l,c||"page")},charCoords:function(l,c){return Zt(this,Be(this.doc,l),c||"page")},coordsChar:function(l,c){return l=Di(this,l,c||"page"),Bi(this,l.left,l.top)},lineAtHeight:function(l,c){return l=Di(this,{top:l,left:0},c||"page").top,ut(this.doc,l+this.display.viewOffset)},heightAtLine:function(l,c,d){var y=!1;if(typeof l=="number"){var w=this.doc.first+this.doc.size-1;l<this.doc.first?l=this.doc.first:l>w&&(l=w,y=!0),l=be(this.doc,l)}return nr(this,l,{top:0,left:0},c||"page",d||y).top+(y?this.doc.height-Ut(l):0)},defaultTextHeight:function(){return Gr(this.display)},defaultCharWidth:function(){return pr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(l,c,d,y,w){var $=this.display;l=jt(this,Be(this.doc,l));var B=l.bottom,q=l.left;if(c.style.position="absolute",c.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(c),$.sizer.appendChild(c),y=="over")B=l.top;else if(y=="above"||y=="near"){var te=Math.max($.wrapper.clientHeight,this.doc.height),ne=Math.max($.sizer.clientWidth,$.lineSpace.clientWidth);(y=="above"||l.bottom+c.offsetHeight>te)&&l.top>c.offsetHeight?B=l.top-c.offsetHeight:l.bottom+c.offsetHeight<=te&&(B=l.bottom),q+c.offsetWidth>ne&&(q=ne-c.offsetWidth)}c.style.top=B+"px",c.style.left=c.style.right="",w=="right"?(q=$.sizer.clientWidth-c.offsetWidth,c.style.right="0px"):(w=="left"?q=0:w=="middle"&&(q=($.sizer.clientWidth-c.offsetWidth)/2),c.style.left=q+"px"),d&&(l=kr(this,{left:q,top:B,right:q+c.offsetWidth,bottom:B+c.offsetHeight}),l.scrollTop!=null&&ki(this,l.scrollTop),l.scrollLeft!=null&&Qr(this,l.scrollLeft))},triggerOnKeyDown:Pt(xo),triggerOnKeyPress:Pt(Eo),triggerOnKeyUp:yo,triggerOnMouseDown:Pt(So),execCommand:function(l){if(dn.hasOwnProperty(l))return dn[l].call(null,this)},triggerElectric:Pt(function(l){Co(this,l)}),findPosH:function(l,c,d,y){var w=1;0>c&&(w=-1,c=-c),l=Be(this.doc,l);for(var $=0;$<c&&(l=gs(this.doc,l,w,d,y),!l.hitSide);++$);return l},moveH:Pt(function(l,c){var d=this;this.extendSelectionsBy(function(y){return d.display.shift||d.doc.extend||y.empty()?gs(d.doc,y.head,l,c,d.options.rtlMoveVisually):0>l?y.from():y.to()},rn)}),deleteH:Pt(function(l,c){var d=this.doc;this.doc.sel.somethingSelected()?d.replaceSelection("",null,"+delete"):Ai(this,function(y){var w=gs(d,y.head,l,c,!1);return 0>l?{from:w,to:y.head}:{from:y.head,to:w}})}),findPosV:function(l,c,d,y){var w=1;0>c&&(w=-1,c=-c);var $=Be(this.doc,l);for(l=0;l<c&&($=jt(this,$,"div"),y==null?y=$.left:$.left=y,$=Io(this,$,w,d),!$.hitSide);++l);return $},moveV:Pt(function(l,c){var d=this,y=this.doc,w=[],$=!this.display.shift&&!y.extend&&y.sel.somethingSelected();if(y.extendSelectionsBy(function(q){if($)return 0>l?q.from():q.to();var te=jt(d,q.head,"div");q.goalColumn!=null&&(te.left=q.goalColumn),w.push(te.left);var ne=Io(d,te,l,c);return c=="page"&&q==y.sel.primary()&&An(d,Zt(d,ne,"div").top-te.top),ne},rn),w.length)for(var B=0;B<y.sel.ranges.length;B++)y.sel.ranges[B].goalColumn=w[B]}),findWordAt:function(l){var c=be(this.doc,l.line).text,d=l.ch,y=l.ch;if(c){var w=this.getHelper(l,"wordChars");l.sticky!="before"&&y!=c.length||!d?++y:--d;var $=c.charAt(d);for($=K($,w)?function(B){return K(B,w)}:/\s/.test($)?function(B){return/\s/.test(B)}:function(B){return!/\s/.test(B)&&!K(B)};0<d&&$(c.charAt(d-1));)--d;for(;y<c.length&&$(c.charAt(y));)++y}return new nt(me(l.line,d),me(l.line,y))},toggleOverwrite:function(l){(l==null||l!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?E(this.display.cursorDiv,"CodeMirror-overwrite"):ii(this.display.cursorDiv,"CodeMirror-overwrite"),ce(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==O(p(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Pt(function(l,c){Wi(this,l,c)}),getScrollInfo:function(){var l=this.display.scroller;return{left:l.scrollLeft,top:l.scrollTop,height:l.scrollHeight-qe(this)-this.display.barHeight,width:l.scrollWidth-qe(this)-this.display.barWidth,clientHeight:vt(this),clientWidth:Ke(this)}},scrollIntoView:Pt(function(l,c){l==null?(l={from:this.doc.sel.primary().head,to:null},c==null&&(c=this.options.cursorScrollMargin)):typeof l=="number"?l={from:me(l,0),to:null}:l.from==null&&(l={from:l,to:null}),l.to||(l.to=l.from),l.margin=c||0,l.from.line!=null?(_n(this),this.curOp.scrollToPos=l):Os(this,l.from,l.to,l.margin)}),setSize:Pt(function(l,c){var d=this,y=function($){return typeof $=="number"||/^\d+$/.test(String($))?$+"px":$};l!=null&&(this.display.wrapper.style.width=y(l)),c!=null&&(this.display.wrapper.style.height=y(c)),this.options.lineWrapping&&yn(this);var w=this.display.viewFrom;this.doc.iter(w,this.display.viewTo,function($){if($.widgets){for(var B=0;B<$.widgets.length;B++)if($.widgets[B].noHScroll){Qt(d,w,"widget");break}}++w}),this.curOp.forceUpdate=!0,ce(this,"refresh",this)}),operation:function(l){return qt(this,l)},startOperation:function(){return ei(this)},endOperation:function(){return ti(this)},refresh:Pt(function(){var l=this.display.cachedTextHeight;It(this),this.curOp.forceUpdate=!0,Br(this),Wi(this,this.doc.scrollLeft,this.doc.scrollTop),rs(this.display),(l==null||.5<Math.abs(l-Gr(this.display))||this.options.lineWrapping)&&mi(this),ce(this,"refresh",this)}),swapDoc:Pt(function(l){var c=this.doc;return c.cm=null,this.state.selectingText&&this.state.selectingText(),Us(this,l),Br(this),this.display.input.reset(),Wi(this,l.scrollLeft,l.scrollTop),this.curOp.forceScroll=!0,gt(this,"swapDoc",this,c),c}),phrase:function(l){var c=this.options.phrases;return c&&Object.prototype.hasOwnProperty.call(c,l)?c[l]:l},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Le(e),e.registerHelper=function(l,c,d){a.hasOwnProperty(l)||(a[l]=e[l]={_global:[]}),a[l][c]=d},e.registerGlobalHelper=function(l,c,d,y){e.registerHelper(l,c,y),a[l]._global.push({pred:d,val:y})}}(xt);var Bl="iter insert remove copy getEditor constructor".split(" "),mn;for(mn in Wt.prototype)Wt.prototype.hasOwnProperty(mn)&&0>A(Bl,mn)&&(xt.prototype[mn]=function(e){return function(){return e.apply(this.doc,arguments)}}(Wt.prototype[mn]));return Le(Wt),xt.inputStyles={textarea:Rt,contenteditable:at},xt.defineMode=function(e){xt.defaults.mode||e=="null"||(xt.defaults.mode=e),ge.apply(this,arguments)},xt.defineMIME=function(e,r){Oi[e]=r},xt.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),xt.defineMIME("text/plain","null"),xt.defineExtension=function(e,r){xt.prototype[e]=r},xt.defineDocExtension=function(e,r){Wt.prototype[e]=r},xt.fromTextArea=function(e,r){function a(){e.value=w.getValue()}if(r=r?C(r):{},r.value=e.value,!r.tabindex&&e.tabIndex&&(r.tabindex=e.tabIndex),!r.placeholder&&e.placeholder&&(r.placeholder=e.placeholder),r.autofocus==null){var l=O(e.ownerDocument);r.autofocus=l==e||e.getAttribute("autofocus")!=null&&l==document.body}if(e.form&&(je(e.form,"submit",a),!r.leaveSubmitMethodAlone)){var c=e.form,d=c.submit;try{var y=c.submit=function(){a(),c.submit=d,c.submit(),c.submit=y}}catch{}}r.finishInit=function($){$.save=a,$.getTextArea=function(){return e},$.toTextArea=function(){$.toTextArea=isNaN,a(),e.parentNode.removeChild($.getWrapperElement()),e.style.display="",e.form&&(he(e.form,"submit",a),r.leaveSubmitMethodAlone||typeof e.form.submit!="function"||(e.form.submit=d))}},e.style.display="none";var w=xt(function($){return e.parentNode.insertBefore($,e.nextSibling)},r);return w},function(e){e.off=he,e.on=je,e.wheelEventPixels=Ko,e.Doc=Wt,e.splitLines=Ss,e.countColumn=P,e.findColumn=T,e.isWordChar=k,e.Pass=qn,e.signal=ce,e.Line=Mi,e.changeEnd=Ur,e.scrollbarModel=Wo,e.Pos=me,e.cmpPos=De,e.modes=Rs,e.mimeModes=Oi,e.resolveMode=ye,e.getMode=Oe,e.modeExtensions=Ii,e.extendMode=F,e.copyState=H,e.startState=Me,e.innerMode=Se,e.commands=dn,e.keyMap=hn,e.keyName=fo,e.isModifierKey=co,e.lookupKey=Ci,e.normalizeKeyMap=sl,e.StringStream=bt,e.SharedTextMarker=an,e.TextMarker=jr,e.LineWidget=ln,e.e_preventDefault=ee,e.e_stopPropagation=ae,e.e_stop=X,e.addClass=E,e.contains=v,e.rmClass=ii,e.keyNames=Vr}(xt),xt.version="5.65.9",xt})}(codemirror)),codemirror.exports}var codemirrorExports=requireCodemirror();const CodeMirror=getDefaultExportFromCjs$1(codemirrorExports);(function(n,t){(function(s){s(requireCodemirror())})(function(s){s.defineMode("javascript",function(o,u){var h,f,g;function v(D,V,Ee){return cr=D,hr=Ee,V}function O(D,V){var Ee=D.next();if(Ee=='"'||Ee=="'")return V.tokenize=E(Ee),V.tokenize(D,V);if(Ee=="."&&D.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return v("number","number");if(Ee=="."&&D.match(".."))return v("spread","meta");if(/[\[\]{}\(\),;:\.]/.test(Ee))return v(Ee);if(Ee=="="&&D.eat(">"))return v("=>","operator");if(Ee=="0"&&D.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return v("number","number");if(/\d/.test(Ee))return D.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),v("number","number");if(Ee=="/"){if(D.eat("*"))return V.tokenize=_,_(D,V);if(D.eat("/"))return D.skipToEnd(),v("comment","comment");if(ir(D,V,1)){e:for(var $e=V=!1;(Ee=D.next())!=null;){if(!V){if(Ee=="/"&&!$e)break e;Ee=="["?$e=!0:$e&&Ee=="]"&&($e=!1)}V=!V&&Ee=="\\"}return D.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),v("regexp","string-2")}return D.eat("="),v("operator","operator",D.current())}if(Ee=="`")return V.tokenize=p,p(D,V);if(Ee=="#"&&D.peek()=="!")return D.skipToEnd(),v("meta","meta");if(Ee=="#"&&D.eatWhile(gt))return v("variable","property");if(Ee=="<"&&D.match("!--")||Ee=="-"&&D.match("->")&&!/\S/.test(D.string.slice(0,D.start)))return D.skipToEnd(),v("comment","comment");if(Xr.test(Ee))return Ee==">"&&V.lexical&&V.lexical.type==">"||(D.eat("=")?Ee!="!"&&Ee!="="||D.eat("="):/[<>*+\-|&?]/.test(Ee)&&(D.eat(Ee),Ee==">"&&D.eat(Ee))),Ee=="?"&&D.eat(".")?v("."):v("operator","operator",D.current());if(gt.test(Ee)){if(D.eatWhile(gt),Ee=D.current(),V.lastType!="."){if(di.propertyIsEnumerable(Ee))return D=di[Ee],v(D.type,D.style,Ee);if(Ee=="async"&&D.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return v("async","keyword",Ee)}return v("variable","variable",Ee)}}function E(D){return function(V,Ee){var $e=!1,qe;if(Er&&V.peek()=="@"&&V.match(wr))return Ee.tokenize=O,v("jsonld-keyword","meta");for(;(qe=V.next())!=null&&(qe!=D||$e);)$e=!$e&&qe=="\\";return $e||(Ee.tokenize=O),v("string","string")}}function _(D,V){for(var Ee=!1,$e;$e=D.next();){if($e=="/"&&Ee){V.tokenize=O;break}Ee=$e=="*"}return v("comment","comment")}function p(D,V){for(var Ee=!1,$e;($e=D.next())!=null;){if(!Ee&&($e=="`"||$e=="$"&&D.eat("{"))){V.tokenize=O;break}Ee=!Ee&&$e=="\\"}return v("quasi","string-2",D.current())}function b(D,V){V.fatArrowAt&&(V.fatArrowAt=null);var Ee=D.string.indexOf("=>",D.start);if(!(0>Ee)){if(et){var $e=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(D.string.slice(D.start,Ee));$e&&(Ee=$e.index)}$e=0;var qe=!1;for(--Ee;0<=Ee;--Ee){var Ke=D.string.charAt(Ee),vt="([{}])".indexOf(Ke);if(0<=vt&&3>vt){if(!$e){++Ee;break}if(--$e==0){Ke=="("&&(qe=!0);break}}else if(3<=vt&&6>vt)++$e;else if(gt.test(Ke))qe=!0;else if(/["'\/`]/.test(Ke))for(;;--Ee){if(Ee==0)return;if(D.string.charAt(Ee-1)==Ke&&D.string.charAt(Ee-2)!="\\"){Ee--;break}}else if(qe&&!$e){++Ee;break}}qe&&!$e&&(V.fatArrowAt=Ee)}}function C(D,V,Ee,$e,qe,Ke){this.indented=D,this.column=V,this.type=Ee,this.prev=qe,this.info=Ke,$e!=null&&(this.align=$e)}function P(D,V,Ee,$e,qe){var Ke=D.cc;for(h=D,f=qe,g=null,fr=Ke,dr=V,D.lexical.hasOwnProperty("align")||(D.lexical.align=!0);;)if((Ke.length?Ke.pop():Xt?Te:fe)(Ee,$e)){for(;Ke.length&&Ke[Ke.length-1].lex;)Ke.pop()();if(g)return g;if(Ee=Ee=="variable")e:if(Sr){for(Ee=D.localVars;Ee;Ee=Ee.next)if(Ee.name==$e){Ee=!0;break e}for(D=D.context;D;D=D.prev)for(Ee=D.vars;Ee;Ee=Ee.next)if(Ee.name==$e){Ee=!0;break e}Ee=void 0}else Ee=!1;return Ee?"variable-2":V}}function A(){for(var D=arguments.length-1;0<=D;D--)fr.push(arguments[D])}function T(){return A.apply(null,arguments),!0}function I(D,V){for(;V;V=V.next)if(V.name==D)return!0;return!1}function M(D){var V=h;if(g="def",Sr){if(V.context){if(V.lexical.info=="var"&&V.context&&V.context.block){var Ee=j(D,V.context);if(Ee!=null){V.context=Ee;return}}else if(!I(D,V.localVars)){V.localVars=new oe(D,V.localVars);return}}u.globalVars&&!I(D,V.globalVars)&&(V.globalVars=new oe(D,V.globalVars))}}function j(D,V){return V?V.block?(D=j(D,V.prev))?D==V.prev?V:new Z(D,V.vars,!0):null:I(D,V.vars)?V:new Z(V.prev,new oe(D,V.vars),!1):null}function W(D){return D=="public"||D=="private"||D=="protected"||D=="abstract"||D=="readonly"}function Z(D,V,Ee){this.prev=D,this.vars=V,this.block=Ee}function oe(D,V){this.name=D,this.next=V}function k(){h.context=new Z(h.context,h.localVars,!1),h.localVars=Dr}function K(){h.context=new Z(h.context,h.localVars,!0),h.localVars=null}function J(){h.localVars=h.context.vars,h.context=h.context.prev}function Q(D,V){var Ee=function(){var $e=h,qe=$e.indented;if($e.lexical.type=="stat")qe=$e.lexical.indented;else for(var Ke=$e.lexical;Ke&&Ke.type==")"&&Ke.align;Ke=Ke.prev)qe=Ke.indented;$e.lexical=new C(qe,f.column(),D,null,$e.lexical,V)};return Ee.lex=!0,Ee}function ie(){var D=h;D.lexical.prev&&(D.lexical.type==")"&&(D.indented=D.lexical.indented),D.lexical=D.lexical.prev)}function ue(D){function V(Ee){return Ee==D?T():D==";"||Ee=="}"||Ee==")"||Ee=="]"?A():T(V)}return V}function fe(D,V){return D=="var"?T(Q("vardef",V),L,ue(";"),ie):D=="keyword a"?T(Q("form"),ce,fe,ie):D=="keyword b"?T(Q("form"),fe,ie):D=="keyword d"?f.match(/^\s*$/,!1)?T():T(Q("stat"),pe,ue(";"),ie):D=="debugger"?T(ue(";")):D=="{"?T(Q("}"),K,ze,ie,J):D==";"?T():D=="if"?(h.lexical.info=="else"&&h.cc[h.cc.length-1]==ie&&h.cc.pop()(),T(Q("form"),ce,fe,ie,Ge)):D=="function"?T(St):D=="for"?T(Q("form"),K,Ye,fe,J,ie):D=="class"||et&&V=="interface"?(g="keyword",T(Q("form",D=="class"?D:V),Lr,ie)):D=="variable"?et&&V=="declare"?(g="keyword",T(fe)):et&&(V=="module"||V=="enum"||V=="type")&&f.match(/^\s*\w/,!1)?(g="keyword",V=="enum"?T(Yr):V=="type"?T(lr,ue("operator"),Ue,ue(";")):T(Q("form"),N,ue("{"),Q("}"),ze,ie,ie)):et&&V=="namespace"?(g="keyword",T(Q("form"),Te,fe,ie)):et&&V=="abstract"?(g="keyword",T(fe)):T(Q("stat"),Oe):D=="switch"?T(Q("form"),ce,ue("{"),Q("}","switch"),K,ze,ie,ie,J):D=="case"?T(Te,ue(":")):D=="default"?T(ue(":")):D=="catch"?T(Q("form"),k,we,fe,ie,J):D=="export"?T(Q("stat"),Bt,ie):D=="import"?T(Q("stat"),ci,ie):D=="async"?T(fe):V=="@"?T(Te,fe):A(Q("stat"),Te,ue(";"),ie)}function we(D){if(D=="(")return T(tr,ue(")"))}function Te(D,V){return Ce(D,V,!1)}function he(D,V){return Ce(D,V,!0)}function ce(D){return D!="("?A():T(Q(")"),pe,ue(")"),ie)}function Ce(D,V,Ee){if(h.fatArrowAt==f.start){var $e=Ee?X:de;if(D=="(")return T(k,Q(")"),be(tr,")"),ie,ue("=>"),$e,J);if(D=="variable")return A(k,N,ue("=>"),$e,J)}return $e=Ee?Le:Ie,Zr.hasOwnProperty(D)?T($e):D=="function"?T(St,$e):D=="class"||et&&V=="interface"?(g="keyword",T(Q("form"),ui,ie)):D=="keyword c"||D=="async"?T(Ee?he:Te):D=="("?T(Q(")"),pe,ue(")"),ie,$e):D=="operator"||D=="spread"?T(Ee?he:Te):D=="["?T(Q("]"),Kr,ie,$e):D=="{"?Ne(H,"}",null,$e):D=="quasi"?A(ee,$e):D=="new"?T(re(Ee)):T()}function pe(D){return D.match(/[;\}\)\],]/)?A():A(Te)}function Ie(D,V){return D==","?T(pe):Le(D,V,!1)}function Le(D,V,Ee){var $e=Ee==0?Ie:Le,qe=Ee==0?Te:he;if(D=="=>")return T(k,Ee?X:de,J);if(D=="operator")return/\+\+|--/.test(V)||et&&V=="!"?T($e):et&&V=="<"&&f.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?T(Q(">"),be(Ue,">"),ie,$e):V=="?"?T(Te,ue(":"),qe):T(qe);if(D=="quasi")return A(ee,$e);if(D!=";"){if(D=="(")return Ne(he,")","call",$e);if(D==".")return T(F,$e);if(D=="[")return T(Q("]"),pe,ue("]"),ie,$e);if(et&&V=="as")return g="keyword",T(Ue,$e);if(D=="regexp")return h.lastType=g="operator",f.backUp(f.pos-f.start-1),T(qe)}}function ee(D,V){return D!="quasi"?A():V.slice(V.length-2)!="${"?T(ee):T(pe,ae)}function ae(D){if(D=="}")return g="string-2",h.tokenize=p,T(ee)}function de(D){return b(f,h),A(D=="{"?fe:Te)}function X(D){return b(f,h),A(D=="{"?fe:he)}function re(D){return function(V){return V=="."?T(D?ye:ge):V=="variable"&&et?T(G,D?Le:Ie):A(D?he:Te)}}function ge(D,V){if(V=="target")return g="keyword",T(Ie)}function ye(D,V){if(V=="target")return g="keyword",T(Le)}function Oe(D){return D==":"?T(ie,fe):A(Ie,ue(";"),ie)}function F(D){if(D=="variable")return g="property",T()}function H(D,V){if(D=="async")return g="property",T(H);if(D=="variable"||dr=="keyword"){if(g="property",V=="get"||V=="set")return T(Se);var Ee;return et&&h.fatArrowAt==f.start&&(Ee=f.match(/^\s*:\s*/,!1))&&(h.fatArrowAt=f.pos+Ee[0].length),T(Me)}if(D=="number"||D=="string")return g=Er?"property":dr+" property",T(Me);if(D=="jsonld-keyword")return T(Me);if(et&&W(V))return g="keyword",T(H);if(D=="[")return T(Te,Xe,ue("]"),Me);if(D=="spread")return T(he,Me);if(V=="*")return g="keyword",T(H);if(D==":")return A(Me)}function Se(D){return D!="variable"?A(Me):(g="property",T(St))}function Me(D){if(D==":")return T(he);if(D=="(")return A(St)}function be(D,V,Ee){function $e(qe,Ke){return(Ee?-1<Ee.indexOf(qe):qe==",")?(qe=h.lexical,qe.info=="call"&&(qe.pos=(qe.pos||0)+1),T(function(vt,Nr){return vt==V||Nr==V?A():A(D)},$e)):qe==V||Ke==V?T():Ee&&-1<Ee.indexOf(";")?A(D):T(ue(V))}return function(qe,Ke){return qe==V||Ke==V?T():A(D,$e)}}function Ne(D,V,Ee){for(var $e=3;$e<arguments.length;$e++)fr.push(arguments[$e]);return T(Q(V,Ee),be(D,V),ie)}function ze(D){return D=="}"?T():A(fe,ze)}function Xe(D,V){if(et){if(D==":")return T(Ue);if(V=="?")return T(Xe)}}function xe(D,V){if(et&&(D==":"||V=="in"))return T(Ue)}function ut(D){if(et&&D==":")return f.match(/^\s*\w+\s+is\b/,!1)?T(Te,dt,Ue):T(Ue)}function dt(D,V){if(V=="is")return g="keyword",T()}function Ue(D,V){if(V=="keyof"||V=="typeof"||V=="infer"||V=="readonly")return g="keyword",T(V=="typeof"?he:Ue);if(D=="variable"||V=="void")return g="type",T(Be);if(V=="|"||V=="&")return T(Ue);if(D=="string"||D=="number"||D=="atom")return T(Be);if(D=="[")return T(Q("]"),be(Ue,"]",","),ie,Be);if(D=="{")return T(Q("}"),De,ie,Be);if(D=="(")return T(be(st,")"),me,Be);if(D=="<")return T(be(Ue,">"),Ue);if(D=="quasi")return A(Et,Be)}function me(D){if(D=="=>")return T(Ue)}function De(D){return D.match(/[\}\)\]]/)?T():D==","||D==";"?T(De):A(Qe,De)}function Qe(D,V){if(D=="variable"||dr=="keyword")return g="property",T(Qe);if(V=="?"||D=="number"||D=="string")return T(Qe);if(D==":")return T(Ue);if(D=="[")return T(ue("variable"),xe,ue("]"),Qe);if(D=="(")return A(it,Qe);if(!D.match(/[;\}\)\],]/))return T()}function Et(D,V){return D!="quasi"?A():V.slice(V.length-2)!="${"?T(Et):T(Ue,Tt)}function Tt(D){if(D=="}")return g="string-2",h.tokenize=p,T(Et)}function st(D,V){return D=="variable"&&f.match(/^\s*[?:]/,!1)||V=="?"?T(st):D==":"?T(Ue):D=="spread"?T(st):A(Ue)}function Be(D,V){if(V=="<")return T(Q(">"),be(Ue,">"),ie,Be);if(V=="|"||D=="."||V=="&")return T(Ue);if(D=="[")return T(Ue,ue("]"),Be);if(V=="extends"||V=="implements")return g="keyword",T(Ue);if(V=="?")return T(Ue,ue(":"),Ue)}function G(D,V){if(V=="<")return T(Q(">"),be(Ue,">"),ie,Be)}function x(){return A(Ue,m)}function m(D,V){if(V=="=")return T(Ue)}function L(D,V){return V=="enum"?(g="keyword",T(Yr)):A(N,Xe,Ae,Fe)}function N(D,V){if(et&&W(V))return g="keyword",T(N);if(D=="variable")return M(V),T();if(D=="spread")return T(N);if(D=="[")return Ne(le,"]");if(D=="{")return Ne(Y,"}")}function Y(D,V){return D=="variable"&&!f.match(/^\s*:/,!1)?(M(V),T(Ae)):(D=="variable"&&(g="property"),D=="spread"?T(N):D=="}"?A():D=="["?T(Te,ue("]"),ue(":"),Y):T(ue(":"),N,Ae))}function le(){return A(N,Ae)}function Ae(D,V){if(V=="=")return T(he)}function Fe(D){if(D==",")return T(L)}function Ge(D,V){if(D=="keyword b"&&V=="else")return T(Q("form","else"),fe,ie)}function Ye(D,V){if(V=="await")return T(Ye);if(D=="(")return T(Q(")"),He,ie)}function He(D){return D=="var"?T(L,Je):D=="variable"?T(Je):A(Je)}function Je(D,V){return D==")"?T():D==";"?T(Je):V=="in"||V=="of"?(g="keyword",T(Te,Je)):A(Te,Je)}function St(D,V){if(V=="*")return g="keyword",T(St);if(D=="variable")return M(V),T(St);if(D=="(")return T(k,Q(")"),be(tr,")"),ie,ut,fe,J);if(et&&V=="<")return T(Q(">"),be(x,">"),ie,St)}function it(D,V){if(V=="*")return g="keyword",T(it);if(D=="variable")return M(V),T(it);if(D=="(")return T(k,Q(")"),be(tr,")"),ie,ut,J);if(et&&V=="<")return T(Q(">"),be(x,">"),ie,it)}function lr(D,V){if(D=="keyword"||D=="variable")return g="type",T(lr);if(V=="<")return T(Q(">"),be(x,">"),ie)}function tr(D,V){return V=="@"&&T(Te,tr),D=="spread"?T(tr):et&&W(V)?(g="keyword",T(tr)):et&&D=="this"?T(Xe,Ae):A(N,Xe,Ae)}function ui(D,V){return D=="variable"?Lr(D,V):rr(D,V)}function Lr(D,V){if(D=="variable")return M(V),T(rr)}function rr(D,V){if(V=="<")return T(Q(">"),be(x,">"),ie,rr);if(V=="extends"||V=="implements"||et&&D==",")return V=="implements"&&(g="keyword"),T(et?Ue:Te,rr);if(D=="{")return T(Q("}"),yt,ie)}function yt(D,V){if(D=="async"||D=="variable"&&(V=="static"||V=="get"||V=="set"||et&&W(V))&&f.match(/^\s+[\w$\xa1-\uffff]/,!1))return g="keyword",T(yt);if(D=="variable"||dr=="keyword")return g="property",T(yr,yt);if(D=="number"||D=="string")return T(yr,yt);if(D=="[")return T(Te,Xe,ue("]"),yr,yt);if(V=="*")return g="keyword",T(yt);if(et&&D=="(")return A(it,yt);if(D==";"||D==",")return T(yt);if(D=="}")return T();if(V=="@")return T(Te,yt)}function yr(D,V){return V=="!"||V=="?"?T(yr):D==":"?T(Ue,Ae):V=="="?T(he):(D=h.lexical.prev,A(D&&D.info=="interface"?it:St))}function Bt(D,V){return V=="*"?(g="keyword",T(ar,ue(";"))):V=="default"?(g="keyword",T(Te,ue(";"))):D=="{"?T(be(Pr,"}"),ar,ue(";")):A(fe)}function Pr(D,V){if(V=="as")return g="keyword",T(ue("variable"));if(D=="variable")return A(he,Pr)}function ci(D){return D=="string"?T():D=="("?A(Te):D=="."?A(Ie):A(Ft,$t,ar)}function Ft(D,V){return D=="{"?Ne(Ft,"}"):(D=="variable"&&M(V),V=="*"&&(g="keyword"),T(Ut))}function $t(D){if(D==",")return T(Ft,$t)}function Ut(D,V){if(V=="as")return g="keyword",T(Ft)}function ar(D,V){if(V=="from")return g="keyword",T(Te)}function Kr(D){return D=="]"?T():A(be(he,"]"))}function Yr(){return A(Q("form"),N,ue("{"),Q("}"),be(hi,"}"),ie,ie)}function hi(){return A(N,Ae)}function ir(D,V,Ee){return V.tokenize==O&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(V.lastType)||V.lastType=="quasi"&&/\{\s*$/.test(D.string.slice(0,D.pos-(Ee||0)))}var ur=o.indentUnit,fi=u.statementIndent,Er=u.jsonld,Xt=u.json||Er,Sr=u.trackScope!==!1,et=u.typescript,gt=u.wordCharacters||/[\w$\xa1-\uffff]/,di=function(){function D(Nr){return{type:Nr,style:"keyword"}}var V=D("keyword a"),Ee=D("keyword b"),$e=D("keyword c"),qe=D("keyword d"),Ke=D("operator"),vt={type:"atom",style:"atom"};return{if:D("if"),while:V,with:V,else:Ee,do:Ee,try:Ee,finally:Ee,return:qe,break:qe,continue:qe,new:D("new"),delete:$e,void:$e,throw:$e,debugger:D("debugger"),var:D("var"),const:D("var"),let:D("var"),function:D("function"),catch:D("catch"),for:D("for"),switch:D("switch"),case:D("case"),default:D("default"),in:Ke,typeof:Ke,instanceof:Ke,true:vt,false:vt,null:vt,undefined:vt,NaN:vt,Infinity:vt,this:D("this"),class:D("class"),super:D("atom"),yield:$e,export:D("export"),import:D("import"),extends:$e,await:$e}}(),Xr=/[+\-*&%=<>!?|~^@]/,wr=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,cr,hr,Zr={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0},fr=g=h=null,dr=f=void 0,Dr=new oe("this",new oe("arguments",null));return k.lex=K.lex=!0,J.lex=!0,ie.lex=!0,{startState:function(D){return D={tokenize:O,lastType:"sof",cc:[],lexical:new C((D||0)-ur,0,"block",!1),localVars:u.localVars,context:u.localVars&&new Z(null,null,!1),indented:D||0},u.globalVars&&typeof u.globalVars=="object"&&(D.globalVars=u.globalVars),D},token:function(D,V){if(D.sol()&&(V.lexical.hasOwnProperty("align")||(V.lexical.align=!1),V.indented=D.indentation(),b(D,V)),V.tokenize!=_&&D.eatSpace())return null;var Ee=V.tokenize(D,V);return cr=="comment"?Ee:(V.lastType=cr!="operator"||hr!="++"&&hr!="--"?cr:"incdec",P(V,Ee,cr,hr,D))},indent:function(D,V){if(D.tokenize==_||D.tokenize==p)return s.Pass;if(D.tokenize!=O)return 0;var Ee=V&&V.charAt(0),$e=D.lexical,qe;if(!/^\s*else\b/.test(V))for(var Ke=D.cc.length-1;0<=Ke;--Ke){var vt=D.cc[Ke];if(vt==ie)$e=$e.prev;else if(vt!=Ge&&vt!=J)break}for(;!($e.type!="stat"&&$e.type!="form"||Ee!="}"&&(!(qe=D.cc[D.cc.length-1])||qe!=Ie&&qe!=Le||/^[,\.=+\-*:?[\(]/.test(V)));)$e=$e.prev;return fi&&$e.type==")"&&$e.prev.type=="stat"&&($e=$e.prev),qe=$e.type,Ke=Ee==qe,qe=="vardef"?$e.indented+(D.lastType=="operator"||D.lastType==","?$e.info.length+1:0):qe=="form"&&Ee=="{"?$e.indented:qe=="form"?$e.indented+ur:qe=="stat"?(Ee=$e.indented,D=D.lastType=="operator"||D.lastType==","||Xr.test(V.charAt(0))||/[,.]/.test(V.charAt(0)),Ee+(D?fi||ur:0)):$e.info!="switch"||Ke||u.doubleIndentSwitch==0?$e.align?$e.column+(Ke?0:1):$e.indented+(Ke?0:ur):$e.indented+(/^(?:case|default)\b/.test(V)?ur:2*ur)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:Xt?null:"/*",blockCommentEnd:Xt?null:"*/",blockCommentContinue:Xt?null:" * ",lineComment:Xt?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:Xt?"json":"javascript",jsonldMode:Er,jsonMode:Xt,expressionAllowed:ir,skipExpression:function(D){P(D,"atom","atom","true",new s.StringStream("",2,null))}}}),s.registerHelper("wordChars","javascript",/[\w$]/),s.defineMIME("text/javascript","javascript"),s.defineMIME("text/ecmascript","javascript"),s.defineMIME("application/javascript","javascript"),s.defineMIME("application/x-javascript","javascript"),s.defineMIME("application/ecmascript","javascript"),s.defineMIME("application/json",{name:"javascript",json:!0}),s.defineMIME("application/x-json",{name:"javascript",json:!0}),s.defineMIME("application/manifest+json",{name:"javascript",json:!0}),s.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),s.defineMIME("text/typescript",{name:"javascript",typescript:!0}),s.defineMIME("application/typescript",{name:"javascript",typescript:!0})})})();class Editor extends EventEmitter$4{constructor(t){super();const s={mode:{name:"javascript",globalVars:!0},value:"dosis",theme:"tomorrow-night-eighties",extraKeys:this.extraKeys()};this.cm=CodeMirror.fromTextArea(t,s),window.cm=this.cm,this.cm.refresh(),this.cm.setValue(`
 
 console.log("Escapar de la pantalla") 

 toplap Bogotá ::  CTRL+enter`)}extraKeys(){return self=this,{"Ctrl-Enter":function(t){var s=self.selectLine(t);self.emit("eval",s),self.localStorageSave(t)}}}selectLine(t){const s=t.getLine(t.getCursor().line);let o=t.doc.getValue(),u=JSON.stringify({code:o});return localStorage.setItem(APP_NAME,u),s}selectCurrentBlock(t){for(var s=t.getCursor(),o=s.line,u=s.line,h=t.getLine(o).trim();o>0&&h!=="";)o--,h=t.getLine(o).trim();for(h=t.getLine(u).trim();u<t.lineCount()&&h!=="";)u++,h=t.getLine(u).trim();var f={line:o,ch:0},g={line:u,ch:0},v=t.getRange(f,g);return v}localStorageSave(t){let s=t.doc.getValue(),o=JSON.stringify({code:s});localStorage.setItem(APP_NAME,o)}}function handleEval(codeText){console.log("handleEval codeText: ",codeText),eval(codeText)}const editorTextArea=document.querySelector("textarea"),editor=new Editor(editorTextArea);editor.on("eval",handleEval);global$1.APP_NAME="org.toplap.bogota.dosis";
