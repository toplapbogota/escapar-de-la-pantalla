(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.19.2
 * @author George Michael Brower
 * @license MIT
 */class wt{constructor(e,i,r,n,s="div"){this.parent=e,this.object=i,this.property=r,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement(s),this.domElement.classList.add("controller"),this.domElement.classList.add(n),this.$name=document.createElement("div"),this.$name.classList.add("name"),wt.nextNameID=wt.nextNameID||0,this.$name.id=`lil-gui-name-${++wt.nextNameID}`,this.$widget=document.createElement("div"),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.domElement.addEventListener("keydown",o=>o.stopPropagation()),this.domElement.addEventListener("keyup",o=>o.stopPropagation()),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(r)}name(e){return this._name=e,this.$name.textContent=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled?this:(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e),this)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(e){const i=this.parent.add(this.object,this.property,e);return i.name(this._name),this.destroy(),i}min(e){return this}max(e){return this}step(e){return this}decimals(e){return this}listen(e=!0){return this._listening=e,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.getValue()!==e&&(this.object[this.property]=e,this._callOnChange(),this.updateDisplay()),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class Zh extends wt{constructor(e,i,r){super(e,i,r,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function go(t){let e,i;return(e=t.match(/(#|0x)?([a-f0-9]{6})/i))?i=e[2]:(e=t.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?i=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=t.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(i=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),i?"#"+i:!1}const Jh={isPrimitive:!0,match:t=>typeof t=="string",fromHexString:go,toHexString:go},Vi={isPrimitive:!0,match:t=>typeof t=="number",fromHexString:t=>parseInt(t.substring(1),16),toHexString:t=>"#"+t.toString(16).padStart(6,0)},ef={isPrimitive:!1,match:t=>Array.isArray(t),fromHexString(t,e,i=1){const r=Vi.fromHexString(t);e[0]=(r>>16&255)/255*i,e[1]=(r>>8&255)/255*i,e[2]=(r&255)/255*i},toHexString([t,e,i],r=1){r=255/r;const n=t*r<<16^e*r<<8^i*r<<0;return Vi.toHexString(n)}},tf={isPrimitive:!1,match:t=>Object(t)===t,fromHexString(t,e,i=1){const r=Vi.fromHexString(t);e.r=(r>>16&255)/255*i,e.g=(r>>8&255)/255*i,e.b=(r&255)/255*i},toHexString({r:t,g:e,b:i},r=1){r=255/r;const n=t*r<<16^e*r<<8^i*r<<0;return Vi.toHexString(n)}},rf=[Jh,Vi,ef,tf];function nf(t){return rf.find(e=>e.match(t))}class sf extends wt{constructor(e,i,r,n){super(e,i,r,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=nf(this.initialValue),this._rgbScale=n,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const s=go(this.$text.value);s&&this._setValueFromHexString(s)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const i=this._format.fromHexString(e);this.setValue(i)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class fn extends wt{constructor(e,i,r){super(e,i,r,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",n=>{n.preventDefault(),this.getValue().call(this.object),this._callOnChange()}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class of extends wt{constructor(e,i,r,n,s,o){super(e,i,r,"number"),this._initInput(),this.min(n),this.max(s);const u=o!==void 0;this.step(u?o:this._getImplicitStep(),u),this.updateDisplay()}decimals(e){return this._decimals=e,this.updateDisplay(),this}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,i=!0){return this._step=e,this._stepExplicit=i,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let i=(e-this._min)/(this._max-this._min);i=Math.max(0,Math.min(i,1)),this.$fill.style.width=i*100+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?e:e.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),window.matchMedia("(pointer: coarse)").matches&&(this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any")),this.$widget.appendChild(this.$input),this.$disable=this.$input;const i=()=>{let E=parseFloat(this.$input.value);isNaN(E)||(this._stepExplicit&&(E=this._snap(E)),this.setValue(this._clamp(E)))},r=E=>{const b=parseFloat(this.$input.value);isNaN(b)||(this._snapClampSetValue(b+E),this.$input.value=this.getValue())},n=E=>{E.key==="Enter"&&this.$input.blur(),E.code==="ArrowUp"&&(E.preventDefault(),r(this._step*this._arrowKeyMultiplier(E))),E.code==="ArrowDown"&&(E.preventDefault(),r(this._step*this._arrowKeyMultiplier(E)*-1))},s=E=>{this._inputFocused&&(E.preventDefault(),r(this._step*this._normalizeMouseWheel(E)))};let o=!1,u,h,g,f,x;const a=5,d=E=>{u=E.clientX,h=g=E.clientY,o=!0,f=this.getValue(),x=0,window.addEventListener("mousemove",p),window.addEventListener("mouseup",R)},p=E=>{if(o){const b=E.clientX-u,C=E.clientY-h;Math.abs(C)>a?(E.preventDefault(),this.$input.blur(),o=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(b)>a&&R()}if(!o){const b=E.clientY-g;x-=b*this._step*this._arrowKeyMultiplier(E),f+x>this._max?x=this._max-f:f+x<this._min&&(x=this._min-f),this._snapClampSetValue(f+x)}g=E.clientY},R=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",R)},v=()=>{this._inputFocused=!0},m=()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()};this.$input.addEventListener("input",i),this.$input.addEventListener("keydown",n),this.$input.addEventListener("wheel",s,{passive:!1}),this.$input.addEventListener("mousedown",d),this.$input.addEventListener("focus",v),this.$input.addEventListener("blur",m)}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const e=(m,E,b,C,w)=>(m-E)/(b-E)*(w-C)+C,i=m=>{const E=this.$slider.getBoundingClientRect();let b=e(m,E.left,E.right,this._min,this._max);this._snapClampSetValue(b)},r=m=>{this._setDraggingStyle(!0),i(m.clientX),window.addEventListener("mousemove",n),window.addEventListener("mouseup",s)},n=m=>{i(m.clientX)},s=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",s)};let o=!1,u,h;const g=m=>{m.preventDefault(),this._setDraggingStyle(!0),i(m.touches[0].clientX),o=!1},f=m=>{m.touches.length>1||(this._hasScrollBar?(u=m.touches[0].clientX,h=m.touches[0].clientY,o=!0):g(m),window.addEventListener("touchmove",x,{passive:!1}),window.addEventListener("touchend",a))},x=m=>{if(o){const E=m.touches[0].clientX-u,b=m.touches[0].clientY-h;Math.abs(E)>Math.abs(b)?g(m):(window.removeEventListener("touchmove",x),window.removeEventListener("touchend",a))}else m.preventDefault(),i(m.touches[0].clientX)},a=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",x),window.removeEventListener("touchend",a)},d=this._callOnFinishChange.bind(this),p=400;let R;const v=m=>{if(Math.abs(m.deltaX)<Math.abs(m.deltaY)&&this._hasScrollBar)return;m.preventDefault();const b=this._normalizeMouseWheel(m)*this._step;this._snapClampSetValue(this.getValue()+b),this.$input.value=this.getValue(),clearTimeout(R),R=setTimeout(d,p)};this.$slider.addEventListener("mousedown",r),this.$slider.addEventListener("touchstart",f,{passive:!1}),this.$slider.addEventListener("wheel",v,{passive:!1})}_setDraggingStyle(e,i="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle(`lil-gui-${i}`,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:i,deltaY:r}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(i=0,r=-e.wheelDelta/120,r*=this._stepExplicit?1:10),i+-r}_arrowKeyMultiplier(e){let i=this._stepExplicit?1:10;return e.shiftKey?i*=10:e.altKey&&(i/=10),i}_snap(e){const i=Math.round(e/this._step)*this._step;return parseFloat(i.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class af extends wt{constructor(e,i,r,n){super(e,i,r,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.options(n)}options(e){return this._values=Array.isArray(e)?e:Object.values(e),this._names=Array.isArray(e)?e:Object.keys(e),this.$select.replaceChildren(),this._names.forEach(i=>{const r=document.createElement("option");r.textContent=i,this.$select.appendChild(r)}),this.updateDisplay(),this}updateDisplay(){const e=this.getValue(),i=this._values.indexOf(e);return this.$select.selectedIndex=i,this.$display.textContent=i===-1?e:this._names[i],this}}class lf extends wt{constructor(e,i,r){super(e,i,r,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("spellcheck","false"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",n=>{n.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}const uf=`.lil-gui {
  font-family: var(--font-family);
  font-size: var(--font-size);
  line-height: 1;
  font-weight: normal;
  font-style: normal;
  text-align: left;
  color: var(--text-color);
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  --background-color: #1f1f1f;
  --text-color: #ebebeb;
  --title-background-color: #111111;
  --title-text-color: #ebebeb;
  --widget-color: #424242;
  --hover-color: #4f4f4f;
  --focus-color: #595959;
  --number-color: #2cc9ff;
  --string-color: #a2db3c;
  --font-size: 11px;
  --input-font-size: 11px;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;
  --padding: 4px;
  --spacing: 4px;
  --widget-height: 20px;
  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);
  --name-width: 45%;
  --slider-knob-width: 2px;
  --slider-input-width: 27%;
  --color-input-width: 27%;
  --slider-input-min-width: 45px;
  --color-input-min-width: 45px;
  --folder-indent: 7px;
  --widget-padding: 0 0 0 3px;
  --widget-border-radius: 2px;
  --checkbox-size: calc(0.75 * var(--widget-height));
  --scrollbar-width: 5px;
}
.lil-gui, .lil-gui * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
.lil-gui.root {
  width: var(--width, 245px);
  display: flex;
  flex-direction: column;
  background: var(--background-color);
}
.lil-gui.root > .title {
  background: var(--title-background-color);
  color: var(--title-text-color);
}
.lil-gui.root > .children {
  overflow-x: hidden;
  overflow-y: auto;
}
.lil-gui.root > .children::-webkit-scrollbar {
  width: var(--scrollbar-width);
  height: var(--scrollbar-width);
  background: var(--background-color);
}
.lil-gui.root > .children::-webkit-scrollbar-thumb {
  border-radius: var(--scrollbar-width);
  background: var(--focus-color);
}
@media (pointer: coarse) {
  .lil-gui.allow-touch-styles, .lil-gui.allow-touch-styles .lil-gui {
    --widget-height: 28px;
    --padding: 6px;
    --spacing: 6px;
    --font-size: 13px;
    --input-font-size: 16px;
    --folder-indent: 10px;
    --scrollbar-width: 7px;
    --slider-input-min-width: 50px;
    --color-input-min-width: 65px;
  }
}
.lil-gui.force-touch-styles, .lil-gui.force-touch-styles .lil-gui {
  --widget-height: 28px;
  --padding: 6px;
  --spacing: 6px;
  --font-size: 13px;
  --input-font-size: 16px;
  --folder-indent: 10px;
  --scrollbar-width: 7px;
  --slider-input-min-width: 50px;
  --color-input-min-width: 65px;
}
.lil-gui.autoPlace {
  max-height: 100%;
  position: fixed;
  top: 0;
  right: 15px;
  z-index: 1001;
}

.lil-gui .controller {
  display: flex;
  align-items: center;
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
}
.lil-gui .controller.disabled {
  opacity: 0.5;
}
.lil-gui .controller.disabled, .lil-gui .controller.disabled * {
  pointer-events: none !important;
}
.lil-gui .controller > .name {
  min-width: var(--name-width);
  flex-shrink: 0;
  white-space: pre;
  padding-right: var(--spacing);
  line-height: var(--widget-height);
}
.lil-gui .controller .widget {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  min-height: var(--widget-height);
}
.lil-gui .controller.string input {
  color: var(--string-color);
}
.lil-gui .controller.boolean {
  cursor: pointer;
}
.lil-gui .controller.color .display {
  width: 100%;
  height: var(--widget-height);
  border-radius: var(--widget-border-radius);
  position: relative;
}
@media (hover: hover) {
  .lil-gui .controller.color .display:hover:before {
    content: " ";
    display: block;
    position: absolute;
    border-radius: var(--widget-border-radius);
    border: 1px solid #fff9;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
.lil-gui .controller.color input[type=color] {
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.lil-gui .controller.color input[type=text] {
  margin-left: var(--spacing);
  font-family: var(--font-family-mono);
  min-width: var(--color-input-min-width);
  width: var(--color-input-width);
  flex-shrink: 0;
}
.lil-gui .controller.option select {
  opacity: 0;
  position: absolute;
  width: 100%;
  max-width: 100%;
}
.lil-gui .controller.option .display {
  position: relative;
  pointer-events: none;
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  line-height: var(--widget-height);
  max-width: 100%;
  overflow: hidden;
  word-break: break-all;
  padding-left: 0.55em;
  padding-right: 1.75em;
  background: var(--widget-color);
}
@media (hover: hover) {
  .lil-gui .controller.option .display.focus {
    background: var(--focus-color);
  }
}
.lil-gui .controller.option .display.active {
  background: var(--focus-color);
}
.lil-gui .controller.option .display:after {
  font-family: "lil-gui";
  content: "↕";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding-right: 0.375em;
}
.lil-gui .controller.option .widget,
.lil-gui .controller.option select {
  cursor: pointer;
}
@media (hover: hover) {
  .lil-gui .controller.option .widget:hover .display {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number input {
  color: var(--number-color);
}
.lil-gui .controller.number.hasSlider input {
  margin-left: var(--spacing);
  width: var(--slider-input-width);
  min-width: var(--slider-input-min-width);
  flex-shrink: 0;
}
.lil-gui .controller.number .slider {
  width: 100%;
  height: var(--widget-height);
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  padding-right: var(--slider-knob-width);
  overflow: hidden;
  cursor: ew-resize;
  touch-action: pan-y;
}
@media (hover: hover) {
  .lil-gui .controller.number .slider:hover {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number .slider.active {
  background: var(--focus-color);
}
.lil-gui .controller.number .slider.active .fill {
  opacity: 0.95;
}
.lil-gui .controller.number .fill {
  height: 100%;
  border-right: var(--slider-knob-width) solid var(--number-color);
  box-sizing: content-box;
}

.lil-gui-dragging .lil-gui {
  --hover-color: var(--widget-color);
}
.lil-gui-dragging * {
  cursor: ew-resize !important;
}

.lil-gui-dragging.lil-gui-vertical * {
  cursor: ns-resize !important;
}

.lil-gui .title {
  height: var(--title-height);
  line-height: calc(var(--title-height) - 4px);
  font-weight: 600;
  padding: 0 var(--padding);
  -webkit-tap-highlight-color: transparent;
  cursor: pointer;
  outline: none;
  text-decoration-skip: objects;
}
.lil-gui .title:before {
  font-family: "lil-gui";
  content: "▾";
  padding-right: 2px;
  display: inline-block;
}
.lil-gui .title:active {
  background: var(--title-background-color);
  opacity: 0.75;
}
@media (hover: hover) {
  body:not(.lil-gui-dragging) .lil-gui .title:hover {
    background: var(--title-background-color);
    opacity: 0.85;
  }
  .lil-gui .title:focus {
    text-decoration: underline var(--focus-color);
  }
}
.lil-gui.root > .title:focus {
  text-decoration: none !important;
}
.lil-gui.closed > .title:before {
  content: "▸";
}
.lil-gui.closed > .children {
  transform: translateY(-7px);
  opacity: 0;
}
.lil-gui.closed:not(.transition) > .children {
  display: none;
}
.lil-gui.transition > .children {
  transition-duration: 300ms;
  transition-property: height, opacity, transform;
  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);
  overflow: hidden;
  pointer-events: none;
}
.lil-gui .children:empty:before {
  content: "Empty";
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
  display: block;
  height: var(--widget-height);
  font-style: italic;
  line-height: var(--widget-height);
  opacity: 0.5;
}
.lil-gui.root > .children > .lil-gui > .title {
  border: 0 solid var(--widget-color);
  border-width: 1px 0;
  transition: border-color 300ms;
}
.lil-gui.root > .children > .lil-gui.closed > .title {
  border-bottom-color: transparent;
}
.lil-gui + .controller {
  border-top: 1px solid var(--widget-color);
  margin-top: 0;
  padding-top: var(--spacing);
}
.lil-gui .lil-gui .lil-gui > .title {
  border: none;
}
.lil-gui .lil-gui .lil-gui > .children {
  border: none;
  margin-left: var(--folder-indent);
  border-left: 2px solid var(--widget-color);
}
.lil-gui .lil-gui .controller {
  border: none;
}

.lil-gui label, .lil-gui input, .lil-gui button {
  -webkit-tap-highlight-color: transparent;
}
.lil-gui input {
  border: 0;
  outline: none;
  font-family: var(--font-family);
  font-size: var(--input-font-size);
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  background: var(--widget-color);
  color: var(--text-color);
  width: 100%;
}
@media (hover: hover) {
  .lil-gui input:hover {
    background: var(--hover-color);
  }
  .lil-gui input:active {
    background: var(--focus-color);
  }
}
.lil-gui input:disabled {
  opacity: 1;
}
.lil-gui input[type=text],
.lil-gui input[type=number] {
  padding: var(--widget-padding);
  -moz-appearance: textfield;
}
.lil-gui input[type=text]:focus,
.lil-gui input[type=number]:focus {
  background: var(--focus-color);
}
.lil-gui input[type=checkbox] {
  appearance: none;
  width: var(--checkbox-size);
  height: var(--checkbox-size);
  border-radius: var(--widget-border-radius);
  text-align: center;
  cursor: pointer;
}
.lil-gui input[type=checkbox]:checked:before {
  font-family: "lil-gui";
  content: "✓";
  font-size: var(--checkbox-size);
  line-height: var(--checkbox-size);
}
@media (hover: hover) {
  .lil-gui input[type=checkbox]:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button {
  outline: none;
  cursor: pointer;
  font-family: var(--font-family);
  font-size: var(--font-size);
  color: var(--text-color);
  width: 100%;
  height: var(--widget-height);
  text-transform: none;
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  border: none;
}
@media (hover: hover) {
  .lil-gui button:hover {
    background: var(--hover-color);
  }
  .lil-gui button:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button:active {
  background: var(--focus-color);
}

@font-face {
  font-family: "lil-gui";
  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");
}`;function cf(t){const e=document.createElement("style");e.innerHTML=t;const i=document.querySelector("head link[rel=stylesheet], head style");i?document.head.insertBefore(e,i):document.head.appendChild(e)}let Ia=!1;class Wo{constructor({parent:e,autoPlace:i=e===void 0,container:r,width:n,title:s="Controls",closeFolders:o=!1,injectStyles:u=!0,touchStyles:h=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",g=>{(g.code==="Enter"||g.code==="Space")&&(g.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(s),this.parent){this.parent.children.push(this),this.parent.folders.push(this),this.parent.$children.appendChild(this.domElement);return}this.domElement.classList.add("root"),h&&this.domElement.classList.add("allow-touch-styles"),!Ia&&u&&(cf(uf),Ia=!0),r?r.appendChild(this.domElement):i&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),n&&this.domElement.style.setProperty("--width",n+"px"),this._closeFolders=o}add(e,i,r,n,s){if(Object(r)===r)return new af(this,e,i,r);const o=e[i];switch(typeof o){case"number":return new of(this,e,i,r,n,s);case"boolean":return new Zh(this,e,i);case"string":return new lf(this,e,i);case"function":return new fn(this,e,i)}console.error(`gui.add failed
	property:`,i,`
	object:`,e,`
	value:`,o)}addColor(e,i,r=1){return new sf(this,e,i,r)}addFolder(e){const i=new Wo({parent:this,title:e});return this.root._closeFolders&&i.close(),i}load(e,i=!0){return e.controllers&&this.controllers.forEach(r=>{r instanceof fn||r._name in e.controllers&&r.load(e.controllers[r._name])}),i&&e.folders&&this.folders.forEach(r=>{r._title in e.folders&&r.load(e.folders[r._title])}),this}save(e=!0){const i={controllers:{},folders:{}};return this.controllers.forEach(r=>{if(!(r instanceof fn)){if(r._name in i.controllers)throw new Error(`Cannot save GUI with duplicate property "${r._name}"`);i.controllers[r._name]=r.save()}}),e&&this.folders.forEach(r=>{if(r._title in i.folders)throw new Error(`Cannot save GUI with duplicate folder "${r._title}"`);i.folders[r._title]=r.save()}),i}open(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}_setClosed(e){this._closed!==e&&(this._closed=e,this._callOnOpenClose(this))}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const i=this.$children.clientHeight;this.$children.style.height=i+"px",this.domElement.classList.add("transition");const r=s=>{s.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",r))};this.$children.addEventListener("transitionend",r);const n=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=n+"px"})}),this}title(e){return this._title=e,this.$title.textContent=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(r=>r.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),this._onChange!==void 0&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onOpenClose(e){return this._onOpenClose=e,this}_callOnOpenClose(e){this.parent&&this.parent._callOnOpenClose(e),this._onOpenClose!==void 0&&this._onOpenClose.call(this,e)}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(i=>{e=e.concat(i.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(i=>{e=e.concat(i.foldersRecursive())}),e}}const uu=globalThis||void 0||self;var Je=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $o(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function cu(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var i=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(i,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}),i}var Ho={exports:{}};function hf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hu={exports:{}},ze=hu.exports={},St,At;function Eo(){throw new Error("setTimeout has not been defined")}function vo(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?St=setTimeout:St=Eo}catch{St=Eo}try{typeof clearTimeout=="function"?At=clearTimeout:At=vo}catch{At=vo}})();function fu(t){if(St===setTimeout)return setTimeout(t,0);if((St===Eo||!St)&&setTimeout)return St=setTimeout,setTimeout(t,0);try{return St(t,0)}catch{try{return St.call(null,t,0)}catch{return St.call(this,t,0)}}}function ff(t){if(At===clearTimeout)return clearTimeout(t);if((At===vo||!At)&&clearTimeout)return At=clearTimeout,clearTimeout(t);try{return At(t)}catch{try{return At.call(null,t)}catch{return At.call(this,t)}}}var Pt=[],mi=!1,Zt,Sr=-1;function df(){!mi||!Zt||(mi=!1,Zt.length?Pt=Zt.concat(Pt):Sr=-1,Pt.length&&du())}function du(){if(!mi){var t=fu(df);mi=!0;for(var e=Pt.length;e;){for(Zt=Pt,Pt=[];++Sr<e;)Zt&&Zt[Sr].run();Sr=-1,e=Pt.length}Zt=null,mi=!1,ff(t)}}ze.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];Pt.push(new pu(t,e)),Pt.length===1&&!mi&&fu(du)};function pu(t,e){this.fun=t,this.array=e}pu.prototype.run=function(){this.fun.apply(null,this.array)};ze.title="browser";ze.browser=!0;ze.env={};ze.argv=[];ze.version="";ze.versions={};function Bt(){}ze.on=Bt;ze.addListener=Bt;ze.once=Bt;ze.off=Bt;ze.removeListener=Bt;ze.removeAllListeners=Bt;ze.emit=Bt;ze.prependListener=Bt;ze.prependOnceListener=Bt;ze.listeners=function(t){return[]};ze.binding=function(t){throw new Error("process.binding is not supported")};ze.cwd=function(){return"/"};ze.chdir=function(t){throw new Error("process.chdir is not supported")};ze.umask=function(){return 0};var pf=hu.exports;const ie=hf(pf);var ko={exports:{}},yi=typeof Reflect=="object"?Reflect:null,Ca=yi&&typeof yi.apply=="function"?yi.apply:function(e,i,r){return Function.prototype.apply.call(e,i,r)},Ar;yi&&typeof yi.ownKeys=="function"?Ar=yi.ownKeys:Object.getOwnPropertySymbols?Ar=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Ar=function(e){return Object.getOwnPropertyNames(e)};function xf(t){console&&console.warn&&console.warn(t)}var xu=Number.isNaN||function(e){return e!==e};function Oe(){Oe.init.call(this)}ko.exports=Oe;ko.exports.once=mf;Oe.EventEmitter=Oe;Oe.prototype._events=void 0;Oe.prototype._eventsCount=0;Oe.prototype._maxListeners=void 0;var Ma=10;function Yr(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Oe,"defaultMaxListeners",{enumerable:!0,get:function(){return Ma},set:function(t){if(typeof t!="number"||t<0||xu(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Ma=t}});Oe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Oe.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||xu(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function gu(t){return t._maxListeners===void 0?Oe.defaultMaxListeners:t._maxListeners}Oe.prototype.getMaxListeners=function(){return gu(this)};Oe.prototype.emit=function(e){for(var i=[],r=1;r<arguments.length;r++)i.push(arguments[r]);var n=e==="error",s=this._events;if(s!==void 0)n=n&&s.error===void 0;else if(!n)return!1;if(n){var o;if(i.length>0&&(o=i[0]),o instanceof Error)throw o;var u=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw u.context=o,u}var h=s[e];if(h===void 0)return!1;if(typeof h=="function")Ca(h,this,i);else for(var g=h.length,f=bu(h,g),r=0;r<g;++r)Ca(f[r],this,i);return!0};function Eu(t,e,i,r){var n,s,o;if(Yr(i),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,i.listener?i.listener:i),s=t._events),o=s[e]),o===void 0)o=s[e]=i,++t._eventsCount;else if(typeof o=="function"?o=s[e]=r?[i,o]:[o,i]:r?o.unshift(i):o.push(i),n=gu(t),n>0&&o.length>n&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=o.length,xf(u)}return t}Oe.prototype.addListener=function(e,i){return Eu(this,e,i,!1)};Oe.prototype.on=Oe.prototype.addListener;Oe.prototype.prependListener=function(e,i){return Eu(this,e,i,!0)};function gf(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function vu(t,e,i){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},n=gf.bind(r);return n.listener=i,r.wrapFn=n,n}Oe.prototype.once=function(e,i){return Yr(i),this.on(e,vu(this,e,i)),this};Oe.prototype.prependOnceListener=function(e,i){return Yr(i),this.prependListener(e,vu(this,e,i)),this};Oe.prototype.removeListener=function(e,i){var r,n,s,o,u;if(Yr(i),n=this._events,n===void 0)return this;if(r=n[e],r===void 0)return this;if(r===i||r.listener===i)--this._eventsCount===0?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||i));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===i||r[o].listener===i){u=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():Ef(r,s),r.length===1&&(n[e]=r[0]),n.removeListener!==void 0&&this.emit("removeListener",e,u||i)}return this};Oe.prototype.off=Oe.prototype.removeListener;Oe.prototype.removeAllListeners=function(e){var i,r,n;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(n=0;n<s.length;++n)o=s[n],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(i=r[e],typeof i=="function")this.removeListener(e,i);else if(i!==void 0)for(n=i.length-1;n>=0;n--)this.removeListener(e,i[n]);return this};function mu(t,e,i){var r=t._events;if(r===void 0)return[];var n=r[e];return n===void 0?[]:typeof n=="function"?i?[n.listener||n]:[n]:i?vf(n):bu(n,n.length)}Oe.prototype.listeners=function(e){return mu(this,e,!0)};Oe.prototype.rawListeners=function(e){return mu(this,e,!1)};Oe.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):yu.call(t,e)};Oe.prototype.listenerCount=yu;function yu(t){var e=this._events;if(e!==void 0){var i=e[t];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}Oe.prototype.eventNames=function(){return this._eventsCount>0?Ar(this._events):[]};function bu(t,e){for(var i=new Array(e),r=0;r<e;++r)i[r]=t[r];return i}function Ef(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function vf(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}function mf(t,e){return new Promise(function(i,r){function n(o){t.removeListener(e,s),r(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",n),i([].slice.call(arguments))}Ru(t,e,s,{once:!0}),e!=="error"&&yf(t,n,{once:!0})})}function yf(t,e,i){typeof t.on=="function"&&Ru(t,"error",e,i)}function Ru(t,e,i,r){if(typeof t.on=="function")r.once?t.once(e,i):t.on(e,i);else if(typeof t.addEventListener=="function")t.addEventListener(e,function n(s){r.once&&t.removeEventListener(e,n),i(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Et=ko.exports;const Su=Et,dn=new WeakMap;let Au=class extends Su{pause(){dn.set(this,{...this._events}),this._events={__proto__:null}}resume(){const e=dn.get(this);e&&(this._events={__proto__:null,...e},dn.set(this,null))}};Object.assign(Au.prototype,Su.prototype);var De=Au,jo={exports:{}},bf=/[|\\{}()[\]^$+*?.]/g,Rf=function(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(bf,"\\$&")},zo={exports:{}},Tu={exports:{}},Sf={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ei=Sf,wu={};for(var pn in ei)ei.hasOwnProperty(pn)&&(wu[ei[pn]]=pn);var he=Tu.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var ut in he)if(he.hasOwnProperty(ut)){if(!("channels"in he[ut]))throw new Error("missing channels property: "+ut);if(!("labels"in he[ut]))throw new Error("missing channel labels property: "+ut);if(he[ut].labels.length!==he[ut].channels)throw new Error("channel and label counts mismatch: "+ut);var Af=he[ut].channels,Tf=he[ut].labels;delete he[ut].channels,delete he[ut].labels,Object.defineProperty(he[ut],"channels",{value:Af}),Object.defineProperty(he[ut],"labels",{value:Tf})}he.rgb.hsl=function(t){var e=t[0]/255,i=t[1]/255,r=t[2]/255,n=Math.min(e,i,r),s=Math.max(e,i,r),o=s-n,u,h,g;return s===n?u=0:e===s?u=(i-r)/o:i===s?u=2+(r-e)/o:r===s&&(u=4+(e-i)/o),u=Math.min(u*60,360),u<0&&(u+=360),g=(n+s)/2,s===n?h=0:g<=.5?h=o/(s+n):h=o/(2-s-n),[u,h*100,g*100]};he.rgb.hsv=function(t){var e,i,r,n,s,o=t[0]/255,u=t[1]/255,h=t[2]/255,g=Math.max(o,u,h),f=g-Math.min(o,u,h),x=function(a){return(g-a)/6/f+1/2};return f===0?n=s=0:(s=f/g,e=x(o),i=x(u),r=x(h),o===g?n=r-i:u===g?n=1/3+e-r:h===g&&(n=2/3+i-e),n<0?n+=1:n>1&&(n-=1)),[n*360,s*100,g*100]};he.rgb.hwb=function(t){var e=t[0],i=t[1],r=t[2],n=he.rgb.hsl(t)[0],s=1/255*Math.min(e,Math.min(i,r));return r=1-1/255*Math.max(e,Math.max(i,r)),[n,s*100,r*100]};he.rgb.cmyk=function(t){var e=t[0]/255,i=t[1]/255,r=t[2]/255,n,s,o,u;return u=Math.min(1-e,1-i,1-r),n=(1-e-u)/(1-u)||0,s=(1-i-u)/(1-u)||0,o=(1-r-u)/(1-u)||0,[n*100,s*100,o*100,u*100]};function wf(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2)}he.rgb.keyword=function(t){var e=wu[t];if(e)return e;var i=1/0,r;for(var n in ei)if(ei.hasOwnProperty(n)){var s=ei[n],o=wf(t,s);o<i&&(i=o,r=n)}return r};he.keyword.rgb=function(t){return ei[t]};he.rgb.xyz=function(t){var e=t[0]/255,i=t[1]/255,r=t[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;var n=e*.4124+i*.3576+r*.1805,s=e*.2126+i*.7152+r*.0722,o=e*.0193+i*.1192+r*.9505;return[n*100,s*100,o*100]};he.rgb.lab=function(t){var e=he.rgb.xyz(t),i=e[0],r=e[1],n=e[2],s,o,u;return i/=95.047,r/=100,n/=108.883,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,s=116*r-16,o=500*(i-r),u=200*(r-n),[s,o,u]};he.hsl.rgb=function(t){var e=t[0]/360,i=t[1]/100,r=t[2]/100,n,s,o,u,h;if(i===0)return h=r*255,[h,h,h];r<.5?s=r*(1+i):s=r+i-r*i,n=2*r-s,u=[0,0,0];for(var g=0;g<3;g++)o=e+1/3*-(g-1),o<0&&o++,o>1&&o--,6*o<1?h=n+(s-n)*6*o:2*o<1?h=s:3*o<2?h=n+(s-n)*(2/3-o)*6:h=n,u[g]=h*255;return u};he.hsl.hsv=function(t){var e=t[0],i=t[1]/100,r=t[2]/100,n=i,s=Math.max(r,.01),o,u;return r*=2,i*=r<=1?r:2-r,n*=s<=1?s:2-s,u=(r+i)/2,o=r===0?2*n/(s+n):2*i/(r+i),[e,o*100,u*100]};he.hsv.rgb=function(t){var e=t[0]/60,i=t[1]/100,r=t[2]/100,n=Math.floor(e)%6,s=e-Math.floor(e),o=255*r*(1-i),u=255*r*(1-i*s),h=255*r*(1-i*(1-s));switch(r*=255,n){case 0:return[r,h,o];case 1:return[u,r,o];case 2:return[o,r,h];case 3:return[o,u,r];case 4:return[h,o,r];case 5:return[r,o,u]}};he.hsv.hsl=function(t){var e=t[0],i=t[1]/100,r=t[2]/100,n=Math.max(r,.01),s,o,u;return u=(2-i)*r,s=(2-i)*n,o=i*n,o/=s<=1?s:2-s,o=o||0,u/=2,[e,o*100,u*100]};he.hwb.rgb=function(t){var e=t[0]/360,i=t[1]/100,r=t[2]/100,n=i+r,s,o,u,h;n>1&&(i/=n,r/=n),s=Math.floor(6*e),o=1-r,u=6*e-s,s&1&&(u=1-u),h=i+u*(o-i);var g,f,x;switch(s){default:case 6:case 0:g=o,f=h,x=i;break;case 1:g=h,f=o,x=i;break;case 2:g=i,f=o,x=h;break;case 3:g=i,f=h,x=o;break;case 4:g=h,f=i,x=o;break;case 5:g=o,f=i,x=h;break}return[g*255,f*255,x*255]};he.cmyk.rgb=function(t){var e=t[0]/100,i=t[1]/100,r=t[2]/100,n=t[3]/100,s,o,u;return s=1-Math.min(1,e*(1-n)+n),o=1-Math.min(1,i*(1-n)+n),u=1-Math.min(1,r*(1-n)+n),[s*255,o*255,u*255]};he.xyz.rgb=function(t){var e=t[0]/100,i=t[1]/100,r=t[2]/100,n,s,o;return n=e*3.2406+i*-1.5372+r*-.4986,s=e*-.9689+i*1.8758+r*.0415,o=e*.0557+i*-.204+r*1.057,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*12.92,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92,n=Math.min(Math.max(0,n),1),s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),[n*255,s*255,o*255]};he.xyz.lab=function(t){var e=t[0],i=t[1],r=t[2],n,s,o;return e/=95.047,i/=100,r/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=116*i-16,s=500*(e-i),o=200*(i-r),[n,s,o]};he.lab.xyz=function(t){var e=t[0],i=t[1],r=t[2],n,s,o;s=(e+16)/116,n=i/500+s,o=s-r/200;var u=Math.pow(s,3),h=Math.pow(n,3),g=Math.pow(o,3);return s=u>.008856?u:(s-16/116)/7.787,n=h>.008856?h:(n-16/116)/7.787,o=g>.008856?g:(o-16/116)/7.787,n*=95.047,s*=100,o*=108.883,[n,s,o]};he.lab.lch=function(t){var e=t[0],i=t[1],r=t[2],n,s,o;return n=Math.atan2(r,i),s=n*360/2/Math.PI,s<0&&(s+=360),o=Math.sqrt(i*i+r*r),[e,o,s]};he.lch.lab=function(t){var e=t[0],i=t[1],r=t[2],n,s,o;return o=r/360*2*Math.PI,n=i*Math.cos(o),s=i*Math.sin(o),[e,n,s]};he.rgb.ansi16=function(t){var e=t[0],i=t[1],r=t[2],n=1 in arguments?arguments[1]:he.rgb.hsv(t)[2];if(n=Math.round(n/50),n===0)return 30;var s=30+(Math.round(r/255)<<2|Math.round(i/255)<<1|Math.round(e/255));return n===2&&(s+=60),s};he.hsv.ansi16=function(t){return he.rgb.ansi16(he.hsv.rgb(t),t[2])};he.rgb.ansi256=function(t){var e=t[0],i=t[1],r=t[2];if(e===i&&i===r)return e<8?16:e>248?231:Math.round((e-8)/247*24)+232;var n=16+36*Math.round(e/255*5)+6*Math.round(i/255*5)+Math.round(r/255*5);return n};he.ansi16.rgb=function(t){var e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];var i=(~~(t>50)+1)*.5,r=(e&1)*i*255,n=(e>>1&1)*i*255,s=(e>>2&1)*i*255;return[r,n,s]};he.ansi256.rgb=function(t){if(t>=232){var e=(t-232)*10+8;return[e,e,e]}t-=16;var i,r=Math.floor(t/36)/5*255,n=Math.floor((i=t%36)/6)/5*255,s=i%6/5*255;return[r,n,s]};he.rgb.hex=function(t){var e=((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255),i=e.toString(16).toUpperCase();return"000000".substring(i.length)+i};he.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var i=e[0];e[0].length===3&&(i=i.split("").map(function(u){return u+u}).join(""));var r=parseInt(i,16),n=r>>16&255,s=r>>8&255,o=r&255;return[n,s,o]};he.rgb.hcg=function(t){var e=t[0]/255,i=t[1]/255,r=t[2]/255,n=Math.max(Math.max(e,i),r),s=Math.min(Math.min(e,i),r),o=n-s,u,h;return o<1?u=s/(1-o):u=0,o<=0?h=0:n===e?h=(i-r)/o%6:n===i?h=2+(r-e)/o:h=4+(e-i)/o+4,h/=6,h%=1,[h*360,o*100,u*100]};he.hsl.hcg=function(t){var e=t[1]/100,i=t[2]/100,r=1,n=0;return i<.5?r=2*e*i:r=2*e*(1-i),r<1&&(n=(i-.5*r)/(1-r)),[t[0],r*100,n*100]};he.hsv.hcg=function(t){var e=t[1]/100,i=t[2]/100,r=e*i,n=0;return r<1&&(n=(i-r)/(1-r)),[t[0],r*100,n*100]};he.hcg.rgb=function(t){var e=t[0]/360,i=t[1]/100,r=t[2]/100;if(i===0)return[r*255,r*255,r*255];var n=[0,0,0],s=e%1*6,o=s%1,u=1-o,h=0;switch(Math.floor(s)){case 0:n[0]=1,n[1]=o,n[2]=0;break;case 1:n[0]=u,n[1]=1,n[2]=0;break;case 2:n[0]=0,n[1]=1,n[2]=o;break;case 3:n[0]=0,n[1]=u,n[2]=1;break;case 4:n[0]=o,n[1]=0,n[2]=1;break;default:n[0]=1,n[1]=0,n[2]=u}return h=(1-i)*r,[(i*n[0]+h)*255,(i*n[1]+h)*255,(i*n[2]+h)*255]};he.hcg.hsv=function(t){var e=t[1]/100,i=t[2]/100,r=e+i*(1-e),n=0;return r>0&&(n=e/r),[t[0],n*100,r*100]};he.hcg.hsl=function(t){var e=t[1]/100,i=t[2]/100,r=i*(1-e)+.5*e,n=0;return r>0&&r<.5?n=e/(2*r):r>=.5&&r<1&&(n=e/(2*(1-r))),[t[0],n*100,r*100]};he.hcg.hwb=function(t){var e=t[1]/100,i=t[2]/100,r=e+i*(1-e);return[t[0],(r-e)*100,(1-r)*100]};he.hwb.hcg=function(t){var e=t[1]/100,i=t[2]/100,r=1-i,n=r-e,s=0;return n<1&&(s=(r-n)/(1-n)),[t[0],n*100,s*100]};he.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};he.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};he.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};he.gray.hsl=he.gray.hsv=function(t){return[0,0,t[0]]};he.gray.hwb=function(t){return[0,100,t[0]]};he.gray.cmyk=function(t){return[0,0,0,t[0]]};he.gray.lab=function(t){return[t[0],0,0]};he.gray.hex=function(t){var e=Math.round(t[0]/100*255)&255,i=(e<<16)+(e<<8)+e,r=i.toString(16).toUpperCase();return"000000".substring(r.length)+r};he.rgb.gray=function(t){var e=(t[0]+t[1]+t[2])/3;return[e/255*100]};var _u=Tu.exports,Br=_u;function _f(){for(var t={},e=Object.keys(Br),i=e.length,r=0;r<i;r++)t[e[r]]={distance:-1,parent:null};return t}function Of(t){var e=_f(),i=[t];for(e[t].distance=0;i.length;)for(var r=i.pop(),n=Object.keys(Br[r]),s=n.length,o=0;o<s;o++){var u=n[o],h=e[u];h.distance===-1&&(h.distance=e[r].distance+1,h.parent=r,i.unshift(u))}return e}function If(t,e){return function(i){return e(t(i))}}function Cf(t,e){for(var i=[e[t].parent,t],r=Br[e[t].parent][t],n=e[t].parent;e[n].parent;)i.unshift(e[n].parent),r=If(Br[e[n].parent][n],r),n=e[n].parent;return r.conversion=i,r}var Mf=function(t){for(var e=Of(t),i={},r=Object.keys(e),n=r.length,s=0;s<n;s++){var o=r[s],u=e[o];u.parent!==null&&(i[o]=Cf(o,e))}return i},mo=_u,Df=Mf,fi={},Pf=Object.keys(mo);function Lf(t){var e=function(i){return i==null?i:(arguments.length>1&&(i=Array.prototype.slice.call(arguments)),t(i))};return"conversion"in t&&(e.conversion=t.conversion),e}function Nf(t){var e=function(i){if(i==null)return i;arguments.length>1&&(i=Array.prototype.slice.call(arguments));var r=t(i);if(typeof r=="object")for(var n=r.length,s=0;s<n;s++)r[s]=Math.round(r[s]);return r};return"conversion"in t&&(e.conversion=t.conversion),e}Pf.forEach(function(t){fi[t]={},Object.defineProperty(fi[t],"channels",{value:mo[t].channels}),Object.defineProperty(fi[t],"labels",{value:mo[t].labels});var e=Df(t),i=Object.keys(e);i.forEach(function(r){var n=e[r];fi[t][r]=Nf(n),fi[t][r].raw=Lf(n)})});var Bf=fi;zo.exports;(function(t){const e=Bf,i=(o,u)=>function(){return`\x1B[${o.apply(e,arguments)+u}m`},r=(o,u)=>function(){const h=o.apply(e,arguments);return`\x1B[${38+u};5;${h}m`},n=(o,u)=>function(){const h=o.apply(e,arguments);return`\x1B[${38+u};2;${h[0]};${h[1]};${h[2]}m`};function s(){const o=new Map,u={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};u.color.grey=u.color.gray;for(const f of Object.keys(u)){const x=u[f];for(const a of Object.keys(x)){const d=x[a];u[a]={open:`\x1B[${d[0]}m`,close:`\x1B[${d[1]}m`},x[a]=u[a],o.set(d[0],d[1])}Object.defineProperty(u,f,{value:x,enumerable:!1}),Object.defineProperty(u,"codes",{value:o,enumerable:!1})}const h=f=>f,g=(f,x,a)=>[f,x,a];u.color.close="\x1B[39m",u.bgColor.close="\x1B[49m",u.color.ansi={ansi:i(h,0)},u.color.ansi256={ansi256:r(h,0)},u.color.ansi16m={rgb:n(g,0)},u.bgColor.ansi={ansi:i(h,10)},u.bgColor.ansi256={ansi256:r(h,10)},u.bgColor.ansi16m={rgb:n(g,10)};for(let f of Object.keys(e)){if(typeof e[f]!="object")continue;const x=e[f];f==="ansi16"&&(f="ansi"),"ansi16"in x&&(u.color.ansi[f]=i(x.ansi16,0),u.bgColor.ansi[f]=i(x.ansi16,10)),"ansi256"in x&&(u.color.ansi256[f]=r(x.ansi256,0),u.bgColor.ansi256[f]=r(x.ansi256,10)),"rgb"in x&&(u.color.ansi16m[f]=n(x.rgb,0),u.bgColor.ansi16m[f]=n(x.rgb,10))}return u}Object.defineProperty(t,"exports",{enumerable:!0,get:s})})(zo);var Ff=zo.exports,Gf=!1;const Uf=/(?:\\(u[a-f0-9]{4}|x[a-f0-9]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,Da=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,Wf=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,$f=/\\(u[0-9a-f]{4}|x[0-9a-f]{2}|.)|([^\\])/gi,Hf={n:`
`,r:"\r",t:"	",b:"\b",f:"\f",v:"\v",0:"\0","\\":"\\",e:"\x1B",a:"\x07"};function Ou(t){return t[0]==="u"&&t.length===5||t[0]==="x"&&t.length===3?String.fromCharCode(parseInt(t.slice(1),16)):Hf[t]||t}function kf(t,e){const i=[],r=e.trim().split(/\s*,\s*/g);let n;for(const s of r)if(!isNaN(s))i.push(Number(s));else if(n=s.match(Wf))i.push(n[2].replace($f,(o,u,h)=>u?Ou(u):h));else throw new Error(`Invalid Chalk template style argument: ${s} (in style '${t}')`);return i}function jf(t){Da.lastIndex=0;const e=[];let i;for(;(i=Da.exec(t))!==null;){const r=i[1];if(i[2]){const n=kf(r,i[2]);e.push([r].concat(n))}else e.push([r])}return e}function Pa(t,e){const i={};for(const n of e)for(const s of n.styles)i[s[0]]=n.inverse?null:s.slice(1);let r=t;for(const n of Object.keys(i))if(Array.isArray(i[n])){if(!(n in r))throw new Error(`Unknown Chalk style: ${n}`);i[n].length>0?r=r[n].apply(r,i[n]):r=r[n]}return r}var zf=(t,e)=>{const i=[],r=[];let n=[];if(e.replace(Uf,(s,o,u,h,g,f)=>{if(o)n.push(Ou(o));else if(h){const x=n.join("");n=[],r.push(i.length===0?x:Pa(t,i)(x)),i.push({inverse:u,styles:jf(h)})}else if(g){if(i.length===0)throw new Error("Found extraneous } in Chalk template literal");r.push(Pa(t,i)(n.join(""))),n=[],i.pop()}else n.push(f)}),r.push(n.join("")),i.length>0){const s=`Chalk template literal is missing ${i.length} closing bracket${i.length===1?"":"s"} (\`}\`)`;throw new Error(s)}return r.join("")},qf={};const qo=Rf,qe=Ff,Vf=Gf,Kf=zf,Iu=ie.platform==="win32"&&!(qf.TERM||"").toLowerCase().startsWith("xterm"),Cu=["ansi","ansi","ansi256","ansi16m"],Mu=new Set(["gray"]),er=Object.create(null);function La(t,e){e=e||{};const i=0;t.level=e.level===void 0?i:e.level,t.enabled="enabled"in e?e.enabled:t.level>0}function $i(t){if(!this||!(this instanceof $i)||this.template){const e={};return La(e,t),e.template=function(){const i=[].slice.call(arguments);return Qf.apply(null,[e.template].concat(i))},Object.setPrototypeOf(e,$i.prototype),Object.setPrototypeOf(e.template,e),e.template.constructor=$i,e.template}La(this,t)}Iu&&(qe.blue.open="\x1B[94m");for(const t of Object.keys(qe))qe[t].closeRe=new RegExp(qo(qe[t].close),"g"),er[t]={get(){const e=qe[t];return Vo.call(this,this._styles?this._styles.concat(e):[e],t)}};qe.color.closeRe=new RegExp(qo(qe.color.close),"g");for(const t of Object.keys(qe.color.ansi))Mu.has(t)||(er[t]={get(){const e=this.level;return function(){const r={open:qe.color[Cu[e]][t].apply(null,arguments),close:qe.color.close,closeRe:qe.color.closeRe};return Vo.call(this,this._styles?this._styles.concat(r):[r],t)}}});qe.bgColor.closeRe=new RegExp(qo(qe.bgColor.close),"g");for(const t of Object.keys(qe.bgColor.ansi)){if(Mu.has(t))continue;const e="bg"+t[0].toUpperCase()+t.slice(1);er[e]={get(){const i=this.level;return function(){const n={open:qe.bgColor[Cu[i]][t].apply(null,arguments),close:qe.bgColor.close,closeRe:qe.bgColor.closeRe};return Vo.call(this,this._styles?this._styles.concat(n):[n],t)}}}}const Yf=Object.defineProperties(()=>{},er);function Vo(t,e){const i=function(){return Xf.apply(i,arguments)};i._styles=t;const r=this;return Object.defineProperty(i,"level",{enumerable:!0,get(){return r.level},set(n){r.level=n}}),Object.defineProperty(i,"enabled",{enumerable:!0,get(){return r.enabled},set(n){r.enabled=n}}),i.hasGrey=this.hasGrey||e==="gray"||e==="grey",i.__proto__=Yf,i}function Xf(){const t=arguments,e=t.length;let i=String(arguments[0]);if(e===0)return"";if(e>1)for(let n=1;n<e;n++)i+=" "+t[n];if(!this.enabled||this.level<=0||!i)return i;const r=qe.dim.open;Iu&&this.hasGrey&&(qe.dim.open="");for(const n of this._styles.slice().reverse())i=n.open+i.replace(n.closeRe,n.open)+n.close,i=i.replace(/\r?\n/g,`${n.close}$&${n.open}`);return qe.dim.open=r,i}function Qf(t,e){if(!Array.isArray(e))return[].slice.call(arguments,1).join(" ");const i=[].slice.call(arguments,2),r=[e.raw[0]];for(let n=1;n<e.length;n++)r.push(String(i[n-1]).replace(/[{}\\]/g,"\\$&")),r.push(String(e.raw[n]));return Kf(t,r.join(""))}Object.defineProperties($i.prototype,er);jo.exports=$i();jo.exports.supportsColor=Vf;var Zf=jo.exports;const Jf=Et,ed=De;let rt=class{constructor(e){const i=this.type;let r=[];if(this.length=0,Array.isArray(e))r=e;else if(Array.isArray(e.pins)){const n=Object.keys(e).filter(s=>s!=="pins");r=e.pins.map(s=>{const o={};return Array.isArray(s)?o.pins=s:o.pin=s,n.reduce((u,h)=>(u[h]=e[h],u),o)})}if(r.length)for(;r.length;){let n=r.shift();typeof i=="function"&&(n instanceof i||n instanceof this.constructor||(n=new i(n))),this.add(n)}}slice(){return new this.constructor([].slice.apply(this,arguments))}};rt.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator];rt.prototype.add=function(...t){let e=this.length;t.length===1&&t[0]instanceof this.constructor&&(t=t[0]);for(let i=0;i<t.length;i++)this.type?(t[i]instanceof this.type||t[i]instanceof this.constructor)&&(this[e++]=t[i]):this[e++]=t[i];return this.length=e};rt.prototype.each=function(t){let e=this.length;for(let i=0;i<e;i++)t.call(this[i],this[i],i);return this};rt.prototype.forEach=function(){[].forEach.apply(this,arguments)};rt.prototype.includes=function(){return[].includes.apply(this,arguments)};rt.prototype.indexOf=function(){return[].indexOf.apply(this,arguments)};rt.prototype.map=function(){return[].map.apply(this,arguments)};rt.prototype.byId=function(t){return[].find.call(this,function(e){return e.id!==void 0&&e.id===t})};rt.installMethodForwarding=(t,e,i={})=>{const{skip:r=[]}=i,n="apply|arguments|bind|call|caller|constructor|domain|length|name|prototype|toString".split("|");return Object.getOwnPropertyNames(e).reduce((s,o)=>(r.includes(o)||n.includes(o)||(s[o]=function(...u){const h=this.length;for(let g=0;g<h;g++)this[g][o](...u);return this}),s),t)};const td=()=>{};rt.installCallbackReconciliation=(t,e)=>{e.forEach(i=>{t[i]=function(r,n){const s=this.length,o=[];typeof r=="function"&&(n=r,r=1e3),typeof n!="function"&&(n=td);for(let u=0;u<s;u++)o.push(new Promise(h=>this[u][i](r,()=>h())));return Promise.all(o).then(n),this}})};rt.Emitter=class extends rt{constructor(t){super(t);let e=null,i=5;!Array.isArray(t)&&typeof t=="object"&&t!==null&&(i=t.freq||t.period||i,t.frequency&&(i=1/t.frequency*1e3)),Object.defineProperties(this,{period:{get(){return i},set(r){i!==r&&(i=r),e&&clearInterval(e),e=setInterval(()=>{this.emit("data",this)},i)}}}),this.period=i,this.on("newListener",r=>{r==="change"||r==="data"||this.forEach(n=>{n.on(r,s=>this.emit(r,n,s))})})}add(...t){return t.length&&(super.add(...t),t.forEach(e=>{e&&e.on("change",()=>this.emit("change",e))})),this.length}};Object.assign(rt.Emitter.prototype,Jf.prototype,ed.prototype);rt.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator];var nt=rt,id="Expected a function",Na=NaN,rd="[object Symbol]",nd=/^\s+|\s+$/g,sd=/^[-+]0x[0-9a-f]+$/i,od=/^0b[01]+$/i,ad=/^0o[0-7]+$/i,ld=parseInt,ud=typeof Je=="object"&&Je&&Je.Object===Object&&Je,cd=typeof self=="object"&&self&&self.Object===Object&&self,hd=ud||cd||Function("return this")(),fd=Object.prototype,dd=fd.toString,pd=Math.max,xd=Math.min,xn=function(){return hd.Date.now()};function gd(t,e,i){var r,n,s,o,u,h,g=0,f=!1,x=!1,a=!0;if(typeof t!="function")throw new TypeError(id);e=Ba(e)||0,yo(i)&&(f=!!i.leading,x="maxWait"in i,s=x?pd(Ba(i.maxWait)||0,e):s,a="trailing"in i?!!i.trailing:a);function d(L){var $=r,_=n;return r=n=void 0,g=L,o=t.apply(_,$),o}function p(L){return g=L,u=setTimeout(m,e),f?d(L):o}function R(L){var $=L-h,_=L-g,D=e-$;return x?xd(D,s-_):D}function v(L){var $=L-h,_=L-g;return h===void 0||$>=e||$<0||x&&_>=s}function m(){var L=xn();if(v(L))return E(L);u=setTimeout(m,R(L))}function E(L){return u=void 0,a&&r?d(L):(r=n=void 0,o)}function b(){u!==void 0&&clearTimeout(u),g=0,r=h=n=u=void 0}function C(){return u===void 0?o:E(xn())}function w(){var L=xn(),$=v(L);if(r=arguments,n=this,h=L,$){if(u===void 0)return p(h);if(x)return u=setTimeout(m,e),d(h)}return u===void 0&&(u=setTimeout(m,e)),o}return w.cancel=b,w.flush=C,w}function yo(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Ed(t){return!!t&&typeof t=="object"}function vd(t){return typeof t=="symbol"||Ed(t)&&dd.call(t)==rd}function Ba(t){if(typeof t=="number")return t;if(vd(t))return Na;if(yo(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=yo(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(nd,"");var i=od.test(t);return i||ad.test(t)?ld(t.slice(2),i?2:8):sd.test(t)?Na:+t}var md=gd,Fr={exports:{}};Fr.exports;(function(t,e){var i=200,r="__lodash_hash_undefined__",n=9007199254740991,s="[object Arguments]",o="[object Array]",u="[object Boolean]",h="[object Date]",g="[object Error]",f="[object Function]",x="[object GeneratorFunction]",a="[object Map]",d="[object Number]",p="[object Object]",R="[object Promise]",v="[object RegExp]",m="[object Set]",E="[object String]",b="[object Symbol]",C="[object WeakMap]",w="[object ArrayBuffer]",L="[object DataView]",$="[object Float32Array]",_="[object Float64Array]",D="[object Int8Array]",N="[object Int16Array]",G="[object Int32Array]",H="[object Uint8Array]",Y="[object Uint8ClampedArray]",z="[object Uint16Array]",J="[object Uint32Array]",ae=/[\\^$.*+?()[\]{}|]/g,K=/\w*$/,q=/^\[object .+?Constructor\]$/,oe=/^(?:0|[1-9]\d*)$/,j={};j[s]=j[o]=j[w]=j[L]=j[u]=j[h]=j[$]=j[_]=j[D]=j[N]=j[G]=j[a]=j[d]=j[p]=j[v]=j[m]=j[E]=j[b]=j[H]=j[Y]=j[z]=j[J]=!0,j[g]=j[f]=j[C]=!1;var ue=typeof Je=="object"&&Je&&Je.Object===Object&&Je,ce=typeof self=="object"&&self&&self.Object===Object&&self,F=ue||ce||Function("return this")(),U=e&&!e.nodeType&&e,k=U&&!0&&t&&!t.nodeType&&t,P=k&&k.exports===U;function B(I,X){return I.set(X[0],X[1]),I}function V(I,X){return I.add(X),I}function Q(I,X){for(var re=-1,xe=I?I.length:0;++re<xe&&X(I[re],re,I)!==!1;);return I}function ne(I,X){for(var re=-1,xe=X.length,et=I.length;++re<xe;)I[et+re]=X[re];return I}function S(I,X,re,xe){for(var et=-1,at=I?I.length:0;++et<at;)re=X(re,I[et],et,I);return re}function O(I,X){for(var re=-1,xe=Array(I);++re<I;)xe[re]=X(re);return xe}function Z(I,X){return I==null?void 0:I[X]}function le(I){var X=!1;if(I!=null&&typeof I.toString!="function")try{X=!!(I+"")}catch{}return X}function ye(I){var X=-1,re=Array(I.size);return I.forEach(function(xe,et){re[++X]=[et,xe]}),re}function de(I,X){return function(re){return I(X(re))}}function me(I){var X=-1,re=Array(I.size);return I.forEach(function(xe){re[++X]=xe}),re}var Ue=Array.prototype,te=Function.prototype,Qe=Object.prototype,Ve=F["__core-js_shared__"],Pe=function(){var I=/[^.]+$/.exec(Ve&&Ve.keys&&Ve.keys.IE_PROTO||"");return I?"Symbol(src)_1."+I:""}(),Ee=te.toString,Le=Qe.hasOwnProperty,Ne=Qe.toString,st=RegExp("^"+Ee.call(Le).replace(ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ot=P?F.Buffer:void 0,We=F.Symbol,ni=F.Uint8Array,T=de(Object.getPrototypeOf,Object),c=Object.create,l=Qe.propertyIsEnumerable,y=Ue.splice,A=Object.getOwnPropertySymbols,M=ot?ot.isBuffer:void 0,W=de(Object.keys,Object),se=ai(F,"DataView"),pe=ai(F,"Map"),ge=ai(F,"Promise"),Ae=ai(F,"Set"),ve=ai(F,"WeakMap"),Be=ai(Object,"create"),jt=Vt(se),He=Vt(pe),or=Vt(ge),Jc=Vt(Ae),eh=Vt(ve),ga=We?We.prototype:void 0,Ea=ga?ga.valueOf:void 0;function zt(I){var X=-1,re=I?I.length:0;for(this.clear();++X<re;){var xe=I[X];this.set(xe[0],xe[1])}}function th(){this.__data__=Be?Be(null):{}}function ih(I){return this.has(I)&&delete this.__data__[I]}function rh(I){var X=this.__data__;if(Be){var re=X[I];return re===r?void 0:re}return Le.call(X,I)?X[I]:void 0}function nh(I){var X=this.__data__;return Be?X[I]!==void 0:Le.call(X,I)}function sh(I,X){var re=this.__data__;return re[I]=Be&&X===void 0?r:X,this}zt.prototype.clear=th,zt.prototype.delete=ih,zt.prototype.get=rh,zt.prototype.has=nh,zt.prototype.set=sh;function Ot(I){var X=-1,re=I?I.length:0;for(this.clear();++X<re;){var xe=I[X];this.set(xe[0],xe[1])}}function oh(){this.__data__=[]}function ah(I){var X=this.__data__,re=ar(X,I);if(re<0)return!1;var xe=X.length-1;return re==xe?X.pop():y.call(X,re,1),!0}function lh(I){var X=this.__data__,re=ar(X,I);return re<0?void 0:X[re][1]}function uh(I){return ar(this.__data__,I)>-1}function ch(I,X){var re=this.__data__,xe=ar(re,I);return xe<0?re.push([I,X]):re[xe][1]=X,this}Ot.prototype.clear=oh,Ot.prototype.delete=ah,Ot.prototype.get=lh,Ot.prototype.has=uh,Ot.prototype.set=ch;function si(I){var X=-1,re=I?I.length:0;for(this.clear();++X<re;){var xe=I[X];this.set(xe[0],xe[1])}}function hh(){this.__data__={hash:new zt,map:new(pe||Ot),string:new zt}}function fh(I){return lr(this,I).delete(I)}function dh(I){return lr(this,I).get(I)}function ph(I){return lr(this,I).has(I)}function xh(I,X){return lr(this,I).set(I,X),this}si.prototype.clear=hh,si.prototype.delete=fh,si.prototype.get=dh,si.prototype.has=ph,si.prototype.set=xh;function oi(I){this.__data__=new Ot(I)}function gh(){this.__data__=new Ot}function Eh(I){return this.__data__.delete(I)}function vh(I){return this.__data__.get(I)}function mh(I){return this.__data__.has(I)}function yh(I,X){var re=this.__data__;if(re instanceof Ot){var xe=re.__data__;if(!pe||xe.length<i-1)return xe.push([I,X]),this;re=this.__data__=new si(xe)}return re.set(I,X),this}oi.prototype.clear=gh,oi.prototype.delete=Eh,oi.prototype.get=vh,oi.prototype.has=mh,oi.prototype.set=yh;function bh(I,X){var re=un(I)||zh(I)?O(I.length,String):[],xe=re.length,et=!!xe;for(var at in I)Le.call(I,at)&&!(et&&(at=="length"||$h(at,xe)))&&re.push(at);return re}function va(I,X,re){var xe=I[X];(!(Le.call(I,X)&&Ra(xe,re))||re===void 0&&!(X in I))&&(I[X]=re)}function ar(I,X){for(var re=I.length;re--;)if(Ra(I[re][0],X))return re;return-1}function Rh(I,X){return I&&ma(X,cn(X),I)}function an(I,X,re,xe,et,at,It){var lt;if(xe&&(lt=at?xe(I,et,at,It):xe(I)),lt!==void 0)return lt;if(!ur(I))return I;var Ta=un(I);if(Ta){if(lt=Gh(I),!X)return Nh(I,lt)}else{var li=qt(I),wa=li==f||li==x;if(Vh(I))return Oh(I,X);if(li==p||li==s||wa&&!at){if(le(I))return at?I:{};if(lt=Uh(wa?{}:I),!X)return Bh(I,Rh(lt,I))}else{if(!j[li])return at?I:{};lt=Wh(I,li,an,X)}}It||(It=new oi);var _a=It.get(I);if(_a)return _a;if(It.set(I,lt),!Ta)var Oa=re?Fh(I):cn(I);return Q(Oa||I,function(hn,cr){Oa&&(cr=hn,hn=I[cr]),va(lt,cr,an(hn,X,re,xe,cr,I,It))}),lt}function Sh(I){return ur(I)?c(I):{}}function Ah(I,X,re){var xe=X(I);return un(I)?xe:ne(xe,re(I))}function Th(I){return Ne.call(I)}function wh(I){if(!ur(I)||kh(I))return!1;var X=Aa(I)||le(I)?st:q;return X.test(Vt(I))}function _h(I){if(!ba(I))return W(I);var X=[];for(var re in Object(I))Le.call(I,re)&&re!="constructor"&&X.push(re);return X}function Oh(I,X){if(X)return I.slice();var re=new I.constructor(I.length);return I.copy(re),re}function ln(I){var X=new I.constructor(I.byteLength);return new ni(X).set(new ni(I)),X}function Ih(I,X){var re=X?ln(I.buffer):I.buffer;return new I.constructor(re,I.byteOffset,I.byteLength)}function Ch(I,X,re){var xe=X?re(ye(I),!0):ye(I);return S(xe,B,new I.constructor)}function Mh(I){var X=new I.constructor(I.source,K.exec(I));return X.lastIndex=I.lastIndex,X}function Dh(I,X,re){var xe=X?re(me(I),!0):me(I);return S(xe,V,new I.constructor)}function Ph(I){return Ea?Object(Ea.call(I)):{}}function Lh(I,X){var re=X?ln(I.buffer):I.buffer;return new I.constructor(re,I.byteOffset,I.length)}function Nh(I,X){var re=-1,xe=I.length;for(X||(X=Array(xe));++re<xe;)X[re]=I[re];return X}function ma(I,X,re,xe){re||(re={});for(var et=-1,at=X.length;++et<at;){var It=X[et],lt=void 0;va(re,It,lt===void 0?I[It]:lt)}return re}function Bh(I,X){return ma(I,ya(I),X)}function Fh(I){return Ah(I,cn,ya)}function lr(I,X){var re=I.__data__;return Hh(X)?re[typeof X=="string"?"string":"hash"]:re.map}function ai(I,X){var re=Z(I,X);return wh(re)?re:void 0}var ya=A?de(A,Object):Xh,qt=Th;(se&&qt(new se(new ArrayBuffer(1)))!=L||pe&&qt(new pe)!=a||ge&&qt(ge.resolve())!=R||Ae&&qt(new Ae)!=m||ve&&qt(new ve)!=C)&&(qt=function(I){var X=Ne.call(I),re=X==p?I.constructor:void 0,xe=re?Vt(re):void 0;if(xe)switch(xe){case jt:return L;case He:return a;case or:return R;case Jc:return m;case eh:return C}return X});function Gh(I){var X=I.length,re=I.constructor(X);return X&&typeof I[0]=="string"&&Le.call(I,"index")&&(re.index=I.index,re.input=I.input),re}function Uh(I){return typeof I.constructor=="function"&&!ba(I)?Sh(T(I)):{}}function Wh(I,X,re,xe){var et=I.constructor;switch(X){case w:return ln(I);case u:case h:return new et(+I);case L:return Ih(I,xe);case $:case _:case D:case N:case G:case H:case Y:case z:case J:return Lh(I,xe);case a:return Ch(I,xe,re);case d:case E:return new et(I);case v:return Mh(I);case m:return Dh(I,xe,re);case b:return Ph(I)}}function $h(I,X){return X=X??n,!!X&&(typeof I=="number"||oe.test(I))&&I>-1&&I%1==0&&I<X}function Hh(I){var X=typeof I;return X=="string"||X=="number"||X=="symbol"||X=="boolean"?I!=="__proto__":I===null}function kh(I){return!!Pe&&Pe in I}function ba(I){var X=I&&I.constructor,re=typeof X=="function"&&X.prototype||Qe;return I===re}function Vt(I){if(I!=null){try{return Ee.call(I)}catch{}try{return I+""}catch{}}return""}function jh(I){return an(I,!0,!0)}function Ra(I,X){return I===X||I!==I&&X!==X}function zh(I){return qh(I)&&Le.call(I,"callee")&&(!l.call(I,"callee")||Ne.call(I)==s)}var un=Array.isArray;function Sa(I){return I!=null&&Kh(I.length)&&!Aa(I)}function qh(I){return Yh(I)&&Sa(I)}var Vh=M||Qh;function Aa(I){var X=ur(I)?Ne.call(I):"";return X==f||X==x}function Kh(I){return typeof I=="number"&&I>-1&&I%1==0&&I<=n}function ur(I){var X=typeof I;return!!I&&(X=="object"||X=="function")}function Yh(I){return!!I&&typeof I=="object"}function cn(I){return Sa(I)?bh(I):_h(I)}function Xh(){return[]}function Qh(){return!1}t.exports=jh})(Fr,Fr.exports);var yd=Fr.exports;const Te={debounce:md,cloneDeep:yd},{ceil:bd,max:Du,min:Rd,PI:Ko}=Math;Te.toFixed=(t,e)=>+(t||0).toFixed(e);Te.map=(t,e,i,r,n)=>(t-e)*(n-r)/(i-e)+r|0;Te.scale=Te.map;const Fa=new Float32Array(1);Te.fmap=(t,e,i,r,n)=>(Fa[0]=(t-e)*(n-r)/(i-e)+r,Fa[0]);Te.fscale=Te.fmap;Te.constrain=(t,e,i)=>Rd(i,Du(e,t));Te.inRange=(t,e,i)=>t>=e&&t<=i;Te.range=function(t,e,i){arguments.length===1&&(e=t-1,t=0),t=t||0,e=e||0,i=i||1;const r=Du(bd((e-t)/i),0);let n=0;const s=[];for(;n<=r;)s[n++]=t,t+=i;return s};Te.uid=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}).toUpperCase();Te.square=t=>t*t;Te.sum=function(e){let i;return Array.isArray(e)?i=e:i=[].slice.call(arguments),i.reduce((r,n)=>r+n,0)};Te.fma=(t,e,i)=>{let r=134217729*t,n;r=r+(t-r),n=t-r;let s=134217729*e,o;s=s+(e-s),o=e-s;const u=t*e,h=-u+r*s+r*o+n*s+n*o,g=u+i,f=u-(g-i)+(i-(g-u));return g+(f+h)};Te._BV=Te.bitValue=Te.bv=t=>1<<t;Te.int16=(t,e)=>{const i=t<<8|e;return i>>15?((i^65535)+1)*-1:i};Te.uint16=(t,e)=>t<<8|e;Te.int24=(t,e,i)=>{const r=t<<16|e<<8|i;return r>>23?((r^16777215)+1)*-1:r};Te.uint24=(t,e,i)=>t<<16|e<<8|i;Te.int32=(t,e,i,r)=>{const n=t<<24|e<<16|i<<8|r;return n>>31?((n^4294967295)+1)*-1:n};Te.uint32=(t,e,i,r)=>(t<<24|e<<16|i<<8|r)>>>0;Te.bitSize=t=>Math.round(Math.log2(t));const Pu="POW_2_",Sd="u",Ad="s",Td=Te.bitSize(Number.MAX_SAFE_INTEGER)+1,wd=[4,8,10,12,16,20,24,32];for(let t=0;t<Td;t++)Te[Pu+t]=2**t;wd.forEach(t=>{const e=Te[Pu+t],i=e/2>>>0,r=i-1;Te[Sd+t]=n=>(n<0&&(n+=e),Te.constrain(n,0,e-1)),Te[Ad+t]=n=>(n>r&&(n-=e),Te.constrain(n,-i,r))});Te.RAD_TO_DEG=180/Ko;Te.DEG_TO_RAD=Ko/180;Te.TAU=2*Ko;var Ie=Te,_d=null;const Od=Object.freeze(Object.defineProperty({__proto__:null,default:_d},Symbol.toStringTag,{value:"Module"})),tr=cu(Od),Id=De,Cd=tr,Ga=new Map;class Lt extends Id{constructor(e){if(Lt.isActive)return Lt.ref;{super(),Lt.isActive=!0,this.context={},this.ready=!1;const i={opts:e,board:e.board};Ga.set(this,i),Lt.ref=this}}initialize(e){const i=Ga.get(this);ie.stdin.resume(),ie.stdin.setEncoding("utf8");const r={prompt:">> ",useGlobal:!1};i.board.info("Repl","Initialized");const n=Cd.start(r);this.ready=!0,this.cmd=n,this.context=n.context,n.on("exit",()=>{i.board.emit("exit"),i.board.warn("Board","Closing.");const o=setTimeout(()=>{ie.reallyExit()},1e3),u=setInterval(()=>{let h=!1;if(i.board.length){for(let g=0;g<i.board.length;g++)if(i.board[g].io.pending){h=!0;break}}else h=i.board.io.pending;h||(clearInterval(u),clearTimeout(o),ie.nextTick(ie.reallyExit))},1)}),this.inject(i.opts),e&&ie.nextTick(e)}close(){this.cmd.emit("exit")}inject(e){Object.keys(e).forEach(function(i){Object.defineProperty(this.context,i,Object.getOwnPropertyDescriptor(e,i))},this)}}Lt.isActive=!1;Lt.isBlocked=!1;Lt.ref=null;var Lu=Lt;let Md=class{constructor(e){var i={};typeof e=="number"||typeof e=="string"?i.pin=e:Array.isArray(e)?i.pins=e:i=e,Object.assign(this,i)}};var Nu=Md;const Dd=Nu,bo={INPUT:0,OUTPUT:1,ANALOG:2,PWM:3,SERVO:4},Pd={20:"UNO",25:"LEONARDO",70:"MEGA"};function ke(t){if(!(this instanceof ke))return new ke(t);const e=t.io,i=e.pins.slice(),r=i.length,n=Pd[r]||"OTHER";t.type=n;for(let s=0;s<r;s++)this[s]=i[s];Object.defineProperties(this,{type:{value:n},length:{value:r}}),["isInput","isOutput","isAnalog","isPwm","isServo"].forEach(s=>{e[s]&&(this[s]=e[s])})}Object.entries(bo).forEach(([t,e])=>{Object.defineProperty(ke,t,{value:e})});function Bu({io:t}){return t.name==="Firmata"||t.name==="Mock"}function Ld({pin:t,pins:e}){return typeof t<"u"||typeof e<"u"&&e.length}ke.isFirmata=Bu;ke.Error=({pin:t,type:e,via:i})=>{throw new Error(`Pin Error: ${t} is not a valid ${e} pin (${i})`)};const Ro=new Map;ke.normalize=function(t,e){var i=e.pins.type,r=Bu(e),n=Ro.get(e),s;return(typeof t=="string"||typeof t=="number"||Array.isArray(t))&&(t=new Dd(t)),n||(s=e.io&&typeof e.io.normalize=="function",n=function(o){return r?ke.fromAnalog(ke.translate(o,i)):s?e.io.normalize(o):o},Ro.set(e,n)),Ld(t)&&(t.pins?t.pins=t.pins.map(n):t.pin=n(t.pin)),t};ke.normalize.clear=function(){Ro.clear()};ke.translations={UNO:{dtoa:{14:"A0",15:"A1",16:"A2",17:"A3",18:"A4",19:"A5"},tinker:{I0:"A0",I1:"A1",I2:"A2",I3:"A3",I4:"A4",I5:"A5",O0:11,O1:10,O2:9,O3:6,O4:5,O5:3,D13:13,D12:12,D8:8,D7:7,D4:4,D2:2}},MEGA:{dtoa:{54:"A0",55:"A1",56:"A2",57:"A3",58:"A4",59:"A5",60:"A6",61:"A7",62:"A8",63:"A9"},tinker:{I0:"A0",I1:"A1",I2:"A2",I3:"A3",I4:"A4",I5:"A5",I6:"A6",I7:"A7",I8:"A8",I9:"A9",O0:11,O1:10,O2:9,O3:6,O4:5,O5:3,D13:13,D12:12,D8:8,D7:7,D4:4,D2:2}}};ke.translations.LEONARDO=ke.translations.UNO;ke.translate=function(t,e){var i=ke.translations[e.toUpperCase()];return i?Object.keys(i).reduce(function(r,n){return i[n][r]||r},t):t};ke.fromAnalog=function(t){return typeof t=="string"&&t.length>1&&t[0]==="A"?parseInt(t.slice(1),10):t};ke.identity=function(t,e){return[].findIndex.call(t,function(i){return i.name===e||i.id===e||i.port===e})};Object.keys(bo).forEach(function(t){var e=t[0]+t.slice(1).toLowerCase();ke.prototype["is"+e]=function(i){var r=this[i]||this[ke.identity(this,i)];return!!(r&&r.supportedModes.includes(bo[t]))}});ke.prototype.isDigital=function(t){var e=this[t]||this[ke.identity(this,t)];return!!(e&&e.supportedModes.length)};var Nd=ke,Xe={},Xr={};Xr.byteLength=Gd;Xr.toByteArray=Wd;Xr.fromByteArray=kd;var Tt=[],gt=[],Bd=typeof Uint8Array<"u"?Uint8Array:Array,gn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ui=0,Fd=gn.length;ui<Fd;++ui)Tt[ui]=gn[ui],gt[gn.charCodeAt(ui)]=ui;gt[45]=62;gt[95]=63;function Fu(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");i===-1&&(i=e);var r=i===e?0:4-i%4;return[i,r]}function Gd(t){var e=Fu(t),i=e[0],r=e[1];return(i+r)*3/4-r}function Ud(t,e,i){return(e+i)*3/4-i}function Wd(t){var e,i=Fu(t),r=i[0],n=i[1],s=new Bd(Ud(t,r,n)),o=0,u=n>0?r-4:r,h;for(h=0;h<u;h+=4)e=gt[t.charCodeAt(h)]<<18|gt[t.charCodeAt(h+1)]<<12|gt[t.charCodeAt(h+2)]<<6|gt[t.charCodeAt(h+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return n===2&&(e=gt[t.charCodeAt(h)]<<2|gt[t.charCodeAt(h+1)]>>4,s[o++]=e&255),n===1&&(e=gt[t.charCodeAt(h)]<<10|gt[t.charCodeAt(h+1)]<<4|gt[t.charCodeAt(h+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function $d(t){return Tt[t>>18&63]+Tt[t>>12&63]+Tt[t>>6&63]+Tt[t&63]}function Hd(t,e,i){for(var r,n=[],s=e;s<i;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),n.push($d(r));return n.join("")}function kd(t){for(var e,i=t.length,r=i%3,n=[],s=16383,o=0,u=i-r;o<u;o+=s)n.push(Hd(t,o,o+s>u?u:o+s));return r===1?(e=t[i-1],n.push(Tt[e>>2]+Tt[e<<4&63]+"==")):r===2&&(e=(t[i-2]<<8)+t[i-1],n.push(Tt[e>>10]+Tt[e>>4&63]+Tt[e<<2&63]+"=")),n.join("")}var Yo={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Yo.read=function(t,e,i,r,n){var s,o,u=n*8-r-1,h=(1<<u)-1,g=h>>1,f=-7,x=i?n-1:0,a=i?-1:1,d=t[e+x];for(x+=a,s=d&(1<<-f)-1,d>>=-f,f+=u;f>0;s=s*256+t[e+x],x+=a,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=r;f>0;o=o*256+t[e+x],x+=a,f-=8);if(s===0)s=1-g;else{if(s===h)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-g}return(d?-1:1)*o*Math.pow(2,s-r)};Yo.write=function(t,e,i,r,n,s){var o,u,h,g=s*8-n-1,f=(1<<g)-1,x=f>>1,a=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:s-1,p=r?1:-1,R=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-o))<1&&(o--,h*=2),o+x>=1?e+=a/h:e+=a*Math.pow(2,1-x),e*h>=2&&(o++,h/=2),o+x>=f?(u=0,o=f):o+x>=1?(u=(e*h-1)*Math.pow(2,n),o=o+x):(u=e*Math.pow(2,x-1)*Math.pow(2,n),o=0));n>=8;t[i+d]=u&255,d+=p,u/=256,n-=8);for(o=o<<n|u,g+=n;g>0;t[i+d]=o&255,d+=p,o/=256,g-=8);t[i+d-p]|=R*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Xr,i=Yo,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=f,t.SlowBuffer=w,t.INSPECT_MAX_BYTES=50;const n=2147483647;t.kMaxLength=n;const{Uint8Array:s,ArrayBuffer:o,SharedArrayBuffer:u}=globalThis;f.TYPED_ARRAY_SUPPORT=h(),!f.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function h(){try{const T=new s(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,s.prototype),Object.setPrototypeOf(T,c),T.foo()===42}catch{return!1}}Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}});function g(T){if(T>n)throw new RangeError('The value "'+T+'" is invalid for option "size"');const c=new s(T);return Object.setPrototypeOf(c,f.prototype),c}function f(T,c,l){if(typeof T=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(T)}return x(T,c,l)}f.poolSize=8192;function x(T,c,l){if(typeof T=="string")return R(T,c);if(o.isView(T))return m(T);if(T==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T);if(Ne(T,o)||T&&Ne(T.buffer,o)||typeof u<"u"&&(Ne(T,u)||T&&Ne(T.buffer,u)))return E(T,c,l);if(typeof T=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const y=T.valueOf&&T.valueOf();if(y!=null&&y!==T)return f.from(y,c,l);const A=b(T);if(A)return A;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof T[Symbol.toPrimitive]=="function")return f.from(T[Symbol.toPrimitive]("string"),c,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T)}f.from=function(T,c,l){return x(T,c,l)},Object.setPrototypeOf(f.prototype,s.prototype),Object.setPrototypeOf(f,s);function a(T){if(typeof T!="number")throw new TypeError('"size" argument must be of type number');if(T<0)throw new RangeError('The value "'+T+'" is invalid for option "size"')}function d(T,c,l){return a(T),T<=0?g(T):c!==void 0?typeof l=="string"?g(T).fill(c,l):g(T).fill(c):g(T)}f.alloc=function(T,c,l){return d(T,c,l)};function p(T){return a(T),g(T<0?0:C(T)|0)}f.allocUnsafe=function(T){return p(T)},f.allocUnsafeSlow=function(T){return p(T)};function R(T,c){if((typeof c!="string"||c==="")&&(c="utf8"),!f.isEncoding(c))throw new TypeError("Unknown encoding: "+c);const l=L(T,c)|0;let y=g(l);const A=y.write(T,c);return A!==l&&(y=y.slice(0,A)),y}function v(T){const c=T.length<0?0:C(T.length)|0,l=g(c);for(let y=0;y<c;y+=1)l[y]=T[y]&255;return l}function m(T){if(Ne(T,s)){const c=new s(T);return E(c.buffer,c.byteOffset,c.byteLength)}return v(T)}function E(T,c,l){if(c<0||T.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(T.byteLength<c+(l||0))throw new RangeError('"length" is outside of buffer bounds');let y;return c===void 0&&l===void 0?y=new s(T):l===void 0?y=new s(T,c):y=new s(T,c,l),Object.setPrototypeOf(y,f.prototype),y}function b(T){if(f.isBuffer(T)){const c=C(T.length)|0,l=g(c);return l.length===0||T.copy(l,0,0,c),l}if(T.length!==void 0)return typeof T.length!="number"||st(T.length)?g(0):v(T);if(T.type==="Buffer"&&Array.isArray(T.data))return v(T.data)}function C(T){if(T>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return T|0}function w(T){return+T!=T&&(T=0),f.alloc(+T)}f.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==f.prototype},f.compare=function(c,l){if(Ne(c,s)&&(c=f.from(c,c.offset,c.byteLength)),Ne(l,s)&&(l=f.from(l,l.offset,l.byteLength)),!f.isBuffer(c)||!f.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===l)return 0;let y=c.length,A=l.length;for(let M=0,W=Math.min(y,A);M<W;++M)if(c[M]!==l[M]){y=c[M],A=l[M];break}return y<A?-1:A<y?1:0},f.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(c,l){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return f.alloc(0);let y;if(l===void 0)for(l=0,y=0;y<c.length;++y)l+=c[y].length;const A=f.allocUnsafe(l);let M=0;for(y=0;y<c.length;++y){let W=c[y];if(Ne(W,s))M+W.length>A.length?(f.isBuffer(W)||(W=f.from(W)),W.copy(A,M)):s.prototype.set.call(A,W,M);else if(f.isBuffer(W))W.copy(A,M);else throw new TypeError('"list" argument must be an Array of Buffers');M+=W.length}return A};function L(T,c){if(f.isBuffer(T))return T.length;if(o.isView(T)||Ne(T,o))return T.byteLength;if(typeof T!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof T);const l=T.length,y=arguments.length>2&&arguments[2]===!0;if(!y&&l===0)return 0;let A=!1;for(;;)switch(c){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return Qe(T).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return Ee(T).length;default:if(A)return y?-1:Qe(T).length;c=(""+c).toLowerCase(),A=!0}}f.byteLength=L;function $(T,c,l){let y=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,c>>>=0,l<=c))return"";for(T||(T="utf8");;)switch(T){case"hex":return ce(this,c,l);case"utf8":case"utf-8":return K(this,c,l);case"ascii":return j(this,c,l);case"latin1":case"binary":return ue(this,c,l);case"base64":return ae(this,c,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,c,l);default:if(y)throw new TypeError("Unknown encoding: "+T);T=(T+"").toLowerCase(),y=!0}}f.prototype._isBuffer=!0;function _(T,c,l){const y=T[c];T[c]=T[l],T[l]=y}f.prototype.swap16=function(){const c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<c;l+=2)_(this,l,l+1);return this},f.prototype.swap32=function(){const c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<c;l+=4)_(this,l,l+3),_(this,l+1,l+2);return this},f.prototype.swap64=function(){const c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<c;l+=8)_(this,l,l+7),_(this,l+1,l+6),_(this,l+2,l+5),_(this,l+3,l+4);return this},f.prototype.toString=function(){const c=this.length;return c===0?"":arguments.length===0?K(this,0,c):$.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(c){if(!f.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:f.compare(this,c)===0},f.prototype.inspect=function(){let c="";const l=t.INSPECT_MAX_BYTES;return c=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(c+=" ... "),"<Buffer "+c+">"},r&&(f.prototype[r]=f.prototype.inspect),f.prototype.compare=function(c,l,y,A,M){if(Ne(c,s)&&(c=f.from(c,c.offset,c.byteLength)),!f.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(l===void 0&&(l=0),y===void 0&&(y=c?c.length:0),A===void 0&&(A=0),M===void 0&&(M=this.length),l<0||y>c.length||A<0||M>this.length)throw new RangeError("out of range index");if(A>=M&&l>=y)return 0;if(A>=M)return-1;if(l>=y)return 1;if(l>>>=0,y>>>=0,A>>>=0,M>>>=0,this===c)return 0;let W=M-A,se=y-l;const pe=Math.min(W,se),ge=this.slice(A,M),Ae=c.slice(l,y);for(let ve=0;ve<pe;++ve)if(ge[ve]!==Ae[ve]){W=ge[ve],se=Ae[ve];break}return W<se?-1:se<W?1:0};function D(T,c,l,y,A){if(T.length===0)return-1;if(typeof l=="string"?(y=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,st(l)&&(l=A?0:T.length-1),l<0&&(l=T.length+l),l>=T.length){if(A)return-1;l=T.length-1}else if(l<0)if(A)l=0;else return-1;if(typeof c=="string"&&(c=f.from(c,y)),f.isBuffer(c))return c.length===0?-1:N(T,c,l,y,A);if(typeof c=="number")return c=c&255,typeof s.prototype.indexOf=="function"?A?s.prototype.indexOf.call(T,c,l):s.prototype.lastIndexOf.call(T,c,l):N(T,[c],l,y,A);throw new TypeError("val must be string, number or Buffer")}function N(T,c,l,y,A){let M=1,W=T.length,se=c.length;if(y!==void 0&&(y=String(y).toLowerCase(),y==="ucs2"||y==="ucs-2"||y==="utf16le"||y==="utf-16le")){if(T.length<2||c.length<2)return-1;M=2,W/=2,se/=2,l/=2}function pe(Ae,ve){return M===1?Ae[ve]:Ae.readUInt16BE(ve*M)}let ge;if(A){let Ae=-1;for(ge=l;ge<W;ge++)if(pe(T,ge)===pe(c,Ae===-1?0:ge-Ae)){if(Ae===-1&&(Ae=ge),ge-Ae+1===se)return Ae*M}else Ae!==-1&&(ge-=ge-Ae),Ae=-1}else for(l+se>W&&(l=W-se),ge=l;ge>=0;ge--){let Ae=!0;for(let ve=0;ve<se;ve++)if(pe(T,ge+ve)!==pe(c,ve)){Ae=!1;break}if(Ae)return ge}return-1}f.prototype.includes=function(c,l,y){return this.indexOf(c,l,y)!==-1},f.prototype.indexOf=function(c,l,y){return D(this,c,l,y,!0)},f.prototype.lastIndexOf=function(c,l,y){return D(this,c,l,y,!1)};function G(T,c,l,y){l=Number(l)||0;const A=T.length-l;y?(y=Number(y),y>A&&(y=A)):y=A;const M=c.length;y>M/2&&(y=M/2);let W;for(W=0;W<y;++W){const se=parseInt(c.substr(W*2,2),16);if(st(se))return W;T[l+W]=se}return W}function H(T,c,l,y){return Le(Qe(c,T.length-l),T,l,y)}function Y(T,c,l,y){return Le(Ve(c),T,l,y)}function z(T,c,l,y){return Le(Ee(c),T,l,y)}function J(T,c,l,y){return Le(Pe(c,T.length-l),T,l,y)}f.prototype.write=function(c,l,y,A){if(l===void 0)A="utf8",y=this.length,l=0;else if(y===void 0&&typeof l=="string")A=l,y=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(y)?(y=y>>>0,A===void 0&&(A="utf8")):(A=y,y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const M=this.length-l;if((y===void 0||y>M)&&(y=M),c.length>0&&(y<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");A||(A="utf8");let W=!1;for(;;)switch(A){case"hex":return G(this,c,l,y);case"utf8":case"utf-8":return H(this,c,l,y);case"ascii":case"latin1":case"binary":return Y(this,c,l,y);case"base64":return z(this,c,l,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,c,l,y);default:if(W)throw new TypeError("Unknown encoding: "+A);A=(""+A).toLowerCase(),W=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ae(T,c,l){return c===0&&l===T.length?e.fromByteArray(T):e.fromByteArray(T.slice(c,l))}function K(T,c,l){l=Math.min(T.length,l);const y=[];let A=c;for(;A<l;){const M=T[A];let W=null,se=M>239?4:M>223?3:M>191?2:1;if(A+se<=l){let pe,ge,Ae,ve;switch(se){case 1:M<128&&(W=M);break;case 2:pe=T[A+1],(pe&192)===128&&(ve=(M&31)<<6|pe&63,ve>127&&(W=ve));break;case 3:pe=T[A+1],ge=T[A+2],(pe&192)===128&&(ge&192)===128&&(ve=(M&15)<<12|(pe&63)<<6|ge&63,ve>2047&&(ve<55296||ve>57343)&&(W=ve));break;case 4:pe=T[A+1],ge=T[A+2],Ae=T[A+3],(pe&192)===128&&(ge&192)===128&&(Ae&192)===128&&(ve=(M&15)<<18|(pe&63)<<12|(ge&63)<<6|Ae&63,ve>65535&&ve<1114112&&(W=ve))}}W===null?(W=65533,se=1):W>65535&&(W-=65536,y.push(W>>>10&1023|55296),W=56320|W&1023),y.push(W),A+=se}return oe(y)}const q=4096;function oe(T){const c=T.length;if(c<=q)return String.fromCharCode.apply(String,T);let l="",y=0;for(;y<c;)l+=String.fromCharCode.apply(String,T.slice(y,y+=q));return l}function j(T,c,l){let y="";l=Math.min(T.length,l);for(let A=c;A<l;++A)y+=String.fromCharCode(T[A]&127);return y}function ue(T,c,l){let y="";l=Math.min(T.length,l);for(let A=c;A<l;++A)y+=String.fromCharCode(T[A]);return y}function ce(T,c,l){const y=T.length;(!c||c<0)&&(c=0),(!l||l<0||l>y)&&(l=y);let A="";for(let M=c;M<l;++M)A+=ot[T[M]];return A}function F(T,c,l){const y=T.slice(c,l);let A="";for(let M=0;M<y.length-1;M+=2)A+=String.fromCharCode(y[M]+y[M+1]*256);return A}f.prototype.slice=function(c,l){const y=this.length;c=~~c,l=l===void 0?y:~~l,c<0?(c+=y,c<0&&(c=0)):c>y&&(c=y),l<0?(l+=y,l<0&&(l=0)):l>y&&(l=y),l<c&&(l=c);const A=this.subarray(c,l);return Object.setPrototypeOf(A,f.prototype),A};function U(T,c,l){if(T%1!==0||T<0)throw new RangeError("offset is not uint");if(T+c>l)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUintLE=f.prototype.readUIntLE=function(c,l,y){c=c>>>0,l=l>>>0,y||U(c,l,this.length);let A=this[c],M=1,W=0;for(;++W<l&&(M*=256);)A+=this[c+W]*M;return A},f.prototype.readUintBE=f.prototype.readUIntBE=function(c,l,y){c=c>>>0,l=l>>>0,y||U(c,l,this.length);let A=this[c+--l],M=1;for(;l>0&&(M*=256);)A+=this[c+--l]*M;return A},f.prototype.readUint8=f.prototype.readUInt8=function(c,l){return c=c>>>0,l||U(c,1,this.length),this[c]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(c,l){return c=c>>>0,l||U(c,2,this.length),this[c]|this[c+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(c,l){return c=c>>>0,l||U(c,2,this.length),this[c]<<8|this[c+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(c,l){return c=c>>>0,l||U(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(c,l){return c=c>>>0,l||U(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},f.prototype.readBigUInt64LE=We(function(c){c=c>>>0,de(c,"offset");const l=this[c],y=this[c+7];(l===void 0||y===void 0)&&me(c,this.length-8);const A=l+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24,M=this[++c]+this[++c]*2**8+this[++c]*2**16+y*2**24;return BigInt(A)+(BigInt(M)<<BigInt(32))}),f.prototype.readBigUInt64BE=We(function(c){c=c>>>0,de(c,"offset");const l=this[c],y=this[c+7];(l===void 0||y===void 0)&&me(c,this.length-8);const A=l*2**24+this[++c]*2**16+this[++c]*2**8+this[++c],M=this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+y;return(BigInt(A)<<BigInt(32))+BigInt(M)}),f.prototype.readIntLE=function(c,l,y){c=c>>>0,l=l>>>0,y||U(c,l,this.length);let A=this[c],M=1,W=0;for(;++W<l&&(M*=256);)A+=this[c+W]*M;return M*=128,A>=M&&(A-=Math.pow(2,8*l)),A},f.prototype.readIntBE=function(c,l,y){c=c>>>0,l=l>>>0,y||U(c,l,this.length);let A=l,M=1,W=this[c+--A];for(;A>0&&(M*=256);)W+=this[c+--A]*M;return M*=128,W>=M&&(W-=Math.pow(2,8*l)),W},f.prototype.readInt8=function(c,l){return c=c>>>0,l||U(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},f.prototype.readInt16LE=function(c,l){c=c>>>0,l||U(c,2,this.length);const y=this[c]|this[c+1]<<8;return y&32768?y|4294901760:y},f.prototype.readInt16BE=function(c,l){c=c>>>0,l||U(c,2,this.length);const y=this[c+1]|this[c]<<8;return y&32768?y|4294901760:y},f.prototype.readInt32LE=function(c,l){return c=c>>>0,l||U(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},f.prototype.readInt32BE=function(c,l){return c=c>>>0,l||U(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},f.prototype.readBigInt64LE=We(function(c){c=c>>>0,de(c,"offset");const l=this[c],y=this[c+7];(l===void 0||y===void 0)&&me(c,this.length-8);const A=this[c+4]+this[c+5]*2**8+this[c+6]*2**16+(y<<24);return(BigInt(A)<<BigInt(32))+BigInt(l+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24)}),f.prototype.readBigInt64BE=We(function(c){c=c>>>0,de(c,"offset");const l=this[c],y=this[c+7];(l===void 0||y===void 0)&&me(c,this.length-8);const A=(l<<24)+this[++c]*2**16+this[++c]*2**8+this[++c];return(BigInt(A)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+y)}),f.prototype.readFloatLE=function(c,l){return c=c>>>0,l||U(c,4,this.length),i.read(this,c,!0,23,4)},f.prototype.readFloatBE=function(c,l){return c=c>>>0,l||U(c,4,this.length),i.read(this,c,!1,23,4)},f.prototype.readDoubleLE=function(c,l){return c=c>>>0,l||U(c,8,this.length),i.read(this,c,!0,52,8)},f.prototype.readDoubleBE=function(c,l){return c=c>>>0,l||U(c,8,this.length),i.read(this,c,!1,52,8)};function k(T,c,l,y,A,M){if(!f.isBuffer(T))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>A||c<M)throw new RangeError('"value" argument is out of bounds');if(l+y>T.length)throw new RangeError("Index out of range")}f.prototype.writeUintLE=f.prototype.writeUIntLE=function(c,l,y,A){if(c=+c,l=l>>>0,y=y>>>0,!A){const se=Math.pow(2,8*y)-1;k(this,c,l,y,se,0)}let M=1,W=0;for(this[l]=c&255;++W<y&&(M*=256);)this[l+W]=c/M&255;return l+y},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(c,l,y,A){if(c=+c,l=l>>>0,y=y>>>0,!A){const se=Math.pow(2,8*y)-1;k(this,c,l,y,se,0)}let M=y-1,W=1;for(this[l+M]=c&255;--M>=0&&(W*=256);)this[l+M]=c/W&255;return l+y},f.prototype.writeUint8=f.prototype.writeUInt8=function(c,l,y){return c=+c,l=l>>>0,y||k(this,c,l,1,255,0),this[l]=c&255,l+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(c,l,y){return c=+c,l=l>>>0,y||k(this,c,l,2,65535,0),this[l]=c&255,this[l+1]=c>>>8,l+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(c,l,y){return c=+c,l=l>>>0,y||k(this,c,l,2,65535,0),this[l]=c>>>8,this[l+1]=c&255,l+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(c,l,y){return c=+c,l=l>>>0,y||k(this,c,l,4,4294967295,0),this[l+3]=c>>>24,this[l+2]=c>>>16,this[l+1]=c>>>8,this[l]=c&255,l+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(c,l,y){return c=+c,l=l>>>0,y||k(this,c,l,4,4294967295,0),this[l]=c>>>24,this[l+1]=c>>>16,this[l+2]=c>>>8,this[l+3]=c&255,l+4};function P(T,c,l,y,A){ye(c,y,A,T,l,7);let M=Number(c&BigInt(4294967295));T[l++]=M,M=M>>8,T[l++]=M,M=M>>8,T[l++]=M,M=M>>8,T[l++]=M;let W=Number(c>>BigInt(32)&BigInt(4294967295));return T[l++]=W,W=W>>8,T[l++]=W,W=W>>8,T[l++]=W,W=W>>8,T[l++]=W,l}function B(T,c,l,y,A){ye(c,y,A,T,l,7);let M=Number(c&BigInt(4294967295));T[l+7]=M,M=M>>8,T[l+6]=M,M=M>>8,T[l+5]=M,M=M>>8,T[l+4]=M;let W=Number(c>>BigInt(32)&BigInt(4294967295));return T[l+3]=W,W=W>>8,T[l+2]=W,W=W>>8,T[l+1]=W,W=W>>8,T[l]=W,l+8}f.prototype.writeBigUInt64LE=We(function(c,l=0){return P(this,c,l,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=We(function(c,l=0){return B(this,c,l,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(c,l,y,A){if(c=+c,l=l>>>0,!A){const pe=Math.pow(2,8*y-1);k(this,c,l,y,pe-1,-pe)}let M=0,W=1,se=0;for(this[l]=c&255;++M<y&&(W*=256);)c<0&&se===0&&this[l+M-1]!==0&&(se=1),this[l+M]=(c/W>>0)-se&255;return l+y},f.prototype.writeIntBE=function(c,l,y,A){if(c=+c,l=l>>>0,!A){const pe=Math.pow(2,8*y-1);k(this,c,l,y,pe-1,-pe)}let M=y-1,W=1,se=0;for(this[l+M]=c&255;--M>=0&&(W*=256);)c<0&&se===0&&this[l+M+1]!==0&&(se=1),this[l+M]=(c/W>>0)-se&255;return l+y},f.prototype.writeInt8=function(c,l,y){return c=+c,l=l>>>0,y||k(this,c,l,1,127,-128),c<0&&(c=255+c+1),this[l]=c&255,l+1},f.prototype.writeInt16LE=function(c,l,y){return c=+c,l=l>>>0,y||k(this,c,l,2,32767,-32768),this[l]=c&255,this[l+1]=c>>>8,l+2},f.prototype.writeInt16BE=function(c,l,y){return c=+c,l=l>>>0,y||k(this,c,l,2,32767,-32768),this[l]=c>>>8,this[l+1]=c&255,l+2},f.prototype.writeInt32LE=function(c,l,y){return c=+c,l=l>>>0,y||k(this,c,l,4,2147483647,-2147483648),this[l]=c&255,this[l+1]=c>>>8,this[l+2]=c>>>16,this[l+3]=c>>>24,l+4},f.prototype.writeInt32BE=function(c,l,y){return c=+c,l=l>>>0,y||k(this,c,l,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[l]=c>>>24,this[l+1]=c>>>16,this[l+2]=c>>>8,this[l+3]=c&255,l+4},f.prototype.writeBigInt64LE=We(function(c,l=0){return P(this,c,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=We(function(c,l=0){return B(this,c,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function V(T,c,l,y,A,M){if(l+y>T.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function Q(T,c,l,y,A){return c=+c,l=l>>>0,A||V(T,c,l,4),i.write(T,c,l,y,23,4),l+4}f.prototype.writeFloatLE=function(c,l,y){return Q(this,c,l,!0,y)},f.prototype.writeFloatBE=function(c,l,y){return Q(this,c,l,!1,y)};function ne(T,c,l,y,A){return c=+c,l=l>>>0,A||V(T,c,l,8),i.write(T,c,l,y,52,8),l+8}f.prototype.writeDoubleLE=function(c,l,y){return ne(this,c,l,!0,y)},f.prototype.writeDoubleBE=function(c,l,y){return ne(this,c,l,!1,y)},f.prototype.copy=function(c,l,y,A){if(!f.isBuffer(c))throw new TypeError("argument should be a Buffer");if(y||(y=0),!A&&A!==0&&(A=this.length),l>=c.length&&(l=c.length),l||(l=0),A>0&&A<y&&(A=y),A===y||c.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(y<0||y>=this.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("sourceEnd out of bounds");A>this.length&&(A=this.length),c.length-l<A-y&&(A=c.length-l+y);const M=A-y;return this===c&&typeof s.prototype.copyWithin=="function"?this.copyWithin(l,y,A):s.prototype.set.call(c,this.subarray(y,A),l),M},f.prototype.fill=function(c,l,y,A){if(typeof c=="string"){if(typeof l=="string"?(A=l,l=0,y=this.length):typeof y=="string"&&(A=y,y=this.length),A!==void 0&&typeof A!="string")throw new TypeError("encoding must be a string");if(typeof A=="string"&&!f.isEncoding(A))throw new TypeError("Unknown encoding: "+A);if(c.length===1){const W=c.charCodeAt(0);(A==="utf8"&&W<128||A==="latin1")&&(c=W)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(l<0||this.length<l||this.length<y)throw new RangeError("Out of range index");if(y<=l)return this;l=l>>>0,y=y===void 0?this.length:y>>>0,c||(c=0);let M;if(typeof c=="number")for(M=l;M<y;++M)this[M]=c;else{const W=f.isBuffer(c)?c:f.from(c,A),se=W.length;if(se===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(M=0;M<y-l;++M)this[M+l]=W[M%se]}return this};const S={};function O(T,c,l){S[T]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:c.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${T}]`,this.stack,delete this.name}get code(){return T}set code(A){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:A,writable:!0})}toString(){return`${this.name} [${T}]: ${this.message}`}}}O("ERR_BUFFER_OUT_OF_BOUNDS",function(T){return T?`${T} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),O("ERR_INVALID_ARG_TYPE",function(T,c){return`The "${T}" argument must be of type number. Received type ${typeof c}`},TypeError),O("ERR_OUT_OF_RANGE",function(T,c,l){let y=`The value of "${T}" is out of range.`,A=l;return Number.isInteger(l)&&Math.abs(l)>2**32?A=Z(String(l)):typeof l=="bigint"&&(A=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(A=Z(A)),A+="n"),y+=` It must be ${c}. Received ${A}`,y},RangeError);function Z(T){let c="",l=T.length;const y=T[0]==="-"?1:0;for(;l>=y+4;l-=3)c=`_${T.slice(l-3,l)}${c}`;return`${T.slice(0,l)}${c}`}function le(T,c,l){de(c,"offset"),(T[c]===void 0||T[c+l]===void 0)&&me(c,T.length-(l+1))}function ye(T,c,l,y,A,M){if(T>l||T<c){const W=typeof c=="bigint"?"n":"";let se;throw c===0||c===BigInt(0)?se=`>= 0${W} and < 2${W} ** ${(M+1)*8}${W}`:se=`>= -(2${W} ** ${(M+1)*8-1}${W}) and < 2 ** ${(M+1)*8-1}${W}`,new S.ERR_OUT_OF_RANGE("value",se,T)}le(y,A,M)}function de(T,c){if(typeof T!="number")throw new S.ERR_INVALID_ARG_TYPE(c,"number",T)}function me(T,c,l){throw Math.floor(T)!==T?(de(T,l),new S.ERR_OUT_OF_RANGE("offset","an integer",T)):c<0?new S.ERR_BUFFER_OUT_OF_BOUNDS:new S.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${c}`,T)}const Ue=/[^+/0-9A-Za-z-_]/g;function te(T){if(T=T.split("=")[0],T=T.trim().replace(Ue,""),T.length<2)return"";for(;T.length%4!==0;)T=T+"=";return T}function Qe(T,c){c=c||1/0;let l;const y=T.length;let A=null;const M=[];for(let W=0;W<y;++W){if(l=T.charCodeAt(W),l>55295&&l<57344){if(!A){if(l>56319){(c-=3)>-1&&M.push(239,191,189);continue}else if(W+1===y){(c-=3)>-1&&M.push(239,191,189);continue}A=l;continue}if(l<56320){(c-=3)>-1&&M.push(239,191,189),A=l;continue}l=(A-55296<<10|l-56320)+65536}else A&&(c-=3)>-1&&M.push(239,191,189);if(A=null,l<128){if((c-=1)<0)break;M.push(l)}else if(l<2048){if((c-=2)<0)break;M.push(l>>6|192,l&63|128)}else if(l<65536){if((c-=3)<0)break;M.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((c-=4)<0)break;M.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return M}function Ve(T){const c=[];for(let l=0;l<T.length;++l)c.push(T.charCodeAt(l)&255);return c}function Pe(T,c){let l,y,A;const M=[];for(let W=0;W<T.length&&!((c-=2)<0);++W)l=T.charCodeAt(W),y=l>>8,A=l%256,M.push(A),M.push(y);return M}function Ee(T){return e.toByteArray(te(T))}function Le(T,c,l,y){let A;for(A=0;A<y&&!(A+l>=c.length||A>=T.length);++A)c[A+l]=T[A];return A}function Ne(T,c){return T instanceof c||T!=null&&T.constructor!=null&&T.constructor.name!=null&&T.constructor.name===c.name}function st(T){return T!==T}const ot=function(){const T="0123456789abcdef",c=new Array(256);for(let l=0;l<16;++l){const y=l*16;for(let A=0;A<16;++A)c[y+A]=T[l]+T[A]}return c}();function We(T){return typeof BigInt>"u"?ni:T}function ni(){throw new Error("BigInt not supported")}})(Xe);const Ce=Xe.Buffer,jd=Xe.Blob,zd=Xe.BlobOptions,qd=Xe.Buffer,Vd=Xe.File,Kd=Xe.FileOptions,Yd=Xe.INSPECT_MAX_BYTES,Xd=Xe.SlowBuffer,Qd=Xe.TranscodeEncoding,Zd=Xe.atob,Jd=Xe.btoa,ep=Xe.constants,tp=Xe.isAscii,ip=Xe.isUtf8,rp=Xe.kMaxLength,np=Xe.kStringMaxLength,sp=Xe.resolveObjectURL,op=Xe.transcode,ap=Object.freeze(Object.defineProperty({__proto__:null,Blob:jd,BlobOptions:zd,Buffer:qd,File:Vd,FileOptions:Kd,INSPECT_MAX_BYTES:Yd,SlowBuffer:Xd,TranscodeEncoding:Qd,atob:Zd,btoa:Jd,constants:ep,default:Ce,isAscii:tp,isUtf8:ip,kMaxLength:rp,kStringMaxLength:np,resolveObjectURL:sp,transcode:op},Symbol.toStringTag,{value:"Module"}));var En={},vn={},mn,Ua;function Gu(){return Ua||(Ua=1,mn=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},i=Symbol("test"),r=Object(i);if(typeof i=="string"||Object.prototype.toString.call(i)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var n=42;e[i]=n;for(i in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==i||!Object.prototype.propertyIsEnumerable.call(e,i))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,i);if(o.value!==n||o.enumerable!==!0)return!1}return!0}),mn}var yn,Wa;function Xo(){if(Wa)return yn;Wa=1;var t=Gu();return yn=function(){return t()&&!!Symbol.toStringTag},yn}var bn,$a;function lp(){return $a||($a=1,bn=Error),bn}var Rn,Ha;function up(){return Ha||(Ha=1,Rn=EvalError),Rn}var Sn,ka;function cp(){return ka||(ka=1,Sn=RangeError),Sn}var An,ja;function hp(){return ja||(ja=1,An=ReferenceError),An}var Tn,za;function Uu(){return za||(za=1,Tn=SyntaxError),Tn}var wn,qa;function Qr(){return qa||(qa=1,wn=TypeError),wn}var _n,Va;function fp(){return Va||(Va=1,_n=URIError),_n}var On,Ka;function dp(){if(Ka)return On;Ka=1;var t=typeof Symbol<"u"&&Symbol,e=Gu();return On=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},On}var In,Ya;function pp(){if(Ya)return In;Ya=1;var t={__proto__:null,foo:{}},e=Object;return In=function(){return{__proto__:t}.foo===t.foo&&!(t instanceof e)},In}var Cn,Xa;function xp(){if(Xa)return Cn;Xa=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,i=Math.max,r="[object Function]",n=function(h,g){for(var f=[],x=0;x<h.length;x+=1)f[x]=h[x];for(var a=0;a<g.length;a+=1)f[a+h.length]=g[a];return f},s=function(h,g){for(var f=[],x=g,a=0;x<h.length;x+=1,a+=1)f[a]=h[x];return f},o=function(u,h){for(var g="",f=0;f<u.length;f+=1)g+=u[f],f+1<u.length&&(g+=h);return g};return Cn=function(h){var g=this;if(typeof g!="function"||e.apply(g)!==r)throw new TypeError(t+g);for(var f=s(arguments,1),x,a=function(){if(this instanceof x){var m=g.apply(this,n(f,arguments));return Object(m)===m?m:this}return g.apply(h,n(f,arguments))},d=i(0,g.length-f.length),p=[],R=0;R<d;R++)p[R]="$"+R;if(x=Function("binder","return function ("+o(p,",")+"){ return binder.apply(this,arguments); }")(a),g.prototype){var v=function(){};v.prototype=g.prototype,x.prototype=new v,v.prototype=null}return x},Cn}var Mn,Qa;function Qo(){if(Qa)return Mn;Qa=1;var t=xp();return Mn=Function.prototype.bind||t,Mn}var Dn,Za;function gp(){if(Za)return Dn;Za=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,i=Qo();return Dn=i.call(t,e),Dn}var Pn,Ja;function ir(){if(Ja)return Pn;Ja=1;var t,e=lp(),i=up(),r=cp(),n=hp(),s=Uu(),o=Qr(),u=fp(),h=Function,g=function(K){try{return h('"use strict"; return ('+K+").constructor;")()}catch{}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"")}catch{f=null}var x=function(){throw new o},a=f?function(){try{return arguments.callee,x}catch{try{return f(arguments,"callee").get}catch{return x}}}():x,d=dp()(),p=pp()(),R=Object.getPrototypeOf||(p?function(K){return K.__proto__}:null),v={},m=typeof Uint8Array>"u"||!R?t:R(Uint8Array),E={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":d&&R?R([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":v,"%AsyncGenerator%":v,"%AsyncGeneratorFunction%":v,"%AsyncIteratorPrototype%":v,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":i,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":h,"%GeneratorFunction%":v,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d&&R?R(R([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!d||!R?t:R(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":r,"%ReferenceError%":n,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!d||!R?t:R(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":d&&R?R(""[Symbol.iterator]()):t,"%Symbol%":d?Symbol:t,"%SyntaxError%":s,"%ThrowTypeError%":a,"%TypedArray%":m,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":u,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet};if(R)try{null.error}catch(K){var b=R(R(K));E["%Error.prototype%"]=b}var C=function K(q){var oe;if(q==="%AsyncFunction%")oe=g("async function () {}");else if(q==="%GeneratorFunction%")oe=g("function* () {}");else if(q==="%AsyncGeneratorFunction%")oe=g("async function* () {}");else if(q==="%AsyncGenerator%"){var j=K("%AsyncGeneratorFunction%");j&&(oe=j.prototype)}else if(q==="%AsyncIteratorPrototype%"){var ue=K("%AsyncGenerator%");ue&&R&&(oe=R(ue.prototype))}return E[q]=oe,oe},w={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},L=Qo(),$=gp(),_=L.call(Function.call,Array.prototype.concat),D=L.call(Function.apply,Array.prototype.splice),N=L.call(Function.call,String.prototype.replace),G=L.call(Function.call,String.prototype.slice),H=L.call(Function.call,RegExp.prototype.exec),Y=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,z=/\\(\\)?/g,J=function(q){var oe=G(q,0,1),j=G(q,-1);if(oe==="%"&&j!=="%")throw new s("invalid intrinsic syntax, expected closing `%`");if(j==="%"&&oe!=="%")throw new s("invalid intrinsic syntax, expected opening `%`");var ue=[];return N(q,Y,function(ce,F,U,k){ue[ue.length]=U?N(k,z,"$1"):F||ce}),ue},ae=function(q,oe){var j=q,ue;if($(w,j)&&(ue=w[j],j="%"+ue[0]+"%"),$(E,j)){var ce=E[j];if(ce===v&&(ce=C(j)),typeof ce>"u"&&!oe)throw new o("intrinsic "+q+" exists, but is not available. Please file an issue!");return{alias:ue,name:j,value:ce}}throw new s("intrinsic "+q+" does not exist!")};return Pn=function(q,oe){if(typeof q!="string"||q.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof oe!="boolean")throw new o('"allowMissing" argument must be a boolean');if(H(/^%?[^%]*%?$/,q)===null)throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var j=J(q),ue=j.length>0?j[0]:"",ce=ae("%"+ue+"%",oe),F=ce.name,U=ce.value,k=!1,P=ce.alias;P&&(ue=P[0],D(j,_([0,1],P)));for(var B=1,V=!0;B<j.length;B+=1){var Q=j[B],ne=G(Q,0,1),S=G(Q,-1);if((ne==='"'||ne==="'"||ne==="`"||S==='"'||S==="'"||S==="`")&&ne!==S)throw new s("property names with quotes must have matching quotes");if((Q==="constructor"||!V)&&(k=!0),ue+="."+Q,F="%"+ue+"%",$(E,F))U=E[F];else if(U!=null){if(!(Q in U)){if(!oe)throw new o("base intrinsic for "+q+" exists, but the property is not available.");return}if(f&&B+1>=j.length){var O=f(U,Q);V=!!O,V&&"get"in O&&!("originalValue"in O.get)?U=O.get:U=U[Q]}else V=$(U,Q),U=U[Q];V&&!k&&(E[F]=U)}}return U},Pn}var Ln={exports:{}},Nn,el;function Zo(){if(el)return Nn;el=1;var t=ir(),e=t("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return Nn=e,Nn}var Bn,tl;function Jo(){if(tl)return Bn;tl=1;var t=ir(),e=t("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch{e=null}return Bn=e,Bn}var Fn,il;function Ep(){if(il)return Fn;il=1;var t=Zo(),e=Uu(),i=Qr(),r=Jo();return Fn=function(s,o,u){if(!s||typeof s!="object"&&typeof s!="function")throw new i("`obj` must be an object or a function`");if(typeof o!="string"&&typeof o!="symbol")throw new i("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new i("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new i("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new i("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new i("`loose`, if provided, must be a boolean");var h=arguments.length>3?arguments[3]:null,g=arguments.length>4?arguments[4]:null,f=arguments.length>5?arguments[5]:null,x=arguments.length>6?arguments[6]:!1,a=!!r&&r(s,o);if(t)t(s,o,{configurable:f===null&&a?a.configurable:!f,enumerable:h===null&&a?a.enumerable:!h,value:u,writable:g===null&&a?a.writable:!g});else if(x||!h&&!g&&!f)s[o]=u;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Fn}var Gn,rl;function vp(){if(rl)return Gn;rl=1;var t=Zo(),e=function(){return!!t};return e.hasArrayLengthDefineBug=function(){if(!t)return null;try{return t([],"length",{value:1}).length!==1}catch{return!0}},Gn=e,Gn}var Un,nl;function mp(){if(nl)return Un;nl=1;var t=ir(),e=Ep(),i=vp()(),r=Jo(),n=Qr(),s=t("%Math.floor%");return Un=function(u,h){if(typeof u!="function")throw new n("`fn` is not a function");if(typeof h!="number"||h<0||h>4294967295||s(h)!==h)throw new n("`length` must be a positive 32-bit integer");var g=arguments.length>2&&!!arguments[2],f=!0,x=!0;if("length"in u&&r){var a=r(u,"length");a&&!a.configurable&&(f=!1),a&&!a.writable&&(x=!1)}return(f||x||!g)&&(i?e(u,"length",h,!0,!0):e(u,"length",h)),u},Un}var sl;function Wu(){return sl||(sl=1,function(t){var e=Qo(),i=ir(),r=mp(),n=Qr(),s=i("%Function.prototype.apply%"),o=i("%Function.prototype.call%"),u=i("%Reflect.apply%",!0)||e.call(o,s),h=Zo(),g=i("%Math.max%");t.exports=function(a){if(typeof a!="function")throw new n("a function is required");var d=u(e,o,arguments);return r(d,1+g(0,a.length-(arguments.length-1)),!0)};var f=function(){return u(e,s,arguments)};h?h(t.exports,"apply",{value:f}):t.exports.apply=f}(Ln)),Ln.exports}var Wn,ol;function $u(){if(ol)return Wn;ol=1;var t=ir(),e=Wu(),i=e(t("String.prototype.indexOf"));return Wn=function(n,s){var o=t(n,!!s);return typeof o=="function"&&i(n,".prototype.")>-1?e(o):o},Wn}var $n,al;function yp(){if(al)return $n;al=1;var t=Xo()(),e=$u(),i=e("Object.prototype.toString"),r=function(u){return t&&u&&typeof u=="object"&&Symbol.toStringTag in u?!1:i(u)==="[object Arguments]"},n=function(u){return r(u)?!0:u!==null&&typeof u=="object"&&typeof u.length=="number"&&u.length>=0&&i(u)!=="[object Array]"&&i(u.callee)==="[object Function]"},s=function(){return r(arguments)}();return r.isLegacyArguments=n,$n=s?r:n,$n}var Hn,ll;function bp(){if(ll)return Hn;ll=1;var t=Object.prototype.toString,e=Function.prototype.toString,i=/^\s*(?:function)?\*/,r=Xo()(),n=Object.getPrototypeOf,s=function(){if(!r)return!1;try{return Function("return function*() {}")()}catch{}},o;return Hn=function(h){if(typeof h!="function")return!1;if(i.test(e.call(h)))return!0;if(!r){var g=t.call(h);return g==="[object GeneratorFunction]"}if(!n)return!1;if(typeof o>"u"){var f=s();o=f?n(f):!1}return n(h)===o},Hn}var kn,ul;function Rp(){if(ul)return kn;ul=1;var t=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,i,r;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{i=Object.defineProperty({},"length",{get:function(){throw r}}),r={},e(function(){throw 42},null,i)}catch(E){E!==r&&(e=null)}else e=null;var n=/^\s*class\b/,s=function(b){try{var C=t.call(b);return n.test(C)}catch{return!1}},o=function(b){try{return s(b)?!1:(t.call(b),!0)}catch{return!1}},u=Object.prototype.toString,h="[object Object]",g="[object Function]",f="[object GeneratorFunction]",x="[object HTMLAllCollection]",a="[object HTML document.all class]",d="[object HTMLCollection]",p=typeof Symbol=="function"&&!!Symbol.toStringTag,R=!(0 in[,]),v=function(){return!1};if(typeof document=="object"){var m=document.all;u.call(m)===u.call(document.all)&&(v=function(b){if((R||!b)&&(typeof b>"u"||typeof b=="object"))try{var C=u.call(b);return(C===x||C===a||C===d||C===h)&&b("")==null}catch{}return!1})}return kn=e?function(b){if(v(b))return!0;if(!b||typeof b!="function"&&typeof b!="object")return!1;try{e(b,null,i)}catch(C){if(C!==r)return!1}return!s(b)&&o(b)}:function(b){if(v(b))return!0;if(!b||typeof b!="function"&&typeof b!="object")return!1;if(p)return o(b);if(s(b))return!1;var C=u.call(b);return C!==g&&C!==f&&!/^\[object HTML/.test(C)?!1:o(b)},kn}var jn,cl;function Sp(){if(cl)return jn;cl=1;var t=Rp(),e=Object.prototype.toString,i=Object.prototype.hasOwnProperty,r=function(h,g,f){for(var x=0,a=h.length;x<a;x++)i.call(h,x)&&(f==null?g(h[x],x,h):g.call(f,h[x],x,h))},n=function(h,g,f){for(var x=0,a=h.length;x<a;x++)f==null?g(h.charAt(x),x,h):g.call(f,h.charAt(x),x,h)},s=function(h,g,f){for(var x in h)i.call(h,x)&&(f==null?g(h[x],x,h):g.call(f,h[x],x,h))},o=function(h,g,f){if(!t(g))throw new TypeError("iterator must be a function");var x;arguments.length>=3&&(x=f),e.call(h)==="[object Array]"?r(h,g,x):typeof h=="string"?n(h,g,x):s(h,g,x)};return jn=o,jn}var zn,hl;function Ap(){return hl||(hl=1,zn=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),zn}var qn,fl;function Tp(){if(fl)return qn;fl=1;var t=Ap(),e=typeof globalThis>"u"?Je:globalThis;return qn=function(){for(var r=[],n=0;n<t.length;n++)typeof e[t[n]]=="function"&&(r[r.length]=t[n]);return r},qn}var Vn,dl;function Hu(){if(dl)return Vn;dl=1;var t=Sp(),e=Tp(),i=Wu(),r=$u(),n=Jo(),s=r("Object.prototype.toString"),o=Xo()(),u=typeof globalThis>"u"?Je:globalThis,h=e(),g=r("String.prototype.slice"),f=Object.getPrototypeOf,x=r("Array.prototype.indexOf",!0)||function(v,m){for(var E=0;E<v.length;E+=1)if(v[E]===m)return E;return-1},a={__proto__:null};o&&n&&f?t(h,function(R){var v=new u[R];if(Symbol.toStringTag in v){var m=f(v),E=n(m,Symbol.toStringTag);if(!E){var b=f(m);E=n(b,Symbol.toStringTag)}a["$"+R]=i(E.get)}}):t(h,function(R){var v=new u[R],m=v.slice||v.set;m&&(a["$"+R]=i(m))});var d=function(v){var m=!1;return t(a,function(E,b){if(!m)try{"$"+E(v)===b&&(m=g(b,1))}catch{}}),m},p=function(v){var m=!1;return t(a,function(E,b){if(!m)try{E(v),m=g(b,1)}catch{}}),m};return Vn=function(v){if(!v||typeof v!="object")return!1;if(!o){var m=g(s(v),8,-1);return x(h,m)>-1?m:m!=="Object"?!1:p(v)}return n?d(v):null},Vn}var Kn,pl;function wp(){if(pl)return Kn;pl=1;var t=Hu();return Kn=function(i){return!!t(i)},Kn}var xl;function _p(){return xl||(xl=1,function(t){var e=yp(),i=bp(),r=Hu(),n=wp();function s(te){return te.call.bind(te)}var o=typeof BigInt<"u",u=typeof Symbol<"u",h=s(Object.prototype.toString),g=s(Number.prototype.valueOf),f=s(String.prototype.valueOf),x=s(Boolean.prototype.valueOf);if(o)var a=s(BigInt.prototype.valueOf);if(u)var d=s(Symbol.prototype.valueOf);function p(te,Qe){if(typeof te!="object")return!1;try{return Qe(te),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=i,t.isTypedArray=n;function R(te){return typeof Promise<"u"&&te instanceof Promise||te!==null&&typeof te=="object"&&typeof te.then=="function"&&typeof te.catch=="function"}t.isPromise=R;function v(te){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(te):n(te)||F(te)}t.isArrayBufferView=v;function m(te){return r(te)==="Uint8Array"}t.isUint8Array=m;function E(te){return r(te)==="Uint8ClampedArray"}t.isUint8ClampedArray=E;function b(te){return r(te)==="Uint16Array"}t.isUint16Array=b;function C(te){return r(te)==="Uint32Array"}t.isUint32Array=C;function w(te){return r(te)==="Int8Array"}t.isInt8Array=w;function L(te){return r(te)==="Int16Array"}t.isInt16Array=L;function $(te){return r(te)==="Int32Array"}t.isInt32Array=$;function _(te){return r(te)==="Float32Array"}t.isFloat32Array=_;function D(te){return r(te)==="Float64Array"}t.isFloat64Array=D;function N(te){return r(te)==="BigInt64Array"}t.isBigInt64Array=N;function G(te){return r(te)==="BigUint64Array"}t.isBigUint64Array=G;function H(te){return h(te)==="[object Map]"}H.working=typeof Map<"u"&&H(new Map);function Y(te){return typeof Map>"u"?!1:H.working?H(te):te instanceof Map}t.isMap=Y;function z(te){return h(te)==="[object Set]"}z.working=typeof Set<"u"&&z(new Set);function J(te){return typeof Set>"u"?!1:z.working?z(te):te instanceof Set}t.isSet=J;function ae(te){return h(te)==="[object WeakMap]"}ae.working=typeof WeakMap<"u"&&ae(new WeakMap);function K(te){return typeof WeakMap>"u"?!1:ae.working?ae(te):te instanceof WeakMap}t.isWeakMap=K;function q(te){return h(te)==="[object WeakSet]"}q.working=typeof WeakSet<"u"&&q(new WeakSet);function oe(te){return q(te)}t.isWeakSet=oe;function j(te){return h(te)==="[object ArrayBuffer]"}j.working=typeof ArrayBuffer<"u"&&j(new ArrayBuffer);function ue(te){return typeof ArrayBuffer>"u"?!1:j.working?j(te):te instanceof ArrayBuffer}t.isArrayBuffer=ue;function ce(te){return h(te)==="[object DataView]"}ce.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&ce(new DataView(new ArrayBuffer(1),0,1));function F(te){return typeof DataView>"u"?!1:ce.working?ce(te):te instanceof DataView}t.isDataView=F;var U=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function k(te){return h(te)==="[object SharedArrayBuffer]"}function P(te){return typeof U>"u"?!1:(typeof k.working>"u"&&(k.working=k(new U)),k.working?k(te):te instanceof U)}t.isSharedArrayBuffer=P;function B(te){return h(te)==="[object AsyncFunction]"}t.isAsyncFunction=B;function V(te){return h(te)==="[object Map Iterator]"}t.isMapIterator=V;function Q(te){return h(te)==="[object Set Iterator]"}t.isSetIterator=Q;function ne(te){return h(te)==="[object Generator]"}t.isGeneratorObject=ne;function S(te){return h(te)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=S;function O(te){return p(te,g)}t.isNumberObject=O;function Z(te){return p(te,f)}t.isStringObject=Z;function le(te){return p(te,x)}t.isBooleanObject=le;function ye(te){return o&&p(te,a)}t.isBigIntObject=ye;function de(te){return u&&p(te,d)}t.isSymbolObject=de;function me(te){return O(te)||Z(te)||le(te)||ye(te)||de(te)}t.isBoxedPrimitive=me;function Ue(te){return typeof Uint8Array<"u"&&(ue(te)||P(te))}t.isAnyArrayBuffer=Ue,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(te){Object.defineProperty(t,te,{enumerable:!1,value:function(){throw new Error(te+" is not supported in userland")}})})}(vn)),vn}var Yn,gl;function Op(){return gl||(gl=1,Yn=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),Yn}var hr={exports:{}},El;function ri(){return El||(El=1,typeof Object.create=="function"?hr.exports=function(e,i){i&&(e.super_=i,e.prototype=Object.create(i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:hr.exports=function(e,i){if(i){e.super_=i;var r=function(){};r.prototype=i.prototype,e.prototype=new r,e.prototype.constructor=e}}),hr.exports}var vl;function _t(){return vl||(vl=1,function(t){var e={},i=Object.getOwnPropertyDescriptors||function(U){for(var k=Object.keys(U),P={},B=0;B<k.length;B++)P[k[B]]=Object.getOwnPropertyDescriptor(U,k[B]);return P},r=/%[sdj%]/g;t.format=function(F){if(!L(F)){for(var U=[],k=0;k<arguments.length;k++)U.push(u(arguments[k]));return U.join(" ")}for(var k=1,P=arguments,B=P.length,V=String(F).replace(r,function(ne){if(ne==="%%")return"%";if(k>=B)return ne;switch(ne){case"%s":return String(P[k++]);case"%d":return Number(P[k++]);case"%j":try{return JSON.stringify(P[k++])}catch{return"[Circular]"}default:return ne}}),Q=P[k];k<B;Q=P[++k])b(Q)||!N(Q)?V+=" "+Q:V+=" "+u(Q);return V},t.deprecate=function(F,U){if(typeof ie<"u"&&ie.noDeprecation===!0)return F;if(typeof ie>"u")return function(){return t.deprecate(F,U).apply(this,arguments)};var k=!1;function P(){if(!k){if(ie.throwDeprecation)throw new Error(U);ie.traceDeprecation?console.trace(U):console.error(U),k=!0}return F.apply(this,arguments)}return P};var n={},s=/^$/;if(e.NODE_DEBUG){var o=e.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+o+"$","i")}t.debuglog=function(F){if(F=F.toUpperCase(),!n[F])if(s.test(F)){var U=ie.pid;n[F]=function(){var k=t.format.apply(t,arguments);console.error("%s %d: %s",F,U,k)}}else n[F]=function(){};return n[F]};function u(F,U){var k={seen:[],stylize:g};return arguments.length>=3&&(k.depth=arguments[2]),arguments.length>=4&&(k.colors=arguments[3]),E(U)?k.showHidden=U:U&&t._extend(k,U),_(k.showHidden)&&(k.showHidden=!1),_(k.depth)&&(k.depth=2),_(k.colors)&&(k.colors=!1),_(k.customInspect)&&(k.customInspect=!0),k.colors&&(k.stylize=h),x(k,F,k.depth)}t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function h(F,U){var k=u.styles[U];return k?"\x1B["+u.colors[k][0]+"m"+F+"\x1B["+u.colors[k][1]+"m":F}function g(F,U){return F}function f(F){var U={};return F.forEach(function(k,P){U[k]=!0}),U}function x(F,U,k){if(F.customInspect&&U&&Y(U.inspect)&&U.inspect!==t.inspect&&!(U.constructor&&U.constructor.prototype===U)){var P=U.inspect(k,F);return L(P)||(P=x(F,P,k)),P}var B=a(F,U);if(B)return B;var V=Object.keys(U),Q=f(V);if(F.showHidden&&(V=Object.getOwnPropertyNames(U)),H(U)&&(V.indexOf("message")>=0||V.indexOf("description")>=0))return d(U);if(V.length===0){if(Y(U)){var ne=U.name?": "+U.name:"";return F.stylize("[Function"+ne+"]","special")}if(D(U))return F.stylize(RegExp.prototype.toString.call(U),"regexp");if(G(U))return F.stylize(Date.prototype.toString.call(U),"date");if(H(U))return d(U)}var S="",O=!1,Z=["{","}"];if(m(U)&&(O=!0,Z=["[","]"]),Y(U)){var le=U.name?": "+U.name:"";S=" [Function"+le+"]"}if(D(U)&&(S=" "+RegExp.prototype.toString.call(U)),G(U)&&(S=" "+Date.prototype.toUTCString.call(U)),H(U)&&(S=" "+d(U)),V.length===0&&(!O||U.length==0))return Z[0]+S+Z[1];if(k<0)return D(U)?F.stylize(RegExp.prototype.toString.call(U),"regexp"):F.stylize("[Object]","special");F.seen.push(U);var ye;return O?ye=p(F,U,k,Q,V):ye=V.map(function(de){return R(F,U,k,Q,de,O)}),F.seen.pop(),v(ye,S,Z)}function a(F,U){if(_(U))return F.stylize("undefined","undefined");if(L(U)){var k="'"+JSON.stringify(U).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return F.stylize(k,"string")}if(w(U))return F.stylize(""+U,"number");if(E(U))return F.stylize(""+U,"boolean");if(b(U))return F.stylize("null","null")}function d(F){return"["+Error.prototype.toString.call(F)+"]"}function p(F,U,k,P,B){for(var V=[],Q=0,ne=U.length;Q<ne;++Q)oe(U,String(Q))?V.push(R(F,U,k,P,String(Q),!0)):V.push("");return B.forEach(function(S){S.match(/^\d+$/)||V.push(R(F,U,k,P,S,!0))}),V}function R(F,U,k,P,B,V){var Q,ne,S;if(S=Object.getOwnPropertyDescriptor(U,B)||{value:U[B]},S.get?S.set?ne=F.stylize("[Getter/Setter]","special"):ne=F.stylize("[Getter]","special"):S.set&&(ne=F.stylize("[Setter]","special")),oe(P,B)||(Q="["+B+"]"),ne||(F.seen.indexOf(S.value)<0?(b(k)?ne=x(F,S.value,null):ne=x(F,S.value,k-1),ne.indexOf(`
`)>-1&&(V?ne=ne.split(`
`).map(function(O){return"  "+O}).join(`
`).slice(2):ne=`
`+ne.split(`
`).map(function(O){return"   "+O}).join(`
`))):ne=F.stylize("[Circular]","special")),_(Q)){if(V&&B.match(/^\d+$/))return ne;Q=JSON.stringify(""+B),Q.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Q=Q.slice(1,-1),Q=F.stylize(Q,"name")):(Q=Q.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Q=F.stylize(Q,"string"))}return Q+": "+ne}function v(F,U,k){var P=F.reduce(function(B,V){return V.indexOf(`
`)>=0,B+V.replace(/\u001b\[\d\d?m/g,"").length+1},0);return P>60?k[0]+(U===""?"":U+`
 `)+" "+F.join(`,
  `)+" "+k[1]:k[0]+U+" "+F.join(", ")+" "+k[1]}t.types=_p();function m(F){return Array.isArray(F)}t.isArray=m;function E(F){return typeof F=="boolean"}t.isBoolean=E;function b(F){return F===null}t.isNull=b;function C(F){return F==null}t.isNullOrUndefined=C;function w(F){return typeof F=="number"}t.isNumber=w;function L(F){return typeof F=="string"}t.isString=L;function $(F){return typeof F=="symbol"}t.isSymbol=$;function _(F){return F===void 0}t.isUndefined=_;function D(F){return N(F)&&J(F)==="[object RegExp]"}t.isRegExp=D,t.types.isRegExp=D;function N(F){return typeof F=="object"&&F!==null}t.isObject=N;function G(F){return N(F)&&J(F)==="[object Date]"}t.isDate=G,t.types.isDate=G;function H(F){return N(F)&&(J(F)==="[object Error]"||F instanceof Error)}t.isError=H,t.types.isNativeError=H;function Y(F){return typeof F=="function"}t.isFunction=Y;function z(F){return F===null||typeof F=="boolean"||typeof F=="number"||typeof F=="string"||typeof F=="symbol"||typeof F>"u"}t.isPrimitive=z,t.isBuffer=Op();function J(F){return Object.prototype.toString.call(F)}function ae(F){return F<10?"0"+F.toString(10):F.toString(10)}var K=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function q(){var F=new Date,U=[ae(F.getHours()),ae(F.getMinutes()),ae(F.getSeconds())].join(":");return[F.getDate(),K[F.getMonth()],U].join(" ")}t.log=function(){console.log("%s - %s",q(),t.format.apply(t,arguments))},t.inherits=ri(),t._extend=function(F,U){if(!U||!N(U))return F;for(var k=Object.keys(U),P=k.length;P--;)F[k[P]]=U[k[P]];return F};function oe(F,U){return Object.prototype.hasOwnProperty.call(F,U)}var j=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(U){if(typeof U!="function")throw new TypeError('The "original" argument must be of type Function');if(j&&U[j]){var k=U[j];if(typeof k!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(k,j,{value:k,enumerable:!1,writable:!1,configurable:!0}),k}function k(){for(var P,B,V=new Promise(function(S,O){P=S,B=O}),Q=[],ne=0;ne<arguments.length;ne++)Q.push(arguments[ne]);Q.push(function(S,O){S?B(S):P(O)});try{U.apply(this,Q)}catch(S){B(S)}return V}return Object.setPrototypeOf(k,Object.getPrototypeOf(U)),j&&Object.defineProperty(k,j,{value:k,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(k,i(U))},t.promisify.custom=j;function ue(F,U){if(!F){var k=new Error("Promise was rejected with a falsy value");k.reason=F,F=k}return U(F)}function ce(F){if(typeof F!="function")throw new TypeError('The "original" argument must be of type Function');function U(){for(var k=[],P=0;P<arguments.length;P++)k.push(arguments[P]);var B=k.pop();if(typeof B!="function")throw new TypeError("The last argument must be of type Function");var V=this,Q=function(){return B.apply(V,arguments)};F.apply(this,k).then(function(ne){ie.nextTick(Q.bind(null,null,ne))},function(ne){ie.nextTick(ue.bind(null,ne,Q))})}return Object.setPrototypeOf(U,Object.getPrototypeOf(F)),Object.defineProperties(U,i(F)),U}t.callbackify=ce}(En)),En}var Xn,ml;function Ip(){if(ml)return Xn;ml=1;var t=Et.EventEmitter,e=_t(),i=[7,8],r=[1,2],n=["none","even","mark","odd","space"],s=["RTSCTS"],o={baudrate:9600,parity:"none",rtscts:!1,databits:8,stopbits:1,buffersize:256};function u(d){switch(d.dataBits){case 7:d.dataBits="seven";break;case 8:d.dataBits="eight";break}switch(d.stopBits){case 1:d.stopBits="one";break;case 2:d.stopBits="two";break}switch(d.parity){case"none":d.parity="no";break}return d}function h(d,p,R,v){t.call(this);var m=this,E=Array.prototype.slice.call(arguments);v=E.pop(),typeof v!="function"&&(v=null),p=typeof p!="function"&&p||{},R=R??!0,v=v||function(L){L&&m.emit("error",L)};var b;if(p.baudRate=p.baudRate||p.baudrate||o.baudrate,p.dataBits=p.dataBits||p.databits||o.databits,i.indexOf(p.dataBits)===-1){b=new Error('Invalid "databits": '+p.dataBits),v(b);return}if(p.stopBits=p.stopBits||p.stopbits||o.stopbits,r.indexOf(p.stopBits)===-1){b=new Error('Invalid "stopbits": '+p.stopbits),v(b);return}if(p.parity=p.parity||o.parity,n.indexOf(p.parity)===-1){b=new Error('Invalid "parity": '+p.parity),v(b);return}if(!d){b=new Error("Invalid port specified: "+d),v(b);return}if(p.rtscts=o.rtscts,p.flowControl||p.flowcontrol){var C=p.flowControl||p.flowcontrol;if(typeof C=="boolean")p.rtscts=!0;else{var w=C.every(function(L){var $=L.toUpperCase(),_=s.indexOf($);if(_<0){var D=new Error('Invalid "flowControl": '+$+". Valid options: "+s.join(", "));return v(D),!1}else{switch(_){case 0:p.rtscts=!0;break}return!0}});if(!w)return}}if(p.bufferSize=p.bufferSize||p.buffersize||o.buffersize,p.serial=p.serial||typeof chrome<"u"&&chrome.serial,!p.serial)throw new Error("No access to serial ports. Try loading as a Chrome Application.");this.options=u(p),this.options.serial.onReceiveError.addListener(function(L){switch(L.error){case"disconnected":case"device_lost":case"system_error":b=new Error("Disconnected"),m.options.disconnectedCallback?m.options.disconnectedCallback(b):m.emit("disconnect",b),m.connectionId>=0&&m.close();break}}),this.path=d,R&&ie.nextTick(function(){m.open(v)})}e.inherits(h,t),h.prototype.connectionId=-1,h.prototype.open=function(d){var p={bitrate:parseInt(this.options.baudRate,10),dataBits:this.options.dataBits,parityBit:this.options.parity,stopBits:this.options.stopBits,ctsFlowControl:this.options.rtscts};this.options.serial.connect(this.path,p,this.proxy("onOpen",d))},h.prototype.onOpen=function(d,p){if(chrome.runtime.lastError){typeof d=="function"?d(chrome.runtime.lastError):this.emit("error",chrome.runtime.lastError);return}if(this.connectionId=p.connectionId,this.connectionId===-1){this.emit("error",new Error("Could not open port."));return}this.emit("open",p),this._reader=this.proxy("onRead"),this.options.serial.onReceive.addListener(this._reader),typeof d=="function"&&d(chrome.runtime.lastError,p)},h.prototype.onRead=function(d){d&&this.connectionId===d.connectionId&&(this.options.dataCallback?this.options.dataCallback(a(d.data)):this.emit("data",a(d.data)))},h.prototype.write=function(d,p){if(this.connectionId<0){var R=new Error("Serialport not open.");typeof p=="function"?p(R):this.emit("error",R);return}typeof d=="string"&&(d=f(d)),d instanceof ArrayBuffer||(d=x(d)),this.options.serial.send(this.connectionId,d,function(v){typeof p=="function"&&p(chrome.runtime.lastError,v)})},h.prototype.close=function(d){if(this.connectionId<0){var p=new Error("Serialport not open.");typeof d=="function"?d(p):this.emit("error",p);return}this.options.serial.disconnect(this.connectionId,this.proxy("onClose",d))},h.prototype.onClose=function(d,p){this.connectionId=-1,this.emit("close"),this.removeAllListeners(),this._reader&&(this.options.serial.onReceive.removeListener(this._reader),this._reader=null),typeof d=="function"&&d(chrome.runtime.lastError,p)},h.prototype.flush=function(d){if(this.connectionId<0){var p=new Error("Serialport not open.");typeof d=="function"?d(p):this.emit("error",p);return}var R=this;this.options.serial.flush(this.connectionId,function(v){if(chrome.runtime.lastError){typeof d=="function"?d(chrome.runtime.lastError,v):R.emit("error",chrome.runtime.lastError);return}else d(null,v)})},h.prototype.drain=function(d){if(this.connectionId<0){var p=new Error("Serialport not open.");typeof d=="function"?d(p):this.emit("error",p);return}typeof d=="function"&&d()},h.prototype.proxy=function(){for(var d=this,p=[],R=0;R<arguments.length;R++)p[R]=arguments[R];var v=p.splice(0,1)[0],m=function(){for(var E=[],b=0;b<arguments.length;b++)E[b]=arguments[b];var C=p.concat(E);d[v].apply(d,C)};return m},h.prototype.set=function(d,p){this.options.serial.setControlSignals(this.connectionId,d,function(R){p(chrome.runtime.lastError,R)})},h.prototype.isOpen=function(){return this.connectionId>-1};function g(d){typeof chrome<"u"&&chrome.serial?chrome.serial.getDevices(function(p){for(var R=new Array(p.length),v=0;v<p.length;v++)R[v]={comName:p[v].path,manufacturer:p[v].displayName,serialNumber:"",pnpId:"",locationId:"",vendorId:"0x"+(p[v].vendorId||0).toString(16),productId:"0x"+(p[v].productId||0).toString(16)};d(chrome.runtime.lastError,R)}):d(new Error("No access to serial ports. Try loading as a Chrome Application."),null)}function f(d){for(var p=new ArrayBuffer(d.length),R=new Uint8Array(p),v=0;v<d.length;v++)R[v]=d.charCodeAt(v);return p}function x(d){for(var p=new ArrayBuffer(d.length),R=new Uint8Array(p),v=0;v<d.length;v++)R[v]=d[v];return p}function a(d){for(var p=new Ce(d.byteLength),R=new Uint8Array(d),v=0;v<p.length;++v)p[v]=R[v];return p}return Xn={SerialPort:h,list:g,buffer2ArrayBuffer:x,used:[]},Xn}var Qn,yl;function ku(){return yl||(yl=1,Qn=Et.EventEmitter),Qn}const Zr=cu(ap);var Zn,bl;function Cp(){if(bl)return Zn;bl=1;function t(p,R){var v=Object.keys(p);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(p);R&&(m=m.filter(function(E){return Object.getOwnPropertyDescriptor(p,E).enumerable})),v.push.apply(v,m)}return v}function e(p){for(var R=1;R<arguments.length;R++){var v=arguments[R]!=null?arguments[R]:{};R%2?t(Object(v),!0).forEach(function(m){i(p,m,v[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(v)):t(Object(v)).forEach(function(m){Object.defineProperty(p,m,Object.getOwnPropertyDescriptor(v,m))})}return p}function i(p,R,v){return R=o(R),R in p?Object.defineProperty(p,R,{value:v,enumerable:!0,configurable:!0,writable:!0}):p[R]=v,p}function r(p,R){if(!(p instanceof R))throw new TypeError("Cannot call a class as a function")}function n(p,R){for(var v=0;v<R.length;v++){var m=R[v];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(p,o(m.key),m)}}function s(p,R,v){return R&&n(p.prototype,R),Object.defineProperty(p,"prototype",{writable:!1}),p}function o(p){var R=u(p,"string");return typeof R=="symbol"?R:String(R)}function u(p,R){if(typeof p!="object"||p===null)return p;var v=p[Symbol.toPrimitive];if(v!==void 0){var m=v.call(p,R||"default");if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(R==="string"?String:Number)(p)}var h=Zr,g=h.Buffer,f=_t(),x=f.inspect,a=x&&x.custom||"inspect";function d(p,R,v){g.prototype.copy.call(p,R,v)}return Zn=function(){function p(){r(this,p),this.head=null,this.tail=null,this.length=0}return s(p,[{key:"push",value:function(v){var m={data:v,next:null};this.length>0?this.tail.next=m:this.head=m,this.tail=m,++this.length}},{key:"unshift",value:function(v){var m={data:v,next:this.head};this.length===0&&(this.tail=m),this.head=m,++this.length}},{key:"shift",value:function(){if(this.length!==0){var v=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,v}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(v){if(this.length===0)return"";for(var m=this.head,E=""+m.data;m=m.next;)E+=v+m.data;return E}},{key:"concat",value:function(v){if(this.length===0)return g.alloc(0);for(var m=g.allocUnsafe(v>>>0),E=this.head,b=0;E;)d(E.data,m,b),b+=E.data.length,E=E.next;return m}},{key:"consume",value:function(v,m){var E;return v<this.head.data.length?(E=this.head.data.slice(0,v),this.head.data=this.head.data.slice(v)):v===this.head.data.length?E=this.shift():E=m?this._getString(v):this._getBuffer(v),E}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(v){var m=this.head,E=1,b=m.data;for(v-=b.length;m=m.next;){var C=m.data,w=v>C.length?C.length:v;if(w===C.length?b+=C:b+=C.slice(0,v),v-=w,v===0){w===C.length?(++E,m.next?this.head=m.next:this.head=this.tail=null):(this.head=m,m.data=C.slice(w));break}++E}return this.length-=E,b}},{key:"_getBuffer",value:function(v){var m=g.allocUnsafe(v),E=this.head,b=1;for(E.data.copy(m),v-=E.data.length;E=E.next;){var C=E.data,w=v>C.length?C.length:v;if(C.copy(m,m.length-v,0,w),v-=w,v===0){w===C.length?(++b,E.next?this.head=E.next:this.head=this.tail=null):(this.head=E,E.data=C.slice(w));break}++b}return this.length-=b,m}},{key:a,value:function(v,m){return x(this,e(e({},m),{},{depth:0,customInspect:!1}))}}]),p}(),Zn}var Jn,Rl;function ju(){if(Rl)return Jn;Rl=1;function t(o,u){var h=this,g=this._readableState&&this._readableState.destroyed,f=this._writableState&&this._writableState.destroyed;return g||f?(u?u(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,ie.nextTick(n,this,o)):ie.nextTick(n,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(x){!u&&x?h._writableState?h._writableState.errorEmitted?ie.nextTick(i,h):(h._writableState.errorEmitted=!0,ie.nextTick(e,h,x)):ie.nextTick(e,h,x):u?(ie.nextTick(i,h),u(x)):ie.nextTick(i,h)}),this)}function e(o,u){n(o,u),i(o)}function i(o){o._writableState&&!o._writableState.emitClose||o._readableState&&!o._readableState.emitClose||o.emit("close")}function r(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function n(o,u){o.emit("error",u)}function s(o,u){var h=o._readableState,g=o._writableState;h&&h.autoDestroy||g&&g.autoDestroy?o.destroy(u):o.emit("error",u)}return Jn={destroy:t,undestroy:r,errorOrDestroy:s},Jn}var es={},Sl;function wi(){if(Sl)return es;Sl=1;function t(u,h){u.prototype=Object.create(h.prototype),u.prototype.constructor=u,u.__proto__=h}var e={};function i(u,h,g){g||(g=Error);function f(a,d,p){return typeof h=="string"?h:h(a,d,p)}var x=function(a){t(d,a);function d(p,R,v){return a.call(this,f(p,R,v))||this}return d}(g);x.prototype.name=g.name,x.prototype.code=u,e[u]=x}function r(u,h){if(Array.isArray(u)){var g=u.length;return u=u.map(function(f){return String(f)}),g>2?"one of ".concat(h," ").concat(u.slice(0,g-1).join(", "),", or ")+u[g-1]:g===2?"one of ".concat(h," ").concat(u[0]," or ").concat(u[1]):"of ".concat(h," ").concat(u[0])}else return"of ".concat(h," ").concat(String(u))}function n(u,h,g){return u.substr(0,h.length)===h}function s(u,h,g){return(g===void 0||g>u.length)&&(g=u.length),u.substring(g-h.length,g)===h}function o(u,h,g){return typeof g!="number"&&(g=0),g+h.length>u.length?!1:u.indexOf(h,g)!==-1}return i("ERR_INVALID_OPT_VALUE",function(u,h){return'The value "'+h+'" is invalid for option "'+u+'"'},TypeError),i("ERR_INVALID_ARG_TYPE",function(u,h,g){var f;typeof h=="string"&&n(h,"not ")?(f="must not be",h=h.replace(/^not /,"")):f="must be";var x;if(s(u," argument"))x="The ".concat(u," ").concat(f," ").concat(r(h,"type"));else{var a=o(u,".")?"property":"argument";x='The "'.concat(u,'" ').concat(a," ").concat(f," ").concat(r(h,"type"))}return x+=". Received type ".concat(typeof g),x},TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",function(u){return"The "+u+" method is not implemented"}),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",function(u){return"Cannot call "+u+" after a stream was destroyed"}),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",function(u){return"Unknown encoding: "+u},TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),es.codes=e,es}var ts,Al;function zu(){if(Al)return ts;Al=1;var t=wi().codes.ERR_INVALID_OPT_VALUE;function e(r,n,s){return r.highWaterMark!=null?r.highWaterMark:n?r[s]:null}function i(r,n,s,o){var u=e(n,o,s);if(u!=null){if(!(isFinite(u)&&Math.floor(u)===u)||u<0){var h=o?s:"highWaterMark";throw new t(h,u)}return Math.floor(u)}return r.objectMode?16:16*1024}return ts={getHighWaterMark:i},ts}var is,Tl;function Mp(){if(Tl)return is;Tl=1,is=t;function t(i,r){if(e("noDeprecation"))return i;var n=!1;function s(){if(!n){if(e("throwDeprecation"))throw new Error(r);e("traceDeprecation")?console.trace(r):console.warn(r),n=!0}return i.apply(this,arguments)}return s}function e(i){try{if(!Je.localStorage)return!1}catch{return!1}var r=Je.localStorage[i];return r==null?!1:String(r).toLowerCase()==="true"}return is}var rs,wl;function qu(){if(wl)return rs;wl=1,rs=_;function t(P){var B=this;this.next=null,this.entry=null,this.finish=function(){k(B,P)}}var e;_.WritableState=L;var i={deprecate:Mp()},r=ku(),n=Zr.Buffer,s=(typeof Je<"u"?Je:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(P){return n.from(P)}function u(P){return n.isBuffer(P)||P instanceof s}var h=ju(),g=zu(),f=g.getHighWaterMark,x=wi().codes,a=x.ERR_INVALID_ARG_TYPE,d=x.ERR_METHOD_NOT_IMPLEMENTED,p=x.ERR_MULTIPLE_CALLBACK,R=x.ERR_STREAM_CANNOT_PIPE,v=x.ERR_STREAM_DESTROYED,m=x.ERR_STREAM_NULL_VALUES,E=x.ERR_STREAM_WRITE_AFTER_END,b=x.ERR_UNKNOWN_ENCODING,C=h.errorOrDestroy;ri()(_,r);function w(){}function L(P,B,V){e=e||Ai(),P=P||{},typeof V!="boolean"&&(V=B instanceof e),this.objectMode=!!P.objectMode,V&&(this.objectMode=this.objectMode||!!P.writableObjectMode),this.highWaterMark=f(this,P,"writableHighWaterMark",V),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Q=P.decodeStrings===!1;this.decodeStrings=!Q,this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ne){ae(B,ne)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=P.emitClose!==!1,this.autoDestroy=!!P.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}L.prototype.getBuffer=function(){for(var B=this.bufferedRequest,V=[];B;)V.push(B),B=B.next;return V},function(){try{Object.defineProperty(L.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var $;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?($=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(B){return $.call(this,B)?!0:this!==_?!1:B&&B._writableState instanceof L}})):$=function(B){return B instanceof this};function _(P){e=e||Ai();var B=this instanceof e;if(!B&&!$.call(_,this))return new _(P);this._writableState=new L(P,this,B),this.writable=!0,P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final)),r.call(this)}_.prototype.pipe=function(){C(this,new R)};function D(P,B){var V=new E;C(P,V),ie.nextTick(B,V)}function N(P,B,V,Q){var ne;return V===null?ne=new m:typeof V!="string"&&!B.objectMode&&(ne=new a("chunk",["string","Buffer"],V)),ne?(C(P,ne),ie.nextTick(Q,ne),!1):!0}_.prototype.write=function(P,B,V){var Q=this._writableState,ne=!1,S=!Q.objectMode&&u(P);return S&&!n.isBuffer(P)&&(P=o(P)),typeof B=="function"&&(V=B,B=null),S?B="buffer":B||(B=Q.defaultEncoding),typeof V!="function"&&(V=w),Q.ending?D(this,V):(S||N(this,Q,P,V))&&(Q.pendingcb++,ne=H(this,Q,S,P,B,V)),ne},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,!P.writing&&!P.corked&&!P.bufferProcessing&&P.bufferedRequest&&oe(this,P))},_.prototype.setDefaultEncoding=function(B){if(typeof B=="string"&&(B=B.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((B+"").toLowerCase())>-1))throw new b(B);return this._writableState.defaultEncoding=B,this},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function G(P,B,V){return!P.objectMode&&P.decodeStrings!==!1&&typeof B=="string"&&(B=n.from(B,V)),B}Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function H(P,B,V,Q,ne,S){if(!V){var O=G(B,Q,ne);Q!==O&&(V=!0,ne="buffer",Q=O)}var Z=B.objectMode?1:Q.length;B.length+=Z;var le=B.length<B.highWaterMark;if(le||(B.needDrain=!0),B.writing||B.corked){var ye=B.lastBufferedRequest;B.lastBufferedRequest={chunk:Q,encoding:ne,isBuf:V,callback:S,next:null},ye?ye.next=B.lastBufferedRequest:B.bufferedRequest=B.lastBufferedRequest,B.bufferedRequestCount+=1}else Y(P,B,!1,Z,Q,ne,S);return le}function Y(P,B,V,Q,ne,S,O){B.writelen=Q,B.writecb=O,B.writing=!0,B.sync=!0,B.destroyed?B.onwrite(new v("write")):V?P._writev(ne,B.onwrite):P._write(ne,S,B.onwrite),B.sync=!1}function z(P,B,V,Q,ne){--B.pendingcb,V?(ie.nextTick(ne,Q),ie.nextTick(F,P,B),P._writableState.errorEmitted=!0,C(P,Q)):(ne(Q),P._writableState.errorEmitted=!0,C(P,Q),F(P,B))}function J(P){P.writing=!1,P.writecb=null,P.length-=P.writelen,P.writelen=0}function ae(P,B){var V=P._writableState,Q=V.sync,ne=V.writecb;if(typeof ne!="function")throw new p;if(J(V),B)z(P,V,Q,B,ne);else{var S=j(V)||P.destroyed;!S&&!V.corked&&!V.bufferProcessing&&V.bufferedRequest&&oe(P,V),Q?ie.nextTick(K,P,V,S,ne):K(P,V,S,ne)}}function K(P,B,V,Q){V||q(P,B),B.pendingcb--,Q(),F(P,B)}function q(P,B){B.length===0&&B.needDrain&&(B.needDrain=!1,P.emit("drain"))}function oe(P,B){B.bufferProcessing=!0;var V=B.bufferedRequest;if(P._writev&&V&&V.next){var Q=B.bufferedRequestCount,ne=new Array(Q),S=B.corkedRequestsFree;S.entry=V;for(var O=0,Z=!0;V;)ne[O]=V,V.isBuf||(Z=!1),V=V.next,O+=1;ne.allBuffers=Z,Y(P,B,!0,B.length,ne,"",S.finish),B.pendingcb++,B.lastBufferedRequest=null,S.next?(B.corkedRequestsFree=S.next,S.next=null):B.corkedRequestsFree=new t(B),B.bufferedRequestCount=0}else{for(;V;){var le=V.chunk,ye=V.encoding,de=V.callback,me=B.objectMode?1:le.length;if(Y(P,B,!1,me,le,ye,de),V=V.next,B.bufferedRequestCount--,B.writing)break}V===null&&(B.lastBufferedRequest=null)}B.bufferedRequest=V,B.bufferProcessing=!1}_.prototype._write=function(P,B,V){V(new d("_write()"))},_.prototype._writev=null,_.prototype.end=function(P,B,V){var Q=this._writableState;return typeof P=="function"?(V=P,P=null,B=null):typeof B=="function"&&(V=B,B=null),P!=null&&this.write(P,B),Q.corked&&(Q.corked=1,this.uncork()),Q.ending||U(this,Q,V),this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function j(P){return P.ending&&P.length===0&&P.bufferedRequest===null&&!P.finished&&!P.writing}function ue(P,B){P._final(function(V){B.pendingcb--,V&&C(P,V),B.prefinished=!0,P.emit("prefinish"),F(P,B)})}function ce(P,B){!B.prefinished&&!B.finalCalled&&(typeof P._final=="function"&&!B.destroyed?(B.pendingcb++,B.finalCalled=!0,ie.nextTick(ue,P,B)):(B.prefinished=!0,P.emit("prefinish")))}function F(P,B){var V=j(B);if(V&&(ce(P,B),B.pendingcb===0&&(B.finished=!0,P.emit("finish"),B.autoDestroy))){var Q=P._readableState;(!Q||Q.autoDestroy&&Q.endEmitted)&&P.destroy()}return V}function U(P,B,V){B.ending=!0,F(P,B),V&&(B.finished?ie.nextTick(V):P.once("finish",V)),B.ended=!0,P.writable=!1}function k(P,B,V){var Q=P.entry;for(P.entry=null;Q;){var ne=Q.callback;B.pendingcb--,ne(V),Q=Q.next}B.corkedRequestsFree.next=P}return Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(B){this._writableState&&(this._writableState.destroyed=B)}}),_.prototype.destroy=h.destroy,_.prototype._undestroy=h.undestroy,_.prototype._destroy=function(P,B){B(P)},rs}var ns,_l;function Ai(){if(_l)return ns;_l=1;var t=Object.keys||function(g){var f=[];for(var x in g)f.push(x);return f};ns=o;var e=Vu(),i=qu();ri()(o,e);for(var r=t(i.prototype),n=0;n<r.length;n++){var s=r[n];o.prototype[s]||(o.prototype[s]=i.prototype[s])}function o(g){if(!(this instanceof o))return new o(g);e.call(this,g),i.call(this,g),this.allowHalfOpen=!0,g&&(g.readable===!1&&(this.readable=!1),g.writable===!1&&(this.writable=!1),g.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",u)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function u(){this._writableState.ended||ie.nextTick(h,this)}function h(g){g.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(f){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=f,this._writableState.destroyed=f)}}),ns}var ss={},fr={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Ol;function Dp(){return Ol||(Ol=1,function(t,e){var i=Zr,r=i.Buffer;function n(o,u){for(var h in o)u[h]=o[h]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=i:(n(i,e),e.Buffer=s);function s(o,u,h){return r(o,u,h)}s.prototype=Object.create(r.prototype),n(r,s),s.from=function(o,u,h){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,u,h)},s.alloc=function(o,u,h){if(typeof o!="number")throw new TypeError("Argument must be a number");var g=r(o);return u!==void 0?typeof h=="string"?g.fill(u,h):g.fill(u):g.fill(0),g},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(o)}}(fr,fr.exports)),fr.exports}var Il;function Cl(){if(Il)return ss;Il=1;var t=Dp().Buffer,e=t.isEncoding||function(m){switch(m=""+m,m&&m.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(m){if(!m)return"utf8";for(var E;;)switch(m){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return m;default:if(E)return;m=(""+m).toLowerCase(),E=!0}}function r(m){var E=i(m);if(typeof E!="string"&&(t.isEncoding===e||!e(m)))throw new Error("Unknown encoding: "+m);return E||m}ss.StringDecoder=n;function n(m){this.encoding=r(m);var E;switch(this.encoding){case"utf16le":this.text=x,this.end=a,E=4;break;case"utf8":this.fillLast=h,E=4;break;case"base64":this.text=d,this.end=p,E=3;break;default:this.write=R,this.end=v;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(E)}n.prototype.write=function(m){if(m.length===0)return"";var E,b;if(this.lastNeed){if(E=this.fillLast(m),E===void 0)return"";b=this.lastNeed,this.lastNeed=0}else b=0;return b<m.length?E?E+this.text(m,b):this.text(m,b):E||""},n.prototype.end=f,n.prototype.text=g,n.prototype.fillLast=function(m){if(this.lastNeed<=m.length)return m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,m.length),this.lastNeed-=m.length};function s(m){return m<=127?0:m>>5===6?2:m>>4===14?3:m>>3===30?4:m>>6===2?-1:-2}function o(m,E,b){var C=E.length-1;if(C<b)return 0;var w=s(E[C]);return w>=0?(w>0&&(m.lastNeed=w-1),w):--C<b||w===-2?0:(w=s(E[C]),w>=0?(w>0&&(m.lastNeed=w-2),w):--C<b||w===-2?0:(w=s(E[C]),w>=0?(w>0&&(w===2?w=0:m.lastNeed=w-3),w):0))}function u(m,E,b){if((E[0]&192)!==128)return m.lastNeed=0,"�";if(m.lastNeed>1&&E.length>1){if((E[1]&192)!==128)return m.lastNeed=1,"�";if(m.lastNeed>2&&E.length>2&&(E[2]&192)!==128)return m.lastNeed=2,"�"}}function h(m){var E=this.lastTotal-this.lastNeed,b=u(this,m);if(b!==void 0)return b;if(this.lastNeed<=m.length)return m.copy(this.lastChar,E,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,E,0,m.length),this.lastNeed-=m.length}function g(m,E){var b=o(this,m,E);if(!this.lastNeed)return m.toString("utf8",E);this.lastTotal=b;var C=m.length-(b-this.lastNeed);return m.copy(this.lastChar,0,C),m.toString("utf8",E,C)}function f(m){var E=m&&m.length?this.write(m):"";return this.lastNeed?E+"�":E}function x(m,E){if((m.length-E)%2===0){var b=m.toString("utf16le",E);if(b){var C=b.charCodeAt(b.length-1);if(C>=55296&&C<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1],b.slice(0,-1)}return b}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=m[m.length-1],m.toString("utf16le",E,m.length-1)}function a(m){var E=m&&m.length?this.write(m):"";if(this.lastNeed){var b=this.lastTotal-this.lastNeed;return E+this.lastChar.toString("utf16le",0,b)}return E}function d(m,E){var b=(m.length-E)%3;return b===0?m.toString("base64",E):(this.lastNeed=3-b,this.lastTotal=3,b===1?this.lastChar[0]=m[m.length-1]:(this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1]),m.toString("base64",E,m.length-b))}function p(m){var E=m&&m.length?this.write(m):"";return this.lastNeed?E+this.lastChar.toString("base64",0,3-this.lastNeed):E}function R(m){return m.toString(this.encoding)}function v(m){return m&&m.length?this.write(m):""}return ss}var os,Ml;function ea(){if(Ml)return os;Ml=1;var t=wi().codes.ERR_STREAM_PREMATURE_CLOSE;function e(s){var o=!1;return function(){if(!o){o=!0;for(var u=arguments.length,h=new Array(u),g=0;g<u;g++)h[g]=arguments[g];s.apply(this,h)}}}function i(){}function r(s){return s.setHeader&&typeof s.abort=="function"}function n(s,o,u){if(typeof o=="function")return n(s,null,o);o||(o={}),u=e(u||i);var h=o.readable||o.readable!==!1&&s.readable,g=o.writable||o.writable!==!1&&s.writable,f=function(){s.writable||a()},x=s._writableState&&s._writableState.finished,a=function(){g=!1,x=!0,h||u.call(s)},d=s._readableState&&s._readableState.endEmitted,p=function(){h=!1,d=!0,g||u.call(s)},R=function(b){u.call(s,b)},v=function(){var b;if(h&&!d)return(!s._readableState||!s._readableState.ended)&&(b=new t),u.call(s,b);if(g&&!x)return(!s._writableState||!s._writableState.ended)&&(b=new t),u.call(s,b)},m=function(){s.req.on("finish",a)};return r(s)?(s.on("complete",a),s.on("abort",v),s.req?m():s.on("request",m)):g&&!s._writableState&&(s.on("end",f),s.on("close",f)),s.on("end",p),s.on("finish",a),o.error!==!1&&s.on("error",R),s.on("close",v),function(){s.removeListener("complete",a),s.removeListener("abort",v),s.removeListener("request",m),s.req&&s.req.removeListener("finish",a),s.removeListener("end",f),s.removeListener("close",f),s.removeListener("finish",a),s.removeListener("end",p),s.removeListener("error",R),s.removeListener("close",v)}}return os=n,os}var as,Dl;function Pp(){if(Dl)return as;Dl=1;var t;function e(b,C,w){return C=i(C),C in b?Object.defineProperty(b,C,{value:w,enumerable:!0,configurable:!0,writable:!0}):b[C]=w,b}function i(b){var C=r(b,"string");return typeof C=="symbol"?C:String(C)}function r(b,C){if(typeof b!="object"||b===null)return b;var w=b[Symbol.toPrimitive];if(w!==void 0){var L=w.call(b,C||"default");if(typeof L!="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(b)}var n=ea(),s=Symbol("lastResolve"),o=Symbol("lastReject"),u=Symbol("error"),h=Symbol("ended"),g=Symbol("lastPromise"),f=Symbol("handlePromise"),x=Symbol("stream");function a(b,C){return{value:b,done:C}}function d(b){var C=b[s];if(C!==null){var w=b[x].read();w!==null&&(b[g]=null,b[s]=null,b[o]=null,C(a(w,!1)))}}function p(b){ie.nextTick(d,b)}function R(b,C){return function(w,L){b.then(function(){if(C[h]){w(a(void 0,!0));return}C[f](w,L)},L)}}var v=Object.getPrototypeOf(function(){}),m=Object.setPrototypeOf((t={get stream(){return this[x]},next:function(){var C=this,w=this[u];if(w!==null)return Promise.reject(w);if(this[h])return Promise.resolve(a(void 0,!0));if(this[x].destroyed)return new Promise(function(D,N){ie.nextTick(function(){C[u]?N(C[u]):D(a(void 0,!0))})});var L=this[g],$;if(L)$=new Promise(R(L,this));else{var _=this[x].read();if(_!==null)return Promise.resolve(a(_,!1));$=new Promise(this[f])}return this[g]=$,$}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var C=this;return new Promise(function(w,L){C[x].destroy(null,function($){if($){L($);return}w(a(void 0,!0))})})}),t),v),E=function(C){var w,L=Object.create(m,(w={},e(w,x,{value:C,writable:!0}),e(w,s,{value:null,writable:!0}),e(w,o,{value:null,writable:!0}),e(w,u,{value:null,writable:!0}),e(w,h,{value:C._readableState.endEmitted,writable:!0}),e(w,f,{value:function(_,D){var N=L[x].read();N?(L[g]=null,L[s]=null,L[o]=null,_(a(N,!1))):(L[s]=_,L[o]=D)},writable:!0}),w));return L[g]=null,n(C,function($){if($&&$.code!=="ERR_STREAM_PREMATURE_CLOSE"){var _=L[o];_!==null&&(L[g]=null,L[s]=null,L[o]=null,_($)),L[u]=$;return}var D=L[s];D!==null&&(L[g]=null,L[s]=null,L[o]=null,D(a(void 0,!0))),L[h]=!0}),C.on("readable",p.bind(null,L)),L};return as=E,as}var ls,Pl;function Lp(){return Pl||(Pl=1,ls=function(){throw new Error("Readable.from is not available in the browser")}),ls}var us,Ll;function Vu(){if(Ll)return us;Ll=1,us=D;var t;D.ReadableState=_,Et.EventEmitter;var e=function(O,Z){return O.listeners(Z).length},i=ku(),r=Zr.Buffer,n=(typeof Je<"u"?Je:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function s(S){return r.from(S)}function o(S){return r.isBuffer(S)||S instanceof n}var u=_t(),h;u&&u.debuglog?h=u.debuglog("stream"):h=function(){};var g=Cp(),f=ju(),x=zu(),a=x.getHighWaterMark,d=wi().codes,p=d.ERR_INVALID_ARG_TYPE,R=d.ERR_STREAM_PUSH_AFTER_EOF,v=d.ERR_METHOD_NOT_IMPLEMENTED,m=d.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,E,b,C;ri()(D,i);var w=f.errorOrDestroy,L=["error","close","destroy","pause","resume"];function $(S,O,Z){if(typeof S.prependListener=="function")return S.prependListener(O,Z);!S._events||!S._events[O]?S.on(O,Z):Array.isArray(S._events[O])?S._events[O].unshift(Z):S._events[O]=[Z,S._events[O]]}function _(S,O,Z){t=t||Ai(),S=S||{},typeof Z!="boolean"&&(Z=O instanceof t),this.objectMode=!!S.objectMode,Z&&(this.objectMode=this.objectMode||!!S.readableObjectMode),this.highWaterMark=a(this,S,"readableHighWaterMark",Z),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=S.emitClose!==!1,this.autoDestroy=!!S.autoDestroy,this.destroyed=!1,this.defaultEncoding=S.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,S.encoding&&(E||(E=Cl().StringDecoder),this.decoder=new E(S.encoding),this.encoding=S.encoding)}function D(S){if(t=t||Ai(),!(this instanceof D))return new D(S);var O=this instanceof t;this._readableState=new _(S,this,O),this.readable=!0,S&&(typeof S.read=="function"&&(this._read=S.read),typeof S.destroy=="function"&&(this._destroy=S.destroy)),i.call(this)}Object.defineProperty(D.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(O){this._readableState&&(this._readableState.destroyed=O)}}),D.prototype.destroy=f.destroy,D.prototype._undestroy=f.undestroy,D.prototype._destroy=function(S,O){O(S)},D.prototype.push=function(S,O){var Z=this._readableState,le;return Z.objectMode?le=!0:typeof S=="string"&&(O=O||Z.defaultEncoding,O!==Z.encoding&&(S=r.from(S,O),O=""),le=!0),N(this,S,O,!1,le)},D.prototype.unshift=function(S){return N(this,S,null,!0,!1)};function N(S,O,Z,le,ye){h("readableAddChunk",O);var de=S._readableState;if(O===null)de.reading=!1,ae(S,de);else{var me;if(ye||(me=H(de,O)),me)w(S,me);else if(de.objectMode||O&&O.length>0)if(typeof O!="string"&&!de.objectMode&&Object.getPrototypeOf(O)!==r.prototype&&(O=s(O)),le)de.endEmitted?w(S,new m):G(S,de,O,!0);else if(de.ended)w(S,new R);else{if(de.destroyed)return!1;de.reading=!1,de.decoder&&!Z?(O=de.decoder.write(O),de.objectMode||O.length!==0?G(S,de,O,!1):oe(S,de)):G(S,de,O,!1)}else le||(de.reading=!1,oe(S,de))}return!de.ended&&(de.length<de.highWaterMark||de.length===0)}function G(S,O,Z,le){O.flowing&&O.length===0&&!O.sync?(O.awaitDrain=0,S.emit("data",Z)):(O.length+=O.objectMode?1:Z.length,le?O.buffer.unshift(Z):O.buffer.push(Z),O.needReadable&&K(S)),oe(S,O)}function H(S,O){var Z;return!o(O)&&typeof O!="string"&&O!==void 0&&!S.objectMode&&(Z=new p("chunk",["string","Buffer","Uint8Array"],O)),Z}D.prototype.isPaused=function(){return this._readableState.flowing===!1},D.prototype.setEncoding=function(S){E||(E=Cl().StringDecoder);var O=new E(S);this._readableState.decoder=O,this._readableState.encoding=this._readableState.decoder.encoding;for(var Z=this._readableState.buffer.head,le="";Z!==null;)le+=O.write(Z.data),Z=Z.next;return this._readableState.buffer.clear(),le!==""&&this._readableState.buffer.push(le),this._readableState.length=le.length,this};var Y=1073741824;function z(S){return S>=Y?S=Y:(S--,S|=S>>>1,S|=S>>>2,S|=S>>>4,S|=S>>>8,S|=S>>>16,S++),S}function J(S,O){return S<=0||O.length===0&&O.ended?0:O.objectMode?1:S!==S?O.flowing&&O.length?O.buffer.head.data.length:O.length:(S>O.highWaterMark&&(O.highWaterMark=z(S)),S<=O.length?S:O.ended?O.length:(O.needReadable=!0,0))}D.prototype.read=function(S){h("read",S),S=parseInt(S,10);var O=this._readableState,Z=S;if(S!==0&&(O.emittedReadable=!1),S===0&&O.needReadable&&((O.highWaterMark!==0?O.length>=O.highWaterMark:O.length>0)||O.ended))return h("read: emitReadable",O.length,O.ended),O.length===0&&O.ended?V(this):K(this),null;if(S=J(S,O),S===0&&O.ended)return O.length===0&&V(this),null;var le=O.needReadable;h("need readable",le),(O.length===0||O.length-S<O.highWaterMark)&&(le=!0,h("length less than watermark",le)),O.ended||O.reading?(le=!1,h("reading or ended",le)):le&&(h("do read"),O.reading=!0,O.sync=!0,O.length===0&&(O.needReadable=!0),this._read(O.highWaterMark),O.sync=!1,O.reading||(S=J(Z,O)));var ye;return S>0?ye=B(S,O):ye=null,ye===null?(O.needReadable=O.length<=O.highWaterMark,S=0):(O.length-=S,O.awaitDrain=0),O.length===0&&(O.ended||(O.needReadable=!0),Z!==S&&O.ended&&V(this)),ye!==null&&this.emit("data",ye),ye};function ae(S,O){if(h("onEofChunk"),!O.ended){if(O.decoder){var Z=O.decoder.end();Z&&Z.length&&(O.buffer.push(Z),O.length+=O.objectMode?1:Z.length)}O.ended=!0,O.sync?K(S):(O.needReadable=!1,O.emittedReadable||(O.emittedReadable=!0,q(S)))}}function K(S){var O=S._readableState;h("emitReadable",O.needReadable,O.emittedReadable),O.needReadable=!1,O.emittedReadable||(h("emitReadable",O.flowing),O.emittedReadable=!0,ie.nextTick(q,S))}function q(S){var O=S._readableState;h("emitReadable_",O.destroyed,O.length,O.ended),!O.destroyed&&(O.length||O.ended)&&(S.emit("readable"),O.emittedReadable=!1),O.needReadable=!O.flowing&&!O.ended&&O.length<=O.highWaterMark,P(S)}function oe(S,O){O.readingMore||(O.readingMore=!0,ie.nextTick(j,S,O))}function j(S,O){for(;!O.reading&&!O.ended&&(O.length<O.highWaterMark||O.flowing&&O.length===0);){var Z=O.length;if(h("maybeReadMore read 0"),S.read(0),Z===O.length)break}O.readingMore=!1}D.prototype._read=function(S){w(this,new v("_read()"))},D.prototype.pipe=function(S,O){var Z=this,le=this._readableState;switch(le.pipesCount){case 0:le.pipes=S;break;case 1:le.pipes=[le.pipes,S];break;default:le.pipes.push(S);break}le.pipesCount+=1,h("pipe count=%d opts=%j",le.pipesCount,O);var ye=(!O||O.end!==!1)&&S!==ie.stdout&&S!==ie.stderr,de=ye?Ue:st;le.endEmitted?ie.nextTick(de):Z.once("end",de),S.on("unpipe",me);function me(ot,We){h("onunpipe"),ot===Z&&We&&We.hasUnpiped===!1&&(We.hasUnpiped=!0,Ve())}function Ue(){h("onend"),S.end()}var te=ue(Z);S.on("drain",te);var Qe=!1;function Ve(){h("cleanup"),S.removeListener("close",Le),S.removeListener("finish",Ne),S.removeListener("drain",te),S.removeListener("error",Ee),S.removeListener("unpipe",me),Z.removeListener("end",Ue),Z.removeListener("end",st),Z.removeListener("data",Pe),Qe=!0,le.awaitDrain&&(!S._writableState||S._writableState.needDrain)&&te()}Z.on("data",Pe);function Pe(ot){h("ondata");var We=S.write(ot);h("dest.write",We),We===!1&&((le.pipesCount===1&&le.pipes===S||le.pipesCount>1&&ne(le.pipes,S)!==-1)&&!Qe&&(h("false write response, pause",le.awaitDrain),le.awaitDrain++),Z.pause())}function Ee(ot){h("onerror",ot),st(),S.removeListener("error",Ee),e(S,"error")===0&&w(S,ot)}$(S,"error",Ee);function Le(){S.removeListener("finish",Ne),st()}S.once("close",Le);function Ne(){h("onfinish"),S.removeListener("close",Le),st()}S.once("finish",Ne);function st(){h("unpipe"),Z.unpipe(S)}return S.emit("pipe",Z),le.flowing||(h("pipe resume"),Z.resume()),S};function ue(S){return function(){var Z=S._readableState;h("pipeOnDrain",Z.awaitDrain),Z.awaitDrain&&Z.awaitDrain--,Z.awaitDrain===0&&e(S,"data")&&(Z.flowing=!0,P(S))}}D.prototype.unpipe=function(S){var O=this._readableState,Z={hasUnpiped:!1};if(O.pipesCount===0)return this;if(O.pipesCount===1)return S&&S!==O.pipes?this:(S||(S=O.pipes),O.pipes=null,O.pipesCount=0,O.flowing=!1,S&&S.emit("unpipe",this,Z),this);if(!S){var le=O.pipes,ye=O.pipesCount;O.pipes=null,O.pipesCount=0,O.flowing=!1;for(var de=0;de<ye;de++)le[de].emit("unpipe",this,{hasUnpiped:!1});return this}var me=ne(O.pipes,S);return me===-1?this:(O.pipes.splice(me,1),O.pipesCount-=1,O.pipesCount===1&&(O.pipes=O.pipes[0]),S.emit("unpipe",this,Z),this)},D.prototype.on=function(S,O){var Z=i.prototype.on.call(this,S,O),le=this._readableState;return S==="data"?(le.readableListening=this.listenerCount("readable")>0,le.flowing!==!1&&this.resume()):S==="readable"&&!le.endEmitted&&!le.readableListening&&(le.readableListening=le.needReadable=!0,le.flowing=!1,le.emittedReadable=!1,h("on readable",le.length,le.reading),le.length?K(this):le.reading||ie.nextTick(F,this)),Z},D.prototype.addListener=D.prototype.on,D.prototype.removeListener=function(S,O){var Z=i.prototype.removeListener.call(this,S,O);return S==="readable"&&ie.nextTick(ce,this),Z},D.prototype.removeAllListeners=function(S){var O=i.prototype.removeAllListeners.apply(this,arguments);return(S==="readable"||S===void 0)&&ie.nextTick(ce,this),O};function ce(S){var O=S._readableState;O.readableListening=S.listenerCount("readable")>0,O.resumeScheduled&&!O.paused?O.flowing=!0:S.listenerCount("data")>0&&S.resume()}function F(S){h("readable nexttick read 0"),S.read(0)}D.prototype.resume=function(){var S=this._readableState;return S.flowing||(h("resume"),S.flowing=!S.readableListening,U(this,S)),S.paused=!1,this};function U(S,O){O.resumeScheduled||(O.resumeScheduled=!0,ie.nextTick(k,S,O))}function k(S,O){h("resume",O.reading),O.reading||S.read(0),O.resumeScheduled=!1,S.emit("resume"),P(S),O.flowing&&!O.reading&&S.read(0)}D.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function P(S){var O=S._readableState;for(h("flow",O.flowing);O.flowing&&S.read()!==null;);}D.prototype.wrap=function(S){var O=this,Z=this._readableState,le=!1;S.on("end",function(){if(h("wrapped end"),Z.decoder&&!Z.ended){var me=Z.decoder.end();me&&me.length&&O.push(me)}O.push(null)}),S.on("data",function(me){if(h("wrapped data"),Z.decoder&&(me=Z.decoder.write(me)),!(Z.objectMode&&me==null)&&!(!Z.objectMode&&(!me||!me.length))){var Ue=O.push(me);Ue||(le=!0,S.pause())}});for(var ye in S)this[ye]===void 0&&typeof S[ye]=="function"&&(this[ye]=function(Ue){return function(){return S[Ue].apply(S,arguments)}}(ye));for(var de=0;de<L.length;de++)S.on(L[de],this.emit.bind(this,L[de]));return this._read=function(me){h("wrapped _read",me),le&&(le=!1,S.resume())},this},typeof Symbol=="function"&&(D.prototype[Symbol.asyncIterator]=function(){return b===void 0&&(b=Pp()),b(this)}),Object.defineProperty(D.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(D.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(D.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(O){this._readableState&&(this._readableState.flowing=O)}}),D._fromList=B,Object.defineProperty(D.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function B(S,O){if(O.length===0)return null;var Z;return O.objectMode?Z=O.buffer.shift():!S||S>=O.length?(O.decoder?Z=O.buffer.join(""):O.buffer.length===1?Z=O.buffer.first():Z=O.buffer.concat(O.length),O.buffer.clear()):Z=O.buffer.consume(S,O.decoder),Z}function V(S){var O=S._readableState;h("endReadable",O.endEmitted),O.endEmitted||(O.ended=!0,ie.nextTick(Q,O,S))}function Q(S,O){if(h("endReadableNT",S.endEmitted,S.length),!S.endEmitted&&S.length===0&&(S.endEmitted=!0,O.readable=!1,O.emit("end"),S.autoDestroy)){var Z=O._writableState;(!Z||Z.autoDestroy&&Z.finished)&&O.destroy()}}typeof Symbol=="function"&&(D.from=function(S,O){return C===void 0&&(C=Lp()),C(D,S,O)});function ne(S,O){for(var Z=0,le=S.length;Z<le;Z++)if(S[Z]===O)return Z;return-1}return us}var cs,Nl;function Ku(){if(Nl)return cs;Nl=1,cs=u;var t=wi().codes,e=t.ERR_METHOD_NOT_IMPLEMENTED,i=t.ERR_MULTIPLE_CALLBACK,r=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,n=t.ERR_TRANSFORM_WITH_LENGTH_0,s=Ai();ri()(u,s);function o(f,x){var a=this._transformState;a.transforming=!1;var d=a.writecb;if(d===null)return this.emit("error",new i);a.writechunk=null,a.writecb=null,x!=null&&this.push(x),d(f);var p=this._readableState;p.reading=!1,(p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}function u(f){if(!(this instanceof u))return new u(f);s.call(this,f),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",h)}function h(){var f=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(x,a){g(f,x,a)}):g(this,null,null)}u.prototype.push=function(f,x){return this._transformState.needTransform=!1,s.prototype.push.call(this,f,x)},u.prototype._transform=function(f,x,a){a(new e("_transform()"))},u.prototype._write=function(f,x,a){var d=this._transformState;if(d.writecb=a,d.writechunk=f,d.writeencoding=x,!d.transforming){var p=this._readableState;(d.needTransform||p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}},u.prototype._read=function(f){var x=this._transformState;x.writechunk!==null&&!x.transforming?(x.transforming=!0,this._transform(x.writechunk,x.writeencoding,x.afterTransform)):x.needTransform=!0},u.prototype._destroy=function(f,x){s.prototype._destroy.call(this,f,function(a){x(a)})};function g(f,x,a){if(x)return f.emit("error",x);if(a!=null&&f.push(a),f._writableState.length)throw new n;if(f._transformState.transforming)throw new r;return f.push(null)}return cs}var hs,Bl;function Np(){if(Bl)return hs;Bl=1,hs=e;var t=Ku();ri()(e,t);function e(i){if(!(this instanceof e))return new e(i);t.call(this,i)}return e.prototype._transform=function(i,r,n){n(null,i)},hs}var fs,Fl;function Bp(){if(Fl)return fs;Fl=1;var t;function e(a){var d=!1;return function(){d||(d=!0,a.apply(void 0,arguments))}}var i=wi().codes,r=i.ERR_MISSING_ARGS,n=i.ERR_STREAM_DESTROYED;function s(a){if(a)throw a}function o(a){return a.setHeader&&typeof a.abort=="function"}function u(a,d,p,R){R=e(R);var v=!1;a.on("close",function(){v=!0}),t===void 0&&(t=ea()),t(a,{readable:d,writable:p},function(E){if(E)return R(E);v=!0,R()});var m=!1;return function(E){if(!v&&!m){if(m=!0,o(a))return a.abort();if(typeof a.destroy=="function")return a.destroy();R(E||new n("pipe"))}}}function h(a){a()}function g(a,d){return a.pipe(d)}function f(a){return!a.length||typeof a[a.length-1]!="function"?s:a.pop()}function x(){for(var a=arguments.length,d=new Array(a),p=0;p<a;p++)d[p]=arguments[p];var R=f(d);if(Array.isArray(d[0])&&(d=d[0]),d.length<2)throw new r("streams");var v,m=d.map(function(E,b){var C=b<d.length-1,w=b>0;return u(E,C,w,function(L){v||(v=L),L&&m.forEach(h),!C&&(m.forEach(h),R(v))})});return d.reduce(g)}return fs=x,fs}var ds,Gl;function _i(){if(Gl)return ds;Gl=1,ds=i;var t=Et.EventEmitter,e=ri();e(i,t),i.Readable=Vu(),i.Writable=qu(),i.Duplex=Ai(),i.Transform=Ku(),i.PassThrough=Np(),i.finished=ea(),i.pipeline=Bp(),i.Stream=i;function i(){t.call(this)}return i.prototype.pipe=function(r,n){var s=this;function o(d){r.writable&&r.write(d)===!1&&s.pause&&s.pause()}s.on("data",o);function u(){s.readable&&s.resume&&s.resume()}r.on("drain",u),!r._isStdio&&(!n||n.end!==!1)&&(s.on("end",g),s.on("close",f));var h=!1;function g(){h||(h=!0,r.end())}function f(){h||(h=!0,typeof r.destroy=="function"&&r.destroy())}function x(d){if(a(),t.listenerCount(this,"error")===0)throw d}s.on("error",x),r.on("error",x);function a(){s.removeListener("data",o),r.removeListener("drain",u),s.removeListener("end",g),s.removeListener("close",f),s.removeListener("error",x),r.removeListener("error",x),s.removeListener("end",a),s.removeListener("close",a),r.removeListener("close",a)}return s.on("end",a),s.on("close",a),r.on("close",a),r.emit("pipe",s),r},ds}var dr={exports:{}},ps,Ul;function Fp(){if(Ul)return ps;Ul=1;var t=1e3,e=t*60,i=e*60,r=i*24,n=r*7,s=r*365.25;ps=function(f,x){x=x||{};var a=typeof f;if(a==="string"&&f.length>0)return o(f);if(a==="number"&&isFinite(f))return x.long?h(f):u(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function o(f){if(f=String(f),!(f.length>100)){var x=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(x){var a=parseFloat(x[1]),d=(x[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return a*s;case"weeks":case"week":case"w":return a*n;case"days":case"day":case"d":return a*r;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*e;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}function u(f){var x=Math.abs(f);return x>=r?Math.round(f/r)+"d":x>=i?Math.round(f/i)+"h":x>=e?Math.round(f/e)+"m":x>=t?Math.round(f/t)+"s":f+"ms"}function h(f){var x=Math.abs(f);return x>=r?g(f,x,r,"day"):x>=i?g(f,x,i,"hour"):x>=e?g(f,x,e,"minute"):x>=t?g(f,x,t,"second"):f+" ms"}function g(f,x,a,d){var p=x>=a*1.5;return Math.round(f/a)+" "+d+(p?"s":"")}return ps}var xs,Wl;function Gp(){if(Wl)return xs;Wl=1;function t(e){r.debug=r,r.default=r,r.coerce=g,r.disable=o,r.enable=s,r.enabled=u,r.humanize=Fp(),r.destroy=f,Object.keys(e).forEach(x=>{r[x]=e[x]}),r.names=[],r.skips=[],r.formatters={};function i(x){let a=0;for(let d=0;d<x.length;d++)a=(a<<5)-a+x.charCodeAt(d),a|=0;return r.colors[Math.abs(a)%r.colors.length]}r.selectColor=i;function r(x){let a,d=null,p,R;function v(...m){if(!v.enabled)return;const E=v,b=Number(new Date),C=b-(a||b);E.diff=C,E.prev=a,E.curr=b,a=b,m[0]=r.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let w=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,($,_)=>{if($==="%%")return"%";w++;const D=r.formatters[_];if(typeof D=="function"){const N=m[w];$=D.call(E,N),m.splice(w,1),w--}return $}),r.formatArgs.call(E,m),(E.log||r.log).apply(E,m)}return v.namespace=x,v.useColors=r.useColors(),v.color=r.selectColor(x),v.extend=n,v.destroy=r.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(p!==r.namespaces&&(p=r.namespaces,R=r.enabled(x)),R),set:m=>{d=m}}),typeof r.init=="function"&&r.init(v),v}function n(x,a){const d=r(this.namespace+(typeof a>"u"?":":a)+x);return d.log=this.log,d}function s(x){r.save(x),r.namespaces=x,r.names=[],r.skips=[];let a;const d=(typeof x=="string"?x:"").split(/[\s,]+/),p=d.length;for(a=0;a<p;a++)d[a]&&(x=d[a].replace(/\*/g,".*?"),x[0]==="-"?r.skips.push(new RegExp("^"+x.slice(1)+"$")):r.names.push(new RegExp("^"+x+"$")))}function o(){const x=[...r.names.map(h),...r.skips.map(h).map(a=>"-"+a)].join(",");return r.enable(""),x}function u(x){if(x[x.length-1]==="*")return!0;let a,d;for(a=0,d=r.skips.length;a<d;a++)if(r.skips[a].test(x))return!1;for(a=0,d=r.names.length;a<d;a++)if(r.names[a].test(x))return!0;return!1}function h(x){return x.toString().substring(2,x.toString().length-2).replace(/\.\*\?$/,"*")}function g(x){return x instanceof Error?x.stack||x.message:x}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return xs=t,xs}var $l;function Oi(){return $l||($l=1,function(t,e){var i={};e.formatArgs=n,e.save=s,e.load=o,e.useColors=r,e.storage=u(),e.destroy=(()=>{let g=!1;return()=>{g||(g=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let g;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(g=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(g[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(g){if(g[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+g[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const f="color: "+this.color;g.splice(1,0,f,"color: inherit");let x=0,a=0;g[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(x++,d==="%c"&&(a=x))}),g.splice(a,0,f)}e.log=console.debug||console.log||(()=>{});function s(g){try{g?e.storage.setItem("debug",g):e.storage.removeItem("debug")}catch{}}function o(){let g;try{g=e.storage.getItem("debug")}catch{}return!g&&typeof ie<"u"&&"env"in ie&&(g=i.DEBUG),g}function u(){try{return localStorage}catch{}}t.exports=Gp()(e);const{formatters:h}=t.exports;h.j=function(g){try{return JSON.stringify(g)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}}(dr,dr.exports)),dr.exports}var gs,Hl;function Up(){if(Hl)return gs;Hl=1;const t=_i(),e=_t(),i=Oi()("serialport/stream"),r=Object.freeze([5,6,7,8]),n=Object.freeze([1,1.5,2]),s=Object.freeze(["none","even","mark","odd","space"]),o=Object.freeze(["xon","xoff","xany","rtscts"]),u=Object.freeze({autoOpen:!0,endOnClose:!1,baudRate:9600,dataBits:8,hupcl:!0,lock:!0,parity:"none",rtscts:!1,stopBits:1,xany:!1,xoff:!1,xon:!1,highWaterMark:64*1024}),h=Object.freeze({brk:!1,cts:!1,dtr:!0,dts:!1,rts:!0});function g(a){const d=Ce.allocUnsafe(a);return d.used=0,d}function f(a,d,p){if(!(this instanceof f))return new f(a,d,p);d instanceof Function&&(p=d,d={});const R={...u,...d};t.Duplex.call(this,{highWaterMark:R.highWaterMark});const v=R.binding||f.Binding;if(!v)throw new TypeError('"Bindings" is invalid pass it as `options.binding` or set it on `SerialPort.Binding`');if(!a)throw new TypeError(`"path" is not defined: ${a}`);if(R.baudrate)throw new TypeError('"baudrate" is an unknown option, did you mean "baudRate"?');if(typeof R.baudRate!="number")throw new TypeError(`"baudRate" must be a number: ${R.baudRate}`);if(r.indexOf(R.dataBits)===-1)throw new TypeError(`"databits" is invalid: ${R.dataBits}`);if(n.indexOf(R.stopBits)===-1)throw new TypeError(`"stopbits" is invalid: ${R.stopbits}`);if(s.indexOf(R.parity)===-1)throw new TypeError(`"parity" is invalid: ${R.parity}`);o.forEach(E=>{if(typeof R[E]!="boolean")throw new TypeError(`"${E}" is not boolean: ${R[E]}`)});const m=new v({bindingOptions:R.bindingOptions});Object.defineProperties(this,{binding:{enumerable:!0,value:m},path:{enumerable:!0,value:a},settings:{enumerable:!0,value:R}}),this.opening=!1,this.closing=!1,this._pool=g(this.settings.highWaterMark),this._kMinPoolSpace=128,this.settings.autoOpen&&this.open(p)}e.inherits(f,t.Duplex),Object.defineProperties(f.prototype,{isOpen:{enumerable:!0,get(){return this.binding.isOpen&&!this.closing}},baudRate:{enumerable:!0,get(){return this.settings.baudRate}}}),f.prototype._error=function(a,d){d?d.call(this,a):this.emit("error",a)},f.prototype._asyncError=function(a,d){ie.nextTick(()=>this._error(a,d))},f.prototype.open=function(a){if(this.isOpen)return this._asyncError(new Error("Port is already open"),a);if(this.opening)return this._asyncError(new Error("Port is opening"),a);this.opening=!0,i("opening",`path: ${this.path}`),this.binding.open(this.path,this.settings).then(()=>{i("opened",`path: ${this.path}`),this.opening=!1,this.emit("open"),a&&a.call(this,null)},d=>{this.opening=!1,i("Binding #open had an error",d),this._error(d,a)})},f.prototype.update=function(a,d){if(typeof a!="object")throw TypeError('"options" is not an object');if(!this.isOpen)return i("update attempted, but port is not open"),this._asyncError(new Error("Port is not open"),d);const p={...u,...a};this.settings.baudRate=p.baudRate,i("update",`baudRate: ${p.baudRate}`),this.binding.update(this.settings).then(()=>{i("binding.update","finished"),d&&d.call(this,null)},R=>(i("binding.update","error",R),this._error(R,d)))};const x=f.prototype.write;return f.prototype.write=function(a,d,p){return Array.isArray(a)&&(a=Ce.from(a)),x.call(this,a,d,p)},f.prototype._write=function(a,d,p){if(!this.isOpen)return this.once("open",function(){this._write(a,d,p)});i("_write",`${a.length} bytes of data`),this.binding.write(a).then(()=>{i("binding.write","write finished"),p(null)},R=>{i("binding.write","error",R),R.canceled||this._disconnected(R),p(R)})},f.prototype._writev=function(a,d){i("_writev",`${a.length} chunks of data`);const p=a.map(R=>R.chunk);this._write(Ce.concat(p),null,d)},f.prototype._read=function(a){if(!this.isOpen){i("_read","queueing _read for after open"),this.once("open",()=>{this._read(a)});return}(!this._pool||this._pool.length-this._pool.used<this._kMinPoolSpace)&&(i("_read","discarding the read buffer pool because it is below kMinPoolSpace"),this._pool=g(this.settings.highWaterMark));const d=this._pool,p=Math.min(d.length-d.used,a),R=d.used;i("_read","reading",{start:R,toRead:p}),this.binding.read(d,R,p).then(({bytesRead:v})=>{if(i("binding.read","finished",{bytesRead:v}),v===0){i("binding.read","Zero bytes read closing readable stream"),this.push(null);return}d.used+=v,this.push(d.slice(R,R+v))},v=>{i("binding.read","error",v),v.canceled||this._disconnected(v),this._read(a)})},f.prototype._disconnected=function(a){if(!this.isOpen){i("disconnected aborted because already closed",a);return}i("disconnected",a),a.disconnected=!0,this.close(null,a)},f.prototype.close=function(a,d){if(d=d||null,!this.isOpen)return i("close attempted, but port is not open"),this._asyncError(new Error("Port is not open"),a);this.closing=!0,i("#close"),this.binding.close().then(()=>{this.closing=!1,i("binding.close","finished"),this.emit("close",d),this.settings.endOnClose&&this.emit("end"),a&&a.call(this,d)},p=>(this.closing=!1,i("binding.close","had an error",p),this._error(p,a)))},f.prototype.set=function(a,d){if(typeof a!="object")throw TypeError('"options" is not an object');if(!this.isOpen)return i("set attempted, but port is not open"),this._asyncError(new Error("Port is not open"),d);const p={...h,...a};i("#set",p),this.binding.set(p).then(()=>{i("binding.set","finished"),d&&d.call(this,null)},R=>(i("binding.set","had an error",R),this._error(R,d)))},f.prototype.get=function(a){if(!this.isOpen)return i("get attempted, but port is not open"),this._asyncError(new Error("Port is not open"),a);i("#get"),this.binding.get().then(d=>{i("binding.get","finished"),a&&a.call(this,null,d)},d=>(i("binding.get","had an error",d),this._error(d,a)))},f.prototype.flush=function(a){if(!this.isOpen)return i("flush attempted, but port is not open"),this._asyncError(new Error("Port is not open"),a);i("#flush"),this.binding.flush().then(()=>{i("binding.flush","finished"),a&&a.call(this,null)},d=>(i("binding.flush","had an error",d),this._error(d,a)))},f.prototype.drain=function(a){if(i("drain"),!this.isOpen)return i("drain queuing on port open"),this.once("open",()=>{this.drain(a)});this.binding.drain().then(()=>{i("binding.drain","finished"),a&&a.call(this,null)},d=>(i("binding.drain","had an error",d),this._error(d,a)))},f.list=async function(a){if(i(".list"),!f.Binding)throw new TypeError("No Binding set on `SerialPort.Binding`");if(a)throw new TypeError("SerialPort.list no longer takes a callback and only returns a promise");return f.Binding.list()},gs=f,gs}var Li={exports:{}};function Wp(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pr={exports:{}},Es,kl;function Yu(){if(kl)return Es;kl=1;function t(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}function e(n,s){for(var o="",u=0,h=-1,g=0,f,x=0;x<=n.length;++x){if(x<n.length)f=n.charCodeAt(x);else{if(f===47)break;f=47}if(f===47){if(!(h===x-1||g===1))if(h!==x-1&&g===2){if(o.length<2||u!==2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){var a=o.lastIndexOf("/");if(a!==o.length-1){a===-1?(o="",u=0):(o=o.slice(0,a),u=o.length-1-o.lastIndexOf("/")),h=x,g=0;continue}}else if(o.length===2||o.length===1){o="",u=0,h=x,g=0;continue}}s&&(o.length>0?o+="/..":o="..",u=2)}else o.length>0?o+="/"+n.slice(h+1,x):o=n.slice(h+1,x),u=x-h-1;h=x,g=0}else f===46&&g!==-1?++g:g=-1}return o}function i(n,s){var o=s.dir||s.root,u=s.base||(s.name||"")+(s.ext||"");return o?o===s.root?o+u:o+n+u:u}var r={resolve:function(){for(var s="",o=!1,u,h=arguments.length-1;h>=-1&&!o;h--){var g;h>=0?g=arguments[h]:(u===void 0&&(u=ie.cwd()),g=u),t(g),g.length!==0&&(s=g+"/"+s,o=g.charCodeAt(0)===47)}return s=e(s,!o),o?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(t(s),s.length===0)return".";var o=s.charCodeAt(0)===47,u=s.charCodeAt(s.length-1)===47;return s=e(s,!o),s.length===0&&!o&&(s="."),s.length>0&&u&&(s+="/"),o?"/"+s:s},isAbsolute:function(s){return t(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,o=0;o<arguments.length;++o){var u=arguments[o];t(u),u.length>0&&(s===void 0?s=u:s+="/"+u)}return s===void 0?".":r.normalize(s)},relative:function(s,o){if(t(s),t(o),s===o||(s=r.resolve(s),o=r.resolve(o),s===o))return"";for(var u=1;u<s.length&&s.charCodeAt(u)===47;++u);for(var h=s.length,g=h-u,f=1;f<o.length&&o.charCodeAt(f)===47;++f);for(var x=o.length,a=x-f,d=g<a?g:a,p=-1,R=0;R<=d;++R){if(R===d){if(a>d){if(o.charCodeAt(f+R)===47)return o.slice(f+R+1);if(R===0)return o.slice(f+R)}else g>d&&(s.charCodeAt(u+R)===47?p=R:R===0&&(p=0));break}var v=s.charCodeAt(u+R),m=o.charCodeAt(f+R);if(v!==m)break;v===47&&(p=R)}var E="";for(R=u+p+1;R<=h;++R)(R===h||s.charCodeAt(R)===47)&&(E.length===0?E+="..":E+="/..");return E.length>0?E+o.slice(f+p):(f+=p,o.charCodeAt(f)===47&&++f,o.slice(f))},_makeLong:function(s){return s},dirname:function(s){if(t(s),s.length===0)return".";for(var o=s.charCodeAt(0),u=o===47,h=-1,g=!0,f=s.length-1;f>=1;--f)if(o=s.charCodeAt(f),o===47){if(!g){h=f;break}}else g=!1;return h===-1?u?"/":".":u&&h===1?"//":s.slice(0,h)},basename:function(s,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');t(s);var u=0,h=-1,g=!0,f;if(o!==void 0&&o.length>0&&o.length<=s.length){if(o.length===s.length&&o===s)return"";var x=o.length-1,a=-1;for(f=s.length-1;f>=0;--f){var d=s.charCodeAt(f);if(d===47){if(!g){u=f+1;break}}else a===-1&&(g=!1,a=f+1),x>=0&&(d===o.charCodeAt(x)?--x===-1&&(h=f):(x=-1,h=a))}return u===h?h=a:h===-1&&(h=s.length),s.slice(u,h)}else{for(f=s.length-1;f>=0;--f)if(s.charCodeAt(f)===47){if(!g){u=f+1;break}}else h===-1&&(g=!1,h=f+1);return h===-1?"":s.slice(u,h)}},extname:function(s){t(s);for(var o=-1,u=0,h=-1,g=!0,f=0,x=s.length-1;x>=0;--x){var a=s.charCodeAt(x);if(a===47){if(!g){u=x+1;break}continue}h===-1&&(g=!1,h=x+1),a===46?o===-1?o=x:f!==1&&(f=1):o!==-1&&(f=-1)}return o===-1||h===-1||f===0||f===1&&o===h-1&&o===u+1?"":s.slice(o,h)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return i("/",s)},parse:function(s){t(s);var o={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return o;var u=s.charCodeAt(0),h=u===47,g;h?(o.root="/",g=1):g=0;for(var f=-1,x=0,a=-1,d=!0,p=s.length-1,R=0;p>=g;--p){if(u=s.charCodeAt(p),u===47){if(!d){x=p+1;break}continue}a===-1&&(d=!1,a=p+1),u===46?f===-1?f=p:R!==1&&(R=1):f!==-1&&(R=-1)}return f===-1||a===-1||R===0||R===1&&f===a-1&&f===x+1?a!==-1&&(x===0&&h?o.base=o.name=s.slice(1,a):o.base=o.name=s.slice(x,a)):(x===0&&h?(o.name=s.slice(1,f),o.base=s.slice(1,a)):(o.name=s.slice(x,f),o.base=s.slice(x,a)),o.ext=s.slice(f,a)),x>0?o.dir=s.slice(0,x-1):h&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,Es=r,Es}var vs,jl;function $p(){if(jl)return vs;jl=1;var t=Yu().sep||"/";vs=e;function e(i){if(typeof i!="string"||i.length<=7||i.substring(0,7)!="file://")throw new TypeError("must pass in a file:// URI to convert to a file path");var r=decodeURI(i.substring(7)),n=r.indexOf("/"),s=r.substring(0,n),o=r.substring(n+1);return s=="localhost"&&(s=""),s&&(s=t+t+s),o=o.replace(/^(.+)\|/,"$1:"),t=="\\"&&(o=o.replace(/\//g,"\\")),/^.+\:/.test(o)||(o=t+o),s+o}return vs}var zl;function Jr(){return zl||(zl=1,function(t,e){var i={},r=tr,n=Yu(),s=$p(),o=n.join,u=n.dirname,h=r.accessSync&&function(x){try{r.accessSync(x)}catch{return!1}return!0}||r.existsSync||n.existsSync,g={arrow:i.NODE_BINDINGS_ARROW||" → ",compiled:i.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:ie.platform,arch:ie.arch,nodePreGyp:"node-v"+ie.versions.modules+"-"+ie.platform+"-"+ie.arch,version:ie.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","addon-build","release","install-root","bindings"],["module_root","addon-build","debug","install-root","bindings"],["module_root","addon-build","default","install-root","bindings"],["module_root","lib","binding","nodePreGyp","bindings"]]};function f(x){typeof x=="string"?x={bindings:x}:x||(x={}),Object.keys(g).map(function(b){b in x||(x[b]=g[b])}),x.module_root||(x.module_root=e.getRoot(e.getFileName())),n.extname(x.bindings)!=".node"&&(x.bindings+=".node");for(var a=typeof __webpack_require__=="function"?__non_webpack_require__:Wp,d=[],p=0,R=x.try.length,v,m,E;p<R;p++){v=o.apply(null,x.try[p].map(function(b){return x[b]||b})),d.push(v);try{return m=x.path?a.resolve(v):a(v),x.path||(m.path=v),m}catch(b){if(b.code!=="MODULE_NOT_FOUND"&&b.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(b.message))throw b}}throw E=new Error(`Could not locate the bindings file. Tried:
`+d.map(function(b){return x.arrow+b}).join(`
`)),E.tries=d,E}t.exports=e=f,e.getFileName=function(a){var d=Error.prepareStackTrace,p=Error.stackTraceLimit,R={},v;Error.stackTraceLimit=10,Error.prepareStackTrace=function(E,b){for(var C=0,w=b.length;C<w;C++)if(v=b[C].getFileName(),v!==__filename)if(a){if(v!==a)return}else return},Error.captureStackTrace(R),R.stack,Error.prepareStackTrace=d,Error.stackTraceLimit=p;var m="file://";return v.indexOf(m)===0&&(v=s(v)),v},e.getRoot=function(a){for(var d=u(a),p;;){if(d==="."&&(d=ie.cwd()),h(o(d,"package.json"))||h(o(d,"node_modules")))return d;if(p===d)throw new Error('Could not find module root given file: "'+a+'". Do you have a `package.json` file? ');p=d,d=o(d,"..")}}}(pr,pr.exports)),pr.exports}var ms,ql;function ta(){if(ql)return ms;ql=1;const t=Oi()("serialport/binding-abstract");class e{static async list(){t("list")}constructor(r={}){if(typeof r!="object")throw new TypeError('"options" is not an object')}async open(r,n){if(!r)throw new TypeError('"path" is not a valid port');if(typeof n!="object")throw new TypeError('"options" is not an object');if(t("open"),this.isOpen)throw new Error("Already open")}async close(){if(t("close"),!this.isOpen)throw new Error("Port is not open")}async read(r,n,s){if(!Ce.isBuffer(r))throw new TypeError('"buffer" is not a Buffer');if(typeof n!="number"||isNaN(s))throw new TypeError(`"offset" is not an integer got "${isNaN(s)?"NaN":typeof n}"`);if(typeof s!="number"||isNaN(s))throw new TypeError(`"length" is not an integer got "${isNaN(s)?"NaN":typeof s}"`);if(t("read"),r.length<n+s)throw new Error("buffer is too small");if(!this.isOpen)throw new Error("Port is not open")}async write(r){if(!Ce.isBuffer(r))throw new TypeError('"buffer" is not a Buffer');if(t("write",r.length,"bytes"),!this.isOpen)throw t("write","error port is not open"),new Error("Port is not open")}async update(r){if(typeof r!="object")throw TypeError('"options" is not an object');if(typeof r.baudRate!="number")throw new TypeError('"options.baudRate" is not a number');if(t("update"),!this.isOpen)throw new Error("Port is not open")}async set(r){if(typeof r!="object")throw new TypeError('"options" is not an object');if(t("set"),!this.isOpen)throw new Error("Port is not open")}async get(){if(t("get"),!this.isOpen)throw new Error("Port is not open")}async getBaudRate(){if(t("getbaudRate"),!this.isOpen)throw new Error("Port is not open")}async flush(){if(t("flush"),!this.isOpen)throw new Error("Port is not open")}async drain(){if(t("drain"),!this.isOpen)throw new Error("Port is not open")}}return ms=e,ms}var ys,Vl;function Hp(){if(Vl)return ys;Vl=1;const t=[/USB\\(?:.+)\\(.+)/,/FTDIBUS\\(?:.+)\+(.+?)A?\\.+/];return ys=function(e){if(!e)return null;for(const i of t){const r=e.match(i);if(r)return r[1]}return null},ys}var bs,Kl;function ia(){if(Kl)return bs;Kl=1;let t=!1;return bs={wrapWithHiddenComName:async i=>(await i).map(n=>{const s={...n};return Object.defineProperties(s,{comName:{get(){return t||(t=!0,console.warn('"PortInfo.comName" has been deprecated. You should now use "PortInfo.path". The property will be removed in the next major release.')),s.path},enumerable:!1}})})},bs}var Rs,Yl;function kp(){if(Yl)return Rs;Yl=1;const t=Jr()("bindings.node"),e=ta(),{promisify:i}=_t(),r=Hp(),n=i(t.list),s=i(t.open),o=i(t.close),u=i(t.read),h=i(t.write),g=i(t.update),f=i(t.set),x=i(t.get),a=i(t.getBaudRate),d=i(t.drain),p=i(t.flush),{wrapWithHiddenComName:R}=ia();class v extends e{static async list(){const E=await n();return R(E.map(b=>{if(b.pnpId&&!b.serialNumber){const C=r(b.pnpId);if(C)return{...b,serialNumber:C}}return b}))}constructor(E={}){super(E),this.bindingOptions={...E.bindingOptions},this.fd=null,this.writeOperation=null}get isOpen(){return this.fd!==null}async open(E,b){await super.open(E,b),this.openOptions={...this.bindingOptions,...b};const C=await s(E,this.openOptions);this.fd=C}async close(){await super.close();const E=this.fd;return this.fd=null,o(E)}async read(E,b,C){await super.read(E,b,C);try{return{bytesRead:await u(this.fd,E,b,C),buffer:E}}catch(w){throw this.isOpen||(w.canceled=!0),w}}async write(E){return this.writeOperation=super.write(E).then(async()=>{E.length!==0&&(await h(this.fd,E),this.writeOperation=null)}),this.writeOperation}async update(E){return await super.update(E),g(this.fd,E)}async set(E){return await super.set(E),f(this.fd,E)}async get(){return await super.get(),x(this.fd)}async getBaudRate(){return await super.get(),a(this.fd)}async drain(){return await super.drain(),await this.writeOperation,d(this.fd)}async flush(){return await super.flush(),p(this.fd)}}return Rs=v,Rs}var Ss,Xl;function Xu(){if(Xl)return Ss;Xl=1;const e=Oi()("serialport/bindings/poller"),i=Et,r=Jr()("bindings.node").Poller,n={UV_READABLE:1,UV_WRITABLE:2,UV_DISCONNECT:4};function s(u,h){if(u){e("error",u),this.emit("readable",u),this.emit("writable",u),this.emit("disconnect",u);return}h&n.UV_READABLE&&(e('received "readable"'),this.emit("readable",null)),h&n.UV_WRITABLE&&(e('received "writable"'),this.emit("writable",null)),h&n.UV_DISCONNECT&&(e('received "disconnect"'),this.emit("disconnect",null))}class o extends i{constructor(h,g=r){e("Creating poller"),super(),this.poller=new g(h,s.bind(this))}once(h,g){switch(h){case"readable":this.poll(n.UV_READABLE);break;case"writable":this.poll(n.UV_WRITABLE);break;case"disconnect":this.poll(n.UV_DISCONNECT);break}return super.once(h,g)}poll(h){h=h||0,h&n.UV_READABLE&&e('Polling for "readable"'),h&n.UV_WRITABLE&&e('Polling for "writable"'),h&n.UV_DISCONNECT&&e('Polling for "disconnect"'),this.poller.poll(h)}stop(){e("Stopping poller"),this.poller.stop(),this.emitCanceled()}destroy(){e("Destroying poller"),this.poller.destroy(),this.emitCanceled()}emitCanceled(){const h=new Error("Canceled");h.canceled=!0,this.emit("readable",h),this.emit("writable",h),this.emit("disconnect",h)}}return o.EVENTS=n,Ss=o,Ss}var As,Ql;function Qu(){if(Ql)return As;Ql=1;const t=tr,i=Oi()("serialport/bindings/unixRead"),{promisify:r}=_t(),n=r(t.read),s=u=>new Promise((h,g)=>{u.poller.once("readable",f=>f?g(f):h())}),o=async({binding:u,buffer:h,offset:g,length:f,fsReadAsync:x=n})=>{if(i("Starting read"),!u.isOpen){const a=new Error("Port is not open");throw a.canceled=!0,a}try{const{bytesRead:a}=await x(u.fd,h,g,f,null);return a===0?o({binding:u,buffer:h,offset:g,length:f,fsReadAsync:x}):(i("Finished read",a,"bytes"),{bytesRead:a,buffer:h})}catch(a){if(i("read error",a),a.code==="EAGAIN"||a.code==="EWOULDBLOCK"||a.code==="EINTR"){if(!u.isOpen){const p=new Error("Port is not open");throw p.canceled=!0,p}return i("waiting for readable because of code:",a.code),await s(u),o({binding:u,buffer:h,offset:g,length:f,fsReadAsync:x})}throw(a.code==="EBADF"||a.code==="ENXIO"||a.code==="UNKNOWN"||a.errno===-1)&&(a.canceled=!0,i("disconnecting",a)),a}};return As=o,As}var Ts,Zl;function Zu(){if(Zl)return Ts;Zl=1;const t=tr,i=Oi()("serialport/bindings/unixWrite"),{promisify:r}=_t(),n=r(t.write),s=u=>new Promise((h,g)=>{u.poller.once("writable",f=>f?g(f):h())}),o=async({binding:u,buffer:h,offset:g=0,fsWriteAsync:f=n})=>{const x=h.length-g;if(i("Starting write",h.length,"bytes offset",g,"bytesToWrite",x),!u.isOpen)throw new Error("Port is not open");try{const{bytesWritten:a}=await f(u.fd,h,g,x);if(i("write returned: wrote",a,"bytes"),a+g<h.length){if(!u.isOpen)throw new Error("Port is not open");return o({binding:u,buffer:h,offset:a+g,fsWriteAsync:f})}i("Finished writing",a+g,"bytes")}catch(a){if(i("write errored",a),a.code==="EAGAIN"||a.code==="EWOULDBLOCK"||a.code==="EINTR"){if(!u.isOpen)throw new Error("Port is not open");return i("waiting for writable because of code:",a.code),await s(u),o({binding:u,buffer:h,offset:g,fsWriteAsync:f})}throw(a.code==="EBADF"||a.code==="ENXIO"||a.code==="UNKNOWN"||a.errno===-1)&&(a.disconnect=!0,i("disconnecting",a)),i("error",a),a}};return Ts=o,Ts}var ws,Jl;function jp(){if(Jl)return ws;Jl=1;const{promisify:t}=_t(),e=Jr()("bindings.node"),i=ta(),r=Xu(),n=Qu(),s=Zu(),{wrapWithHiddenComName:o}=ia(),u=Object.freeze({vmin:1,vtime:0}),h=t(e.list),g=t(e.open),f=t(e.close),x=t(e.update),a=t(e.set),d=t(e.get),p=t(e.getBaudRate),R=t(e.drain),v=t(e.flush);class m extends i{static list(){return o(h())}constructor(b={}){super(b),this.bindingOptions={...u,...b.bindingOptions},this.fd=null,this.writeOperation=null}get isOpen(){return this.fd!==null}async open(b,C){await super.open(b,C),this.openOptions={...this.bindingOptions,...C};const w=await g(b,this.openOptions);this.fd=w,this.poller=new r(w)}async close(){await super.close();const b=this.fd;return this.poller.stop(),this.poller.destroy(),this.poller=null,this.openOptions=null,this.fd=null,f(b)}async read(b,C,w){return await super.read(b,C,w),n({binding:this,buffer:b,offset:C,length:w})}async write(b){return this.writeOperation=super.write(b).then(async()=>{b.length!==0&&(await s({binding:this,buffer:b}),this.writeOperation=null)}),this.writeOperation}async update(b){return await super.update(b),x(this.fd,b)}async set(b){return await super.set(b),a(this.fd,b)}async get(){return await super.get(),d(this.fd)}async getBaudRate(){return await super.get(),p(this.fd)}async drain(){return await super.drain(),await this.writeOperation,R(this.fd)}async flush(){return await super.flush(),v(this.fd)}}return ws=m,ws}var _s,e0;function Ju(){if(e0)return _s;e0=1;const{Transform:t}=_i();class e extends t{constructor(r={}){if(super(r),r.delimiter===void 0)throw new TypeError('"delimiter" is not a bufferable object');if(r.delimiter.length===0)throw new TypeError('"delimiter" has a 0 or undefined length');this.includeDelimiter=r.includeDelimiter!==void 0?r.includeDelimiter:!1,this.delimiter=Ce.from(r.delimiter),this.buffer=Ce.alloc(0)}_transform(r,n,s){let o=Ce.concat([this.buffer,r]),u;for(;(u=o.indexOf(this.delimiter))!==-1;)this.push(o.slice(0,u+(this.includeDelimiter?this.delimiter.length:0))),o=o.slice(u+this.delimiter.length);this.buffer=o,s()}_flush(r){this.push(this.buffer),this.buffer=Ce.alloc(0),r()}}return _s=e,_s}var Os,t0;function ec(){if(t0)return Os;t0=1;const t=Ju();class e extends t{constructor(r){const n={delimiter:Ce.from(`
`,"utf8"),encoding:"utf8",...r};typeof n.delimiter=="string"&&(n.delimiter=Ce.from(n.delimiter,n.encoding)),super(n)}}return Os=e,Os}var Is,i0;function zp(){if(i0)return Is;i0=1;const t=tr,e=ec();function i(u){return/(tty(S|WCH|ACM|USB|AMA|MFD|O|XRUSB)|rfcomm)/.test(u)&&u}function r(u){return{DEVNAME:"path",ID_VENDOR_ENC:"manufacturer",ID_SERIAL_SHORT:"serialNumber",ID_VENDOR_ID:"vendorId",ID_MODEL_ID:"productId",DEVLINKS:"pnpId"}[u.toUpperCase()]}function n(u){return u.replace(/\\x([a-fA-F0-9]{2})/g,(h,g)=>String.fromCharCode(parseInt(g,16)))}function s(u,h){if(u==="pnpId"){const g=h.match(/\/by-id\/([^\s]+)/);return g&&g[1]||void 0}return u==="manufacturer"?n(h):/^0x/.test(h)?h.substr(2):h}function o(){return new Promise((u,h)=>{const g=[],f=t.spawn("udevadm",["info","-e"]),x=f.stdout.pipe(new e);f.on("close",p=>p&&h(new Error(`Error listing ports udevadm exited with error code: ${p}`))),f.on("error",h),x.on("error",h);let a={},d=!1;x.on("data",p=>{const R=p.slice(0,1),v=p.slice(3);if(R==="P"){a={manufacturer:void 0,serialNumber:void 0,pnpId:void 0,locationId:void 0,vendorId:void 0,productId:void 0},d=!1;return}if(!d){if(R==="N"){i(v)?g.push(a):d=!0;return}if(R==="E"){const m=v.match(/^(.+)=(.*)/);if(!m)return;const E=r(m[1]);if(!E)return;a[E]=s(E,m[2])}}}),x.on("finish",()=>u(g))})}return Is=o,Is}var Cs,r0;function qp(){if(r0)return Cs;r0=1;const{promisify:t}=_t(),e=Jr()("bindings.node"),i=ta(),r=zp(),n=Xu(),s=Qu(),o=Zu(),{wrapWithHiddenComName:u}=ia(),h=Object.freeze({vmin:1,vtime:0}),g=t(e.open),f=t(e.close),x=t(e.update),a=t(e.set),d=t(e.get),p=t(e.getBaudRate),R=t(e.drain),v=t(e.flush);class m extends i{static list(){return u(r())}constructor(b={}){super(b),this.bindingOptions={...h,...b.bindingOptions},this.fd=null,this.writeOperation=null}get isOpen(){return this.fd!==null}async open(b,C){await super.open(b,C),this.openOptions={...this.bindingOptions,...C};const w=await g(b,this.openOptions);this.fd=w,this.poller=new n(w)}async close(){await super.close();const b=this.fd;return this.poller.stop(),this.poller.destroy(),this.poller=null,this.openOptions=null,this.fd=null,f(b)}async read(b,C,w){return await super.read(b,C,w),s({binding:this,buffer:b,offset:C,length:w})}async write(b){return this.writeOperation=super.write(b).then(async()=>{b.length!==0&&(await o({binding:this,buffer:b}),this.writeOperation=null)}),this.writeOperation}async update(b){return await super.update(b),x(this.fd,b)}async set(b){return await super.set(b),a(this.fd,b)}async get(){return await super.get(),d(this.fd)}async getBaudRate(){return await super.get(),p(this.fd)}async drain(){return await super.drain(),await this.writeOperation,R(this.fd)}async flush(){return await super.flush(),v(this.fd)}}return Cs=m,Cs}var n0;function Vp(){if(n0)return Li.exports;n0=1;const t=Oi()("serialport/bindings");switch(ie.platform){case"win32":t("loading WindowsBinding"),Li.exports=kp();break;case"darwin":t("loading DarwinBinding"),Li.exports=jp();break;default:t("loading LinuxBinding"),Li.exports=qp()}return Li.exports}var Ms,s0;function Kp(){if(s0)return Ms;s0=1;const{Transform:t}=_i();class e extends t{constructor(r={}){if(super(r),typeof r.length!="number")throw new TypeError('"length" is not a number');if(r.length<1)throw new TypeError('"length" is not greater than 0');this.length=r.length,this.position=0,this.buffer=Ce.alloc(this.length)}_transform(r,n,s){let o=0;for(;o<r.length;)this.buffer[this.position]=r[o],o++,this.position++,this.position===this.length&&(this.push(this.buffer),this.buffer=Ce.alloc(this.length),this.position=0);s()}_flush(r){this.push(this.buffer.slice(0,this.position)),this.buffer=Ce.alloc(this.length),r()}}return Ms=e,Ms}var Ds,o0;function Yp(){if(o0)return Ds;o0=1;const{Transform:t}=_i();class e extends t{constructor(r=50){super(),this.array=[],this.cursor=0,this.lastByteFetchTime=0,this.maxDelayBetweenBytesMs=r}_transform(r,n,s){if(this.maxDelayBetweenBytesMs>0){const o=Date.now();o-this.lastByteFetchTime>this.maxDelayBetweenBytesMs&&(this.array=[],this.cursor=0),this.lastByteFetchTime=o}for(this.cursor+=r.length,Array.from(r).map(o=>this.array.push(o));this.cursor>1&&this.cursor>=this.array[1]+5;){const o=this.array[1]+5,u=Ce.from(this.array.slice(0,o));this.array=this.array.slice(u.length,this.array.length),this.cursor-=o,this.push(u)}s()}}return Ds=e,Ds}var Ps,a0;function Xp(){if(a0)return Ps;a0=1;const{Transform:t}=_i();class e extends t{constructor(r={}){if(r.delimiter===void 0)throw new TypeError('"delimiter" is not a bufferable object');if(r.delimiter.length===0)throw new TypeError('"delimiter" has a 0 or undefined length');super(r),this.delimiter=Ce.from(r.delimiter),this.readOffset=0,this.ready=!1}_transform(r,n,s){if(this.ready)return this.push(r),s();const o=this.delimiter;let u=0;for(;this.readOffset<o.length&&u<r.length;)o[this.readOffset]===r[u]?this.readOffset++:this.readOffset=0,u++;if(this.readOffset===o.length){this.ready=!0,this.emit("ready");const h=r.slice(u);h.length>0&&this.push(h)}s()}}return Ps=e,Ps}var Ls,l0;function Qp(){if(l0)return Ls;l0=1;const{Transform:t}=_i();class e extends t{constructor(r){const n={encoding:"utf8",...r};if(n.regex===void 0)throw new TypeError('"options.regex" must be a regular expression pattern or object');n.regex instanceof RegExp||(n.regex=new RegExp(n.regex)),super(n),this.regex=n.regex,this.data=""}_transform(r,n,s){const u=(this.data+r).split(this.regex);this.data=u.pop(),u.forEach(h=>{this.push(h)}),s()}_flush(r){this.push(this.data),this.data="",r()}}return Ls=e,Ls}var Ns,u0;function Zp(){return u0||(u0=1,Ns={ByteLength:Kp(),CCTalk:Yp(),Delimiter:Ju(),Readline:ec(),Ready:Xp(),Regex:Qp()}),Ns}var Bs,c0;function tc(){if(c0)return Bs;c0=1;const t=Up(),e=Vp(),i=Zp();return t.Binding=e,t.parsers=i,Bs=t,Bs}var Fs,h0;function ic(){return h0||(h0=1,Fs={to7BitArray(t){let e=0,i=0;const r=[];for(let n of t)e===0?(r.push(n&127),e++,i=n>>7):(r.push(n<<e&127|i),e===6?(r.push(n>>1),e=0):(e++,i=n>>8-e));return e>0&&r.push(i),r},from7BitArray(t){const e=t.length*7>>3,i=[];for(let r=0;r<e;r++){const n=r<<3,s=n/7>>>0,o=n%7;i[r]=t[s]>>o|t[s+1]<<7-o&255}return i}}),Fs}var Gs,f0;function Jp(){if(f0)return Gs;f0=1;const t=ic(),e={crc8(i){let r=0;for(let n of i)for(let s=8;s;s--){const o=(r^n)&1;r>>=1,o&&(r^=140),n>>=1}return r},readDevices(i){const r=t.from7BitArray(i),n=[];for(let s=0;s<r.length;s+=8){const o=r.slice(s,s+8);if(o.length!==8)continue;e.crc8(o.slice(0,7))!==o[7]&&console.error("ROM invalid!"),n.push(o)}return n}};return Gs=e,Gs}var Us,d0;function rc(){if(d0)return Us;d0=1;var t={};const e=Et,i=ic(),r=Jp(),n=new Map,s=105,o=106,u=224,h=107,g=108,f=144,x=247,a=111,d=120,p=119,R=118,v=24,m=65,E=115,b=16,C=67,w=8,L=1,$=69,_=68,D=66,N=64,G=60,H=32,Y=244,z=109,J=110,ae=117,K=121,q=192,oe=208,j=249,ue=122,ce=112,F=96,U=16,k=32,P=48,B=64,V=80,Q=96,ne=112,S=240,O=114,Z=98,le=113,ye=255,de=128,me=Symbol("sendOneWireSearch"),Ue=Symbol("sendOneWireRequest"),te={[j](c){c.version.major=c.buffer[1],c.version.minor=c.buffer[2],c.emit("reportversion")},[u](c){const l=c.buffer[0]&15,y=c.buffer[1]|c.buffer[2]<<7;c.pins[c.analogPins[l]]&&(c.pins[c.analogPins[l]].value=y),c.emit(`analog-read-${l}`,y),c.emit("analog-read",{pin:l,value:y})},[f](c){const l=c.buffer[0]&15,y=c.buffer[1]|c.buffer[2]<<7;for(let A=0;A<8;A++){const M=8*l+A,W=c.pins[M],se=1<<A;if(W&&(W.mode===c.MODES.INPUT||W.mode===c.MODES.PULLUP)){W.value=y>>(A&7)&1,W.value?c.ports[l]|=se:c.ports[l]&=~se;let{value:pe}=W;c.emit(`digital-read-${M}`,pe),c.emit("digital-read",{pin:M,value:pe})}}}},Qe={[K](c){const l=c.buffer.length-2,y=Ce.alloc(Math.round((l-4)/2));let A=0,M=0;for(let W=4;W<l;W+=2)A=(c.buffer[W]&127|(c.buffer[W+1]&127)<<7)&255,y.writeUInt8(A,M++);c.firmware={name:y.toString(),version:{major:c.buffer[2],minor:c.buffer[3]}},c.emit("queryfirmware")},[g](c){const l=Object.keys(c.MODES).map(se=>c.MODES[se]);let y,A,M=0;function W(se){return l.reduce((pe,ge)=>(se&1<<ge&&pe.push(ge),pe),[])}if(!c.pins.length)for(let se=2,pe=0;se<c.buffer.length-1;se++){if(c.buffer[se]===127){c.pins.push({supportedModes:W(M),mode:void 0,value:0,report:1}),M=0,pe=0;continue}pe===0&&(y=c.buffer[se],A=(1<<c.buffer[se+1])-1,M|=1<<y,y===c.MODES.ANALOG&&c.RESOLUTION.ADC===null&&(c.RESOLUTION.ADC=A),y===c.MODES.PWM&&c.RESOLUTION.PWM===null&&(c.RESOLUTION.PWM=A)),pe^=1}c.emit("capability-query")},[J](c){let l=c.buffer[2];c.pins[l].mode=c.buffer[3],c.pins[l].state=c.buffer[4],c.buffer.length>6&&(c.pins[l].state|=c.buffer[5]<<7),c.buffer.length>7&&(c.pins[l].state|=c.buffer[6]<<14),c.emit(`pin-state-${l}`)},[o](c){let l=0,y;for(let A=2;A<c.buffer.length-1;A++)y=c.buffer[A],c.pins[l].analogChannel=y,y!==127&&c.analogPins.push(l),l++;c.emit("analog-mapping-query")},[p](c){const l=[],y=c.buffer[2]&127|(c.buffer[3]&127)<<7,A=c.buffer[4]&127|(c.buffer[5]&127)<<7;for(let M=6,W=c.buffer.length-1;M<W;M+=2)l.push(c.buffer[M]|c.buffer[M+1]<<7);c.emit(`I2C-reply-${y}-${A}`,l)},[E](c){const l=c.buffer[2];Qe[l]&&Qe[l](c)},[D](c){const l=c.buffer[3],y=c.buffer.slice(4,c.buffer.length-1);c.emit(`1-wire-search-reply-${l}`,r.readDevices(y))},[$](c){const l=c.buffer[3],y=c.buffer.slice(4,c.buffer.length-1);c.emit(`1-wire-search-alarms-reply-${l}`,r.readDevices(y))},[C](c){const l=c.buffer.slice(4,c.buffer.length-1),y=i.from7BitArray(l),A=y[1]<<8|y[0];c.emit(`1-wire-read-reply-${A}`,y.slice(2))},[le](c){c.emit("string",Ce.from(c.buffer.slice(2,-1)).toString().replace(/\0/g,""))},[ae](c){const l=c.buffer[2]&127|(c.buffer[3]&127)<<7,y=[c.buffer[4]&127|(c.buffer[5]&127)<<7,c.buffer[6]&127|(c.buffer[7]&127)<<7,c.buffer[8]&127|(c.buffer[9]&127)<<7,c.buffer[10]&127|(c.buffer[11]&127)<<7],A=(y[0]<<24)+(y[1]<<16)+(y[2]<<8)+y[3];c.emit(`ping-read-${l}`,A)},[O](c){const l=c.buffer[2];c.emit(`stepper-done-${l}`,!0)},[Z](c){const l=c.buffer[2],y=c.buffer[3],A=l===6||l===10?st(c.buffer.slice(4,9)):null;l===6&&c.emit(`stepper-position-${y}`,A),l===10&&c.emit(`stepper-done-${y}`,A),l===36&&c.emit(`multi-stepper-done-${y}`)},[F](c){const l=c.buffer[2]&S,y=c.buffer[2]&15,A=[];if(l===B){for(let M=3,W=c.buffer.length;M<W-1;M+=2)A.push(c.buffer[M+1]<<7|c.buffer[M]);c.emit(`serial-data-${y}`,A)}}};let Ve=null;class Pe extends e{constructor(l,y,A){super(),(typeof y=="function"||typeof y>"u")&&(A=y,y={});const M=this,se=Object.assign({},{reportVersionTimeout:5e3,samplingInterval:19,serialport:{baudRate:57600,highWaterMark:256}},y);if(this.isReady=!1,this.MODES={INPUT:0,OUTPUT:1,ANALOG:2,PWM:3,SERVO:4,SHIFT:5,I2C:6,ONEWIRE:7,STEPPER:8,SERIAL:10,PULLUP:11,IGNORE:127,PING_READ:117,UNKOWN:16},this.I2C_MODES={WRITE:0,READ:1,CONTINUOUS_READ:2,STOP_READING:3},this.STEPPER={TYPE:{DRIVER:1,TWO_WIRE:2,THREE_WIRE:3,FOUR_WIRE:4},STEP_SIZE:{WHOLE:0,HALF:1},RUN_STATE:{STOP:0,ACCEL:1,DECEL:2,RUN:3},DIRECTION:{CCW:0,CW:1}},this.SERIAL_MODES={CONTINUOUS_READ:0,STOP_READING:1},this.SERIAL_PORT_IDs={HW_SERIAL0:0,HW_SERIAL1:1,HW_SERIAL2:2,HW_SERIAL3:3,SW_SERIAL0:8,SW_SERIAL1:9,SW_SERIAL2:16,SW_SERIAL3:17,DEFAULT:8},this.SERIAL_PIN_TYPES={RES_RX0:0,RES_TX0:1,RES_RX1:2,RES_TX1:3,RES_RX2:4,RES_TX2:5,RES_RX3:6,RES_TX3:7},this.RESOLUTION={ADC:null,DAC:null,PWM:null},this.HIGH=1,this.LOW=0,this.pins=[],this.ports=Array(16).fill(0),this.analogPins=[],this.version={},this.firmware={},this.buffer=[],this.versionReceived=!1,this.name="Firmata",this.settings=se,this.pending=0,this.digitalPortQueue=0,typeof l=="object")this.transport=l;else{if(!Ve)throw new Error("Missing Default Transport");this.transport=new Ve(l,se.serialport)}this.transport.on("close",ge=>{if(ge&&ge.disconnect&&ge.disconnected){this.emit("disconnect");return}this.emit("close")}),this.transport.on("open",ge=>{this.emit("open",ge),this.emit("connect",ge)}),this.transport.on("error",ge=>{!this.isReady&&typeof A=="function"?A(ge):this.emit("error",ge)}),this.transport.on("data",ge=>{for(let Ae=0;Ae<ge.length;Ae++){let ve=ge[Ae];if(!(this.buffer.length===0&&ve===0)){this.buffer.push(ve);let Be=this.buffer[0],jt=this.buffer[this.buffer.length-1];if(Be===S&&jt===x){let He=Qe[this.buffer[1]];He&&this.versionReceived&&He(this),this.buffer.length=0}else if(Be===S&&this.buffer.length>0){let He=ge[Ae];He>127&&(this.buffer.length=0,this.buffer.push(He))}else if(Be!==S){let He=Be<S?Be&S:Be;He!==j&&He!==u&&He!==f&&(this.buffer.length=0)}if(this.buffer.length===3&&Be!==S){let He=Be<S?Be&S:Be;te[He]?((this.versionReceived||Be===j)&&(this.versionReceived=!0,te[He](this)),this.buffer.length=0):this.buffer.length=0}}}}),this.reportVersionTimeoutId=setTimeout(()=>{this.versionReceived===!1&&(this.reportVersion(function(){}),this.queryFirmware(function(){}))},se.reportVersionTimeout);function pe(){M.isReady=!0,M.emit("ready"),typeof A=="function"&&A()}this.once("reportversion",()=>{clearTimeout(this.reportVersionTimeoutId),this.versionReceived=!0,this.once("queryfirmware",()=>{if(y.samplingInterval!==void 0&&this.setSamplingInterval(y.samplingInterval),se.skipCapabilities){if(this.analogPins=se.analogPins||this.analogPins,this.pins=se.pins||this.pins,!this.pins.length)for(var ge=0;ge<(se.pinCount||de);ge++){var Ae=[],ve=this.analogPins.indexOf(ge);ve<0&&(ve=127),this.pins.push({supportedModes:Ae,analogChannel:ve})}this.RESOLUTION.ADC=1023,this.RESOLUTION.PWM=255,pe()}else this.queryCapabilities(()=>{this.queryAnalogMapping(pe)})})})}reportVersion(l){this.once("reportversion",l),Ee(this,[j])}queryFirmware(l){this.once("queryfirmware",l),Ee(this,[S,K,x])}analogRead(l,y){this.reportAnalogPin(l,1),this.addListener(`analog-read-${l}`,y)}pwmWrite(l,y){let A;this.pins[l].value=y,l>15?(A=[S,a,l,y&127,y>>7&127],y>16384&&(A[A.length]=y>>14&127),y>2097152&&(A[A.length]=y>>21&127),y>268435456&&(A[A.length]=y>>28&127),A[A.length]=x):A=[u|l,y&127,y>>7&127],Ee(this,A)}servoConfig(l,y,A){if(typeof l=="object"&&l!==null){let M=l;l=M.pin,y=M.min,A=M.max}if(typeof l>"u")throw new Error("servoConfig: pin must be specified");if(typeof y>"u")throw new Error("servoConfig: min must be specified");if(typeof A>"u")throw new Error("servoConfig: max must be specified");this.pins[l].mode=this.MODES.SERVO,Ee(this,[S,ce,l,y&127,y>>7&127,A&127,A>>7&127,x])}servoWrite(...l){this.analogWrite(...l)}pinMode(l,y){y===this.MODES.ANALOG?this.pins[this.analogPins[l]].mode=y:(this.pins[l].mode=y,Ee(this,[Y,l,y]))}digitalWrite(l,y,A){let M=this.updateDigitalPort(l,y);A?this.digitalPortQueue|=1<<M:this.writeDigitalPort(M)}updateDigitalPort(l,y){const A=l>>3,M=1<<(l&7);return this.pins[l].value=y,y?this.ports[A]|=M:this.ports[A]&=~M,A}flushDigitalPorts(){for(let l=0;l<this.ports.length;l++)this.digitalPortQueue>>l&&this.writeDigitalPort(l);this.digitalPortQueue=0}writeDigitalPort(l){Ee(this,[f|l,this.ports[l]&127,this.ports[l]>>7&127])}digitalRead(l,y){this.reportDigitalPin(l,1),this.addListener(`digital-read-${l}`,y)}queryCapabilities(l){this.once("capability-query",l),Ee(this,[S,h,x])}queryAnalogMapping(l){this.once("analog-mapping-query",l),Ee(this,[S,s,x])}queryPinState(l,y){this.once(`pin-state-${l}`,y),Ee(this,[S,z,l,x])}sendString(l){const y=Ce.from(`${l}\0`,"utf8"),A=[];A.push(S,le);for(let M=0,W=y.length;M<W;M++)A.push(y[M]&127,y[M]>>7&127);A.push(x),Ee(this,A)}sendI2CConfig(l){return this.i2cConfig(l)}i2cConfig(l){let y=n.get(this),A;return y||(y={},n.set(this,y)),typeof l=="number"?A=l:typeof l=="object"&&l!==null&&(A=Number(l.delay),typeof l.address<"u"&&(y[l.address]||(y[l.address]={stopTX:!0})),typeof l.settings<"u"&&Object.assign(y[l.address],l.settings)),y.delay=A=A||0,Le(this,[S,d,A&255,A>>8&255,x]),this}sendI2CWriteRequest(l,y){const A=[];y=y||[],A.push(S,R,l,this.I2C_MODES.WRITE<<3);for(let M=0,W=y.length;M<W;M++)A.push(y[M]&127,y[M]>>7&127);A.push(x),Le(this,A)}i2cWrite(l,y,A){const M=[S,R,l,this.I2C_MODES.WRITE<<3];if(arguments.length===3&&!Array.isArray(y)&&!Array.isArray(A))return this.i2cWriteReg(l,y,A);arguments.length===2&&(Array.isArray(y)?(A=y.slice(),y=A.shift()):A=[]);const W=Ce.from([y].concat(A));for(var se=0,pe=W.length;se<pe;se++)M.push(W[se]&127,W[se]>>7&127);return M.push(x),Le(this,M),this}i2cWriteReg(l,y,A){return Le(this,[S,R,l,this.I2C_MODES.WRITE<<3,y&127,y>>7&127,A&127,A>>7&127,x]),this}sendI2CReadRequest(l,y,A){Le(this,[S,R,l,this.I2C_MODES.READ<<3,y&127,y>>7&127,x]),this.once(`I2C-reply-${l}-0`,A)}i2cRead(l,y,A,M){arguments.length===3&&typeof y=="number"&&typeof A=="function"&&(M=A,A=y,y=null);const W=[S,R,l,this.I2C_MODES.CONTINUOUS_READ<<3];let se=`I2C-reply-${l}-`;return y!==null?W.push(y&127,y>>7&127):y=0,se+=y,W.push(A&127,A>>7&127,x),this.on(se,M),Le(this,W),this}i2cStop(l){l!=null&&(typeof l=="number"&&(l={address:l}),Ee(this,[S,R,l.address,this.I2C_MODES.STOP_READING<<3,x]),Object.keys(this._events).forEach(y=>{y.startsWith(`I2C-reply-${l.address}`)&&this.removeAllListeners(y)}))}i2cReadOnce(l,y,A,M){arguments.length===3&&typeof y=="number"&&typeof A=="function"&&(M=A,A=y,y=null);const W=[S,R,l,this.I2C_MODES.READ<<3];let se=`I2C-reply-${l}-`;return y!==null?W.push(y&127,y>>7&127):y=0,se+=y,W.push(A&127,A>>7&127,x),this.once(se,M),Le(this,W),this}sendOneWireConfig(l,y){Ee(this,[S,E,m,l,y?1:0,x])}sendOneWireSearch(l,y){this[me](N,`1-wire-search-reply-${l}`,l,y)}sendOneWireAlarmsSearch(l,y){this[me](_,`1-wire-search-alarms-reply-${l}`,l,y)}[me](l,y,A,M){Ee(this,[S,E,l,A,x]);const W=setTimeout(()=>{M(new Error("1-Wire device search timeout - are you running ConfigurableFirmata?"))},5e3);this.once(y,se=>{clearTimeout(W),M(null,se)})}sendOneWireRead(l,y,A,M){const W=Math.floor(Math.random()*255),se=setTimeout(()=>{M(new Error("1-Wire device read timeout - are you running ConfigurableFirmata?"))},5e3);this[Ue](l,w,y,A,W,null,null,`1-wire-read-reply-${W}`,pe=>{clearTimeout(se),M(null,pe)})}sendOneWireReset(l){this[Ue](l,L)}sendOneWireWrite(l,y,A){this[Ue](l,H,y,null,null,null,Array.isArray(A)?A:[A])}sendOneWireDelay(l,y){this[Ue](l,b,null,null,null,y)}sendOneWireWriteAndRead(l,y,A,M,W){const se=Math.floor(Math.random()*255),pe=setTimeout(()=>{W(new Error("1-Wire device read timeout - are you running ConfigurableFirmata?"))},5e3);this[Ue](l,H|w,y,M,se,null,Array.isArray(A)?A:[A],`1-wire-read-reply-${se}`,ge=>{clearTimeout(pe),W(null,ge)})}[Ue](l,y,A,M,W,se,pe,ge,Ae){const ve=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];(A||M||W||se||pe)&&(y=y|G),A&&ve.splice(...[0,8].concat(A)),M&&(ve[8]=M&255,ve[9]=M>>8&255),W&&(ve[10]=W&255,ve[11]=W>>8&255),se&&(ve[12]=se&255,ve[13]=se>>8&255,ve[14]=se>>16&255,ve[15]=se>>24&255),pe&&ve.push(...pe);const Be=[S,E,y,l,...i.to7BitArray(ve),x];Ee(this,Be),ge&&Ae&&this.once(ge,Ae)}setSamplingInterval(l){const y=l<10?10:l>65535?65535:l;this.settings.samplingInterval=y,Ee(this,[S,ue,y&127,y>>7&127,x])}getSamplingInterval(){return this.settings.samplingInterval}reportAnalogPin(l,y){(y===0||y===1)&&(this.pins[this.analogPins[l]].report=y,Ee(this,[q|l,y]))}reportDigitalPin(l,y){const A=l>>3;(y===0||y===1)&&(this.pins[l].report=y,Ee(this,[oe|A,y]))}pingRead(l,y){if(!this.pins[l.pin].supportedModes.includes(ae))throw new Error("Please upload PingFirmata to the board");const{pin:A,value:M,pulseOut:W=0,timeout:se=1e6}=l;Ee(this,[S,ae,A,M,...Pe.encode([W>>24&255,W>>16&255,W>>8&255,W&255]),...Pe.encode([se>>24&255,se>>16&255,se>>8&255,se&255]),x]),this.once(`ping-read-${A}`,y)}accelStepperConfig(l){let{deviceNum:y,invertPins:A,motorPin1:M,motorPin2:W,motorPin3:se,motorPin4:pe,enablePin:ge,stepSize:Ae=this.STEPPER.STEP_SIZE.WHOLE,type:ve=this.STEPPER.TYPE.FOUR_WIRE}=l;const Be=[S,Z,0,y];let jt=(ve&7)<<4|(Ae&7)<<1,He=0;typeof ge<"u"&&(jt=jt|1),Be.push(jt),["stepPin","motorPin1","directionPin","motorPin2","motorPin3","motorPin4","enablePin"].forEach(or=>{typeof l[or]<"u"&&Be.push(l[or])}),Array.isArray(A)&&(A.includes(M)&&(He|=1),A.includes(W)&&(He|=2),A.includes(se)&&(He|=4),A.includes(pe)&&(He|=8),A.includes(ge)&&(He|=16)),Be.push(He,x),Ee(this,Be)}accelStepperZero(l){Ee(this,[S,Z,1,l,x])}accelStepperStep(l,y,A){Ee(this,[S,Z,2,l,...Ne(y),x]),A&&this.once(`stepper-done-${l}`,A)}accelStepperTo(l,y,A){Ee(this,[S,Z,3,l,...Ne(y),x]),A&&this.once(`stepper-done-${l}`,A)}accelStepperEnable(l,y=!0){Ee(this,[S,Z,4,l,y&1,x])}accelStepperStop(l){Ee(this,[S,Z,5,l,x])}accelStepperReportPosition(l,y){Ee(this,[S,Z,6,l,x]),y&&this.once(`stepper-position-${l}`,y)}accelStepperAcceleration(l,y){Ee(this,[S,Z,8,l,...We(y),x])}accelStepperSpeed(l,y){Ee(this,[S,Z,9,l,...We(y),x])}multiStepperConfig(l){Ee(this,[S,Z,32,l.groupNum,...l.devices,x])}multiStepperTo(l,y,A){if(l<0||l>5)throw new RangeError(`Invalid "groupNum": ${l}. Expected "groupNum" between 0-5`);Ee(this,[S,Z,33,l,...y.reduce((M,W)=>M.concat(...Ne(W)),[]),x]),A&&this.once(`multi-stepper-done-${l}`,A)}multiStepperStop(l){if(l<0||l>5)throw new RangeError(`Invalid "groupNum": ${l}. Expected "groupNum" between 0-5`);Ee(this,[S,Z,35,l,x])}stepperConfig(l,y,A,M,W,se,pe){Ee(this,[S,O,0,l,y,A&127,A>>7&127,M,W,...y===this.STEPPER.TYPE.FOUR_WIRE?[se,pe]:[],x])}stepperStep(l,y,A,M,W,se,pe){typeof W=="function"&&(pe=W,W=0,se=0),Ee(this,[S,O,1,l,y,A&127,A>>7&127,A>>14&127,M&127,M>>7&127,...W>0||se>0?[W&127,W>>7&127,se&127,se>>7&127]:[],x]),pe&&this.once(`stepper-done-${l}`,pe)}serialConfig(l){let y,A,M,W;if(typeof l=="object"&&l!==null&&(y=l.portId,A=l.baud,M=l.rxPin,W=l.txPin),typeof y>"u")throw new Error("portId must be specified, see SERIAL_PORT_IDs for options.");A=A||57600;const se=[S,F,U|y,A&127,A>>7&127,A>>14&127];if(y>7&&typeof M<"u"&&typeof W<"u")se.push(M,W);else if(y>7)throw new Error("Both RX and TX pins must be defined when using Software Serial.");se.push(x),Ee(this,se)}serialWrite(l,y){const A=[S,F,k|l];for(let M=0,W=y.length;M<W;M++)A.push(y[M]&127,y[M]>>7&127);A.push(x),y.length>0&&Ee(this,A)}serialRead(l,y,A){const M=[S,F,P|l,this.SERIAL_MODES.CONTINUOUS_READ];arguments.length===2&&typeof y=="function"?A=y:M.push(y&127,y>>7&127),M.push(x),Ee(this,M),this.on(`serial-data-${l}`,A)}serialStop(l){Ee(this,[S,F,P|l,this.SERIAL_MODES.STOP_READING,x]),this.removeAllListeners(`serial-data-${l}`)}serialClose(l){Ee(this,[S,F,V|l,x])}serialFlush(l){Ee(this,[S,F,Q|l,x])}serialListen(l){l<8||Ee(this,[S,F,ne|l,x])}sysexResponse(l,y){if(Pe.SYSEX_RESPONSE[l])throw new Error(`${l} is not an available SYSEX_RESPONSE byte`);return Pe.SYSEX_RESPONSE[l]=A=>y.call(A,A.buffer.slice(2,-1)),this}clearSysexResponse(l){Pe.SYSEX_RESPONSE[l]&&delete Pe.SYSEX_RESPONSE[l]}sysexCommand(l){if(!l||!l.length)throw new Error("Sysex Command cannot be empty");return Ee(this,[S,...l.slice(),x]),this}reset(){Ee(this,[ye])}static isAcceptablePort(l){return!!/usb|acm|^com/i.test(l.path)}static requestPort(l){if(!Ve||Ve&&typeof Ve.list!="function"){ie.nextTick(()=>{l(new Error("No Transport provided"),null)});return}Ve.list().then(y=>{const A=y.find(M=>Pe.isAcceptablePort(M)&&M);A?l(null,A):l(new Error("No Acceptable Port Found"),null)}).catch(y=>{l(y,null)})}static encode(l){const y=[],A=l.length;for(let M=0;M<A;M++)y.push(l[M]&127,l[M]>>7&127);return y}static decode(l){const y=[];if(l.length%2!==0)throw new Error("Firmata.decode(data) called with odd number of data bytes");for(;l.length;){const A=l.shift(),M=l.shift();y.push(A|M<<7)}return y}}Pe.prototype.analogWrite=Pe.prototype.pwmWrite,Pe.Board=Pe,Pe.SYSEX_RESPONSE=Qe,Pe.MIDI_RESPONSE=te;function Ee(c,l){c.pending++,c.transport.write(Ce.from(l),()=>c.pending--)}function Le(c,l){const y=n.get(c);if(!y)throw new Error("I2C is not enabled for this board. To enable, call the i2cConfig() method.");if(l[1]===R){const A=l[2];y[A]||(y[A]={stopTX:!0}),l[3]&v&&(l[3]|=+!y[A].stopTX<<6)}Ee(c,l)}function Ne(c){const l=c<0;c=Math.abs(c);const y=[c&127,c>>7&127,c>>14&127,c>>21&127,c>>28&7];return l&&(y[y.length-1]|=8),y}function st(c){let l=c[0]&127|(c[1]&127)<<7|(c[2]&127)<<14|(c[3]&127)<<21|(c[4]&7)<<28;return c[4]>>3&&(l*=-1),l}const ot=Math.pow(2,23);function We(c){const l=c<0?1:0;c=Math.abs(c);const y=Math.floor(Math.log10(c));let A=0+y;for(c/=Math.pow(10,y);!Number.isInteger(c)&&c<ot;)A-=1,c*=10;for(;c>ot;)A+=1,c/=10;return c=Math.trunc(c),A+=11,[c&127,c>>7&127,c>>14&127,c>>21&3|(A&15)<<2|(l&1)<<6]}function ni(c){const l=(c[3]>>2&15)-11,y=c[3]>>6&1;let A=c[0]|c[1]<<7|c[2]<<14|(c[3]&3)<<21;return y&&(A*=-1),A*Math.pow(10,l)}if(t.IS_TEST_MODE){let c=null;Pe.test={i2cPeripheralSettings(l){return n.get(l)},get i2cActive(){return n},set transport(l){c=Ve,Ve=l},restoreTransport(){Ve=c},encode32BitSignedInteger:Ne,decode32BitSignedInteger:st,encodeCustomFloat:We,decodeCustomFloat:ni,writeToTransport:Ee,symbols:{SYM_sendOneWireRequest:Ue,SYM_sendOneWireSearch:me}}}const T=function(c){return Ve=c,Pe};return T.Firmata=Pe,Us=T,Us}var Ws,p0;function e1(){if(p0)return Ws;p0=1;var t={};const e=Et;class i extends e{constructor(u){super(),this.isOpen=!0,this.baudRate=0,this.path=u}write(u){Ce.isBuffer(u)&&(u=Array.from(u)),this.lastWrite=u,this.emit("write",u)}static list(){return Promise.resolve([])}}i.SerialPort=i;let r,n,s;try{t.IS_TEST_MODE?r=i:(s=tc(),r=s)}catch(o){n=o}if(r==null)if(t.IS_TEST_MODE)r=i;else throw console.log("It looks like serialport didn't install properly."),console.log("More information can be found here https://serialport.io/docs/guide-installation"),console.log(`The result of requiring the package is: ${s}`),console.log(n),"Missing serialport dependency";return Ws=r,Ws}var $s,x0;function t1(){return x0||(x0=1,$s=rc()(e1())),$s}const nc={micro(t){const e=ie.hrtime();let i=0,r;for(;t>i;)r=ie.hrtime(e),i=(r[0]*1e9+r[1])/1e3},milli(t){nc.micro(t*1e3)}};var i1=nc,Hs,g0;function kt(){if(g0)return Hs;g0=1;var t={};const e=we(),i=De,r=i1,n=Ie,s=new Map,o=new Map;class u extends i{constructor(){super(),this.HIGH=1,this.LOW=0,this.isReady=!1,this.MODES={},this.pins=[],this.analogPins=[]}}const h={DEFAULT:{initialize:{value(){throw new Error("Expander expects a valid controller")}}},MCP23017:{ADDRESSES:{value:[32]},REGISTER:{value:{IODIRA:0,GPPUA:12,GPIOA:18,OLATA:20,IODIRB:1,GPPUB:13,GPIOB:19,OLATB:21}},initialize:{value(a){const d=s.get(this);d.iodir=[255,255],d.olat=[255,255],d.gpio=[255,255],d.gppu=[0,0],this.address=a.address||this.ADDRESSES[0],a.address=this.address,this.io.i2cConfig(a),this.io.i2cWrite(this.address,[this.REGISTER.IODIRA,d.iodir[this.REGISTER.IODIRA]]),this.io.i2cWrite(this.address,[this.REGISTER.IODIRB,d.iodir[this.REGISTER.IODIRB]]),Object.assign(this.MODES,this.io.MODES);for(let p=0;p<16;p++)this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:0,value:0,report:0,analogChannel:127}),this.pinMode(p,this.MODES.OUTPUT),this.digitalWrite(p,this.LOW);this.name="MCP23017",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(a){return a}},pinMode:{value(a,d){const p=s.get(this),R=a;let v=0,m=null;a<8?v=this.REGISTER.IODIRA:(v=this.REGISTER.IODIRB,a-=8),m=p.iodir[v],d===this.io.MODES.INPUT?m|=1<<a:m&=~(1<<a),this.pins[R].mode=d,this.io.i2cWrite(this.address,[v,m]),p.iodir[v]=m}},digitalWrite:{value(a,d){const p=s.get(this),R=a;let v=0,m=0,E=0;a<8?(v=this.REGISTER.IODIRA,E=this.REGISTER.GPIOA):(v=this.REGISTER.IODIRB,E=this.REGISTER.GPIOB,a-=8),m=p.olat[v],d===this.io.HIGH?m|=1<<a:m&=~(1<<a),this.pins[R].report=0,this.pins[R].value=d,this.io.i2cWrite(this.address,[E,m]),p.olat[v]=m,p.gpio[v]=m}},pullUp:{value(a,d){const p=s.get(this);let R=0,v=0,m=0;a<8?(R=this.REGISTER.IODIRA,m=this.REGISTER.GPPUA):(R=this.REGISTER.IODIRB,m=this.REGISTER.GPPUB,a-=8),v=p.gppu[R],d===this.io.HIGH?v|=1<<a:v&=~(1<<a),this.io.i2cWrite(this.address,[m,v]),p.gppu[R]=v}},digitalRead:{value(a,d){const p=a;let R=0;a<8?R=this.REGISTER.GPIOA:(R=this.REGISTER.GPIOB,a-=8),this.pins[p].report=1,this.on(`digital-read-${p}`,d),this.io.i2cRead(this.address,R,1,v=>{const E=v[0]>>a&1;this.pins[p].value=E,this.emit(`digital-read-${p}`,E)})}}},MCP23008:{ADDRESSES:{value:[32]},REGISTER:{value:{IODIR:0,GPPU:6,GPIO:9,OLAT:10}},initialize:{value(a){const d=s.get(this);d.iodir=[255],d.olat=[255],d.gpio=[255],d.gppu=[0],this.address=a.address||this.ADDRESSES[0],a.address=this.address,this.io.i2cConfig(a),this.io.i2cWrite(this.address,[this.REGISTER.IODIR,d.iodir[this.REGISTER.IODIR]]),Object.assign(this.MODES,this.io.MODES);for(let p=0;p<8;p++)this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:0,value:0,report:0,analogChannel:127}),this.pinMode(p,this.MODES.OUTPUT),this.digitalWrite(p,this.LOW);this.name="MCP23008",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(a){return a}},pinMode:{value(a,d){const p=s.get(this),R=a,v=this.REGISTER.IODIR;let m=p.iodir[v];d===this.io.MODES.INPUT?m|=1<<a:m&=~(1<<a),this.pins[R].mode=d,this.io.i2cWrite(this.address,[v,m]),p.iodir[v]=m}},digitalWrite:{value(a,d){const p=s.get(this),R=a,v=this.REGISTER.IODIR,m=this.REGISTER.GPIO;let E=p.olat[v];d===this.io.HIGH?E|=1<<a:E&=~(1<<a),this.pins[R].report=0,this.pins[R].value=d,this.io.i2cWrite(this.address,[m,E]),p.olat[v]=E,p.gpio[v]=E}},pullUp:{value(a,d){const p=s.get(this),R=this.REGISTER.IODIR,v=this.REGISTER.GPPU;let m=p.gppu[R];d===this.io.HIGH?m|=1<<a:m&=~(1<<a),this.io.i2cWrite(this.address,[v,m]),p.gppu[R]=m}},digitalRead:{value(a,d){const p=a,R=this.REGISTER.GPIO;this.pins[p].report=1,this.on(`digital-read-${a}`,d),this.io.i2cRead(this.address,R,1,v=>{const E=v[0]>>a&1;this.pins[p].value=E,this.emit(`digital-read-${a}`,E)})}}},PCF8574:{ADDRESSES:{value:[32]},REGISTER:{},initialize:{value(a){const d=s.get(this);d.port=0,d.ddr=0,d.pins=0,this.address=a.address||this.ADDRESSES[0],a.address=this.address,this.io.i2cConfig(a),Object.assign(this.MODES,this.io.MODES);for(let p=0;p<8;p++)this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:1,value:0,report:0,analogChannel:127}),this.pinMode(p,this.MODES.OUTPUT),this.digitalWrite(p,this.LOW);this.name="PCF8574",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(a){return a}},pinMode:{value(a,d){const p=s.get(this),R=a;let v=p.port,m=p.ddr;const E=p.pins;d===this.MODES.INPUT?(m&=~(1<<a),v&=~(1<<a)):(m|=1<<a,v&=~(1<<a)),this.pins[R].mode=d,p.port=v,p.ddr=m,this.io.i2cWrite(this.address,E&~m|v)}},digitalWrite:{value(a,d){const p=s.get(this),R=a;let v=p.port;const m=p.ddr,E=p.pins;d?v|=1<<a:v&=~(1<<a),this.pins[R].report=0,this.pins[R].value=d,p.port=v,this.io.i2cWrite(this.address,E&~m|v)}},digitalRead:{value(a,d){const p=s.get(this),R=a;this.pins[R].report=1,this.on(`digital-read-${a}`,d),this.io.i2cRead(this.address,1,v=>{const m=v[0],E=m>>a&1;p.pins=m,this.pins[R].value=E,this.emit(`digital-read-${a}`,E)})}}},PCF8575:{ADDRESSES:{value:[32]},REGISTER:{},initialize:{value(a){const d=s.get(this);d.port=[0,1],d.gpio=[0,0],this.address=a.address||this.ADDRESSES[0],a.address=this.address,this.io.i2cConfig(a),Object.assign(this.MODES,this.io.MODES);for(let p=0;p<16;p++)this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:1,value:0,report:0,analogChannel:127}),this.pinMode(p,this.MODES.OUTPUT),this.digitalWrite(p,this.LOW);this.io.i2cWrite(this.address,d.gpio),this.name="PCF8575",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(a){return a}},pinMode:{value(a,d){const p=a;this.pins[p].mode=d}},digitalWrite:{value(a,d){const p=s.get(this),R=a;let v;a<8?v=0:(v=1,a-=8),d===this.io.HIGH?p.gpio[v]|=1<<a:p.gpio[v]&=~(1<<a),this.pins[R].report=0,this.pins[R].value=d,this.io.i2cWrite(this.address,p.gpio)}},digitalRead:{value(a,d){const p=a;let R;a<8?R=0:(R=1,a-=8),this.pins[p].report=1,this.on(`digital-read-${a}`,d),this.io.i2cRead(this.address,2,v=>{const E=v[R]>>a&1;this.pins[p].value=E,this.emit(`digital-read-${a}`,E)})}}},PCA9685:{ADDRESSES:{value:[64]},REGISTER:{value:{MODE1:0,PRESCALE:254,BASE:6}},initialize:{value(a){const d=s.get(this);d.frequency=n.constrain(a.frequency||1526,24,1526),this.address=a.address||this.ADDRESSES[0],this.pwmRange=a.pwmRange||[0,4095],Object.defineProperties(this,{prescale:{get(){return Math.round(25e6/(4096*d.frequency))-1}},frequency:{get(){return d.frequency}}}),a.address=this.address,this.io.i2cConfig(a),this.io.i2cWriteReg(this.address,this.REGISTER.MODE1,0),this.io.i2cWriteReg(this.address,this.REGISTER.MODE1,16),this.io.i2cWriteReg(this.address,this.REGISTER.PRESCALE,this.prescale),this.io.i2cWriteReg(this.address,this.REGISTER.MODE1,0),r.micro(5),this.io.i2cWriteReg(this.address,this.REGISTER.MODE1,160),Object.assign(this.MODES,this.io.MODES);for(let p=0;p<16;p++)this.pins.push({supportedModes:[this.MODES.OUTPUT,this.MODES.PWM,this.MODES.SERVO],mode:0,value:0,report:0,analogChannel:127}),this.pinMode(p,this.MODES.OUTPUT),this.digitalWrite(p,this.LOW);this.name="PCA9685",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(a){return this.io.name.includes("Tessel 2")?a-1:a}},pinMode:{value(a,d){if(this.pins[a]===void 0)throw new RangeError(`Invalid PCA9685 pin: ${a}`);this.pins[a].mode=d}},digitalWrite:{value(a,d){this.pwmWrite(a,d?255:0)}},analogWrite:{value(a,d){this.pwmWrite(a,d)}},servoWrite:{value(a,d){let p;d<544?(d=n.constrain(d,0,180),p=n.map(d,0,180,this.pwmRange[0]/4,this.pwmRange[1]/4)):p=d/4,p|=0,this.io.i2cWrite(this.address,[this.REGISTER.BASE+4*a,0,0,p,p>>8])}},pwmWrite:{value(a,d){if(this.pins[a]===void 0)throw new RangeError(`Invalid PCA9685 pin: ${a}`);d=n.constrain(d,0,255);let p=0,R=this.pwmRange[1]*d/255;d===0&&(p=0,R=4096),d===255&&(p=4096,R=0),this.io.i2cWrite(this.address,[this.REGISTER.BASE+4*a,p,p>>8,R,R>>8]),this.pins[a].value=d}}},PCF8591:{ADDRESSES:{value:[72]},REGISTER:{},initialize:{value(a){const d=s.get(this);d.control=69,d.reading=!1,this.address=a.address||this.ADDRESSES[0],a.address=this.address,this.io.i2cConfig(a),Object.assign(this.MODES,this.io.MODES);for(let p=0;p<4;p++)this.pins.push({supportedModes:[this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:p});this.analogPins.push(0,1,2,3),this.io.i2cWrite(this.address,d.control),this.name="PCF8591",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(a){return typeof a=="string"&&a[0]==="A"?+a.slice(1):a}},pinMode:{value(a,d){this.pins[a].mode=d}},analogRead:{value(a,d){const p=s.get(this),R=a;this.pins[R].report=1,this.on(`analog-read-${a}`,d),p.reading||(p.reading=!0,this.io.i2cRead(this.address,4,v=>{let m;for(let E=0;E<4;E++)m=v[E]<<2,this.pins[E].value=m,this.pins[E].report&&this.emit(`analog-read-${E}`,m)}))}}},MUXSHIELD2:{initialize:{value(){const a=s.get(this);a.select=[2,4,6,7],a.ios=[null,10,11,12],a.io=[null,14,15,16],a.aio=[null,0,1,2],a.outMode=8,a.pinMap={},a.rowReading=[!1,!1,!1],a.rowMode=[null,null,null],a.rowValues=[0,0,0],Object.assign(this.MODES,{INPUT:0,OUTPUT:1,ANALOG:2}),this.io.pinMode(a.select[0],this.MODES.OUTPUT),this.io.pinMode(a.select[1],this.MODES.OUTPUT),this.io.pinMode(a.select[2],this.MODES.OUTPUT),this.io.pinMode(a.select[3],this.MODES.OUTPUT),this.io.pinMode(a.outMode,this.MODES.OUTPUT),this.io.digitalWrite(a.outMode,this.LOW),this.io.pinMode(a.ios[1],this.MODES.OUTPUT),this.io.pinMode(a.ios[2],this.MODES.OUTPUT),this.io.pinMode(a.ios[3],this.MODES.OUTPUT);let d=1,p=16,R=0;for(let v=0;v<48;v++)(v&p)===p&&(d++,p*=2,R=0),a.pinMap[`IO${d}-${R}`]=v,this.pins.push({row:d,index:R,supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT,this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:v}),this.analogPins.push(v),R++;this.name="MUXSHIELD2",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(a){return a}},pinMode:{value(a,d){const p=s.get(this),R=p.pinMap[a];if(R===void 0)throw new Error(`MUXSHIELD2: Invalid Pin number or name: ${a}`);const v=this.pins[R].row,m=v-1,E=p.rowMode[m];if(E===d)return this;if(E!==null&&E!==d)throw new Error("MUXSHIELD2: Cannot set mixed modes per IO row.");p.rowMode[m]=d;for(let w=0;w<16;w++)this.pins[m+w].mode=d;const b=p.io[v],C=p.ios[v];d===this.MODES.INPUT&&this.io.pinMode(b,this.MODES.INPUT),d===this.MODES.OUTPUT&&(this.io.pinMode(b,this.MODES.OUTPUT),this.io.digitalWrite(C,this.HIGH))}},digitalWrite:{value(a,d){const p=s.get(this),R=p.pinMap[a];if(R===void 0)throw new Error(`MUXSHIELD2: Invalid Pin number or name: ${a}`);const v=this.pins[R].row,m=v-1;let E=p.rowValues[m];const C=(v-1)*16,w=R-C;d?E|=1<<w:E&=~(1<<w),this.io.digitalWrite(p.select[3],this.LOW),this.io.digitalWrite(p.outMode,this.HIGH);const L=p.select[v-1],$=p.io[v];for(let _=15;_>=0;_--)this.io.digitalWrite(L,this.LOW),this.io.digitalWrite($,E>>_&1),this.io.digitalWrite(L,this.HIGH);this.io.digitalWrite(p.select[3],this.HIGH),this.io.digitalWrite(p.outMode,this.LOW),this.pins[R].value=d,p.rowValues[m]=E}},digitalRead:{value(a,d){this.ioRead("digital",a,d)}},analogRead:{value(a,d){this.ioRead("analog",a,d)}},ioRead:{value(a,d,p){const R=s.get(this),v=R.pinMap[d];if(v===void 0)throw new Error(`MUXSHIELD2: Invalid Pin number or name: ${d}`);this.on(`${a}-read-${v}`,p);const m=a==="analog",b=this.pins[v].row-1,C=b*16,w=v-C;this.pins[v].report=1,this.pins[v].channel=w,this.pins[v].ioPin=m?b:b+14;const L=()=>{const D=L.lastPinIndex+1;for(let N=D;N<this.pins.length;N++)if(this.pins[N].report===1)return L.lastPinIndex=N,L.lastPinIndex;return L.lastPinIndex=-1,L()};L.lastPinIndex=-1;const $=D=>{const N=L.lastPinIndex,G=this.pins[N];this.emit(`${a}-read-${N}`,D),this.io.removeListener(`${a}-read-${G.ioPin}`,$),setTimeout(_,10)};var _=()=>{const D=L(),N=this.pins[D];this.select(N.channel),m?(this.io.pinMode(N.ioPin,this.io.MODES.ANALOG),this.io.analogRead(N.ioPin,$)):this.io.digitalRead(N.ioPin,$)};R.rowReading[b]||(R.rowReading[b]=!0,_())}},select:{value(a){const d=s.get(this);this.io.digitalWrite(d.outMode,this.LOW),this.io.digitalWrite(d.select[0],a&1),this.io.digitalWrite(d.select[1],(a&3)>>1),this.io.digitalWrite(d.select[2],(a&7)>>2),this.io.digitalWrite(d.select[3],(a&15)>>3)}}},GROVEPI:{ADDRESSES:{value:[4]},REGISTER:{},COMMANDS:{value:{DIGITAL_READ:1,DIGITAL_WRITE:2,ANALOG_READ:3,ANALOG_WRITE:4,PIN_MODE:5,PING_READ:7}},initialize:{value(a){const d=s.get(this);d.isReading=!1,d.pinMap={D2:2,D3:3,D4:4,D5:5,D6:6,D7:7,D8:8,A0:14,A1:15,A2:16},this.isPwm=R=>{const v=typeof R=="number"?R:parseInt(R[1]);return v===3||v===5||v===6},this.address=a.address||this.ADDRESSES[0],a.address=this.address,this.io.i2cConfig(a),Object.assign(this.MODES,this.io.MODES);let p;for(let R=0;R<17;R++)p=127,R<=1||R>=9&&R<14?this.pins.push({supportedModes:[],mode:0,value:0,report:0,analogChannel:p}):(this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:0,value:0,report:0,analogChannel:p}),this.isPwm(R)&&this.pins[R].supportedModes.push(this.MODES.PWM),R>=14&&R<=17?(this.pins[R].analogChannel=R-14,this.pins[R].supportedModes.push(this.MODES.ANALOG),this.analogPins.push(R),this.pinMode(`A${this.pins[R].analogChannel}`,this.MODES.ANALOG)):(this.pinMode(`D${R}`,this.MODES.OUTPUT),this.digitalWrite(`D${R}`,this.LOW)));this.name="GROVEPI",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(a){return a}},pinMode:{value(a,d){const R=s.get(this).pinMap[a];d===this.io.MODES.INPUT||d===this.io.MODES.ANALOG?this.pins[R].mode=0:this.pins[R].mode=1,this.io.i2cWrite(this.address,[this.COMMANDS.PIN_MODE,R,this.pins[R].mode,0])}},digitalWrite:{value(a,d){const R=s.get(this).pinMap[a];d=d?1:0,this.io.i2cWrite(this.address,[this.COMMANDS.DIGITAL_WRITE,R,d,0]),this.pins[R].value=d}},ioRead:{value(a,d,p){const R=s.get(this),v=R.pinMap[a],m=d==="analog",E=m?3:1,b=m?this.COMMANDS.ANALOG_READ:this.COMMANDS.DIGITAL_READ;this.on(`${d}-read-${v}`,p),this.pins[v].report=1,this.pins[v].command=b,this.pins[v].type=d,this.pins[v].length=E;const C=()=>{const $=C.lastPinIndex+1;for(let _=$;_<this.pins.length;_++)if(this.pins[_].report===1)return C.lastPinIndex=_,C.lastPinIndex;return C.lastPinIndex=-1,C()};C.lastPinIndex=-1;const w=($,_)=>{const D=this.pins[$];let N=!0;D.type==="digital"&&this.pins[$].value===_&&(N=!1),this.pins[$].value=_,N&&this.emit(`${D.type}-read-${$}`,_),setTimeout(L,1)};var L=()=>{const $=C(),_=this.pins[$],D=_.type==="analog";this.io.i2cWrite(this.address,[_.command,$,0,0]),this.io.i2cReadOnce(this.address,_.length,N=>{let G;D?G=(N[1]<<8)+N[2]:G=N[0],w($,G)})};R.isReading||(R.isReading=!0,L())}},digitalRead:{value(a,d){this.ioRead(a,"digital",d)}},analogRead:{value(a,d){this.ioRead(a,"analog",d)}},pingRead:{value({pin:a},d){const R=s.get(this).pinMap[a];this.io.i2cWrite(this.address,[this.COMMANDS.PING_READ,R,0,0]),setTimeout(()=>{this.once(`ping-read-${a}`,d),this.io.i2cReadOnce(this.address,3,v=>{const m=Math.round(((v[1]<<8)+v[2])*29*2);this.pins[R].value=m,this.emit(`ping-read-${a}`,m)})},200)}},analogWrite:{value(a,d){this.pwmWrite(a,d)}},pwmWrite:{writable:!0,value(a,d){const R=s.get(this).pinMap[a];d=n.constrain(d,0,255),this.io.i2cWrite(this.address,[this.COMMANDS.ANALOG_WRITE,R,d,0]),this.pins[R].value=d}}},"74HC595":{initialize:{value({pins:a}){const d=s.get(this);if(!a.data)throw new Error("Expected pins.data");if(!a.clock)throw new Error("Expected pins.clock");if(!a.latch)throw new Error("Expected pins.latch");d.data=a.data,d.clock=a.clock,d.latch=a.latch,d.value=0,Object.assign(this.MODES,this.io.MODES),this.pins=[];for(let p=0;p<8;p++)this.pins.push({supportedModes:[this.MODES.OUTPUT],mode:1,value:0,report:0,analogChannel:127});this.portWrite(0,d.value),this.name="74HC595",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(a){return a}},pinMode:{value(a,d){this.pins[a].mode=d}},digitalWrite:{value(a,d){const p=s.get(this);d?p.value|=1<<a:p.value&=~(1<<a),this.pins[a].value=d,this.portWrite(0,p.value)}},portWrite:{writable:!0,configurable:!0,value(a,d){const p=s.get(this);p.value=d,this.board.digitalWrite(p.latch,this.io.LOW),this.board.shiftOut(p.data,p.clock,!0,p.value),this.board.digitalWrite(p.latch,this.io.HIGH);for(let R=0;R<8;R++)this.pins[R].value=p.value>>R&1}}},CD74HC4067:{ADDRESSES:{value:[10,11,12,13]},REGISTER:{},initialize:{value(a){const d=s.get(this);d.reading=!1,this.address=a.address||this.ADDRESSES[0],a.address=this.address,this.io.i2cConfig(a),Object.assign(this.MODES,this.io.MODES);for(let p=0;p<16;p++)this.pins.push({supportedModes:[this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:p}),this.analogPins.push(p);this.name="CD74HC4067",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(a){return typeof a=="string"&&a[0]==="A"?+a.slice(1):a}},pinMode:{value(a,d){this.pins[a].mode=d}},analogRead:{value(a,d){const p=s.get(this),R=a;this.pins[R].report=1,this.on(`analog-read-${a}`,d),this.io.i2cWrite(this.address,R,1),p.reading||(p.reading=!0,this.io.i2cRead(this.address,32,v=>{let m;for(let E=0;E<16;E++){const b=E*2;m=(v[b]<<8)+v[b+1],this.pins[E].value=m,this.pins[E].report&&this.emit(`analog-read-${E}`,m)}}))}}},LIS3DH:{ADDRESSES:{value:[24]},REGISTER:{value:{OUT_ADC1_L:8,OUT_X_L:40,CTRL_REG1:32,CTRL_REG2:33,CTRL_REG3:34,CTRL_REG4:35,CTRL_REG5:36,TEMP_CFG_REG:31}},initialize:{value(a){const d=s.get(this);d.reading=!1,this.address=a.address||this.ADDRESSES[0],a.address=this.address,this.io.i2cConfig(a);let p=7;p=p&-241|112,this.io.i2cWrite(this.address,this.REGISTER.CTRL_REG1,p),this.io.i2cWrite(this.address,this.REGISTER.CTRL_REG4,136),this.io.i2cWrite(this.address,this.REGISTER.CTRL_REG3,16),Object.assign(this.MODES,this.io.MODES);for(let R=0;R<4;R++)R===0?this.pins.push({supportedModes:[],mode:0,value:0,report:0,analogChannel:127}):(this.pins.push({supportedModes:[this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:R}),this.analogPins.push(R));this.name="LIS3DH",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(a){return typeof a=="string"&&a[0]==="A"?+a.slice(1):a}},pinMode:{value(a,d){this.pins[a].mode=d}},analogRead:{value(a,d){const p=s.get(this),R=a;this.pins[R].report=1,this.on(`analog-read-${a}`,d),p.reading||(p.reading=!0,this.io.i2cWrite(this.address,this.REGISTER.TEMP_CFG_REG,128),this.io.i2cRead(this.address,this.REGISTER.OUT_ADC1_L|128,6,v=>{this.pins[1].value=n.scale(n.int16(v[1],v[0]),-32512,32512,1023,0),this.pins[2].value=n.scale(n.int16(v[3],v[2]),-32512,32512,1023,0),this.pins[3].value=n.scale(n.int16(v[5],v[4]),-32512,32512,1023,0);for(let m=1;m<4;m++)this.pins[m].report&&this.emit(`analog-read-${m}`,this.pins[m].value)}))}},i2cConfig:{value(...a){return this.io.i2cConfig.apply(this.io,a)}},i2cWrite:{value(...a){return this.io.i2cWrite.apply(this.io,a)}},i2cWriteReg:{value(...a){return this.io.i2cWriteReg.apply(this.io,a)}},i2cRead:{value(...a){return this.io.i2cRead.apply(this.io,a)}},i2cReadOnce:{value(...a){return this.io.i2cReadOnce.apply(this.io,a)}}},ADS1115:{ADDRESSES:{value:[72,73,74,75]},REGISTER:{value:{CONFIG:1,READ:0,PIN:[193,209,225,241],PIN_DATA:131}},initialize:{value(a){const d=s.get(this);d.reading=!1,this.address=a.address||this.ADDRESSES[0],a.address=this.address,this.io.i2cConfig(a),Object.assign(this.MODES,this.io.MODES);for(let p=0;p<4;p++)this.pins.push({supportedModes:[this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:p}),this.analogPins.push(p);this.name="ADS1115",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(a){return typeof a=="string"&&a[0]==="A"?+a.slice(1):a}},pinMode:{value(a,d){this.pins[a].mode=d}},analogRead:{value(a,d){const p=s.get(this);this.pins[a].report=1;let R=!1;if(this.on(`analog-read-${a}`,d),!p.reading){p.reading=!0;const v=()=>{setTimeout(()=>{R=!0},8)};this.io.i2cWrite(this.address,this.REGISTER.CONFIG,[this.REGISTER.PIN[a],this.REGISTER.PIN_DATA]),v(),this.io.i2cRead(this.address,this.REGISTER.READ,2,m=>{if(R){R=!1;const E=a===this.pins.length-1?0:a+1;this.io.i2cWrite(this.address,this.REGISTER.CONFIG,[this.REGISTER.PIN[E],this.REGISTER.PIN_DATA]);const b=(m[0]<<8)+m[1];this.pins[a].value=b,this.pins[a].report&&this.emit(`analog-read-${a}`,b),a=E,v()}})}}}}};h.CD74HCT4067=h.CD74HC4067,h["74HC4067"]=h.CD74HC4067,h.PCF8574A=Object.assign({},h.PCF8574,{ADDRESSES:{value:[56]}});const g=Object.keys(e.prototype);Object.keys(h).forEach(a=>{g.forEach(d=>{h[a][d]===void 0&&(h[a][d]={writable:!0,configurable:!0,value(){throw new Error(`Expander:${a} does not support ${d}`)}})})});const f=["74HC595"];class x extends u{constructor(d){super();let p="Expander cannot reuse an active address",R=null,v;if(typeof d=="string"&&(v=d),e.Component.call(this,d=e.Options(d),{normalizePin:!1,requestPin:!1}),f.includes(d.controller)&&typeof this.address>"u"&&(this.address=n.uid()),R=o.get(this.address),R)throw this.bus&&R.bus!==void 0&&R.bus===this.bus&&(p+=" on this bus"),new Error(p);typeof d.controller>"u"&&v&&(d.controller=v),e.Controller.call(this,h,d),s.set(this,{}),typeof this.initialize=="function"&&this.initialize(d),o.set(this.address,this)}}return x.get=a=>{if(!a.address||!a.controller)throw new Error("Expander.get(...) requires an address and controller");if(a.address!==void 0&&(a.address=Number(a.address)),Number.isNaN(a.address))throw new Error("Expander.get(...) expects address to be a number");if(typeof a.controller!="string")throw new Error("Expander.get(...) expects controller name to be a string");const d=o.get(a.address);return d&&d.name===a.controller.toUpperCase()?d:new x(a)},x.byAddress=a=>o.get(a),x.byController=a=>{let d=null;return o.forEach(p=>{p.name===a.toUpperCase()&&(d=p)}),d},x.hasController=a=>h[a]!==void 0,t.IS_TEST_MODE&&(x.Controllers=h,x.purge=()=>{s.clear(),o.clear()}),Hs=x,Hs}var ks,E0;function we(){if(E0)return ks;E0=1;var t={};const e=De,i=Zf,r=nt,n=Ie,s=Lu,o=Nu,u=Nd;let h=!!t.IS_TEST_MODE,g;const f=[],x=/usb|acm|^com/i,a="undefined",d={used:[],attempts:[],detect(E){let w;parseFloat(ie.versions.nw)>=.13?w=Ip():w=tc(),w.list().then(L=>{const $=L.reduce((_,D)=>{let N=!0;return x.test(D.path)||(N=!1),d.used.includes(D.path)&&(N=!1),N&&_.push(D.path),_},[]);if(!$.length){if(h&&this.abort)return;if(d.attempts[d.used.length]||(d.attempts[d.used.length]=0,this.info("Board","Looking for connected device")),d.attempts[d.used.length]++,d.attempts[d.used.length]>10){this.fail("Board","No connected device found");return}setTimeout(()=>{d.detect.call(this,E)},400);return}this.info("Available",i.grey($)),E.call(this,$[0])})},connect(E,b){const C=t1().Board;let w=null,L,$,_,D;typeof E=="object"&&E.path?(_=E.path,this.info(E.transport||"SerialPort",i.grey(_))):_=E,d.used.push(_);try{L=new C(E,N=>{N&&(w=N),b.call(this,w,w?"error":"ready",L)}),L.name="Firmata",L.defaultLed=13,L.port=_,$=!0}catch(N){w=N}w&&(w=w.message||w),D=$?"connect":"error",b.call(this,w,D,L)}};class p extends e{constructor(b={}){super();const C={};let w=!1;Object.assign(this,b),this.timer=null,this.isConnected=!1,this.isReady=!1,this.io=this.io||null,this.register=[],this.occupied=[],this.Drivers={},this.id||(this.id=n.uid()),typeof this.debug===a&&(this.debug=!0),typeof this.repl===a&&(this.repl=!0),typeof this.sigint===a&&(this.sigint=!0),this.pins=null,this.repl&&(s.ref?(C[this.id]=this,s.ref.on("ready",function(){s.ref.inject(C)}),this.repl=s.ref):(C[this.id]=C.board=this,this.repl=new s(C))),b.io?(this.io=b.io,this.isReady=b.io.isReady,this.transport=this.io.transport||null,this.port=this.io.name,this.pins=p.Pins(this),this.RESOLUTION=Object.assign({ADC:1023,DAC:null,PWM:255},this.io.RESOLUTION||{})):this.port&&b.port?d.connect.call(this,this.port,R):d.detect.call(this,function(L){d.connect.call(this,L,R)}),!b.port&&this.io!==null&&(this.info("Available",i.grey(this.io.name||"unknown")),["connect","ready"].forEach(L=>{this.io.once(L,()=>{L==="ready"&&!this.isConnected?w=!0:R.call(this,null,L,this.io),L==="connect"&&w&&R.call(this,null,"ready",this.io)}),this.io.isReady&&ie.nextTick(()=>this.io.emit(L))})),this.once("ready",()=>{const L=ie.hrtime();this.millis=function(){return ie.hrtime(L)[1]/1e6},["close","disconnect","error","string"].forEach($=>{this.io.on($,_=>this.emit($,_))})}),f.push(this)}}function R(E,b,C){let w=!1;this.io||(this.io=C),b==="error"&&E&&E.message&&(w=!0,this.error("Error",E.message)),b==="connect"&&(this.isConnected=!0,this.port=C.port||C.name,this.info("Connected",i.grey(this.port)),h||(this.timer=setTimeout(()=>{this.error("Device or Firmware Error",`A timeout occurred while connecting to the Board. 

Please check that you've properly flashed the board with the correct firmware.
See: https://github.com/rwaldron/johnny-five/wiki/Getting-Started#trouble-shooting

If connecting to a Leonardo or Leonardo clone, press the 'Reset' button on the board, wait approximately 11 seconds for complete reset, then run your program again.`),this.emit("error",new Error("A timeout occurred while connecting to the Board."))},this.timeout||1e4))),b==="ready"&&(this.timer&&clearTimeout(this.timer),this.isReady=!0,this.pins=p.Pins(this),this.MODES=this.io.MODES,typeof C.debug!==a&&C.debug===!1&&(this.debug=!1),typeof C.repl!==a&&C.repl===!1&&(this.repl=!1),this.repl&&this.repl.initialize(()=>this.emit("ready")),C.name!=="Mock"&&this.sigint&&ie.on("SIGINT",()=>{this.emit("exit"),this.warn("Board","Closing.");const $=setTimeout(()=>{ie.reallyExit()},1e3),_=setInterval(()=>{this.io.pending||(clearInterval(_),clearTimeout($),ie.nextTick(ie.reallyExit))},1)}),this.RESOLUTION=Object.assign({ADC:1023,DAC:null,PWM:255},C.RESOLUTION||{})),this.repl?b==="connect"&&this.emit(b,E):w||this.emit(b,E)}["digitalWrite","analogWrite","analogRead","digitalRead","pinMode","queryPinState","stepperConfig","stepperStep","sendI2CConfig","sendI2CWriteRequest","sendI2CReadRequest","i2cConfig","i2cWrite","i2cWriteReg","i2cRead","i2cReadOnce","pwmWrite","servoConfig","servoWrite","sysexCommand","sysexResponse","serialConfig","serialWrite","serialRead","serialStop","serialClose","serialFlush","serialListen"].forEach(function(E){p.prototype[E]=function(){return this.io[E].apply(this.io,arguments),this}}),p.prototype.snapshot=function(E){const b=this.snapshot.blacklist,C=this.snapshot.special,w=typeof E=="function";return this.register.reduce((L,$)=>(typeof $.components===a&&L.push(Object.getOwnPropertyNames($).reduce((_,D)=>{const N=$[D];if(!b.includes(D)&&typeof N!="function")if(w){const G=E(D,N,$);G!==void 0&&(_[D]=G)}else _[D]=C[D]?C[D](N):N;return _},Object.create(null))),L),[])},p.prototype.serialize=function(E){return JSON.stringify(this.snapshot(E))},p.prototype.snapshot.blacklist=["board","io","_events","_eventsCount","state"],p.prototype.samplingInterval=function(E){if(this.io.setSamplingInterval)this.io.setSamplingInterval(E);else throw new Error("This IO plugin does not implement an interval adjustment method");return this},p.prototype.snapshot.special={mode:function(E){return["INPUT","OUTPUT","ANALOG","PWM","SERVO"][E]||"unknown"}},p.prototype.shiftOut=function(E,b,C,w){arguments.length===3&&(w=C,C=!0);for(let L=0;L<8;L++)this.io.digitalWrite(b,0),C?this.io.digitalWrite(E,!!(w&1<<7-L)|0):this.io.digitalWrite(E,!!(w&1<<L)|0),this.io.digitalWrite(b,1)};const v={specials:["error","fail","warn","info"],colors:{log:"white",error:"red",fail:"inverse",warn:"yellow",info:"cyan"}};p.prototype.log=function(){var E=Array.from(arguments);v.specials.includes(E[0])||E.unshift("log");var b=E.shift(),C=E.shift(),w=E.shift(),L=v.colors[b],$=Date.now(),_={type:b,timestamp:$,class:C,message:"",data:null};typeof E[E.length-1]=="object"&&(_.data=E.pop()),w+=" "+E.join(", "),_.message=w.trim(),this.debug&&console.log([i.grey($),i.magenta(C),i[L](w),E.join(", ")].join(" ")),this.emit(b,_),this.emit("message",_)},v.specials.forEach(function(E){p.prototype[E]=function(){var b=[].slice.call(arguments);b.unshift(E),this.log.apply(this,b)}}),p.prototype.wait=function(E,b){return setTimeout(b,E),this},p.prototype.loop=function(E,b){var C=function(){b(function(){clearInterval(w)})},w=setInterval(C,E);return this},p.map=n.map,p.fmap=n.fmap,p.constrain=n.constrain,p.range=n.range,p.uid=n.uid,p.mount=function(E){var b=typeof E=="number"&&E,C;return E&&E.board?E.board:typeof b=="number"?(C=f[b],C||null):f.length?f[0]:null},p.Component=function(E,b){typeof E===a&&(E={}),typeof b===a&&(b={}),this.board=p.mount(E),this.io=this.board.io,this.id=E.id||p.uid(),this.custom=E.custom||{};var C;if(typeof E.pin=="number"||typeof E.pin=="string")C=[E.pin];else if(Array.isArray(E.pins))C=E.pins.slice();else if(typeof E.pins=="object"&&E.pins!==null){var w=E.pins||E.pin;C=[];for(var L in w)C.push(w[L])}E.controller&&(typeof E.controller=="string"&&(E.controller=E.controller.replace(/-/g,"")),g||(g=kt()),g.hasController(E.controller)&&(b={normalizePin:!1,requestPin:!1})),b=p.Component.initialization(b),b.normalizePin&&(E=p.Pins.normalize(E,this.board)),typeof E.pins!==a&&(this.pins=E.pins||[]),typeof E.pin!==a&&(this.pin=E.pin),typeof E.emitter!==a&&(this.emitter=E.emitter),typeof E.address!==a&&(this.address=E.address),typeof E.controller!==a&&(this.controller=E.controller),typeof E.bus!==a&&(this.bus=E.bus),this.board.register.push(this)},p.Component.initialization=function(E){var b={requestPin:!0,normalizePin:!0};return Object.assign({},b,E)},p.Controller=function(E,b){let C;if(typeof b.controller=="string"?C=E[b.controller]||E[b.controller.toUpperCase()]:C=b.controller||E.DEFAULT||null,C===null)throw new Error("No Valid Controller Found");let w=C.requirements&&C.requirements.value;w&&w.options&&Object.keys(w.options).forEach(function(L){if(typeof b[L]===a||typeof b[L]!==w.options[L].typeof){if(w.options[L].throws)throw new Error(w.options[L].message);this.board.warn(this.constructor.name,w.options[L].message)}},this),Object.defineProperties(this,C)},p.Pins=u,p.Options=function(E){return new o(E)},Object.defineProperty(p,"cache",{get(){return f}}),p.Event=function(E){if(typeof E===a)throw new Error("Board.Event missing Event object");this.type=E.type||"data",this.target=E.target||null,Object.assign(this,E)};class m extends r{constructor(b){let C;if(Array.isArray(b)&&(C=b.slice(),b={ports:C}),!Array.isArray(b)&&typeof b=="object"&&b.ports!==void 0&&(C=b.ports),!Array.isArray(C))throw new Error("Expected ports to be an array");typeof b.debug===a&&(b.debug=!0),typeof b.repl===a&&(b.repl=!0);const w={},L=C.some(({repl:N})=>N===!1),$=C.some(({debug:N})=>N===!1),_=C.map(N=>{let G;return typeof N=="string"?(G={},x.test(N)?G.port=N:G.id=N):G=N,G.repl=!1,new p(G)});super(_),this.debug=b.debug,this.repl=b.repl,$&&(this.debug=!1),L&&(this.repl=!1);const D=this.map((N,G)=>(w[N.id]=N,new Promise(H=>{this[G].on("error",Y=>this.emit("error",Y)),this[G].on("fail",Y=>this.emit("fail",Y)),this[G].on("ready",()=>H(this[G]))})));Promise.all(D).then(()=>{this.each(N=>{N.info("Board ID: ",i.green(N.id))}),this.repl?(this.repl=new s(Object.assign({},w,{board:this})),this.repl.initialize(()=>this.emit("ready",w))):this.emit("ready",w)}).catch(N=>{console.error(i.red(N))})}static get type(){return p}}return r.installMethodForwarding(m.prototype,p.prototype),Object.assign(m.prototype,e.prototype),m.prototype.byId=function(E){for(var b=0;b<this.length;b++)if(this[b].id===E)return this[b];return null},m.prototype.log=p.prototype.log,v.specials.forEach(function(E){m.prototype[E]=function(){var b=[].slice.call(arguments);b.unshift(E),this.log.apply(this,b)}}),h&&(d.purge=function(){d.used.length=0},p.Serial=d,p.purge=function(){p.Pins.normalize.clear(),s.isActive=!1,s.isBlocked=!0,s.ref=null,f.length=0},p.testMode=function(E){if(arguments.length)h=E;else return h}),p.Array=m,p.Collection=m,ks=p,ks}var js,v0;function sc(){if(v0)return js;v0=1;var t={};const e=we(),i=De,{toFixed:r}=Ie,n=new Map,s={MPL3115A2:{requirements:{value:{options:{elevation:{throws:!1,message:"Missing `elevation` option. Without a specified base `elevation`, the altitude measurement will be inaccurate. Use the meters value shown on whatismyelevation.com",typeof:"number"}}}},initialize:{value(u,h){const{Drivers:g}=fe();g.get(this.board,"MPL3115A2",u).on("data",({altitude:f})=>h(f))}},toMeters:{writable:!0,value(u){return r(u,1)}}},MS5611:{initialize:{value(u,h){const{Drivers:g}=fe();g.get(this.board,"MS5611",u).on("data",({altitude:f})=>h(f))}},toMeters:{writable:!0,value(u){return r(u,2)}}},BMP180:{initialize:{value(u,h){const{Drivers:g}=fe();g.get(this.board,"BMP180",u).on("data",({altitude:f})=>h(f))}},toMeters:{writable:!0,value(u){return r(u,2)}}},BMP280:{initialize:{value(u,h){const{Drivers:g}=fe();g.get(this.board,"BMP280",u).on("data",({altitude:f})=>h(f))}},toMeters:{writable:!0,value(u){return r(u,3)}}},BME280:{initialize:{value(u,h){const{Drivers:g}=fe();g.get(this.board,"BME280",u).on("data",({altitude:f})=>h(f))}},toMeters:{writable:!0,value(u){return r(u,3)}}}};s.BMP085=s["BMP-085"]=s.BMP180;class o extends i{constructor(h){super(),e.Component.call(this,h=e.Options(h)),e.Controller.call(this,s,h);const g={},f=h.freq||25;let x=null,a=null;this.toMeters||(this.toMeters=h.toMeters||(p=>p)),n.set(this,g);const d={meters:{get(){return this.toMeters(a)}},feet:{get(){return r(this.meters*3.28084,2)}}};d.m=d.meters,d.ft=d.feet,Object.defineProperties(this,d),typeof this.initialize=="function"&&this.initialize(h,p=>a=p),setInterval(()=>{if(a==null)return;const p={};p.m=p.meters=this.meters,p.ft=p.feet=this.feet,this.emit("data",p),this.meters!==x&&(x=this.meters,this.emit("change",p))},f)}}return t.IS_TEST_MODE&&(o.Controllers=s,o.purge=function(){n.clear()}),js=o,js}var zs,m0;function oc(){if(m0)return zs;m0=1;var t={};const e=we(),i=De,{toFixed:r}=Ie,n={MPL115A2:{initialize:{value(o,u){const{Drivers:h}=fe();h.get(this.board,"MPL115A2",o).on("data",({pressure:g})=>u(g))}},toPressure:{value(o){return r(65/1023*o+50,2)}}},MPL3115A2:{initialize:{value(o,u){const{Drivers:h}=fe();h.get(this.board,"MPL3115A2",o).on("data",({pressure:g})=>u(g))}},toPressure:{value(o){const h=o/4/3377*3.39;return r(h,4)}}},BMP180:{initialize:{value(o,u){const{Drivers:h}=fe();h.get(this.board,"BMP180",o).on("data",({pressure:g})=>u(g))}},toPressure:{value(o){return r(o/1e3,3)}}},BMP280:{initialize:{value(o,u){const{Drivers:h}=fe();h.get(this.board,"BMP280",o).on("data",({pressure:g})=>u(g))}},toPressure:{value(o){return r(o/1e3,5)}}},BME280:{initialize:{value(o,u){const{Drivers:h}=fe();h.get(this.board,"BME280",o).on("data",({pressure:g})=>u(g))}},toPressure:{value(o){return r(o/1e3,5)}}},MS5611:{initialize:{value(o,u){const{Drivers:h}=fe();h.get(this.board,"MS5611",o).on("data",({pressure:g})=>u(g))}},toPressure:{value(o){return r(o/1e3,4)}}}};n.BMP085=n.BMP180;class s extends i{constructor(u){super(),e.Component.call(this,u=e.Options(u)),e.Controller.call(this,n,u);const h=u.freq||25;let g=null,f=null;this.toPressure||(this.toPressure=u.toPressure||(x=>x)),typeof this.initialize=="function"&&this.initialize(u,x=>{f=x}),Object.defineProperties(this,{pressure:{get(){return this.toPressure(f)}}}),setInterval(()=>{if(f===null)return;const x={pressure:this.pressure};this.emit("data",x),this.pressure!==g&&(g=this.pressure,this.emit("change",x))},h)}}return t.IS_TEST_MODE&&(s.Controllers=n,s.purge=function(){}),zs=s,zs}var qs,y0;function ac(){if(y0)return qs;y0=1;var t={};const e=we(),i=De,r=Ie,n=r.sum,s=r.toFixed,o=new Map,u=["x","y","z"],h={ANALOG:{initialize:{value(f,x){const a=f.pins||[];let d,p;const R=o.get(this),v={};if(f.sensitivity===void 0)throw new Error("Expected a Sensitivity");d=f.sensitivity,p=f.resolution||4.88,R.K=p/d,a.forEach(function(m,E){this.io.pinMode(m,this.io.MODES.ANALOG),this.io.analogRead(m,b=>{const C=u[E];v[C]=b,x(v)})},this)}},toNormal:{value(f){return f>>2}},toDegreesPerSecond:{value(f,x){const a=this.toNormal(f),d=this.toNormal(x),p=o.get(this);return(a-d)*p.K|0}}},MPU6050:{initialize:{value(f,x){const a=fe(),d=o.get(this),p=a.Drivers.get(this.board,"MPU6050",f);d.sensitivity=f.sensitivity||131,p.on("data",({gyro:R})=>{x(R)})}},toNormal:{value(f){return(f>>11)+127}},toDegreesPerSecond:{value(f,x){const a=o.get(this);return s((f-x)/a.sensitivity,4)}}},BNO055:{initialize:{value(f,x){const a=fe(),d=o.get(this),p=a.Drivers.get(this.board,"BNO055",f);d.sensitivity=16,p.on("data",({gyro:R})=>{x(R)})}},toNormal:{value(f){return f}},toDegreesPerSecond:{value(f){const x=o.get(this);return s(f/x.sensitivity,4)}}}};h.DEFAULT=h.ANALOG;class g extends i{constructor(x){super();let a=!1;const d=100,p={x:{angle:0,value:0,previous:0,calibration:[],stash:[0,0,0,0,0],center:0,hasValue:!1},y:{angle:0,value:0,previous:0,calibration:[],stash:[0,0,0,0,0],center:0,hasValue:!1},z:{angle:0,value:0,previous:0,calibration:[],stash:[0,0,0,0,0],center:0,hasValue:!1}};e.Component.call(this,x=e.Options(x)),e.Controller.call(this,h,x),this.toNormal||(this.toNormal=x.toNormal||(R=>R)),this.toDegreesPerSecond||(this.toDegreesPerSecond=x.toDegreesPerSecond||(R=>R)),o.set(this,p),typeof this.initialize=="function"&&this.initialize(x,R=>{let v=!1;Object.keys(R).forEach(m=>{const E=R[m],b=p[m];b.previous=b.value,b.stash.shift(),b.stash.push(E),b.hasValue=!0,b.value=n(b.stash)/5|0,!a&&p.x.calibration.length===d&&p.y.calibration.length===d&&(this.z===void 0||p.z.calibration.length===d)?(a=!0,p.x.center=n(p.x.calibration)/d|0,p.y.center=n(p.y.calibration)/d|0,p.z.center=n(p.z.calibration)/d|0,p.x.calibration.length=0,p.y.calibration.length=0,p.z.calibration.length=0):b.calibration.length<d&&b.calibration.push(E),b.previous!==b.value&&(v=!0)}),a&&(p.x.angle+=this.rate.x/100,p.y.angle+=this.rate.y/100,p.z.angle+=this.rate.z/100,this.emit("data",{x:this.x,y:this.y,z:this.z}),v&&this.emit("change",{x:this.x,y:this.y,z:this.z}))}),Object.defineProperties(this,{isCalibrated:{get(){return a},set(R){typeof R=="boolean"&&(a=R)}},pitch:{get(){return{rate:s(this.rate.y,2),angle:s(p.y.angle,2)}}},roll:{get(){return{rate:s(this.rate.x,2),angle:s(p.x.angle,2)}}},yaw:{get(){return{rate:this.z!==void 0?s(this.rate.z,2):0,angle:this.z!==void 0?s(p.z.angle,2):0}}},x:{get(){return s(this.toNormal(p.x.value),4)}},y:{get(){return s(this.toNormal(p.y.value),4)}},z:{get(){return p.z.hasValue?s(this.toNormal(p.z.value),4):void 0}},rate:{get(){const R=this.toDegreesPerSecond(p.x.value,p.x.center),v=this.toDegreesPerSecond(p.y.value,p.y.center),m=p.z.hasValue?this.toDegreesPerSecond(p.z.value,p.z.center):0;return{x:R,y:v,z:m}}}})}recalibrate(){this.isCalibrated=!1}}return Object.defineProperties(g,{TK_4X:{value:.67},TK_1X:{value:.167}}),t.IS_TEST_MODE&&(g.Controllers=h,g.purge=()=>{o.clear()}),qs=g,qs}var Vs,b0;function lc(){if(b0)return Vs;b0=1;var t={};const e=we(),i=De,r=Ie,n=new Map,{toFixed:s,POW_2_14:o,POW_2_16:u}=r,h=!0,g={SHT31D:{initialize:{value(x,a){const{Drivers:d}=fe();d.get(this.board,"SHT31D",x).on("data",({humidity:p})=>a(p))}},toRelativeHumidity:{writable:h,value(x){return s(100*(x/(u-1)),2)}}},HTU21D:{initialize:{value(x,a){const{Drivers:d}=fe();d.get(this.board,"HTU21D",x).on("data",({humidity:p})=>a(p))}},toRelativeHumidity:{writable:h,value(x){return s(-6+125*(x/u),2)}}},HIH6130:{initialize:{value(x,a){const{Drivers:d}=fe();d.get(this.board,"HIH6130",x).on("data",({humidity:p})=>a(p))}},toRelativeHumidity:{writable:h,value(x){return s(x/(o-1)*100,2)}}},DHT_I2C_NANO_BACKPACK:{initialize:{value(x,a){const{Drivers:d}=fe();d.get(this.board,"DHT_I2C_NANO_BACKPACK",x).on("data",({humidity:p})=>a(p))}},toRelativeHumidity:{writable:h,value(x){return s(x/100,1)}}},TH02:{initialize:{value(x,a){const{Drivers:d}=fe();d.get(this.board,"TH02",x).on("data",({humidity:p})=>a(p))}},toRelativeHumidity:{writable:h,value(x){return x>100&&(x=0),s(x||0,2)}}},SI7020:{initialize:{value(x,a){const{Drivers:d}=fe();d.get(this.board,"SI7020",x).on("data",({humidity:p})=>a(p))}},toRelativeHumidity:{writable:h,value(x){return s(125*x/u-6,2)}}},BME280:{initialize:{value(x,a){const{Drivers:d}=fe();d.get(this.board,"BME280",x).on("data",({humidity:p})=>a(p))}},toRelativeHumidity:{writable:h,value(x){return s(x/1024,3)}}}};g.DHT11_I2C_NANO_BACKPACK=g.DHT_I2C_NANO_BACKPACK,g.DHT21_I2C_NANO_BACKPACK=g.DHT_I2C_NANO_BACKPACK,g.DHT22_I2C_NANO_BACKPACK=g.DHT_I2C_NANO_BACKPACK,g.SI7021=g.SI7020;class f extends i{constructor(a){super();const d=a.freq||25;let p=null,R=null;e.Component.call(this,a=e.Options(a)),e.Controller.call(this,g,a),n.set(this,{}),this.toRelativeHumidity||(this.toRelativeHumidity=a.toRelativeHumidity||(m=>m));const v={relativeHumidity:{get(){return this.toRelativeHumidity(R)}}};v.RH=v.relativeHumidity,Object.defineProperties(this,v),typeof this.initialize=="function"&&this.initialize(a,m=>{R=m}),setInterval(()=>{if(R==null||Number.isNaN(this.relativeHumidity))return;const m={};m.RH=m.relativeHumidity=this.relativeHumidity,this.emit("data",m),this.relativeHumidity!==p&&(p=this.relativeHumidity,this.emit("change",m))},d)}}return t.IS_TEST_MODE&&(f.Controllers=g,f.purge=()=>{n.clear()}),Vs=f,Vs}var Ks,R0;function uc(){if(R0)return Ks;R0=1;var t={};const e=we(),i=De,{int16:r,RAD_TO_DEG:n,TAU:s}=Ie,o=new Map,u={HMC5883L:{REGISTER:{value:{CRA:0,CRB:1,MODE:2,READ:3}},initialize:{value(f,x){const a=o.get(this),d=f.address||30,p=6;a.scale=1,Object.assign(a,new h.Scale(f.gauss||.88)),f.address=d,this.io.i2cConfig(f),this.io.i2cWrite(d,this.REGISTER.CRA,112),this.io.i2cWrite(d,this.REGISTER.CRB,64),this.io.i2cWrite(d,this.REGISTER.MODE,0),this.io.i2cRead(d,this.REGISTER.READ,p,R=>{x({x:r(R[0],R[1]),y:r(R[4],R[5]),z:r(R[2],R[3])})})}},toScaledHeading:{value({x:f,y:x}){const a=o.get(this);return g(f*a.scale,x*a.scale)}}},HMC6352:{REGISTER:{value:{READ:65}},initialize:{value(f,x){const a=o.get(this),d=f.address||33,p=2;a.scale=1,f.delay=10,f.address=d,this.io.i2cConfig(f),this.io.i2cWrite(d,this.REGISTER.READ),this.io.i2cRead(d,this.REGISTER.READ,p,R=>{x({x:((R[0]<<8)+R[1])/10|0,y:null,z:null})})}},toScaledHeading:{value({x:f}){const x=o.get(this);return f*x.scale}}},BNO055:{initialize:{value(f,x){const d=fe().Drivers.get(this.board,"BNO055",f),p=o.get(this);p.sensitivity=16,d.on("data",({magnetometer:R})=>{x(R)})}},toScaledHeading:{value(f){const x=o.get(this),a=f.x/x.sensitivity,d=f.y/x.sensitivity;return g(a,d)}}},MAG3110:{REGISTER:{value:{STATUS:0,READ:1,OFFSETS:9,CTRL_REG1:16,CTRL_REG2:17}},initialize:{value(f,x){const a=o.get(this),d=14;let p=!1,R;a.isCalibrated=!1,a.isPreCalibrated=!1,a.hasEmittedCalibration=!1,a.measurements=20,a.offsets={x:0,y:0,z:0},a.accum={x:{offset:null,high:0,low:0},y:{offset:null,high:0,low:0},z:{offset:null,high:0,low:0}},f.delay=2,f.address=d,f.offsets&&(a.isCalibrated=!0,a.isPreCalibrated=!0,Array.isArray(f.offsets)&&(R=f.offsets.slice(),f.offsets={x:R[0],y:R[1],z:R[2]}),a.accum.x.low=f.offsets.x[0],a.accum.x.high=f.offsets.x[1],a.accum.x.offset=(a.accum.x.low+a.accum.x.high)/2,a.accum.y.low=f.offsets.y[0],a.accum.y.high=f.offsets.y[1],a.accum.y.offset=(a.accum.y.low+a.accum.y.high)/2,a.accum.z.low=f.offsets.z[0],a.accum.z.high=f.offsets.z[1],a.accum.z.offset=(a.accum.z.low+a.accum.z.high)/2),this.io.i2cConfig(f),this.io.i2cWrite(d,this.REGISTER.CTRL_REG2,128),this.io.i2cWrite(d,this.REGISTER.CTRL_REG1,1);const v={x:0,y:0,z:0},m=()=>{this.io.i2cReadOnce(d,this.REGISTER.STATUS,1,E=>{!p&&(E[0]===15||E[0]===255)?(p=!0,this.io.i2cReadOnce(d,this.REGISTER.READ,6,b=>{let C=0;p=!1,v.x=r(b[0],b[1]),v.y=r(b[2],b[3]),v.z=r(b[4],b[5]),a.isCalibrated||(a.accum.x.offset===null&&(a.accum.x.offset=v.x,a.accum.x.low=v.x,a.accum.x.high=v.x),a.accum.y.offset===null&&(a.accum.y.offset=v.y,a.accum.y.low=v.y,a.accum.y.high=v.y),a.accum.x.low=Math.min(a.accum.x.low,v.x),a.accum.x.high=Math.max(a.accum.x.high,v.x),a.accum.x.offset=Math.trunc((a.accum.x.low+a.accum.x.high)/2),a.accum.y.low=Math.min(a.accum.y.low,v.y),a.accum.y.high=Math.max(a.accum.y.high,v.y),a.accum.y.offset=Math.trunc((a.accum.y.low+a.accum.y.high)/2),a.accum.z.low=Math.min(a.accum.z.low,v.z),a.accum.z.high=Math.max(a.accum.z.high,v.z),a.accum.z.offset=Math.trunc((a.accum.z.low+a.accum.z.high)/2),--a.measurements,a.measurements||(a.isCalibrated=!0)),a.isCalibrated&&(a.hasEmittedCalibration||(a.hasEmittedCalibration=!0,a.offsets.x=a.accum.x.offset,a.offsets.y=a.accum.y.offset,a.offsets.z=a.accum.z.offset,this.io.i2cWrite(d,this.REGISTER.OFFSETS,[a.offsets.x>>7,a.offsets.x<<1&255,a.offsets.y>>7,a.offsets.y<<1&255,a.offsets.z>>7,a.offsets.z<<1&255]),this.emit("calibrated",{x:[a.accum.x.low,a.accum.x.high],y:[a.accum.y.low,a.accum.y.high],z:[a.accum.z.low,a.accum.z.high]})),C=Math.floor(1e3/80),x(v)),setTimeout(m,C)})):m()})};m()}},calibrate:{value(f){const x=o.get(this);x.isCalibrated=!1,x.measurements=f}},toScaledHeading:{value({y:f,x}){const a=o.get(this),d={x:1/(a.accum.x.high-a.accum.x.low),y:1/(a.accum.y.high-a.accum.y.low)};let p=Math.atan2(-f*d.y,x*d.x);return p<0&&(p+=s),Math.trunc(p*n)}}},LSM303C:{initialize:{value(f,x){fe().Drivers.get(this.board,"LSM303C",f).on("data",({magnetometer:p})=>{x(p)})}},toScaledHeading:{value({x:f,y:x}){return g(f,x)}}}};class h extends i{constructor(x){super(),e.Component.call(this,x=e.Options(x));const a=x.freq||25;let d={x:null,y:null,z:null};const p={x:0,y:0,z:0,scale:0,register:0,heading:0};e.Controller.call(this,u,x),this.toScaledHeading||(this.toScaledHeading=x.toScaledHeading||(R=>R)),o.set(this,p),typeof this.initialize=="function"&&this.initialize(x,R=>d=R),setInterval(()=>{if(d.x===null)return;let R=!1;p.x=d.x,p.y=d.y,p.z=d.z;const v=this.heading;v!==p.heading&&(p.heading=v,R=!0),this.emit("data",{heading:v}),R&&this.emit("change",{heading:v})},a),Object.defineProperties(this,{bearing:{get(){const R=h.Points.length,v=this.heading;let m;for(let E=0;E<R;E++)if(m=h.Points[E],v>=m.low&&v<=m.high)return{name:m.name,abbr:m.abbr,low:m.low,high:m.high,heading:v}}},raw:{get(){return{x:d.x,y:d.y,z:d.z}}},heading:{get(){return this.toScaledHeading(d)}}})}}h.Scale=class{constructor(f){f===.88?(this.register=0,this.scale=.73):f===1.3?(this.register=1,this.scale=.92):f===1.9?(this.register=2,this.scale=1.22):f===2.5?(this.register=3,this.scale=1.52):f===4?(this.register=4,this.scale=2.27):f===4.7?(this.register=5,this.scale=2.56):f===5.6?(this.register=6,this.scale=3.03):f===8.1?(this.register=7,this.scale=4.35):(this.register=0,this.scale=1),this.register=this.register<<5}};function g(f,x){let a=Math.atan2(x,f);return a<0&&(a+=s),a>s&&(a-=s),a*n}return h.Points=[{name:"North",abbr:"N",low:354.38,high:360},{name:"North",abbr:"N",low:0,high:5.62},{name:"North by East",abbr:"NbE",low:5.63,high:16.87},{name:"North-NorthEast",abbr:"NNE",low:16.88,high:28.12},{name:"NorthEast by North",abbr:"NEbN",low:28.13,high:39.37},{name:"NorthEast",abbr:"NE",low:39.38,high:50.62},{name:"NorthEast by East",abbr:"NEbE",low:50.63,high:61.87},{name:"East-NorthEast",abbr:"ENE",low:61.88,high:73.12},{name:"East by North",abbr:"EbN",low:73.13,high:84.37},{name:"East",abbr:"E",low:84.38,high:95.62},{name:"East by South",abbr:"EbS",low:95.63,high:106.87},{name:"East-SouthEast",abbr:"ESE",low:106.88,high:118.12},{name:"SouthEast by East",abbr:"SEbE",low:118.13,high:129.37},{name:"SouthEast",abbr:"SE",low:129.38,high:140.62},{name:"SouthEast by South",abbr:"SEbS",low:140.63,high:151.87},{name:"South-SouthEast",abbr:"SSE",low:151.88,high:163.12},{name:"South by East",abbr:"SbE",low:163.13,high:174.37},{name:"South",abbr:"S",low:174.38,high:185.62},{name:"South by West",abbr:"SbW",low:185.63,high:196.87},{name:"South-SouthWest",abbr:"SSW",low:196.88,high:208.12},{name:"SouthWest by South",abbr:"SWbS",low:208.13,high:219.37},{name:"SouthWest",abbr:"SW",low:219.38,high:230.62},{name:"SouthWest by West",abbr:"SWbW",low:230.63,high:241.87},{name:"West-SouthWest",abbr:"WSW",low:241.88,high:253.12},{name:"West by South",abbr:"WbS",low:253.13,high:264.37},{name:"West",abbr:"W",low:264.38,high:275.62},{name:"West by North",abbr:"WbN",low:275.63,high:286.87},{name:"West-NorthWest",abbr:"WNW",low:286.88,high:298.12},{name:"NorthWest by West",abbr:"NWbW",low:298.13,high:309.37},{name:"NorthWest",abbr:"NW",low:309.38,high:320.62},{name:"NorthWest by North",abbr:"NWbN",low:320.63,high:331.87},{name:"North-NorthWest",abbr:"NNW",low:331.88,high:343.12},{name:"North by West",abbr:"NbW",low:343.13,high:354.37}],Object.freeze(h.Points),t.IS_TEST_MODE&&(h.Controllers=u,h.purge=()=>{o.clear()}),Ks=h,Ks}var Ys,S0;function cc(){if(S0)return Ys;S0=1;var t={};const e=we(),i=De,r=new Map,n={BNO055:{initialize:{value(o,u){fe().Drivers.get(this.board,"BNO055",o).on("data",f=>{u(f)})}},toScaledEuler:{value({euler:o}){return{heading:o.heading/16,roll:o.roll/16,pitch:o.pitch/16}}},toScaledQuarternion:{value({quarternion:o}){return{w:o.w*(1/16384),x:o.x*(1/16384),y:o.y*(1/16384),z:o.z*(1/16384)}}},calibration:{get(){return r.get(this).calibration}},isCalibrated:{get(){return(this.calibration>>6&3)===3}}}};class s extends i{constructor(u){super(),e.Component.call(this,u=e.Options(u)),e.Controller.call(this,n,u);const h=u.freq||25,g={euler:{heading:0,roll:0,pitch:0},quarternion:{w:0,x:0,y:0,z:0},calibration:0};let f=null;r.set(this,g),this.toScaledQuarternion||(this.toScaledQuarternion=u.toScaledQuarternion||(x=>x)),this.toScaledEuler||(this.toScaledEuler=u.toScaledEuler||(x=>x)),typeof this.initialize=="function"&&this.initialize(u,x=>f=x),setInterval(()=>{if(f===null)return;let x=!1,a=!1;["heading","roll","pitch"].forEach(p=>{g.euler[p]!==f.orientation.euler[p]&&(x=!0),g.euler[p]=f.orientation.euler[p]}),["w","x","y","z"].forEach(p=>{g.quarternion[p]!==f.orientation.quarternion[p]&&(x=!0),g.quarternion[p]=f.orientation.quarternion[p]}),f.calibration&&(g.calibration!==f.calibration&&(a=!0),g.calibration=f.calibration);const d={euler:this.euler,quarternion:this.quarternion,calibration:this.calibration};this.emit("data",d),x&&this.emit("change",d),a&&this.emit("calibration",this.calibration)},h)}get euler(){return this.toScaledEuler(r.get(this))}get quarternion(){return this.toScaledQuarternion(r.get(this))}}return t.IS_TEST_MODE&&(s.Controllers=n,s.purge=()=>{r.clear()}),Ys=s,Ys}const r1=De;let n1=class extends r1{constructor(){super()}within(e,i,r){let n;if(typeof e=="number"&&(n=e,e=[0,n]),!Array.isArray(e))throw new Error("within expected a range array");return typeof i=="function"&&(r=i,i="value"),typeof this[i]>"u"?this:(this.on("data",()=>{const s=this[i];s>=e[0]&&s<=e[1]&&r.call(this,null,s)}),this)}};var en=n1,Xs,A0;function hc(){if(A0)return Xs;A0=1;var t={};const e=we(),i=Et,r=en,{toFixed:n,POW_2_16:s}=Ie,{log:o,round:u,trunc:h}=Math,g=273.15;function f(v,m){const E=v.pin;this.io.pinMode(E,this.io.MODES.ANALOG),this.io.analogRead(E,b=>{m.call(this,b)})}const x=new Map,a={MAX31850K:{initialize:{value(v,m){const E={TEMPERATURE_FAMILY:59,CONVERT_TEMPERATURE_COMMAND:68,READ_SCRATCHPAD_COMMAND:190,READ_COUNT:9},b=m.pin,C=m.freq||100,w=L=>{let $=0;for(let _=6;_>0;_--)$=$*256+L[_];return $};v.io.sendOneWireConfig(b,!0),v.io.sendOneWireSearch(b,(L,$)=>{if(L){this.emit("error",L);return}if(this.devices=$.filter(N=>N[0]===E.TEMPERATURE_FAMILY,this),$.length===0){this.emit("error",new Error("FAILED TO FIND TEMPERATURE DEVICE"));return}this.devices.forEach(N=>{this.emit("initialized",w(N))});let _=()=>this.addresses?this.devices.filter(function(N){const G=w(N);return this.addresses.includes(G)},this):[this.devices[0]],D=()=>{let N,G=_(),H=_();H.forEach(J=>{v.io.sendOneWireReset(b),v.io.sendOneWireWrite(b,J,E.CONVERT_TEMPERATURE_COMMAND)});let Y=J=>{let ae;if(G.length===0)return J();ae=G.pop(),v.io.sendOneWireReset(b),v.io.sendOneWireWriteAndRead(b,ae,E.READ_SCRATCHPAD_COMMAND,E.READ_COUNT,(K,q)=>{if(!q[0]&&(G.push(ae),q[1]!==0))return J();Y(J)})},z=()=>{let J;if(H.length===0){setTimeout(D,C);return}J=H.pop(),v.io.sendOneWireReset(b),v.io.sendOneWireWriteAndRead(b,J,E.READ_SCRATCHPAD_COMMAND,E.READ_COUNT,(ae,K)=>{if(ae){this.emit("error",ae);return}N=K[1]<<8|K[0],this.emit("data",w(J),N),z()})};Y(z)};D()})}},register:{value(v){this.addresses||(this.addresses=[]),this.addresses.push(v)}}},DS18B20:{initialize:{value(v,m){const E={TEMPERATURE_FAMILY:40,CONVERT_TEMPERATURE_COMMAND:68,READ_SCRATCHPAD_COMMAND:190,READ_COUNT:2},b=m.pin,C=m.freq||100;let w,L,$;w=_=>{let D,N=0;for(D=6;D>0;D--)N=N*256+_[D];return N},v.io.sendOneWireConfig(b,!0),v.io.sendOneWireSearch(b,(_,D)=>{if(_){this.emit("error",_);return}if(this.devices=D.filter(N=>N[0]===E.TEMPERATURE_FAMILY,this),D.length===0){this.emit("error",new Error("FAILED TO FIND TEMPERATURE DEVICE"));return}this.devices.forEach(N=>{this.emit("initialized",w(N))}),L=()=>{let N,G;this.addresses?N=this.devices.filter(function(H){const Y=w(H);return this.addresses.includes(Y)},this):N=[this.devices[0]],N.forEach(H=>{v.io.sendOneWireReset(b),v.io.sendOneWireWrite(b,H,E.CONVERT_TEMPERATURE_COMMAND)}),v.io.sendOneWireDelay(b,1),$=()=>{let H;if(N.length===0){setTimeout(L,C);return}H=N.pop(),v.io.sendOneWireReset(b),v.io.sendOneWireWriteAndRead(b,H,E.READ_SCRATCHPAD_COMMAND,E.READ_COUNT,(Y,z)=>{if(Y){this.emit("error",Y);return}G=z[1]<<8|z[0],this.emit("data",w(H),G),$()})},$()},L()})}},register:{value(v){this.addresses||(this.addresses=[]),this.addresses.push(v)}}}};a.get=(v,m,E)=>{let b,C;x.has(v)||x.set(v,{}),b=x.get(v);const w=`${m}_${E.pin}`;return b[w]||(C=new i,Object.defineProperties(C,a[m]),C.initialize(v,E),b[w]=C),b[w]},a.clear=()=>{x.clear()};const d={ANALOG:{initialize:{value:f}},LM35:{initialize:{value:f},toCelsius:{value(v){const m=this.aref*1e3*v/1023;return u(m/10)}}},LM335:{initialize:{value:f},toCelsius:{value(v){const m=this.aref*1e3*v/1023;return u(m/10-g)}}},TMP36:{initialize:{value:f},toCelsius:{value(v){const m=this.aref*1e3*v/1023;return u(m/10-50)}}},TMP102:{ADDRESSES:{value:[72]},initialize:{value(v,m){const{Drivers:E}=fe(),b=E.addressResolver(this,v);this.io.i2cConfig(v),this.io.i2cRead(b,0,2,C=>{let w=(C[0]<<8|C[1])>>4;w&2048&&(w|=63488),w=w>>15?((w^65535)+1)*-1:w,m(w)})}},toCelsius:{value(v){return n(v/16,1)}}},MAX31850K:{initialize:{value(v,m){const E=p.get(this),b=v.address,C=a.get(this.board,"MAX31850K",v);b?(E.address=b,C.register(b)):(C.addressless&&this.emit("error","You cannot have more than one MAX31850K without an address"),C.addressless=!0),C.once("initialized",w=>{E.address||(E.address=w)}),C.on("data",(w,L)=>{(!b||w===b)&&m(L)})}},toCelsius:{value(v){return n(v/16,2)}},address:{get(){return p.get(this).address||0}}},DS18B20:{initialize:{value(v,m){const E=p.get(this),b=v.address,C=a.get(this.board,"DS18B20",v);b?(E.address=b,C.register(b)):(C.addressless&&this.emit("error","You cannot have more than one DS18B20 without an address"),C.addressless=!0),C.once("initialized",w=>{E.address||(E.address=w)}),C.on("data",(w,L)=>{(!b||w===b)&&m(L)})}},toCelsius:{value(v){return n(v/16,4)}},address:{get(){return p.get(this).address||0}}},SHT31D:{initialize:{value(v,m){const{Drivers:E}=fe();E.get(this.board,"SHT31D",v).on("data",({temperature:b})=>m(b))}},toCelsius:{value(v){return n(-45+175*(v/(s-1)),3)}}},HTU21D:{initialize:{value(v,m){const{Drivers:E}=fe();E.get(this.board,"HTU21D",v).on("data",({temperature:b})=>m(b))}},toCelsius:{value(v){return n(-46.85+175.72*(v/s),2)}}},HIH6130:{initialize:{value(v,m){const{Drivers:E}=fe();E.get(this.board,"HIH6130",v).on("data",({temperature:b})=>m(b))}},toCelsius:{value(v){return u(v/1e3)}}},DHT_I2C_NANO_BACKPACK:{initialize:{value(v,m){const{Drivers:E}=fe();E.get(this.board,"DHT_I2C_NANO_BACKPACK",v).on("data",({temperature:b})=>m(b))}},toCelsius:{value(v){return u(v/100)}}},TH02:{initialize:{value(v,m){const{Drivers:E}=fe();E.get(this.board,"TH02",v).on("data",({temperature:b})=>m(b))}},toCelsius:{value(v){return n(v,1)}}},MPU6050:{initialize:{value(v,m){const{Drivers:E}=fe();E.get(this.board,"MPU6050",v).on("data",({temperature:b})=>m(b))}},toCelsius:{value(v){return u(v/340+36.53)}}},BNO055:{initialize:{value(v,m){const{Drivers:E}=fe();E.get(this.board,"BNO055",v).on("data",({temperature:b})=>m(b))}},toCelsius:{value(v){return h(v)}}},MPL115A2:{initialize:{value(v,m){const{Drivers:E}=fe();E.get(this.board,"MPL115A2",v).on("data",({temperature:b})=>m(b))}},toCelsius:{value(v){return h((v-498)/-5.35+25)}}},MPL3115A2:{initialize:{value(v,m){const{Drivers:E}=fe();E.get(this.board,"MPL3115A2",v).on("data",({temperature:b})=>m(b))}},toCelsius:{value(v){return u(v/16)}}},MS5611:{initialize:{value(v,m){const{Drivers:E}=fe();E.get(this.board,"MS5611",v).on("data",({temperature:b})=>m(b))}},toCelsius:{value(v){return n(v,2)}}},GROVE:{initialize:{value:f},toCelsius:{value(v){const w=(1023-v)*1e4/v,L=1/(o(w/1e4)/3975+1/298.15)-g;return u(L)}}},TINKERKIT:{initialize:{value:f},toCelsius:{value(v){const w=1e4*(1023/v-1),L=3950/o(w*120.6685);return u(L-g)}}},BMP180:{initialize:{value(v,m){const{Drivers:E}=fe();E.get(this.board,"BMP180",v).on("data",({temperature:b})=>m(b))}},toCelsius:{value(v){return n(v,1)}}},BMP280:{initialize:{value(v,m){const{Drivers:E}=fe();E.get(this.board,"BMP280",v).on("data",({temperature:b})=>m(b))}},toCelsius:{value(v){return n(v,2)}}},BME280:{initialize:{value(v,m){const{Drivers:E}=fe();E.get(this.board,"BME280",v).on("data",({temperature:b})=>m(b))}},toCelsius:{value(v){return n(v,2)}}},SI7020:{initialize:{value(v,m){const{Drivers:E}=fe();E.get(this.board,"SI7020",v).on("data",({temperature:b})=>m(b))}},toCelsius:{value(v){return n(175.72*v/65536-46.85,1)}}},MCP9808:{ADDRESSES:{value:[24]},initialize:{value(v,m){const{Drivers:E}=fe(),b=E.addressResolver(this,v);this.io.i2cConfig(v),this.io.i2cRead(b,5,2,C=>{let w=((C[0]<<8|C[1])&4095)/16;w&4096&&(w-=256),m(w)})}},toCelsius:{value(v){return n(v,2)}}},LSM303C:{initialize:{value(v,m){const{Drivers:E}=fe();E.get(this.board,"LSM303C",v).on("data",({temperature:b})=>m(b))}},toCelsius:{value(v){return n(v/8+25,1)}}}};d.BMP085=d.BMP180,d.GY521=d.MPU6050,d.SI7021=d.SI7020,d.DHT11_I2C_NANO_BACKPACK=d.DHT_I2C_NANO_BACKPACK,d.DHT21_I2C_NANO_BACKPACK=d.DHT_I2C_NANO_BACKPACK,d.DHT22_I2C_NANO_BACKPACK=d.DHT_I2C_NANO_BACKPACK,d.DEFAULT=d.ANALOG;var p=new Map;class R extends r{constructor(m){super();let E=null,b=null;e.Component.call(this,m=e.Options(m)),e.Controller.call(this,d,m);const C={enabled:typeof m.enabled>"u"?!0:m.enabled,intervalId:null,freq:m.freq||25,previousFreq:m.freq||25};p.set(this,C),this.aref=m.aref||this.io.aref||5,this.toCelsius||(this.toCelsius=m.toCelsius||($=>$));const w=()=>{if(b==null)return;const $={};$.C=$.celsius=this.celsius,$.F=$.fahrenheit=this.fahrenheit,$.K=$.kelvin=this.kelvin,this.emit("data",$),this.celsius!==E&&(E=this.celsius,this.emit("change",$))},L={celsius:{get(){return this.toCelsius(b)}},fahrenheit:{get(){return n(this.celsius*9/5+32,2)}},kelvin:{get(){return n(this.celsius+g,2)}},freq:{get(){return C.freq},set($){C.freq=$,C.intervalId&&clearInterval(C.intervalId),C.freq!==null&&(C.intervalId=setInterval(w,$))}}};L.C=L.celsius,L.F=L.fahrenheit,L.K=L.kelvin,Object.defineProperties(this,L),typeof this.initialize=="function"&&this.initialize(m,$=>b=$),C.enabled&&(this.freq=C.freq)}enable(){const m=p.get(this);return m.enabled||(this.freq=m.freq||m.previousFreq),this}disable(){const m=p.get(this);return m.enabled&&(m.enabled=!1,m.previousFreq=m.freq,this.freq=null),this}}return R.Drivers=a,t.IS_TEST_MODE&&(R.Controllers=d,R.purge=()=>{p.clear()}),Xs=R,Xs}var Qs,T0;function fe(){if(T0)return Qs;T0=1;var t={};const e=we(),i=De,r=Ie,n=new Map,s=new Map,{int16:o,uint16:u,uint24:h,s32:g,u32:f}=r,x="accelerometer",a="altimeter",d="barometer",p="gyro",R="hygrometer",v="magnetometer",m="orientation",E="thermometer";function b(_,D){const N=n.get(this),G=Object.create(null);for(const H of this.components)N[H]=new b[H](Object.assign({controller:D.controller||_,freq:D.freq,board:this.board},D)),G[H]={get(){return N[H]}},C[H]&&(G[C[H]]=G[H]);Object.defineProperties(this,G)}b.accelerometer=fc(),b.altimeter=sc(),b.barometer=oc(),b.gyro=ac(),b.hygrometer=lc(),b.magnetometer=uc(),b.orientation=cc(),b.thermometer=hc();const C={thermometer:"temperature"},w={SHT31D:{ADDRESSES:{value:[68]},REGISTER:{value:{SOFT_RESET:12450,MEASURE_HIGH_REPEATABILITY:9216}},initialize:{value(_,D){const G=_.io,H=w.addressResolver(this,D);G.i2cConfig(D),G.i2cWrite(H,[this.REGISTER.SOFT_RESET>>8,this.REGISTER.SOFT_RESET&255]);const Y={temperature:null,humidity:null},z=()=>{G.i2cWrite(H,[this.REGISTER.MEASURE_HIGH_REPEATABILITY>>8,this.REGISTER.MEASURE_HIGH_REPEATABILITY&255]),setTimeout(()=>{G.i2cReadOnce(H,6,J=>{Y.temperature=u(J[0],J[1]),Y.humidity=u(J[3],J[4]),this.emit("data",Y),z()})},16)};z()}},identifier:{value(_){return`sht-31d-${w.addressResolver(w.SHT31D,_)}`}}},HTU21D:{ADDRESSES:{value:[64]},REGISTER:{value:{HUMIDITY:229,TEMPERATURE:227,SOFT_RESET:254}},initialize:{value(_,D){const N=_.io,G=w.addressResolver(this,D);D.delay=5e4,N.i2cConfig(D),N.i2cWrite(G,this.REGISTER.SOFT_RESET);const H={temperature:null,humidity:null};let Y=0;const z=()=>{const J=Y===0,ae=J?this.REGISTER.TEMPERATURE:this.REGISTER.HUMIDITY;N.i2cReadOnce(G,ae,2,K=>{J?H.temperature=u(K[0],K[1]):H.humidity=u(K[0],K[1]),++Y===2&&(Y=0,this.emit("data",H)),z()})};z()}},identifier:{value(_){return`htu-s1d-${w.addressResolver(w.HTU21D,_)}`}}},HIH6130:{ADDRESSES:{value:[39]},initialize:{value(_,D){const N=_.io,G=w.addressResolver(this,D);N.i2cConfig(D);const H={humidity:null,temperature:null};let Y=36.65;const z=()=>{N.i2cWrite(G,160,[0,0]),setTimeout(()=>{N.i2cWrite(G,128,[0,0]),N.i2cReadOnce(G,4,J=>{const ae=J[0]>>6;H.humidity=o(J[0]&63,J[1]),H.temperature=o(J[2],J[3]>>2),ae===0&&Y--,ae===1&&Y++,this.emit("data",H),z()})},Y)};z()}},identifier:{value(_){return`hih6130-${w.addressResolver(w.HIH6130,_)}`}}},DHT_I2C_NANO_BACKPACK:{ADDRESSES:{value:[10]},REGISTER:{value:{READ:0}},initialize:{value(_,D){const N=_.io,G=2;let H=11;const Y=w.addressResolver(this,D);N.i2cConfig(D);const z=/(\d{2})/.exec(D.controller),J=z&&z.length&&z[0];J&&(H=+J,Number.isNaN(H)&&(H=11));const ae={temperature:null,humidity:null};N.i2cWrite(Y,[G,H]),N.i2cRead(Y,4,K=>{ae.humidity=o(K[0],K[1]),ae.temperature=o(K[2],K[3]),this.emit("data",ae)})}},identifier:{value(_){return`dht_i2c_nano_backpack-${w.addressResolver(w.DHT_I2C_NANO_BACKPACK,_)}`}}},MPU6050:{ADDRESSES:{value:[104,105]},REGISTER:{value:{SETUP:[107,0],READ:59}},initialize:{value(_,D){const G=_.io,H=w.addressResolver(this,D),Y={accelerometer:{},temperature:{},gyro:{}};G.i2cConfig(D),G.i2cWrite(H,this.REGISTER.SETUP),G.i2cRead(H,this.REGISTER.READ,14,z=>{Y.accelerometer={x:o(z[0],z[1]),y:o(z[2],z[3]),z:o(z[4],z[5])},Y.temperature=o(z[6],z[7]),Y.gyro={x:o(z[8],z[9]),y:o(z[10],z[11]),z:o(z[12],z[13])},this.emit("data",Y)})}},identifier:{value(_){return`mpu-6050-${w.addressResolver(w.MPU6050,_)}`}}},BNO055:{ADDRESSES:{value:[40,41]},REGISTER:{value:{READ:{ACCEL:8,MAG:14,GYRO:20,EULER:26,QUARTERNION:32,TEMP:52},LENGTH:{ACCEL:6,MAG:6,GYRO:6,EULER:6,QUARTERNION:8,TEMP:1},OPR_MODE_ADDR:61,OPR_MODES:{CONFIG:0,ACCONLY:1,MAGONLY:2,GYRONLY:3,ACCMAG:4,ACCGYRO:5,MAGGYRO:6,AMG:7,IMUPLUS:8,COMPASS:9,M4G:10,NDOF_FMC_OFF:11,NDOF:12},PWR_MODE_ADDR:62,PWR_MODES:{NORMAL:0,LOW:1,SUSPEND:2},PAGE_ID_ADDR:7,PAGE_STATES:{ZERO:0},CALIBRATION:53,SYS_TRIGGER:63,UNIT_SEL_ADDR:59,AXIS_MAP_CONFIG_ADDR:65,AXIS_MAP_SIGN_ADDR:66}},initialize:{value(_,D){const N=_.io,G=D.calibrationMask||192,H=w.addressResolver(this,D),Y={accelerometer:{x:null,y:null,z:null},gyro:{x:null,y:null,z:null},magnetometer:{x:null,y:null,z:null},orientation:{euler:{heading:null,roll:null,pitch:null},quarternion:{w:null,x:null,y:null,z:null}},temperature:null,calibration:null};N.i2cConfig(D),N.i2cWriteReg(H,this.REGISTER.OPR_MODE_ADDR,this.REGISTER.OPR_MODES.CONFIG),N.i2cWriteReg(H,this.REGISTER.PAGE_ID_ADDR,this.REGISTER.PAGE_STATES.ZERO),N.i2cWriteReg(H,this.REGISTER.SYS_TRIGGER,32),new Promise(J=>{setTimeout(()=>{N.i2cWriteReg(H,this.REGISTER.PWR_MODE_ADDR,this.REGISTER.PWR_MODES.NORMAL),N.i2cWriteReg(H,this.REGISTER.SYS_TRIGGER,D.enableExternalCrystal?128:0);const ae=D.axisMap||36;N.i2cWriteReg(H,this.REGISTER.AXIS_MAP_CONFIG_ADDR,ae);const K=D.axisSign||0;N.i2cWriteReg(H,this.REGISTER.AXIS_MAP_SIGN_ADDR,K),setTimeout(()=>{N.i2cWriteReg(H,this.REGISTER.OPR_MODE_ADDR,this.REGISTER.OPR_MODES.NDOF),J()},10)},650)}).then(()=>new Promise(J=>{const ae=()=>{N.i2cReadOnce(H,this.REGISTER.CALIBRATION,1,K=>{const q=K[0],oe=Y.calibration!==q;Y.calibration=q,oe&&this.emit("calibration",Y.calibration),(q&G)===G?(this.emit("calibrated"),J()):ae()})};ae()})).then(()=>{N.i2cRead(H,this.REGISTER.READ.TEMP,2,J=>{Y.temperature=J[0];const ae=Y.calibration!==J[1];Y.calibration=J[1],this.emit("data",Y),ae&&this.emit("calibration",Y.calibration)}),N.i2cRead(H,this.REGISTER.READ.ACCEL,18,J=>{Y.accelerometer={x:o(J[1],J[0]),y:o(J[3],J[2]),z:o(J[5],J[4])},Y.magnetometer={x:o(J[7],J[6]),y:o(J[9],J[8]),z:o(J[11],J[10])},Y.gyro={x:o(J[13],J[12]),y:o(J[15],J[14]),z:o(J[17],J[16])},this.emit("data",Y)}),N.i2cRead(H,this.REGISTER.READ.EULER,14,J=>{Y.orientation.euler={heading:o(J[1],J[0]),roll:o(J[3],J[2]),pitch:o(J[5],J[4])},Y.orientation.quarternion={w:o(J[7],J[6]),x:o(J[9],J[8]),y:o(J[11],J[10]),z:o(J[13],J[12])},this.emit("data",Y)})})}},identifier:{value(_){return`bno055-${w.addressResolver(w.BNO055,_)}`}}},MPL115A2:{ADDRESSES:{value:[96]},REGISTER:{value:{COEFFICIENTS:4,PADC_MSB:0,CONVERT:18}},initialize:{value(_,D){const N=_.io,G=w.addressResolver(this,D);N.i2cConfig(D);const H={pressure:null,temperature:null},Y={a0:null,b1:null,b2:null,c12:null},z=K=>{const q=u(K[0],K[1])>>6,oe=u(K[2],K[3])>>6;H.pressure=Y.a0+(Y.b1+Y.c12*oe)*q+Y.b2*oe,H.temperature=oe,this.emit("data",H),J()};var J=()=>{N.i2cWriteReg(G,this.REGISTER.CONVERT,0),N.i2cReadOnce(G,this.REGISTER.PADC_MSB,4,z)};new Promise(K=>{N.i2cReadOnce(G,this.REGISTER.COEFFICIENTS,8,q=>{const oe=o(q[0],q[1]),j=o(q[2],q[3]),ue=o(q[4],q[5]),ce=o(q[6],q[7])>>2;Y.a0=oe/8,Y.b1=j/8192,Y.b2=ue/16384,Y.c12=ce/4194304,K()})}).then(J)}},identifier:{value(_){return`mpl115a2-${w.addressResolver(w.MPL115A2,_)}`}}},MPL3115A2:{ADDRESSES:{value:[96]},REGISTER:{value:{STATUS:0,PRESSURE:1,CONFIG:19,BAR_IN_MSB:20,BAR_IN_LSB:21,CONTROL:38}},MASK:{value:{STATUS:{PRESSURE_DATA_READ:4},CONTROL:{SBYB:1,OS128:56,ALTIMETER:128,PRESSURE:0},CONFIG:{TDEFE:1,PDEFE:2,DREM:4}}},initialize:{value(_,D){const G=_.io;let H=!1,Y=null,z=0;const J=w.addressResolver(this,D);let ae=0;const K={pressure:0,altitude:0,temperature:0};typeof D.elevation<"u"&&(Y=D.elevation),Y!==null&&Y<=0&&(z=Math.abs(Y)+1,Y=1);const q=ce=>{G.i2cReadOnce(J,this.REGISTER.STATUS,1,F=>{F[0]&this.MASK.STATUS.PRESSURE_DATA_READ?ce():setTimeout(()=>{q(ce)},100)})},oe=()=>{const ce=H?this.MASK.CONTROL.PRESSURE:this.MASK.CONTROL.ALTIMETER,F=this.MASK.CONTROL.SBYB|this.MASK.CONTROL.OS128|ce;G.i2cWrite(J,this.REGISTER.CONTROL,F),q(()=>{G.i2cReadOnce(J,this.REGISTER.PRESSURE,6,U=>{const k=h(U[1],U[2],U[3])>>4,P=u(U[4],U[5])>>4;let B;if(K.temperature=P,H)K.pressure=k,this.emit("data",K);else{const V=U[1],Q=U[2],S=(U[3]>>4)/16;B=(V<<8|Q)+S,ae=(ae*3+B)/4,K.altitude=ae-z}H=!H,oe()})})},j=[],ue=()=>{G.i2cWrite(J,this.REGISTER.CONTROL,59),G.i2cWrite(J,this.REGISTER.CONTROL,57),setTimeout(()=>{G.i2cReadOnce(J,this.REGISTER.PRESSURE,6,ce=>{const F=ce[1],U=ce[2],P=(ce[3]>>4)/4;if(j.push((F<<10|U<<2)+P),j.length===4){const V=(j[0]+j[1]+j[2]+j[3])/4/(1-Y*225577e-10)**5.255;G.i2cWrite(J,this.REGISTER.BAR_IN_MSB,V/2>>8),G.i2cWrite(J,this.REGISTER.BAR_IN_LSB,V/2&255),G.i2cWrite(J,this.REGISTER.CONTROL,187),G.i2cWrite(J,this.REGISTER.CONTROL,185),setTimeout(()=>{G.i2cReadOnce(J,this.REGISTER.PRESSURE,6,Q=>{const ne=Q[1],S=Q[2],Z=(Q[3]>>4)/16;ae=(ne<<8|S)+Z,oe()})},550)}else ue()})},500)};G.i2cConfig(Object.assign(D,{settings:{stopTX:!0}})),G.i2cWriteReg(J,45,0),G.i2cWriteReg(J,this.REGISTER.BAR_IN_MSB,0),G.i2cWriteReg(J,this.REGISTER.BAR_IN_LSB,0),G.i2cWriteReg(J,this.REGISTER.CONFIG,this.MASK.CONFIG.TDEFE|this.MASK.CONFIG.PDEFE|this.MASK.CONFIG.DREM),Y!==null?ue():oe()}},identifier:{value(_){return`mpl3115a2-${w.addressResolver(w.MPL3115A2,_)}`}}},BMP180:{ADDRESSES:{value:[119]},REGISTER:{value:{COEFFICIENTS:170,READ:0,READ_START:244,READ_RESULT:246}},initialize:{value(_,D){const N=_.io;let G=null,H=0;typeof D.elevation<"u"&&(G=D.elevation),(G!=null&&G<=0||G==null)&&(H=Math.abs(G)+1,G=1);const Y=w.addressResolver(this,D),z=D.mode||3,J=[5,8,14,26][z],ae=r.constrain(z,0,3),K={a1:null,a2:null,a3:null,a4:null,a5:null,a6:null,b1:null,b2:null,b5:null,mb:null,mc:null,md:null};N.i2cConfig(D),new Promise(oe=>{N.i2cReadOnce(Y,this.REGISTER.COEFFICIENTS,22,j=>{K.a1=o(j[0],j[1]),K.a2=o(j[2],j[3]),K.a3=o(j[4],j[5]),K.a4=u(j[6],j[7]),K.a5=u(j[8],j[9]),K.a6=u(j[10],j[11]),K.b1=o(j[12],j[13]),K.b2=o(j[14],j[15]),K.mb=o(j[16],j[17]),K.mc=o(j[18],j[19]),K.md=o(j[20],j[21]),oe()})}).then(()=>{const oe={altitude:null,pressure:null,temperature:null};let j=0;const ue=()=>{const ce=j===0,F=ce?46:52+(ae<<6),U=ce?2:3,k=ce?5:J;N.i2cWriteReg(Y,this.REGISTER.READ_START,F),setTimeout(()=>{N.i2cReadOnce(Y,this.REGISTER.READ_RESULT,U,P=>{let B,V,Q,ne,S,O,Z,le,ye,de,me;if(ce)V=o(P[0],P[1]),Q=(V-K.a6)*K.a5>>15,ne=(K.mc<<11)/(Q+K.md)>>0,K.b5=Q+ne|0,oe.temperature=(K.b5+8>>4)/10;else{V=h(P[0],P[1],P[2])>>8-ae,le=K.b5-4e3,de=le*le,me=de>>12,Q=K.b2*me>>11,ne=K.a2*le>>11,S=Q+ne,O=((K.a1*4+S<<ae)+2)/4>>0,Q=K.a3*le>>13,ne=K.b1*me>>16,S=Q+ne+2>>2,Z=K.a4*(S+32768)>>15,ye=(V-O)*(5e4>>ae),ye<r.POW_2_31?B=ye*2/Z:B=ye/Z*2,B>>=0,Q=(B>>8)*(B>>8),Q=Q*3038>>16,ne=-7357*B>>16,B+=Q+ne+3791>>4,oe.pressure=B;const Ue=B/(1-G*225577e-10)**5.255,te=44330*(1-B/Ue**(1/5.255));oe.altitude=Math.round(te-H)}++j===2&&(j=0,this.emit("data",oe)),ue()})},k)};ue()})}},identifier:{value(_){return`bmp180-${w.addressResolver(w.BMP180,_)}`}}},BMP280:{ADDRESSES:{value:[119]},REGISTER:{value:{COEFFICIENTS:136,CONFIG:245,MEASURE:244,PRESSURE:247,TEMPERATURE:250,RESET:224}},initialize:{value(_,D){const N=_.io;let G=null,H=0;typeof D.elevation<"u"&&(G=D.elevation),(G!=null&&G<=0||G==null)&&(H=Math.abs(G)+1,G=1);const Y=w.addressResolver(this,D),z={T1:null,T2:null,T3:null,P1:null,P2:null,P3:null,P4:null,P5:null,P6:null,P7:null,P8:null,P9:null};N.i2cConfig(D),N.i2cWrite(Y,this.REGISTER.RESET,182),new Promise(ae=>{N.i2cReadOnce(Y,this.REGISTER.COEFFICIENTS,24,K=>{z.T1=u(K[1],K[0]),z.T2=o(K[3],K[2]),z.T3=o(K[5],K[4]),z.P1=u(K[7],K[6]),z.P2=o(K[9],K[8]),z.P3=o(K[11],K[10]),z.P4=o(K[13],K[12]),z.P5=o(K[15],K[14]),z.P6=o(K[17],K[16]),z.P7=o(K[19],K[18]),z.P8=o(K[21],K[20]),z.P9=o(K[23],K[22]),ae()})}).then(()=>{N.i2cWrite(Y,this.REGISTER.MEASURE,63);const ae={altitude:null,pressure:null,temperature:null};N.i2cRead(Y,this.REGISTER.PRESSURE,6,K=>{let q=0,oe,j,ue,ce=g(h(K[0],K[1],K[2])),F=g(h(K[3],K[4],K[5]));ce>>=4,F>>=4;const k=(F>>4)-z.T1;if(j=((F>>3)-(z.T1<<1))*z.T2>>11,ue=(k*k>>12)*z.T3>>14,oe=j+ue,ae.temperature=(oe*5+128>>8)/100,j=void 0,ue=void 0,j=g(oe>>1)-64e3,ue=((j>>2)*(j>>2)>>11)*g(z.P6),ue+=j*g(z.P5)<<1,ue=(ue>>2)+(g(z.P4)<<16),j=(z.P3*((j>>2)*(j>>2)>>13)>>3)+(g(z.P2)*j>>1)>>18,j=(r.POW_2_15+j)*g(z.P1)>>15,j===0)return 0;q=f(g(r.POW_2_20)-ce-(ue>>12))*3125,q<r.POW_2_31?q=(q<<1>>>0)/f(j):q=(q/f(j)>>>0)*2,q=f(q)>>>0;const P=q>>3;j=g(z.P9)*g(P*P>>13)>>12,ue=g(q>>2)*g(z.P8)>>13,q=f(g(q)+(j+ue+z.P7>>4)),ae.pressure=q;const B=q/(1-G*225577e-10)**5.255,V=44330*(1-q/B**(1/5.255));ae.altitude=Math.round(V-H),this.emit("data",ae)})})}},identifier:{value(_){return`bmp280-${w.addressResolver(w.BMP280,_)}`}}},BME280:{ADDRESSES:{value:[119]},REGISTER:{value:{COEFFICIENTS_TP:136,COEFFICIENTS_H:225,CONFIG:245,MEASURE_H:242,MEASURE_TP:244,PRESSURE:247,TEMPERATURE:250,HUMIDITY:253,RESET:224}},initialize:{value(_,D){const N=_.io;let G=null,H=0;typeof D.elevation<"u"&&(G=D.elevation),(G!=null&&G<=0||G==null)&&(H=Math.abs(G)+1,G=1);const Y=w.addressResolver(this,D),z={T1:null,T2:null,T3:null,P1:null,P2:null,P3:null,P4:null,P5:null,P6:null,P7:null,P8:null,P9:null,H1:null,H2:null,H3:null,H4:null,H5:null,H6:null};N.i2cConfig(D),N.i2cWrite(Y,this.REGISTER.RESET,182),new Promise(ae=>{Promise.all([new Promise(K=>{N.i2cReadOnce(Y,136,24,q=>{z.T1=u(q[1],q[0]),z.T2=o(q[3],q[2]),z.T3=o(q[5],q[4]),z.P1=u(q[7],q[6]),z.P2=o(q[9],q[8]),z.P3=o(q[11],q[10]),z.P4=o(q[13],q[12]),z.P5=o(q[15],q[14]),z.P6=o(q[17],q[16]),z.P7=o(q[19],q[18]),z.P8=g(o(q[21],q[20])),z.P9=g(o(q[23],q[22])),K()})}),new Promise(K=>{N.i2cReadOnce(Y,161,1,q=>{z.H1=r.u8(q[0]),K()})}),new Promise(K=>{N.i2cReadOnce(Y,225,8,q=>{z.H2=g(o(q[1],q[0])),z.H3=g(q[2]),z.H4=g(q[3]<<4|q[4]&15),z.H5=g(q[5]<<4|q[4]>>4),z.H6=r.s8(q[6]),K()})})]).then(ae)}).then(()=>{N.i2cWrite(Y,this.REGISTER.MEASURE_H,5),N.i2cWrite(Y,this.REGISTER.MEASURE_TP,183);const ae={altitude:null,pressure:null,humidity:null,temperature:null},K=Date.now();N.i2cRead(Y,this.REGISTER.PRESSURE,8,q=>{if(!t.IS_TEST_MODE&&K+1e3>Date.now())return;let oe=0,j,ue,ce,F,U=g(h(q[0],q[1],q[2])),k=g(h(q[3],q[4],q[5]));const P=g(u(q[6],q[7]));U>>=4,k>>=4;const V=(k>>4)-z.T1;if(ue=((k>>3)-(z.T1<<1))*z.T2>>11,ce=(V*V>>12)*z.T3>>14,j=ue+ce,ae.temperature=(j*5+128>>8)/100,ue=void 0,ce=void 0,ue=g(j>>1)-64e3,ce=((ue>>2)*(ue>>2)>>11)*g(z.P6),ce+=ue*g(z.P5)<<1,ce=(ce>>2)+(g(z.P4)<<16),ue=(z.P3*((ue>>2)*(ue>>2)>>13)>>3)+(g(z.P2)*ue>>1)>>18,ue=(r.POW_2_15+ue)*g(z.P1)>>15,ue===0)return 0;oe=f(g(r.POW_2_20)-U-(ce>>12))*3125,oe<r.POW_2_31?oe=(oe<<1>>>0)/f(ue):oe=(oe/f(ue)>>>0)*2,oe=f(oe)>>>0;const Q=oe>>3;ue=g(z.P9)*g(Q*Q>>13)>>12,ce=g(oe>>2)*z.P8>>13,oe=f(g(oe)+(ue+ce+z.P7>>4)),ae.pressure=oe;const ne=oe/(1-G*225577e-10)**5.255,S=44330*(1-oe/ne**(1/5.255));ae.altitude=Math.round(S-H),F=g(j-76800),F=((P<<14)-g(z.H4<<20)-z.H5*F+r.POW_2_14>>15)*((((F*z.H6>>10)*((F*z.H3>>11)+r.POW_2_15)>>10)+r.POW_2_21)*z.H2+r.POW_2_13>>14),F-=((F>>15)*(F>>15)>>7)*g(z.H1)>>4,F=r.constrain(F,0,419430400),ae.humidity=f(F>>12),this.emit("data",ae)})})}},identifier:{value(_){return`bme280-${w.addressResolver(w.BME280,_)}`}}},SI7020:{ADDRESSES:{value:[64]},REGISTER:{value:{HUMIDITY:229,TEMPERATURE:224}},initialize:{value(_,D){const N=_.io,G=w.addressResolver(this,D);D.delay=5e4,N.i2cConfig(D);const H={temperature:null,humidity:null};N.i2cRead(G,this.REGISTER.TEMPERATURE,2,Y=>{H.temperature=u(Y[0],Y[1]),this.emit("data",H)}),N.i2cRead(G,this.REGISTER.HUMIDITY,2,Y=>{H.humidity=u(Y[0],Y[1]),this.emit("data",H)})}},identifier:{value(_){return`si7020-${w.addressResolver(w.SI7020,_)}`}}},MS5611:{ADDRESSES:{value:[119]},REGISTER:{value:{COEFFICIENTS:162,READ:0,PRESSURE:64,TEMPERATURE:80,RESET:30}},initialize:{value(_,D){const N=_.io;let G=null,H=0;typeof D.elevation<"u"&&(G=D.elevation),(G!=null&&G<=0||G==null)&&(H=Math.abs(G)+1,G=1);const Y=w.addressResolver(this,D),z={altitude:null,pressure:null,temperature:null},J=D.mode||5,ae=[1,2,3,4,5,10][J],K={C1:null,C2:null,C3:null,C4:null,C5:null,C6:null},q=Object.keys(K);D.delay=ae*1e3,N.i2cConfig(D),N.i2cWrite(Y,this.REGISTER.RESET),new Promise(j=>{setTimeout(()=>{const ue=q.map((ce,F)=>{const U=this.REGISTER.COEFFICIENTS+F*2;return new Promise(k=>{N.i2cReadOnce(Y,U,2,P=>{K[ce]=u(P[0],P[1]),k()})})});Promise.all(ue).then(j)},50)}).then(()=>{let j=0,ue,ce,F,U,k,P,B,V,Q,ne;const S=()=>{const O=j===0,Z=(O?80:64)+J;N.i2cWrite(Y,Z),O?(ce=0,F=0,U=0,V=0,Q=0,ne=0):(ue=0,k=0,P=0,B=0),setTimeout(()=>{N.i2cReadOnce(Y,this.REGISTER.READ,3,le=>{if(O)ce=h(le[0],le[1],le[2]),F=ce-K.C5*r.POW_2_8,U=2e3+F*K.C6/r.POW_2_23,U<2e3&&(V=F**2/r.POW_2_31,Q=5*(U-2e3)**2/2,ne=5*(U-2e3)**2/r.POW_2_2,U<-1500&&(Q=Q+7*(U+1500)**2,ne=ne+11*(U+1500)**2/2)),U-=V,z.temperature=U/100;else{ue=h(le[0],le[1],le[2]),k=K.C2*r.POW_2_16+K.C4*F/r.POW_2_7,P=K.C1*r.POW_2_15+K.C3*F/r.POW_2_8,k-=Q,P-=ne,B=(ue*P/r.POW_2_21-k)/r.POW_2_15,z.pressure=B;const ye=B/(1-G*225577e-10)**5.255,de=44330*(1-B/ye**(1/5.255));z.altitude=de-H}++j===2&&(j=0,this.emit("data",z)),S()})},ae)};S()})}},identifier:{value(_){return`ms5611-${w.addressResolver(w.MS5611,_)}`}}},TH02:{ADDRESSES:{value:[64]},COMMAND:{value:{MEASURE_HUMIDITY:1,MEASURE_TEMPERATURE:17}},REGISTER:{value:{STATUS:0,READ:1,CONFIG:3}},initialize:{value(_,D){const N=_.io,G=w.addressResolver(this,D),H={temperature:null,humidity:null};let Y=0;N.i2cConfig(Object.assign(D,{settings:{stopTX:!0}}));const z=()=>{const J=Y===0,ae=J?this.COMMAND.MEASURE_TEMPERATURE:this.COMMAND.MEASURE_HUMIDITY;new Promise(q=>{N.i2cWrite(G,this.REGISTER.CONFIG,ae);const oe=()=>{N.i2cReadOnce(G,this.REGISTER.STATUS,1,j=>{j[0]&1?oe():q()})};oe()}).then(()=>{Promise.all([new Promise(q=>{N.i2cReadOnce(G,1,1,oe=>{q(oe[0])})}),new Promise(q=>{N.i2cReadOnce(G,2,1,oe=>{q(oe[0])})})]).then(q=>{J?H.temperature=(u(q[0],q[1])>>2)/32-50:H.humidity=(u(q[0],q[1])>>4)/16-24,++Y===2&&(Y=0,this.emit("data",H)),z()})})};z()}},identifier:{value(_){return`th02-${w.addressResolver(w.TH02,_)}`}}},LSM303C:{ADDRESSES:{value:[29,30]},COMMAND:{value:{ACC_SETUP:[4,63,63,63],MAG_SETUP:[216,96,64,216,8,0]}},REGISTER:{value:{ACC_CTRL_SEQ:[35,32,32,32],ACC_STATUS:39,ACC_OUTX_L:40,ACC_OUTX_H:41,ACC_OUTY_L:42,ACC_OUTY_H:43,ACC_OUTZ_L:44,ACC_OUTZ_H:45,MAG_CTRL_SEQ:[32,33,36,32,35,34],MAG_STATUS:39,MAG_OUTX_L:40,MAG_OUTX_H:41,MAG_OUTY_L:42,MAG_OUTY_H:43,MAG_OUTZ_L:44,MAG_OUTZ_H:45,MAG_TEMP_OUT_L:46,MAG_TEMP_OUT_H:47}},initialize:{value(_,D){const N=.06103515625,G=.00048828125,H=_.io,Y=this.freq||40,[z,J]=this.ADDRESSES,ae={},K={},q={temperature:0,magnetometer:K,accelerometer:ae},oe=()=>{H.i2cConfig(Object.assign({},D,{address:z})),this.REGISTER.ACC_CTRL_SEQ.forEach((k,P)=>{H.i2cWrite(z,k,this.COMMAND.ACC_SETUP[P])})},j=()=>{H.i2cConfig(Object.assign({},D,{address:J})),this.REGISTER.MAG_CTRL_SEQ.forEach((k,P)=>{H.i2cWrite(J,k,this.COMMAND.MAG_SETUP[P])})},ue=k=>{H.i2cReadOnce(z,this.REGISTER.ACC_OUTX_L,6,P=>{ae.x=o(P[1],P[0])*N,ae.y=o(P[3],P[2])*N,ae.z=o(P[5],P[4])*N,k()})},ce=k=>{H.i2cReadOnce(J,this.REGISTER.MAG_OUTX_L,6,P=>{K.x=o(P[1],P[0])*G,K.y=o(P[3],P[2])*G,K.z=o(P[5],P[4])*G,k()})},F=k=>{H.i2cReadOnce(J,this.REGISTER.MAG_TEMP_OUT_L,2,P=>{q.temperature=o(P[1],P[0]),k()})},U=()=>{Promise.all([new Promise(ue),new Promise(ce),new Promise(F)]).then(()=>{this.emit("data",q),setTimeout(U,Y)})};oe(),j(),U()}},identifier:{value(_){return`lsm303c-${w.addressResolver(w.LSM303C,_)}`}}}};w.BMP085=w.BMP180,w.GY521=w.MPU6050,w.SI7021=w.SI7020,w.DHT11_I2C_NANO_BACKPACK=w.DHT_I2C_NANO_BACKPACK,w.DHT21_I2C_NANO_BACKPACK=w.DHT_I2C_NANO_BACKPACK,w.DHT22_I2C_NANO_BACKPACK=w.DHT_I2C_NANO_BACKPACK,w.get=(_,D,N={})=>{let G,H,Y;return s.has(_)||s.set(_,{}),G=s.get(_),H=w[D].identifier.value(N),G[H]||(Y=new i,Object.defineProperties(Y,w[D]),Y.initialize(_,N),G[H]=Y),G[H]},w.addressResolver=(_,D)=>{const N=_.ADDRESSES,G=D.address||(Array.isArray(N)?N[0]:N.value[0]);return D.address=G,G},w.clear=()=>{s.clear()};const L={MPU6050:{initialize:{value(_){b.call(this,"MPU6050",_)}},components:{value:[x,p,E]}},BNO055:{initialize:{value(_){const D=n.get(this),N="BNO055";D.calibrationMask=_.calibrationMask||192,w.get(this.board,N,_).on("calibrated",()=>this.emit("calibrated")).on("calibration",G=>this.emit("calibration",G)),b.call(this,N,_)}},components:{value:[x,p,v,m,E]},calibration:{get(){return this.orientation.calibration}},isCalibrated:{get(){const{calibrationMask:_}=n.get(this);return(this.orientation.calibration&_)===_}}},MPL115A2:{initialize:{value(_){b.call(this,"MPL115A2",_)}},components:{value:[d,E]}},SHT31D:{initialize:{value(_){b.call(this,"SHT31D",_)}},components:{value:[R,E]}},HTU21D:{initialize:{value(_){b.call(this,"HTU21D",_)}},components:{value:[R,E]}},HIH6130:{initialize:{value(_){b.call(this,"HIH6130",_)}},components:{value:[R,E]}},DHT_I2C_NANO_BACKPACK:{initialize:{value(_){b.call(this,"DHT_I2C_NANO_BACKPACK",_)}},components:{value:[R,E]}},MPL3115A2:{initialize:{value(_){b.call(this,"MPL3115A2",_)}},components:{value:[a,d,E]}},BMP180:{initialize:{value(_){b.call(this,"BMP180",_)}},components:{value:[a,d,E]}},BMP280:{initialize:{value(_){b.call(this,"BMP280",_)}},components:{value:[a,d,E]}},BME280:{initialize:{value(_){b.call(this,"BME280",_)}},components:{value:[a,d,R,E]}},SI7020:{initialize:{value(_){b.call(this,"SI7020",_)}},components:{value:[R,E]}},MS5611:{initialize:{value(_){b.call(this,"MS5611",_)}},components:{value:[a,d,E]}},TH02:{initialize:{value(_){b.call(this,"TH02",_)}},components:{value:[R,E]}},LSM303C:{initialize:{value(_){b.call(this,"LSM303C",_)}},components:{value:[v,E,x]}}};L.BMP085=L.BMP180,L.GY521=L.MPU6050,L.SI7021=L.SI7020,L.DHT11_I2C_NANO_BACKPACK=L.DHT_I2C_NANO_BACKPACK,L.DHT21_I2C_NANO_BACKPACK=L.DHT_I2C_NANO_BACKPACK,L.DHT22_I2C_NANO_BACKPACK=L.DHT_I2C_NANO_BACKPACK;class $ extends i{constructor(D){super(),e.Component.call(this,D=e.Options(D)),e.Controller.call(this,L,D);let N={};n.set(this,N),this.freq=D.freq||20,typeof this.initialize=="function"&&this.initialize(D),this.isReady=!1,setInterval(()=>{this.isReady&&this.emit("data",this)},this.freq);const G=this.components.slice();this.components&&this.components.length>0&&this.components.forEach(H=>{this[H]instanceof i&&this[H].on("change",()=>{if(G.length){const Y=G.indexOf(H);Y!==-1&&G.splice(Y,1)}!G.length&&!this.isReady&&(this.isReady=!0),this.isReady&&this.emit("change",this,H)})})}}return $.Drivers=w,t.IS_TEST_MODE&&($.Controllers=L,$.purge=()=>{n.clear()}),Qs=$,Qs}var Zs,w0;function fc(){if(w0)return Zs;w0=1;var t={};const e=we(),i=kt(),r=De,{constrain:n,fma:s,int16:o,sum:u,toFixed:h,RAD_TO_DEG:g}=Ie,f=new Map,x=10,a="x",d="y",p="z",R=[a,d,p];function v({zeroV:w,sensitivity:L},$){const _=f.get(this),D={};_.zeroV=w||this.DEFAULTS.zeroV,_.sensitivity=L||this.DEFAULTS.sensitivity,this.pins.forEach(function(N,G){this.io.pinMode(N,this.io.MODES.ANALOG),this.io.analogRead(N,H=>{const Y=R[G];D[Y]=H,$(D)})},this)}function m(w,L){const $=f.get(this);let _=$.zeroV;if(Array.isArray(_)&&_.length>0){const D=R.indexOf(L);_=_[D||0]}return(w-_)/$.sensitivity}const E={ANALOG:{DEFAULTS:{value:{zeroV:478,sensitivity:96}},initialize:{value:v},toGravity:{value:m}},MPU6050:{initialize:{value(w,L){const $=f.get(this);$.sensitivity=w.sensitivity||16384;const{Drivers:_}=fe();_.get(this.board,"MPU6050",w).on("data",({accelerometer:D})=>L(D))}},toGravity:{value(w){return h(w/f.get(this).sensitivity,3)}}},BNO055:{initialize:{value(w,L){const $=f.get(this);$.sensitivity=100;const{Drivers:_}=fe();_.get(this.board,"BNO055",w).on("data",({accelerometer:D})=>L(D))}},toGravity:{value(w){return h(w/f.get(this).sensitivity,2)}}},ADXL335:{DEFAULTS:{value:{zeroV:330,sensitivity:66.5}},initialize:{value:v},toGravity:{value(w,L){return h(m.call(this,w,L),3)}}},ADXL345:{ADDRESSES:{value:[83]},REGISTER:{value:{POWER:45,DATA_FORMAT:49,DATAX0:50}},initialize:{value(w,L){const{Drivers:$}=fe(),_=$.addressResolver(this,w),D=6;this.io.i2cConfig(w),this.io.i2cWrite(_,this.REGISTER.POWER,0),this.io.i2cWrite(_,this.REGISTER.POWER,8);const N=8,G={2:0,4:1,8:2,16:3}[w.range||2];this.io.i2cWrite(_,this.REGISTER.DATA_FORMAT,N|G),this.io.i2cRead(_,this.REGISTER.DATAX0,D,H=>{L({x:o(H[1],H[0]),y:o(H[3],H[2]),z:o(H[5],H[4])})})}},toGravity:{value(w){return h(w*.00390625,8)}}},MMA7361:{DEFAULTS:{value:{zeroV:[372,372,287],sensitivity:170}},initialize:{value(w,L){const $=f.get(this);w.sleepPin!==void 0&&($.sleepPin=w.sleepPin,this.io.pinMode($.sleepPin,1),this.io.digitalWrite($.sleepPin,1)),v.call(this,w,L)}},toGravity:{value(w,L){return h(m.call(this,w,L),3)}},enabledChanged:{value(w){const L=f.get(this);L.sleepPin!==void 0&&this.io.digitalWrite(L.sleepPin,w?1:0)}}},MMA8452:{ADDRESSES:{value:[29]},REGISTER:{value:{STATUS:0,OUT_X_MSB:1,XYZ_DATA_CFG:14,PULSE_CFG:33,PULSE_SRC:34,PULSE_THSX:35,PULSE_THSY:36,PULSE_THSZ:37,PULSE_TMLT:38,PULSE_LTCY:39,PULSE_WIND:40,CTRL_REG1:42,CTRL_REG4:46,CTRL_REG5:47}},initialize:{value(w,L){const{Drivers:$}=fe(),_=$.addressResolver(this,w),D=f.get(this),N=[800,400,200,100,50,12,6],G=N.indexOf(w.odr||800),H=w.range||2,Y={2:0,4:1,8:2}[H];w.taps=w.taps||{x:!1,y:!1,z:!0};const z={x:w.taps.x?8:128,y:w.taps.y?8:128,z:w.taps.z?8:128};D.scale=H;const J={x:null,y:null,z:null};if(this.io.i2cConfig(Object.assign(w,{settings:{stopTX:!1}})),G===-1)throw new RangeError("Invalid odr. Expected one of: 800,  400,  200,  100,  50,  12,  6");let ae=8;ae|=G<<3,this.io.i2cWriteReg(_,this.REGISTER.CTRL_REG1,ae),this.io.i2cWriteReg(_,this.REGISTER.XYZ_DATA_CFG,Y);let K=0;z.x&128||(K|=3,this.io.i2cWriteReg(_,this.REGISTER.PULSE_THSX,z.x)),z.y&128||(K|=12,this.io.i2cWriteReg(_,this.REGISTER.PULSE_THSY,z.y)),z.z&128||(K|=48,this.io.i2cWriteReg(_,this.REGISTER.PULSE_THSZ,z.z)),this.io.i2cWriteReg(_,this.REGISTER.PULSE_CFG,K|64),this.io.i2cWriteReg(_,this.REGISTER.PULSE_TMLT,60/(1e3/N[G])),this.io.i2cWriteReg(_,this.REGISTER.PULSE_LTCY,200/(1e3/N[G])),this.io.i2cWriteReg(_,this.REGISTER.PULSE_WIND,255),ae|=1,this.io.i2cWriteReg(_,this.REGISTER.CTRL_REG1,ae),this.io.i2cRead(_,this.REGISTER.STATUS,7,q=>{(q.shift()&8)>>>3&&(J.x=o(q[0],q[1])>>4,J.y=o(q[2],q[3])>>4,J.z=o(q[4],q[5])>>4,L(J))}),this.io.i2cRead(_,this.REGISTER.PULSE_SRC,1,q=>{const oe=q[0],j=oe&127;oe&128&&(this.emit("tap"),j>>2&1&&(this.emit("tap:single"),j>>3&1&&this.emit("tap:double")))})}},toGravity:{value(w){return h(w/(2048*f.get(this).scale),4)}}},MMA7660:{ADDRESSES:{value:[76]},REGISTER:{value:{XOUT:0,MODE:7,SR:8}},initialize:{value(w,L){const{Drivers:$}=fe(),_=$.addressResolver(this,w),D=3,N=f.get(this);N.sensitivity=21.33,this.io.i2cConfig(w),this.io.i2cWrite(_,this.REGISTER.MODE,0),this.io.i2cWrite(_,this.REGISTER.SR,7),this.io.i2cWrite(_,this.REGISTER.MODE,1),this.io.i2cRead(_,this.REGISTER.XOUT,D,G=>{L({x:G[0]&63,y:G[1]&63,z:G[2]&63})})}},toGravity:{value(w){return h(w/f.get(this).sensitivity,3)}}},ESPLORA:{DEFAULTS:{value:{zeroV:[320,330,310],sensitivity:170}},initialize:{value(w,L){this.pins=[5,11,6],v.call(this,w,L)}},toGravity:{value(w,L){return h(m.call(this,w,L),2)}}},LIS3DH:{ADDRESSES:{value:[24]},REGISTER:{value:{OUT_X_L:40,CTRL_REG1:32,CTRL_REG2:33,CTRL_REG3:34,CTRL_REG4:35,CTRL_REG5:36,TEMP_CFG_REG:31,CLICK_CFG:56,CLICK_SRC:57,CLICK_THS:58,TIME_LIMIT:59,TIME_LATENCY:60,TIME_WINDOW:61}},initialize:{value(w,L){const $=f.get(this),_=w.address||24;let D={2:0,4:1,8:2,16:3}[w.range||4];D===void 0&&(D=1);let N=[16380,8190,4096,1365][D];N===void 0&&(N=1);let G=[80,40,20,10][D];G===void 0&&(G=10),$.divider=N,$.expander=i.get({address:_,controller:this.controller,bus:this.bus});const H=136|D<<4;$.expander.i2cWrite(_,this.REGISTER.CTRL_REG4,H),$.expander.i2cReadOnce(_,this.REGISTER.CTRL_REG1,1,Y=>{let z=Y[0];z&=-241,z|=96,$.expander.i2cWrite(_,this.REGISTER.CTRL_REG1,z),$.expander.i2cRead(_,this.REGISTER.OUT_X_L|128,6,oe=>{L({x:o(oe[1],oe[0]),y:o(oe[3],oe[2]),z:o(oe[5],oe[4])})}),$.expander.i2cWrite(_,this.REGISTER.CTRL_REG3,128),$.expander.i2cWrite(_,this.REGISTER.CTRL_REG5,8),$.expander.i2cWrite(_,this.REGISTER.CLICK_CFG,42);const J=10,ae=20,K=255;$.expander.i2cWrite(_,this.REGISTER.CLICK_THS,G),$.expander.i2cWrite(_,this.REGISTER.TIME_LIMIT,J),$.expander.i2cWrite(_,this.REGISTER.TIME_LATENCY,ae),$.expander.i2cWrite(_,this.REGISTER.TIME_WINDOW,K);let q=null;$.expander.i2cRead(_,this.REGISTER.CLICK_SRC,1,oe=>{const j=oe[0],ue=Date.now();q===null&&(q=ue-101),!(ue<q+100)&&j!==0&&j&48&&(q=ue,this.emit("tap"),j&16&&this.emit("tap:single"),j&32&&(this.emit("tap:single"),this.emit("tap:double")))})})}},toGravity:{value(w){return h(w/f.get(this).divider,3)}}},LSM303C:{initialize:{value(w,L){const{Drivers:$}=fe();$.get(this.board,"LSM303C",w).on("data",({accelerometer:_})=>L(_))}},toGravity:{value(w){return h(w,2)}}}};E.TINKERKIT=E.ANALOG,E.MMA8452Q=E.MMA8452,E.DEFAULT=E.ANALOG;function b(w,L,$){let _;return _=w*w,_=s(L,L,_),_=s($,$,_),Math.sqrt(_)}class C extends r{constructor(L){super();const $={enabled:!0,x:{value:0,previous:0,stash:[],orientation:null,inclination:null,acceleration:null,calibration:[]},y:{value:0,previous:0,stash:[],orientation:null,inclination:null,acceleration:null,calibration:[]},z:{value:0,previous:0,stash:[],orientation:null,inclination:null,acceleration:null,calibration:[]}};e.Component.call(this,L=e.Options(L)),e.Controller.call(this,E,L),this.toGravity||(this.toGravity=L.toGravity||(_=>_)),this.enabledChanged||(this.enabledChanged=()=>{}),f.set(this,$),typeof this.initialize=="function"&&this.initialize(L,_=>{let D=!1;$.enabled&&(Object.keys(_).forEach(N=>{const G=_[N],H=$[N];if(L.autoCalibrate&&H.calibration.length<x){const Y=R.indexOf(N);H.calibration.push(G),Array.isArray($.zeroV)||($.zeroV=[]),$.zeroV[Y]=u(H.calibration)/H.calibration.length,N===p&&($.zeroV[Y]-=$.sensitivity)}if(H.stash.length===0)for(let Y=0;Y<5;Y++)H.stash[Y]=G;H.previous=H.value,H.stash.shift(),H.stash.push(G),H.value=u(H.stash)/5|0,this.acceleration!==H.acceleration&&(H.acceleration=this.acceleration,D=!0,this.emit("acceleration",H.acceleration)),this.orientation!==H.orientation&&(H.orientation=this.orientation,D=!0,this.emit("orientation",H.orientation)),this.inclination!==H.inclination&&(H.inclination=this.inclination,D=!0,this.emit("inclination",H.inclination))}),this.emit("data",{x:$.x.value,y:$.y.value,z:$.z.value}),D&&this.emit("change",{x:this.x,y:this.y,z:this.z}))}),Object.defineProperties(this,{hasAxis:{writable:!0,value(_){return $[_]?$[_].stash.length>0:!1}},enable:{value(){return $.enabled=!0,this.enabledChanged(!0),this}},disable:{value(){return $.enabled=!1,this.enabledChanged(!1),this}},zeroV:{get(){return $.zeroV}},pitch:{get(){const _=this.x,D=this.y,N=this.z,G=this.hasAxis(p)?Math.atan2(_,Math.hypot(D,N)):Math.asin(n(_,-1,1));return h(G*g,2)}},roll:{get(){const _=this.x,D=this.y,N=this.z,G=this.hasAxis(p)?Math.atan2(D,Math.hypot(_,N)):Math.asin(n(D,-1,1));return h(G*g,2)}},x:{get(){return this.toGravity($.x.value,a)}},y:{get(){return this.toGravity($.y.value,d)}},z:{get(){return this.hasAxis(p)?this.toGravity($.z.value,p):0}},acceleration:{get(){return b(this.x,this.y,this.z)}},inclination:{get(){return Math.atan2(this.y,this.x)*g}},orientation:{get(){const _=Math.abs,D=this.x,N=this.y,G=this.hasAxis(p)?this.z:1,H=_(D),Y=_(N),z=_(G);return H<Y&&H<z?D>0?1:-1:Y<H&&Y<z?N>0?2:-2:z<H&&z<Y?G>0?3:-3:0}}})}}return t.IS_TEST_MODE&&(C.Controllers=E,C.purge=function(){f.clear()}),Zs=C,Zs}const Gr=1.70158,xr=1.70158*1.525,gr=7.5625,Ye=.5,{PI:ra,cos:dc,sin:s1,sqrt:Ur}=Math,_e={};_e.linear=t=>t;_e.inQuad=t=>t*t;_e.outQuad=t=>t*(2-t);_e.inOutQuad=t=>(t*=2,t<1?Ye*t*t:-Ye*(--t*(t-2)-1));_e.inCube=t=>t*t*t;_e.outCube=t=>--t*t*t+1;_e.inOutCube=t=>(t*=2,t<1?Ye*(t*t*t):Ye*((t-=2)*t*t+2));_e.inQuart=t=>t*t*t*t;_e.outQuart=t=>1- --t*(t*t*t);_e.inOutQuart=t=>(t*=2,t<1?Ye*(t*t*t*t):-Ye*((t-=2)*(t*t*t)-2));_e.inQuint=t=>t*t*t*t*t;_e.outQuint=t=>--t*(t*t*t*t)+1;_e.inOutQuint=t=>(t*=2,t<1?Ye*(t*t*t*t*t):Ye*((t-=2)*(t*t*t*t)+2));_e.inSine=t=>1-dc(t*ra/2);_e.outSine=t=>s1(t*ra/2);_e.inOutSine=t=>Ye*(1-dc(ra*t));_e.inExpo=t=>t===0?0:Math.pow(1024,t-1);_e.outExpo=t=>t===1?t:1-Math.pow(2,-10*t);_e.inOutExpo=t=>t===0?0:t===1?1:(t*=2)<1?Ye*Math.pow(1024,t-1):Ye*(-Math.pow(2,-10*(t-1))+2);_e.inCirc=t=>1-Ur(1-t*t);_e.outCirc=t=>Ur(1- --t*t);_e.inOutCirc=t=>(t*=2,t<1?-Ye*(Ur(1-t*t)-1):Ye*(Ur(1-(t-=2)*t)+1));_e.inBack=t=>t*t*((Gr+1)*t-Gr);_e.outBack=t=>--t*t*((Gr+1)*t+Gr)+1;_e.inOutBack=t=>(t*=2)<1?Ye*(t*t*((xr+1)*t-xr)):Ye*((t-=2)*t*((xr+1)*t+xr)+2);_e.outBounce=t=>t<1/2.75?gr*t*t:t<2/2.75?gr*(t-=1.5/2.75)*t+.75:t<2.5/2.75?gr*(t-=2.25/2.75)*t+.9375:gr*(t-=2.625/2.75)*t+.984375;_e.inBounce=t=>1-_e.outBounce(1-t);_e.inOutBounce=t=>t<Ye?_e.inBounce(t*2)*Ye:_e.outBounce(t*2-1)*Ye+Ye;const pc={};Object.keys(_e).forEach(t=>{pc[t.toLowerCase()]=_e[t]});var o1=new Proxy({},{get(t,e){return pc[e.replace(/([a-z])([A-Z])/g,"$1$2").toLowerCase()]}}),Js,_0;function a1(){if(_0)return Js;_0=1;var t=Et.EventEmitter,e=_t(),i=1e6,r=new t,n={},s=Date.now(),o=!1,u=Je.setImmediate||ie.nextTick,h=function(){var R=ie.hrtime();return Math.floor((R[0]*1e9+R[1])/i)},g=function(){return Date.now()},f=g;function x(R){if(!(this instanceof x))return new x(R);this.called=0,this.now=this.calledAt=f(),i!==1e6&&(R.time=~~(R.time*(1e6/i))),this.isRunnable=!0,this.later=this.now+R.time,this.task=R.task,this.type=R.type,this.time=R.time,this.later>s&&(s=this.later),n[this.later]||(n[this.later]=[]),n[this.later].push(this)}e.inherits(x,t),x.deriveOp=function(R,v){return v!=="task"?v:R},x.prototype.stop=function(){this.isRunnable=!1,this.emit("stop")};function a(R){this.refs=[],this.add(R)}e.inherits(a,t),a.prototype.stop=function(){this.refs.forEach(function(R){R.stop()}),this.emit("stop")},a.prototype.add=function(R){var v,m,E,b;for(this.cumulative=this.cumulative||0;R.length;)m=R.shift(),v=Object.keys(m).reduce(x.deriveOp,""),this.cumulative+=m[v],R.length===0&&(E=m.task,m.task=C=>{E.call(this,C),this.emit("end",C),this.cumulative=0}),v==="loop"&&R.length===0?b=r.delay(this.cumulative-m[v],()=>{b=r.loop(m[v],m.task),this.refs.push(b)}):b=r[v](this.cumulative,m.task),this.refs.push(b)},r.queue=function(R){var v=new a(R);return p(),v};var d=f();function p(){o||(o=!0,r.emit("busy"));var R=f(),v=[],m=!0,E,b;for(s<=R&&(m=!1),b=d;b<=R;b++)[].push.apply(v,n[b]||[]);if(v.length){for(;v.length;)E=v.shift(),E.isRunnable&&(E.called++,E.calledAt=R,E.task.call(E,E)),E.type==="loop"&&E.isRunnable&&(m=!0,E.later=R+E.time,E.later>s&&(s=E.later),n[E.later]||(n[E.later]=[]),E.isRunnable&&n[E.later].push(E));for(b=d;b<=R;b++)delete n[b];v.length=0}d=R,m?u(p):(o=!1,r.emit("idle"))}return["loop","delay"].forEach(function(R){r[R]=function(v,m){typeof v=="function"&&(m=v,v=10);var E=new x({time:v,type:R,task:m});return o||p(),E}}),r.wait=r.defer=r.delay,r.repeat=function(R,v,m){return r.loop(v,function(E){m(E),E.called===R&&this.stop()})},r.clear=function(){o=!1,r.removeAllListeners(),n={}},r.resolution=function(R){R===.1||R===.01?(i=1e6*R,f=h):(i=1e6,f=g),d=f()},Js=r,Js}const l1=De,O0=o1,{cloneDeep:u1,constrain:c1}=Ie;let eo,h1=5e3,Ii=class Xt extends l1{constructor(e){super(),eo||(eo=a1()),Object.assign(this,new Xt.Segment),this.defaultTarget=e||{}}enqueue(e={}){return typeof e.target>"u"&&(e.target=this.defaultTarget),this.segments.push(e),!this.paused&&!this.isRunning&&this.next(),this}next(){return this.isRunning?this:(this.isRunning=!0,this.segments.length>0?(Object.assign(this,new Xt.Segment(this.segments.shift())),this.paused=this.currentSpeed===0,this.onstart&&this.onstart(),this.normalizeKeyframes(),this.reverse&&(this.currentSpeed*=-1),this.currentSpeed!==0?this.play():this.paused=!0):this.playLoop.stop(),this)}pause(){this.emit("animation:pause"),this.playLoop&&this.playLoop.stop(),this.paused=!0,this.onpause&&this.onpause()}stop(){this.emit("animation:stop"),this.segments=[],this.isRunning=!1,this.playLoop&&this.playLoop.stop(),this.onstop&&this.onstop()}speed(e){return typeof e>"u"?this.currentSpeed:(this.currentSpeed=e,this.scaledDuration=this.duration/Math.abs(this.currentSpeed),this.startTime=Date.now()-this.scaledDuration*this.progress,this.endTime=this.startTime+this.scaledDuration,this.paused||this.play(),this)}loopFunction({calledAt:e}){const i=this.calculateProgress(e),r=this.findIndices(i);this.target[Xt.render](this.tweenedValue(r,i)),e>this.fallBackTime&&(this.fallBackTime=1/0,this.playLoop&&this.playLoop.stop(),this.playLoop=new Xt.TemporalFallback(this)),(this.progress===1&&!this.reverse||i===this.loopback&&this.reverse)&&(this.loop||this.metronomic&&!this.reverse?(this.onloop&&this.onloop(),this.metronomic&&(this.reverse=!this.reverse),this.normalizeKeyframes(),this.progress=this.loopback,this.startTime=Date.now()-this.scaledDuration*this.progress,this.endTime=this.startTime+this.scaledDuration):(this.isRunning=!1,this.oncomplete&&ie.nextTick(()=>this.oncomplete()),this.segments.length>0?ie.nextTick(()=>this.next()):this.stop()))}play(){const e=Date.now();this.playLoop&&this.playLoop.stop(),this.paused=!1,this.isRunning=!0,this.scaledDuration=this.duration/Math.abs(this.currentSpeed),this.startTime=e-this.scaledDuration*this.progress,this.endTime=this.startTime+this.scaledDuration,this.fallBackTime=e+h1,this.frameCount=0,this.fps&&(this.rate=1e3/this.fps),this.rate=this.rate|0,this.playLoop=eo.loop(this.rate,i=>this.loopFunction(i))}findIndices(e){const i={left:null,right:null};return i.right=this.cuePoints.findIndex(r=>r>=e),i.left=i.right===0?0:i.right-1,i}calculateProgress(e){let i=(e-this.startTime)/this.scaledDuration;return i>1&&(i=1),this.progress=i,this.reverse&&(i=1-i),c1(O0[this.easing](i),0,1)}tweenedValue(e,i){const r={duration:null,progress:null};return this.normalizedKeyFrames.map(s=>{const o={left:null,right:null};for(o.left=e.left;o.left>-1&&s[o.left]===null;o.left--);o.right=s.findIndex((f,x)=>x>=e.right&&f!==null),r.duration=this.cuePoints[o.right]-this.cuePoints[o.left],r.progress=(i-this.cuePoints[o.left])/r.duration,Number.isFinite(r.progress)||(r.progress=this.reverse?0:1);const u=s[o.left],h=s[o.right];r.progress=O0[h.easing](r.progress);let g;return h.position?g=h.position.map((f,x)=>(f-u.position[x])*r.progress+u.position[x]):typeof h.value=="number"&&typeof u.value=="number"?g=(h.value-u.value)*r.progress+u.value:g=this.target[Xt.keys].reduce((f,x)=>(f[x]=(h.value[x]-u.value[x])*r.progress+u.value[x],f),{}),g})}normalizeKeyframes(){let e,i=u1(this.keyFrames);const r=this.cuePoints;return i=this.target[Xt.normalize](i),Array.isArray(i[0])||(i=[i]),i.forEach(function(n){for(let s=n.length;s<r.length;s++)n.push(null);n.forEach((s,o,u)=>{s!==null?(typeof s!="object"&&(s={step:s,easing:"linear"}),typeof s.step<"u"&&(s.value=s.step===!1?e:e+s.step),s.easing||(s.easing="linear"),typeof s.copyValue<"u"&&(s.value=u[s.copyValue].value),s.copyFrame&&(s=u[s.copyFrame]),e=s.value):o===u.length-1?s={value:e,easing:"linear"}:s=null,u[o]=s},this)}),this.normalizedKeyFrames=i,this}};Ii.keys="@@keys";Ii.normalize="@@normalize";Ii.render="@@render";Ii.TemporalFallback=class{constructor(t){this.interval=setInterval(()=>{t.loopFunction({calledAt:Date.now()})},t.rate)}stop(){this.interval&&clearInterval(this.interval)}};Ii.Segment=class{constructor(t){this.cuePoints=[0,1],this.duration=1e3,this.easing="linear",this.loop=!1,this.loopback=0,this.metronomic=!1,this.currentSpeed=1,this.progress=0,this.fps=60,this.rate=1e3/60,this.paused=!1,this.isRunning=!1,this.segments=[],this.onstart=null,this.onpause=null,this.onstop=null,this.oncomplete=null,this.onloop=null,t&&(Object.assign(this,t),t.segments&&(this.segments=t.segments.slice()))}};var Ci=Ii;const f1=De;let to;class I0{constructor(e){this.address=e.address,this.io=e.io,this.io.i2cConfig(e)}read(e,i,r){e?this.io.i2cRead(this.address,e,i,r):this.io.i2cRead(this.address,i,r)}write(e,i){Array.isArray(i)||(i=[i]),this.io.i2cWrite(this.address,e,i)}}let ee=class Tr extends f1{constructor({io:e}){if(super(),to)return to;this.bank={a:new I0({address:Tr.BANK_A,io:e}),b:new I0({address:Tr.BANK_B,io:e})},to=this}setup({bank:e,mode:i},r){this.bank[e].write(i,[r])}read(e,i,r,n){e.sensor&&e.offset&&!Tr.isRawSensor(e)&&(i+=e.offset),this.bank[e.bank].read(i,r,n)}write({bank:e},i,r){this.bank[e].write(i,r)}};ee.shieldPort=t=>{const e=ee[t];if(e===void 0)throw new Error("Invalid EVShield pin name");let i,r,n,s,o,u,h,g=!1;return t.startsWith("BA")?(i=ee.BANK_A,n="a"):(i=ee.BANK_B,n="b"),t.includes("M")&&(s=t.endsWith("M1")?ee.S1:ee.S2),t.includes("S")&&(g=t.endsWith("S1"),r=g?ee.S1_ANALOG:ee.S2_ANALOG,o=g?ee.S1_MODE:ee.S2_MODE,u=g?ee.S1_OFFSET:ee.S2_OFFSET,h=g?ee.S1:ee.S2),{address:i,analog:r,bank:n,mode:o,motor:s,offset:u,port:e,sensor:h}};ee.isRawSensor=({analog:t})=>t===ee.S1_ANALOG||t===ee.S2_ANALOG;ee.BAS1=1;ee.BAS2=2;ee.BBS1=3;ee.BBS2=4;ee.BAM1=5;ee.BAM2=6;ee.BBM1=7;ee.BBM2=8;ee.BANK_A=26;ee.BANK_B=27;ee.S1=1;ee.S2=2;ee.M1=1;ee.M2=2;ee.MM=3;ee.Type_NONE=0;ee.Type_SWITCH=1;ee.Type_ANALOG=2;ee.Type_I2C=9;ee.Type_NXT_LIGHT_REFLECTED=3;ee.Type_NXT_LIGHT=4;ee.Type_NXT_COLOR=13;ee.Type_NXT_COLOR_RGBRAW=4;ee.Type_NXT_COLORRED=14;ee.Type_NXT_COLORGREEN=15;ee.Type_NXT_COLORBLUE=16;ee.Type_NXT_COLORNONE=17;ee.Type_DATABIT0_HIGH=64;ee.S1_MODE=111;ee.S1_ANALOG=112;ee.S1_OFFSET=0;ee.S2_MODE=163;ee.S2_ANALOG=164;ee.S2_OFFSET=52;ee.Type_EV3_LIGHT_REFLECTED=0;ee.Type_EV3_LIGHT=1;ee.Type_EV3_COLOR=2;ee.Type_EV3_COLOR_REFRAW=3;ee.Type_EV3_COLOR_RGBRAW=4;ee.Type_EV3_TOUCH=18;ee.Type_EV3=19;ee.Light=131;ee.Bump=132;ee.ColorMeasure=131;ee.Proximity=131;ee.Touch=131;ee.Ultrasonic=129;ee.Mode=129;ee.Light_Bytes=2;ee.Analog_Bytes=2;ee.Bump_Bytes=1;ee.ColorMeasure_Bytes=2;ee.Proximity_Bytes=2;ee.Touch_Bytes=1;ee.Motor_1=1;ee.Motor_2=2;ee.Motor_Both=3;ee.Motor_Next_Action_Float=0;ee.Motor_Next_Action_Brake=1;ee.Motor_Next_Action_BrakeHold=2;ee.Motor_Stop=96;ee.Motor_Reset=82;ee.Motor_Reverse=0;ee.Motor_Forward=1;ee.Motor_Move_Absolute=0;ee.Motor_Move_Relative=1;ee.Motor_Completion_Dont_Wait=0;ee.Motor_Completion_Wait_For=1;ee.Speed_Full=90;ee.Speed_Medium=60;ee.Speed_Slow=25;ee.CONTROL_SPEED=1;ee.CONTROL_RAMP=2;ee.CONTROL_RELATIVE=4;ee.CONTROL_TACHO=8;ee.CONTROL_BRK=16;ee.CONTROL_ON=32;ee.CONTROL_TIME=64;ee.CONTROL_GO=128;ee.STATUS_SPEED=1;ee.STATUS_RAMP=2;ee.STATUS_MOVING=4;ee.STATUS_TACHO=8;ee.STATUS_BREAK=16;ee.STATUS_OVERLOAD=32;ee.STATUS_TIME=64;ee.STATUS_STALL=128;ee.COMMAND=65;ee.VOLTAGE=110;ee.SETPT_M1=66;ee.SPEED_M1=70;ee.TIME_M1=71;ee.CMD_B_M1=72;ee.CMD_A_M1=73;ee.SETPT_M2=74;ee.SPEED_M2=78;ee.TIME_M2=79;ee.CMD_B_M2=80;ee.CMD_A_M2=81;ee.POSITION_M1=82;ee.POSITION_M2=86;ee.STATUS_M1=90;ee.STATUS_M2=91;ee.TASKS_M1=92;ee.TASKS_M2=93;ee.ENCODER_PID=94;ee.SPEED_PID=100;ee.PASS_COUNT=106;ee.TOLERANCE=107;ee.BTN_PRESS=218;ee.RGB_LED=215;ee.CENTER_RGB_LED=222;var rr=ee,d1={};const wr=we(),xc=nt,p1=De,yt=rr,x1=Ie,xi=new Map,g1=wr.Pins,E1={down:["down","press"],up:["up","release"]},gc={DEFAULT:{initialize:{value(t,e){const i=xi.get(this);g1.isFirmata(this)&&typeof t.pinValue=="string"&&t.pinValue.length>1&&t.pinValue[0]==="A"&&(t.pinValue=this.io.analogPins[+t.pinValue.slice(1)]),this.pin=Number.isNaN(+t.pinValue)?t.pinValue:+t.pinValue,this.io.pinMode(this.pin,this.io.MODES.INPUT),this.pullup&&this.io.digitalWrite(this.pin,this.io.HIGH),this.pulldown&&this.io.digitalWrite(this.pin,this.io.LOW),this.io.digitalRead(this.pin,r=>{r!==i.last&&e(r)})}},toBoolean:{writable:!0,value(t){return t===this.downValue}}},TINKERKIT:{initialize:{value(t,e){const i=xi.get(this);let r=0;this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,n=>{n=n>512?1:0,n!==r&&n!==i.last&&e(n),r=n})}},toBoolean:{writable:!0,value(t){return t===this.downValue}}},EVS_EV3:{initialize:{value(t,e){const i=xi.get(this);i.previous=0,i.shield=yt.shieldPort(t.pin),i.register=yt.Touch,i.ev3=new yt(Object.assign(t,{io:this.io})),i.ev3.setup(i.shield,yt.Type_EV3_TOUCH),i.ev3.read(i.shield,yt.Touch,yt.Touch_Bytes,r=>{const n=r[0];i.previous!==n&&e(n),i.previous=n})}},toBoolean:{writable:!0,value(t){return t===this.downValue}}},EVS_NXT:{initialize:{value(t,e){const i=xi.get(this);i.previous=0,i.shield=yt.shieldPort(t.pin),i.ev3=new yt(Object.assign(t,{io:this.io})),i.ev3.setup(i.shield,yt.Type_ANALOG),i.ev3.read(i.shield,i.shield.analog,yt.Analog_Bytes,r=>{let n=r[0]|r[1]<<8;n=n<300?1:0,i.previous!==n&&e(n),i.previous=n})}},toBoolean:{writable:!0,value(t){return t===this.downValue}}}};class Ti extends p1{constructor(e){super();let i,r=!1,n=1,s=0;const o={interval:null,last:null},u=x1.debounce(g=>{E1[g].forEach(f=>this.emit(f))},7);let h=typeof e=="object"?e.pin:e;wr.Component.call(this,e=wr.Options(e)),wr.Controller.call(this,gc,e),e.pinValue=h,this.holdtime=e.holdtime||500,this.pullup=e.pullup||e.isPullup||!1,this.pulldown=e.pulldown||e.isPulldown||!1,r=typeof e.invert<"u"?e.invert:this.pullup||!1,r&&(n=n^1,s=s^1),o.last=s,xi.set(this,o),Object.defineProperties(this,{value:{get(){return Number(this.isDown)}},invert:{get(){return r},set(g){r=g,n=r?0:1,s=r?1:0,o.last=s}},downValue:{get(){return n},set(g){n=g,s=g^1,r=!!g,o.last=s}},upValue:{get(){return s},set(g){s=g,n=g^1,r=!!g,o.last=n}},isDown:{get(){return this.toBoolean(i)}}}),typeof this.initialize=="function"&&this.initialize(e,g=>{i=g,this.isDown||(o.interval&&clearInterval(o.interval),u("up")),this.isDown&&(u("down"),o.interval=setInterval(()=>{this.isDown&&this.emit("hold")},this.holdtime)),o.last=g})}}class Ec extends xc.Emitter{constructor(e){super(e)}get type(){return Ti}}xc.installMethodForwarding(Ec.prototype,Ti.prototype);Ti.Collection=Ec;d1.IS_TEST_MODE&&(Ti.Controllers=gc,Ti.purge=function(){xi.clear()});var v1=Ti,m1={};const io=we(),it=rr,y1=De,b1=Ie,gi=new Map,vc={EVS_EV3:{initialize:{value(t,e){const i=gi.get(this);t.mode&&(t.mode=t.mode.toUpperCase()),i.mode=t.mode==="RAW"?it.Type_EV3_COLOR_RGBRAW:it.Type_EV3_COLOR,i.bytes=i.mode===it.Type_EV3_COLOR_RGBRAW?6:2,i.colors=[[],[0,0,0],[0,0,255],[0,128,0],[255,255,0],[255,0,0],[255,255,255],[139,69,19]],i.shield=it.shieldPort(t.pin),i.ev3=new it(Object.assign(t,{io:this.io})),i.ev3.setup(i.shield,it.Type_EV3),i.ev3.write(i.shield,129+i.shield.offset,i.mode),i.ev3.read(i.shield,it.ColorMeasure,i.bytes,r=>{let n="";if(i.bytes===2)n+=String(r[0]|r[1]<<8||1);else for(let s=0;s<3;s++)n+=r[s*2].toString(16).padStart(2,"0");e(n)})}},toRGB:{value(t){const e=gi.get(this);return e.mode===it.Type_EV3_COLOR?t>0&&t<8?e.colors[t]:e.colors[0]:(t=String(t),[0,0,0].map((i,r)=>parseInt(t.slice(r*2,r*2+2),16)))}}},EVS_NXT:{initialize:{value(t,e){const i=gi.get(this);if(t.mode&&(t.mode=t.mode.toUpperCase()),i.mode=t.mode==="RAW"?it.Type_NXT_COLOR_RGBRAW:it.Type_NXT_COLOR,i.bytes=i.mode===it.Type_NXT_COLOR_RGBRAW?10:1,i.mode===it.Type_NXT_COLOR_RGBRAW)throw new Error("Raw RGB is not currently supported for the NXT.");i.colors=[[],[0,0,0],[0,0,255],[0,128,0],[255,255,0],[255,0,0],[255,255,255]],i.shield=it.shieldPort(t.pin),i.ev3=new it(Object.assign(t,{io:this.io})),i.ev3.setup(i.shield,it.Type_NXT_COLOR),i.ev3.read(i.shield,112+i.shield.offset,i.bytes,r=>{let n="";i.bytes===1&&(n+=String(r[0])),e(n)})}},toRGB:{value(t){const e=gi.get(this);return e.mode===it.Type_NXT_COLOR?t>0&&t<7?e.colors[t]:e.colors[0]:(t=String(t),[0,0,0].map((i,r)=>parseInt(t.slice(r*2,r*2+2),16)))}}},ISL29125:{ADDRESSES:{value:[68]},REGISTER:{value:{RESET:0,CONFIG1:1,CONFIG2:2,CONFIG3:3,READ:9}},initialize:{value(t,e){const{Drivers:i}=fe(),r=i.addressResolver(this,t);this.io.i2cConfig(t),this.io.i2cWriteReg(r,this.REGISTER.RESET,70),this.io.i2cWriteReg(r,this.REGISTER.CONFIG1,13),this.io.i2cWriteReg(r,this.REGISTER.CONFIG2,63),this.io.i2cWriteReg(r,this.REGISTER.CONFIG3,0),this.io.i2cRead(r,this.REGISTER.READ,6,n=>{let s="";const o=n[1]<<8|n[0],u=n[3]<<8|n[2],h=n[5]<<8|n[4],g=[u>>2,o>>2,h>>2].map(f=>b1.constrain(f,0,255));for(let f=0;f<3;f++)s+=g[f].toString(16).padStart(2,"0");e(s)})}},toRGB:{value(t){return t=String(t),[0,0,0].map((e,i)=>parseInt(t.slice(i*2,i*2+2),16))}}}},C0=["red","green","blue"];class So extends y1{constructor(e){super(),io.Component.call(this,e=io.Options(e)),io.Controller.call(this,vc,e);const i={},r=e.freq||25;let n=0,s=null;gi.set(this,i),this.toRGB||(this.toRGB=e.toRGB||(o=>o)),Object.defineProperties(this,{value:{get(){return n}},rgb:{get(){return this.toRGB(n).reduce((o,u,h)=>(o[C0[h]]=u,o),{})}}}),typeof this.initialize=="function"&&this.initialize(e,o=>{n=o}),setInterval(()=>{if(n===void 0)return;const o={rgb:this.rgb};this.emit("data",o),n!==s&&(s=n,this.emit("change",o))},r)}static hexCode(e){return e.red===void 0||e.green===void 0||e.blue===void 0?null:e.length===0?"unknown":C0.reduce((i,r)=>i+=e[r].toString(16).padStart(2,"0"),"")}}m1.IS_TEST_MODE&&(So.Controllers=vc,So.purge=()=>{gi.clear()});var R1=So,S1={};const Hi=we(),A1=kt(),T1=Hi.Pins,mc=nt,{scale:w1,fscale:_1,constrain:M0}=Ie,Wr=new Map,yc={PCA9685:{initialize:{value:function(t){const e=Wr.get(this);this.address=t.address||64,this.pwmRange=t.pwmRange||[1e3,2e3],this.frequency=t.frequency||50,e.expander=A1.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),this.pin=e.expander.normalize(t.pin)}},update:{writable:!0,value:function(t){Wr.get(this).expander.servoWrite(this.pin,t)}}},DEFAULT:{initialize:{value:function(t){t.debug&&!this.board.pins.isServo(this.pin)&&Hi.Pins.Error({pin:this.pin,type:"PWM",via:"Servo"}),this.io.servoConfig(this.pin,this.pwmRange[0],this.pwmRange[1])}},update:{writable:!0,value:function(t){this.io.servoWrite(this.pin,t)}}}},Ao="FORWARD",To="FORWARD_REVERSE",D0="FORWARD_BRAKE_REVERSE",P0={[Ao]:{device:{value:Ao}},[To]:{device:{value:To}},[D0]:{device:{value:D0}}};class Nt{constructor(e){if(!(this instanceof Nt))return new Nt(e);Hi.Component.call(this,e=Hi.Options(e));let i;typeof e.controller>"u"&&T1.isFirmata(this)&&(typeof i=="string"&&i.length>1&&i[0]==="A"&&(i=this.io.analogPins[+i.slice(1)]),i=+i,!Number.isNaN(i)&&this.pin!==i&&(this.pin=i)),Hi.Controller.call(this,yc,e),Object.defineProperties(this,e.device&&P0[e.device]||P0.FORWARD),this.pwmRange=e.pwmRange||[1e3,2e3],this.neutral=e.neutral,Wr.set(this,{}),this.initialize(e);const[r,n]=this.pwmRange;if(typeof this.neutral<"u"&&this.neutral<=100&&(this.neutral=w1(this.neutral,0,100,r,n)),typeof this.neutral>"u"&&(this.neutral=(r+n)/2),this.neutral=M0(this.neutral,r,n),this.device===To&&this.neutral===r)throw new Error("Bidirectional (FORWARD_REVERSE) speed controllers require a non-zero neutral point");this.device===Ao&&(this.neutral=r),this.throttle(this.neutral)}throttle(e){if(e>0&&e<=100){if(this.device!=="FORWARD")throw new Error("Bidirectional (FORWARD_REVERSE, FORWARD_*_REVERSE) speed controllers require a pulse in usec");e=_1(e,0,100,this.pwmRange[0],this.pwmRange[1])}return this.update(M0(e,this.pwmRange[0],this.pwmRange[1])),this}brake(){return this.update(this.neutral),this}}class bc extends mc{constructor(e){super(e)}get type(){return Nt}}mc.installMethodForwarding(bc.prototype,Nt.prototype);Nt.Collection=bc;S1.IS_TEST_MODE&&(Nt.Controllers=yc,Nt.purge=function(){Wr.clear()});var O1=Nt,I1={};const L0=we(),C1=De,Rc=nt,bi=new Map,Ki={INPUT:0,OUTPUT:1,ANALOG:2,PWM:3,SERVO:4},wo="low",_o="high",_r="analog",Oo="digital";let ct=class Or extends C1{constructor(e){if(super(),e===void 0||typeof e=="object"&&e.addr===void 0&&e.pin===void 0)throw new Error("Pins must have a pin number");const i=typeof e=="object"?e.addr||e.pin||0:e;let r=Or.isAnalog(e),n=!1;L0.Component.call(this,e=L0.Options(e)),e.addr=e.addr||e.pin,this.io.analogPins.includes(i)&&(r=!1,n=!0);const o=n?i:typeof e!="object"?e:e.addr,u=e.type||(r?_r:Oo),h={mode:null,last:null,value:0};bi.set(this,h),Object.defineProperties(this,{type:{get(){return u}},addr:{get(){return o}},value:{get(){return h.value}},mode:{set(g){bi.get(this).mode=g,this.io.pinMode(this.addr,g)},get(){return bi.get(this).mode}}}),this.mode=typeof e.as<"u"?e.as:typeof e.mode<"u"?e.mode:r?2:1,this.freq=typeof e.freq<"u"?e.freq:20,(this.mode===0||this.mode===2)&&Sc(this),u===Oo&&Object.defineProperties(this,{isHigh:{get(){return!!h.value}},isLow:{get(){return!h.value}}})}query(e){let i=this.addr;return this.type===_r&&(i=this.io.analogPins[this.addr]),this.io.queryPinState(i,()=>e(this.io.pins[i])),this}high(){const e=this.type===_r?this.board.RESOLUTION.PWM:1;return Or.write(this,e),this.emit(_o),this}low(){return Or.write(this,0),this.emit(wo),this}};function Sc(t){const e=bi.get(t);t.io[`${t.type}Read`](t.addr,i=>e.value=i),setInterval(()=>{let i,r;i=e.value?wo:_o,r=e.value?_o:wo,e.mode===Ki.INPUT&&(e.last===null&&(e.last=i),e.last===i&&(e.last=r,t.emit(r,e.value),t.emit("change",e.value))),t.emit("data",e.value)},t.freq)}Object.entries(Ki).forEach(([t,e])=>{Object.defineProperty(ct,t,{value:e})});ct.isAnalog=t=>{if(typeof t=="string"&&ct.isPrefixed(t,["I","A"]))return!0;if(typeof t=="object")return ct.isAnalog(typeof t.addr<"u"?t.addr:t.pin)};ct.isPrefixed=(t,e)=>(t=t[0],e.reduce((i,r)=>i||r===t,!1));ct.write=(t,e)=>{const i=bi.get(t);i.value=e,t.mode=Ki.OUTPUT,t.io[`${t.type}Write`](t.addr,e),t.emit("write",null,e)};ct.read=(t,e)=>{let i=!1;t.type===Oo&&t.mode!==0&&(i=!0,t.mode=Ki.INPUT),t.type===_r&&t.mode!==2&&(i=!0,t.mode=Ki.ANALOG),i&&Sc(t),t.on("data",()=>{e.call(t,null,t.value)})};["read","write"].forEach(t=>{ct.prototype[t]=function(e){return ct[t](this,e),this}});let Ac=class extends Rc.Emitter{constructor(e){super(e)}get type(){return ct}};Rc.installMethodForwarding(Ac.prototype,ct.prototype);ct.Collection=Ac;I1.IS_TEST_MODE&&(ct.purge=()=>{bi.clear()});var na=ct,M1={};const N0=we(),D1=De,P1=na,{toFixed:B0}=Ie,Ut=new Map,di={ADAFRUIT_ULTIMATE_GPS:{receiver:{value:"FGPMMOPA6H"}}},Ir={FGPMMOPA6H:{chip:{value:"MT3339"}}},Io={DEFAULT:{baud:{value:9600,writable:!0},configure:{value(t){ie.nextTick(t)}}},MT3339:{baud:{value:9600,writable:!0},configure:{value(t){ie.nextTick(t)}},frequency:{get(){return Ut.get(this).frequency},set(t){const e=Ut.get(this);t<10&&(t=10),e.frequency=t,this.sendCommand(`$PMTK220,${String(1e3/e.frequency)}`)}},restart:{value(t){t===!0?this.sendCommand("$PMTK103"):(this.sendCommand("$PMTK101"),setTimeout(()=>{this.sendCommand("")},1e3))}}}};class Bi extends D1{constructor(e){super(),Array.isArray(e)&&(e={pins:{rx:e[0],tx:e[1],onOff:e[2]}}),typeof e.pins>"u"&&(e.pins={}),N0.Component.call(this,e=N0.Options(e));let i=e.breakout||{},r=e.receiver,n=e.chip;di[i]&&(!r&&di[i].receiver&&(r=di[i].receiver.value),!n&&di[i].chip&&(n=di[i].chip.value)),n||(r&&Ir[r].chip?n=Ir[r].chip.value:n="DEFAULT"),i=typeof i=="string"?Io[i]:e.breakout,n=typeof n=="string"?Io[n]:e.chip,r=typeof r=="string"?Ir[r]:e.receiver,n&&Object.defineProperties(this,n),r&&Object.defineProperties(this,r),i&&Object.defineProperties(this,i),this.fixed=e.fixed||6,this.baud=e.baud||this.baud;let s={sat:{},latitude:0,longitude:0,altitude:0,speed:0,course:0,frequency:1,lowPowerMode:!1};Ut.set(this,s),Object.defineProperties(this,{latitude:{get(){return s.latitude}},longitude:{get(){return s.longitude}},altitude:{get(){return s.altitude}},sat:{get(){return s.sat}},speed:{get(){return s.speed}},course:{get(){return s.course}},time:{get(){return s.time}}}),this.initialize&&this.initialize(e)}initialize(e){const i=Ut.get(this);i.portId=e.serialPort||e.portId||e.port||e.bus,typeof i.portId>"u"&&this.io.SERIAL_PORT_IDs&&(i.portId=this.io.SERIAL_PORT_IDs.DEFAULT),["tx","rx"].forEach(r=>{this.pins[r]&&this.io.pinMode(this.pins[r],this.io.MODES.SERIAL)}),this.pins.onOff&&(this.io.pinMode(this.pins.onOff,this.io.MODES.OUTPUT),this.onOff=new P1(this.pins.onOff)),this.io.serialConfig({portId:i.portId,baud:this.baud,rxPin:this.pins.rx,txPin:this.pins.tx}),this.configure&&this.configure(()=>{this.listen(),e.frequency&&(this.frequency=e.frequency)})}sendCommand(e){const i=Ut.get(this),r=[];for(let s=0;s<e.length;++s)r[s]=e.charCodeAt(s);const n=F0(e.substring(1));r.push(42,n.charCodeAt(0),n.charCodeAt(1),13,10),this.io.serialWrite(i.portId,r)}listen(){const e=Ut.get(this);let i="";this.io.serialRead(e.portId,r=>{i+=new Ce(r).toString("ascii");const n=i.split(`\r
`);if(n.length>1){for(let s=0;s<n.length-1;s++)this.parseNmeaSentence(n[s]);i=n[n.length-1]}})}parseNmeaSentence(e){const i=Ut.get(this),r=e.split("*");if(r[1]!==F0(r[0].substring(1)))return;this.emit("sentence",e);const n=r[0].split(","),s={latitude:i.latitude,longitude:i.longitude,altitude:i.altitude,speed:i.speed,course:i.course};switch(n[0]){case"$GPGGA":i.time=n[1],i.latitude=Er(n[2],2,n[3],this.fixed),i.longitude=Er(n[4],3,n[5],this.fixed),i.altitude=Number(n[9]);break;case"$GPGSA":i.sat.satellites=n.slice(3,15),i.sat.pdop=Number(n[15]),i.sat.hdop=Number(n[16]),i.sat.vdop=Number(n[17]),this.emit("operations",e);break;case"$GPRMC":i.time=n[1],i.latitude=Er(n[3],2,n[4],this.fixed),i.longitude=Er(n[5],3,n[6],this.fixed),i.course=Number(n[8]),i.speed=B0(n[7]*.514444,this.fixed);break;case"$GPVTG":i.course=Number(n[1]),i.speed=B0(n[5]*.514444,this.fixed);break;case"$GPGSV":break;case"$PGACK":this.emit("acknowledge",e);break;default:this.emit("unknown",e);break}this.emit("data",{latitude:i.latitude,longitude:i.longitude,altitude:i.altitude,speed:i.speed,course:i.course,sat:i.sat,time:i.time}),(s.latitude!==i.latitude||s.longitude!==i.longitude||s.altitude!==i.altitude)&&this.emit("change",{latitude:i.latitude,longitude:i.longitude,altitude:i.altitude}),(s.speed!==i.speed||s.course!==i.course)&&this.emit("navigation",{speed:i.speed,course:i.course})}}function Er(t,e,i,r){if(t){let n=Number(t.substring(0,e))+Number(t.substring(e))/60;return(i==="S"||i==="W")&&(n*=-1),Number(n.toFixed(r))}else return 0}function F0(t){let e=0;for(let i=0;i<t.length;++i)e^=t.charCodeAt(i);return e=e.toString(16).toUpperCase(),e.length<2&&(e=`00${e}`.slice(-2)),e}M1.IS_TEST_MODE&&(Bi.Breakouts=di,Bi.Chips=Io,Bi.Receivers=Ir,Bi.purge=()=>{Ut.clear()});var L1=Bi,N1={MAPS:{MPR121QR2_SHIELD:{KEYS:{0:1,1:2,2:3,3:4,4:5,5:6,6:7,7:8,8:9},TARGETS:{256:0,32:1,4:2,128:3,16:4,2:5,64:6,8:7,1:8}},MPR121:{KEYS:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11},TARGETS:{1:0,2:1,4:2,8:3,16:4,32:5,64:6,128:7,256:8,512:9,1024:10,2048:11}},MPR121_KEYPAD:{KEYS:{0:1,1:2,2:3,3:4,4:5,5:6,6:7,7:8,8:9,9:10,10:11,11:12},TARGETS:{8:0,128:1,2048:2,4:3,64:4,1024:5,2:6,32:7,512:8,1:9,16:10,256:11}},MPR121_SHIELD:{KEYS:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11},TARGETS:{1:0,2:1,4:2,8:3,16:4,32:5,64:6,128:7,256:8,512:9,1024:10,2048:11}}},MPR121_DEFAULT_ADDRESS:90,MPR121_SOFTRESET:128,ELE0_ELE7_TOUCH_STATUS:0,ELE8_ELE11_ELEPROX_TOUCH_STATUS:1,ELE0_7_OOR_STATUS:2,ELE8_11_ELEPROX_OOR_STATUS:3,ELE0_FILTERED_DATA_LSB:4,ELE0_FILTERED_DATA_MSB:5,ELE1_FILTERED_DATA_LSB:6,ELE1_FILTERED_DATA_MSB:7,ELE2_FILTERED_DATA_LSB:8,ELE2_FILTERED_DATA_MSB:9,ELE3_FILTERED_DATA_LSB:10,ELE3_FILTERED_DATA_MSB:11,ELE4_FILTERED_DATA_LSB:12,ELE4_FILTERED_DATA_MSB:13,ELE5_FILTERED_DATA_LSB:14,ELE5_FILTERED_DATA_MSB:15,ELE6_FILTERED_DATA_LSB:16,ELE6_FILTERED_DATA_MSB:17,ELE7_FILTERED_DATA_LSB:18,ELE7_FILTERED_DATA_MSB:19,ELE8_FILTERED_DATA_LSB:20,ELE8_FILTERED_DATA_MSB:21,ELE9_FILTERED_DATA_LSB:22,ELE9_FILTERED_DATA_MSB:23,ELE10_FILTERED_DATA_LSB:24,ELE10_FILTERED_DATA_MSB:25,ELE11_FILTERED_DATA_LSB:26,ELE11_FILTERED_DATA_MSB:27,ELEPROX_FILTERED_DATA_LSB:28,ELEPROX_FILTERED_DATA_MSB:29,ELE0_BASELINE_VALUE:30,ELE1_BASELINE_VALUE:31,ELE2_BASELINE_VALUE:32,ELE3_BASELINE_VALUE:33,ELE4_BASELINE_VALUE:34,ELE5_BASELINE_VALUE:35,ELE6_BASELINE_VALUE:36,ELE7_BASELINE_VALUE:37,ELE8_BASELINE_VALUE:38,ELE9_BASELINE_VALUE:39,ELE10_BASELINE_VALUE:40,ELE11_BASELINE_VALUE:41,ELEPROX_BASELINE_VALUE:42,MHD_RISING:43,NHD_AMOUNT_RISING:44,NCL_RISING:45,FDL_RISING:46,MHD_FALLING:47,NHD_AMOUNT_FALLING:48,NCL_FALLING:49,FDL_FALLING:50,NHD_AMOUNT_TOUCHED:51,NCL_TOUCHED:52,FDL_TOUCHED:53,ELEPROX_MHD_RISING:54,ELEPROX_NHD_AMOUNT_RISING:55,ELEPROX_NCL_RISING:56,ELEPROX_FDL_RISING:57,ELEPROX_MHD_FALLING:58,ELEPROX_NHD_AMOUNT_FALLING:59,ELEPROX_FDL_FALLING:60,ELEPROX_NHD_AMOUNT_TOUCHED:62,ELEPROX_NCL_TOUCHED:63,ELEPROX_FDL_TOUCHED:64,ELE0_TOUCH_THRESHOLD:65,ELE0_RELEASE_THRESHOLD:66,ELE1_TOUCH_THRESHOLD:67,ELE1_RELEASE_THRESHOLD:68,ELE2_TOUCH_THRESHOLD:69,ELE2_RELEASE_THRESHOLD:70,ELE3_TOUCH_THRESHOLD:71,ELE3_RELEASE_THRESHOLD:72,ELE4_TOUCH_THRESHOLD:73,ELE4_RELEASE_THRESHOLD:74,ELE5_TOUCH_THRESHOLD:75,ELE5_RELEASE_THRESHOLD:76,ELE6_TOUCH_THRESHOLD:77,ELE6_RELEASE_THRESHOLD:78,ELE7_TOUCH_THRESHOLD:79,ELE7_RELEASE_THRESHOLD:80,ELE8_TOUCH_THRESHOLD:81,ELE8_RELEASE_THRESHOLD:82,ELE9_TOUCH_THRESHOLD:83,ELE9_RELEASE_THRESHOLD:84,ELE10_TOUCH_THRESHOLD:85,ELE10_RELEASE_THRESHOLD:86,ELE11_TOUCH_THRESHOLD:87,ELE11_RELEASE_THRESHOLD:88,ELEPROX_TOUCH_THRESHOLD:89,ELEPROX_RELEASE_THRESHOLD:90,DEBOUNCE_TOUCH_AND_RELEASE:91,AFE_CONFIGURATION:92,FILTER_CONFIG:93,ELECTRODE_CONFIG:94,ELE0_CURRENT:95,ELE1_CURRENT:96,ELE2_CURRENT:97,ELE3_CURRENT:98,ELE4_CURRENT:99,ELE5_CURRENT:100,ELE6_CURRENT:101,ELE7_CURRENT:102,ELE8_CURRENT:103,ELE9_CURRENT:104,ELE10_CURRENT:105,ELE11_CURRENT:106,ELEPROX_CURRENT:107,ELE0_ELE1_CHARGE_TIME:108,ELE2_ELE3_CHARGE_TIME:109,ELE4_ELE5_CHARGE_TIME:110,ELE6_ELE7_CHARGE_TIME:111,ELE8_ELE9_CHARGE_TIME:112,ELE10_ELE11_CHARGE_TIME:113,ELEPROX_CHARGE_TIME:114,GPIO_CONTROL_0:115,GPIO_CONTROL_1:116,GPIO_DATA:117,GPIO_DIRECTION:118,GPIO_ENABLE:119,GPIO_SET:120,GPIO_CLEAR:121,GPIO_TOGGLE:122,AUTO_CONFIG_CONTROL_0:123,AUTO_CONFIG_CONTROL_1:124,AUTO_CONFIG_USL:125,AUTO_CONFIG_LSL:126,AUTO_CONFIG_TARGET_LEVEL:127,TOUCH_THRESHOLD:15,RELEASE_THRESHOLD:10,NUM_CHANNELS:12},B1={};const ro=we(),F1=De,sa=Ie,{scale:G0,toFixed:U0,uint16:vr}=sa,$e=new Map,G1={down:["down","press","tap","impact","hit","touch"],up:["up","release"],hold:["hold"]};function U1(t){return t.flat?t.flat():t.reduce((e,i)=>e.concat(i),[])}function Kt(t){let e=[];return t.keys&&Array.isArray(t.keys)&&(e=t.keys.slice(),e.every(Array.isArray)&&(e=U1(e))),e}const ht={MPR121:{ADDRESSES:{value:[90,91,92,93]},REGISTER:{value:N1},initialize:{value(t,e){const{Drivers:i}=fe(),r=i.addressResolver(this,t),n=$e.get(this),s=this.REGISTER.MAPS[t.controller].KEYS,o=this.REGISTER.MAPS[t.controller].TARGETS,u=Object.keys(s).reduce((f,x)=>(f[x]=s[x],f),[]);let h=Kt(t);const g=u.length;this.io.i2cConfig(t),this.io.i2cWrite(r,this.REGISTER.MPR121_SOFTRESET,99),this.io.i2cWrite(r,this.REGISTER.MHD_RISING,1),this.io.i2cWrite(r,this.REGISTER.NHD_AMOUNT_RISING,1),this.io.i2cWrite(r,this.REGISTER.NCL_RISING,0),this.io.i2cWrite(r,this.REGISTER.FDL_RISING,0),this.io.i2cWrite(r,this.REGISTER.MHD_FALLING,1),this.io.i2cWrite(r,this.REGISTER.NHD_AMOUNT_FALLING,1),this.io.i2cWrite(r,this.REGISTER.NCL_FALLING,255),this.io.i2cWrite(r,this.REGISTER.FDL_FALLING,2),this.sensitivity={press:Array(12).fill(.95),release:Array(12).fill(.975)},t.keys&&t.controller==="MPR121_SHIELD"&&(h=h.reverse()),t.sensitivity&&(Array.isArray(t.sensitivity)?t.sensitivity.forEach(function({press:f,release:x},a){typeof f<"u"&&(this.sensitivity.press[a]=f),typeof x<"u"&&(this.sensitivity.release[a]=x)},this):(typeof t.sensitivity.press<"u"&&this.sensitivity.press.fill(t.sensitivity.press),typeof t.sensitivity.release<"u"&&this.sensitivity.release.fill(t.sensitivity.release)));for(let f=0;f<12;f++)this.io.i2cWrite(r,this.REGISTER.ELE0_TOUCH_THRESHOLD+(f<<1),G0(U0(1-this.sensitivity.press[f],3),0,1,0,255)),this.io.i2cWrite(r,this.REGISTER.ELE0_RELEASE_THRESHOLD+(f<<1),G0(U0(1-this.sensitivity.release[f],3),0,1,0,255));this.io.i2cWrite(r,this.REGISTER.FILTER_CONFIG,19),this.io.i2cWrite(r,this.REGISTER.AFE_CONFIGURATION,128),this.io.i2cWrite(r,this.REGISTER.AUTO_CONFIG_CONTROL_0,143),this.io.i2cWrite(r,this.REGISTER.AUTO_CONFIG_USL,228),this.io.i2cWrite(r,this.REGISTER.AUTO_CONFIG_LSL,148),this.io.i2cWrite(r,this.REGISTER.AUTO_CONFIG_TARGET_LEVEL,205),this.io.i2cWrite(r,this.REGISTER.ELECTRODE_CONFIG,204),h.length||(h=Array.from(Object.assign({},s,{length:g}))),n.length=g,n.touches=Yt(g),n.keys=h,n.mapping=u,n.targets=o,n.isMultitouch=!0,this.io.i2cRead(r,0,2,f=>e(vr(f[1],f[0])))}},toAlias:{value(t){return $e.get(this).keys[t]}},toIndices:{value(t){const e=$e.get(this),i=[];for(let r=0;r<12;r++)t&1<<r&&i.push(e.targets[t&1<<r]);return i}}},VKEY:{initialize:{value(t,e){const i=$e.get(this),r=t.aref||this.io.aref||5,n=sa.inRange(r,4.5,5.5),s=[1,2,3,4,5,6,7,8,9,10,11,12];let o=Kt(t),u=0;o.length||(o=s),i.scale=[n?17:26,n?40:58,n?496:721],u=s.length,i.length=u,i.touches=Yt(u),i.mapping=s,i.keys=o,i.isMultitouch=!1,this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,h=>e(h))}},toAlias:{value(t){return $e.get(this).keys[t]}},toIndices:{value(t){const e=$e.get(this),i=e.length,r=e.scale[0],n=e.scale[1],s=e.scale[2];return t<r||t>s?[]:[i-(t-r)/n|0]}}},ANALOG:{initialize:{value(t,e){let i=Kt(t),r=[],n=0;if(t.length&&!i.length&&(i=Array.from({length:t.length},(g,f)=>f)),!i.length)throw new Error("Missing `keys`. Analog Keypad requires either a numeric `length` or a `keys` array.");r=i,n=r.length;const s=$e.get(this),o=n+1,u=Math.round(1023/o),h=Array.from({length:o},(g,f)=>{const x=u*f;return Array.from({length:u-1},(a,d)=>x+d)});s.length=n,s.ranges=h,s.touches=Yt(n),s.mapping=r,s.keys=i,s.isMultitouch=!0,this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,g=>e(g))}},toAlias:{value(t){return $e.get(this).keys[t]}},toIndices:{value(t){const e=$e.get(this);let r=e.ranges.findIndex(n=>n.includes(t));return r===e.length&&r--,r<0?[]:[r]}}},AT42QT1070:{ADDRESSES:{value:[27]},REGISTER:{value:{READ:3}},initialize:{value(t,e){const{Drivers:i}=fe(),r=i.addressResolver(this,t),n=$e.get(this),s=[0,1,2,3,4,5,6];let o=Kt(t),u=0;o.length||(o=s),u=s.length,n.length=u,n.touches=Yt(u),n.mapping=s,n.keys=o,n.isMultitouch=!0,this.io.i2cConfig(t),this.io.i2cRead(r,this.REGISTER.READ,1,h=>e(h[0]))}},toAlias:{value(t){return $e.get(this).keys[t]}},toIndices:{value(t){const e=[];for(let i=0;i<7;i++)t&1<<i&&e.push(i);return e}}},"3X4_I2C_NANO_BACKPACK":{ADDRESSES:{value:[10,11,12,13]},initialize:{value(t,e){const{Drivers:i}=fe(),r=i.addressResolver(this,t),n=$e.get(this),s=[1,2,3,4,5,6,7,8,9,"*",0,"#"];let o=Kt(t),u=0;o.length||(o=s),u=s.length,n.length=u,n.touches=Yt(u),n.mapping=s,n.keys=o,n.isMultitouch=!0,this.io.i2cConfig(t),this.io.i2cRead(r,2,h=>e(vr(h[0],h[1])))}},toAlias:{value(t){return $e.get(this).keys[t]}},toIndices:{value(t){const e=$e.get(this),i=[];for(let r=0;r<e.length;r++)t&1<<r&&i.push(r);return i}}},"4X4_I2C_NANO_BACKPACK":{ADDRESSES:{value:[10,11,12,13]},initialize:{value(t,e){const{Drivers:i}=fe(),r=i.addressResolver(this,t),n=$e.get(this);let s=Kt(t);const o=[1,2,3,"A",4,5,6,"B",7,8,9,"C","*",0,"#","D"];let u=0;s.length||(s=o),u=o.length,n.length=u,n.touches=Yt(u),n.mapping=o,n.keys=s,n.isMultitouch=!0,this.io.i2cConfig(t),this.io.i2cRead(r,2,h=>e(vr(h[0],h[1])))}},toAlias:{value(t){return $e.get(this).keys[t]}},toIndices:{value(t){const e=$e.get(this),i=[];for(let r=0;r<e.length;r++)t&1<<r&&i.push(r);return i}}},SX1509:{ADDRESSES:{value:[10,11,12,13]},REGISTER:{value:{PULLUP:3,OPEN_DRAIN:5,DIR:7,DIR_B:14,DIR_A:15}},initialize:{value(t,e){const{Drivers:i}=fe(),r=i.addressResolver(this,t),n=$e.get(this);let s=Kt(t);const o=[1,2,3,4,5,6,7,8,9,"*",0,"#"];let u=0;s.length||(s=o),u=o.length,n.length=u,n.touches=Yt(u),n.mapping=o,n.keys=s,n.isMultitouch=!0,this.io.i2cConfig(t),this.io.i2cWriteReg(r,this.REGISTER.DIR,240),this.io.i2cWriteReg(r,this.REGISTER.OPEN_DRAIN,15),this.io.i2cWriteReg(r,this.REGISTER.PULLUP,240),this.io.i2cRead(r,2,h=>e(vr(h[0],h[1])))}},toAlias:{value(t){return $e.get(this).keys[t]}},toIndices:{value(t){const e=$e.get(this),i=[];for(let r=0;r<e.length;r++)t&1<<r&&i.push(r);return i}}}};ht.MPR121QR2=ht.MPR121;ht.MPR121QR2_SHIELD=ht.MPR121;ht.MPR121_KEYPAD=ht.MPR121;ht.MPR121_SHIELD=ht.MPR121;ht.QTOUCH=ht.AT42QT1070;ht.DEFAULT=ht.ANALOG;function Yt(t){return Array.from({length:t},()=>({timeout:null,value:0}))}class Co extends F1{constructor(e){super(),ro.Component.call(this,e=ro.Options(e));let i=null;const r={touches:null,timeout:null,length:null,keys:null,mapping:null,holdtime:null},n=sa.debounce(function(s,o){const u={type:s,which:o,timestamp:Date.now()};G1[s].forEach(function(h){this.emit(h,u)},this),this.emit("change",Object.assign({},u))},5);ro.Controller.call(this,ht,e),r.holdtime=e.holdtime?e.holdtime:500,$e.set(this,r),typeof this.initialize=="function"&&this.initialize(e,s=>{i=s;const o=Date.now(),u=this.toIndices(s),h=r.length,g={down:[],hold:[],up:[]};let f=null;for(let x=0;x<h;x++)f=this.toAlias(x),u.includes(x)?(r.touches[x].value===0?(r.touches[x].timeout=o+r.holdtime,g.down.push(f)):r.touches[x].value===1&&r.touches[x].timeout!==null&&o>r.touches[x].timeout&&(r.touches[x].timeout=o+r.holdtime,g.hold.push(f)),r.touches[x].value=1):(r.touches[x].value===1&&(r.touches[x].timeout=null,g.up.push(f)),r.touches[x].value=0),f=null;Object.keys(g).forEach(function(x){const a=g[x];a.length&&n.call(this,x,a)},this)}),Object.defineProperties(this,{isMultitouch:{get(){return r.isMultitouch}},value:{get(){return i}}})}}B1.IS_TEST_MODE&&(Co.Controllers=ht,Co.purge=()=>{$e.clear()});var W1=Co,$1={DEFAULT:{0:[14,27,27,27,27,27,14,0],1:[2,6,14,6,6,6,6,0],2:[14,27,3,6,12,24,31,0],3:[14,27,3,14,3,27,14,0],4:[3,7,15,27,31,3,3,0],5:[31,24,30,3,3,27,14,0],6:[14,27,24,30,27,27,14,0],7:[31,3,6,12,12,12,12,0],8:[14,27,27,14,27,27,14,0],9:[14,27,27,15,3,27,14,0],10:[23,21,21,21,23,0,31,0],11:[10,10,10,10,10,0,31,0],12:[23,17,23,20,23,0,31,0],13:[23,17,19,17,23,0,31,0],14:[21,21,23,17,17,0,31,0],15:[23,20,23,17,23,0,31,0],16:[23,20,23,21,23,0,31,0],17:[23,17,18,18,18,0,31,0],18:[23,21,23,21,23,0,31,0],19:[23,21,23,17,23,0,31,0],circle:[0,14,17,17,17,14,0,0],cdot:[0,14,17,21,17,14,0,0],donut:[0,14,31,27,31,14,0,0],ball:[0,14,31,31,31,14,0,0],square:[0,31,17,17,17,31,0,0],sdot:[0,31,17,21,17,31,0,0],fbox:[0,31,31,31,31,31,0,0],sbox:[0,0,14,10,14,0,0,0],sfbox:[0,0,14,14,14,0,0,0],bigpointerright:[8,12,10,9,10,12,8,0],bigpointerleft:[2,6,10,18,10,6,2,0],arrowright:[8,12,10,9,10,12,8,0],arrowleft:[2,6,10,18,10,6,2,0],ascprogress1:[16,16,16,16,16,16,16,16],ascprogress2:[24,24,24,24,24,24,24,24],ascprogress3:[28,28,28,28,28,28,28,28],ascprogress4:[30,30,30,30,30,30,30,30],fullprogress:[31,31,31,31,31,31,31,31],descprogress1:[1,1,1,1,1,1,1,1],descprogress2:[3,3,3,3,3,3,3,3],descprogress3:[7,7,7,7,7,7,7,7],descprogress4:[15,15,15,15,15,15,15,15],ascchart1:[31,0,0,0,0,0,0,0],ascchart2:[31,31,0,0,0,0,0,0],ascchart3:[31,31,31,0,0,0,0,0],ascchart4:[31,31,31,31,0,0,0,0],ascchart5:[31,31,31,31,31,0,0,0],ascchart6:[31,31,31,31,31,31,0,0],ascchart7:[31,31,31,31,31,31,31,0],descchart1:[0,0,0,0,0,0,0,31],descchart2:[0,0,0,0,0,0,31,31],descchart3:[0,0,0,0,0,31,31,31],descchart4:[0,0,0,0,31,31,31,31],descchart5:[0,0,0,31,31,31,31,31],descchart6:[0,0,31,31,31,31,31,31],descchart7:[0,31,31,31,31,31,31,31],borderleft1:[1,1,1,1,1,1,1,1],borderleft2:[3,2,2,2,2,2,2,3],borderleft3:[7,4,4,4,4,4,4,7],borderleft4:[15,8,8,8,8,8,8,15],borderleft5:[31,16,16,16,16,16,16,31],bordertopbottom5:[31,0,0,0,0,0,0,31],borderright1:[16,16,16,16,16,16,16,16],borderright2:[24,8,8,8,8,8,8,24],borderright3:[28,4,4,4,4,4,4,28],borderright4:[30,2,2,2,2,2,2,30],borderright5:[31,1,1,1,1,1,1,31],box1:[3,3,3,0,0,0,0,0],box2:[24,24,24,0,0,0,0,0],box3:[27,27,27,0,0,0,0,0],box4:[0,0,0,0,3,3,3,0],box5:[3,3,3,0,3,3,3,0],box6:[24,24,24,0,3,3,3,0],box7:[27,27,27,0,3,3,3,0],box8:[0,0,0,0,24,24,24,0],box9:[3,3,3,0,24,24,24,0],box10:[24,24,24,0,24,24,24,0],box11:[27,27,27,0,24,24,24,0],box12:[0,0,0,0,27,27,27,0],box13:[3,3,3,0,27,27,27,0],box14:[24,24,24,0,27,27,27,0],box15:[27,27,27,0,27,27,27,0],euro:[3,4,30,8,30,8,7,0],cent:[0,0,14,17,16,21,14,8],speaker:[1,3,15,15,15,3,1,0],sound:[8,16,0,24,0,16,8,0],x:[0,27,14,4,14,27,0,0],target:[0,10,17,21,17,10,0,0],pointerright:[0,8,12,14,12,8,0,0],pointerup:[0,0,4,14,31,0,0,0],pointerleft:[0,2,6,14,6,2,0,0],pointerdown:[0,0,31,14,4,0,0,0],arrowne:[0,15,3,5,9,16,0,0],arrownw:[0,30,24,20,18,1,0,0],arrowsw:[0,1,18,20,24,30,0,0],arrowse:[0,16,9,5,3,15,0,0],dice1:[0,0,0,4,0,0,0,0],dice2:[0,16,0,0,0,1,0,0],dice3:[0,16,0,4,0,1,0,0],dice4:[0,17,0,0,0,17,0,0],dice5:[0,17,0,4,0,17,0,0],dice6:[0,17,0,17,0,17,0,0],bell:[4,14,14,14,31,0,4,0],smile:[0,10,0,17,14,0,0,0],note:[2,3,2,14,30,12,0,0],clock:[0,14,21,23,17,14,0,0],heart:[0,10,31,31,31,14,4,0],duck:[0,12,29,15,15,6,0,0],check:[0,1,3,22,28,8,0,0],retarrow:[1,1,5,9,31,8,4,0],runninga:[6,6,5,14,20,4,10,17],runningb:[6,6,4,14,14,4,10,10]}},Tc={exports:{}},H1={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Cr=H1,wc={};for(var no in Cr)Cr.hasOwnProperty(no)&&(wc[Cr[no].join()]=no);var Re=Tc.exports={rgb:{channels:3},hsl:{channels:3},hsv:{channels:3},hwb:{channels:3},cmyk:{channels:4},xyz:{channels:3},lab:{channels:3},lch:{channels:3},hex:{channels:1},keyword:{channels:1},ansi16:{channels:1},ansi256:{channels:1},hcg:{channels:3}};for(var ci in Re)if(Re.hasOwnProperty(ci)){if(!("channels"in Re[ci]))throw new Error("missing channels property: "+ci);var k1=Re[ci].channels;delete Re[ci].channels,Object.defineProperty(Re[ci],"channels",{value:k1})}Re.rgb.hsl=function(t){var e=t[0]/255,i=t[1]/255,r=t[2]/255,n=Math.min(e,i,r),s=Math.max(e,i,r),o=s-n,u,h,g;return s===n?u=0:e===s?u=(i-r)/o:i===s?u=2+(r-e)/o:r===s&&(u=4+(e-i)/o),u=Math.min(u*60,360),u<0&&(u+=360),g=(n+s)/2,s===n?h=0:g<=.5?h=o/(s+n):h=o/(2-s-n),[u,h*100,g*100]};Re.rgb.hsv=function(t){var e=t[0],i=t[1],r=t[2],n=Math.min(e,i,r),s=Math.max(e,i,r),o=s-n,u,h,g;return s===0?h=0:h=o/s*1e3/10,s===n?u=0:e===s?u=(i-r)/o:i===s?u=2+(r-e)/o:r===s&&(u=4+(e-i)/o),u=Math.min(u*60,360),u<0&&(u+=360),g=s/255*1e3/10,[u,h,g]};Re.rgb.hwb=function(t){var e=t[0],i=t[1],r=t[2],n=Re.rgb.hsl(t)[0],s=1/255*Math.min(e,Math.min(i,r));return r=1-1/255*Math.max(e,Math.max(i,r)),[n,s*100,r*100]};Re.rgb.cmyk=function(t){var e=t[0]/255,i=t[1]/255,r=t[2]/255,n,s,o,u;return u=Math.min(1-e,1-i,1-r),n=(1-e-u)/(1-u)||0,s=(1-i-u)/(1-u)||0,o=(1-r-u)/(1-u)||0,[n*100,s*100,o*100,u*100]};Re.rgb.keyword=function(t){return wc[t.join()]};Re.keyword.rgb=function(t){return Cr[t]};Re.rgb.xyz=function(t){var e=t[0]/255,i=t[1]/255,r=t[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;var n=e*.4124+i*.3576+r*.1805,s=e*.2126+i*.7152+r*.0722,o=e*.0193+i*.1192+r*.9505;return[n*100,s*100,o*100]};Re.rgb.lab=function(t){var e=Re.rgb.xyz(t),i=e[0],r=e[1],n=e[2],s,o,u;return i/=95.047,r/=100,n/=108.883,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,s=116*r-16,o=500*(i-r),u=200*(r-n),[s,o,u]};Re.hsl.rgb=function(t){var e=t[0]/360,i=t[1]/100,r=t[2]/100,n,s,o,u,h;if(i===0)return h=r*255,[h,h,h];r<.5?s=r*(1+i):s=r+i-r*i,n=2*r-s,u=[0,0,0];for(var g=0;g<3;g++)o=e+1/3*-(g-1),o<0&&o++,o>1&&o--,6*o<1?h=n+(s-n)*6*o:2*o<1?h=s:3*o<2?h=n+(s-n)*(2/3-o)*6:h=n,u[g]=h*255;return u};Re.hsl.hsv=function(t){var e=t[0],i=t[1]/100,r=t[2]/100,n,s;return r===0?[0,0,0]:(r*=2,i*=r<=1?r:2-r,s=(r+i)/2,n=2*i/(r+i),[e,n*100,s*100])};Re.hsv.rgb=function(t){var e=t[0]/60,i=t[1]/100,r=t[2]/100,n=Math.floor(e)%6,s=e-Math.floor(e),o=255*r*(1-i),u=255*r*(1-i*s),h=255*r*(1-i*(1-s));switch(r*=255,n){case 0:return[r,h,o];case 1:return[u,r,o];case 2:return[o,r,h];case 3:return[o,u,r];case 4:return[h,o,r];case 5:return[r,o,u]}};Re.hsv.hsl=function(t){var e=t[0],i=t[1]/100,r=t[2]/100,n,s;return s=(2-i)*r,n=i*r,n/=s<=1?s:2-s,n=n||0,s/=2,[e,n*100,s*100]};Re.hwb.rgb=function(t){var e=t[0]/360,i=t[1]/100,r=t[2]/100,n=i+r,s,o,u,h;n>1&&(i/=n,r/=n),s=Math.floor(6*e),o=1-r,u=6*e-s,s&1&&(u=1-u),h=i+u*(o-i);var g,f,x;switch(s){default:case 6:case 0:g=o,f=h,x=i;break;case 1:g=h,f=o,x=i;break;case 2:g=i,f=o,x=h;break;case 3:g=i,f=h,x=o;break;case 4:g=h,f=i,x=o;break;case 5:g=o,f=i,x=h;break}return[g*255,f*255,x*255]};Re.cmyk.rgb=function(t){var e=t[0]/100,i=t[1]/100,r=t[2]/100,n=t[3]/100,s,o,u;return s=1-Math.min(1,e*(1-n)+n),o=1-Math.min(1,i*(1-n)+n),u=1-Math.min(1,r*(1-n)+n),[s*255,o*255,u*255]};Re.xyz.rgb=function(t){var e=t[0]/100,i=t[1]/100,r=t[2]/100,n,s,o;return n=e*3.2406+i*-1.5372+r*-.4986,s=e*-.9689+i*1.8758+r*.0415,o=e*.0557+i*-.204+r*1.057,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s*=12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*=12.92,n=Math.min(Math.max(0,n),1),s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),[n*255,s*255,o*255]};Re.xyz.lab=function(t){var e=t[0],i=t[1],r=t[2],n,s,o;return e/=95.047,i/=100,r/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=116*i-16,s=500*(e-i),o=200*(i-r),[n,s,o]};Re.lab.xyz=function(t){var e=t[0],i=t[1],r=t[2],n,s,o,u;return e<=8?(s=e*100/903.3,u=7.787*(s/100)+16/116):(s=100*Math.pow((e+16)/116,3),u=Math.pow(s/100,1/3)),n=n/95.047<=.008856?n=95.047*(i/500+u-16/116)/7.787:95.047*Math.pow(i/500+u,3),o=o/108.883<=.008859?o=108.883*(u-r/200-16/116)/7.787:108.883*Math.pow(u-r/200,3),[n,s,o]};Re.lab.lch=function(t){var e=t[0],i=t[1],r=t[2],n,s,o;return n=Math.atan2(r,i),s=n*360/2/Math.PI,s<0&&(s+=360),o=Math.sqrt(i*i+r*r),[e,o,s]};Re.lch.lab=function(t){var e=t[0],i=t[1],r=t[2],n,s,o;return o=r/360*2*Math.PI,n=i*Math.cos(o),s=i*Math.sin(o),[e,n,s]};Re.rgb.ansi16=function(t){var e=t[0],i=t[1],r=t[2],n=1 in arguments?arguments[1]:Re.rgb.hsv(t)[2];if(n=Math.round(n/50),n===0)return 30;var s=30+(Math.round(r/255)<<2|Math.round(i/255)<<1|Math.round(e/255));return n===2&&(s+=60),s};Re.hsv.ansi16=function(t){return Re.rgb.ansi16(Re.hsv.rgb(t),t[2])};Re.rgb.ansi256=function(t){var e=t[0],i=t[1],r=t[2];if(e===i&&i===r)return e<8?16:e>248?231:Math.round((e-8)/247*24)+232;var n=16+36*Math.round(e/255*5)+6*Math.round(i/255*5)+Math.round(r/255*5);return n};Re.ansi16.rgb=function(t){var e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];var i=(~~(t>50)+1)*.5,r=(e&1)*i*255,n=(e>>1&1)*i*255,s=(e>>2&1)*i*255;return[r,n,s]};Re.ansi256.rgb=function(t){if(t>=232){var e=(t-232)*10+8;return[e,e,e]}t-=16;var i,r=Math.floor(t/36)/5*255,n=Math.floor((i=t%36)/6)/5*255,s=i%6/5*255;return[r,n,s]};Re.rgb.hex=function(t){var e=((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255),i=e.toString(16).toUpperCase();return"000000".substring(i.length)+i};Re.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}/i);if(!e)return[0,0,0];var i=parseInt(e[0],16),r=i>>16&255,n=i>>8&255,s=i&255;return[r,n,s]};Re.rgb.hcg=function(t){var e=t[0]/255,i=t[1]/255,r=t[2]/255,n=Math.max(Math.max(e,i),r),s=Math.min(Math.min(e,i),r),o=n-s,u,h;return o<1?u=s/(1-o):u=0,o<=0?h=0:n===e?h=(i-r)/o%6:n===i?h=2+(r-e)/o:h=4+(e-i)/o+4,h/=6,h%=1,[h*360,o*100,u*100]};Re.hsl.hcg=function(t){var e=t[1]/100,i=t[2]/100,r=1,n=0;return i<.5?r=2*e*i:r=2*e*(1-i),r<1&&(n=(i-.5*r)/(1-r)),[t[0],r*100,n*100]};Re.hsv.hcg=function(t){var e=t[1]/100,i=t[2]/100,r=e*i,n=0;return r<1&&(n=(i-r)/(1-r)),[t[0],r*100,n*100]};Re.hcg.rgb=function(t){var e=t[0]/360,i=t[1]/100,r=t[2]/100;if(i===0)return[r*255,r*255,r*255];var n=[0,0,0],s=e%1*6,o=s%1,u=1-o,h=0;switch(Math.floor(s)){case 0:n[0]=1,n[1]=o,n[2]=0;break;case 1:n[0]=u,n[1]=1,n[2]=0;break;case 2:n[0]=0,n[1]=1,n[2]=o;break;case 3:n[0]=0,n[1]=u,n[2]=1;break;case 4:n[0]=o,n[1]=0,n[2]=1;break;default:n[0]=1,n[1]=0,n[2]=u}return h=(1-i)*r,[(i*n[0]+h)*255,(i*n[1]+h)*255,(i*n[2]+h)*255]};Re.hcg.hsv=function(t){var e=t[1]/100,i=t[2]/100,r=e+i*(1-e),n=0;return r>0&&(n=e/r),[t[0],n*100,r*100]};Re.hcg.hsl=function(t){var e=t[1]/100,i=t[2]/100,r=i*(1-e)+.5*e,n=0;return r>0&&r<.5?n=e/(2*r):r>=.5&&r<1&&(n=e/(2*(1-r))),[t[0],n*100,r*100]};var _c=Tc.exports,$r=_c,W0=Object.keys($r);function j1(){for(var t={},e=W0.length,i=0;i<e;i++)t[W0[i]]={distance:-1,parent:null};return t}function z1(t){var e=j1(),i=[t];for(e[t].distance=0;i.length;)for(var r=i.pop(),n=Object.keys($r[r]),s=n.length,o=0;o<s;o++){var u=n[o],h=e[u];h.distance===-1&&(h.distance=e[r].distance+1,h.parent=r,i.unshift(u))}return e}function q1(t,e){return function(i){return e(t(i))}}function V1(t,e){for(var i=[e[t].parent,t],r=$r[e[t].parent][t],n=e[t].parent;e[n].parent;)i.unshift(e[n].parent),r=q1($r[e[n].parent][n],r),n=e[n].parent;return r.conversion=i,r}var K1=function(t){for(var e=z1(t),i={},r=Object.keys(e),n=r.length,s=0;s<n;s++){var o=r[s],u=e[o];u.parent!==null&&(i[o]=V1(o,e))}return i},Oc=_c,Y1=K1,Fi={},X1=Object.keys(Oc);function Q1(t){var e=function(i){return i==null?i:(arguments.length>1&&(i=Array.prototype.slice.call(arguments)),t(i))};return"conversion"in t&&(e.conversion=t.conversion),e}function Z1(t){var e=function(i){if(i==null)return i;arguments.length>1&&(i=Array.prototype.slice.call(arguments));var r=t(i);if(typeof r=="object")for(var n=r.length,s=0;s<n;s++)r[s]=Math.round(r[s]);return r};return"conversion"in t&&(e.conversion=t.conversion),e}X1.forEach(function(t){Fi[t]={},Object.defineProperty(Fi[t],"channels",{value:Oc[t].channels});var e=Y1(t),i=Object.keys(e);i.forEach(function(r){var n=e[r];Fi[t][r]=Z1(n),Fi[t][r].raw=Q1(n)})});var J1=Fi,ex={};const Mr=we(),Mo=Ci,tx=kt(),ix=J1,{constrain:Hr,map:rx}=Ie,ft=new Map,ki={DEFAULT:{initialize:{value({pins:t,debug:e}){tt.colors.forEach((i,r)=>{const n=t[r];e&&!this.board.pins.isPwm(n)&&Mr.Pins.Error({pin:n,type:"PWM",via:"Led.RGB"}),this.io.pinMode(n,this.io.MODES.PWM),this.pins[r]=n})}},write:{writable:!0,value(t){const e=ft.get(this);tt.colors.forEach((i,r)=>{const n=this.pins[r];let s=t[i];e.isAnode&&(s=255-Hr(s,0,255)),s=rx(s,0,255,0,this.board.RESOLUTION.PWM),this.io.analogWrite(n,s)})}}},PCA9685:{initialize:{value({address:t,pwmRange:e,frequency:i,pins:r}){const n=ft.get(this);this.address=t||64,this.pwmRange=e||[0,4095],this.frequency=i||200,n.expander=tx.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),tt.colors.forEach((s,o)=>{this.pins[o]=n.expander.normalize(r[o]),n.expander.analogWrite(this.pins[o],0)})}},write:{writable:!0,value(t){const e=ft.get(this);tt.colors.forEach((i,r)=>{const n=this.pins[r];let s=t[i];e.isAnode&&(s=255-Hr(s,0,255)),e.expander.analogWrite(n,s)})}}},BLINKM:{REGISTER:{value:{GO_TO_RGB_COLOR_NOW:110,STOP_SCRIPT:111}},initialize:{value(t){this.address=t.address||9,t.address=this.address,this.board.Drivers[this.address]||(this.io.i2cConfig(t),this.board.Drivers[this.address]={initialized:!1},this.io.i2cWrite(this.address,[this.REGISTER.STOP_SCRIPT]),this.board.Drivers[this.address].initialized=!0)}},write:{writable:!0,value({red:t,green:e,blue:i}){this.io.i2cWrite(this.address,[this.REGISTER.GO_TO_RGB_COLOR_NOW,t,e,i])}}}};ki.ESPLORA={initialize:{value(t){t.pins=[5,10,9],this.pins=[],ki.DEFAULT.initialize.value.call(this,t)}},write:ki.DEFAULT.write};let tt=class Mt{constructor(e){Array.isArray(e)?e={pins:e}:typeof e.pins=="object"&&!Array.isArray(e.pins)&&(e.pins=[e.pins.red,e.pins.green,e.pins.blue]),Mr.Component.call(this,e=Mr.Options(e)),Mr.Controller.call(this,ki,e);const i={red:255,green:255,blue:255,intensity:100,isAnode:e.isAnode||!1,interval:null,values:{red:255,green:255,blue:255}};ft.set(this,i),Object.defineProperties(this,{isOn:{get(){return Mt.colors.some(r=>i[r]>0)}},isRunning:{get(){return!!i.interval}},isAnode:{get(){return i.isAnode}},values:{get(){return Object.assign({},i.values)}},update:{value(r){const n=ft.get(this);r=r||this.color(),n.values=Mt.ToScaledRGB(n.intensity,r),this.write(n.values),Object.assign(n,r)}}}),this.initialize(e),this.off()}color(e,i,r){const n=ft.get(this);let s;if(arguments.length===0)return s=this.isOn?n:n.prev,Mt.colors.reduce((u,h)=>(u[h]=Math.round(s[h]),u),{});const o=Mt.ToRGB(e,i,r);return Mt.colors.forEach(u=>{let h=o[u];if(h==null)throw new Error(`Led.RGB.color: invalid color ([${[o.red,o.green,o.blue].join(",")}])`);h=Hr(h,0,255),o[u]=h}),this.update(o),this}on(){const e=ft.get(this);let i;return this.isOn||(i=e.prev||{red:255,green:255,blue:255},e.prev=null,this.update(i)),this}off(){const e=ft.get(this);return this.isOn&&(e.prev=Mt.colors.reduce((i,r)=>(i[r]=e[r],i),{}),this.update({red:0,green:0,blue:0})),this}blink(e,i){const r=ft.get(this);return this.stop(),typeof e=="function"&&(i=e,e=null),r.interval=setInterval(()=>{this.toggle(),typeof i=="function"&&i()},e||100),this}toggle(){return this[this.isOn?"off":"on"]()}stop(){const e=ft.get(this);return e.interval&&clearInterval(e.interval),e.animation&&e.animation.stop(),e.interval=null,this}intensity(e){const i=ft.get(this);return arguments.length===0?i.intensity:(i.intensity=Hr(e,0,100),this.update(),this)}[Mo.normalize](e){const i=ft.get(this);return e[0]===null&&(e[0]=i.values),e.reduce((r,n)=>{const s=n;let o={},u=null,h=i.intensity;if(n!==null){if(typeof s=="number")throw new Error("RGB LEDs expect a complete keyFrame object or hexadecimal string value");typeof s=="string"&&(u=s),Array.isArray(s)?u=s:typeof s=="object"&&(typeof s.color<"u"?u=s.color:u=s),typeof n.intensity=="number"&&(h=n.intensity,delete n.intensity),o.easing=n.easing||"linear",o.value=Mt.ToScaledRGB(h,Mt.ToRGB(u))}else o=n;return r.push(o),r},[])}[Mo.render](e){return this.color(e[0])}};tt.prototype[Mo.keys]=tt.colors;tt.colors=["red","green","blue"];tt.ToScaledRGB=(t,e)=>{const i=t/100;return tt.colors.reduce((r,n)=>(r[n]=Math.round(e[n]*i),r),{})};tt.ToRGB=(t,e,i)=>{let r={},n=0,s;if(typeof t<"u"&&(n|=4),typeof e<"u"&&(n|=2),typeof i<"u"&&(n|=1),(n|4)===4){if(s=t,s==null)throw new Error(`Invalid color (${s})`);if(Array.isArray(s))r={red:s[0],green:s[1],blue:s[2]};else if(typeof s=="object")r={red:s.red,green:s.green,blue:s.blue};else if(typeof s=="string")if(/^#?[0-9A-Fa-f]{6}$/.test(s))s.length===7&&s[0]==="#"&&(s=s.slice(1)),r={red:parseInt(s.slice(0,2),16),green:parseInt(s.slice(2,4),16),blue:parseInt(s.slice(4,6),16)};else if(/^rgb/.test(s)){const o=s.match(/^rgba?\(([^)]+)\)$/)[1].split(/[\s,]+/);$0(o[0])&&o.forEach((u,h)=>{h<=2&&(o[h]=Math.round(parseInt(u,10)/100*255))}),r={red:parseInt(o[0],10),green:parseInt(o[1],10),blue:parseInt(o[2],10)},o.length>3&&($0(o[3])&&(o[3]=parseInt(o[3],10)/100),r=tt.ToScaledRGB(100*parseFloat(o[3]),r))}else return tt.ToRGB(ix.keyword.rgb(s.toLowerCase()))}else r={red:t,green:e,blue:i};return r};function $0(t){return typeof t=="string"&&t.endsWith("%")}tt.prototype.strobe=tt.prototype.blink;ex.IS_TEST_MODE&&(tt.Controllers=ki,tt.purge=()=>{ft.clear()});var oa=tt,so=we(),Do=na,Dr=$1,nx=oa;const Fe=new Map;function Po(t){const e=ie.hrtime();let i,r=0;for(;t>r;)i=ie.hrtime(e),r=(i[0]*1e9+i[1])/1e3}function xt(t){Po(t*1e3)}let sx=class{constructor(e,i){this.address=e,this.mask=255,this.memory=0,this.io=i}pinMode(e,i){i===1?this.mask&=~(1<<e):this.mask|=1<<e}portMode(e){this.mask=e===0?255:0}portWrite(e){this.memory=e&~this.mask,this.io.i2cWrite(this.address,this.memory)}};const Pr={DEFAULT:{SHIFT_LEFT:4,CLEAR:1,HOME:2,ENTRY:4,DISPLAY:8,DIMENSIONS:32,CURSORSHIFT:16,SETCGRAMADDR:64,SETDDRAMADDR:128,DATA:64,COMMAND:128,ENTRYRIGHT:0,ENTRYLEFT:2,ENTRYSHIFTINCREMENT:1,ENTRYSHIFTDECREMENT:0,DISPLAYON:4,DISPLAYOFF:0,CURSORON:2,CURSOROFF:0,BLINKON:1,BLINKOFF:0,DISPLAYMOVE:8,CURSORMOVE:0,MOVERIGHT:4,MOVELEFT:0,BITMODE:{4:0,8:16},LINE:{1:0,2:8},DOTS:{"5x10":4,"5x8":0},BACKLIGHT_ON:8,BACKLIGHT_OFF:0,MEMORYLIMIT:8,EN:4,RW:2,RS:1,D4:4,D5:5,D6:6,D7:7}},dt={JHD1313M1:{REGISTER:{value:Pr.DEFAULT},CHARS:{value:Dr.DEFAULT},initialize:{value(t){this.address={lcd:t.address||62,rgb:98},t.address=this.address,this.io.i2cConfig(t),this.lines=t.lines||2,this.rows=t.rows||2,this.cols=t.cols||16,this.dots=t.dots||"5x8";const i={display:this.REGISTER.DISPLAY|this.REGISTER.DISPLAYON|this.REGISTER.CURSOROFF|this.REGISTER.BLINKOFF,characters:{},index:this.REGISTER.MEMORYLIMIT-1,backlight:{polarity:1,pin:null,value:null}};Fe.set(this,i);{const r=this.REGISTER.DIMENSIONS|this.REGISTER.LINE[2];xt(50),this.command(r),xt(5),this.command(r),this.command(r),this.command(r),xt(5),this.command(this.REGISTER.ENTRY|this.REGISTER.ENTRYLEFT|this.REGISTER.ENTRYSHIFTDECREMENT),this.on(),this.clear(),this.home()}this.bgOn(),t.color?this.bgColor(t.color):this.bgColor("black")}},clear:{value(){return this.command(this.REGISTER.CLEAR)}},setCursor:{value(t,e){return this.command(e===0?t|128:t|192)}},autoscroll:{value(){const t=Fe.get(this);return t.display=this.REGISTER.ENTRYLEFT|this.REGISTER.ENTRYSHIFTINCREMENT,this.command(this.REGISTER.ENTRY|t.display),this}},bgColor:{value(t,e,i){const r=nx.ToRGB(t,e,i),n=this.address.rgb;return this.io.i2cWrite(n,[0,0]),this.io.i2cWrite(n,[1,0]),this.io.i2cWrite(n,[4,r.red]),this.io.i2cWrite(n,[3,r.green]),this.io.i2cWrite(n,[2,r.blue]),this}},bgOn:{value(){return this.io.i2cWrite(this.address.rgb,[this.REGISTER.BACKLIGHT_ON,170]),this}},bgOff:{value(){return this.io.i2cWrite(this.address.rgb,[this.REGISTER.BACKLIGHT_ON,0]),this}},command:{value(t,e){return arguments.length===1&&(e=t,t=this.REGISTER.COMMAND),t===this.REGISTER.DATA?this.send(e):this.writeBits(this.REGISTER.COMMAND,e)}},send:{value(t){return this.writeBits(this.REGISTER.DATA,t)}},writeBits:{value(t,e){return this.io.i2cWrite(this.address.lcd,[t,e]),this}},hilo:{value(t){t.call(this)}}},PCF8574:{REGISTER:{value:Object.assign({},Pr.DEFAULT,{COMMAND:0,DATA:1,BACKLIGHT_ON:255,BACKLIGHT_OFF:0})},CHARS:{value:Dr.DEFAULT},initialize:{value(t){this.bitMode=t.bitMode||4,this.lines=t.lines||2,this.rows=t.rows||2,this.cols=t.cols||16,this.dots=t.dots||"5x8",t.address||(t.address=["PCF8574A","PCF8574AT"].includes(t.controller)?63:39),this.io.i2cConfig(t),this.address={lcd:t.address},this.expander=new sx(this.address.lcd,this.io),this.expander.portMode(this.io.MODES.OUTPUT),this.expander.portWrite(0);const e=t.backlight||{polarity:0,pin:3};e.pin=typeof e.pin>"u"?3:e.pin,e.polarity=typeof e.polarity>"u"?0:e.polarity;const i=this.REGISTER.BITMODE[this.bitMode]|this.REGISTER.LINE[this.lines]|this.REGISTER.DOTS[this.dots],r=this.REGISTER.DISPLAY|this.REGISTER.DISPLAYON|this.REGISTER.CURSOROFF|this.REGISTER.BLINKOFF,n=this.REGISTER.ENTRYLEFT|this.REGISTER.ENTRYSHIFTDECREMENT,s={display:r,characters:{},index:this.REGISTER.MEMORYLIMIT-1,backlight:{polarity:e.polarity,pinMask:1<<e.pin,statusMask:0},data:[1<<this.REGISTER.D4,1<<this.REGISTER.D5,1<<this.REGISTER.D6,1<<this.REGISTER.D7]};Fe.set(this,s);let o=3<<this.REGISTER.SHIFT_LEFT;this.expander.portWrite(o),this.pulse(o),xt(4),this.expander.portWrite(o),this.pulse(o),xt(4),this.expander.portWrite(o),this.pulse(o),o=2<<this.REGISTER.SHIFT_LEFT,this.expander.portWrite(o),this.pulse(o),this.command(this.REGISTER.DIMENSIONS|i),this.command(s.display),s.display=n,this.command(this.REGISTER.ENTRY|s.display),this.on(),this.clear(),this.backlight()}},clear:{value(){return this.command(this.REGISTER.CLEAR),xt(2),this}},backlight:{value(t){const e=Fe.get(this);let i;return t=typeof t>"u"?255:t,e.backlight.pinMask!==0&&(e.backlight.polarity===0&&t>0||e.backlight.polarity===1&&t===0?i=255:i=0,e.backlight.statusMask=e.backlight.pinMask&i,this.expander.portWrite(e.backlight.statusMask)),this}},createChar:{value(t,e){const i=Fe.get(this);let r;typeof t=="number"?r=t&7:(r=i.index,i.index--,i.index===-1&&(i.index=this.REGISTER.MEMORYLIMIT-1)),this.command(this.REGISTER.SETCGRAMADDR|r<<3);{xt(1);for(let n=0;n<8;n++)this.command(this.REGISTER.DATA,e[n]),xt(1)}return i.characters[t]=r,r}},noBacklight:{value(){this.backlight(0)}},on:{value(){const t=Fe.get(this);return t.display|=this.REGISTER.DISPLAYON,this.command(this.REGISTER.DISPLAY|t.display),this}},off:{value(){const t=Fe.get(this);return t.display&=~this.REGISTER.DISPLAYON,this.command(this.REGISTER.DISPLAY|t.display),this}},hilo:{value(t){t.call(this)}},command:{value(t,e){return arguments.length===1&&(e=t,t=this.REGISTER.COMMAND),this.send(t,e),this}},send:{writable:!0,value(t,e){return this.writeBits(t,e>>4),this.writeBits(t,e&15),this}},writeBits:{writable:!0,value(t,e){const i=Fe.get(this);let r=0;for(let n=0;n<4;n++)(e&1)===1&&(r|=i.data[n]),e=e>>1;return t===this.REGISTER.DATA&&(t=this.REGISTER.RS),r|=t|i.backlight.statusMask,this.pulse(r),this}},pulse:{writable:!0,value(t){this.expander.portWrite(t|this.REGISTER.EN),this.expander.portWrite(t&~this.REGISTER.EN)}}},PARALLEL:{REGISTER:{value:Pr.DEFAULT},CHARS:{value:Dr.DEFAULT},initialize:{value(t){this.bitMode=t.bitMode||4,this.lines=t.lines||2,this.rows=t.rows||2,this.cols=t.cols||16,this.dots=t.dots||"5x8",Array.isArray(t.pins)?this.pins={rs:t.pins[0],en:t.pins[1],data:[t.pins[5],t.pins[4],t.pins[3],t.pins[2]]}:this.pins=t.pins;const e=this.REGISTER.DISPLAY|this.REGISTER.DISPLAYON,i={display:e,characters:{},index:this.REGISTER.MEMORYLIMIT-1,backlight:{polarity:1,pin:null,value:null}};if(Fe.set(this,i),t.pins.forEach(function(r){this.io.pinMode(r,1)},this),this.io.digitalWrite(this.pins.rs,this.io.LOW),this.io.digitalWrite(this.pins.en,this.io.LOW),t.backlight){if(typeof t.backlight=="number"){const r=t.backlight;t.backlight={pin:r}}t.backlight.pin&&(i.backlight.pin=new Do({pin:t.backlight.pin,board:this.board}),i.backlight.pin.high())}this.command(3),xt(4),this.command(3),xt(4),this.command(3),this.bitMode===4&&this.command(2),this.command(this.REGISTER.LINE[this.lines]|this.REGISTER.DOTS[this.dots]),this.command(e),this.clear(),this.home()}}}};dt.LCM1602=dt.LCD1602=dt.LCM1602IIC=dt.LCD2004=dt.PCF8574A=dt.PCF8574AT=dt.PCF8574T=dt.PCF8574;dt.MJKDZ=Object.assign({},dt.PCF8574,{REGISTER:{value:Object.assign({},Pr.DEFAULT,{SHIFT_LEFT:0,COMMAND:0,DATA:6,EN:16,RW:5,RS:6,D4:0,D5:1,D6:2,D7:3})},writeBits:{writable:!0,value(t,e){const i=Fe.get(this);let r=0;for(let n=0;n<4;n++)(e&1)===1&&(r|=i.data[n]),e=e>>1;return t===this.REGISTER.DATA&&(t=1<<this.REGISTER.RS),r|=t|i.backlight.statusMask,this.pulse(r),this}}});dt.DEFAULT=dt.PARALLEL;class tn{constructor(e){so.Component.call(this,e=so.Options(e)),so.Controller.call(this,dt,e),this.ctype=e.controller,this.initialize&&this.initialize(e),Object.defineProperties(this,{characters:{get(){return Object.assign({},Fe.get(this).characters)}}})}command(e,i){return typeof i>"u"&&(i=e,e=128),this.bitMode===4&&this.send(i>>4),this.send(i),this}send(e){let i=0,r={4:8,8:128}[this.bitMode];for(;r>0;r=r>>1)this.io.digitalWrite(this.pins.data[i],this.io[e&r?"HIGH":"LOW"]),i++;return this.io.digitalWrite(this.pins.en,this.io.LOW),this.io.digitalWrite(this.pins.en,this.io.HIGH),Po(1),this.io.digitalWrite(this.pins.en,this.io.LOW),Po(37),this}hilo(e){this.io.digitalWrite(this.pins.rs,this.io.HIGH),e.call(this),this.io.digitalWrite(this.pins.rs,this.io.LOW)}print(e,i){let r,n,s,o;return e=`${e}`,i=i||{},r=Fe.get(this),n=i.dontProcessSpecials||!1,s=!n&&H0.test(e),e.length===1?this.hilo(function(){this.command(this.REGISTER.DATA,e.charCodeAt(0))}):s?(o=e.replace(H0,(u,h)=>{const g=r.characters[h];return typeof g=="number"?String.fromCharCode(g):u}),this.print(o,{dontProcessSpecials:!0})):this.hilo(function(){Array.from(e).forEach(function(u){this.command(this.REGISTER.DATA,u.charCodeAt(0))},this)}),this}write(e){return this.hilo.call(this,function(){this.command(this.REGISTER.DATA,e)}),this}clear(){return this.command(this.REGISTER.CLEAR),xt(2),this}home(){return this.command(this.REGISTER.HOME),xt(2),this}setCursor(e,i){const r=[0,64,20,84];return this.command(this.REGISTER.SETDDRAMADDR|e+r[i]),this}backlight(e){const i=Fe.get(this);return e=typeof e>"u",i.backlight.pin instanceof Do&&(e?i.backlight.pin.high():i.backlight.pin.low()),e?i.display|=this.REGISTER.DISPLAYON:i.display&=~this.REGISTER.DISPLAYON,this.command(i.display),this}noBacklight(){const e=Fe.get(this);return e.backlight.pin instanceof Do&&e.backlight.pin.high(),this.backlight(!1)}on(){const e=Fe.get(this);return e.display|=this.REGISTER.DISPLAYON,this.command(e.display),this}off(){const e=Fe.get(this);return e.display&=~this.REGISTER.DISPLAYON,this.command(e.display),this}cursor(e,i){if(typeof i<"u"&&typeof e<"u")return this.setCursor(i,e);const r=Fe.get(this);return r.display|=this.REGISTER.CURSORON,this.command(r.display),this}noCursor(){const e=Fe.get(this);return e.display&=~this.REGISTER.CURSORON,this.command(e.display),this}blink(){const e=Fe.get(this);return e.display|=this.REGISTER.BLINKON,this.command(e.display),this}noBlink(){const e=Fe.get(this);return e.display&=~this.REGISTER.BLINKON,this.command(e.display),this}autoscroll(){const e=Fe.get(this);return e.display|=this.REGISTER.ENTRYSHIFTINCREMENT,this.command(this.REGISTER.ENTRY|e.display),this}noAutoscroll(){const e=Fe.get(this);return e.display&=~this.REGISTER.ENTRYSHIFTINCREMENT,this.command(this.REGISTER.ENTRY|e.display),this}createChar(e,i){const r=Fe.get(this);let n;return typeof e=="number"?n=e&7:(n=r.index,r.index--,r.index===-1&&(r.index=this.REGISTER.MEMORYLIMIT-1)),this.command(this.REGISTER.SETCGRAMADDR|n<<3),this.hilo(function(){for(let s=0;s<8;s++)this.command(this.REGISTER.DATA,i[s])}),r.characters[e]=n,n}useChar(e){const i=Fe.get(this);if(typeof i.characters[e]>"u"){const r=this.createChar(e,this.CHARS[e]);for(const n in i.characters)if(e!==n&&i.characters[n]===r){delete i.characters[n];break}i.characters[e]=r}return this}}const H0=/:(\w+):/g;tn.POSITIVE=0;tn.NEGATIVE=1;tn.Characters=Dr;var ox=tn,ax={};const ti=we(),mr=Ci,lx=kt(),{constrain:ux,map:cx,scale:k0}=Ie,hx=ti.Pins,Ze=new Map,Ic={PCA9685:{initialize:{value({address:t,pwmRange:e,frequency:i,pin:r}){const n=Ze.get(this);this.address=t||64,this.pwmRange=e||[0,4095],this.frequency=i||200,n.expander=lx.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),this.pin=n.expander.normalize(r),n.mode=this.io.MODES.PWM}},update:{writable:!0,value(t){const e=Ze.get(this),i=typeof t<"u"?t:e.value,r=e.isAnode?255-ti.constrain(i,0,255):i;this.write(r)}},write:{writable:!0,value(t){Ze.get(this).expander.analogWrite(this.pin,t)}}},DEFAULT:{initialize:{value({pin:t},e){const i=Ze.get(this),r=hx.isFirmata(this);let n;r&&typeof e=="string"&&e.length>1&&e[0]==="A"&&(e=this.io.analogPins[+e.slice(1)]),n=this.io.defaultLed||13,e=+e,r&&this.io.analogPins.includes(e)?(this.pin=e,i.mode=this.io.MODES.OUTPUT):(this.pin=typeof t>"u"?n:t,i.mode=this.io.MODES[this.board.pins.isPwm(this.pin)?"PWM":"OUTPUT"]),this.io.pinMode(this.pin,i.mode)}},update:{writable:!0,value(t){const e=Ze.get(this),i=typeof t<"u"?t:e.value;let r=e.isAnode?255-ti.constrain(i,0,255):i;r=cx(r,0,255,0,this.board.RESOLUTION.PWM),r!==this.io.LOW&&r!==this.io.HIGH&&this.mode!==this.io.MODES.PWM&&ti.Pins.Error({pin:this.pin,type:"PWM",via:"Led"}),e.mode===this.io.MODES.OUTPUT&&(r=i),this.write(r)}},write:{writable:!0,value(t){const e=Ze.get(this);e.mode===this.io.MODES.OUTPUT&&this.io.digitalWrite(this.pin,t),e.mode===this.io.MODES.PWM&&this.io.analogWrite(this.pin,t)}}}};let Yi=class{constructor(e){const i=typeof e=="object"?e.pin:e;ti.Component.call(this,e=ti.Options(e)),ti.Controller.call(this,Ic,e);const r={isAnode:e.isAnode,isOn:!1,isRunning:!1,value:null,direction:1,mode:null,intensity:0,interval:null};Ze.set(this,r),Object.defineProperties(this,{value:{get(){return r.value}},mode:{get(){return r.mode}},isOn:{get(){return!!r.value}},isRunning:{get(){return r.isRunning}},animation:{get(){return r.animation}}}),typeof this.initialize=="function"&&this.initialize(e,i)}on(){const e=Ze.get(this);return e.mode===this.io.MODES.OUTPUT&&(e.value=this.io.HIGH),e.mode===this.io.MODES.PWM&&(e.value===null&&(e.value=255),e.interval||(e.value=255),e.value===0&&(e.value=255)),this.update(),this}off(){const e=Ze.get(this);return e.value=0,this.update(),this}toggle(){return this[this.isOn?"off":"on"]()}brightness(e){const i=Ze.get(this);return i.value=e,this.update(),this}intensity(e){const i=Ze.get(this);return arguments.length===0?i.intensity:(i.intensity=ux(e,0,100),this.brightness(k0(i.intensity,0,100,0,255)))}[mr.normalize](e){const i=Ze.get(this);return e[0]===null&&(e[0]={value:i.value||0}),e.map(r=>(r!==null&&(typeof r=="number"?r={value:r}:(typeof r.brightness=="number"&&(r.value=r.brightness,delete r.brightness),typeof r.intensity=="number"&&(r.value=k0(r.intensity,0,100,0,255),delete r.intensity)),r.easing||(r.easing="linear")),r))}[mr.render](e){const i=Ze.get(this);return i.value=e[0],this.update()}pulse(e,i){const r=Ze.get(this);this.stop();const n={duration:typeof e=="number"?e:1e3,keyFrames:[0,255],metronomic:!0,loop:!0,easing:"inOutSine",onloop(){typeof i=="function"&&i()}};return typeof e=="object"&&Object.assign(n,e),typeof e=="function"&&(i=e),r.isRunning=!0,r.animation=r.animation||new mr(this),r.animation.enqueue(n),this}fade(e,i,r){const n=Ze.get(this);this.stop();const s={duration:typeof i=="number"?i:1e3,keyFrames:[null,typeof e=="number"?e:255],easing:"outSine",oncomplete(){n.isRunning=!1,typeof r=="function"&&r()}};return typeof e=="object"&&Object.assign(s,e),typeof e=="function"&&(r=e),typeof i=="object"&&Object.assign(s,i),typeof i=="function"&&(r=i),n.isRunning=!0,n.animation=n.animation||new mr(this),n.animation.enqueue(s),this}fadeIn(e,i){return this.fade(255,e||1e3,i)}fadeOut(e,i){return this.fade(0,e||1e3,i)}blink(e,i){const r=Ze.get(this);return this.stop(),typeof e=="function"&&(i=e,e=null),r.isRunning=!0,r.interval=setInterval(()=>{this.toggle(),typeof i=="function"&&i()},e||100),this}stop(){const e=Ze.get(this);return e.interval&&clearInterval(e.interval),e.animation&&e.animation.stop(),e.interval=null,e.isRunning=!1,this}};Yi.prototype.strobe=Yi.prototype.blink;ax.IS_TEST_MODE&&(Yi.Controllers=Ic,Yi.purge=function(){Ze.clear()});var Cc=Yi;const Ei=Ci,aa=Cc,la=nt;class rn extends la{constructor(e){super(e)}get type(){return aa}[Ei.normalize](e){return e.map((i,r)=>i!==null?this[r][Ei.normalize](i):i)}[Ei.render](e){return this.each((i,r)=>i[Ei.render]([e[r]]))}}la.installMethodForwarding(rn.prototype,aa.prototype,{skip:[Ei.normalize,Ei.render]});la.installCallbackReconciliation(rn.prototype,["pulse","fade","fadeIn","fadeOut","blink"]);aa.Collection=rn;var fx=rn;const Jt=Ci,ua=nt,ca=oa;class nn extends ua{constructor(e){super(e)}get type(){return ca}[Jt.normalize](e){return e.map((i,r)=>i!==null?this[r][Jt.normalize](i):i)}[Jt.render](e){return this.each((i,r)=>i[Jt.render]([e[r]]))}}ua.installMethodForwarding(nn.prototype,ca.prototype,{skip:[Jt.normalize,Jt.render]});ua.installCallbackReconciliation(nn.prototype,["blink"]);nn.prototype[Jt.keys]=ca.colors;var dx=nn,px={MATRIX_CHARS:{" ":[0,0,0,0,0,0,0,0],"!":[4,4,4,4,0,0,4,0],'"':[10,10,10,0,0,0,0,0],"#":[10,10,31,10,31,10,10,0],$:[4,15,20,14,5,30,4,0],"%":[24,25,2,4,8,19,3,0],"&":[12,18,20,8,21,18,13,0],"'":[12,4,8,0,0,0,0,0],"(":[2,4,8,8,8,4,2,0],")":[8,4,2,2,2,4,8,0],"*":[0,4,21,14,21,4,0,0],"+":[0,4,4,31,4,4,0,0],",":[0,0,0,0,12,4,8,0],"-":[0,0,0,31,0,0,0,0],".":[0,0,0,0,0,12,12,0],"/":[0,1,2,4,8,16,0,0],"[":[14,8,8,8,8,8,14,0],"\\":[0,16,8,4,2,1,0,0],"]":[14,2,2,2,2,2,14,0],"^":[4,10,17,0,0,0,0,0],_:[0,0,0,0,0,0,31,0],"`":[16,8,4,0,0,0,0,0],":":[0,12,12,0,12,12,0,0],";":[0,12,12,0,12,4,8,0],"<":[2,4,8,16,8,4,2,0],"=":[0,0,31,0,31,0,0,0],">":[8,4,2,1,2,4,8,0],"?":[14,17,1,2,4,0,4,0],"@":[14,17,1,13,21,21,14,0],"{":[2,4,4,8,4,4,2,0],"|":[4,4,4,0,4,4,4,0],"}":[8,4,4,2,4,4,8,0],"~":[8,21,2,0,0,0,0,0],0:[14,17,19,21,25,17,14,0],1:[4,12,4,4,4,4,14,0],2:[14,17,1,2,4,8,31,0],3:[31,2,4,2,1,17,14,0],4:[2,6,10,18,31,2,2,0],5:[31,16,30,1,1,17,14,0],6:[6,8,16,30,17,17,14,0],7:[31,1,2,4,4,4,4,0],8:[30,17,17,14,17,17,14,0],9:[14,17,17,15,1,2,12,0],A:[8,20,34,62,34,34,34,34],B:[60,34,34,62,34,34,60,0],C:[60,64,64,64,64,64,60,0],D:[124,66,66,66,66,66,124,0],E:[124,64,64,124,64,64,64,124],F:[124,64,64,124,64,64,64,64],G:[60,64,64,64,64,68,68,60],H:[68,68,68,124,68,68,68,68],I:[124,16,16,16,16,16,16,124],J:[60,8,8,8,8,8,72,48],K:[0,36,40,48,32,48,40,36],L:[64,64,64,64,64,64,64,124],M:[129,195,165,153,129,129,129,129],N:[0,66,98,82,74,70,66,0],O:[60,66,66,66,66,66,66,60],P:[60,34,34,34,60,32,32,32],Q:[28,34,34,34,34,38,34,29],R:[60,34,34,34,60,36,34,33],S:[0,30,32,32,62,2,2,60],T:[0,62,8,8,8,8,8,8],U:[66,66,66,66,66,66,34,28],V:[66,66,66,66,66,66,36,24],W:[0,73,73,73,73,42,28,0],X:[0,65,34,20,8,20,34,65],Y:[65,34,20,8,8,8,8,8],Z:[0,127,2,4,8,16,32,127],a:[0,0,14,1,15,17,15,0],b:[16,16,22,25,17,17,30,0],c:[0,0,14,17,16,17,14,0],d:[1,1,13,19,17,17,15,0],e:[0,0,14,17,31,16,14,0],f:[2,5,4,14,4,4,4,0],g:[0,13,19,19,13,1,14,0],h:[16,16,22,25,17,17,17,0],i:[4,0,12,4,4,4,14,0],j:[2,0,6,2,2,18,12,0],k:[8,8,9,10,12,10,9,0],l:[12,4,4,4,4,4,14,0],m:[0,0,26,21,21,21,21,0],n:[0,0,22,25,17,17,17,0],o:[0,0,14,17,17,17,14,0],p:[0,22,25,25,22,16,16,0],q:[0,13,19,19,13,1,1,0],r:[0,0,22,25,16,16,16,0],s:[0,0,15,16,30,1,31,0],t:[8,8,28,8,8,9,6,0],u:[0,0,18,18,18,18,13,0],v:[0,0,17,17,17,10,4,0],w:[0,0,17,17,21,21,10,0],x:[0,0,17,10,4,10,17,0],y:[0,0,17,17,19,13,1,14],z:[0,0,31,2,4,8,31,0],euro:[14,16,124,32,124,32,16,14],cent:[0,60,66,64,64,82,60,32],angryface:[0,102,102,0,24,36,66,129],circle:[60,66,129,129,129,129,66,60],cdot:[60,66,129,153,153,129,66,60],donut:[60,126,255,231,231,255,126,60],equality:[0,255,255,0,0,255,255,0],ball:[60,126,255,255,255,255,126,60],thinsquare:[255,129,129,129,129,129,129,255],thicksquare:[255,255,195,195,195,195,255,255],centeredsquare1:[0,0,60,60,60,60,0,0],centeredsquare2:[0,0,60,60,60,60,0,0],arrowright:[0,4,6,255,255,6,4,0],arrowleft:[0,32,96,255,255,96,32,0],note:[4,6,7,4,60,124,124,56],clock:[60,82,145,145,143,129,66,60],heartoutline:[102,153,129,129,66,36,24,0],heartfull:[102,255,255,255,126,60,24,0],thincheck:[0,0,1,2,4,136,80,32],thickcheck:[0,1,3,6,140,216,112,32],speaker:[3,7,63,63,63,63,7,3],sound:[0,64,128,0,192,0,128,64],xbig:[195,231,126,60,60,126,231,195],target:[60,126,195,219,219,195,126,60],bell:[24,60,60,60,60,126,0,24],smile:[0,102,102,0,0,129,66,60],frown:[0,102,102,0,0,60,66,129],winkright:[0,96,102,0,0,129,66,60],winkleft:[0,6,102,0,0,129,66,60],blink:[0,0,102,0,0,129,66,60],laughing:[0,102,102,0,255,129,66,60],tongueout:[0,102,102,0,0,126,10,4],expressionless:[0,102,102,0,0,255,0,0],ascprogress1:[128,128,128,128,128,128,128,128],ascprogress2:[192,192,192,192,192,192,192,192],ascprogress3:[224,224,224,224,224,224,224,224],ascprogress4:[240,240,240,240,240,240,240,240],ascprogress5:[248,248,248,248,248,248,248,248],ascprogress6:[252,252,252,252,252,252,252,252],ascprogress7:[254,254,254,254,254,254,254,254],fullprogress:[255,255,255,255,255,255,255,255],descprogress1:[127,127,127,127,127,127,127,127],descprogress2:[63,63,63,63,63,63,63,63],descprogress3:[31,31,31,31,31,31,31,31],descprogress4:[15,15,15,15,15,15,15,15],descprogress5:[7,7,7,7,7,7,7,7],descprogress6:[3,3,3,3,3,3,3,3],descprogress7:[1,1,1,1,1,1,1,1],ascchart1:[255,0,0,0,0,0,0,0],ascchart2:[255,255,0,0,0,0,0,0],ascchart3:[255,255,255,0,0,0,0,0],ascchart4:[255,255,255,255,0,0,0,0],ascchart5:[255,255,255,255,255,0,0,0],ascchart6:[255,255,255,255,255,255,0,0],ascchart7:[255,255,255,255,255,255,255,0],ascchart8:[255,255,255,255,255,255,255,255],descchart1:[0,255,255,255,255,255,255,255],descchart2:[0,0,255,255,255,255,255,255],descchart3:[0,0,0,255,255,255,255,255],descchart4:[0,0,0,0,255,255,255,255],descchart5:[0,0,0,0,0,255,255,255],descchart6:[0,0,0,0,0,0,255,255],descchart7:[0,0,0,0,0,0,0,255],descchart8:[0,0,0,0,0,0,0,0],borderleft1:[1,1,1,1,1,1,1,1],borderleft2:[3,2,2,2,2,2,2,3],borderleft3:[7,4,4,4,4,4,4,7],borderleft4:[15,8,8,8,8,8,8,15],borderleft5:[31,16,16,16,16,16,16,31],borderleft6:[63,32,32,32,32,32,32,63],borderleft7:[127,64,64,64,64,64,64,127],borderleft8:[255,128,128,128,128,128,128,255],bordertopbottom5:[255,0,0,0,0,0,0,255],borderright1:[128,128,128,128,128,128,128,128],borderright2:[192,64,64,64,64,64,64,192],borderright3:[224,32,32,32,32,32,32,224],borderright4:[240,16,16,16,16,16,16,240],borderright5:[248,8,8,8,8,8,8,248],borderright6:[252,4,4,4,4,4,4,252],borderright7:[254,2,2,2,2,2,2,254],borderright8:[255,1,1,1,1,1,1,255],box1:[224,224,224,0,0,0,0,0],box2:[7,7,7,0,0,0,0,0],box3:[231,231,231,0,0,0,0,0],box4:[0,0,0,0,0,7,7,7],box5:[7,7,7,0,0,7,7,7],box6:[224,224,224,0,0,7,7,7],box7:[231,231,231,0,0,7,7,7],box8:[0,0,0,0,0,224,224,224],box9:[7,7,7,0,0,224,224,224],box10:[224,224,224,0,0,224,224,224],box11:[231,231,231,0,0,224,224,224],box12:[0,0,0,0,0,231,231,231],box13:[7,7,7,0,0,231,231,231],box14:[224,224,224,0,0,231,231,231],box15:[231,231,231,0,0,231,231,231],checkerboard1:[170,85,170,85,170,85,170,85],checkerboard2:[85,170,85,170,85,170,85,170],checkerboard3:[93,234,87,186,85,238,85,187],checkerboard4:[204,51,51,204,204,51,51,204],checkerboard5:[204,204,51,51,204,204,51,51],checkerboard6:[51,204,204,51,51,204,204,51],checkerboard7:[51,51,204,204,51,51,204,204],pointerright:[32,48,56,60,60,56,48,32],pointerup:[0,0,24,60,126,255,0,0],pointerleft:[4,12,28,60,60,28,12,4],pointerdown:[0,0,255,126,60,24,0,0],arrowne:[0,62,6,10,18,34,64,128],arrownw:[0,124,96,80,72,68,2,1],arrowsw:[1,2,68,72,80,96,124,0],arrowse:[128,64,34,18,10,6,62,0],dice1:[0,0,0,24,24,0,0,0],dice2:[192,192,0,0,0,0,3,3],dice3:[192,192,0,24,24,0,3,3],dice4:[195,195,0,0,0,0,195,195],dice5:[195,195,0,24,24,0,195,195],dice6:[195,195,0,195,195,0,195,195],outlinedplus1:[60,36,231,129,129,231,36,60],outlinedplus2:[255,231,231,129,129,231,231,255],twoboxes1:[240,144,144,240,15,9,9,15],twoboxes2:[240,144,144,254,18,18,30,0],twoboxes3:[240,144,188,244,36,60,0,0],twoboxes4:[240,248,216,248,120,0,0,0],twoboxes5:[15,9,9,15,240,144,144,240],fourboxes:[255,153,153,255,255,153,153,255],chain1:[240,248,216,248,120,0,0,0],chain2:[240,144,188,244,47,61,9,15]},SPECIAL_CHARS:{0:[60,102,102,102,102,102,102,60],1:[24,56,120,24,24,24,24,24],2:[60,102,6,12,24,48,96,126],3:[60,102,6,28,6,6,102,60],4:[14,30,54,102,102,126,6,6],5:[126,96,96,124,6,6,102,60],6:[60,102,96,124,102,102,102,60],7:[126,126,6,12,24,24,24,24],8:[60,102,102,60,102,102,102,60],9:[60,102,102,62,6,6,102,60],10:[94,82,82,82,82,94,0,255],11:[36,36,36,36,36,36,0,255],12:[94,66,68,72,80,94,0,255],13:[94,66,78,66,66,94,0,255],14:[82,82,94,66,66,66,0,255],15:[94,80,94,66,66,94,0,255],16:[94,80,94,82,82,94,0,255],17:[94,66,68,72,72,72,0,255],18:[94,82,94,82,82,94,0,255],19:[94,82,94,66,66,94,0,255]},DIGIT_CHARS:{0:126,1:48,2:109,3:121,4:51,5:91,6:95,7:112,8:127,9:123," ":0,".":128,":":255,"!":176,A:119,a:125,B:127,b:31,C:78,c:13,D:126,d:61,E:79,e:111,F:71,f:71,G:94,g:123,H:55,h:23,I:48,i:16,J:60,j:56,K:55,k:23,L:14,l:6,M:85,m:85,N:21,n:21,O:126,o:29,P:103,p:103,Q:115,q:115,R:119,r:5,S:91,s:91,T:70,t:15,U:62,u:28,V:39,v:35,W:63,w:43,X:37,x:37,Y:59,y:51,Z:109,z:109}},xx={};const yr=we(),Xi=px,ha=new Map;let be=class Dt{constructor(e){yr.Component.call(this,e=yr.Options(e)),yr.Controller.call(this,Mc,e),this.digitOrder=1,this.isMatrix||(this.colon=e.colon||!1);const i=e.devices||(e.addresses?e.addresses.length:1);this.memory=Array(64).fill(0),e.dims=e.dims||Dt.MATRIX_DIMENSIONS["8x8"],typeof e.dims=="string"&&(e.dims=Dt.MATRIX_DIMENSIONS[e.dims]),Array.isArray(e.dims)&&(e.dims={rows:e.dims[0],columns:e.dims[1]});const r={devices:i,digits:e.digits||8,isMatrix:!!e.isMatrix,isBicolor:!!e.isBicolor,rows:e.dims.rows,columns:e.dims.columns};if(!(r.columns===8||r.columns===16)||!(r.rows===8||r.rows===16)||r.columns+r.rows===32)throw new Error("Invalid matrix dimensions specified: must be 8x8, 16x8 or 8x16");Object.defineProperties(this,{devices:{get(){return r.devices}},digits:{get(){return r.digits}},isMatrix:{get(){return r.isMatrix}},isBicolor:{get(){return r.isBicolor}},rows:{get(){return r.rows}},columns:{get(){return r.columns}}}),ha.set(this,r),this.initialize(e)}each(e){for(let i=0;i<this.devices;i++)e.call(this,i)}on(e){return typeof e>"u"?this.each(function(i){this.on(i)}):this.send(e,this.OP.SHUTDOWN||Dt.OP.SHUTDOWN,1),this}off(e){return typeof e>"u"?this.each(function(i){this.off(i)}):this.send(e,this.OP.SHUTDOWN||Dt.OP.SHUTDOWN,0),this}digit(e,i,r){let n,s,o,u,h,g=!1;return arguments.length<3?(n=Array.from(arguments),this.each(function(f){this.digit.apply(this,(n.unshift(f),n))}),this):this.isMatrix?(this.draw.apply(this,arguments),this):(s=e*this.digits,u=String(r),i=Number(i),o=i,this.digitOrder===-1&&(o=this.digits-o-1),u.length===2&&u[1]==="."&&(g=!0,u=u[0]),h=Dt.DIGIT_CHARS[u],h||(h=Math.abs(Number(u))),g&&(h=h|Dt.DIGIT_CHARS["."]),this.memory[s+o]=h,this.sendDigit(e,o,h),this)}print(e,i){const r=/([0-9A-Za-z][.]|[0-9A-Za-z:]|[\s])/g;let n;if(i=i||{device:0},this.isMatrix)throw new Error("Led.Matrix does not yet support the print method");return typeof e!="string"&&(e=String(e)),n=e.match(r),this.colon&&n.length>2&&n[2]!==":"&&n[2]!==" "&&n.splice(2,0," "),(n||[]).forEach(function(s,o){this.digit(i.device,o,s)},this),this}brightness(e,i){return arguments.length===1?(i=e,this.each(function(r){this.brightness(r,i)})):this.send(e,this.OP.BRIGHTNESS||Dt.OP.BRIGHTNESS,yr.map(i,0,100,0,15)),this}column(e,i,r){let n;if(!this.isMatrix)throw new Error("The `column` method is only supported for Matrix devices");if(arguments.length===2)r=i,i=e,this.each(function(s){this.column(s,i,r)});else for(let s=0;s<this.rows;s++)n=r>>this.rows-1-s,n=n&1,this.led(e,s,i,n);return this}draw(e,i){let r;if(arguments.length===1)i=e,this.each(function(n){this.draw(n,i)});else if(this.isMatrix){if(Array.isArray(i)?r=i:r=Xi.MATRIX_CHARS[i],r!==void 0){if(r.length!==this.rows&&r.length!==this.columns)throw new Error(`Invalid character: ${r}`);const n=r.length;for(let s=0;s<this.rows-n;s++)r.push(0);r.forEach(function(s,o){this.row(e,o,s)},this)}}else this.digit.apply(this,arguments);return this}device(e){const i={};return Object.keys(Dt.prototype).forEach(r=>{i[r]=this[r].bind(this,e)}),Object.getOwnPropertyNames(this).forEach(r=>{this[r]&&typeof this[r]=="function"&&(i[r]=this[r].bind(this,e))}),i}},Lr=new Set([112,113,114,115,116,117,118,119]);const Mc={HT16K33:{OP:{value:{SHUTDOWN:32,BRIGHTNESS:224,BLINK:128}},initialize:{writable:!0,value(t){const e=ha.get(this),i=Array.from(Lr);if(i.length===0)throw new Error("There are no available HT16K33 controller addresses");this.addresses=t.addresses||(t.address?[t.address]:null),this.addresses===null&&(this.addresses=i.slice(0,e.devices)),this.addresses.forEach(r=>{if(!Lr.has(r))throw new Error(`Invalid HT16K33 controller address: ${r}`);Lr.delete(r)}),this.rotation=t.rotation||1,this.columns===16&&!t.rotation&&(this.rotation=0),this.buffer=Array(this.rows).fill([]),this.isMatrix||(this.colon=!0),t.addresses=this.addresses,this.io.i2cConfig(t),this.each(function(r){this.on(r),this.blink(r,!1),this.brightness(r,100),this.clear(r)})}},blink:{writable:!0,value(t,e){if(arguments.length===1)e=t,this.each(function(i){this.blink(i,e)});else{let i=null;switch(e){case!1:i=0;break;case"slow":i=6;break;case"normal":i=4;break;case"fast":i=2;break}if(i==null)return;this.send(t,this.OP.BLINK|1,i)}return this}},clear:{writable:!0,value(t){let e;if(typeof t>"u")this.each(function(i){this.clear(i)});else{e=t*this.columns;for(let i=0;i<this.rows;i++)this.memory[e+i]=0,this.buffer[t][i]=0;this.writeDisplay(t)}return this}},led:{writable:!0,value(t,e,i,r){if(arguments.length===3)return r=i,i=e,e=t,this.each(function(n){this.led(n,e,i,r)}),this;{let n=i,s=e,o,u=this.rows,h=this.columns;if(s<0||s>=u)return this;if(n<0||n>=h)return this;switch(this.rotation){case 1:h=this.rows,u=this.columns,o=n,n=s,s=o,n=h-n-1;break;case 2:n=h-n-1,s=u-s-1;break;case 3:h=this.rows,u=this.columns,o=n,n=s,s=o,s=u-s-1;break}this.isBicolor?r===be.COLORS.GREEN?(this.buffer[t][s]|=1<<n,this.buffer[t][s]&=~(1<<n+8)):r===be.COLORS.YELLOW?this.buffer[t][s]|=1<<n+8|1<<n:r===be.COLORS.RED?(this.buffer[t][s]|=1<<n+8,this.buffer[t][s]&=~(1<<n)):this.buffer[t][s]&=~(1<<n)&~(1<<n+8):(h===8&&u===8&&(n+=h-1,n%=h),r?this.buffer[t][s]|=1<<n:this.buffer[t][s]&=~(1<<n)),this.writeDisplay(t)}return this}},writeDisplay:{writable:!0,value(t){const e=[0];for(let i=0;i<8;i++)e.push(this.buffer[t][i]&255),e.push(this.buffer[t][i]>>8);this.io.i2cWrite(this.addresses[t],e)}},row:{writable:!0,value(t,e,i){if(!this.isMatrix)throw new Error("The `row` method is only supported for Matrix devices");if(typeof i=="number"&&(i=`0000000000000000${parseInt(i,10).toString(2)}`.substr(0-this.columns,this.columns)),arguments.length===2)i=e,e=t,this.each(function(r){this.row(r,e,i)});else for(let r=0;r<this.columns;r++)this.led(t,e,r,parseInt(i[r],10));return this}},scanLimit:{writable:!0,value(){throw new Error("The `scanLimit` method is not implemented for HT16K33 devices")}},send:{writable:!0,value(t,e,i){if(arguments.length!==3)throw new Error("The `send` method expects three arguments: device, opcode, data");return this.io.i2cWrite(this.addresses[t],[e|i]),this}},sendDigit:{writable:!0,value(t,e,i){return i>0&&i<255&&(i=`00000000${i.toString(2)}`.slice(-8).split(""),i=i.shift()+i.reverse().join(""),i=parseInt(i,2)),this.buffer[t][e]=i,this.writeDisplay(t),this}}},DEFAULT:{OP:{value:{}},initialize:{writable:!0,value({pins:t}){this.pins={data:t.data,clock:t.clock,cs:t.cs||t.latch},["data","clock","cs"].forEach(function(e){this.io.pinMode(this.pins[e],this.io.MODES.OUTPUT)},this),this.digitOrder=-1,this.digitOrder=-1;for(let e=0;e<this.devices;e++)this.isMatrix&&this.send(e,be.OP.DECODING,0),this.send(e,be.OP.BRIGHTNESS,3),this.send(e,be.OP.SCANLIMIT,7),this.send(e,be.OP.SHUTDOWN,1),this.send(e,be.OP.DISPLAYTEST,0),this.clear(e),this.on(e);return this}},clear:{writable:!0,value(t){let e;if(typeof t>"u")this.each(function(i){this.clear(i)});else{e=t*8;for(let i=0;i<8;i++)this.memory[e+i]=0,this.send(t,i+1,0)}return this}},sendDigit:{writable:!0,value(t,e,i){return this.send(t,e+1,i),this}},led:{writable:!0,value(t,e,i,r){let n,s;return arguments.length===3?(r=i,i=e,e=t,this.each(function(o){this.led(o,e,i,r)})):(n=t*this.columns,s=128>>i,r?this.memory[n+e]=this.memory[n+e]|s:(s=~s,this.memory[n+e]=this.memory[n+e]&s),this.send(t,e+1,this.memory[n+e])),this}},row:{writable:!0,value(t,e,i){if(!this.isMatrix)throw new Error("The `row` method is only supported for Matrix devices");let r;return typeof i=="string"&&(i=parseInt(i,2)),arguments.length===2?(i=e,e=t,this.each(function(n){this.row(n,e,i)})):(r=t*this.columns,this.memory[r+e]=i,this.send(t,e+1,this.memory[r+e])),this}},scanLimit:{writable:!0,value(t,e){return arguments.length===1?(e=t,this.each(function(i){this.scanLimit(i,e)})):this.send(t,be.OP.SCANLIMIT,e),this}},send:{writable:!0,value(t,e,i){if(arguments.length!==3)throw new Error("`send` expects three arguments: device, opcode, data");const r=t*2,n=this.devices*2,s=[];if(t<this.devices){for(let o=0;o<n;o++)s[o]=0;s[r+1]=e,s[r]=i,this.io.digitalWrite(this.pins.cs,this.io.LOW);for(let o=n;o>0;o--)this.board.shiftOut(this.pins.data,this.pins.clock,s[o-1]);this.io.digitalWrite(this.pins.cs,this.io.HIGH)}return this}}}};be.DEFAULTS={DECODING:0,BRIGHTNESS:3,SCANLIMIT:7,SHUTDOWN:1,DISPLAYTEST:0};Object.freeze(be.DEFAULTS);be.OP={};be.OP.NOOP=0;be.OP.DIGIT0=1;be.OP.DIGIT1=2;be.OP.DIGIT2=3;be.OP.DIGIT3=4;be.OP.DIGIT4=5;be.OP.DIGIT5=6;be.OP.DIGIT6=7;be.OP.DIGIT7=8;be.OP.DECODEMODE=9;be.OP.INTENSITY=10;be.OP.SCANLIMIT=11;be.OP.SHUTDOWN=12;be.OP.DISPLAYTEST=15;be.OP.BRIGHTNESS=be.OP.INTENSITY;be.OP.DECODING=be.OP.DECODEMODE;be.OP.DISPLAY=be.OP.DISPLAYTEST;be.OP.POWERDOWN=be.OP.SHUTDOWN;Object.freeze(be.OP);be.COLORS={RED:1,YELLOW:2,GREEN:3};be.DIRECTIONS={UP:1,RIGHT:2,DOWN:3,LEFT:4,1:"UP",2:"RIGHT",3:"DOWN",4:"LEFT"};Object.freeze(be.DIRECTIONS);const j0=[[224,160,160,160,160,160,224,0],[64,192,64,64,64,64,224,0],[224,32,32,224,128,128,224,0],[224,32,32,96,32,32,224,0],[32,96,160,224,32,32,32,0],[224,128,128,224,32,32,224,0],[224,128,128,224,160,160,224,0],[224,32,32,32,32,32,32,0],[224,160,160,64,160,160,224,0],[224,160,160,224,32,32,224,0]];let oo="";for(let t=0;t<10;t++)for(let e=0;e<10;e++){oo=`${t}${e}`,Xi.MATRIX_CHARS[oo]=[];for(let i=0;i<8;i++)Xi.MATRIX_CHARS[oo][i]=j0[t][i]|j0[e][i]>>>4}be.MATRIX_DIMENSIONS={"16x8":{rows:16,columns:8},"8x16":{rows:8,columns:16},"8x8":{rows:8,columns:8}};be.MATRIX_CHARS=Xi.MATRIX_CHARS;be.DIGIT_CHARS=Xi.DIGIT_CHARS;xx.IS_TEST_MODE&&(be.Controllers=Mc,be.purge=()=>{Lr=new Set([112,113,114,115,116,117,118,119]),ha.clear()});var fa=be;const z0=fa;class gx extends z0{constructor(e){e.isMatrix=!0,super(e)}static get CHARS(){return z0.MATRIX_CHARS}}var Ex=gx;const q0=fa;class vx extends q0{constructor(e){e.isMatrix=!1,super(e)}static get CHARS(){return q0.DIGIT_CHARS}}var mx=vx;const Mi=Cc;Mi.Collection=fx;Mi.RGB=oa;Mi.RGB.Collection=dx;Mi.Matrix=Ex;Mi.Digits=mx;var Dc=Mi,yx={};const ao=we(),pt=rr,bx=en,{uint16:lo,toFixed:Ni,scale:br}=Ie,kr=new Map,ji={DEFAULT:{initialize:{value(t,e){this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,e)}},toIntensityLevel:{value(t){return Ni(br(t,0,1023,0,100)/100,2)}}},EVS_EV3:{initialize:{value(t,e){const i=kr.get(this);t.mode&&(t.mode=t.mode.toUpperCase()),i.mode=t.mode==="REFLECTED"?pt.Type_EV3_LIGHT_REFLECTED:pt.Type_EV3_LIGHT,i.shield=pt.shieldPort(t.pin),i.ev3=new pt(Object.assign(t,{io:this.io})),i.ev3.setup(i.shield,pt.Type_EV3),i.ev3.write(i.shield,129+i.shield.offset,i.mode),i.ev3.read(i.shield,pt.Light,pt.Light_Bytes,r=>{const n=r[0]|r[1]<<8;e(n)})}},toIntensityLevel:{value(t){return Ni(t/100,2)}}},EVS_NXT:{initialize:{value(t,e){const i=kr.get(this);t.mode&&(t.mode=t.mode.toUpperCase()),i.mode=t.mode==="REFLECTED"?pt.Type_NXT_LIGHT_REFLECTED:pt.Type_NXT_LIGHT,i.shield=pt.shieldPort(t.pin),i.ev3=new pt(Object.assign(t,{io:this.io})),i.ev3.setup(i.shield,i.mode),i.ev3.read(i.shield,i.shield.analog,pt.Analog_Bytes,r=>{e(r[0]|r[1]<<8)})}},toIntensityLevel:{value(t){return Ni(br(t,0,1023,100,0)/100,2)}}},TSL2561:{ADDRESSES:{value:[41,57,73]},REGISTER:{value:{CONTROL:0,TIMING:1,READ:44}},initialize:{value(t,e){const i=k=>k|128,{Drivers:r}=fe(),n=r.addressResolver(this,t);this.io.i2cConfig(t),this.io.i2cWriteReg(n,i(this.REGISTER.CONTROL),3);const s=14,o=9,u=64,h=498,g=446,f=128,x=532,a=721,d=192,p=575,R=891,v=256,m=624,E=1022,b=312,C=367,w=508,L=410,$=210,_=251,D=666,N=24,G=18,H=666,Y=0,z=0,J=0,ae=16,K=[13,101,402],q=[15,120,450],oe=[29975,4071,65536];let j=ae,ue=0,ce=K[ue],F=0;Object.defineProperties(this,{gain:{get(){return j},set(k){if(k!==J&&k!==ae)throw new RangeError("Invalid gain. Expected one of: 0, 16");j=k,this.io.i2cWriteReg(n,i(this.REGISTER.TIMING),ue|j)}},integration:{get(){return ce},set(k){if(ue=K.indexOf(k),ue===-1)throw new RangeError("Invalid integration. Expected one of: 13, 101, 402");ce=k,this.io.i2cWriteReg(n,i(this.REGISTER.TIMING),ue|j)}},lux:{get(){return F}}}),this.gain=j,this.integration=ce;const U=()=>{setTimeout(()=>{this.io.i2cReadOnce(n,i(this.REGISTER.READ),4,k=>{let P=lo(k[1],k[0]),B=lo(k[3],k[2]),V=0,Q=0,ne=oe[ue];j||(ne=ne<<4),P=P*ne>>10,B=B*ne>>10;let S=0;P&&(S=(B<<o+1)/P),S=Math.round(S);const O=S+1>>1;O>=0&&O<=u?(V=h,Q=g):O<=f?(V=x,Q=a):O<=d?(V=p,Q=R):O<=v?(V=m,Q=E):O<=b?(V=C,Q=w):O<=L?(V=$,Q=_):O<=D?(V=N,Q=G):O>H&&(V=Y,Q=z);let Z=P*V-B*Q;Z<0&&(Z=0),Z+=1<<s-1,F=Z>>>s,e(F),U()})},q[ue])};U()}},toLux:{value(t){return t}},toIntensityLevel:{value(t){return Ni(br(t,0,17e3,0,100)/100,2)}}},BH1750:{ADDRESSES:{value:[35,92]},initialize:{value(t,e){const{Drivers:i}=fe(),r=i.addressResolver(this,t),n=t.mode||16;this.io.i2cConfig(t),this.io.i2cWrite(r,n);const s=()=>{setTimeout(()=>{this.io.i2cReadOnce(r,2,o=>{e(lo(o[0],o[1])),s()})},120)};s()}},toLux:{value(t){return Math.round(t/1.2)}},toIntensityLevel:{value(t){return Ni(br(t/1.2,0,65535,0,100)/100,2)}}}};ji.ALSPT19=ji["ALS-PT19"]=ji.DEFAULT;class Lo extends bx{constructor(e){super(),ao.Component.call(this,e=ao.Options(e)),ao.Controller.call(this,ji,e);let i=0,r=0,{freq:n=25}=e;kr.set(this,{}),this.toIntensityLevel||(this.toIntensityLevel=e.toIntensityLevel||(o=>o)),this.toLux||(this.toLux=e.toLux||(o=>o)),Object.defineProperties(this,{value:{get(){return i}},level:{get(){return this.toIntensityLevel(i)}}}),typeof this.initialize=="function"&&this.initialize(e,o=>i=o),typeof this.lux>"u"&&Object.defineProperty(this,"lux",{get(){return this.toLux(i)}});const s={level:0,lux:0};setInterval(()=>{s.level=this.level,s.lux=this.lux,this.emit("data",s),i!==r&&(r=i,this.emit("change",s))},n)}}yx.IS_TEST_MODE&&(Lo.Controllers=ji,Lo.purge=function(){kr.clear()});var Rx=Lo,Sx={};const uo=we(),Ax=De,{constrain:V0,fscale:K0}=Ie,jr=new Map,Y0=["x","y"];class Tx{constructor({pins:e,io:i}){this.pins=e,this.io=i,this.io.pinMode(this.pins[0],this.io.MODES.OUTPUT),this.io.pinMode(this.pins[1],this.io.MODES.OUTPUT),this.io.pinMode(this.pins[2],this.io.MODES.OUTPUT),this.io.pinMode(this.pins[3],this.io.MODES.OUTPUT)}select(e){this.io.digitalWrite(this.pins[0],e&1?this.io.HIGH:this.io.LOW),this.io.digitalWrite(this.pins[1],e&2?this.io.HIGH:this.io.LOW),this.io.digitalWrite(this.pins[2],e&4?this.io.HIGH:this.io.LOW),this.io.digitalWrite(this.pins[3],e&8?this.io.HIGH:this.io.LOW)}}const zr={ANALOG:{initialize:{value({pins:t},e){const i={x:null,y:null};t.forEach((r,n)=>{this.io.pinMode(r,this.io.MODES.ANALOG),this.io.analogRead(r,s=>{i[Y0[n]]=s,i.x!==null&&i.y!==null&&(e({x:i.x,y:i.y}),i.x=null,i.y=null)})})}},toAxis:{value(t,e){const i=jr.get(this);return V0(K0(t-i[e].zeroV,-511,511,-1,1),-1,1)}}},ESPLORA:{initialize:{value(t,e){const i=new Tx({pins:[18,19,20,21],io:this.io}),r=[11,12];let n=1;const s={x:null,y:null};this.io.pinMode(4,this.io.MODES.ANALOG);const o=h=>{s[Y0[n]]=h,s.x!==null&&s.y!==null&&(e({x:s.x,y:s.y}),s.x=null,s.y=null),this.io.removeListener("analog-read-4",o),setTimeout(u,10)};var u=()=>{i.select(r[n^=1]),this.io.analogRead(4,o)};u()}},toAxis:{value(t,e){const i=jr.get(this);return V0(K0(t-i[e].zeroV,-511,511,-1,1),-1,1)}}}};zr.DEFAULT=zr.ANALOG;class No extends Ax{constructor(e){super(),uo.Component.call(this,e=uo.Options(e)),uo.Controller.call(this,zr,e),this.toAxis||(this.toAxis=e.toAxis||(r=>r));const i={x:{invert:!1,value:0,previous:0,zeroV:0,calibrated:!1},y:{invert:!1,value:0,previous:0,zeroV:0,calibrated:!1}};i.x.zeroV=e.zeroV===void 0?0:e.zeroV.x||0,i.y.zeroV=e.zeroV===void 0?0:e.zeroV.y||0,i.x.invert=e.invertX||e.invert||!1,i.y.invert=e.invertY||e.invert||!1,jr.set(this,i),typeof this.initialize=="function"&&this.initialize(e,r=>{let n=!1;const s={x:null,y:null};Object.keys(r).forEach(o=>{const u=r[o],h=i[o];h.value=u,i[o].calibrated||(i[o].calibrated=!0,i[o].zeroV=u,n=!0),s[o]=this[o];const g=Math.abs(s[o]),f=Math.abs(h.previous);(g<f||g>f)&&(n=!0),h.previous=s[o]}),this.emit("data",{x:s.x,y:s.y}),n&&this.emit("change",{x:s.x,y:s.y})}),Object.defineProperties(this,{x:{get(){return this.toAxis(i.x.value,"x")*(i.x.invert?-1:1)}},y:{get(){return this.toAxis(i.y.value,"y")*(i.y.invert?-1:1)}}})}}Sx.IS_TEST_MODE&&(No.Controllers=zr,No.purge=()=>{jr.clear()});var wx=No,_x={};const co=we(),Pc=nt,Ox=De,Qi=new Map;function Ix({pin:t},e){const i=Qi.get(this);this.io.pinMode(t,this.io.MODES.ANALOG),setTimeout(()=>{i.isCalibrated=!0,this.emit("calibrated")},10),this.io.analogRead(t,e)}const X0={value:Ix},Me={PIR:{initialize:{value(t,e){const i=Qi.get(this),r=typeof t.calibrationDelay<"u"?t.calibrationDelay:2e3;this.io.pinMode(t.pin,this.io.MODES.INPUT),setTimeout(()=>{i.isCalibrated=!0,this.emit("calibrated")},r),this.io.digitalRead(t.pin,e)}},toBoolean:{value(t){return!!t}}},GP2Y0D805Z0F:{ADDRESSES:{value:[38]},initialize:{value(t,e){const{Drivers:i}=fe(),r=i.addressResolver(this,t),n=Qi.get(this);setTimeout(()=>{n.isCalibrated=!0,this.emit("calibrated")},10),this.io.i2cConfig(t),this.io.i2cWriteReg(r,3,254),this.io.i2cWrite(r,[0]),this.io.i2cRead(r,1,s=>{e(s[0]&2)})}},toBoolean:{value(t){return t===0}}},GP2Y0D810Z0F:{initialize:X0,toBoolean:{value(t){return t>>9===0}}},GP2Y0A60SZLF:{initialize:X0,toBoolean:{value(t){return t>>9===1}}}};Me.GP2Y0D815Z0F=Me.GP2Y0D810Z0F;Me["HC-SR501"]=Me.PIR;Me.HCSR501=Me.PIR;Me["0D805"]=Me.GP2Y0D805Z0F;Me[805]=Me.GP2Y0D805Z0F;Me["0D810"]=Me.GP2Y0D810Z0F;Me[810]=Me.GP2Y0D810Z0F;Me["0D815"]=Me.GP2Y0D815Z0F;Me[815]=Me.GP2Y0D815Z0F;Me["0A60SZLF"]=Me.GP2Y0A60SZLF;Me["60SZLF"]=Me.GP2Y0A60SZLF;Me.DEFAULT=Me.PIR;class ii extends Ox{constructor(e){super(),co.Component.call(this,e=co.Options(e)),co.Controller.call(this,Me,e);let i=!1;const r=e.freq||25,n={value:!1,isCalibrated:!1};Qi.set(this,n),Object.defineProperties(this,{detectedMotion:{get(){return this.toBoolean(n.value)}},isCalibrated:{get(){return n.isCalibrated}}}),typeof this.initialize=="function"&&this.initialize(e,s=>n.value=s),setInterval(()=>{let s=!1;const o={timestamp:Date.now(),detectedMotion:this.detectedMotion,isCalibrated:n.isCalibrated};n.isCalibrated&&this.detectedMotion&&!i&&this.emit("motionstart",o),n.isCalibrated&&!this.detectedMotion&&i&&this.emit("motionend",o),i!==this.detectedMotion&&(s=!0),this.emit("data",o),s&&this.emit("change",o),i=this.detectedMotion},r)}}ii.Collection=class extends Pc.Emitter{constructor(t){super(t)}get type(){return ii}};Pc.installMethodForwarding(ii.Collection.prototype,ii.prototype);_x.IS_TEST_MODE&&(ii.Controllers=Me,ii.purge=()=>{Qi.clear()});var Cx=ii,Lc={};const Q0=we(),hi=Ie,Nc=nt,Mx=en,Gt=new Map;function Dx(t){const e=t.sort((n,s)=>n-s),i=e.length,r=Math.floor(i/2);return i%2?e[r]:(e[r-1]+e[r])/2}let nr=class extends Mx{constructor(e){super();let i=1023,r=null,n=-1;const s=[];Q0.Component.call(this,e=Q0.Options(e)),e.type||(e.type="analog"),this.io.RESOLUTION&&this.io.RESOLUTION.ADC&&this.io.RESOLUTION.ADC!==i&&(i=this.io.RESOLUTION.ADC),this.mode=e.type==="digital"?this.io.MODES.INPUT:this.io.MODES.ANALOG,this.io.pinMode(this.pin,this.mode);const o={enabled:typeof e.enabled>"u"?!0:e.enabled,booleanBarrier:e.type==="digital"?0:null,intervalId:null,scale:null,value:0,median:0,freq:e.freq||25,previousFreq:e.freq||25};Gt.set(this,o),this.range=e.range||[0,i],this.limit=e.limit||null,this.threshold=e.threshold===void 0?1:e.threshold,this.isScaled=!1,this.io[`${e.type}Read`](this.pin,h=>{r=h,e.type!=="digital"&&s.push(r)});const u=()=>{let h;if(e.type==="digital"){this.emit("data",r),n!==r&&(this.emit("change",r),n=r);return}s.length>0&&(o.median=Dx(s));const g=Math.round(o.median);this.emit("data",g),(o.median<=n-this.threshold||o.median>=n+this.threshold)&&(this.emit("change",g),n=o.median),this.limit&&(o.median<=this.limit[0]&&(h="lower"),o.median>=this.limit[1]&&(h="upper"),h&&(this.emit("limit",{boundary:h,value:g}),this.emit(`limit:${h}`,g))),s.length=0};Object.defineProperties(this,{raw:{get(){return r}},analog:{get(){return e.type==="digital"?r:r===null?0:hi.map(this.raw,0,i,0,255)|0}},constrained:{get(){return e.type==="digital"?r:r===null?0:hi.constrain(this.raw,0,255)}},boolean:{get(){const h=Gt.get(this);let g=h.booleanBarrier;const f=h.scale||[0,i];return g===null&&(g=f[0]+(f[1]-f[0])/2),this.value>g}},scaled:{get(){let h,g;return o.scale&&r!==null?e.type==="digital"?o.scale[r]:(h=hi.fmap(r,this.range[0],this.range[1],o.scale[0],o.scale[1]),g=hi.constrain(h,o.scale[0],o.scale[1]),g):this.constrained}},freq:{get(){return o.freq},set(h){o.freq=h,o.intervalId&&clearInterval(o.intervalId),o.freq!==null&&(o.intervalId=setInterval(u,h))}},value:{get(){return o.scale?(this.isScaled=!0,this.scaled):r}},resolution:{get(){return i}}}),Lc.IS_TEST_MODE&&Object.defineProperties(this,{state:{get(){return Gt.get(this)}}}),o.enabled&&(this.freq=o.freq)}enable(){const e=Gt.get(this);return e.enabled||(this.freq=e.freq||e.previousFreq),this}disable(){const e=Gt.get(this);return e.enabled&&(e.enabled=!1,e.previousFreq=e.freq,this.freq=null),this}scale(e,i){return this.isScaled=!0,Gt.get(this).scale=Array.isArray(e)?e:[e,i],this}scaleTo(e,i){const r=Array.isArray(e)?e:[e,i];return hi.map(this.raw,0,this.resolution,r[0],r[1])}fscaleTo(e,i){const r=Array.isArray(e)?e:[e,i];return hi.fmap(this.raw,0,this.resolution,r[0],r[1])}booleanAt(e){return Gt.get(this).booleanBarrier=e,this}};class Bc extends Nc.Emitter{constructor(e){super(e)}get type(){return nr}}Nc.installMethodForwarding(Bc.prototype,nr.prototype);nr.Collection=Bc;Lc.IS_TEST_MODE&&(nr.purge=()=>{Gt.clear()});var da=nr,Px={};const Z0=we(),pa=nt,Gi=new Map,ho={cathode:[63,6,91,79,102,109,125,7,127,103],anode:[64,121,36,48,25,18,2,120,0,24]};let Di=class Bo{constructor(e){if(!(this instanceof Bo))return new Bo(e);Array.isArray(e)?e={pins:{data:e[0],clock:e[1],latch:e[2],reset:e.length===4?e[3]:null}}:typeof e.pins=="object"&&Array.isArray(e.pins)&&(e.pins={data:e.pins[0],clock:e.pins[1],latch:e.pins[2],reset:e.pins.length===4?e.pins[3]:null}),Z0.Component.call(this,e=Z0.Options(e)),this.size=e.size||1,this.pins.reset=typeof e.pins.reset<"u"?e.pins.reset:null;const i=typeof e.isAnode<"u"?e.isAnode:!1,r=i?255:0,n={isAnode:i,value:new Array(this.size).fill(r),encoded:ho[i?"anode":"cathode"],clear:r};Gi.set(this,n),Object.defineProperties(this,{isAnode:{get(){return i}},value:{get(){return n.value}}})}display(e){const i=Gi.get(this);let r;if(typeof e=="number")return this.display(String(e));if(typeof e=="string"){const n=e.match(/([0-9]{1}\.*)/g);n&&n.length&&(r=n.map(s=>s.length===1?i.encoded[s]|128:i.encoded[s[0]]))}return this.send(r),i.value=r,this}send(e){const i=Gi.get(this);let r=Array.from(arguments);return r.length===1&&(r=[e]),Array.isArray(e)&&(r=e),this.io.digitalWrite(this.pins.latch,this.io.LOW),r.forEach(function(n){if(typeof n=="string"&&(n=n.charCodeAt(0)),this.isAnode&&n!==255&&!i.encoded.includes(n)&&!i.encoded.includes(n&-129)){const s=ho.anode.findIndex(o=>o===n);s!==-1&&(n=ho.cathode[s])}this.board.shiftOut(this.pins.data,this.pins.clock,!0,n)},this),this.io.digitalWrite(this.pins.latch,this.io.HIGH),i.value=r,this}clear(){const e=Gi.get(this);return this.send(Array(this.size).fill(e.clear))}reset(){if(this.pins.reset===null)throw new Error("ShiftRegister was not initialized with a reset pin");return this.io.digitalWrite(this.pins.clock,this.io.LOW),this.io.digitalWrite(this.pins.reset,this.io.LOW),this.io.digitalWrite(this.pins.clock,this.io.HIGH),this.io.digitalWrite(this.pins.reset,this.io.HIGH),this}};class xa extends pa{constructor(e){super(e)}get type(){return Di}}pa.installMethodForwarding(xa.prototype,Di.prototype);pa.installMethodForwarding(xa.prototype,Di.prototype);Di.Collection=xa;Px.IS_TEST_MODE&&(Di.purge=()=>{Gi.clear()});var Fc=Di,Lx={};const zi=we(),Gc=nt,Nx=De,Ct=rr,J0=kt(),Uc=Ie,Bx=da,Fx=Fc,Ke=new Map,vi=new Map;function Wc(t){return["clock","data","latch"].reduce((e,i)=>`${e}.${t[i]}`,"")}function eu(t,e,i){return i?t|=1<<e:t&=~(1<<e)}function Gx(t,e){const i=Wc(t.settings.register),r=vi.get(t.board)[i];let n=r.value;const s=Ke.get(t).bits,o=e!=="reverse";n=eu(n,s.a,o),n=eu(n,s.b,!o),r.value!==n&&r.send(n)}const Zi={DEFAULT:{},ShiftRegister:{initialize:{value({register:t,bits:e}){const i=Wc(t);if(!e||e.a===void 0||e.b===void 0)throw new Error("ShiftRegister Motors MUST contain HBRIDGE bits {a, b}");Ke.get(this).bits=e,vi.has(this.board)||vi.set(this.board,{}),vi.get(this.board)[i]||(vi.get(this.board)[i]=new Fx({board:this.board,pins:t})),this.io.pinMode(this.pins.pwm,this.io.MODES.PWM)}},dir:{value(t){return this.stop(),Gx(this,t.name),this.direction=t,ie.nextTick(()=>this.emit(t.name)),this}}},PCA9685:{initialize:{value({address:t,pwmRange:e,frequency:i}){const r=Ke.get(this);this.address=t||64,this.pwmRange=e||[0,4080],this.frequency=i||50,r.expander=J0.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),Object.keys(this.pins).forEach(n=>{this.pins[n]=r.expander.normalize(this.pins[n])})}},setPWM:{writable:!0,value(t,e){Ke.get(this).expander.analogWrite(t,e)}},setPin:{writable:!0,value(t,e){Ke.get(this).expander.digitalWrite(t,e)}}},PCA9685_Hybrid:{initialize:{value({address:t,pwmRange:e,frequency:i}){const r=Ke.get(this);this.address=t||64,this.pwmRange=e||[0,4080],this.frequency=i||50,r.expander=J0.get({address:this.address,controller:"PCA9685",bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),this.pins.pwm=r.expander.normalize(this.pins.pwm)}},setPWM:{writable:!0,value(t,e){Ke.get(this).expander.analogWrite(t,e)}}},EVS_EV3:{initialize:{value(t){const e=Ke.get(this);e.shield=Ct.shieldPort(t.pin),e.ev3=new Ct(Object.assign(t,{io:this.io})),this.settings.pins={pwm:t.pin,dir:t.pin}}},setPWM:{value(t,e){const i=Ke.get(this),r=i.shield.motor===Ct.M1?Ct.SPEED_M1:Ct.SPEED_M2;let n=Uc.scale(e,0,255,0,100)|0;if(e===0)i.ev3.write(i.shield,Ct.COMMAND,Ct.Motor_Reset);else{this.direction.value||(n=-n);const s=[n,0,0,Ct.CONTROL_SPEED|Ct.CONTROL_GO];i.ev3.write(i.shield,r,s)}}},setPin:{value(t,e){this.setPWM(this.pin,e)}},validatePins:{value(){if(typeof this.settings.pin>"u")throw new Error("Pin must be defined")}}},GROVE_I2C_MOTOR_DRIVER:{REGISTER:{value:{ADDRESS:15}},COMMANDS:{value:{SET_SPEED:130,SET_PWM_FREQUENCY:132,SET_DIRECTION:170,NOOP:1}},initialize:{value(t){const e=Ke.get(this);let i=Ke.get("GROVE_I2C_MOTOR_DRIVER");i||(i={direction:{A:1,B:1},speed:{A:0,B:0}},Ke.set("GROVE_I2C_MOTOR_DRIVER",i)),e.shared=i,e.pin=t.pin.toUpperCase(),this.settings.pins={pwm:t.pin,dir:t.pin},this.address=t.address||this.REGISTER.ADDRESS,t.address=this.address,this.io.i2cConfig(t)}},setPWM:{value(t,e){const i=Ke.get(this),r=zi.constrain(e,0,255)|0;i.shared.speed[i.pin]=r,this.io.i2cWrite(this.address,[this.COMMANDS.SET_SPEED,i.shared.speed.A,i.shared.speed.B])}},setPin:{value(t,e){const i=Ke.get(this);i.shared.direction[i.pin]=e?1:2;const r=i.shared.direction.A&3,s=(i.shared.direction.B&3)<<2|r;this.io.i2cWrite(this.address,[this.COMMANDS.SET_DIRECTION,s,this.COMMANDS.NOOP])}},validatePins:{value(){if(typeof this.settings.pin>"u")throw new Error("Pin must be defined")}}}};Zi.EVS_NXT=Zi.EVS_EV3;const Ux={NONDIRECTIONAL:{pins:{get(){return this.settings.pin?{pwm:this.settings.pin}:this.settings.pins||{}}},dir:{writable:!0,configurable:!0,value(t){return t=t||this.speed(),this}},resume:{value(){const t=this.speed();return this.speed({speed:t}),this}}},DIRECTIONAL:{pins:{get(){return Array.isArray(this.settings.pins)?{pwm:this.settings.pins[0],dir:this.settings.pins[1]}:this.settings.pins}},dir:{writable:!0,configurable:!0,value(t){return this.stop(),this.setPin(this.pins.dir,t.value),this.direction=t,ie.nextTick(()=>this.emit(t.name)),this}}},CDIR:{pins:{get(){return Array.isArray(this.settings.pins)?{pwm:this.settings.pins[0],dir:this.settings.pins[1],cdir:this.settings.pins[2]}:this.settings.pins}},dir:{value(t){return this.stop(),this.direction=t,this.setPin(this.pins.cdir,1^t.value),this.setPin(this.pins.dir,t.value),ie.nextTick(()=>this.emit(t.name)),this}},brake:{value(t){return this.speed({speed:0,saveSpeed:!1}),this.setPin(this.pins.dir,1,127),this.setPin(this.pins.cdir,1,128,127),this.speed({speed:255,saveSpeed:!1,braking:!0}),ie.nextTick(()=>this.emit("brake")),t&&this.board.wait(t,()=>this.stop()),this}}}};class je extends Nx{constructor(e){super();var i,r;zi.Component.call(this,e=zi.Options(e)),this.settings=e,typeof this.settings.device>"u"&&(this.settings.device="DIRECTIONAL",typeof this.settings.pins>"u"&&typeof this.settings.register!="object"&&(this.settings.device="NONDIRECTIONAL"),this.settings.pins&&(Array.isArray(this.settings.pins)?this.settings.device=["NONDIRECTIONAL","DIRECTIONAL","CDIR"][this.settings.pins.length-1]:(typeof this.settings.pins.dir>"u"?this.settings.device="NONDIRECTIONAL":this.settings.device="DIRECTIONAL",typeof this.settings.pins.cdir<"u"&&(this.settings.device="CDIR")))),typeof this.settings.controller=="string"&&(this.settings.controller.startsWith("EVS")||this.settings.controller.startsWith("GROVE_I2C"))&&(this.settings.device="DIRECTIONAL"),i=typeof this.settings.device=="string"?Ux[this.settings.device]:this.settings.device,this.threshold=typeof this.settings.threshold<"u"?this.settings.threshold:30,this.invertPWM=typeof this.settings.invertPWM<"u"?this.settings.invertPWM:!1,Object.defineProperties(this,i),this.settings.register&&(this.settings.controller="ShiftRegister"),this.settings.controller&&(typeof this.settings.controller=="string"?Zi[this.settings.controller]:this.settings.controller,zi.Controller.call(this,Zi,e)),this.settings.current&&(this.settings.current.board=this.board,this.current=new Bx(this.settings.current)),r={isOn:!1,currentSpeed:typeof this.settings.speed<"u"?this.settings.speed:128,braking:!1,enabled:!1},Ke.set(this,r),Object.defineProperties(this,{isOn:{get:function(){return r.isOn}},currentSpeed:{get:function(){return r.currentSpeed}},braking:{get:function(){return r.braking}},enabled:{get:function(){return r.enabled}}}),this.direction={value:1},this.initialize&&this.initialize(e),this.validatePins(),this.enable(),this.dir(this.direction)}}je.prototype.initialize=function(){this.io.pinMode(this.pins.pwm,this.io.MODES.PWM),["dir","cdir","brake","enable"].forEach(t=>{typeof this.pins[t]<"u"&&this.io.pinMode(this.pins[t],this.io.MODES.OUTPUT)})};je.prototype.setPin=function(t,e){this.io.digitalWrite(t,e)};je.prototype.setPWM=function(t,e){this.io.analogWrite(t,Uc.map(e,0,255,0,this.board.RESOLUTION.PWM))};je.prototype.speed=function(t){var e=Ke.get(this);return typeof t>"u"?e.currentSpeed:(typeof t=="number"&&(t={speed:t}),t.speed=zi.constrain(t.speed,0,255),t.saveSpeed=typeof t.saveSpeed<"u"?t.saveSpeed:!0,t.speed<this.threshold&&(t.speed=0),e.isOn=t.speed!==0,t.saveSpeed&&(e.currentSpeed=t.speed),t.braking&&(e.braking=!0),this.invertPWM&&this.direction.value===1&&(t.speed^=255),this.setPWM(this.pins.pwm,t.speed),this)};je.prototype.start=function(t){return this.pins.brake&&this.braking&&this.setPin(this.pins.brake,0),t=typeof t<"u"?t:this.speed(),this.speed({speed:t,braking:!1}),t>0&&ie.nextTick(()=>this.emit("start")),this};je.prototype.stop=function(){return this.speed({speed:0,saveSpeed:!1}),ie.nextTick(()=>this.emit("stop")),this};je.prototype.brake=function(t){if(typeof this.pins.brake>"u")this.board.io.name!=="Mock"&&console.log("Non-braking motor type"),this.stop();else if(this.setPin(this.pins.brake,1),this.setPin(this.pins.dir,1),this.speed({speed:255,saveSpeed:!1,braking:!0}),ie.nextTick(()=>this.emit("brake")),t){var e=this;this.board.wait(t,function(){e.resume()})}return this};je.prototype.release=function(){return this.resume(),ie.nextTick(()=>this.emit("release")),this};je.prototype.resume=function(){var t=this.speed();return this.dir(this.direction),this.start(t),this};je.prototype.enable=function(){var t=Ke.get(this);typeof this.pins.enable<"u"&&!t.enabled&&(this.setPin(this.pins.enable,1),t.enabled=!0)};je.prototype.disable=function(){var t=Ke.get(this);typeof this.pins.enable<"u"&&t.enabled&&(this.setPin(this.pins.enable,0),t.enabled=!1)};je.prototype.validatePins=function(){if(typeof this.pins.pwm>"u")throw new Error("PWM pin must be defined");if(typeof this.pins.dir>"u"&&this.settings.device!=="NONDIRECTIONAL")throw new Error("DIR pin must be defined");if(this.settings.device==="CDIR"&&typeof this.pins.cdir>"u")throw new Error("CDIR pin must be defined for three wire motors")};[{name:"forward",abbr:"fwd",value:1},{name:"reverse",abbr:"rev",value:0}].forEach(t=>{je.prototype[t.name]=je.prototype[t.abbr]=function(e){return this.dir(t),this.start(e),this}});je.SHIELD_CONFIGS={ADAFRUIT_V1:{M1:{pins:{pwm:11},register:{data:8,clock:4,latch:12},bits:{a:2,b:3}},M2:{pins:{pwm:3},register:{data:8,clock:4,latch:12},bits:{a:1,b:4}},M3:{pins:{pwm:6},register:{data:8,clock:4,latch:12},bits:{a:5,b:7}},M4:{pins:{pwm:5},register:{data:8,clock:4,latch:12},bits:{a:0,b:6}}},ADAFRUIT_V2:{M1:{pins:{pwm:8,dir:9,cdir:10},address:96,controller:"PCA9685"},M2:{pins:{pwm:13,dir:12,cdir:11},address:96,controller:"PCA9685"},M3:{pins:{pwm:2,dir:3,cdir:4},address:96,controller:"PCA9685"},M4:{pins:{pwm:7,dir:6,cdir:5},address:96,controller:"PCA9685"}},SEEED_STUDIO:{A:{pins:{pwm:9,dir:8,cdir:11}},B:{pins:{pwm:10,dir:12,cdir:13}}},FREETRONICS_HBRIDGE:{A:{pins:{pwm:6,dir:4,cdir:7}},B:{pins:{pwm:5,dir:3,cdir:2}}},ARDUINO_MOTOR_SHIELD_R3_1:{A:{pins:{pwm:3,dir:12}},B:{pins:{pwm:11,dir:13}}},ARDUINO_MOTOR_SHIELD_R3_2:{A:{pins:{pwm:3,dir:12,brake:9}},B:{pins:{pwm:11,dir:13,brake:8}}},ARDUINO_MOTOR_SHIELD_R3_3:{A:{pins:{pwm:3,dir:12,brake:9,current:"A0"}},B:{pins:{pwm:11,dir:13,brake:8,current:"A1"}}},DF_ROBOT:{A:{pins:{pwm:6,dir:7}},B:{pins:{pwm:5,dir:4}}},NKC_ELECTRONICS_KIT:{A:{pins:{pwm:9,dir:12}},B:{pins:{pwm:10,dir:13}}},RUGGED_CIRCUITS:{A:{pins:{pwm:3,dir:12}},B:{pins:{pwm:11,dir:13}}},SPARKFUN_ARDUMOTO:{A:{pins:{pwm:3,dir:12}},B:{pins:{pwm:11,dir:13}}},POLOLU_DRV8835_SHIELD:{M1:{pins:{pwm:9,dir:7}},M2:{pins:{pwm:10,dir:8}}},POLOLU_VNH5019_SHIELD:{M1:{pins:{pwm:9,dir:2,cdir:4,enable:6}},M2:{pins:{pwm:10,dir:7,cdir:8,enable:12}}},MICRO_MAGICIAN_V2:{A:{pins:{pwm:6,dir:8},invertPWM:!0},B:{pins:{pwm:5,dir:7},invertPWM:!0}},SPARKFUN_LUDUS:{A:{pins:{pwm:3,dir:4,cdir:5}},B:{pins:{pwm:6,dir:7,cdir:8}}},SPARKFUN_DUAL_HBRIDGE_EDISON_BLOCK:{A:{pins:{pwm:20,dir:33,cdir:46,enable:47}},B:{pins:{pwm:14,dir:48,cdir:36,enable:47}}},PICAR_V:{A:{controller:"PCA9685_Hybrid",pins:{pwm:4,dir:"GPIO17"}},B:{controller:"PCA9685_Hybrid",pins:{pwm:5,dir:"GPIO27"}}}};class $c extends Gc{constructor(e){super(e)}get type(){return je}}Gc.installMethodForwarding($c.prototype,je.prototype);je.Collection=$c;Lx.IS_TEST_MODE&&(je.Controllers=Zi,je.purge=function(){Ke.clear(),vi.clear()});var Wx=je;function Pi(t){var e=ie.version,i=e.split(".")[0];i=i.split("v")[1];var r=e.split(".")[1];i==0&&r<10&&(console.log("Error: Please update to the latest version of node! This library requires 0.10.x or later"),ie.exit(0)),this.intervalT1=null,this.timeOutT1=null,this.intervalCount=1,this.deferredInterval=!1,this.deferredTimeout=!1,this.deferredTimeoutRef=null,this.deferredIntervalRef=null,this.timeoutCallbackRef=null,this.intervalCallbackRef=null,this.timeoutImmediateRef=null,this.intervalImmediateRef=null,this.intervalErrorChecked=!1,this.intervalType="",t&&(this.logging=!0)}Pi.prototype.time=function(t,e,i,r){if(r){var n=ie.hrtime();e?(e.push(function(){var o=ie.hrtime(n);i=="s"?r(o[0]+o[1]/1e9):i=="m"?r(o[0]/1e3+o[1]/1e6):i=="u"?r(o[0]/1e6+o[1]/1e3):i=="n"?r(o[0]/1e9+o[1]):r(o)}),t.apply(null,e)):t(function(){var o=ie.hrtime(n);i=="s"?r(o[0]+o[1]/1e9):i=="m"?r(o[0]/1e3+o[1]/1e6):i=="u"?r(o[0]/1e6+o[1]/1e3):i=="n"?r(o[0]/1e9+o[1]):r(o)})}else{var n=ie.hrtime();e?t.apply(null,e):t();var s=ie.hrtime(n);return i=="s"?s[0]+s[1]/1e9:i=="m"?s[0]/1e3+s[1]/1e6:i=="u"?s[0]/1e6+s[1]/1e3:i=="n"?s[0]/1e9+s[1]:ie.hrtime(n)}};Pi.prototype.setInterval=function(t,e,i,r){this.intervalErrorChecked||(t?typeof t!="function"&&(console.log("Task argument to setInterval must be a function reference"),ie.exit(1)):(console.log("A task function must be specified to setInterval"),ie.exit(1)),i?typeof i!="string"&&(console.log("Interval argument to setInterval must be a string specified as an integer followed by 's' for seconds, 'm' for milli, 'u' for micro, and 'n' for nanoseconds. Ex. 2u"),ie.exit(1)):(console.log("An interval argument must be specified"),ie.exit(1)),r&&(typeof r!="function"?(console.log("Callback argument to setInterval must be a function reference"),ie.exit(1)):this.intervalCallbackRef=r),this.intervalType=i[i.length-1],this.intervalType=="s"?this.intervalTime=i.slice(0,i.length-1)*1e9:this.intervalType=="m"?this.intervalTime=i.slice(0,i.length-1)*1e6:this.intervalType=="u"?this.intervalTime=i.slice(0,i.length-1)*1e3:this.intervalType=="n"?this.intervalTime=i.slice(0,i.length-1):(console.log("Error with argument: "+i+': Incorrect interval format. Format is an integer followed by "s" for seconds, "m" for milli, "u" for micro, and "n" for nanoseconds. Ex. 2u'),ie.exit(1)),this.intervalErrorChecked=!0);var n=this;this.intervalTime>0?(this.intervalT1==null&&(this.intervalT1=ie.hrtime()),this.intervalTime*this.intervalCount>8e15&&(this.intervalT1=ie.hrtime(),this.intervalCount=1),this.difArray=ie.hrtime(this.intervalT1),this.difTime=this.difArray[0]*1e9+this.difArray[1],this.difTime<this.intervalTime*this.intervalCount?this.intervalTime>25e6?this.deferredInterval==!1?(this.deferredInterval=!0,msDelay=(this.intervalTime-25e6)/1e6,this.deferredIntervalRef=setTimeout(function(){n.setInterval(t,e,i,r)},msDelay)):(this.deferredIntervalRef=null,this.intervalImmediateRef=setImmediate(function(){n.setInterval(t,e,i,r)})):this.intervalImmediateRef=setImmediate(function(){n.setInterval(t,e,i,r)}):(this.intervalImmediateRef=null,this.logging&&console.log("nanotimer log: cycle time at - "+this.difTime),e?t.apply(null,e):t(),this.intervalT1&&(this.intervalCount++,this.deferredInterval=!1,this.intervalImmediateRef=setImmediate(function(){n.setInterval(t,e,i,r)})))):(this.intervalT1==null&&(this.intervalT1=ie.hrtime(),this.intervalContinue=!0),this.intervalContinue==!0?(e?t.apply(null,e):t(),setImmediate(function(){n.setInterval(t,e,i,r)})):(this.intervalT1=null,this.intervalCount=1,r()))};Pi.prototype.setTimeout=function(t,e,i,r){t?typeof t!="function"&&(console.log("Task argument to setTimeout must be a function reference"),ie.exit(1)):(console.log("A task function must be specified to setTimeout"),ie.exit(1)),i?typeof i!="string"&&(console.log("Delay argument to setTimeout must be a string specified as an integer followed by 's' for seconds, 'm' for milli, 'u' for micro, and 'n' for nanoseconds. Ex. 2u"),ie.exit(1)):(console.log("A delay argument must be specified"),ie.exit(1)),r&&(typeof r!="function"?(console.log("Callback argument to setTimeout must be a function reference"),ie.exit(1)):this.timeoutCallbackRef=r);var n=this,s=i[i.length-1];if(s=="s")var o=i.slice(0,i.length-1)*1e9;else if(s=="m")var o=i.slice(0,i.length-1)*1e6;else if(s=="u")var o=i.slice(0,i.length-1)*1e3;else if(s=="n")var o=i.slice(0,i.length-1);else console.log("Error with argument: "+i+': Incorrect delay format. Format is an integer followed by "s" for seconds, "m" for milli, "u" for micro, and "n" for nanoseconds. Ex. 2u'),ie.exit(1);this.timeOutT1==null&&(this.timeOutT1=ie.hrtime());var u=ie.hrtime(this.timeOutT1),h=u[0]*1e9+u[1];if(h<o)o>25e6?this.deferredTimeout==!1?(this.deferredTimeout=!0,msDelay=(o-25e6)/1e6,this.deferredTimeoutRef=setTimeout(function(){n.setTimeout(t,e,i,r)},msDelay)):(this.deferredTimeoutRef=null,this.timeoutImmediateRef=setImmediate(function(){n.setTimeout(t,e,i,r)})):this.timeoutImmediateRef=setImmediate(function(){n.setTimeout(t,e,i,r)});else if(this.timeoutImmediateRef=null,this.timeOutT1=null,this.deferredTimeout=!1,this.logging==!0&&console.log("nanotimer log: actual wait - "+h),e?t.apply(null,e):t(),r){var g={waitTime:h};r(g)}};Pi.prototype.clearInterval=function(){this.deferredIntervalRef&&(clearTimeout(this.deferredIntervalRef),this.deferredInterval=!1),this.intervalImmediateRef&&clearImmediate(this.intervalImmediateRef),this.intervalT1=null,this.intervalCount=1,this.intervalErrorChecked=!1,this.intervalCallbackRef&&this.intervalCallbackRef()};Pi.prototype.clearTimeout=function(){if(this.deferredTimeoutRef){clearTimeout(this.deferredTimeoutRef);var t=ie.hrtime(this.timeOutT1),e=t[0]*1e9+t[1];this.deferredTimeout=!1}if(this.timeoutImmediateRef&&clearImmediate(this.timeoutImmediateRef),this.timeOutT1=null,this.timeoutCallbackRef){var i={waitTime:e};this.timeoutCallbackRef(i)}};var $x=Pi;const fo=we(),Hx=$x,Hc=1e6,Ri=new Map;let Fo=4;function po(t){return t.timer&&(t.timer.clearInterval(),delete t.timer),t}const kx={DEFAULT:{initialize:{writable:!0,value(){this.io.pinMode(this.pin,this.io.MODES.OUTPUT)}},tone:{writable:!0,value(t,e){if(isNaN(t)||isNaN(e))throw new Error("Piezo.tone: invalid tone or duration");po(this),this.timer=new Hx;let i=1;return this.timer.setInterval(()=>{i=i===1?0:1,this.io.digitalWrite(this.pin,i),this.timer.difTime/1e6>e&&po(this)},null,`${t}u`,()=>{}),this}},noTone:{writable:!0,value(){return this.io.digitalWrite(this.pin,0),po(this)}}},I2C_BACKPACK:{ADDRESSES:{value:[10]},REGISTER:{value:{NO_TONE:0,TONE:1}},initialize:{writable:!0,value(t){const{Drivers:e}=fe(),i=e.addressResolver(this,t),r=Ri.get(this);this.io.i2cConfig(t),r.address=i}},tone:{writable:!0,value(t,e){const i=Ri.get(this);if(isNaN(t)||isNaN(e))throw new Error("Piezo.tone: invalid tone or duration");return this.io.i2cWrite(i.address,[this.REGISTER.TONE,this.pin,t>>8&255,t&255,e>>24&255,e>>16&255,e>>8&255,e&255]),this}},noTone:{writable:!0,value(){const t=Ri.get(this);return this.io.i2cWrite(t.address,[this.REGISTER.NO_TONE,this.pin]),this}}}};class Ge{constructor(e){fo.Component.call(this,e=fo.Options(e)),fo.Controller.call(this,kx,e);const i={isPlaying:!1,timeout:null,address:null};Ri.set(this,i),Object.defineProperties(this,{isPlaying:{get(){return i.isPlaying}}}),typeof this.initialize=="function"&&this.initialize(e)}note(e,i){return this.frequency(Ge.Parsers.hzFromInput(e),i)}tone(e,i){return this.frequency(Ge.ToFrequency(e),i)}frequency(e,i){return this.tone(Ge.ToTone(e),i)}play(e,i){typeof e!="object"&&(e={song:e}),typeof e.song=="string"&&(e.song=Ge.ToSong(e.song,e.beats)),e.song&&!Array.isArray(e.song)&&(e.song=[e.song]);const r=Ri.get(this),n=e.tempo||250,s=Math.round(6e4/n),o=e.song||[];let u,h=0;const g=()=>{if(h===o.length){r.isPlaying=!1,typeof i=="function"&&i(e);return}const f=o[h],x=Ge.Parsers.hzFromInput(f);u=Ge.Parsers.beatFromNote(f)*s,h++,x===null?this.noTone():this.frequency(x,u),r.timeout=setTimeout(g,u)};return r.isPlaying=!0,g(),this}off(){return this.noTone()}stop(){const e=Ri.get(this);return e.timeout&&(clearTimeout(e.timeout),e.timeout=null),this}}Ge.Notes={c0:16,"c#0":17,d0:18,"d#0":19,e0:21,f0:22,"f#0":23,g0:25,"g#0":26,a0:28,"a#0":29,b0:31,c1:33,"c#1":35,d1:37,"d#1":39,e1:41,f1:44,"f#1":47,g1:49,"g#1":52,a1:55,"a#1":58,b1:62,c2:65,"c#2":69,d2:73,"d#2":78,e2:82,f2:87,"f#2":93,g2:98,"g#2":104,a2:110,"a#2":117,b2:124,c3:131,"c#3":139,d3:147,"d#3":156,e3:165,f3:175,"f#3":185,g3:196,"g#3":208,a3:220,"a#3":233,b3:247,c4:262,"c#4":277,d4:294,"d#4":311,e4:330,f4:349,"f#4":370,g4:392,"g#4":415,a4:440,"a#4":466,b4:494,c5:523,"c#5":554,d5:587,"d#5":622,e5:659,f5:698,"f#5":740,g5:784,"g#5":831,a5:880,"a#5":932,b5:988,c6:1047,"c#6":1109,d6:1175,"d#6":1245,e6:1319,f6:1397,"f#6":1480,g6:1568,"g#6":1661,a6:1760,"a#6":1865,b6:1976,c7:2093,"c#7":2217,d7:2349,"d#7":2489,e7:2637,f7:2794,"f#7":2960,g7:3136,"g#7":3322,a7:3520,"a#7":3729,b7:3951,c8:4186,"c#8":4435,d8:4699,"d#8":4978,e8:5274,f8:5588,"f#8":5920,g8:6272,"g#8":6645,a8:7040,"a#8":7459,b8:7902};Ge.Frequencies=Object.keys(Ge.Notes).reduce((t,e)=>(t[Ge.Notes[e]]=e,t),{});Ge.Parsers={};Ge.Parsers.hzFromInput=t=>{let e=t;return Array.isArray(t)&&(e=t[0]),typeof e=="number"&&Ge.Frequencies[e]||(typeof e=="string"&&(e=e.toLowerCase().trim(),(e.endsWith("#")||e.length===1)&&(e+=Fo),e=Ge.Notes[e]||null),isNaN(e)&&(e=null)),e};Ge.Parsers.beatFromNote=t=>{let e=1;return Array.isArray(t)&&t[1]!==void 0&&(e=t[1]),e};Ge.isValidOctave=t=>typeof t=="number"&&t>=0&&t<=8;Ge.defaultOctave=t=>(Ge.isValidOctave(t)&&(Fo=t),Fo);Ge.ToFrequency=t=>{const i=t/Hc*2;return Math.round(1/i)};Ge.ToTone=t=>{const i=1/t/2;return Math.round(i*Hc)};Ge.ToSong=(t,e=1)=>{const i=t.split(" "),r=[];let n,s;for(;i.length;)n=i.shift(),/^[0-9]+$/.test(n)&&(n=parseInt(n,10)),s=r[r.length-1],s&&s[0]===n?s[1]+=e:r.push([n,e]);return r};var jx=Ge,zx={};const Nr=we(),kc=nt,bt=rr,qx=Ie,Vx=en,Kx=Nr.Pins,Rt=qx.toFixed,qr=new Map;function Ft(t,e){this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,i=>{e.call(this,i)})}const Se={GP2Y0A21YK:{initialize:{value:Ft},toCm:{value(t){return Rt(12343.85*t**-1.15,2)}}},GP2D120XJ00F:{initialize:{value:Ft},toCm:{value(t){return Rt(2914/(t+5)-1,2)}}},GP2Y0A02YK0F:{initialize:{value:Ft},toCm:{value(t){return Rt(10650.08*t**-.935-10,2)}}},GP2Y0A41SK0F:{initialize:{value:Ft},toCm:{value(t){return Rt(2076/(t-11),2)}}},GP2Y0A710K0F:{initialize:{value:Ft},toCm:{value(t){return Rt(38631e4*t**-2.463343,0)}}},SRF10:{ADDRESSES:{value:[112]},initialize:{value(t,e){const{Drivers:i}=fe(),r=i.addressResolver(this,t),n=65;this.io.i2cConfig(t),this.io.i2cWrite(r,[1,16]),this.io.i2cWrite(r,[2,255]);const s=()=>{this.io.i2cWrite(r,[0,81]),setTimeout(()=>{this.io.i2cWrite(r,[2]),this.io.i2cReadOnce(r,2,o=>e(o[0]<<8|o[1])),s()},n)};s()}},toCm:{value(t){return t}}},MB1000:{initialize:{value:Ft},toCm:{value(t){return Rt(t/2*2.54,2)}}},MB1003:{initialize:{value:Ft},toCm:{value(t){return Rt(t/2,1)}}},MB1230:{initialize:{value:Ft},toCm:{value(t){return t>>0}}},HCSR04:{initialize:{value(t,e){let i=t.pinValue;const r=65;Kx.isFirmata(this)&&(typeof i=="string"&&i.length>1&&i[0]==="A"&&(i=this.io.analogPins[+i.slice(1)]),i=+i,this.io.analogPins.includes(i)&&(t.pin=i),this.pin=t.pin);const n={pin:t.pin,value:this.io.HIGH,pulseOut:5},s=()=>{this.io.pingRead(n,o=>{e(o),setTimeout(s,r)})};s()}},toCm:{value(t){return Rt(t/29.1/2,1)}}},HCSR04I2CBACKPACK:{ADDRESSES:{value:[39]},initialize:{value(t,e){const{Drivers:i}=fe(),r=i.addressResolver(this,t),n=90;this.io.i2cConfig(t),typeof t.pin>"u"&&(this.pin=8);const s=()=>{this.io.i2cReadOnce(r,2,o=>{e((o[0]<<8)+o[1]),setTimeout(s,n)})};s()}},toCm:{value(t){return Rt(t/29.1/2,1)}}},LIDARLITE:{ADDRESSES:{value:[98]},REGISTER:{value:{ENABLE:0,READ:143}},initialize:{value(t,e){const{Drivers:i}=fe(),r=i.addressResolver(this,t);this.io.i2cConfig(t);const n=()=>{this.io.i2cWrite(r,this.REGISTER.ENABLE,4),setTimeout(()=>{this.io.i2cReadOnce(r,this.REGISTER.READ,2,s=>{e((s[0]<<8)+s[1]),n()})},20)};n()}},toCm:{value(t){return t>>0}}},EVS_EV3_IR:{initialize:{value(t,e){const i=qr.get(this);i.shield=bt.shieldPort(t.pin),i.ev3=new bt(Object.assign(t,{io:this.io})),i.ev3.setup(i.shield,bt.Type_EV3),i.ev3.read(i.shield,bt.Proximity,bt.Proximity_Bytes,r=>e(r[0]|r[1]<<8))}},toCm:{value(t){return t}}},EVS_EV3_US:{initialize:{value(t,e){const i=qr.get(this);i.shield=bt.shieldPort(t.pin),i.ev3=new bt(Object.assign(t,{io:this.io})),i.ev3.setup(i.shield,bt.Type_EV3),i.ev3.read(i.shield,bt.Proximity,bt.Proximity_Bytes,r=>e(r[0]|r[1]<<8))}},toCm:{value(t){return t/10}}}};Se["2Y0A21"]=Se.GP2Y0A21YK;Se["2D120X"]=Se.GP2D120XJ00F;Se["2Y0A02"]=Se.GP2Y0A02YK0F;Se["0A41"]=Se.GP2Y0A41SK0F;Se["0A21"]=Se.GP2Y0A21YK;Se["0A02"]=Se.GP2Y0A02YK0F;Se["41SK0F"]=Se.GP2Y0A41SK0F;Se["21YK"]=Se.GP2Y0A21YK;Se["2YK0F"]=Se.GP2Y0A02YK0F;Se.MB1010=Se.MB1000;Se["LV-MaxSonar-EZ"]=Se.MB1000;Se["LV-MaxSonar-EZ0"]=Se.MB1000;Se["LV-MaxSonar-EZ1"]=Se.MB1010;Se["HRLV-MaxSonar-EZ0"]=Se.MB1003;Se["XL-MaxSonar-EZ3"]=Se.MB1230;["HC-SR04","SR04","SRF05","SRF06","PARALLAXPING","SEEEDPING","GROVEPING","PING_PULSE_IN","ULTRASONIC_PING"].forEach(t=>{Se[t]=Se.HCSR04});["HCSR04-I2C-BACKPACK","HC-SR04-I2C-BACKPACK","SR04-I2C-BACKPACK","SR04I2CBACKPACK","PINGI2CBACKPACK","PING-I2C-BACKPACK","HCSR04_I2C_BACKPACK","HC_SR04_I2C_BACKPACK","SR04_I2C_BACKPACK","SR04I2CBACKPACK","PINGI2CBACKPACK","PING_I2C_BACKPACK"].forEach(t=>{Se[t]=Se.HCSR04I2CBACKPACK});Se["LIDAR-Lite"]=Se.LIDARLITE;Se.DEFAULT=Se.GP2Y0A21YK;class Ht extends Vx{constructor(e){super();const i=typeof e=="object"?e.pin:e;Nr.Component.call(this,e=Nr.Options(e)),Nr.Controller.call(this,Se,e);const r={},n=e.freq||25;let s=0,o=0;this.toCm||(this.toCm=e.toCm||(u=>u)),qr.set(this,r),Object.defineProperties(this,{centimeters:{get(){return this.toCm(s)}},cm:{get(){return this.centimeters}},inches:{get(){return Rt(this.centimeters*.39,2)}},in:{get(){return this.inches}}}),typeof this.initialize=="function"&&(e.pinValue=i,this.initialize(e,u=>s=u)),setInterval(()=>{if(s===void 0)return;const u={cm:this.cm,centimeters:this.centimeters,in:this.in,inches:this.inches};this.emit("data",u),s!==o&&(o=s,this.emit("change",u))},n)}}Ht.Collection=class extends kc.Emitter{constructor(t){super(t)}get type(){return Ht}};kc.installMethodForwarding(Ht.Collection.prototype,Ht.prototype);Ht.Controllers=Object.keys(Se);zx.IS_TEST_MODE&&(Ht.Controllers=Se,Ht.purge=()=>{qr.clear()});var Yx=Ht;const xo=we(),Xx=De,tu=Ie,Qx=Dc,Zx=da,Go=0,Ji=1e3,Jx=200,eg=50,Wt=new Map,tg={DEFAULT:{initialize:{value(t){if(typeof t.emitter>"u")throw new Error("Emitter pin is required");if(!t.pins||t.pins.length===0)throw new Error("Pins must be defined");const e=Wt.get(this);e.emitter=new Qx({board:this.board,pin:t.emitter}),e.sensorStates=t.pins.map(i=>{const r=new Zx({board:this.board,freq:e.freq,pin:i}),n={sensor:r,rawValue:0,dataReceived:!1};return r.on("data",s=>{ig(this,n,s)}),n})}}}};function ig(t,e,i){const r=Wt.get(t);e.dataReceived=!0,e.rawValue=i,r.sensorStates.every(({dataReceived:s})=>s)&&(t.emit("data",t.raw),r.autoCalibrate&&jc(r.calibration,t.raw),t.isCalibrated&&(t.emit("calibratedData",t.values),t.emit("line",t.line)),r.sensorStates.forEach(s=>{s.dataReceived=!1}))}function jc(t,e){e.forEach((i,r)=>{(t.min[r]===void 0||i<t.min[r])&&(t.min[r]=i),(t.max[r]===void 0||i>t.max[r])&&(t.max[r]=i)})}function iu(t,e){return t&&t.max&&t.max.length===e.length&&t.min&&t.min.length===e.length}function rg(t){return t.raw.map((e,i)=>tu.constrain(tu.scale(e,t.calibration.min[i],t.calibration.max[i],Go,Ji),Go,Ji))}function zc(t){return(t.sensors.length-1)*Ji}function ng(t,e){const i=Wt.get(t);let r=!1,n=0,s=0;if(e=!!e,t.values.forEach((o,u)=>{o=e?Ji-o:o,o>Jx&&(r=!0),o>eg&&(n+=o*u*Ji,s+=o)}),!r){const o=zc(t)+1,u=o/2;return i.lastLine<u?0:o}return i.lastLine=Math.floor(n/s)}class sg extends Xx{constructor(e){super(),xo.Component.call(this,e=xo.Options(e)),xo.Controller.call(this,tg,e);const{autoCalibrate:i=!1,freq:r=25}=e,n={autoCalibrate:i,freq:r,lastLine:0,isOn:!1,calibration:{min:[],max:[]}};Wt.set(this,n),typeof this.initialize=="function"&&this.initialize(e),Object.defineProperties(this,{isOn:{get(){return n.emitter.isOn}},isCalibrated:{get(){return iu(this.calibration,this.sensors)}},isOnLine:{get(){const s=this.line;return s>Go&&s<zc(this)}},sensors:{get(){return n.sensorStates.map(({sensor:s})=>s)}},calibration:{get(){return n.calibration}},raw:{get(){return n.sensorStates.map(({rawValue:s})=>s)}},values:{get(){return this.isCalibrated?rg(this):this.raw}},line:{get(){return this.isCalibrated?ng(this):0}}})}enable(){return Wt.get(this).emitter.on(),this}disable(){return Wt.get(this).emitter.off(),this}calibrate(){return this.once("data",e=>{jc(Wt.get(this).calibration,e),this.emit("calibrated")}),this}calibrateUntil(e){const i=()=>{this.calibrate(),this.once("calibrated",()=>{e()||i()})};return i(),this}loadCalibration(e){if(!iu(e,this.sensors))throw new Error("Calibration data not properly set: {min: [], max: []}");return Wt.get(this).calibration=e,this}}var og=sg,ag={};const Uo=we(),qc=nt,lg=Uo.Pins,Ui=new Map;class sr{constructor(e){const i=typeof e=="object"?e.pin:e;Uo.Component.call(this,e=Uo.Options(e)),e.type=e.type||"NO";const r={isInverted:e.type==="NC",isClosed:!1,value:null};Ui.set(this,r),Object.defineProperties(this,{value:{get(){return Number(this.isClosed)}},type:{get(){return r.isInverted?"NC":"NO"}},isClosed:{get(){return r.isClosed}}}),lg.isFirmata(this)&&typeof i=="string"&&i[0]==="A"&&(this.pin=this.io.analogPins[+i.slice(1)],this.io.pinMode(this.pin,this.io.MODES.OUTPUT))}close(){const e=Ui.get(this);return this.io.digitalWrite(this.pin,e.isInverted?this.io.LOW:this.io.HIGH),e.isClosed=!0,this}open(){const e=Ui.get(this);return this.io.digitalWrite(this.pin,e.isInverted?this.io.HIGH:this.io.LOW),e.isClosed=!1,this}toggle(){return Ui.get(this).isClosed?this.open():this.close(),this}}class Vc extends qc{constructor(e){super(e)}get type(){return sr}}qc.installMethodForwarding(Vc.prototype,sr.prototype);sr.Collection=Vc;ag.IS_TEST_MODE&&(sr.purge=()=>{Ui.clear()});var ug=sr,cg={};const qi=we(),hg=qi.Pins,fg=kt(),Kc=nt,dg=De,Vr=Ie,$t=Ci,Si=new Map,Kr={PCA9685:{initialize:{value({address:t,pwmRange:e,frequency:i,pin:r}){const n=Si.get(this);this.address=t||64,this.pwmRange=e||[450,1850],this.frequency=i||50,n.expander=fg.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),this.pin=n.expander.normalize(r)}},update:{writable:!0,value(t){Si.get(this).expander.servoWrite(this.pin,t)}}},Standard:{initialize:{value({debug:t,pwmRange:e}){t&&!this.board.pins.isServo(this.pin)&&qi.Pins.Error({pin:this.pin,type:"PWM",via:"Servo"}),Array.isArray(e)?this.io.servoConfig(this.pin,e[0],e[1]):this.io.pinMode(this.pin,this.mode)}},update:{writable:!0,value(t){if(this.last&&this.last.degrees===t)return this;let e=Vr.map(t,this.degreeRange[0],this.degreeRange[1],this.pwmRange[0],this.pwmRange[1]);e|=0,this.io.servoWrite(this.pin,e)}}}};Kr.DEFAULT=Kr.Standard;class mt extends dg{constructor(e){super();const i=[];let r=typeof e=="object"?e.pin:e;qi.Component.call(this,e=qi.Options(e)),this.degreeRange=e.degreeRange||[0,180],this.pwmRange=e.pwmRange||[600,2400],this.range=e.range||this.degreeRange,this.deadband=e.deadband||[90,90],this.fps=e.fps||100,this.offset=e.offset||0,this.range=e.range||[0-this.offset,180-this.offset],this.mode=this.io.MODES.SERVO,this.interval=null,this.value=null,this.type=e.type||"standard",e.isInverted&&console.warn("The 'isInverted' property has been renamed 'invert'"),this.invert=e.isInverted||e.invert||!1,typeof e.controller>"u"&&hg.isFirmata(this)&&(typeof r=="string"&&r.length>1&&r[0]==="A"&&(r=this.io.analogPins[+r.slice(1)]),r=+r,!Number.isNaN(r)&&this.pin!==r&&(this.pin=r)),qi.Controller.call(this,Kr,e),Si.set(this,{history:i}),Object.defineProperties(this,{history:{get(){return i.slice(-5)}},last:{get(){return i[i.length-1]}},position:{get(){return i.length?i[i.length-1].degrees:-1}}}),this.initialize(e),typeof e.startAt<"u"?(this.startAt=e.startAt,this.to(e.startAt)):this.startAt=(this.degreeRange[1]-this.degreeRange[0])/2+this.degreeRange[0],e.center&&this.center(),e.type==="continuous"&&this.stop()}to(e,i,r){const n=Si.get(this),s={};if(typeof e=="object")Object.assign(s,e),s.duration=e.duration||e.interval||1e3,s.cuePoints=e.cuePoints||[0,1],s.keyFrames=e.keyFrames||[null,{value:typeof e.degrees=="number"?e.degrees:this.startAt}],s.oncomplete=()=>{ie.nextTick(()=>{typeof e.oncomplete=="function"&&e.oncomplete(),this.emit("move:complete")})},n.isRunning=!0,n.animation=n.animation||new $t(this),n.animation.enqueue(s);else{const o=e;e=Vr.constrain(e,this.range[0],this.range[1]),typeof i<"u"?(s.duration=i,s.keyFrames=[null,{degrees:e}],s.fps=r||this.fps,this.to(s)):(this.value=e,e+=this.offset,this.invert&&(e=Vr.map(e,this.degreeRange[0],this.degreeRange[1],this.degreeRange[1],this.degreeRange[0])),this.update(e),n.history.length>5&&n.history.shift(),n.history.push({timestamp:Date.now(),degrees:e,target:o}))}return this}step(e,i){return this.to(this.last.target+e,i)}move(e,i){return console.warn("Servo.prototype.move has been renamed to Servo.prototype.to"),this.to(e,i)}min(e,i){return this.to(this.range[0],e,i)}max(e,i){return this.to(this.range[1],e,i)}center(e,i){return this.to(Math.abs((this.range[0]+this.range[1])/2),e,i)}home(){return this.to(this.startAt)}sweep(e){const i={keyFrames:[{value:this.range[0]},{value:this.range[1]}],metronomic:!0,loop:!0,easing:"inOutSine"};return Array.isArray(e)?i.keyFrames=ru(e):typeof e=="object"&&e!==null&&(Object.assign(i,e),Array.isArray(i.range)&&(i.keyFrames=ru(i.range))),this.to(i)}stop(){const e=Si.get(this);return e.animation&&e.animation.stop(),this.type==="continuous"?this.to(this.deadband.reduce((i,r)=>Math.round((i+r)/2))):clearInterval(this.interval),this}}mt.prototype[$t.normalize]=function(t){const e=this.last?this.last.target:this.startAt;return t[0]===null&&(t[0]={value:e}),typeof t[0]=="number"&&(t[0]={value:e+t[0]}),t.map(i=>(i!==null&&(typeof i=="number"?i={step:i}:(typeof i.degrees=="number"&&(i.value=i.degrees,delete i.degrees),typeof i.copyDegrees=="number"&&(i.copyValue=i.copyDegrees,delete i.copyDegrees)),i.easing||(i.easing="linear")),i))};mt.prototype[$t.render]=function(t){return this.to(t[0])};function ru(t){return t.map(e=>({value:e}))}["clockWise","cw","counterClockwise","ccw"].forEach(t=>{mt.prototype[t]=function(e){let i;return e=e===void 0?1:e,this.type!=="continuous"&&this.board.error("Servo",`Servo.prototype.${t} is only available for continuous servos`),t==="cw"||t==="clockWise"?i=[e,0,1,this.deadband[1]+1,this.range[1]]:i=[e,0,1,this.deadband[0]-1,this.range[0]],this.to(Vr.scale.apply(null,i)|0)}});mt.Continuous=class extends mt{constructor(t){const e={};typeof t=="object"?Object.assign(e,t):e.pin=t,e.type="continuous",super(e)}};class sn extends Kc{constructor(e){super(e)}get type(){return mt}[$t.normalize](e){return e.map((i,r)=>{if(i!==null&&Array.isArray(i)){let n=this[r];n instanceof sn&&(n=n[0]);const s=n.last?n.last.target:n.startAt;return i[0]===null&&(i[0]={value:s}),Array.isArray(i)&&i[0]===null&&(e[r][0]={value:s}),this[r][$t.normalize](i)}return i&&typeof i.degrees=="number"&&(i.value=i.degrees,delete i.degrees),i})}[$t.render](e){return this.each((i,r)=>i.to(e[r]))}}Kc.installMethodForwarding(sn.prototype,mt.prototype,{skip:[$t.normalize,$t.render]});mt.Collection=sn;cg.IS_TEST_MODE&&(mt.Controllers=Kr,mt.purge=()=>{Si.clear()});var pg=mt;const nu=we(),xg=Ie,Wi=new Map,Rr=new Map,su=xg.TAU,ou=6;class Qt{constructor(e){this.rpm=180,this.direction=-1,this.speed=0,this.accel=0,this.decel=0,this.stepper=e}move(e,i,r,n,s,o){this.stepper.io.stepperStep.apply(this.stepper.io,[this.stepper.id,i,e,r,n,s,o])}}Qt.PROPERTIES=["rpm","direction","speed","accel","decel"];Qt.DEFAULTS=[180,-1,0,0,0];function gg(t){let e=0;for(t=t.slice();t.length;)this[`motor${++e}`]=t.shift()}function Eg({pins:t,MODES:e}){return t.some(({supportedModes:i})=>i.includes(e.STEPPER))}class vt{constructor(e){const i=[];let r;if(nu.Component.call(this,e=nu.Options(e)),!Eg(this.io))throw new Error("Stepper is not supported");if(!e.pins)throw new Error("Stepper requires a `pins` object or array");if(!e.stepsPerRev)throw new Error("Stepper requires a `stepsPerRev` number value");if(Rr.set(this.board,Rr.get(this.board)||[]),this.id=Rr.get(this.board).length,this.id>=ou)throw new Error(`Stepper cannot exceed max steppers (${ou})`);if(Array.isArray(this.pins)){if(this.pins.length===2&&!e.type)throw new Error("Stepper requires a `type` number value (DRIVER, TWO_WIRE)");e.type===vt.TYPE.DRIVER?this.pins={step:this.pins[0],dir:this.pins[1]}:this.pins=new gg(this.pins)}if(e.type||(this.pins.dir?e.type=vt.TYPE.DRIVER:this.pins.motor3?e.type=vt.TYPE.FOUR_WIRE:e.type=vt.TYPE.TWO_WIRE),i.push(this.id,e.type,e.stepsPerRev),e.type===vt.TYPE.DRIVER){if(typeof this.pins.dir>"u"||typeof this.pins.step>"u")throw new Error("Stepper.TYPE.DRIVER expects: `pins.dir`, `pins.step`");i.push(this.pins.dir,this.pins.step)}if(e.type===vt.TYPE.TWO_WIRE){if(typeof this.pins.motor1>"u"||typeof this.pins.motor2>"u")throw new Error("Stepper.TYPE.TWO_WIRE expects: `pins.motor1`, `pins.motor2`");i.push(this.pins.motor1,this.pins.motor2)}if(e.type===vt.TYPE.FOUR_WIRE){if(typeof this.pins.motor1>"u"||typeof this.pins.motor2>"u"||typeof this.pins.motor3>"u"||typeof this.pins.motor4>"u")throw new Error("Stepper.TYPE.FOUR_WIRE expects: `pins.motor1`, `pins.motor2`, `pins.motor3`, `pins.motor4`");i.push(this.pins.motor1,this.pins.motor2,this.pins.motor3,this.pins.motor4)}i.slice(3).forEach(n=>{this.io.pinMode(n,this.io.MODES.STEPPER)}),this.io.stepperConfig.apply(this.io,i),Rr.get(this.board).push(this),r=Qt.PROPERTIES.reduce((n,s,o)=>(n[s]=typeof e[s]<"u"?e[s]:Qt.DEFAULTS[o],n),{isRunning:!1,type:e.type,pins:this.pins}),Wi.set(this,r),Object.defineProperties(this,{type:{get(){return r.type}},pins:{get(){return r.pins}}})}rpm(e){const i=Wi.get(this);return typeof e>"u"?i.rpm:(i.rpm=e,i.speed=Math.round(e*su*100/60),this)}speed(e){const i=Wi.get(this);return typeof e>"u"?i.speed:(i.speed=e,i.rpm=Math.round(e/su/100*60),this)}ccw(){return this.direction(0)}cw(){return this.direction(1)}step(e,i){let r,n,s,o,u;r=typeof e=="object"?e.steps||0:Math.floor(e),n=new Qt(this),s=Wi.get(this),o=[],u=!0;function h(g){u=!1,i&&i(g)}return o.push(r),typeof e=="object"&&Qt.PROPERTIES.forEach(g=>{typeof e[g]<"u"&&this[g](e[g])}),s.speed||(this.rpm(s.rpm),n.speed=this.speed()),Qt.PROPERTIES.slice(1).forEach(g=>{o.push(n[g]=this[g]())}),r===0&&h(new Error("Must set a number of steps when calling `step()`")),n.direction<0&&h(new Error("Must set a direction before calling `step()`")),u&&(s.isRunning=!0,o.push(g=>{s.isRunning=!1,i(null,g)}),n.move.apply(n,o)),this}}Object.defineProperties(vt,{TYPE:{value:Object.freeze({DRIVER:1,TWO_WIRE:2,FOUR_WIRE:4})},RUNSTATE:{value:Object.freeze({STOP:0,ACCEL:1,DECEL:2,RUN:3})},DIRECTION:{value:Object.freeze({CCW:0,CW:1})}});["direction","accel","decel"].forEach(t=>{vt.prototype[t]=function(e){const i=Wi.get(this);return typeof e>"u"?i[t]:(i[t]=e,this)}});var vg=vt;const au=we(),Yc=nt,mg=De,yg=Ie;class on extends mg{constructor(e){super(),au.Component.call(this,e=au.Options(e));const i=yg.debounce(h=>this.emit(h,this),5);e.type=e.type||"NO";const r=e.type==="NO";let n=null,s=typeof e.invert<"u"?e.invert:r||!1,o=1,u=0;s&&(o^=1,u^=1),this.io.pinMode(this.pin,this.io.MODES.INPUT),r&&this.io.digitalWrite(this.pin,this.io.HIGH),this.io.digitalRead(this.pin,h=>{n=h,i.call(this,this.isOpen?"open":"close")}),Object.defineProperties(this,{value:{get(){return Number(this.isOpen)}},invert:{get(){return s},set(h){s=h,o=s?0:1,u=s?1:0}},closeValue:{get(){return o},set(h){o=h,u=h^1}},openValue:{get(){return u},set(h){u=h,o=h^1}},isOpen:{get(){return n===u}},isClosed:{get(){return n===o}}})}}class Xc extends Yc.Emitter{constructor(e){super(e)}get type(){return on}}Yc.installMethodForwarding(Xc.prototype,on.prototype);on.Collection=Xc;var bg=on;Ho.exports;(function(t){t.exports={Accelerometer:fc(),Animation:Ci,Altimeter:sc(),Barometer:oc(),Board:we(),Button:v1,Color:R1,Collection:nt,Compass:uc(),ESC:O1,Expander:kt(),Fn:Ie,GPS:L1,Gyro:ac(),Hygrometer:lc(),SIP:fe(),Keypad:W1,LCD:ox,Led:Dc,LedControl:fa,Light:Rx,Joystick:wx,Motion:Cx,Motor:Wx,Orientation:cc(),Piezo:jx,Pin:na,Proximity:Yx,ReflectanceArray:og,Relay:ug,Repl:Lu,Sensor:da,Servo:pg,ShiftRegister:Fc,Stepper:vg,Switch:bg,Thermometer:hc()},t.exports.Board.Virtual=function(e){let i;return e instanceof t.exports.Expander?i={io:e}:i=e,new t.exports.Board(Object.assign({},{repl:!1,debug:!1,sigint:!1},i))},t.exports.Sensor.Analog=t.exports.Sensor,t.exports.Sensor.Digital=function(e){let i,r="digital";return typeof e=="number"||typeof e=="string"?(i=e,e={type:r,pin:i}):e.type=r,new t.exports.Sensor(e)},t.exports.IMU=t.exports.SIP,t.exports.Multi=t.exports.SIP,t.exports.Luxmeter=t.exports.Light,t.exports.Magnetometer=t.exports.Compass,t.exports.Ping=t.exports.Proximity,t.exports.Sonar=t.exports.Proximity,t.exports.Boards=t.exports.Board.Collection,t.exports.Buttons=t.exports.Button.Collection,t.exports.ESCs=t.exports.ESC.Collection,t.exports.Leds=t.exports.Led.Collection,t.exports.Led.RGBs=t.exports.Led.RGB.Collection,t.exports.Motors=t.exports.Motor.Collection,t.exports.Pins=t.exports.Pin.Collection,t.exports.Relays=t.exports.Relay.Collection,t.exports.Sensors=t.exports.Sensor.Collection,t.exports.Servos=t.exports.Servo.Collection,t.exports.Switches=t.exports.Switch.Collection,t.exports.Touchpad=t.exports.Keypad})(Ho);var Qc=Ho.exports;const Rg=$o(Qc);uu.five=Rg;function Sg(t){console.log("handleIOReady");const e=uu.board=new Qc.Board({io:t,repl:!1});e.on("message",i=>{console.log("board message: ",i)}),e.on("ready",()=>{console.log("johnny five in browser !!!!")}),e.on("error",console.error)}var Ag=rc();const{EventEmitter:Tg}=Et;class wg extends Tg{constructor(e,i){super(i),this.options=i||{},this.browser=!0,this.path=this.options.path,this.isOpen=!1,this.port=null,this.writer=null,this.reader=null,this.baudRate=this.options.baudRate,this.requestOptions=this.options.requestOptions||{},this.options.autoOpen&&this.open()}list(e){return navigator.serial.getPorts().then(i=>{if(e)return e(null,i)}).catch(i=>{if(e)return e(i)})}open(e){window.navigator.serial.requestPort(this.requestOptions).then(i=>{if(this.port=i,!this.isOpen)return this.port.open({baudRate:this.baudRate||57600})}).then(()=>this.writer=this.port.writable.getWriter()).then(()=>this.reader=this.port.readable.getReader()).then(async()=>{for(this.emit("open"),this.isOpen=!0,e(null);this.port.readable.locked;)try{const{value:i,done:r}=await this.reader.read();if(r)break;this.emit("data",Ce.from(i))}catch(i){console.error(i)}}).catch(i=>{e(i)})}async close(e){try{await this.reader.releaseLock(),await this.writer.releaseLock(),await this.port.close(),this.isOpen=!1}catch(i){if(e)return e(i);throw i}e&&e(null)}async set(e={},i){try{const r={};Object.prototype.hasOwnProperty.call(e,"dtr")&&(r.dataTerminalReady=e.dtr),Object.prototype.hasOwnProperty.call(e,"rts")&&(r.requestToSend=e.rts),Object.prototype.hasOwnProperty.call(e,"brk")&&(r.break=e.brk),Object.keys(r).length>0&&await this.port.setSignals(r)}catch(r){if(i)return i(r);throw r}if(i)return i(null)}write(e,i){if(this.writer.write(e),i)return i(null)}async read(e){let i;try{i=await this.reader.read()}catch(r){if(e)return e(r);throw r}e&&e(null,i)}flush(e){if(console.warn("flush method is a NOP right now"),e)return e(null)}drain(e){if(console.warn("drain method is a NOP right now"),e)return e(null)}}var _g=wg;const Og=$o(_g),Ig=t=>{console.log("serialport callback"),t!=null&&console.error("serialError: ",t)},lu=new Og(null,{autoOpen:!1,callback:Ig}),Cg=t=>{try{lu.open(Dg);const e=new Ag.Firmata(lu,Mg);e.once("ready",t(e))}catch(e){console.log("error: ",e)}};function Mg(t){console.log("firmata callback"),t!=null&&console.log("argF: ",t)}const Dg=t=>{console.log("serialport callback2"),t!=null&&console.error("serialError2: ",t)};function Pg(t){console.log("handleStart");try{Cg(t)}catch(e){console.log(e)}}function Lg(){Pg(Sg)}const Zc=new Wo;Zc.add(window.location,"reload");Zc.add({init:Lg},"init");var Ng=ie.hrtime||Fg,pi=Je.performance||{},Bg=pi.now||pi.mozNow||pi.msNow||pi.oNow||pi.webkitNow||function(){return new Date().getTime()};function Fg(t){var e=Bg.call(pi)*.001,i=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(i=i-t[0],r=r-t[1],r<0&&(i--,r+=1e9)),[i,r]}const Gg=$o(Ng);ie.hrtime=Gg;
