(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();const rh=globalThis||void 0||self;/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.19.2
 * @author George Michael Brower
 * @license MIT
 */class ur{constructor(t,n,s,a,c="div"){this.parent=t,this.object=n,this.property=s,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement(c),this.domElement.classList.add("controller"),this.domElement.classList.add(a),this.$name=document.createElement("div"),this.$name.classList.add("name"),ur.nextNameID=ur.nextNameID||0,this.$name.id=`lil-gui-name-${++ur.nextNameID}`,this.$widget=document.createElement("div"),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.domElement.addEventListener("keydown",h=>h.stopPropagation()),this.domElement.addEventListener("keyup",h=>h.stopPropagation()),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(s)}name(t){return this._name=t,this.$name.textContent=t,this}onChange(t){return this._onChange=t,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(t=!0){return this.disable(!t)}disable(t=!0){return t===this._disabled?this:(this._disabled=t,this.domElement.classList.toggle("disabled",t),this.$disable.toggleAttribute("disabled",t),this)}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(t){const n=this.parent.add(this.object,this.property,t);return n.name(this._name),this.destroy(),n}min(t){return this}max(t){return this}step(t){return this}decimals(t){return this}listen(t=!0){return this._listening=t,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const t=this.save();t!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=t}getValue(){return this.object[this.property]}setValue(t){return this.getValue()!==t&&(this.object[this.property]=t,this._callOnChange(),this.updateDisplay()),this}updateDisplay(){return this}load(t){return this.setValue(t),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class dx extends ur{constructor(t,n,s){super(t,n,s,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function Lc(r){let t,n;return(t=r.match(/(#|0x)?([a-f0-9]{6})/i))?n=t[2]:(t=r.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?n=parseInt(t[1]).toString(16).padStart(2,0)+parseInt(t[2]).toString(16).padStart(2,0)+parseInt(t[3]).toString(16).padStart(2,0):(t=r.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(n=t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),n?"#"+n:!1}const px={isPrimitive:!0,match:r=>typeof r=="string",fromHexString:Lc,toHexString:Lc},po={isPrimitive:!0,match:r=>typeof r=="number",fromHexString:r=>parseInt(r.substring(1),16),toHexString:r=>"#"+r.toString(16).padStart(6,0)},gx={isPrimitive:!1,match:r=>Array.isArray(r),fromHexString(r,t,n=1){const s=po.fromHexString(r);t[0]=(s>>16&255)/255*n,t[1]=(s>>8&255)/255*n,t[2]=(s&255)/255*n},toHexString([r,t,n],s=1){s=255/s;const a=r*s<<16^t*s<<8^n*s<<0;return po.toHexString(a)}},xx={isPrimitive:!1,match:r=>Object(r)===r,fromHexString(r,t,n=1){const s=po.fromHexString(r);t.r=(s>>16&255)/255*n,t.g=(s>>8&255)/255*n,t.b=(s&255)/255*n},toHexString({r,g:t,b:n},s=1){s=255/s;const a=r*s<<16^t*s<<8^n*s<<0;return po.toHexString(a)}},mx=[px,po,gx,xx];function vx(r){return mx.find(t=>t.match(r))}class yx extends ur{constructor(t,n,s,a){super(t,n,s,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=vx(this.initialValue),this._rgbScale=a,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const c=Lc(this.$text.value);c&&this._setValueFromHexString(c)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(t){if(this._format.isPrimitive){const n=this._format.fromHexString(t);this.setValue(n)}else this._format.fromHexString(t,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(t){return this._setValueFromHexString(t),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class Ia extends ur{constructor(t,n,s){super(t,n,s,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",a=>{a.preventDefault(),this.getValue().call(this.object),this._callOnChange()}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class Ex extends ur{constructor(t,n,s,a,c,h){super(t,n,s,"number"),this._initInput(),this.min(a),this.max(c);const p=h!==void 0;this.step(p?h:this._getImplicitStep(),p),this.updateDisplay()}decimals(t){return this._decimals=t,this.updateDisplay(),this}min(t){return this._min=t,this._onUpdateMinMax(),this}max(t){return this._max=t,this._onUpdateMinMax(),this}step(t,n=!0){return this._step=t,this._stepExplicit=n,this}updateDisplay(){const t=this.getValue();if(this._hasSlider){let n=(t-this._min)/(this._max-this._min);n=Math.max(0,Math.min(n,1)),this.$fill.style.width=n*100+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?t:t.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),window.matchMedia("(pointer: coarse)").matches&&(this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any")),this.$widget.appendChild(this.$input),this.$disable=this.$input;const n=()=>{let C=parseFloat(this.$input.value);isNaN(C)||(this._stepExplicit&&(C=this._snap(C)),this.setValue(this._clamp(C)))},s=C=>{const O=parseFloat(this.$input.value);isNaN(O)||(this._snapClampSetValue(O+C),this.$input.value=this.getValue())},a=C=>{C.key==="Enter"&&this.$input.blur(),C.code==="ArrowUp"&&(C.preventDefault(),s(this._step*this._arrowKeyMultiplier(C))),C.code==="ArrowDown"&&(C.preventDefault(),s(this._step*this._arrowKeyMultiplier(C)*-1))},c=C=>{this._inputFocused&&(C.preventDefault(),s(this._step*this._normalizeMouseWheel(C)))};let h=!1,p,x,b,y,A;const d=5,S=C=>{p=C.clientX,x=b=C.clientY,h=!0,y=this.getValue(),A=0,window.addEventListener("mousemove",R),window.addEventListener("mouseup",M)},R=C=>{if(h){const O=C.clientX-p,H=C.clientY-x;Math.abs(H)>d?(C.preventDefault(),this.$input.blur(),h=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(O)>d&&M()}if(!h){const O=C.clientY-b;A-=O*this._step*this._arrowKeyMultiplier(C),y+A>this._max?A=this._max-y:y+A<this._min&&(A=this._min-y),this._snapClampSetValue(y+A)}b=C.clientY},M=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",M)},T=()=>{this._inputFocused=!0},w=()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()};this.$input.addEventListener("input",n),this.$input.addEventListener("keydown",a),this.$input.addEventListener("wheel",c,{passive:!1}),this.$input.addEventListener("mousedown",S),this.$input.addEventListener("focus",T),this.$input.addEventListener("blur",w)}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const t=(w,C,O,H,F)=>(w-C)/(O-C)*(F-H)+H,n=w=>{const C=this.$slider.getBoundingClientRect();let O=t(w,C.left,C.right,this._min,this._max);this._snapClampSetValue(O)},s=w=>{this._setDraggingStyle(!0),n(w.clientX),window.addEventListener("mousemove",a),window.addEventListener("mouseup",c)},a=w=>{n(w.clientX)},c=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",c)};let h=!1,p,x;const b=w=>{w.preventDefault(),this._setDraggingStyle(!0),n(w.touches[0].clientX),h=!1},y=w=>{w.touches.length>1||(this._hasScrollBar?(p=w.touches[0].clientX,x=w.touches[0].clientY,h=!0):b(w),window.addEventListener("touchmove",A,{passive:!1}),window.addEventListener("touchend",d))},A=w=>{if(h){const C=w.touches[0].clientX-p,O=w.touches[0].clientY-x;Math.abs(C)>Math.abs(O)?b(w):(window.removeEventListener("touchmove",A),window.removeEventListener("touchend",d))}else w.preventDefault(),n(w.touches[0].clientX)},d=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",A),window.removeEventListener("touchend",d)},S=this._callOnFinishChange.bind(this),R=400;let M;const T=w=>{if(Math.abs(w.deltaX)<Math.abs(w.deltaY)&&this._hasScrollBar)return;w.preventDefault();const O=this._normalizeMouseWheel(w)*this._step;this._snapClampSetValue(this.getValue()+O),this.$input.value=this.getValue(),clearTimeout(M),M=setTimeout(S,R)};this.$slider.addEventListener("mousedown",s),this.$slider.addEventListener("touchstart",y,{passive:!1}),this.$slider.addEventListener("wheel",T,{passive:!1})}_setDraggingStyle(t,n="horizontal"){this.$slider&&this.$slider.classList.toggle("active",t),document.body.classList.toggle("lil-gui-dragging",t),document.body.classList.toggle(`lil-gui-${n}`,t)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(t){let{deltaX:n,deltaY:s}=t;return Math.floor(t.deltaY)!==t.deltaY&&t.wheelDelta&&(n=0,s=-t.wheelDelta/120,s*=this._stepExplicit?1:10),n+-s}_arrowKeyMultiplier(t){let n=this._stepExplicit?1:10;return t.shiftKey?n*=10:t.altKey&&(n/=10),n}_snap(t){const n=Math.round(t/this._step)*this._step;return parseFloat(n.toPrecision(15))}_clamp(t){return t<this._min&&(t=this._min),t>this._max&&(t=this._max),t}_snapClampSetValue(t){this.setValue(this._clamp(this._snap(t)))}get _hasScrollBar(){const t=this.parent.root.$children;return t.scrollHeight>t.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class wx extends ur{constructor(t,n,s,a){super(t,n,s,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.options(a)}options(t){return this._values=Array.isArray(t)?t:Object.values(t),this._names=Array.isArray(t)?t:Object.keys(t),this.$select.replaceChildren(),this._names.forEach(n=>{const s=document.createElement("option");s.textContent=n,this.$select.appendChild(s)}),this.updateDisplay(),this}updateDisplay(){const t=this.getValue(),n=this._values.indexOf(t);return this.$select.selectedIndex=n,this.$display.textContent=n===-1?t:this._names[n],this}}class Sx extends ur{constructor(t,n,s){super(t,n,s,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("spellcheck","false"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",a=>{a.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}const Rx=`.lil-gui {
  font-family: var(--font-family);
  font-size: var(--font-size);
  line-height: 1;
  font-weight: normal;
  font-style: normal;
  text-align: left;
  color: var(--text-color);
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  --background-color: #1f1f1f;
  --text-color: #ebebeb;
  --title-background-color: #111111;
  --title-text-color: #ebebeb;
  --widget-color: #424242;
  --hover-color: #4f4f4f;
  --focus-color: #595959;
  --number-color: #2cc9ff;
  --string-color: #a2db3c;
  --font-size: 11px;
  --input-font-size: 11px;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;
  --padding: 4px;
  --spacing: 4px;
  --widget-height: 20px;
  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);
  --name-width: 45%;
  --slider-knob-width: 2px;
  --slider-input-width: 27%;
  --color-input-width: 27%;
  --slider-input-min-width: 45px;
  --color-input-min-width: 45px;
  --folder-indent: 7px;
  --widget-padding: 0 0 0 3px;
  --widget-border-radius: 2px;
  --checkbox-size: calc(0.75 * var(--widget-height));
  --scrollbar-width: 5px;
}
.lil-gui, .lil-gui * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
.lil-gui.root {
  width: var(--width, 245px);
  display: flex;
  flex-direction: column;
  background: var(--background-color);
}
.lil-gui.root > .title {
  background: var(--title-background-color);
  color: var(--title-text-color);
}
.lil-gui.root > .children {
  overflow-x: hidden;
  overflow-y: auto;
}
.lil-gui.root > .children::-webkit-scrollbar {
  width: var(--scrollbar-width);
  height: var(--scrollbar-width);
  background: var(--background-color);
}
.lil-gui.root > .children::-webkit-scrollbar-thumb {
  border-radius: var(--scrollbar-width);
  background: var(--focus-color);
}
@media (pointer: coarse) {
  .lil-gui.allow-touch-styles, .lil-gui.allow-touch-styles .lil-gui {
    --widget-height: 28px;
    --padding: 6px;
    --spacing: 6px;
    --font-size: 13px;
    --input-font-size: 16px;
    --folder-indent: 10px;
    --scrollbar-width: 7px;
    --slider-input-min-width: 50px;
    --color-input-min-width: 65px;
  }
}
.lil-gui.force-touch-styles, .lil-gui.force-touch-styles .lil-gui {
  --widget-height: 28px;
  --padding: 6px;
  --spacing: 6px;
  --font-size: 13px;
  --input-font-size: 16px;
  --folder-indent: 10px;
  --scrollbar-width: 7px;
  --slider-input-min-width: 50px;
  --color-input-min-width: 65px;
}
.lil-gui.autoPlace {
  max-height: 100%;
  position: fixed;
  top: 0;
  right: 15px;
  z-index: 1001;
}

.lil-gui .controller {
  display: flex;
  align-items: center;
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
}
.lil-gui .controller.disabled {
  opacity: 0.5;
}
.lil-gui .controller.disabled, .lil-gui .controller.disabled * {
  pointer-events: none !important;
}
.lil-gui .controller > .name {
  min-width: var(--name-width);
  flex-shrink: 0;
  white-space: pre;
  padding-right: var(--spacing);
  line-height: var(--widget-height);
}
.lil-gui .controller .widget {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  min-height: var(--widget-height);
}
.lil-gui .controller.string input {
  color: var(--string-color);
}
.lil-gui .controller.boolean {
  cursor: pointer;
}
.lil-gui .controller.color .display {
  width: 100%;
  height: var(--widget-height);
  border-radius: var(--widget-border-radius);
  position: relative;
}
@media (hover: hover) {
  .lil-gui .controller.color .display:hover:before {
    content: " ";
    display: block;
    position: absolute;
    border-radius: var(--widget-border-radius);
    border: 1px solid #fff9;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
.lil-gui .controller.color input[type=color] {
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.lil-gui .controller.color input[type=text] {
  margin-left: var(--spacing);
  font-family: var(--font-family-mono);
  min-width: var(--color-input-min-width);
  width: var(--color-input-width);
  flex-shrink: 0;
}
.lil-gui .controller.option select {
  opacity: 0;
  position: absolute;
  width: 100%;
  max-width: 100%;
}
.lil-gui .controller.option .display {
  position: relative;
  pointer-events: none;
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  line-height: var(--widget-height);
  max-width: 100%;
  overflow: hidden;
  word-break: break-all;
  padding-left: 0.55em;
  padding-right: 1.75em;
  background: var(--widget-color);
}
@media (hover: hover) {
  .lil-gui .controller.option .display.focus {
    background: var(--focus-color);
  }
}
.lil-gui .controller.option .display.active {
  background: var(--focus-color);
}
.lil-gui .controller.option .display:after {
  font-family: "lil-gui";
  content: "↕";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding-right: 0.375em;
}
.lil-gui .controller.option .widget,
.lil-gui .controller.option select {
  cursor: pointer;
}
@media (hover: hover) {
  .lil-gui .controller.option .widget:hover .display {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number input {
  color: var(--number-color);
}
.lil-gui .controller.number.hasSlider input {
  margin-left: var(--spacing);
  width: var(--slider-input-width);
  min-width: var(--slider-input-min-width);
  flex-shrink: 0;
}
.lil-gui .controller.number .slider {
  width: 100%;
  height: var(--widget-height);
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  padding-right: var(--slider-knob-width);
  overflow: hidden;
  cursor: ew-resize;
  touch-action: pan-y;
}
@media (hover: hover) {
  .lil-gui .controller.number .slider:hover {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number .slider.active {
  background: var(--focus-color);
}
.lil-gui .controller.number .slider.active .fill {
  opacity: 0.95;
}
.lil-gui .controller.number .fill {
  height: 100%;
  border-right: var(--slider-knob-width) solid var(--number-color);
  box-sizing: content-box;
}

.lil-gui-dragging .lil-gui {
  --hover-color: var(--widget-color);
}
.lil-gui-dragging * {
  cursor: ew-resize !important;
}

.lil-gui-dragging.lil-gui-vertical * {
  cursor: ns-resize !important;
}

.lil-gui .title {
  height: var(--title-height);
  line-height: calc(var(--title-height) - 4px);
  font-weight: 600;
  padding: 0 var(--padding);
  -webkit-tap-highlight-color: transparent;
  cursor: pointer;
  outline: none;
  text-decoration-skip: objects;
}
.lil-gui .title:before {
  font-family: "lil-gui";
  content: "▾";
  padding-right: 2px;
  display: inline-block;
}
.lil-gui .title:active {
  background: var(--title-background-color);
  opacity: 0.75;
}
@media (hover: hover) {
  body:not(.lil-gui-dragging) .lil-gui .title:hover {
    background: var(--title-background-color);
    opacity: 0.85;
  }
  .lil-gui .title:focus {
    text-decoration: underline var(--focus-color);
  }
}
.lil-gui.root > .title:focus {
  text-decoration: none !important;
}
.lil-gui.closed > .title:before {
  content: "▸";
}
.lil-gui.closed > .children {
  transform: translateY(-7px);
  opacity: 0;
}
.lil-gui.closed:not(.transition) > .children {
  display: none;
}
.lil-gui.transition > .children {
  transition-duration: 300ms;
  transition-property: height, opacity, transform;
  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);
  overflow: hidden;
  pointer-events: none;
}
.lil-gui .children:empty:before {
  content: "Empty";
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
  display: block;
  height: var(--widget-height);
  font-style: italic;
  line-height: var(--widget-height);
  opacity: 0.5;
}
.lil-gui.root > .children > .lil-gui > .title {
  border: 0 solid var(--widget-color);
  border-width: 1px 0;
  transition: border-color 300ms;
}
.lil-gui.root > .children > .lil-gui.closed > .title {
  border-bottom-color: transparent;
}
.lil-gui + .controller {
  border-top: 1px solid var(--widget-color);
  margin-top: 0;
  padding-top: var(--spacing);
}
.lil-gui .lil-gui .lil-gui > .title {
  border: none;
}
.lil-gui .lil-gui .lil-gui > .children {
  border: none;
  margin-left: var(--folder-indent);
  border-left: 2px solid var(--widget-color);
}
.lil-gui .lil-gui .controller {
  border: none;
}

.lil-gui label, .lil-gui input, .lil-gui button {
  -webkit-tap-highlight-color: transparent;
}
.lil-gui input {
  border: 0;
  outline: none;
  font-family: var(--font-family);
  font-size: var(--input-font-size);
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  background: var(--widget-color);
  color: var(--text-color);
  width: 100%;
}
@media (hover: hover) {
  .lil-gui input:hover {
    background: var(--hover-color);
  }
  .lil-gui input:active {
    background: var(--focus-color);
  }
}
.lil-gui input:disabled {
  opacity: 1;
}
.lil-gui input[type=text],
.lil-gui input[type=number] {
  padding: var(--widget-padding);
  -moz-appearance: textfield;
}
.lil-gui input[type=text]:focus,
.lil-gui input[type=number]:focus {
  background: var(--focus-color);
}
.lil-gui input[type=checkbox] {
  appearance: none;
  width: var(--checkbox-size);
  height: var(--checkbox-size);
  border-radius: var(--widget-border-radius);
  text-align: center;
  cursor: pointer;
}
.lil-gui input[type=checkbox]:checked:before {
  font-family: "lil-gui";
  content: "✓";
  font-size: var(--checkbox-size);
  line-height: var(--checkbox-size);
}
@media (hover: hover) {
  .lil-gui input[type=checkbox]:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button {
  outline: none;
  cursor: pointer;
  font-family: var(--font-family);
  font-size: var(--font-size);
  color: var(--text-color);
  width: 100%;
  height: var(--widget-height);
  text-transform: none;
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  border: none;
}
@media (hover: hover) {
  .lil-gui button:hover {
    background: var(--hover-color);
  }
  .lil-gui button:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button:active {
  background: var(--focus-color);
}

@font-face {
  font-family: "lil-gui";
  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");
}`;function Tx(r){const t=document.createElement("style");t.innerHTML=r;const n=document.querySelector("head link[rel=stylesheet], head style");n?document.head.insertBefore(t,n):document.head.appendChild(t)}let K0=!1;class nh{constructor({parent:t,autoPlace:n=t===void 0,container:s,width:a,title:c="Controls",closeFolders:h=!1,injectStyles:p=!0,touchStyles:x=!0}={}){if(this.parent=t,this.root=t?t.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",b=>{(b.code==="Enter"||b.code==="Space")&&(b.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(c),this.parent){this.parent.children.push(this),this.parent.folders.push(this),this.parent.$children.appendChild(this.domElement);return}this.domElement.classList.add("root"),x&&this.domElement.classList.add("allow-touch-styles"),!K0&&p&&(Tx(Rx),K0=!0),s?s.appendChild(this.domElement):n&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),a&&this.domElement.style.setProperty("--width",a+"px"),this._closeFolders=h}add(t,n,s,a,c){if(Object(s)===s)return new wx(this,t,n,s);const h=t[n];switch(typeof h){case"number":return new Ex(this,t,n,s,a,c);case"boolean":return new dx(this,t,n);case"string":return new Sx(this,t,n);case"function":return new Ia(this,t,n)}console.error(`gui.add failed
	property:`,n,`
	object:`,t,`
	value:`,h)}addColor(t,n,s=1){return new yx(this,t,n,s)}addFolder(t){const n=new nh({parent:this,title:t});return this.root._closeFolders&&n.close(),n}load(t,n=!0){return t.controllers&&this.controllers.forEach(s=>{s instanceof Ia||s._name in t.controllers&&s.load(t.controllers[s._name])}),n&&t.folders&&this.folders.forEach(s=>{s._title in t.folders&&s.load(t.folders[s._title])}),this}save(t=!0){const n={controllers:{},folders:{}};return this.controllers.forEach(s=>{if(!(s instanceof Ia)){if(s._name in n.controllers)throw new Error(`Cannot save GUI with duplicate property "${s._name}"`);n.controllers[s._name]=s.save()}}),t&&this.folders.forEach(s=>{if(s._title in n.folders)throw new Error(`Cannot save GUI with duplicate folder "${s._title}"`);n.folders[s._title]=s.save()}),n}open(t=!0){return this._setClosed(!t),this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}_setClosed(t){this._closed!==t&&(this._closed=t,this._callOnOpenClose(this))}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(t=!0){return this._setClosed(!t),this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const n=this.$children.clientHeight;this.$children.style.height=n+"px",this.domElement.classList.add("transition");const s=c=>{c.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",s))};this.$children.addEventListener("transitionend",s);const a=t?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!t),requestAnimationFrame(()=>{this.$children.style.height=a+"px"})}),this}title(t){return this._title=t,this.$title.textContent=t,this}reset(t=!0){return(t?this.controllersRecursive():this.controllers).forEach(s=>s.reset()),this}onChange(t){return this._onChange=t,this}_callOnChange(t){this.parent&&this.parent._callOnChange(t),this._onChange!==void 0&&this._onChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(t){this.parent&&this.parent._callOnFinishChange(t),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}onOpenClose(t){return this._onOpenClose=t,this}_callOnOpenClose(t){this.parent&&this.parent._callOnOpenClose(t),this._onOpenClose!==void 0&&this._onOpenClose.call(this,t)}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(t=>t.destroy())}controllersRecursive(){let t=Array.from(this.controllers);return this.folders.forEach(n=>{t=t.concat(n.controllersRecursive())}),t}foldersRecursive(){let t=Array.from(this.folders);return this.folders.forEach(n=>{t=t.concat(n.foldersRecursive())}),t}}var Gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $l(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function _p(r){if(r.__esModule)return r;var t=r.default;if(typeof t=="function"){var n=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(r).forEach(function(s){var a=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:function(){return r[s]}})}),n}var sh={exports:{}};function Ax(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ip={exports:{}},zt=Ip.exports={},or,lr;function Pc(){throw new Error("setTimeout has not been defined")}function Nc(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?or=setTimeout:or=Pc}catch{or=Pc}try{typeof clearTimeout=="function"?lr=clearTimeout:lr=Nc}catch{lr=Nc}})();function Mp(r){if(or===setTimeout)return setTimeout(r,0);if((or===Pc||!or)&&setTimeout)return or=setTimeout,setTimeout(r,0);try{return or(r,0)}catch{try{return or.call(null,r,0)}catch{return or.call(this,r,0)}}}function bx(r){if(lr===clearTimeout)return clearTimeout(r);if((lr===Nc||!lr)&&clearTimeout)return lr=clearTimeout,clearTimeout(r);try{return lr(r)}catch{try{return lr.call(null,r)}catch{return lr.call(this,r)}}}var br=[],ns=!1,mn,vl=-1;function Cx(){!ns||!mn||(ns=!1,mn.length?br=mn.concat(br):vl=-1,br.length&&Dp())}function Dp(){if(!ns){var r=Mp(Cx);ns=!0;for(var t=br.length;t;){for(mn=br,br=[];++vl<t;)mn&&mn[vl].run();vl=-1,t=br.length}mn=null,ns=!1,bx(r)}}zt.nextTick=function(r){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];br.push(new Lp(r,t)),br.length===1&&!ns&&Mp(Dp)};function Lp(r,t){this.fun=r,this.array=t}Lp.prototype.run=function(){this.fun.apply(null,this.array)};zt.title="browser";zt.browser=!0;zt.env={};zt.argv=[];zt.version="";zt.versions={};function _r(){}zt.on=_r;zt.addListener=_r;zt.once=_r;zt.off=_r;zt.removeListener=_r;zt.removeAllListeners=_r;zt.emit=_r;zt.prependListener=_r;zt.prependOnceListener=_r;zt.listeners=function(r){return[]};zt.binding=function(r){throw new Error("process.binding is not supported")};zt.cwd=function(){return"/"};zt.chdir=function(r){throw new Error("process.chdir is not supported")};zt.umask=function(){return 0};var Ox=Ip.exports;const Ce=Ax(Ox);var oh={exports:{}},ss=typeof Reflect=="object"?Reflect:null,Y0=ss&&typeof ss.apply=="function"?ss.apply:function(t,n,s){return Function.prototype.apply.call(t,n,s)},yl;ss&&typeof ss.ownKeys=="function"?yl=ss.ownKeys:Object.getOwnPropertySymbols?yl=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:yl=function(t){return Object.getOwnPropertyNames(t)};function _x(r){console&&console.warn&&console.warn(r)}var Pp=Number.isNaN||function(t){return t!==t};function yt(){yt.init.call(this)}oh.exports=yt;oh.exports.once=Lx;yt.EventEmitter=yt;yt.prototype._events=void 0;yt.prototype._eventsCount=0;yt.prototype._maxListeners=void 0;var X0=10;function jl(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(yt,"defaultMaxListeners",{enumerable:!0,get:function(){return X0},set:function(r){if(typeof r!="number"||r<0||Pp(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");X0=r}});yt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};yt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Pp(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Np(r){return r._maxListeners===void 0?yt.defaultMaxListeners:r._maxListeners}yt.prototype.getMaxListeners=function(){return Np(this)};yt.prototype.emit=function(t){for(var n=[],s=1;s<arguments.length;s++)n.push(arguments[s]);var a=t==="error",c=this._events;if(c!==void 0)a=a&&c.error===void 0;else if(!a)return!1;if(a){var h;if(n.length>0&&(h=n[0]),h instanceof Error)throw h;var p=new Error("Unhandled error."+(h?" ("+h.message+")":""));throw p.context=h,p}var x=c[t];if(x===void 0)return!1;if(typeof x=="function")Y0(x,this,n);else for(var b=x.length,y=Up(x,b),s=0;s<b;++s)Y0(y[s],this,n);return!0};function Bp(r,t,n,s){var a,c,h;if(jl(n),c=r._events,c===void 0?(c=r._events=Object.create(null),r._eventsCount=0):(c.newListener!==void 0&&(r.emit("newListener",t,n.listener?n.listener:n),c=r._events),h=c[t]),h===void 0)h=c[t]=n,++r._eventsCount;else if(typeof h=="function"?h=c[t]=s?[n,h]:[h,n]:s?h.unshift(n):h.push(n),a=Np(r),a>0&&h.length>a&&!h.warned){h.warned=!0;var p=new Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");p.name="MaxListenersExceededWarning",p.emitter=r,p.type=t,p.count=h.length,_x(p)}return r}yt.prototype.addListener=function(t,n){return Bp(this,t,n,!1)};yt.prototype.on=yt.prototype.addListener;yt.prototype.prependListener=function(t,n){return Bp(this,t,n,!0)};function Ix(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Fp(r,t,n){var s={fired:!1,wrapFn:void 0,target:r,type:t,listener:n},a=Ix.bind(s);return a.listener=n,s.wrapFn=a,a}yt.prototype.once=function(t,n){return jl(n),this.on(t,Fp(this,t,n)),this};yt.prototype.prependOnceListener=function(t,n){return jl(n),this.prependListener(t,Fp(this,t,n)),this};yt.prototype.removeListener=function(t,n){var s,a,c,h,p;if(jl(n),a=this._events,a===void 0)return this;if(s=a[t],s===void 0)return this;if(s===n||s.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete a[t],a.removeListener&&this.emit("removeListener",t,s.listener||n));else if(typeof s!="function"){for(c=-1,h=s.length-1;h>=0;h--)if(s[h]===n||s[h].listener===n){p=s[h].listener,c=h;break}if(c<0)return this;c===0?s.shift():Mx(s,c),s.length===1&&(a[t]=s[0]),a.removeListener!==void 0&&this.emit("removeListener",t,p||n)}return this};yt.prototype.off=yt.prototype.removeListener;yt.prototype.removeAllListeners=function(t){var n,s,a;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[t]),this;if(arguments.length===0){var c=Object.keys(s),h;for(a=0;a<c.length;++a)h=c[a],h!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=s[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(a=n.length-1;a>=0;a--)this.removeListener(t,n[a]);return this};function Gp(r,t,n){var s=r._events;if(s===void 0)return[];var a=s[t];return a===void 0?[]:typeof a=="function"?n?[a.listener||a]:[a]:n?Dx(a):Up(a,a.length)}yt.prototype.listeners=function(t){return Gp(this,t,!0)};yt.prototype.rawListeners=function(t){return Gp(this,t,!1)};yt.listenerCount=function(r,t){return typeof r.listenerCount=="function"?r.listenerCount(t):Wp.call(r,t)};yt.prototype.listenerCount=Wp;function Wp(r){var t=this._events;if(t!==void 0){var n=t[r];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}yt.prototype.eventNames=function(){return this._eventsCount>0?yl(this._events):[]};function Up(r,t){for(var n=new Array(t),s=0;s<t;++s)n[s]=r[s];return n}function Mx(r,t){for(;t+1<r.length;t++)r[t]=r[t+1];r.pop()}function Dx(r){for(var t=new Array(r.length),n=0;n<t.length;++n)t[n]=r[n].listener||r[n];return t}function Lx(r,t){return new Promise(function(n,s){function a(h){r.removeListener(t,c),s(h)}function c(){typeof r.removeListener=="function"&&r.removeListener("error",a),n([].slice.call(arguments))}kp(r,t,c,{once:!0}),t!=="error"&&Px(r,a,{once:!0})})}function Px(r,t,n){typeof r.on=="function"&&kp(r,"error",t,n)}function kp(r,t,n,s){if(typeof r.on=="function")s.once?r.once(t,n):r.on(t,n);else if(typeof r.addEventListener=="function")r.addEventListener(t,function a(c){s.once&&r.removeEventListener(t,a),n(c)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var Bi=oh.exports;const Hp=Bi,Ma=new WeakMap;let zp=class extends Hp{pause(){Ma.set(this,{...this._events}),this._events={__proto__:null}}resume(){const t=Ma.get(this);t&&(this._events={__proto__:null,...t},Ma.set(this,null))}};Object.assign(zp.prototype,Hp.prototype);var Ct=zp,lh={exports:{}},Nx=/[|\\{}()[\]^$+*?.]/g,Bx=function(r){if(typeof r!="string")throw new TypeError("Expected a string");return r.replace(Nx,"\\$&")},ah={exports:{}},$p={exports:{}},Fx={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},yn=Fx,jp={};for(var Da in yn)yn.hasOwnProperty(Da)&&(jp[yn[Da]]=Da);var We=$p.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var vi in We)if(We.hasOwnProperty(vi)){if(!("channels"in We[vi]))throw new Error("missing channels property: "+vi);if(!("labels"in We[vi]))throw new Error("missing channel labels property: "+vi);if(We[vi].labels.length!==We[vi].channels)throw new Error("channel and label counts mismatch: "+vi);var Gx=We[vi].channels,Wx=We[vi].labels;delete We[vi].channels,delete We[vi].labels,Object.defineProperty(We[vi],"channels",{value:Gx}),Object.defineProperty(We[vi],"labels",{value:Wx})}We.rgb.hsl=function(r){var t=r[0]/255,n=r[1]/255,s=r[2]/255,a=Math.min(t,n,s),c=Math.max(t,n,s),h=c-a,p,x,b;return c===a?p=0:t===c?p=(n-s)/h:n===c?p=2+(s-t)/h:s===c&&(p=4+(t-n)/h),p=Math.min(p*60,360),p<0&&(p+=360),b=(a+c)/2,c===a?x=0:b<=.5?x=h/(c+a):x=h/(2-c-a),[p,x*100,b*100]};We.rgb.hsv=function(r){var t,n,s,a,c,h=r[0]/255,p=r[1]/255,x=r[2]/255,b=Math.max(h,p,x),y=b-Math.min(h,p,x),A=function(d){return(b-d)/6/y+1/2};return y===0?a=c=0:(c=y/b,t=A(h),n=A(p),s=A(x),h===b?a=s-n:p===b?a=1/3+t-s:x===b&&(a=2/3+n-t),a<0?a+=1:a>1&&(a-=1)),[a*360,c*100,b*100]};We.rgb.hwb=function(r){var t=r[0],n=r[1],s=r[2],a=We.rgb.hsl(r)[0],c=1/255*Math.min(t,Math.min(n,s));return s=1-1/255*Math.max(t,Math.max(n,s)),[a,c*100,s*100]};We.rgb.cmyk=function(r){var t=r[0]/255,n=r[1]/255,s=r[2]/255,a,c,h,p;return p=Math.min(1-t,1-n,1-s),a=(1-t-p)/(1-p)||0,c=(1-n-p)/(1-p)||0,h=(1-s-p)/(1-p)||0,[a*100,c*100,h*100,p*100]};function Ux(r,t){return Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2)+Math.pow(r[2]-t[2],2)}We.rgb.keyword=function(r){var t=jp[r];if(t)return t;var n=1/0,s;for(var a in yn)if(yn.hasOwnProperty(a)){var c=yn[a],h=Ux(r,c);h<n&&(n=h,s=a)}return s};We.keyword.rgb=function(r){return yn[r]};We.rgb.xyz=function(r){var t=r[0]/255,n=r[1]/255,s=r[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92;var a=t*.4124+n*.3576+s*.1805,c=t*.2126+n*.7152+s*.0722,h=t*.0193+n*.1192+s*.9505;return[a*100,c*100,h*100]};We.rgb.lab=function(r){var t=We.rgb.xyz(r),n=t[0],s=t[1],a=t[2],c,h,p;return n/=95.047,s/=100,a/=108.883,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,c=116*s-16,h=500*(n-s),p=200*(s-a),[c,h,p]};We.hsl.rgb=function(r){var t=r[0]/360,n=r[1]/100,s=r[2]/100,a,c,h,p,x;if(n===0)return x=s*255,[x,x,x];s<.5?c=s*(1+n):c=s+n-s*n,a=2*s-c,p=[0,0,0];for(var b=0;b<3;b++)h=t+1/3*-(b-1),h<0&&h++,h>1&&h--,6*h<1?x=a+(c-a)*6*h:2*h<1?x=c:3*h<2?x=a+(c-a)*(2/3-h)*6:x=a,p[b]=x*255;return p};We.hsl.hsv=function(r){var t=r[0],n=r[1]/100,s=r[2]/100,a=n,c=Math.max(s,.01),h,p;return s*=2,n*=s<=1?s:2-s,a*=c<=1?c:2-c,p=(s+n)/2,h=s===0?2*a/(c+a):2*n/(s+n),[t,h*100,p*100]};We.hsv.rgb=function(r){var t=r[0]/60,n=r[1]/100,s=r[2]/100,a=Math.floor(t)%6,c=t-Math.floor(t),h=255*s*(1-n),p=255*s*(1-n*c),x=255*s*(1-n*(1-c));switch(s*=255,a){case 0:return[s,x,h];case 1:return[p,s,h];case 2:return[h,s,x];case 3:return[h,p,s];case 4:return[x,h,s];case 5:return[s,h,p]}};We.hsv.hsl=function(r){var t=r[0],n=r[1]/100,s=r[2]/100,a=Math.max(s,.01),c,h,p;return p=(2-n)*s,c=(2-n)*a,h=n*a,h/=c<=1?c:2-c,h=h||0,p/=2,[t,h*100,p*100]};We.hwb.rgb=function(r){var t=r[0]/360,n=r[1]/100,s=r[2]/100,a=n+s,c,h,p,x;a>1&&(n/=a,s/=a),c=Math.floor(6*t),h=1-s,p=6*t-c,c&1&&(p=1-p),x=n+p*(h-n);var b,y,A;switch(c){default:case 6:case 0:b=h,y=x,A=n;break;case 1:b=x,y=h,A=n;break;case 2:b=n,y=h,A=x;break;case 3:b=n,y=x,A=h;break;case 4:b=x,y=n,A=h;break;case 5:b=h,y=n,A=x;break}return[b*255,y*255,A*255]};We.cmyk.rgb=function(r){var t=r[0]/100,n=r[1]/100,s=r[2]/100,a=r[3]/100,c,h,p;return c=1-Math.min(1,t*(1-a)+a),h=1-Math.min(1,n*(1-a)+a),p=1-Math.min(1,s*(1-a)+a),[c*255,h*255,p*255]};We.xyz.rgb=function(r){var t=r[0]/100,n=r[1]/100,s=r[2]/100,a,c,h;return a=t*3.2406+n*-1.5372+s*-.4986,c=t*-.9689+n*1.8758+s*.0415,h=t*.0557+n*-.204+s*1.057,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*12.92,c=c>.0031308?1.055*Math.pow(c,1/2.4)-.055:c*12.92,h=h>.0031308?1.055*Math.pow(h,1/2.4)-.055:h*12.92,a=Math.min(Math.max(0,a),1),c=Math.min(Math.max(0,c),1),h=Math.min(Math.max(0,h),1),[a*255,c*255,h*255]};We.xyz.lab=function(r){var t=r[0],n=r[1],s=r[2],a,c,h;return t/=95.047,n/=100,s/=108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,a=116*n-16,c=500*(t-n),h=200*(n-s),[a,c,h]};We.lab.xyz=function(r){var t=r[0],n=r[1],s=r[2],a,c,h;c=(t+16)/116,a=n/500+c,h=c-s/200;var p=Math.pow(c,3),x=Math.pow(a,3),b=Math.pow(h,3);return c=p>.008856?p:(c-16/116)/7.787,a=x>.008856?x:(a-16/116)/7.787,h=b>.008856?b:(h-16/116)/7.787,a*=95.047,c*=100,h*=108.883,[a,c,h]};We.lab.lch=function(r){var t=r[0],n=r[1],s=r[2],a,c,h;return a=Math.atan2(s,n),c=a*360/2/Math.PI,c<0&&(c+=360),h=Math.sqrt(n*n+s*s),[t,h,c]};We.lch.lab=function(r){var t=r[0],n=r[1],s=r[2],a,c,h;return h=s/360*2*Math.PI,a=n*Math.cos(h),c=n*Math.sin(h),[t,a,c]};We.rgb.ansi16=function(r){var t=r[0],n=r[1],s=r[2],a=1 in arguments?arguments[1]:We.rgb.hsv(r)[2];if(a=Math.round(a/50),a===0)return 30;var c=30+(Math.round(s/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return a===2&&(c+=60),c};We.hsv.ansi16=function(r){return We.rgb.ansi16(We.hsv.rgb(r),r[2])};We.rgb.ansi256=function(r){var t=r[0],n=r[1],s=r[2];if(t===n&&n===s)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;var a=16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(s/255*5);return a};We.ansi16.rgb=function(r){var t=r%10;if(t===0||t===7)return r>50&&(t+=3.5),t=t/10.5*255,[t,t,t];var n=(~~(r>50)+1)*.5,s=(t&1)*n*255,a=(t>>1&1)*n*255,c=(t>>2&1)*n*255;return[s,a,c]};We.ansi256.rgb=function(r){if(r>=232){var t=(r-232)*10+8;return[t,t,t]}r-=16;var n,s=Math.floor(r/36)/5*255,a=Math.floor((n=r%36)/6)/5*255,c=n%6/5*255;return[s,a,c]};We.rgb.hex=function(r){var t=((Math.round(r[0])&255)<<16)+((Math.round(r[1])&255)<<8)+(Math.round(r[2])&255),n=t.toString(16).toUpperCase();return"000000".substring(n.length)+n};We.hex.rgb=function(r){var t=r.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var n=t[0];t[0].length===3&&(n=n.split("").map(function(p){return p+p}).join(""));var s=parseInt(n,16),a=s>>16&255,c=s>>8&255,h=s&255;return[a,c,h]};We.rgb.hcg=function(r){var t=r[0]/255,n=r[1]/255,s=r[2]/255,a=Math.max(Math.max(t,n),s),c=Math.min(Math.min(t,n),s),h=a-c,p,x;return h<1?p=c/(1-h):p=0,h<=0?x=0:a===t?x=(n-s)/h%6:a===n?x=2+(s-t)/h:x=4+(t-n)/h+4,x/=6,x%=1,[x*360,h*100,p*100]};We.hsl.hcg=function(r){var t=r[1]/100,n=r[2]/100,s=1,a=0;return n<.5?s=2*t*n:s=2*t*(1-n),s<1&&(a=(n-.5*s)/(1-s)),[r[0],s*100,a*100]};We.hsv.hcg=function(r){var t=r[1]/100,n=r[2]/100,s=t*n,a=0;return s<1&&(a=(n-s)/(1-s)),[r[0],s*100,a*100]};We.hcg.rgb=function(r){var t=r[0]/360,n=r[1]/100,s=r[2]/100;if(n===0)return[s*255,s*255,s*255];var a=[0,0,0],c=t%1*6,h=c%1,p=1-h,x=0;switch(Math.floor(c)){case 0:a[0]=1,a[1]=h,a[2]=0;break;case 1:a[0]=p,a[1]=1,a[2]=0;break;case 2:a[0]=0,a[1]=1,a[2]=h;break;case 3:a[0]=0,a[1]=p,a[2]=1;break;case 4:a[0]=h,a[1]=0,a[2]=1;break;default:a[0]=1,a[1]=0,a[2]=p}return x=(1-n)*s,[(n*a[0]+x)*255,(n*a[1]+x)*255,(n*a[2]+x)*255]};We.hcg.hsv=function(r){var t=r[1]/100,n=r[2]/100,s=t+n*(1-t),a=0;return s>0&&(a=t/s),[r[0],a*100,s*100]};We.hcg.hsl=function(r){var t=r[1]/100,n=r[2]/100,s=n*(1-t)+.5*t,a=0;return s>0&&s<.5?a=t/(2*s):s>=.5&&s<1&&(a=t/(2*(1-s))),[r[0],a*100,s*100]};We.hcg.hwb=function(r){var t=r[1]/100,n=r[2]/100,s=t+n*(1-t);return[r[0],(s-t)*100,(1-s)*100]};We.hwb.hcg=function(r){var t=r[1]/100,n=r[2]/100,s=1-n,a=s-t,c=0;return a<1&&(c=(s-a)/(1-a)),[r[0],a*100,c*100]};We.apple.rgb=function(r){return[r[0]/65535*255,r[1]/65535*255,r[2]/65535*255]};We.rgb.apple=function(r){return[r[0]/255*65535,r[1]/255*65535,r[2]/255*65535]};We.gray.rgb=function(r){return[r[0]/100*255,r[0]/100*255,r[0]/100*255]};We.gray.hsl=We.gray.hsv=function(r){return[0,0,r[0]]};We.gray.hwb=function(r){return[0,100,r[0]]};We.gray.cmyk=function(r){return[0,0,0,r[0]]};We.gray.lab=function(r){return[r[0],0,0]};We.gray.hex=function(r){var t=Math.round(r[0]/100*255)&255,n=(t<<16)+(t<<8)+t,s=n.toString(16).toUpperCase();return"000000".substring(s.length)+s};We.rgb.gray=function(r){var t=(r[0]+r[1]+r[2])/3;return[t/255*100]};var Vp=$p.exports,Ml=Vp;function kx(){for(var r={},t=Object.keys(Ml),n=t.length,s=0;s<n;s++)r[t[s]]={distance:-1,parent:null};return r}function Hx(r){var t=kx(),n=[r];for(t[r].distance=0;n.length;)for(var s=n.pop(),a=Object.keys(Ml[s]),c=a.length,h=0;h<c;h++){var p=a[h],x=t[p];x.distance===-1&&(x.distance=t[s].distance+1,x.parent=s,n.unshift(p))}return t}function zx(r,t){return function(n){return t(r(n))}}function $x(r,t){for(var n=[t[r].parent,r],s=Ml[t[r].parent][r],a=t[r].parent;t[a].parent;)n.unshift(t[a].parent),s=zx(Ml[t[a].parent][a],s),a=t[a].parent;return s.conversion=n,s}var jx=function(r){for(var t=Hx(r),n={},s=Object.keys(t),a=s.length,c=0;c<a;c++){var h=s[c],p=t[h];p.parent!==null&&(n[h]=$x(h,t))}return n},Bc=Vp,Vx=jx,Zn={},qx=Object.keys(Bc);function Kx(r){var t=function(n){return n==null?n:(arguments.length>1&&(n=Array.prototype.slice.call(arguments)),r(n))};return"conversion"in r&&(t.conversion=r.conversion),t}function Yx(r){var t=function(n){if(n==null)return n;arguments.length>1&&(n=Array.prototype.slice.call(arguments));var s=r(n);if(typeof s=="object")for(var a=s.length,c=0;c<a;c++)s[c]=Math.round(s[c]);return s};return"conversion"in r&&(t.conversion=r.conversion),t}qx.forEach(function(r){Zn[r]={},Object.defineProperty(Zn[r],"channels",{value:Bc[r].channels}),Object.defineProperty(Zn[r],"labels",{value:Bc[r].labels});var t=Vx(r),n=Object.keys(t);n.forEach(function(s){var a=t[s];Zn[r][s]=Yx(a),Zn[r][s].raw=Kx(a)})});var Xx=Zn;ah.exports;(function(r){const t=Xx,n=(h,p)=>function(){return`\x1B[${h.apply(t,arguments)+p}m`},s=(h,p)=>function(){const x=h.apply(t,arguments);return`\x1B[${38+p};5;${x}m`},a=(h,p)=>function(){const x=h.apply(t,arguments);return`\x1B[${38+p};2;${x[0]};${x[1]};${x[2]}m`};function c(){const h=new Map,p={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};p.color.grey=p.color.gray;for(const y of Object.keys(p)){const A=p[y];for(const d of Object.keys(A)){const S=A[d];p[d]={open:`\x1B[${S[0]}m`,close:`\x1B[${S[1]}m`},A[d]=p[d],h.set(S[0],S[1])}Object.defineProperty(p,y,{value:A,enumerable:!1}),Object.defineProperty(p,"codes",{value:h,enumerable:!1})}const x=y=>y,b=(y,A,d)=>[y,A,d];p.color.close="\x1B[39m",p.bgColor.close="\x1B[49m",p.color.ansi={ansi:n(x,0)},p.color.ansi256={ansi256:s(x,0)},p.color.ansi16m={rgb:a(b,0)},p.bgColor.ansi={ansi:n(x,10)},p.bgColor.ansi256={ansi256:s(x,10)},p.bgColor.ansi16m={rgb:a(b,10)};for(let y of Object.keys(t)){if(typeof t[y]!="object")continue;const A=t[y];y==="ansi16"&&(y="ansi"),"ansi16"in A&&(p.color.ansi[y]=n(A.ansi16,0),p.bgColor.ansi[y]=n(A.ansi16,10)),"ansi256"in A&&(p.color.ansi256[y]=s(A.ansi256,0),p.bgColor.ansi256[y]=s(A.ansi256,10)),"rgb"in A&&(p.color.ansi16m[y]=a(A.rgb,0),p.bgColor.ansi16m[y]=a(A.rgb,10))}return p}Object.defineProperty(r,"exports",{enumerable:!0,get:c})})(ah);var Zx=ah.exports,Jx=!1;const Qx=/(?:\\(u[a-f0-9]{4}|x[a-f0-9]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,Z0=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,em=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,tm=/\\(u[0-9a-f]{4}|x[0-9a-f]{2}|.)|([^\\])/gi,im={n:`
`,r:"\r",t:"	",b:"\b",f:"\f",v:"\v",0:"\0","\\":"\\",e:"\x1B",a:"\x07"};function qp(r){return r[0]==="u"&&r.length===5||r[0]==="x"&&r.length===3?String.fromCharCode(parseInt(r.slice(1),16)):im[r]||r}function rm(r,t){const n=[],s=t.trim().split(/\s*,\s*/g);let a;for(const c of s)if(!isNaN(c))n.push(Number(c));else if(a=c.match(em))n.push(a[2].replace(tm,(h,p,x)=>p?qp(p):x));else throw new Error(`Invalid Chalk template style argument: ${c} (in style '${r}')`);return n}function nm(r){Z0.lastIndex=0;const t=[];let n;for(;(n=Z0.exec(r))!==null;){const s=n[1];if(n[2]){const a=rm(s,n[2]);t.push([s].concat(a))}else t.push([s])}return t}function J0(r,t){const n={};for(const a of t)for(const c of a.styles)n[c[0]]=a.inverse?null:c.slice(1);let s=r;for(const a of Object.keys(n))if(Array.isArray(n[a])){if(!(a in s))throw new Error(`Unknown Chalk style: ${a}`);n[a].length>0?s=s[a].apply(s,n[a]):s=s[a]}return s}var sm=(r,t)=>{const n=[],s=[];let a=[];if(t.replace(Qx,(c,h,p,x,b,y)=>{if(h)a.push(qp(h));else if(x){const A=a.join("");a=[],s.push(n.length===0?A:J0(r,n)(A)),n.push({inverse:p,styles:nm(x)})}else if(b){if(n.length===0)throw new Error("Found extraneous } in Chalk template literal");s.push(J0(r,n)(a.join(""))),a=[],n.pop()}else a.push(y)}),s.push(a.join("")),n.length>0){const c=`Chalk template literal is missing ${n.length} closing bracket${n.length===1?"":"s"} (\`}\`)`;throw new Error(c)}return s.join("")},om={};const uh=Bx,jt=Zx,lm=Jx,am=sm,Kp=Ce.platform==="win32"&&!(om.TERM||"").toLowerCase().startsWith("xterm"),Yp=["ansi","ansi","ansi256","ansi16m"],Xp=new Set(["gray"]),wo=Object.create(null);function Q0(r,t){t=t||{};const n=0;r.level=t.level===void 0?n:t.level,r.enabled="enabled"in t?t.enabled:r.level>0}function lo(r){if(!this||!(this instanceof lo)||this.template){const t={};return Q0(t,r),t.template=function(){const n=[].slice.call(arguments);return hm.apply(null,[t.template].concat(n))},Object.setPrototypeOf(t,lo.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=lo,t.template}Q0(this,r)}Kp&&(jt.blue.open="\x1B[94m");for(const r of Object.keys(jt))jt[r].closeRe=new RegExp(uh(jt[r].close),"g"),wo[r]={get(){const t=jt[r];return ch.call(this,this._styles?this._styles.concat(t):[t],r)}};jt.color.closeRe=new RegExp(uh(jt.color.close),"g");for(const r of Object.keys(jt.color.ansi))Xp.has(r)||(wo[r]={get(){const t=this.level;return function(){const s={open:jt.color[Yp[t]][r].apply(null,arguments),close:jt.color.close,closeRe:jt.color.closeRe};return ch.call(this,this._styles?this._styles.concat(s):[s],r)}}});jt.bgColor.closeRe=new RegExp(uh(jt.bgColor.close),"g");for(const r of Object.keys(jt.bgColor.ansi)){if(Xp.has(r))continue;const t="bg"+r[0].toUpperCase()+r.slice(1);wo[t]={get(){const n=this.level;return function(){const a={open:jt.bgColor[Yp[n]][r].apply(null,arguments),close:jt.bgColor.close,closeRe:jt.bgColor.closeRe};return ch.call(this,this._styles?this._styles.concat(a):[a],r)}}}}const um=Object.defineProperties(()=>{},wo);function ch(r,t){const n=function(){return cm.apply(n,arguments)};n._styles=r;const s=this;return Object.defineProperty(n,"level",{enumerable:!0,get(){return s.level},set(a){s.level=a}}),Object.defineProperty(n,"enabled",{enumerable:!0,get(){return s.enabled},set(a){s.enabled=a}}),n.hasGrey=this.hasGrey||t==="gray"||t==="grey",n.__proto__=um,n}function cm(){const r=arguments,t=r.length;let n=String(arguments[0]);if(t===0)return"";if(t>1)for(let a=1;a<t;a++)n+=" "+r[a];if(!this.enabled||this.level<=0||!n)return n;const s=jt.dim.open;Kp&&this.hasGrey&&(jt.dim.open="");for(const a of this._styles.slice().reverse())n=a.open+n.replace(a.closeRe,a.open)+a.close,n=n.replace(/\r?\n/g,`${a.close}$&${a.open}`);return jt.dim.open=s,n}function hm(r,t){if(!Array.isArray(t))return[].slice.call(arguments,1).join(" ");const n=[].slice.call(arguments,2),s=[t.raw[0]];for(let a=1;a<t.length;a++)s.push(String(n[a-1]).replace(/[{}\\]/g,"\\$&")),s.push(String(t.raw[a]));return am(r,s.join(""))}Object.defineProperties(lo.prototype,wo);lh.exports=lo();lh.exports.supportsColor=lm;var fm=lh.exports;const dm=Bi,pm=Ct;let di=class{constructor(t){const n=this.type;let s=[];if(this.length=0,Array.isArray(t))s=t;else if(Array.isArray(t.pins)){const a=Object.keys(t).filter(c=>c!=="pins");s=t.pins.map(c=>{const h={};return Array.isArray(c)?h.pins=c:h.pin=c,a.reduce((p,x)=>(p[x]=t[x],p),h)})}if(s.length)for(;s.length;){let a=s.shift();typeof n=="function"&&(a instanceof n||a instanceof this.constructor||(a=new n(a))),this.add(a)}}slice(){return new this.constructor([].slice.apply(this,arguments))}};di.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator];di.prototype.add=function(...r){let t=this.length;r.length===1&&r[0]instanceof this.constructor&&(r=r[0]);for(let n=0;n<r.length;n++)this.type?(r[n]instanceof this.type||r[n]instanceof this.constructor)&&(this[t++]=r[n]):this[t++]=r[n];return this.length=t};di.prototype.each=function(r){let t=this.length;for(let n=0;n<t;n++)r.call(this[n],this[n],n);return this};di.prototype.forEach=function(){[].forEach.apply(this,arguments)};di.prototype.includes=function(){return[].includes.apply(this,arguments)};di.prototype.indexOf=function(){return[].indexOf.apply(this,arguments)};di.prototype.map=function(){return[].map.apply(this,arguments)};di.prototype.byId=function(r){return[].find.call(this,function(t){return t.id!==void 0&&t.id===r})};di.installMethodForwarding=(r,t,n={})=>{const{skip:s=[]}=n,a="apply|arguments|bind|call|caller|constructor|domain|length|name|prototype|toString".split("|");return Object.getOwnPropertyNames(t).reduce((c,h)=>(s.includes(h)||a.includes(h)||(c[h]=function(...p){const x=this.length;for(let b=0;b<x;b++)this[b][h](...p);return this}),c),r)};const gm=()=>{};di.installCallbackReconciliation=(r,t)=>{t.forEach(n=>{r[n]=function(s,a){const c=this.length,h=[];typeof s=="function"&&(a=s,s=1e3),typeof a!="function"&&(a=gm);for(let p=0;p<c;p++)h.push(new Promise(x=>this[p][n](s,()=>x())));return Promise.all(h).then(a),this}})};di.Emitter=class extends di{constructor(r){super(r);let t=null,n=5;!Array.isArray(r)&&typeof r=="object"&&r!==null&&(n=r.freq||r.period||n,r.frequency&&(n=1/r.frequency*1e3)),Object.defineProperties(this,{period:{get(){return n},set(s){n!==s&&(n=s),t&&clearInterval(t),t=setInterval(()=>{this.emit("data",this)},n)}}}),this.period=n,this.on("newListener",s=>{s==="change"||s==="data"||this.forEach(a=>{a.on(s,c=>this.emit(s,a,c))})})}add(...r){return r.length&&(super.add(...r),r.forEach(t=>{t&&t.on("change",()=>this.emit("change",t))})),this.length}};Object.assign(di.Emitter.prototype,dm.prototype,pm.prototype);di.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator];var pi=di,xm="Expected a function",ef=NaN,mm="[object Symbol]",vm=/^\s+|\s+$/g,ym=/^[-+]0x[0-9a-f]+$/i,Em=/^0b[01]+$/i,wm=/^0o[0-7]+$/i,Sm=parseInt,Rm=typeof Gt=="object"&&Gt&&Gt.Object===Object&&Gt,Tm=typeof self=="object"&&self&&self.Object===Object&&self,Am=Rm||Tm||Function("return this")(),bm=Object.prototype,Cm=bm.toString,Om=Math.max,_m=Math.min,La=function(){return Am.Date.now()};function Im(r,t,n){var s,a,c,h,p,x,b=0,y=!1,A=!1,d=!0;if(typeof r!="function")throw new TypeError(xm);t=tf(t)||0,Fc(n)&&(y=!!n.leading,A="maxWait"in n,c=A?Om(tf(n.maxWait)||0,t):c,d="trailing"in n?!!n.trailing:d);function S(q){var ie=s,G=a;return s=a=void 0,b=q,h=r.apply(G,ie),h}function R(q){return b=q,p=setTimeout(w,t),y?S(q):h}function M(q){var ie=q-x,G=q-b,$=t-ie;return A?_m($,c-G):$}function T(q){var ie=q-x,G=q-b;return x===void 0||ie>=t||ie<0||A&&G>=c}function w(){var q=La();if(T(q))return C(q);p=setTimeout(w,M(q))}function C(q){return p=void 0,d&&s?S(q):(s=a=void 0,h)}function O(){p!==void 0&&clearTimeout(p),b=0,s=x=a=p=void 0}function H(){return p===void 0?h:C(La())}function F(){var q=La(),ie=T(q);if(s=arguments,a=this,x=q,ie){if(p===void 0)return R(x);if(A)return p=setTimeout(w,t),S(x)}return p===void 0&&(p=setTimeout(w,t)),h}return F.cancel=O,F.flush=H,F}function Fc(r){var t=typeof r;return!!r&&(t=="object"||t=="function")}function Mm(r){return!!r&&typeof r=="object"}function Dm(r){return typeof r=="symbol"||Mm(r)&&Cm.call(r)==mm}function tf(r){if(typeof r=="number")return r;if(Dm(r))return ef;if(Fc(r)){var t=typeof r.valueOf=="function"?r.valueOf():r;r=Fc(t)?t+"":t}if(typeof r!="string")return r===0?r:+r;r=r.replace(vm,"");var n=Em.test(r);return n||wm.test(r)?Sm(r.slice(2),n?2:8):ym.test(r)?ef:+r}var Lm=Im,Dl={exports:{}};Dl.exports;(function(r,t){var n=200,s="__lodash_hash_undefined__",a=9007199254740991,c="[object Arguments]",h="[object Array]",p="[object Boolean]",x="[object Date]",b="[object Error]",y="[object Function]",A="[object GeneratorFunction]",d="[object Map]",S="[object Number]",R="[object Object]",M="[object Promise]",T="[object RegExp]",w="[object Set]",C="[object String]",O="[object Symbol]",H="[object WeakMap]",F="[object ArrayBuffer]",q="[object DataView]",ie="[object Float32Array]",G="[object Float64Array]",$="[object Int8Array]",K="[object Int16Array]",Y="[object Int32Array]",Q="[object Uint8Array]",se="[object Uint8ClampedArray]",ae="[object Uint16Array]",ve="[object Uint32Array]",we=/[\\^$.*+?()[\]{}|]/g,le=/\w*$/,oe=/^\[object .+?Constructor\]$/,Re=/^(?:0|[1-9]\d*)$/,ce={};ce[c]=ce[h]=ce[F]=ce[q]=ce[p]=ce[x]=ce[ie]=ce[G]=ce[$]=ce[K]=ce[Y]=ce[d]=ce[S]=ce[R]=ce[T]=ce[w]=ce[C]=ce[O]=ce[Q]=ce[se]=ce[ae]=ce[ve]=!0,ce[b]=ce[y]=ce[H]=!1;var Oe=typeof Gt=="object"&&Gt&&Gt.Object===Object&&Gt,Me=typeof self=="object"&&self&&self.Object===Object&&self,X=Oe||Me||Function("return this")(),ne=t&&!t.nodeType&&t,ue=ne&&!0&&r&&!r.nodeType&&r,V=ue&&ue.exports===ne;function J(k,de){return k.set(de[0],de[1]),k}function he(k,de){return k.add(de),k}function ge(k,de){for(var Ae=-1,Ge=k?k.length:0;++Ae<Ge&&de(k[Ae],Ae,k)!==!1;);return k}function be(k,de){for(var Ae=-1,Ge=de.length,Nt=k.length;++Ae<Ge;)k[Nt+Ae]=de[Ae];return k}function N(k,de,Ae,Ge){for(var Nt=-1,ri=k?k.length:0;++Nt<ri;)Ae=de(Ae,k[Nt],Nt,k);return Ae}function U(k,de){for(var Ae=-1,Ge=Array(k);++Ae<k;)Ge[Ae]=de(Ae);return Ge}function me(k,de){return k==null?void 0:k[de]}function _e(k){var de=!1;if(k!=null&&typeof k.toString!="function")try{de=!!(k+"")}catch{}return de}function Se(k){var de=-1,Ae=Array(k.size);return k.forEach(function(Ge,Nt){Ae[++de]=[Nt,Ge]}),Ae}function Pe(k,de){return function(Ae){return k(de(Ae))}}function je(k){var de=-1,Ae=Array(k.size);return k.forEach(function(Ge){Ae[++de]=Ge}),Ae}var Qe=Array.prototype,pe=Function.prototype,gt=Object.prototype,wt=X["__core-js_shared__"],He=function(){var k=/[^.]+$/.exec(wt&&wt.keys&&wt.keys.IE_PROTO||"");return k?"Symbol(src)_1."+k:""}(),fe=pe.toString,Le=gt.hasOwnProperty,rt=gt.toString,Lt=RegExp("^"+fe.call(Le).replace(we,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wt=V?X.Buffer:void 0,ht=X.Symbol,Ne=X.Uint8Array,B=Pe(Object.getPrototypeOf,Object),m=Object.create,g=gt.propertyIsEnumerable,I=Qe.splice,L=Object.getOwnPropertySymbols,j=Wt?Wt.isBuffer:void 0,re=Pe(Object.keys,Object),Te=Ui(X,"DataView"),Be=Ui(X,"Map"),Fe=Ui(X,"Promise"),Xe=Ui(X,"Set"),$e=Ui(X,"WeakMap"),tt=Ui(Object,"create"),Pt=xr(Te),ut=xr(Be),ji=xr(Fe),Fi=xr(Xe),Rn=xr($e),Ir=ht?ht.prototype:void 0,Gi=Ir?Ir.valueOf:void 0;function It(k){var de=-1,Ae=k?k.length:0;for(this.clear();++de<Ae;){var Ge=k[de];this.set(Ge[0],Ge[1])}}function hr(){this.__data__=tt?tt(null):{}}function ai(k){return this.has(k)&&delete this.__data__[k]}function Mr(k){var de=this.__data__;if(tt){var Ae=de[k];return Ae===s?void 0:Ae}return Le.call(de,k)?de[k]:void 0}function Tn(k){var de=this.__data__;return tt?de[k]!==void 0:Le.call(de,k)}function ui(k,de){var Ae=this.__data__;return Ae[k]=tt&&de===void 0?s:de,this}It.prototype.clear=hr,It.prototype.delete=ai,It.prototype.get=Mr,It.prototype.has=Tn,It.prototype.set=ui;function ii(k){var de=-1,Ae=k?k.length:0;for(this.clear();++de<Ae;){var Ge=k[de];this.set(Ge[0],Ge[1])}}function gi(){this.__data__=[]}function Vi(k){var de=this.__data__,Ae=Xi(de,k);if(Ae<0)return!1;var Ge=de.length-1;return Ae==Ge?de.pop():I.call(de,Ae,1),!0}function Jr(k){var de=this.__data__,Ae=Xi(de,k);return Ae<0?void 0:de[Ae][1]}function Qr(k){return Xi(this.__data__,k)>-1}function An(k,de){var Ae=this.__data__,Ge=Xi(Ae,k);return Ge<0?Ae.push([k,de]):Ae[Ge][1]=de,this}ii.prototype.clear=gi,ii.prototype.delete=Vi,ii.prototype.get=Jr,ii.prototype.has=Qr,ii.prototype.set=An;function Wi(k){var de=-1,Ae=k?k.length:0;for(this.clear();++de<Ae;){var Ge=k[de];this.set(Ge[0],Ge[1])}}function qi(){this.__data__={hash:new It,map:new(Be||ii),string:new It}}function bn(k){return Nr(this,k).delete(k)}function fr(k){return Nr(this,k).get(k)}function Oi(k){return Nr(this,k).has(k)}function dr(k,de){return Nr(this,k).set(k,de),this}Wi.prototype.clear=qi,Wi.prototype.delete=bn,Wi.prototype.get=fr,Wi.prototype.has=Oi,Wi.prototype.set=dr;function nt(k){this.__data__=new ii(k)}function Rt(){this.__data__=new ii}function Cn(k){return this.__data__.delete(k)}function en(k){return this.__data__.get(k)}function pr(k){return this.__data__.has(k)}function Ki(k,de){var Ae=this.__data__;if(Ae instanceof ii){var Ge=Ae.__data__;if(!Be||Ge.length<n-1)return Ge.push([k,de]),this;Ae=this.__data__=new Wi(Ge)}return Ae.set(k,de),this}nt.prototype.clear=Rt,nt.prototype.delete=Cn,nt.prototype.get=en,nt.prototype.has=pr,nt.prototype.set=Ki;function Yi(k,de){var Ae=Ji(k)||Br(k)?U(k.length,String):[],Ge=Ae.length,Nt=!!Ge;for(var ri in k)Le.call(k,ri)&&!(Nt&&(ri=="length"||Ss(ri,Ge)))&&Ae.push(ri);return Ae}function tn(k,de,Ae){var Ge=k[de];(!(Le.call(k,de)&&No(Ge,Ae))||Ae===void 0&&!(de in k))&&(k[de]=Ae)}function Xi(k,de){for(var Ae=k.length;Ae--;)if(No(k[Ae][0],de))return Ae;return-1}function Zi(k,de){return k&&Pr(de,Mi(de),k)}function Dr(k,de,Ae,Ge,Nt,ri,Ri){var ei;if(Ge&&(ei=ri?Ge(k,Nt,ri,Ri):Ge(k)),ei!==void 0)return ei;if(!Ii(k))return k;var Dn=Ji(k);if(Dn){if(ei=Si(k),!de)return _o(k,ei)}else{var er=_i(k),vr=er==y||er==A;if(Bo(k))return Ke(k,de);if(er==R||er==c||vr&&!ri){if(_e(k))return ri?k:{};if(ei=Do(vr?{}:k),!de)return Io(k,Zi(ei,k))}else{if(!ce[er])return ri?k:{};ei=ws(k,er,Dr,de)}}Ri||(Ri=new nt);var rn=Ri.get(k);if(rn)return rn;if(Ri.set(k,ei),!Dn)var Ts=Ae?Mo(k):Mi(k);return ge(Ts||k,function(Fr,Gr){Ts&&(Gr=Fr,Fr=k[Gr]),tn(ei,Gr,Dr(Fr,de,Ae,Ge,Gr,k,Ri))}),ei}function D(k){return Ii(k)?m(k):{}}function z(k,de,Ae){var Ge=de(k);return Ji(k)?Ge:be(Ge,Ae(k))}function xe(k){return rt.call(k)}function Ie(k){if(!Ii(k)||Po(k))return!1;var de=In(k)||_e(k)?Lt:oe;return de.test(xr(k))}function ze(k){if(!On(k))return re(k);var de=[];for(var Ae in Object(k))Le.call(k,Ae)&&Ae!="constructor"&&de.push(Ae);return de}function Ke(k,de){if(de)return k.slice();var Ae=new k.constructor(k.length);return k.copy(Ae),Ae}function Ot(k){var de=new k.constructor(k.byteLength);return new Ne(de).set(new Ne(k)),de}function Lr(k,de){var Ae=de?Ot(k.buffer):k.buffer;return new k.constructor(Ae,k.byteOffset,k.byteLength)}function ys(k,de,Ae){var Ge=de?Ae(Se(k),!0):Se(k);return N(Ge,J,new k.constructor)}function gr(k){var de=new k.constructor(k.source,le.exec(k));return de.lastIndex=k.lastIndex,de}function wi(k,de,Ae){var Ge=de?Ae(je(k),!0):je(k);return N(Ge,he,new k.constructor)}function Co(k){return Gi?Object(Gi.call(k)):{}}function Oo(k,de){var Ae=de?Ot(k.buffer):k.buffer;return new k.constructor(Ae,k.byteOffset,k.length)}function _o(k,de){var Ae=-1,Ge=k.length;for(de||(de=Array(Ge));++Ae<Ge;)de[Ae]=k[Ae];return de}function Pr(k,de,Ae,Ge){Ae||(Ae={});for(var Nt=-1,ri=de.length;++Nt<ri;){var Ri=de[Nt],ei=void 0;tn(Ae,Ri,ei===void 0?k[Ri]:ei)}return Ae}function Io(k,de){return Pr(k,Es(k),de)}function Mo(k){return z(k,Mi,Es)}function Nr(k,de){var Ae=k.__data__;return Lo(de)?Ae[typeof de=="string"?"string":"hash"]:Ae.map}function Ui(k,de){var Ae=me(k,de);return Ie(Ae)?Ae:void 0}var Es=L?Pe(L,Object):Qi,_i=xe;(Te&&_i(new Te(new ArrayBuffer(1)))!=q||Be&&_i(new Be)!=d||Fe&&_i(Fe.resolve())!=M||Xe&&_i(new Xe)!=w||$e&&_i(new $e)!=H)&&(_i=function(k){var de=rt.call(k),Ae=de==R?k.constructor:void 0,Ge=Ae?xr(Ae):void 0;if(Ge)switch(Ge){case Pt:return q;case ut:return d;case ji:return M;case Fi:return w;case Rn:return H}return de});function Si(k){var de=k.length,Ae=k.constructor(de);return de&&typeof k[0]=="string"&&Le.call(k,"index")&&(Ae.index=k.index,Ae.input=k.input),Ae}function Do(k){return typeof k.constructor=="function"&&!On(k)?D(B(k)):{}}function ws(k,de,Ae,Ge){var Nt=k.constructor;switch(de){case F:return Ot(k);case p:case x:return new Nt(+k);case q:return Lr(k,Ge);case ie:case G:case $:case K:case Y:case Q:case se:case ae:case ve:return Oo(k,Ge);case d:return ys(k,Ge,Ae);case S:case C:return new Nt(k);case T:return gr(k);case w:return wi(k,Ge,Ae);case O:return Co(k)}}function Ss(k,de){return de=de??a,!!de&&(typeof k=="number"||Re.test(k))&&k>-1&&k%1==0&&k<de}function Lo(k){var de=typeof k;return de=="string"||de=="number"||de=="symbol"||de=="boolean"?k!=="__proto__":k===null}function Po(k){return!!He&&He in k}function On(k){var de=k&&k.constructor,Ae=typeof de=="function"&&de.prototype||gt;return k===Ae}function xr(k){if(k!=null){try{return fe.call(k)}catch{}try{return k+""}catch{}}return""}function ia(k){return Dr(k,!0,!0)}function No(k,de){return k===de||k!==k&&de!==de}function Br(k){return Rs(k)&&Le.call(k,"callee")&&(!g.call(k,"callee")||rt.call(k)==c)}var Ji=Array.isArray;function _n(k){return k!=null&&mr(k.length)&&!In(k)}function Rs(k){return Qt(k)&&_n(k)}var Bo=j||Mn;function In(k){var de=Ii(k)?rt.call(k):"";return de==y||de==A}function mr(k){return typeof k=="number"&&k>-1&&k%1==0&&k<=a}function Ii(k){var de=typeof k;return!!k&&(de=="object"||de=="function")}function Qt(k){return!!k&&typeof k=="object"}function Mi(k){return _n(k)?Yi(k):ze(k)}function Qi(){return[]}function Mn(){return!1}r.exports=ia})(Dl,Dl.exports);var Pm=Dl.exports;const it={debounce:Lm,cloneDeep:Pm},{ceil:Nm,max:Zp,min:Bm,PI:hh}=Math;it.toFixed=(r,t)=>+(r||0).toFixed(t);it.map=(r,t,n,s,a)=>(r-t)*(a-s)/(n-t)+s|0;it.scale=it.map;const rf=new Float32Array(1);it.fmap=(r,t,n,s,a)=>(rf[0]=(r-t)*(a-s)/(n-t)+s,rf[0]);it.fscale=it.fmap;it.constrain=(r,t,n)=>Bm(n,Zp(t,r));it.inRange=(r,t,n)=>r>=t&&r<=n;it.range=function(r,t,n){arguments.length===1&&(t=r-1,r=0),r=r||0,t=t||0,n=n||1;const s=Zp(Nm((t-r)/n),0);let a=0;const c=[];for(;a<=s;)c[a++]=r,r+=n;return c};it.uid=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const t=Math.random()*16|0;return(r==="x"?t:t&3|8).toString(16)}).toUpperCase();it.square=r=>r*r;it.sum=function(t){let n;return Array.isArray(t)?n=t:n=[].slice.call(arguments),n.reduce((s,a)=>s+a,0)};it.fma=(r,t,n)=>{let s=134217729*r,a;s=s+(r-s),a=r-s;let c=134217729*t,h;c=c+(t-c),h=t-c;const p=r*t,x=-p+s*c+s*h+a*c+a*h,b=p+n,y=p-(b-n)+(n-(b-p));return b+(y+x)};it._BV=it.bitValue=it.bv=r=>1<<r;it.int16=(r,t)=>{const n=r<<8|t;return n>>15?((n^65535)+1)*-1:n};it.uint16=(r,t)=>r<<8|t;it.int24=(r,t,n)=>{const s=r<<16|t<<8|n;return s>>23?((s^16777215)+1)*-1:s};it.uint24=(r,t,n)=>r<<16|t<<8|n;it.int32=(r,t,n,s)=>{const a=r<<24|t<<16|n<<8|s;return a>>31?((a^4294967295)+1)*-1:a};it.uint32=(r,t,n,s)=>(r<<24|t<<16|n<<8|s)>>>0;it.bitSize=r=>Math.round(Math.log2(r));const Jp="POW_2_",Fm="u",Gm="s",Wm=it.bitSize(Number.MAX_SAFE_INTEGER)+1,Um=[4,8,10,12,16,20,24,32];for(let r=0;r<Wm;r++)it[Jp+r]=2**r;Um.forEach(r=>{const t=it[Jp+r],n=t/2>>>0,s=n-1;it[Fm+r]=a=>(a<0&&(a+=t),it.constrain(a,0,t-1)),it[Gm+r]=a=>(a>s&&(a-=t),it.constrain(a,-n,s))});it.RAD_TO_DEG=180/hh;it.DEG_TO_RAD=hh/180;it.TAU=2*hh;var Et=it,km=null;const Hm=Object.freeze(Object.defineProperty({__proto__:null,default:km},Symbol.toStringTag,{value:"Module"})),So=_p(Hm),zm=Ct,$m=So,nf=new Map;class Cr extends zm{constructor(t){if(Cr.isActive)return Cr.ref;{super(),Cr.isActive=!0,this.context={},this.ready=!1;const n={opts:t,board:t.board};nf.set(this,n),Cr.ref=this}}initialize(t){const n=nf.get(this);Ce.stdin.resume(),Ce.stdin.setEncoding("utf8");const s={prompt:">> ",useGlobal:!1};n.board.info("Repl","Initialized");const a=$m.start(s);this.ready=!0,this.cmd=a,this.context=a.context,a.on("exit",()=>{n.board.emit("exit"),n.board.warn("Board","Closing.");const h=setTimeout(()=>{Ce.reallyExit()},1e3),p=setInterval(()=>{let x=!1;if(n.board.length){for(let b=0;b<n.board.length;b++)if(n.board[b].io.pending){x=!0;break}}else x=n.board.io.pending;x||(clearInterval(p),clearTimeout(h),Ce.nextTick(Ce.reallyExit))},1)}),this.inject(n.opts),t&&Ce.nextTick(t)}close(){this.cmd.emit("exit")}inject(t){Object.keys(t).forEach(function(n){Object.defineProperty(this.context,n,Object.getOwnPropertyDescriptor(t,n))},this)}}Cr.isActive=!1;Cr.isBlocked=!1;Cr.ref=null;var Qp=Cr;let jm=class{constructor(t){var n={};typeof t=="number"||typeof t=="string"?n.pin=t:Array.isArray(t)?n.pins=t:n=t,Object.assign(this,n)}};var eg=jm;const Vm=eg,Gc={INPUT:0,OUTPUT:1,ANALOG:2,PWM:3,SERVO:4},qm={20:"UNO",25:"LEONARDO",70:"MEGA"};function kt(r){if(!(this instanceof kt))return new kt(r);const t=r.io,n=t.pins.slice(),s=n.length,a=qm[s]||"OTHER";r.type=a;for(let c=0;c<s;c++)this[c]=n[c];Object.defineProperties(this,{type:{value:a},length:{value:s}}),["isInput","isOutput","isAnalog","isPwm","isServo"].forEach(c=>{t[c]&&(this[c]=t[c])})}Object.entries(Gc).forEach(([r,t])=>{Object.defineProperty(kt,r,{value:t})});function tg({io:r}){return r.name==="Firmata"||r.name==="Mock"}function Km({pin:r,pins:t}){return typeof r<"u"||typeof t<"u"&&t.length}kt.isFirmata=tg;kt.Error=({pin:r,type:t,via:n})=>{throw new Error(`Pin Error: ${r} is not a valid ${t} pin (${n})`)};const Wc=new Map;kt.normalize=function(r,t){var n=t.pins.type,s=tg(t),a=Wc.get(t),c;return(typeof r=="string"||typeof r=="number"||Array.isArray(r))&&(r=new Vm(r)),a||(c=t.io&&typeof t.io.normalize=="function",a=function(h){return s?kt.fromAnalog(kt.translate(h,n)):c?t.io.normalize(h):h},Wc.set(t,a)),Km(r)&&(r.pins?r.pins=r.pins.map(a):r.pin=a(r.pin)),r};kt.normalize.clear=function(){Wc.clear()};kt.translations={UNO:{dtoa:{14:"A0",15:"A1",16:"A2",17:"A3",18:"A4",19:"A5"},tinker:{I0:"A0",I1:"A1",I2:"A2",I3:"A3",I4:"A4",I5:"A5",O0:11,O1:10,O2:9,O3:6,O4:5,O5:3,D13:13,D12:12,D8:8,D7:7,D4:4,D2:2}},MEGA:{dtoa:{54:"A0",55:"A1",56:"A2",57:"A3",58:"A4",59:"A5",60:"A6",61:"A7",62:"A8",63:"A9"},tinker:{I0:"A0",I1:"A1",I2:"A2",I3:"A3",I4:"A4",I5:"A5",I6:"A6",I7:"A7",I8:"A8",I9:"A9",O0:11,O1:10,O2:9,O3:6,O4:5,O5:3,D13:13,D12:12,D8:8,D7:7,D4:4,D2:2}}};kt.translations.LEONARDO=kt.translations.UNO;kt.translate=function(r,t){var n=kt.translations[t.toUpperCase()];return n?Object.keys(n).reduce(function(s,a){return n[a][s]||s},r):r};kt.fromAnalog=function(r){return typeof r=="string"&&r.length>1&&r[0]==="A"?parseInt(r.slice(1),10):r};kt.identity=function(r,t){return[].findIndex.call(r,function(n){return n.name===t||n.id===t||n.port===t})};Object.keys(Gc).forEach(function(r){var t=r[0]+r.slice(1).toLowerCase();kt.prototype["is"+t]=function(n){var s=this[n]||this[kt.identity(this,n)];return!!(s&&s.supportedModes.includes(Gc[r]))}});kt.prototype.isDigital=function(r){var t=this[r]||this[kt.identity(this,r)];return!!(t&&t.supportedModes.length)};var Ym=kt,Xt={},Vl={};Vl.byteLength=Jm;Vl.toByteArray=ev;Vl.fromByteArray=rv;var ar=[],Ni=[],Xm=typeof Uint8Array<"u"?Uint8Array:Array,Pa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Kn=0,Zm=Pa.length;Kn<Zm;++Kn)ar[Kn]=Pa[Kn],Ni[Pa.charCodeAt(Kn)]=Kn;Ni[45]=62;Ni[95]=63;function ig(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=r.indexOf("=");n===-1&&(n=t);var s=n===t?0:4-n%4;return[n,s]}function Jm(r){var t=ig(r),n=t[0],s=t[1];return(n+s)*3/4-s}function Qm(r,t,n){return(t+n)*3/4-n}function ev(r){var t,n=ig(r),s=n[0],a=n[1],c=new Xm(Qm(r,s,a)),h=0,p=a>0?s-4:s,x;for(x=0;x<p;x+=4)t=Ni[r.charCodeAt(x)]<<18|Ni[r.charCodeAt(x+1)]<<12|Ni[r.charCodeAt(x+2)]<<6|Ni[r.charCodeAt(x+3)],c[h++]=t>>16&255,c[h++]=t>>8&255,c[h++]=t&255;return a===2&&(t=Ni[r.charCodeAt(x)]<<2|Ni[r.charCodeAt(x+1)]>>4,c[h++]=t&255),a===1&&(t=Ni[r.charCodeAt(x)]<<10|Ni[r.charCodeAt(x+1)]<<4|Ni[r.charCodeAt(x+2)]>>2,c[h++]=t>>8&255,c[h++]=t&255),c}function tv(r){return ar[r>>18&63]+ar[r>>12&63]+ar[r>>6&63]+ar[r&63]}function iv(r,t,n){for(var s,a=[],c=t;c<n;c+=3)s=(r[c]<<16&16711680)+(r[c+1]<<8&65280)+(r[c+2]&255),a.push(tv(s));return a.join("")}function rv(r){for(var t,n=r.length,s=n%3,a=[],c=16383,h=0,p=n-s;h<p;h+=c)a.push(iv(r,h,h+c>p?p:h+c));return s===1?(t=r[n-1],a.push(ar[t>>2]+ar[t<<4&63]+"==")):s===2&&(t=(r[n-2]<<8)+r[n-1],a.push(ar[t>>10]+ar[t>>4&63]+ar[t<<2&63]+"=")),a.join("")}var fh={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */fh.read=function(r,t,n,s,a){var c,h,p=a*8-s-1,x=(1<<p)-1,b=x>>1,y=-7,A=n?a-1:0,d=n?-1:1,S=r[t+A];for(A+=d,c=S&(1<<-y)-1,S>>=-y,y+=p;y>0;c=c*256+r[t+A],A+=d,y-=8);for(h=c&(1<<-y)-1,c>>=-y,y+=s;y>0;h=h*256+r[t+A],A+=d,y-=8);if(c===0)c=1-b;else{if(c===x)return h?NaN:(S?-1:1)*(1/0);h=h+Math.pow(2,s),c=c-b}return(S?-1:1)*h*Math.pow(2,c-s)};fh.write=function(r,t,n,s,a,c){var h,p,x,b=c*8-a-1,y=(1<<b)-1,A=y>>1,d=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=s?0:c-1,R=s?1:-1,M=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(p=isNaN(t)?1:0,h=y):(h=Math.floor(Math.log(t)/Math.LN2),t*(x=Math.pow(2,-h))<1&&(h--,x*=2),h+A>=1?t+=d/x:t+=d*Math.pow(2,1-A),t*x>=2&&(h++,x/=2),h+A>=y?(p=0,h=y):h+A>=1?(p=(t*x-1)*Math.pow(2,a),h=h+A):(p=t*Math.pow(2,A-1)*Math.pow(2,a),h=0));a>=8;r[n+S]=p&255,S+=R,p/=256,a-=8);for(h=h<<a|p,b+=a;b>0;r[n+S]=h&255,S+=R,h/=256,b-=8);r[n+S-R]|=M*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const t=Vl,n=fh,s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=y,r.SlowBuffer=F,r.INSPECT_MAX_BYTES=50;const a=2147483647;r.kMaxLength=a;const{Uint8Array:c,ArrayBuffer:h,SharedArrayBuffer:p}=globalThis;y.TYPED_ARRAY_SUPPORT=x(),!y.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function x(){try{const B=new c(1),m={foo:function(){return 42}};return Object.setPrototypeOf(m,c.prototype),Object.setPrototypeOf(B,m),B.foo()===42}catch{return!1}}Object.defineProperty(y.prototype,"parent",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.buffer}}),Object.defineProperty(y.prototype,"offset",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.byteOffset}});function b(B){if(B>a)throw new RangeError('The value "'+B+'" is invalid for option "size"');const m=new c(B);return Object.setPrototypeOf(m,y.prototype),m}function y(B,m,g){if(typeof B=="number"){if(typeof m=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return R(B)}return A(B,m,g)}y.poolSize=8192;function A(B,m,g){if(typeof B=="string")return M(B,m);if(h.isView(B))return w(B);if(B==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B);if(rt(B,h)||B&&rt(B.buffer,h)||typeof p<"u"&&(rt(B,p)||B&&rt(B.buffer,p)))return C(B,m,g);if(typeof B=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const I=B.valueOf&&B.valueOf();if(I!=null&&I!==B)return y.from(I,m,g);const L=O(B);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof B[Symbol.toPrimitive]=="function")return y.from(B[Symbol.toPrimitive]("string"),m,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B)}y.from=function(B,m,g){return A(B,m,g)},Object.setPrototypeOf(y.prototype,c.prototype),Object.setPrototypeOf(y,c);function d(B){if(typeof B!="number")throw new TypeError('"size" argument must be of type number');if(B<0)throw new RangeError('The value "'+B+'" is invalid for option "size"')}function S(B,m,g){return d(B),B<=0?b(B):m!==void 0?typeof g=="string"?b(B).fill(m,g):b(B).fill(m):b(B)}y.alloc=function(B,m,g){return S(B,m,g)};function R(B){return d(B),b(B<0?0:H(B)|0)}y.allocUnsafe=function(B){return R(B)},y.allocUnsafeSlow=function(B){return R(B)};function M(B,m){if((typeof m!="string"||m==="")&&(m="utf8"),!y.isEncoding(m))throw new TypeError("Unknown encoding: "+m);const g=q(B,m)|0;let I=b(g);const L=I.write(B,m);return L!==g&&(I=I.slice(0,L)),I}function T(B){const m=B.length<0?0:H(B.length)|0,g=b(m);for(let I=0;I<m;I+=1)g[I]=B[I]&255;return g}function w(B){if(rt(B,c)){const m=new c(B);return C(m.buffer,m.byteOffset,m.byteLength)}return T(B)}function C(B,m,g){if(m<0||B.byteLength<m)throw new RangeError('"offset" is outside of buffer bounds');if(B.byteLength<m+(g||0))throw new RangeError('"length" is outside of buffer bounds');let I;return m===void 0&&g===void 0?I=new c(B):g===void 0?I=new c(B,m):I=new c(B,m,g),Object.setPrototypeOf(I,y.prototype),I}function O(B){if(y.isBuffer(B)){const m=H(B.length)|0,g=b(m);return g.length===0||B.copy(g,0,0,m),g}if(B.length!==void 0)return typeof B.length!="number"||Lt(B.length)?b(0):T(B);if(B.type==="Buffer"&&Array.isArray(B.data))return T(B.data)}function H(B){if(B>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return B|0}function F(B){return+B!=B&&(B=0),y.alloc(+B)}y.isBuffer=function(m){return m!=null&&m._isBuffer===!0&&m!==y.prototype},y.compare=function(m,g){if(rt(m,c)&&(m=y.from(m,m.offset,m.byteLength)),rt(g,c)&&(g=y.from(g,g.offset,g.byteLength)),!y.isBuffer(m)||!y.isBuffer(g))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(m===g)return 0;let I=m.length,L=g.length;for(let j=0,re=Math.min(I,L);j<re;++j)if(m[j]!==g[j]){I=m[j],L=g[j];break}return I<L?-1:L<I?1:0},y.isEncoding=function(m){switch(String(m).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},y.concat=function(m,g){if(!Array.isArray(m))throw new TypeError('"list" argument must be an Array of Buffers');if(m.length===0)return y.alloc(0);let I;if(g===void 0)for(g=0,I=0;I<m.length;++I)g+=m[I].length;const L=y.allocUnsafe(g);let j=0;for(I=0;I<m.length;++I){let re=m[I];if(rt(re,c))j+re.length>L.length?(y.isBuffer(re)||(re=y.from(re)),re.copy(L,j)):c.prototype.set.call(L,re,j);else if(y.isBuffer(re))re.copy(L,j);else throw new TypeError('"list" argument must be an Array of Buffers');j+=re.length}return L};function q(B,m){if(y.isBuffer(B))return B.length;if(h.isView(B)||rt(B,h))return B.byteLength;if(typeof B!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof B);const g=B.length,I=arguments.length>2&&arguments[2]===!0;if(!I&&g===0)return 0;let L=!1;for(;;)switch(m){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return gt(B).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g*2;case"hex":return g>>>1;case"base64":return fe(B).length;default:if(L)return I?-1:gt(B).length;m=(""+m).toLowerCase(),L=!0}}y.byteLength=q;function ie(B,m,g){let I=!1;if((m===void 0||m<0)&&(m=0),m>this.length||((g===void 0||g>this.length)&&(g=this.length),g<=0)||(g>>>=0,m>>>=0,g<=m))return"";for(B||(B="utf8");;)switch(B){case"hex":return Me(this,m,g);case"utf8":case"utf-8":return le(this,m,g);case"ascii":return ce(this,m,g);case"latin1":case"binary":return Oe(this,m,g);case"base64":return we(this,m,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,m,g);default:if(I)throw new TypeError("Unknown encoding: "+B);B=(B+"").toLowerCase(),I=!0}}y.prototype._isBuffer=!0;function G(B,m,g){const I=B[m];B[m]=B[g],B[g]=I}y.prototype.swap16=function(){const m=this.length;if(m%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let g=0;g<m;g+=2)G(this,g,g+1);return this},y.prototype.swap32=function(){const m=this.length;if(m%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let g=0;g<m;g+=4)G(this,g,g+3),G(this,g+1,g+2);return this},y.prototype.swap64=function(){const m=this.length;if(m%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let g=0;g<m;g+=8)G(this,g,g+7),G(this,g+1,g+6),G(this,g+2,g+5),G(this,g+3,g+4);return this},y.prototype.toString=function(){const m=this.length;return m===0?"":arguments.length===0?le(this,0,m):ie.apply(this,arguments)},y.prototype.toLocaleString=y.prototype.toString,y.prototype.equals=function(m){if(!y.isBuffer(m))throw new TypeError("Argument must be a Buffer");return this===m?!0:y.compare(this,m)===0},y.prototype.inspect=function(){let m="";const g=r.INSPECT_MAX_BYTES;return m=this.toString("hex",0,g).replace(/(.{2})/g,"$1 ").trim(),this.length>g&&(m+=" ... "),"<Buffer "+m+">"},s&&(y.prototype[s]=y.prototype.inspect),y.prototype.compare=function(m,g,I,L,j){if(rt(m,c)&&(m=y.from(m,m.offset,m.byteLength)),!y.isBuffer(m))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof m);if(g===void 0&&(g=0),I===void 0&&(I=m?m.length:0),L===void 0&&(L=0),j===void 0&&(j=this.length),g<0||I>m.length||L<0||j>this.length)throw new RangeError("out of range index");if(L>=j&&g>=I)return 0;if(L>=j)return-1;if(g>=I)return 1;if(g>>>=0,I>>>=0,L>>>=0,j>>>=0,this===m)return 0;let re=j-L,Te=I-g;const Be=Math.min(re,Te),Fe=this.slice(L,j),Xe=m.slice(g,I);for(let $e=0;$e<Be;++$e)if(Fe[$e]!==Xe[$e]){re=Fe[$e],Te=Xe[$e];break}return re<Te?-1:Te<re?1:0};function $(B,m,g,I,L){if(B.length===0)return-1;if(typeof g=="string"?(I=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),g=+g,Lt(g)&&(g=L?0:B.length-1),g<0&&(g=B.length+g),g>=B.length){if(L)return-1;g=B.length-1}else if(g<0)if(L)g=0;else return-1;if(typeof m=="string"&&(m=y.from(m,I)),y.isBuffer(m))return m.length===0?-1:K(B,m,g,I,L);if(typeof m=="number")return m=m&255,typeof c.prototype.indexOf=="function"?L?c.prototype.indexOf.call(B,m,g):c.prototype.lastIndexOf.call(B,m,g):K(B,[m],g,I,L);throw new TypeError("val must be string, number or Buffer")}function K(B,m,g,I,L){let j=1,re=B.length,Te=m.length;if(I!==void 0&&(I=String(I).toLowerCase(),I==="ucs2"||I==="ucs-2"||I==="utf16le"||I==="utf-16le")){if(B.length<2||m.length<2)return-1;j=2,re/=2,Te/=2,g/=2}function Be(Xe,$e){return j===1?Xe[$e]:Xe.readUInt16BE($e*j)}let Fe;if(L){let Xe=-1;for(Fe=g;Fe<re;Fe++)if(Be(B,Fe)===Be(m,Xe===-1?0:Fe-Xe)){if(Xe===-1&&(Xe=Fe),Fe-Xe+1===Te)return Xe*j}else Xe!==-1&&(Fe-=Fe-Xe),Xe=-1}else for(g+Te>re&&(g=re-Te),Fe=g;Fe>=0;Fe--){let Xe=!0;for(let $e=0;$e<Te;$e++)if(Be(B,Fe+$e)!==Be(m,$e)){Xe=!1;break}if(Xe)return Fe}return-1}y.prototype.includes=function(m,g,I){return this.indexOf(m,g,I)!==-1},y.prototype.indexOf=function(m,g,I){return $(this,m,g,I,!0)},y.prototype.lastIndexOf=function(m,g,I){return $(this,m,g,I,!1)};function Y(B,m,g,I){g=Number(g)||0;const L=B.length-g;I?(I=Number(I),I>L&&(I=L)):I=L;const j=m.length;I>j/2&&(I=j/2);let re;for(re=0;re<I;++re){const Te=parseInt(m.substr(re*2,2),16);if(Lt(Te))return re;B[g+re]=Te}return re}function Q(B,m,g,I){return Le(gt(m,B.length-g),B,g,I)}function se(B,m,g,I){return Le(wt(m),B,g,I)}function ae(B,m,g,I){return Le(fe(m),B,g,I)}function ve(B,m,g,I){return Le(He(m,B.length-g),B,g,I)}y.prototype.write=function(m,g,I,L){if(g===void 0)L="utf8",I=this.length,g=0;else if(I===void 0&&typeof g=="string")L=g,I=this.length,g=0;else if(isFinite(g))g=g>>>0,isFinite(I)?(I=I>>>0,L===void 0&&(L="utf8")):(L=I,I=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const j=this.length-g;if((I===void 0||I>j)&&(I=j),m.length>0&&(I<0||g<0)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let re=!1;for(;;)switch(L){case"hex":return Y(this,m,g,I);case"utf8":case"utf-8":return Q(this,m,g,I);case"ascii":case"latin1":case"binary":return se(this,m,g,I);case"base64":return ae(this,m,g,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,m,g,I);default:if(re)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),re=!0}},y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function we(B,m,g){return m===0&&g===B.length?t.fromByteArray(B):t.fromByteArray(B.slice(m,g))}function le(B,m,g){g=Math.min(B.length,g);const I=[];let L=m;for(;L<g;){const j=B[L];let re=null,Te=j>239?4:j>223?3:j>191?2:1;if(L+Te<=g){let Be,Fe,Xe,$e;switch(Te){case 1:j<128&&(re=j);break;case 2:Be=B[L+1],(Be&192)===128&&($e=(j&31)<<6|Be&63,$e>127&&(re=$e));break;case 3:Be=B[L+1],Fe=B[L+2],(Be&192)===128&&(Fe&192)===128&&($e=(j&15)<<12|(Be&63)<<6|Fe&63,$e>2047&&($e<55296||$e>57343)&&(re=$e));break;case 4:Be=B[L+1],Fe=B[L+2],Xe=B[L+3],(Be&192)===128&&(Fe&192)===128&&(Xe&192)===128&&($e=(j&15)<<18|(Be&63)<<12|(Fe&63)<<6|Xe&63,$e>65535&&$e<1114112&&(re=$e))}}re===null?(re=65533,Te=1):re>65535&&(re-=65536,I.push(re>>>10&1023|55296),re=56320|re&1023),I.push(re),L+=Te}return Re(I)}const oe=4096;function Re(B){const m=B.length;if(m<=oe)return String.fromCharCode.apply(String,B);let g="",I=0;for(;I<m;)g+=String.fromCharCode.apply(String,B.slice(I,I+=oe));return g}function ce(B,m,g){let I="";g=Math.min(B.length,g);for(let L=m;L<g;++L)I+=String.fromCharCode(B[L]&127);return I}function Oe(B,m,g){let I="";g=Math.min(B.length,g);for(let L=m;L<g;++L)I+=String.fromCharCode(B[L]);return I}function Me(B,m,g){const I=B.length;(!m||m<0)&&(m=0),(!g||g<0||g>I)&&(g=I);let L="";for(let j=m;j<g;++j)L+=Wt[B[j]];return L}function X(B,m,g){const I=B.slice(m,g);let L="";for(let j=0;j<I.length-1;j+=2)L+=String.fromCharCode(I[j]+I[j+1]*256);return L}y.prototype.slice=function(m,g){const I=this.length;m=~~m,g=g===void 0?I:~~g,m<0?(m+=I,m<0&&(m=0)):m>I&&(m=I),g<0?(g+=I,g<0&&(g=0)):g>I&&(g=I),g<m&&(g=m);const L=this.subarray(m,g);return Object.setPrototypeOf(L,y.prototype),L};function ne(B,m,g){if(B%1!==0||B<0)throw new RangeError("offset is not uint");if(B+m>g)throw new RangeError("Trying to access beyond buffer length")}y.prototype.readUintLE=y.prototype.readUIntLE=function(m,g,I){m=m>>>0,g=g>>>0,I||ne(m,g,this.length);let L=this[m],j=1,re=0;for(;++re<g&&(j*=256);)L+=this[m+re]*j;return L},y.prototype.readUintBE=y.prototype.readUIntBE=function(m,g,I){m=m>>>0,g=g>>>0,I||ne(m,g,this.length);let L=this[m+--g],j=1;for(;g>0&&(j*=256);)L+=this[m+--g]*j;return L},y.prototype.readUint8=y.prototype.readUInt8=function(m,g){return m=m>>>0,g||ne(m,1,this.length),this[m]},y.prototype.readUint16LE=y.prototype.readUInt16LE=function(m,g){return m=m>>>0,g||ne(m,2,this.length),this[m]|this[m+1]<<8},y.prototype.readUint16BE=y.prototype.readUInt16BE=function(m,g){return m=m>>>0,g||ne(m,2,this.length),this[m]<<8|this[m+1]},y.prototype.readUint32LE=y.prototype.readUInt32LE=function(m,g){return m=m>>>0,g||ne(m,4,this.length),(this[m]|this[m+1]<<8|this[m+2]<<16)+this[m+3]*16777216},y.prototype.readUint32BE=y.prototype.readUInt32BE=function(m,g){return m=m>>>0,g||ne(m,4,this.length),this[m]*16777216+(this[m+1]<<16|this[m+2]<<8|this[m+3])},y.prototype.readBigUInt64LE=ht(function(m){m=m>>>0,Pe(m,"offset");const g=this[m],I=this[m+7];(g===void 0||I===void 0)&&je(m,this.length-8);const L=g+this[++m]*2**8+this[++m]*2**16+this[++m]*2**24,j=this[++m]+this[++m]*2**8+this[++m]*2**16+I*2**24;return BigInt(L)+(BigInt(j)<<BigInt(32))}),y.prototype.readBigUInt64BE=ht(function(m){m=m>>>0,Pe(m,"offset");const g=this[m],I=this[m+7];(g===void 0||I===void 0)&&je(m,this.length-8);const L=g*2**24+this[++m]*2**16+this[++m]*2**8+this[++m],j=this[++m]*2**24+this[++m]*2**16+this[++m]*2**8+I;return(BigInt(L)<<BigInt(32))+BigInt(j)}),y.prototype.readIntLE=function(m,g,I){m=m>>>0,g=g>>>0,I||ne(m,g,this.length);let L=this[m],j=1,re=0;for(;++re<g&&(j*=256);)L+=this[m+re]*j;return j*=128,L>=j&&(L-=Math.pow(2,8*g)),L},y.prototype.readIntBE=function(m,g,I){m=m>>>0,g=g>>>0,I||ne(m,g,this.length);let L=g,j=1,re=this[m+--L];for(;L>0&&(j*=256);)re+=this[m+--L]*j;return j*=128,re>=j&&(re-=Math.pow(2,8*g)),re},y.prototype.readInt8=function(m,g){return m=m>>>0,g||ne(m,1,this.length),this[m]&128?(255-this[m]+1)*-1:this[m]},y.prototype.readInt16LE=function(m,g){m=m>>>0,g||ne(m,2,this.length);const I=this[m]|this[m+1]<<8;return I&32768?I|4294901760:I},y.prototype.readInt16BE=function(m,g){m=m>>>0,g||ne(m,2,this.length);const I=this[m+1]|this[m]<<8;return I&32768?I|4294901760:I},y.prototype.readInt32LE=function(m,g){return m=m>>>0,g||ne(m,4,this.length),this[m]|this[m+1]<<8|this[m+2]<<16|this[m+3]<<24},y.prototype.readInt32BE=function(m,g){return m=m>>>0,g||ne(m,4,this.length),this[m]<<24|this[m+1]<<16|this[m+2]<<8|this[m+3]},y.prototype.readBigInt64LE=ht(function(m){m=m>>>0,Pe(m,"offset");const g=this[m],I=this[m+7];(g===void 0||I===void 0)&&je(m,this.length-8);const L=this[m+4]+this[m+5]*2**8+this[m+6]*2**16+(I<<24);return(BigInt(L)<<BigInt(32))+BigInt(g+this[++m]*2**8+this[++m]*2**16+this[++m]*2**24)}),y.prototype.readBigInt64BE=ht(function(m){m=m>>>0,Pe(m,"offset");const g=this[m],I=this[m+7];(g===void 0||I===void 0)&&je(m,this.length-8);const L=(g<<24)+this[++m]*2**16+this[++m]*2**8+this[++m];return(BigInt(L)<<BigInt(32))+BigInt(this[++m]*2**24+this[++m]*2**16+this[++m]*2**8+I)}),y.prototype.readFloatLE=function(m,g){return m=m>>>0,g||ne(m,4,this.length),n.read(this,m,!0,23,4)},y.prototype.readFloatBE=function(m,g){return m=m>>>0,g||ne(m,4,this.length),n.read(this,m,!1,23,4)},y.prototype.readDoubleLE=function(m,g){return m=m>>>0,g||ne(m,8,this.length),n.read(this,m,!0,52,8)},y.prototype.readDoubleBE=function(m,g){return m=m>>>0,g||ne(m,8,this.length),n.read(this,m,!1,52,8)};function ue(B,m,g,I,L,j){if(!y.isBuffer(B))throw new TypeError('"buffer" argument must be a Buffer instance');if(m>L||m<j)throw new RangeError('"value" argument is out of bounds');if(g+I>B.length)throw new RangeError("Index out of range")}y.prototype.writeUintLE=y.prototype.writeUIntLE=function(m,g,I,L){if(m=+m,g=g>>>0,I=I>>>0,!L){const Te=Math.pow(2,8*I)-1;ue(this,m,g,I,Te,0)}let j=1,re=0;for(this[g]=m&255;++re<I&&(j*=256);)this[g+re]=m/j&255;return g+I},y.prototype.writeUintBE=y.prototype.writeUIntBE=function(m,g,I,L){if(m=+m,g=g>>>0,I=I>>>0,!L){const Te=Math.pow(2,8*I)-1;ue(this,m,g,I,Te,0)}let j=I-1,re=1;for(this[g+j]=m&255;--j>=0&&(re*=256);)this[g+j]=m/re&255;return g+I},y.prototype.writeUint8=y.prototype.writeUInt8=function(m,g,I){return m=+m,g=g>>>0,I||ue(this,m,g,1,255,0),this[g]=m&255,g+1},y.prototype.writeUint16LE=y.prototype.writeUInt16LE=function(m,g,I){return m=+m,g=g>>>0,I||ue(this,m,g,2,65535,0),this[g]=m&255,this[g+1]=m>>>8,g+2},y.prototype.writeUint16BE=y.prototype.writeUInt16BE=function(m,g,I){return m=+m,g=g>>>0,I||ue(this,m,g,2,65535,0),this[g]=m>>>8,this[g+1]=m&255,g+2},y.prototype.writeUint32LE=y.prototype.writeUInt32LE=function(m,g,I){return m=+m,g=g>>>0,I||ue(this,m,g,4,4294967295,0),this[g+3]=m>>>24,this[g+2]=m>>>16,this[g+1]=m>>>8,this[g]=m&255,g+4},y.prototype.writeUint32BE=y.prototype.writeUInt32BE=function(m,g,I){return m=+m,g=g>>>0,I||ue(this,m,g,4,4294967295,0),this[g]=m>>>24,this[g+1]=m>>>16,this[g+2]=m>>>8,this[g+3]=m&255,g+4};function V(B,m,g,I,L){Se(m,I,L,B,g,7);let j=Number(m&BigInt(4294967295));B[g++]=j,j=j>>8,B[g++]=j,j=j>>8,B[g++]=j,j=j>>8,B[g++]=j;let re=Number(m>>BigInt(32)&BigInt(4294967295));return B[g++]=re,re=re>>8,B[g++]=re,re=re>>8,B[g++]=re,re=re>>8,B[g++]=re,g}function J(B,m,g,I,L){Se(m,I,L,B,g,7);let j=Number(m&BigInt(4294967295));B[g+7]=j,j=j>>8,B[g+6]=j,j=j>>8,B[g+5]=j,j=j>>8,B[g+4]=j;let re=Number(m>>BigInt(32)&BigInt(4294967295));return B[g+3]=re,re=re>>8,B[g+2]=re,re=re>>8,B[g+1]=re,re=re>>8,B[g]=re,g+8}y.prototype.writeBigUInt64LE=ht(function(m,g=0){return V(this,m,g,BigInt(0),BigInt("0xffffffffffffffff"))}),y.prototype.writeBigUInt64BE=ht(function(m,g=0){return J(this,m,g,BigInt(0),BigInt("0xffffffffffffffff"))}),y.prototype.writeIntLE=function(m,g,I,L){if(m=+m,g=g>>>0,!L){const Be=Math.pow(2,8*I-1);ue(this,m,g,I,Be-1,-Be)}let j=0,re=1,Te=0;for(this[g]=m&255;++j<I&&(re*=256);)m<0&&Te===0&&this[g+j-1]!==0&&(Te=1),this[g+j]=(m/re>>0)-Te&255;return g+I},y.prototype.writeIntBE=function(m,g,I,L){if(m=+m,g=g>>>0,!L){const Be=Math.pow(2,8*I-1);ue(this,m,g,I,Be-1,-Be)}let j=I-1,re=1,Te=0;for(this[g+j]=m&255;--j>=0&&(re*=256);)m<0&&Te===0&&this[g+j+1]!==0&&(Te=1),this[g+j]=(m/re>>0)-Te&255;return g+I},y.prototype.writeInt8=function(m,g,I){return m=+m,g=g>>>0,I||ue(this,m,g,1,127,-128),m<0&&(m=255+m+1),this[g]=m&255,g+1},y.prototype.writeInt16LE=function(m,g,I){return m=+m,g=g>>>0,I||ue(this,m,g,2,32767,-32768),this[g]=m&255,this[g+1]=m>>>8,g+2},y.prototype.writeInt16BE=function(m,g,I){return m=+m,g=g>>>0,I||ue(this,m,g,2,32767,-32768),this[g]=m>>>8,this[g+1]=m&255,g+2},y.prototype.writeInt32LE=function(m,g,I){return m=+m,g=g>>>0,I||ue(this,m,g,4,2147483647,-2147483648),this[g]=m&255,this[g+1]=m>>>8,this[g+2]=m>>>16,this[g+3]=m>>>24,g+4},y.prototype.writeInt32BE=function(m,g,I){return m=+m,g=g>>>0,I||ue(this,m,g,4,2147483647,-2147483648),m<0&&(m=4294967295+m+1),this[g]=m>>>24,this[g+1]=m>>>16,this[g+2]=m>>>8,this[g+3]=m&255,g+4},y.prototype.writeBigInt64LE=ht(function(m,g=0){return V(this,m,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),y.prototype.writeBigInt64BE=ht(function(m,g=0){return J(this,m,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function he(B,m,g,I,L,j){if(g+I>B.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function ge(B,m,g,I,L){return m=+m,g=g>>>0,L||he(B,m,g,4),n.write(B,m,g,I,23,4),g+4}y.prototype.writeFloatLE=function(m,g,I){return ge(this,m,g,!0,I)},y.prototype.writeFloatBE=function(m,g,I){return ge(this,m,g,!1,I)};function be(B,m,g,I,L){return m=+m,g=g>>>0,L||he(B,m,g,8),n.write(B,m,g,I,52,8),g+8}y.prototype.writeDoubleLE=function(m,g,I){return be(this,m,g,!0,I)},y.prototype.writeDoubleBE=function(m,g,I){return be(this,m,g,!1,I)},y.prototype.copy=function(m,g,I,L){if(!y.isBuffer(m))throw new TypeError("argument should be a Buffer");if(I||(I=0),!L&&L!==0&&(L=this.length),g>=m.length&&(g=m.length),g||(g=0),L>0&&L<I&&(L=I),L===I||m.length===0||this.length===0)return 0;if(g<0)throw new RangeError("targetStart out of bounds");if(I<0||I>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),m.length-g<L-I&&(L=m.length-g+I);const j=L-I;return this===m&&typeof c.prototype.copyWithin=="function"?this.copyWithin(g,I,L):c.prototype.set.call(m,this.subarray(I,L),g),j},y.prototype.fill=function(m,g,I,L){if(typeof m=="string"){if(typeof g=="string"?(L=g,g=0,I=this.length):typeof I=="string"&&(L=I,I=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!y.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(m.length===1){const re=m.charCodeAt(0);(L==="utf8"&&re<128||L==="latin1")&&(m=re)}}else typeof m=="number"?m=m&255:typeof m=="boolean"&&(m=Number(m));if(g<0||this.length<g||this.length<I)throw new RangeError("Out of range index");if(I<=g)return this;g=g>>>0,I=I===void 0?this.length:I>>>0,m||(m=0);let j;if(typeof m=="number")for(j=g;j<I;++j)this[j]=m;else{const re=y.isBuffer(m)?m:y.from(m,L),Te=re.length;if(Te===0)throw new TypeError('The value "'+m+'" is invalid for argument "value"');for(j=0;j<I-g;++j)this[j+g]=re[j%Te]}return this};const N={};function U(B,m,g){N[B]=class extends g{constructor(){super(),Object.defineProperty(this,"message",{value:m.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${B}]`,this.stack,delete this.name}get code(){return B}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${B}]: ${this.message}`}}}U("ERR_BUFFER_OUT_OF_BOUNDS",function(B){return B?`${B} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),U("ERR_INVALID_ARG_TYPE",function(B,m){return`The "${B}" argument must be of type number. Received type ${typeof m}`},TypeError),U("ERR_OUT_OF_RANGE",function(B,m,g){let I=`The value of "${B}" is out of range.`,L=g;return Number.isInteger(g)&&Math.abs(g)>2**32?L=me(String(g)):typeof g=="bigint"&&(L=String(g),(g>BigInt(2)**BigInt(32)||g<-(BigInt(2)**BigInt(32)))&&(L=me(L)),L+="n"),I+=` It must be ${m}. Received ${L}`,I},RangeError);function me(B){let m="",g=B.length;const I=B[0]==="-"?1:0;for(;g>=I+4;g-=3)m=`_${B.slice(g-3,g)}${m}`;return`${B.slice(0,g)}${m}`}function _e(B,m,g){Pe(m,"offset"),(B[m]===void 0||B[m+g]===void 0)&&je(m,B.length-(g+1))}function Se(B,m,g,I,L,j){if(B>g||B<m){const re=typeof m=="bigint"?"n":"";let Te;throw m===0||m===BigInt(0)?Te=`>= 0${re} and < 2${re} ** ${(j+1)*8}${re}`:Te=`>= -(2${re} ** ${(j+1)*8-1}${re}) and < 2 ** ${(j+1)*8-1}${re}`,new N.ERR_OUT_OF_RANGE("value",Te,B)}_e(I,L,j)}function Pe(B,m){if(typeof B!="number")throw new N.ERR_INVALID_ARG_TYPE(m,"number",B)}function je(B,m,g){throw Math.floor(B)!==B?(Pe(B,g),new N.ERR_OUT_OF_RANGE("offset","an integer",B)):m<0?new N.ERR_BUFFER_OUT_OF_BOUNDS:new N.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${m}`,B)}const Qe=/[^+/0-9A-Za-z-_]/g;function pe(B){if(B=B.split("=")[0],B=B.trim().replace(Qe,""),B.length<2)return"";for(;B.length%4!==0;)B=B+"=";return B}function gt(B,m){m=m||1/0;let g;const I=B.length;let L=null;const j=[];for(let re=0;re<I;++re){if(g=B.charCodeAt(re),g>55295&&g<57344){if(!L){if(g>56319){(m-=3)>-1&&j.push(239,191,189);continue}else if(re+1===I){(m-=3)>-1&&j.push(239,191,189);continue}L=g;continue}if(g<56320){(m-=3)>-1&&j.push(239,191,189),L=g;continue}g=(L-55296<<10|g-56320)+65536}else L&&(m-=3)>-1&&j.push(239,191,189);if(L=null,g<128){if((m-=1)<0)break;j.push(g)}else if(g<2048){if((m-=2)<0)break;j.push(g>>6|192,g&63|128)}else if(g<65536){if((m-=3)<0)break;j.push(g>>12|224,g>>6&63|128,g&63|128)}else if(g<1114112){if((m-=4)<0)break;j.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw new Error("Invalid code point")}return j}function wt(B){const m=[];for(let g=0;g<B.length;++g)m.push(B.charCodeAt(g)&255);return m}function He(B,m){let g,I,L;const j=[];for(let re=0;re<B.length&&!((m-=2)<0);++re)g=B.charCodeAt(re),I=g>>8,L=g%256,j.push(L),j.push(I);return j}function fe(B){return t.toByteArray(pe(B))}function Le(B,m,g,I){let L;for(L=0;L<I&&!(L+g>=m.length||L>=B.length);++L)m[L+g]=B[L];return L}function rt(B,m){return B instanceof m||B!=null&&B.constructor!=null&&B.constructor.name!=null&&B.constructor.name===m.name}function Lt(B){return B!==B}const Wt=function(){const B="0123456789abcdef",m=new Array(256);for(let g=0;g<16;++g){const I=g*16;for(let L=0;L<16;++L)m[I+L]=B[g]+B[L]}return m}();function ht(B){return typeof BigInt>"u"?Ne:B}function Ne(){throw new Error("BigInt not supported")}})(Xt);const At=Xt.Buffer,nv=Xt.Blob,sv=Xt.BlobOptions,ov=Xt.Buffer,lv=Xt.File,av=Xt.FileOptions,uv=Xt.INSPECT_MAX_BYTES,cv=Xt.SlowBuffer,hv=Xt.TranscodeEncoding,fv=Xt.atob,dv=Xt.btoa,pv=Xt.constants,gv=Xt.isAscii,xv=Xt.isUtf8,mv=Xt.kMaxLength,vv=Xt.kStringMaxLength,yv=Xt.resolveObjectURL,Ev=Xt.transcode,wv=Object.freeze(Object.defineProperty({__proto__:null,Blob:nv,BlobOptions:sv,Buffer:ov,File:lv,FileOptions:av,INSPECT_MAX_BYTES:uv,SlowBuffer:cv,TranscodeEncoding:hv,atob:fv,btoa:dv,constants:pv,default:At,isAscii:gv,isUtf8:xv,kMaxLength:mv,kStringMaxLength:vv,resolveObjectURL:yv,transcode:Ev},Symbol.toStringTag,{value:"Module"}));var Na={},Ba={},Fa,sf;function rg(){return sf||(sf=1,Fa=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},n=Symbol("test"),s=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(s)!=="[object Symbol]")return!1;var a=42;t[n]=a;for(n in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var c=Object.getOwnPropertySymbols(t);if(c.length!==1||c[0]!==n||!Object.prototype.propertyIsEnumerable.call(t,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var h=Object.getOwnPropertyDescriptor(t,n);if(h.value!==a||h.enumerable!==!0)return!1}return!0}),Fa}var Ga,of;function dh(){if(of)return Ga;of=1;var r=rg();return Ga=function(){return r()&&!!Symbol.toStringTag},Ga}var Wa,lf;function Sv(){return lf||(lf=1,Wa=Error),Wa}var Ua,af;function Rv(){return af||(af=1,Ua=EvalError),Ua}var ka,uf;function Tv(){return uf||(uf=1,ka=RangeError),ka}var Ha,cf;function Av(){return cf||(cf=1,Ha=ReferenceError),Ha}var za,hf;function ng(){return hf||(hf=1,za=SyntaxError),za}var $a,ff;function ql(){return ff||(ff=1,$a=TypeError),$a}var ja,df;function bv(){return df||(df=1,ja=URIError),ja}var Va,pf;function Cv(){if(pf)return Va;pf=1;var r=typeof Symbol<"u"&&Symbol,t=rg();return Va=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},Va}var qa,gf;function Ov(){if(gf)return qa;gf=1;var r={__proto__:null,foo:{}},t=Object;return qa=function(){return{__proto__:r}.foo===r.foo&&!(r instanceof t)},qa}var Ka,xf;function _v(){if(xf)return Ka;xf=1;var r="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,n=Math.max,s="[object Function]",a=function(x,b){for(var y=[],A=0;A<x.length;A+=1)y[A]=x[A];for(var d=0;d<b.length;d+=1)y[d+x.length]=b[d];return y},c=function(x,b){for(var y=[],A=b,d=0;A<x.length;A+=1,d+=1)y[d]=x[A];return y},h=function(p,x){for(var b="",y=0;y<p.length;y+=1)b+=p[y],y+1<p.length&&(b+=x);return b};return Ka=function(x){var b=this;if(typeof b!="function"||t.apply(b)!==s)throw new TypeError(r+b);for(var y=c(arguments,1),A,d=function(){if(this instanceof A){var w=b.apply(this,a(y,arguments));return Object(w)===w?w:this}return b.apply(x,a(y,arguments))},S=n(0,b.length-y.length),R=[],M=0;M<S;M++)R[M]="$"+M;if(A=Function("binder","return function ("+h(R,",")+"){ return binder.apply(this,arguments); }")(d),b.prototype){var T=function(){};T.prototype=b.prototype,A.prototype=new T,T.prototype=null}return A},Ka}var Ya,mf;function ph(){if(mf)return Ya;mf=1;var r=_v();return Ya=Function.prototype.bind||r,Ya}var Xa,vf;function Iv(){if(vf)return Xa;vf=1;var r=Function.prototype.call,t=Object.prototype.hasOwnProperty,n=ph();return Xa=n.call(r,t),Xa}var Za,yf;function Ro(){if(yf)return Za;yf=1;var r,t=Sv(),n=Rv(),s=Tv(),a=Av(),c=ng(),h=ql(),p=bv(),x=Function,b=function(le){try{return x('"use strict"; return ('+le+").constructor;")()}catch{}},y=Object.getOwnPropertyDescriptor;if(y)try{y({},"")}catch{y=null}var A=function(){throw new h},d=y?function(){try{return arguments.callee,A}catch{try{return y(arguments,"callee").get}catch{return A}}}():A,S=Cv()(),R=Ov()(),M=Object.getPrototypeOf||(R?function(le){return le.__proto__}:null),T={},w=typeof Uint8Array>"u"||!M?r:M(Uint8Array),C={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":S&&M?M([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":T,"%AsyncGenerator%":T,"%AsyncGeneratorFunction%":T,"%AsyncIteratorPrototype%":T,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":n,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":x,"%GeneratorFunction%":T,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":S&&M?M(M([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!S||!M?r:M(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":s,"%ReferenceError%":a,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!S||!M?r:M(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":S&&M?M(""[Symbol.iterator]()):r,"%Symbol%":S?Symbol:r,"%SyntaxError%":c,"%ThrowTypeError%":d,"%TypedArray%":w,"%TypeError%":h,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":p,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet};if(M)try{null.error}catch(le){var O=M(M(le));C["%Error.prototype%"]=O}var H=function le(oe){var Re;if(oe==="%AsyncFunction%")Re=b("async function () {}");else if(oe==="%GeneratorFunction%")Re=b("function* () {}");else if(oe==="%AsyncGeneratorFunction%")Re=b("async function* () {}");else if(oe==="%AsyncGenerator%"){var ce=le("%AsyncGeneratorFunction%");ce&&(Re=ce.prototype)}else if(oe==="%AsyncIteratorPrototype%"){var Oe=le("%AsyncGenerator%");Oe&&M&&(Re=M(Oe.prototype))}return C[oe]=Re,Re},F={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},q=ph(),ie=Iv(),G=q.call(Function.call,Array.prototype.concat),$=q.call(Function.apply,Array.prototype.splice),K=q.call(Function.call,String.prototype.replace),Y=q.call(Function.call,String.prototype.slice),Q=q.call(Function.call,RegExp.prototype.exec),se=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ae=/\\(\\)?/g,ve=function(oe){var Re=Y(oe,0,1),ce=Y(oe,-1);if(Re==="%"&&ce!=="%")throw new c("invalid intrinsic syntax, expected closing `%`");if(ce==="%"&&Re!=="%")throw new c("invalid intrinsic syntax, expected opening `%`");var Oe=[];return K(oe,se,function(Me,X,ne,ue){Oe[Oe.length]=ne?K(ue,ae,"$1"):X||Me}),Oe},we=function(oe,Re){var ce=oe,Oe;if(ie(F,ce)&&(Oe=F[ce],ce="%"+Oe[0]+"%"),ie(C,ce)){var Me=C[ce];if(Me===T&&(Me=H(ce)),typeof Me>"u"&&!Re)throw new h("intrinsic "+oe+" exists, but is not available. Please file an issue!");return{alias:Oe,name:ce,value:Me}}throw new c("intrinsic "+oe+" does not exist!")};return Za=function(oe,Re){if(typeof oe!="string"||oe.length===0)throw new h("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Re!="boolean")throw new h('"allowMissing" argument must be a boolean');if(Q(/^%?[^%]*%?$/,oe)===null)throw new c("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var ce=ve(oe),Oe=ce.length>0?ce[0]:"",Me=we("%"+Oe+"%",Re),X=Me.name,ne=Me.value,ue=!1,V=Me.alias;V&&(Oe=V[0],$(ce,G([0,1],V)));for(var J=1,he=!0;J<ce.length;J+=1){var ge=ce[J],be=Y(ge,0,1),N=Y(ge,-1);if((be==='"'||be==="'"||be==="`"||N==='"'||N==="'"||N==="`")&&be!==N)throw new c("property names with quotes must have matching quotes");if((ge==="constructor"||!he)&&(ue=!0),Oe+="."+ge,X="%"+Oe+"%",ie(C,X))ne=C[X];else if(ne!=null){if(!(ge in ne)){if(!Re)throw new h("base intrinsic for "+oe+" exists, but the property is not available.");return}if(y&&J+1>=ce.length){var U=y(ne,ge);he=!!U,he&&"get"in U&&!("originalValue"in U.get)?ne=U.get:ne=ne[ge]}else he=ie(ne,ge),ne=ne[ge];he&&!ue&&(C[X]=ne)}}return ne},Za}var Ja={exports:{}},Qa,Ef;function gh(){if(Ef)return Qa;Ef=1;var r=Ro(),t=r("%Object.defineProperty%",!0)||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return Qa=t,Qa}var eu,wf;function xh(){if(wf)return eu;wf=1;var r=Ro(),t=r("%Object.getOwnPropertyDescriptor%",!0);if(t)try{t([],"length")}catch{t=null}return eu=t,eu}var tu,Sf;function Mv(){if(Sf)return tu;Sf=1;var r=gh(),t=ng(),n=ql(),s=xh();return tu=function(c,h,p){if(!c||typeof c!="object"&&typeof c!="function")throw new n("`obj` must be an object or a function`");if(typeof h!="string"&&typeof h!="symbol")throw new n("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new n("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new n("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new n("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new n("`loose`, if provided, must be a boolean");var x=arguments.length>3?arguments[3]:null,b=arguments.length>4?arguments[4]:null,y=arguments.length>5?arguments[5]:null,A=arguments.length>6?arguments[6]:!1,d=!!s&&s(c,h);if(r)r(c,h,{configurable:y===null&&d?d.configurable:!y,enumerable:x===null&&d?d.enumerable:!x,value:p,writable:b===null&&d?d.writable:!b});else if(A||!x&&!b&&!y)c[h]=p;else throw new t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},tu}var iu,Rf;function Dv(){if(Rf)return iu;Rf=1;var r=gh(),t=function(){return!!r};return t.hasArrayLengthDefineBug=function(){if(!r)return null;try{return r([],"length",{value:1}).length!==1}catch{return!0}},iu=t,iu}var ru,Tf;function Lv(){if(Tf)return ru;Tf=1;var r=Ro(),t=Mv(),n=Dv()(),s=xh(),a=ql(),c=r("%Math.floor%");return ru=function(p,x){if(typeof p!="function")throw new a("`fn` is not a function");if(typeof x!="number"||x<0||x>4294967295||c(x)!==x)throw new a("`length` must be a positive 32-bit integer");var b=arguments.length>2&&!!arguments[2],y=!0,A=!0;if("length"in p&&s){var d=s(p,"length");d&&!d.configurable&&(y=!1),d&&!d.writable&&(A=!1)}return(y||A||!b)&&(n?t(p,"length",x,!0,!0):t(p,"length",x)),p},ru}var Af;function sg(){return Af||(Af=1,function(r){var t=ph(),n=Ro(),s=Lv(),a=ql(),c=n("%Function.prototype.apply%"),h=n("%Function.prototype.call%"),p=n("%Reflect.apply%",!0)||t.call(h,c),x=gh(),b=n("%Math.max%");r.exports=function(d){if(typeof d!="function")throw new a("a function is required");var S=p(t,h,arguments);return s(S,1+b(0,d.length-(arguments.length-1)),!0)};var y=function(){return p(t,c,arguments)};x?x(r.exports,"apply",{value:y}):r.exports.apply=y}(Ja)),Ja.exports}var nu,bf;function og(){if(bf)return nu;bf=1;var r=Ro(),t=sg(),n=t(r("String.prototype.indexOf"));return nu=function(a,c){var h=r(a,!!c);return typeof h=="function"&&n(a,".prototype.")>-1?t(h):h},nu}var su,Cf;function Pv(){if(Cf)return su;Cf=1;var r=dh()(),t=og(),n=t("Object.prototype.toString"),s=function(p){return r&&p&&typeof p=="object"&&Symbol.toStringTag in p?!1:n(p)==="[object Arguments]"},a=function(p){return s(p)?!0:p!==null&&typeof p=="object"&&typeof p.length=="number"&&p.length>=0&&n(p)!=="[object Array]"&&n(p.callee)==="[object Function]"},c=function(){return s(arguments)}();return s.isLegacyArguments=a,su=c?s:a,su}var ou,Of;function Nv(){if(Of)return ou;Of=1;var r=Object.prototype.toString,t=Function.prototype.toString,n=/^\s*(?:function)?\*/,s=dh()(),a=Object.getPrototypeOf,c=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch{}},h;return ou=function(x){if(typeof x!="function")return!1;if(n.test(t.call(x)))return!0;if(!s){var b=r.call(x);return b==="[object GeneratorFunction]"}if(!a)return!1;if(typeof h>"u"){var y=c();h=y?a(y):!1}return a(x)===h},ou}var lu,_f;function Bv(){if(_f)return lu;_f=1;var r=Function.prototype.toString,t=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,n,s;if(typeof t=="function"&&typeof Object.defineProperty=="function")try{n=Object.defineProperty({},"length",{get:function(){throw s}}),s={},t(function(){throw 42},null,n)}catch(C){C!==s&&(t=null)}else t=null;var a=/^\s*class\b/,c=function(O){try{var H=r.call(O);return a.test(H)}catch{return!1}},h=function(O){try{return c(O)?!1:(r.call(O),!0)}catch{return!1}},p=Object.prototype.toString,x="[object Object]",b="[object Function]",y="[object GeneratorFunction]",A="[object HTMLAllCollection]",d="[object HTML document.all class]",S="[object HTMLCollection]",R=typeof Symbol=="function"&&!!Symbol.toStringTag,M=!(0 in[,]),T=function(){return!1};if(typeof document=="object"){var w=document.all;p.call(w)===p.call(document.all)&&(T=function(O){if((M||!O)&&(typeof O>"u"||typeof O=="object"))try{var H=p.call(O);return(H===A||H===d||H===S||H===x)&&O("")==null}catch{}return!1})}return lu=t?function(O){if(T(O))return!0;if(!O||typeof O!="function"&&typeof O!="object")return!1;try{t(O,null,n)}catch(H){if(H!==s)return!1}return!c(O)&&h(O)}:function(O){if(T(O))return!0;if(!O||typeof O!="function"&&typeof O!="object")return!1;if(R)return h(O);if(c(O))return!1;var H=p.call(O);return H!==b&&H!==y&&!/^\[object HTML/.test(H)?!1:h(O)},lu}var au,If;function Fv(){if(If)return au;If=1;var r=Bv(),t=Object.prototype.toString,n=Object.prototype.hasOwnProperty,s=function(x,b,y){for(var A=0,d=x.length;A<d;A++)n.call(x,A)&&(y==null?b(x[A],A,x):b.call(y,x[A],A,x))},a=function(x,b,y){for(var A=0,d=x.length;A<d;A++)y==null?b(x.charAt(A),A,x):b.call(y,x.charAt(A),A,x)},c=function(x,b,y){for(var A in x)n.call(x,A)&&(y==null?b(x[A],A,x):b.call(y,x[A],A,x))},h=function(x,b,y){if(!r(b))throw new TypeError("iterator must be a function");var A;arguments.length>=3&&(A=y),t.call(x)==="[object Array]"?s(x,b,A):typeof x=="string"?a(x,b,A):c(x,b,A)};return au=h,au}var uu,Mf;function Gv(){return Mf||(Mf=1,uu=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),uu}var cu,Df;function Wv(){if(Df)return cu;Df=1;var r=Gv(),t=typeof globalThis>"u"?Gt:globalThis;return cu=function(){for(var s=[],a=0;a<r.length;a++)typeof t[r[a]]=="function"&&(s[s.length]=r[a]);return s},cu}var hu,Lf;function lg(){if(Lf)return hu;Lf=1;var r=Fv(),t=Wv(),n=sg(),s=og(),a=xh(),c=s("Object.prototype.toString"),h=dh()(),p=typeof globalThis>"u"?Gt:globalThis,x=t(),b=s("String.prototype.slice"),y=Object.getPrototypeOf,A=s("Array.prototype.indexOf",!0)||function(T,w){for(var C=0;C<T.length;C+=1)if(T[C]===w)return C;return-1},d={__proto__:null};h&&a&&y?r(x,function(M){var T=new p[M];if(Symbol.toStringTag in T){var w=y(T),C=a(w,Symbol.toStringTag);if(!C){var O=y(w);C=a(O,Symbol.toStringTag)}d["$"+M]=n(C.get)}}):r(x,function(M){var T=new p[M],w=T.slice||T.set;w&&(d["$"+M]=n(w))});var S=function(T){var w=!1;return r(d,function(C,O){if(!w)try{"$"+C(T)===O&&(w=b(O,1))}catch{}}),w},R=function(T){var w=!1;return r(d,function(C,O){if(!w)try{C(T),w=b(O,1)}catch{}}),w};return hu=function(T){if(!T||typeof T!="object")return!1;if(!h){var w=b(c(T),8,-1);return A(x,w)>-1?w:w!=="Object"?!1:R(T)}return a?S(T):null},hu}var fu,Pf;function Uv(){if(Pf)return fu;Pf=1;var r=lg();return fu=function(n){return!!r(n)},fu}var Nf;function kv(){return Nf||(Nf=1,function(r){var t=Pv(),n=Nv(),s=lg(),a=Uv();function c(pe){return pe.call.bind(pe)}var h=typeof BigInt<"u",p=typeof Symbol<"u",x=c(Object.prototype.toString),b=c(Number.prototype.valueOf),y=c(String.prototype.valueOf),A=c(Boolean.prototype.valueOf);if(h)var d=c(BigInt.prototype.valueOf);if(p)var S=c(Symbol.prototype.valueOf);function R(pe,gt){if(typeof pe!="object")return!1;try{return gt(pe),!0}catch{return!1}}r.isArgumentsObject=t,r.isGeneratorFunction=n,r.isTypedArray=a;function M(pe){return typeof Promise<"u"&&pe instanceof Promise||pe!==null&&typeof pe=="object"&&typeof pe.then=="function"&&typeof pe.catch=="function"}r.isPromise=M;function T(pe){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(pe):a(pe)||X(pe)}r.isArrayBufferView=T;function w(pe){return s(pe)==="Uint8Array"}r.isUint8Array=w;function C(pe){return s(pe)==="Uint8ClampedArray"}r.isUint8ClampedArray=C;function O(pe){return s(pe)==="Uint16Array"}r.isUint16Array=O;function H(pe){return s(pe)==="Uint32Array"}r.isUint32Array=H;function F(pe){return s(pe)==="Int8Array"}r.isInt8Array=F;function q(pe){return s(pe)==="Int16Array"}r.isInt16Array=q;function ie(pe){return s(pe)==="Int32Array"}r.isInt32Array=ie;function G(pe){return s(pe)==="Float32Array"}r.isFloat32Array=G;function $(pe){return s(pe)==="Float64Array"}r.isFloat64Array=$;function K(pe){return s(pe)==="BigInt64Array"}r.isBigInt64Array=K;function Y(pe){return s(pe)==="BigUint64Array"}r.isBigUint64Array=Y;function Q(pe){return x(pe)==="[object Map]"}Q.working=typeof Map<"u"&&Q(new Map);function se(pe){return typeof Map>"u"?!1:Q.working?Q(pe):pe instanceof Map}r.isMap=se;function ae(pe){return x(pe)==="[object Set]"}ae.working=typeof Set<"u"&&ae(new Set);function ve(pe){return typeof Set>"u"?!1:ae.working?ae(pe):pe instanceof Set}r.isSet=ve;function we(pe){return x(pe)==="[object WeakMap]"}we.working=typeof WeakMap<"u"&&we(new WeakMap);function le(pe){return typeof WeakMap>"u"?!1:we.working?we(pe):pe instanceof WeakMap}r.isWeakMap=le;function oe(pe){return x(pe)==="[object WeakSet]"}oe.working=typeof WeakSet<"u"&&oe(new WeakSet);function Re(pe){return oe(pe)}r.isWeakSet=Re;function ce(pe){return x(pe)==="[object ArrayBuffer]"}ce.working=typeof ArrayBuffer<"u"&&ce(new ArrayBuffer);function Oe(pe){return typeof ArrayBuffer>"u"?!1:ce.working?ce(pe):pe instanceof ArrayBuffer}r.isArrayBuffer=Oe;function Me(pe){return x(pe)==="[object DataView]"}Me.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Me(new DataView(new ArrayBuffer(1),0,1));function X(pe){return typeof DataView>"u"?!1:Me.working?Me(pe):pe instanceof DataView}r.isDataView=X;var ne=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function ue(pe){return x(pe)==="[object SharedArrayBuffer]"}function V(pe){return typeof ne>"u"?!1:(typeof ue.working>"u"&&(ue.working=ue(new ne)),ue.working?ue(pe):pe instanceof ne)}r.isSharedArrayBuffer=V;function J(pe){return x(pe)==="[object AsyncFunction]"}r.isAsyncFunction=J;function he(pe){return x(pe)==="[object Map Iterator]"}r.isMapIterator=he;function ge(pe){return x(pe)==="[object Set Iterator]"}r.isSetIterator=ge;function be(pe){return x(pe)==="[object Generator]"}r.isGeneratorObject=be;function N(pe){return x(pe)==="[object WebAssembly.Module]"}r.isWebAssemblyCompiledModule=N;function U(pe){return R(pe,b)}r.isNumberObject=U;function me(pe){return R(pe,y)}r.isStringObject=me;function _e(pe){return R(pe,A)}r.isBooleanObject=_e;function Se(pe){return h&&R(pe,d)}r.isBigIntObject=Se;function Pe(pe){return p&&R(pe,S)}r.isSymbolObject=Pe;function je(pe){return U(pe)||me(pe)||_e(pe)||Se(pe)||Pe(pe)}r.isBoxedPrimitive=je;function Qe(pe){return typeof Uint8Array<"u"&&(Oe(pe)||V(pe))}r.isAnyArrayBuffer=Qe,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(pe){Object.defineProperty(r,pe,{enumerable:!1,value:function(){throw new Error(pe+" is not supported in userland")}})})}(Ba)),Ba}var du,Bf;function Hv(){return Bf||(Bf=1,du=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}),du}var ol={exports:{}},Ff;function Sn(){return Ff||(Ff=1,typeof Object.create=="function"?ol.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:ol.exports=function(t,n){if(n){t.super_=n;var s=function(){};s.prototype=n.prototype,t.prototype=new s,t.prototype.constructor=t}}),ol.exports}var Gf;function cr(){return Gf||(Gf=1,function(r){var t={},n=Object.getOwnPropertyDescriptors||function(ne){for(var ue=Object.keys(ne),V={},J=0;J<ue.length;J++)V[ue[J]]=Object.getOwnPropertyDescriptor(ne,ue[J]);return V},s=/%[sdj%]/g;r.format=function(X){if(!q(X)){for(var ne=[],ue=0;ue<arguments.length;ue++)ne.push(p(arguments[ue]));return ne.join(" ")}for(var ue=1,V=arguments,J=V.length,he=String(X).replace(s,function(be){if(be==="%%")return"%";if(ue>=J)return be;switch(be){case"%s":return String(V[ue++]);case"%d":return Number(V[ue++]);case"%j":try{return JSON.stringify(V[ue++])}catch{return"[Circular]"}default:return be}}),ge=V[ue];ue<J;ge=V[++ue])O(ge)||!K(ge)?he+=" "+ge:he+=" "+p(ge);return he},r.deprecate=function(X,ne){if(typeof Ce<"u"&&Ce.noDeprecation===!0)return X;if(typeof Ce>"u")return function(){return r.deprecate(X,ne).apply(this,arguments)};var ue=!1;function V(){if(!ue){if(Ce.throwDeprecation)throw new Error(ne);Ce.traceDeprecation?console.trace(ne):console.error(ne),ue=!0}return X.apply(this,arguments)}return V};var a={},c=/^$/;if(t.NODE_DEBUG){var h=t.NODE_DEBUG;h=h.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),c=new RegExp("^"+h+"$","i")}r.debuglog=function(X){if(X=X.toUpperCase(),!a[X])if(c.test(X)){var ne=Ce.pid;a[X]=function(){var ue=r.format.apply(r,arguments);console.error("%s %d: %s",X,ne,ue)}}else a[X]=function(){};return a[X]};function p(X,ne){var ue={seen:[],stylize:b};return arguments.length>=3&&(ue.depth=arguments[2]),arguments.length>=4&&(ue.colors=arguments[3]),C(ne)?ue.showHidden=ne:ne&&r._extend(ue,ne),G(ue.showHidden)&&(ue.showHidden=!1),G(ue.depth)&&(ue.depth=2),G(ue.colors)&&(ue.colors=!1),G(ue.customInspect)&&(ue.customInspect=!0),ue.colors&&(ue.stylize=x),A(ue,X,ue.depth)}r.inspect=p,p.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},p.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function x(X,ne){var ue=p.styles[ne];return ue?"\x1B["+p.colors[ue][0]+"m"+X+"\x1B["+p.colors[ue][1]+"m":X}function b(X,ne){return X}function y(X){var ne={};return X.forEach(function(ue,V){ne[ue]=!0}),ne}function A(X,ne,ue){if(X.customInspect&&ne&&se(ne.inspect)&&ne.inspect!==r.inspect&&!(ne.constructor&&ne.constructor.prototype===ne)){var V=ne.inspect(ue,X);return q(V)||(V=A(X,V,ue)),V}var J=d(X,ne);if(J)return J;var he=Object.keys(ne),ge=y(he);if(X.showHidden&&(he=Object.getOwnPropertyNames(ne)),Q(ne)&&(he.indexOf("message")>=0||he.indexOf("description")>=0))return S(ne);if(he.length===0){if(se(ne)){var be=ne.name?": "+ne.name:"";return X.stylize("[Function"+be+"]","special")}if($(ne))return X.stylize(RegExp.prototype.toString.call(ne),"regexp");if(Y(ne))return X.stylize(Date.prototype.toString.call(ne),"date");if(Q(ne))return S(ne)}var N="",U=!1,me=["{","}"];if(w(ne)&&(U=!0,me=["[","]"]),se(ne)){var _e=ne.name?": "+ne.name:"";N=" [Function"+_e+"]"}if($(ne)&&(N=" "+RegExp.prototype.toString.call(ne)),Y(ne)&&(N=" "+Date.prototype.toUTCString.call(ne)),Q(ne)&&(N=" "+S(ne)),he.length===0&&(!U||ne.length==0))return me[0]+N+me[1];if(ue<0)return $(ne)?X.stylize(RegExp.prototype.toString.call(ne),"regexp"):X.stylize("[Object]","special");X.seen.push(ne);var Se;return U?Se=R(X,ne,ue,ge,he):Se=he.map(function(Pe){return M(X,ne,ue,ge,Pe,U)}),X.seen.pop(),T(Se,N,me)}function d(X,ne){if(G(ne))return X.stylize("undefined","undefined");if(q(ne)){var ue="'"+JSON.stringify(ne).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return X.stylize(ue,"string")}if(F(ne))return X.stylize(""+ne,"number");if(C(ne))return X.stylize(""+ne,"boolean");if(O(ne))return X.stylize("null","null")}function S(X){return"["+Error.prototype.toString.call(X)+"]"}function R(X,ne,ue,V,J){for(var he=[],ge=0,be=ne.length;ge<be;++ge)Re(ne,String(ge))?he.push(M(X,ne,ue,V,String(ge),!0)):he.push("");return J.forEach(function(N){N.match(/^\d+$/)||he.push(M(X,ne,ue,V,N,!0))}),he}function M(X,ne,ue,V,J,he){var ge,be,N;if(N=Object.getOwnPropertyDescriptor(ne,J)||{value:ne[J]},N.get?N.set?be=X.stylize("[Getter/Setter]","special"):be=X.stylize("[Getter]","special"):N.set&&(be=X.stylize("[Setter]","special")),Re(V,J)||(ge="["+J+"]"),be||(X.seen.indexOf(N.value)<0?(O(ue)?be=A(X,N.value,null):be=A(X,N.value,ue-1),be.indexOf(`
`)>-1&&(he?be=be.split(`
`).map(function(U){return"  "+U}).join(`
`).slice(2):be=`
`+be.split(`
`).map(function(U){return"   "+U}).join(`
`))):be=X.stylize("[Circular]","special")),G(ge)){if(he&&J.match(/^\d+$/))return be;ge=JSON.stringify(""+J),ge.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ge=ge.slice(1,-1),ge=X.stylize(ge,"name")):(ge=ge.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ge=X.stylize(ge,"string"))}return ge+": "+be}function T(X,ne,ue){var V=X.reduce(function(J,he){return he.indexOf(`
`)>=0,J+he.replace(/\u001b\[\d\d?m/g,"").length+1},0);return V>60?ue[0]+(ne===""?"":ne+`
 `)+" "+X.join(`,
  `)+" "+ue[1]:ue[0]+ne+" "+X.join(", ")+" "+ue[1]}r.types=kv();function w(X){return Array.isArray(X)}r.isArray=w;function C(X){return typeof X=="boolean"}r.isBoolean=C;function O(X){return X===null}r.isNull=O;function H(X){return X==null}r.isNullOrUndefined=H;function F(X){return typeof X=="number"}r.isNumber=F;function q(X){return typeof X=="string"}r.isString=q;function ie(X){return typeof X=="symbol"}r.isSymbol=ie;function G(X){return X===void 0}r.isUndefined=G;function $(X){return K(X)&&ve(X)==="[object RegExp]"}r.isRegExp=$,r.types.isRegExp=$;function K(X){return typeof X=="object"&&X!==null}r.isObject=K;function Y(X){return K(X)&&ve(X)==="[object Date]"}r.isDate=Y,r.types.isDate=Y;function Q(X){return K(X)&&(ve(X)==="[object Error]"||X instanceof Error)}r.isError=Q,r.types.isNativeError=Q;function se(X){return typeof X=="function"}r.isFunction=se;function ae(X){return X===null||typeof X=="boolean"||typeof X=="number"||typeof X=="string"||typeof X=="symbol"||typeof X>"u"}r.isPrimitive=ae,r.isBuffer=Hv();function ve(X){return Object.prototype.toString.call(X)}function we(X){return X<10?"0"+X.toString(10):X.toString(10)}var le=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function oe(){var X=new Date,ne=[we(X.getHours()),we(X.getMinutes()),we(X.getSeconds())].join(":");return[X.getDate(),le[X.getMonth()],ne].join(" ")}r.log=function(){console.log("%s - %s",oe(),r.format.apply(r,arguments))},r.inherits=Sn(),r._extend=function(X,ne){if(!ne||!K(ne))return X;for(var ue=Object.keys(ne),V=ue.length;V--;)X[ue[V]]=ne[ue[V]];return X};function Re(X,ne){return Object.prototype.hasOwnProperty.call(X,ne)}var ce=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;r.promisify=function(ne){if(typeof ne!="function")throw new TypeError('The "original" argument must be of type Function');if(ce&&ne[ce]){var ue=ne[ce];if(typeof ue!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(ue,ce,{value:ue,enumerable:!1,writable:!1,configurable:!0}),ue}function ue(){for(var V,J,he=new Promise(function(N,U){V=N,J=U}),ge=[],be=0;be<arguments.length;be++)ge.push(arguments[be]);ge.push(function(N,U){N?J(N):V(U)});try{ne.apply(this,ge)}catch(N){J(N)}return he}return Object.setPrototypeOf(ue,Object.getPrototypeOf(ne)),ce&&Object.defineProperty(ue,ce,{value:ue,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(ue,n(ne))},r.promisify.custom=ce;function Oe(X,ne){if(!X){var ue=new Error("Promise was rejected with a falsy value");ue.reason=X,X=ue}return ne(X)}function Me(X){if(typeof X!="function")throw new TypeError('The "original" argument must be of type Function');function ne(){for(var ue=[],V=0;V<arguments.length;V++)ue.push(arguments[V]);var J=ue.pop();if(typeof J!="function")throw new TypeError("The last argument must be of type Function");var he=this,ge=function(){return J.apply(he,arguments)};X.apply(this,ue).then(function(be){Ce.nextTick(ge.bind(null,null,be))},function(be){Ce.nextTick(Oe.bind(null,be,ge))})}return Object.setPrototypeOf(ne,Object.getPrototypeOf(X)),Object.defineProperties(ne,n(X)),ne}r.callbackify=Me}(Na)),Na}var pu,Wf;function zv(){if(Wf)return pu;Wf=1;var r=Bi.EventEmitter,t=cr(),n=[7,8],s=[1,2],a=["none","even","mark","odd","space"],c=["RTSCTS"],h={baudrate:9600,parity:"none",rtscts:!1,databits:8,stopbits:1,buffersize:256};function p(S){switch(S.dataBits){case 7:S.dataBits="seven";break;case 8:S.dataBits="eight";break}switch(S.stopBits){case 1:S.stopBits="one";break;case 2:S.stopBits="two";break}switch(S.parity){case"none":S.parity="no";break}return S}function x(S,R,M,T){r.call(this);var w=this,C=Array.prototype.slice.call(arguments);T=C.pop(),typeof T!="function"&&(T=null),R=typeof R!="function"&&R||{},M=M??!0,T=T||function(q){q&&w.emit("error",q)};var O;if(R.baudRate=R.baudRate||R.baudrate||h.baudrate,R.dataBits=R.dataBits||R.databits||h.databits,n.indexOf(R.dataBits)===-1){O=new Error('Invalid "databits": '+R.dataBits),T(O);return}if(R.stopBits=R.stopBits||R.stopbits||h.stopbits,s.indexOf(R.stopBits)===-1){O=new Error('Invalid "stopbits": '+R.stopbits),T(O);return}if(R.parity=R.parity||h.parity,a.indexOf(R.parity)===-1){O=new Error('Invalid "parity": '+R.parity),T(O);return}if(!S){O=new Error("Invalid port specified: "+S),T(O);return}if(R.rtscts=h.rtscts,R.flowControl||R.flowcontrol){var H=R.flowControl||R.flowcontrol;if(typeof H=="boolean")R.rtscts=!0;else{var F=H.every(function(q){var ie=q.toUpperCase(),G=c.indexOf(ie);if(G<0){var $=new Error('Invalid "flowControl": '+ie+". Valid options: "+c.join(", "));return T($),!1}else{switch(G){case 0:R.rtscts=!0;break}return!0}});if(!F)return}}if(R.bufferSize=R.bufferSize||R.buffersize||h.buffersize,R.serial=R.serial||typeof chrome<"u"&&chrome.serial,!R.serial)throw new Error("No access to serial ports. Try loading as a Chrome Application.");this.options=p(R),this.options.serial.onReceiveError.addListener(function(q){switch(q.error){case"disconnected":case"device_lost":case"system_error":O=new Error("Disconnected"),w.options.disconnectedCallback?w.options.disconnectedCallback(O):w.emit("disconnect",O),w.connectionId>=0&&w.close();break}}),this.path=S,M&&Ce.nextTick(function(){w.open(T)})}t.inherits(x,r),x.prototype.connectionId=-1,x.prototype.open=function(S){var R={bitrate:parseInt(this.options.baudRate,10),dataBits:this.options.dataBits,parityBit:this.options.parity,stopBits:this.options.stopBits,ctsFlowControl:this.options.rtscts};this.options.serial.connect(this.path,R,this.proxy("onOpen",S))},x.prototype.onOpen=function(S,R){if(chrome.runtime.lastError){typeof S=="function"?S(chrome.runtime.lastError):this.emit("error",chrome.runtime.lastError);return}if(this.connectionId=R.connectionId,this.connectionId===-1){this.emit("error",new Error("Could not open port."));return}this.emit("open",R),this._reader=this.proxy("onRead"),this.options.serial.onReceive.addListener(this._reader),typeof S=="function"&&S(chrome.runtime.lastError,R)},x.prototype.onRead=function(S){S&&this.connectionId===S.connectionId&&(this.options.dataCallback?this.options.dataCallback(d(S.data)):this.emit("data",d(S.data)))},x.prototype.write=function(S,R){if(this.connectionId<0){var M=new Error("Serialport not open.");typeof R=="function"?R(M):this.emit("error",M);return}typeof S=="string"&&(S=y(S)),S instanceof ArrayBuffer||(S=A(S)),this.options.serial.send(this.connectionId,S,function(T){typeof R=="function"&&R(chrome.runtime.lastError,T)})},x.prototype.close=function(S){if(this.connectionId<0){var R=new Error("Serialport not open.");typeof S=="function"?S(R):this.emit("error",R);return}this.options.serial.disconnect(this.connectionId,this.proxy("onClose",S))},x.prototype.onClose=function(S,R){this.connectionId=-1,this.emit("close"),this.removeAllListeners(),this._reader&&(this.options.serial.onReceive.removeListener(this._reader),this._reader=null),typeof S=="function"&&S(chrome.runtime.lastError,R)},x.prototype.flush=function(S){if(this.connectionId<0){var R=new Error("Serialport not open.");typeof S=="function"?S(R):this.emit("error",R);return}var M=this;this.options.serial.flush(this.connectionId,function(T){if(chrome.runtime.lastError){typeof S=="function"?S(chrome.runtime.lastError,T):M.emit("error",chrome.runtime.lastError);return}else S(null,T)})},x.prototype.drain=function(S){if(this.connectionId<0){var R=new Error("Serialport not open.");typeof S=="function"?S(R):this.emit("error",R);return}typeof S=="function"&&S()},x.prototype.proxy=function(){for(var S=this,R=[],M=0;M<arguments.length;M++)R[M]=arguments[M];var T=R.splice(0,1)[0],w=function(){for(var C=[],O=0;O<arguments.length;O++)C[O]=arguments[O];var H=R.concat(C);S[T].apply(S,H)};return w},x.prototype.set=function(S,R){this.options.serial.setControlSignals(this.connectionId,S,function(M){R(chrome.runtime.lastError,M)})},x.prototype.isOpen=function(){return this.connectionId>-1};function b(S){typeof chrome<"u"&&chrome.serial?chrome.serial.getDevices(function(R){for(var M=new Array(R.length),T=0;T<R.length;T++)M[T]={comName:R[T].path,manufacturer:R[T].displayName,serialNumber:"",pnpId:"",locationId:"",vendorId:"0x"+(R[T].vendorId||0).toString(16),productId:"0x"+(R[T].productId||0).toString(16)};S(chrome.runtime.lastError,M)}):S(new Error("No access to serial ports. Try loading as a Chrome Application."),null)}function y(S){for(var R=new ArrayBuffer(S.length),M=new Uint8Array(R),T=0;T<S.length;T++)M[T]=S.charCodeAt(T);return R}function A(S){for(var R=new ArrayBuffer(S.length),M=new Uint8Array(R),T=0;T<S.length;T++)M[T]=S[T];return R}function d(S){for(var R=new At(S.byteLength),M=new Uint8Array(S),T=0;T<R.length;++T)R[T]=M[T];return R}return pu={SerialPort:x,list:b,buffer2ArrayBuffer:A,used:[]},pu}var gu,Uf;function ag(){return Uf||(Uf=1,gu=Bi.EventEmitter),gu}const Kl=_p(wv);var xu,kf;function $v(){if(kf)return xu;kf=1;function r(R,M){var T=Object.keys(R);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(R);M&&(w=w.filter(function(C){return Object.getOwnPropertyDescriptor(R,C).enumerable})),T.push.apply(T,w)}return T}function t(R){for(var M=1;M<arguments.length;M++){var T=arguments[M]!=null?arguments[M]:{};M%2?r(Object(T),!0).forEach(function(w){n(R,w,T[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(T)):r(Object(T)).forEach(function(w){Object.defineProperty(R,w,Object.getOwnPropertyDescriptor(T,w))})}return R}function n(R,M,T){return M=h(M),M in R?Object.defineProperty(R,M,{value:T,enumerable:!0,configurable:!0,writable:!0}):R[M]=T,R}function s(R,M){if(!(R instanceof M))throw new TypeError("Cannot call a class as a function")}function a(R,M){for(var T=0;T<M.length;T++){var w=M[T];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(R,h(w.key),w)}}function c(R,M,T){return M&&a(R.prototype,M),Object.defineProperty(R,"prototype",{writable:!1}),R}function h(R){var M=p(R,"string");return typeof M=="symbol"?M:String(M)}function p(R,M){if(typeof R!="object"||R===null)return R;var T=R[Symbol.toPrimitive];if(T!==void 0){var w=T.call(R,M||"default");if(typeof w!="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return(M==="string"?String:Number)(R)}var x=Kl,b=x.Buffer,y=cr(),A=y.inspect,d=A&&A.custom||"inspect";function S(R,M,T){b.prototype.copy.call(R,M,T)}return xu=function(){function R(){s(this,R),this.head=null,this.tail=null,this.length=0}return c(R,[{key:"push",value:function(T){var w={data:T,next:null};this.length>0?this.tail.next=w:this.head=w,this.tail=w,++this.length}},{key:"unshift",value:function(T){var w={data:T,next:this.head};this.length===0&&(this.tail=w),this.head=w,++this.length}},{key:"shift",value:function(){if(this.length!==0){var T=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,T}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(T){if(this.length===0)return"";for(var w=this.head,C=""+w.data;w=w.next;)C+=T+w.data;return C}},{key:"concat",value:function(T){if(this.length===0)return b.alloc(0);for(var w=b.allocUnsafe(T>>>0),C=this.head,O=0;C;)S(C.data,w,O),O+=C.data.length,C=C.next;return w}},{key:"consume",value:function(T,w){var C;return T<this.head.data.length?(C=this.head.data.slice(0,T),this.head.data=this.head.data.slice(T)):T===this.head.data.length?C=this.shift():C=w?this._getString(T):this._getBuffer(T),C}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(T){var w=this.head,C=1,O=w.data;for(T-=O.length;w=w.next;){var H=w.data,F=T>H.length?H.length:T;if(F===H.length?O+=H:O+=H.slice(0,T),T-=F,T===0){F===H.length?(++C,w.next?this.head=w.next:this.head=this.tail=null):(this.head=w,w.data=H.slice(F));break}++C}return this.length-=C,O}},{key:"_getBuffer",value:function(T){var w=b.allocUnsafe(T),C=this.head,O=1;for(C.data.copy(w),T-=C.data.length;C=C.next;){var H=C.data,F=T>H.length?H.length:T;if(H.copy(w,w.length-T,0,F),T-=F,T===0){F===H.length?(++O,C.next?this.head=C.next:this.head=this.tail=null):(this.head=C,C.data=H.slice(F));break}++O}return this.length-=O,w}},{key:d,value:function(T,w){return A(this,t(t({},w),{},{depth:0,customInspect:!1}))}}]),R}(),xu}var mu,Hf;function ug(){if(Hf)return mu;Hf=1;function r(h,p){var x=this,b=this._readableState&&this._readableState.destroyed,y=this._writableState&&this._writableState.destroyed;return b||y?(p?p(h):h&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Ce.nextTick(a,this,h)):Ce.nextTick(a,this,h)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(h||null,function(A){!p&&A?x._writableState?x._writableState.errorEmitted?Ce.nextTick(n,x):(x._writableState.errorEmitted=!0,Ce.nextTick(t,x,A)):Ce.nextTick(t,x,A):p?(Ce.nextTick(n,x),p(A)):Ce.nextTick(n,x)}),this)}function t(h,p){a(h,p),n(h)}function n(h){h._writableState&&!h._writableState.emitClose||h._readableState&&!h._readableState.emitClose||h.emit("close")}function s(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(h,p){h.emit("error",p)}function c(h,p){var x=h._readableState,b=h._writableState;x&&x.autoDestroy||b&&b.autoDestroy?h.destroy(p):h.emit("error",p)}return mu={destroy:r,undestroy:s,errorOrDestroy:c},mu}var vu={},zf;function hs(){if(zf)return vu;zf=1;function r(p,x){p.prototype=Object.create(x.prototype),p.prototype.constructor=p,p.__proto__=x}var t={};function n(p,x,b){b||(b=Error);function y(d,S,R){return typeof x=="string"?x:x(d,S,R)}var A=function(d){r(S,d);function S(R,M,T){return d.call(this,y(R,M,T))||this}return S}(b);A.prototype.name=b.name,A.prototype.code=p,t[p]=A}function s(p,x){if(Array.isArray(p)){var b=p.length;return p=p.map(function(y){return String(y)}),b>2?"one of ".concat(x," ").concat(p.slice(0,b-1).join(", "),", or ")+p[b-1]:b===2?"one of ".concat(x," ").concat(p[0]," or ").concat(p[1]):"of ".concat(x," ").concat(p[0])}else return"of ".concat(x," ").concat(String(p))}function a(p,x,b){return p.substr(0,x.length)===x}function c(p,x,b){return(b===void 0||b>p.length)&&(b=p.length),p.substring(b-x.length,b)===x}function h(p,x,b){return typeof b!="number"&&(b=0),b+x.length>p.length?!1:p.indexOf(x,b)!==-1}return n("ERR_INVALID_OPT_VALUE",function(p,x){return'The value "'+x+'" is invalid for option "'+p+'"'},TypeError),n("ERR_INVALID_ARG_TYPE",function(p,x,b){var y;typeof x=="string"&&a(x,"not ")?(y="must not be",x=x.replace(/^not /,"")):y="must be";var A;if(c(p," argument"))A="The ".concat(p," ").concat(y," ").concat(s(x,"type"));else{var d=h(p,".")?"property":"argument";A='The "'.concat(p,'" ').concat(d," ").concat(y," ").concat(s(x,"type"))}return A+=". Received type ".concat(typeof b),A},TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",function(p){return"The "+p+" method is not implemented"}),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",function(p){return"Cannot call "+p+" after a stream was destroyed"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",function(p){return"Unknown encoding: "+p},TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),vu.codes=t,vu}var yu,$f;function cg(){if($f)return yu;$f=1;var r=hs().codes.ERR_INVALID_OPT_VALUE;function t(s,a,c){return s.highWaterMark!=null?s.highWaterMark:a?s[c]:null}function n(s,a,c,h){var p=t(a,h,c);if(p!=null){if(!(isFinite(p)&&Math.floor(p)===p)||p<0){var x=h?c:"highWaterMark";throw new r(x,p)}return Math.floor(p)}return s.objectMode?16:16*1024}return yu={getHighWaterMark:n},yu}var Eu,jf;function jv(){if(jf)return Eu;jf=1,Eu=r;function r(n,s){if(t("noDeprecation"))return n;var a=!1;function c(){if(!a){if(t("throwDeprecation"))throw new Error(s);t("traceDeprecation")?console.trace(s):console.warn(s),a=!0}return n.apply(this,arguments)}return c}function t(n){try{if(!Gt.localStorage)return!1}catch{return!1}var s=Gt.localStorage[n];return s==null?!1:String(s).toLowerCase()==="true"}return Eu}var wu,Vf;function hg(){if(Vf)return wu;Vf=1,wu=G;function r(V){var J=this;this.next=null,this.entry=null,this.finish=function(){ue(J,V)}}var t;G.WritableState=q;var n={deprecate:jv()},s=ag(),a=Kl.Buffer,c=(typeof Gt<"u"?Gt:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function h(V){return a.from(V)}function p(V){return a.isBuffer(V)||V instanceof c}var x=ug(),b=cg(),y=b.getHighWaterMark,A=hs().codes,d=A.ERR_INVALID_ARG_TYPE,S=A.ERR_METHOD_NOT_IMPLEMENTED,R=A.ERR_MULTIPLE_CALLBACK,M=A.ERR_STREAM_CANNOT_PIPE,T=A.ERR_STREAM_DESTROYED,w=A.ERR_STREAM_NULL_VALUES,C=A.ERR_STREAM_WRITE_AFTER_END,O=A.ERR_UNKNOWN_ENCODING,H=x.errorOrDestroy;Sn()(G,s);function F(){}function q(V,J,he){t=t||us(),V=V||{},typeof he!="boolean"&&(he=J instanceof t),this.objectMode=!!V.objectMode,he&&(this.objectMode=this.objectMode||!!V.writableObjectMode),this.highWaterMark=y(this,V,"writableHighWaterMark",he),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ge=V.decodeStrings===!1;this.decodeStrings=!ge,this.defaultEncoding=V.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(be){we(J,be)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=V.emitClose!==!1,this.autoDestroy=!!V.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}q.prototype.getBuffer=function(){for(var J=this.bufferedRequest,he=[];J;)he.push(J),J=J.next;return he},function(){try{Object.defineProperty(q.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var ie;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(ie=Function.prototype[Symbol.hasInstance],Object.defineProperty(G,Symbol.hasInstance,{value:function(J){return ie.call(this,J)?!0:this!==G?!1:J&&J._writableState instanceof q}})):ie=function(J){return J instanceof this};function G(V){t=t||us();var J=this instanceof t;if(!J&&!ie.call(G,this))return new G(V);this._writableState=new q(V,this,J),this.writable=!0,V&&(typeof V.write=="function"&&(this._write=V.write),typeof V.writev=="function"&&(this._writev=V.writev),typeof V.destroy=="function"&&(this._destroy=V.destroy),typeof V.final=="function"&&(this._final=V.final)),s.call(this)}G.prototype.pipe=function(){H(this,new M)};function $(V,J){var he=new C;H(V,he),Ce.nextTick(J,he)}function K(V,J,he,ge){var be;return he===null?be=new w:typeof he!="string"&&!J.objectMode&&(be=new d("chunk",["string","Buffer"],he)),be?(H(V,be),Ce.nextTick(ge,be),!1):!0}G.prototype.write=function(V,J,he){var ge=this._writableState,be=!1,N=!ge.objectMode&&p(V);return N&&!a.isBuffer(V)&&(V=h(V)),typeof J=="function"&&(he=J,J=null),N?J="buffer":J||(J=ge.defaultEncoding),typeof he!="function"&&(he=F),ge.ending?$(this,he):(N||K(this,ge,V,he))&&(ge.pendingcb++,be=Q(this,ge,N,V,J,he)),be},G.prototype.cork=function(){this._writableState.corked++},G.prototype.uncork=function(){var V=this._writableState;V.corked&&(V.corked--,!V.writing&&!V.corked&&!V.bufferProcessing&&V.bufferedRequest&&Re(this,V))},G.prototype.setDefaultEncoding=function(J){if(typeof J=="string"&&(J=J.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((J+"").toLowerCase())>-1))throw new O(J);return this._writableState.defaultEncoding=J,this},Object.defineProperty(G.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Y(V,J,he){return!V.objectMode&&V.decodeStrings!==!1&&typeof J=="string"&&(J=a.from(J,he)),J}Object.defineProperty(G.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Q(V,J,he,ge,be,N){if(!he){var U=Y(J,ge,be);ge!==U&&(he=!0,be="buffer",ge=U)}var me=J.objectMode?1:ge.length;J.length+=me;var _e=J.length<J.highWaterMark;if(_e||(J.needDrain=!0),J.writing||J.corked){var Se=J.lastBufferedRequest;J.lastBufferedRequest={chunk:ge,encoding:be,isBuf:he,callback:N,next:null},Se?Se.next=J.lastBufferedRequest:J.bufferedRequest=J.lastBufferedRequest,J.bufferedRequestCount+=1}else se(V,J,!1,me,ge,be,N);return _e}function se(V,J,he,ge,be,N,U){J.writelen=ge,J.writecb=U,J.writing=!0,J.sync=!0,J.destroyed?J.onwrite(new T("write")):he?V._writev(be,J.onwrite):V._write(be,N,J.onwrite),J.sync=!1}function ae(V,J,he,ge,be){--J.pendingcb,he?(Ce.nextTick(be,ge),Ce.nextTick(X,V,J),V._writableState.errorEmitted=!0,H(V,ge)):(be(ge),V._writableState.errorEmitted=!0,H(V,ge),X(V,J))}function ve(V){V.writing=!1,V.writecb=null,V.length-=V.writelen,V.writelen=0}function we(V,J){var he=V._writableState,ge=he.sync,be=he.writecb;if(typeof be!="function")throw new R;if(ve(he),J)ae(V,he,ge,J,be);else{var N=ce(he)||V.destroyed;!N&&!he.corked&&!he.bufferProcessing&&he.bufferedRequest&&Re(V,he),ge?Ce.nextTick(le,V,he,N,be):le(V,he,N,be)}}function le(V,J,he,ge){he||oe(V,J),J.pendingcb--,ge(),X(V,J)}function oe(V,J){J.length===0&&J.needDrain&&(J.needDrain=!1,V.emit("drain"))}function Re(V,J){J.bufferProcessing=!0;var he=J.bufferedRequest;if(V._writev&&he&&he.next){var ge=J.bufferedRequestCount,be=new Array(ge),N=J.corkedRequestsFree;N.entry=he;for(var U=0,me=!0;he;)be[U]=he,he.isBuf||(me=!1),he=he.next,U+=1;be.allBuffers=me,se(V,J,!0,J.length,be,"",N.finish),J.pendingcb++,J.lastBufferedRequest=null,N.next?(J.corkedRequestsFree=N.next,N.next=null):J.corkedRequestsFree=new r(J),J.bufferedRequestCount=0}else{for(;he;){var _e=he.chunk,Se=he.encoding,Pe=he.callback,je=J.objectMode?1:_e.length;if(se(V,J,!1,je,_e,Se,Pe),he=he.next,J.bufferedRequestCount--,J.writing)break}he===null&&(J.lastBufferedRequest=null)}J.bufferedRequest=he,J.bufferProcessing=!1}G.prototype._write=function(V,J,he){he(new S("_write()"))},G.prototype._writev=null,G.prototype.end=function(V,J,he){var ge=this._writableState;return typeof V=="function"?(he=V,V=null,J=null):typeof J=="function"&&(he=J,J=null),V!=null&&this.write(V,J),ge.corked&&(ge.corked=1,this.uncork()),ge.ending||ne(this,ge,he),this},Object.defineProperty(G.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ce(V){return V.ending&&V.length===0&&V.bufferedRequest===null&&!V.finished&&!V.writing}function Oe(V,J){V._final(function(he){J.pendingcb--,he&&H(V,he),J.prefinished=!0,V.emit("prefinish"),X(V,J)})}function Me(V,J){!J.prefinished&&!J.finalCalled&&(typeof V._final=="function"&&!J.destroyed?(J.pendingcb++,J.finalCalled=!0,Ce.nextTick(Oe,V,J)):(J.prefinished=!0,V.emit("prefinish")))}function X(V,J){var he=ce(J);if(he&&(Me(V,J),J.pendingcb===0&&(J.finished=!0,V.emit("finish"),J.autoDestroy))){var ge=V._readableState;(!ge||ge.autoDestroy&&ge.endEmitted)&&V.destroy()}return he}function ne(V,J,he){J.ending=!0,X(V,J),he&&(J.finished?Ce.nextTick(he):V.once("finish",he)),J.ended=!0,V.writable=!1}function ue(V,J,he){var ge=V.entry;for(V.entry=null;ge;){var be=ge.callback;J.pendingcb--,be(he),ge=ge.next}J.corkedRequestsFree.next=V}return Object.defineProperty(G.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(J){this._writableState&&(this._writableState.destroyed=J)}}),G.prototype.destroy=x.destroy,G.prototype._undestroy=x.undestroy,G.prototype._destroy=function(V,J){J(V)},wu}var Su,qf;function us(){if(qf)return Su;qf=1;var r=Object.keys||function(b){var y=[];for(var A in b)y.push(A);return y};Su=h;var t=fg(),n=hg();Sn()(h,t);for(var s=r(n.prototype),a=0;a<s.length;a++){var c=s[a];h.prototype[c]||(h.prototype[c]=n.prototype[c])}function h(b){if(!(this instanceof h))return new h(b);t.call(this,b),n.call(this,b),this.allowHalfOpen=!0,b&&(b.readable===!1&&(this.readable=!1),b.writable===!1&&(this.writable=!1),b.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",p)))}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function p(){this._writableState.ended||Ce.nextTick(x,this)}function x(b){b.end()}return Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(y){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=y,this._writableState.destroyed=y)}}),Su}var Ru={},ll={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Kf;function Vv(){return Kf||(Kf=1,function(r,t){var n=Kl,s=n.Buffer;function a(h,p){for(var x in h)p[x]=h[x]}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?r.exports=n:(a(n,t),t.Buffer=c);function c(h,p,x){return s(h,p,x)}c.prototype=Object.create(s.prototype),a(s,c),c.from=function(h,p,x){if(typeof h=="number")throw new TypeError("Argument must not be a number");return s(h,p,x)},c.alloc=function(h,p,x){if(typeof h!="number")throw new TypeError("Argument must be a number");var b=s(h);return p!==void 0?typeof x=="string"?b.fill(p,x):b.fill(p):b.fill(0),b},c.allocUnsafe=function(h){if(typeof h!="number")throw new TypeError("Argument must be a number");return s(h)},c.allocUnsafeSlow=function(h){if(typeof h!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(h)}}(ll,ll.exports)),ll.exports}var Yf;function Xf(){if(Yf)return Ru;Yf=1;var r=Vv().Buffer,t=r.isEncoding||function(w){switch(w=""+w,w&&w.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(w){if(!w)return"utf8";for(var C;;)switch(w){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return w;default:if(C)return;w=(""+w).toLowerCase(),C=!0}}function s(w){var C=n(w);if(typeof C!="string"&&(r.isEncoding===t||!t(w)))throw new Error("Unknown encoding: "+w);return C||w}Ru.StringDecoder=a;function a(w){this.encoding=s(w);var C;switch(this.encoding){case"utf16le":this.text=A,this.end=d,C=4;break;case"utf8":this.fillLast=x,C=4;break;case"base64":this.text=S,this.end=R,C=3;break;default:this.write=M,this.end=T;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(C)}a.prototype.write=function(w){if(w.length===0)return"";var C,O;if(this.lastNeed){if(C=this.fillLast(w),C===void 0)return"";O=this.lastNeed,this.lastNeed=0}else O=0;return O<w.length?C?C+this.text(w,O):this.text(w,O):C||""},a.prototype.end=y,a.prototype.text=b,a.prototype.fillLast=function(w){if(this.lastNeed<=w.length)return w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,w.length),this.lastNeed-=w.length};function c(w){return w<=127?0:w>>5===6?2:w>>4===14?3:w>>3===30?4:w>>6===2?-1:-2}function h(w,C,O){var H=C.length-1;if(H<O)return 0;var F=c(C[H]);return F>=0?(F>0&&(w.lastNeed=F-1),F):--H<O||F===-2?0:(F=c(C[H]),F>=0?(F>0&&(w.lastNeed=F-2),F):--H<O||F===-2?0:(F=c(C[H]),F>=0?(F>0&&(F===2?F=0:w.lastNeed=F-3),F):0))}function p(w,C,O){if((C[0]&192)!==128)return w.lastNeed=0,"�";if(w.lastNeed>1&&C.length>1){if((C[1]&192)!==128)return w.lastNeed=1,"�";if(w.lastNeed>2&&C.length>2&&(C[2]&192)!==128)return w.lastNeed=2,"�"}}function x(w){var C=this.lastTotal-this.lastNeed,O=p(this,w);if(O!==void 0)return O;if(this.lastNeed<=w.length)return w.copy(this.lastChar,C,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);w.copy(this.lastChar,C,0,w.length),this.lastNeed-=w.length}function b(w,C){var O=h(this,w,C);if(!this.lastNeed)return w.toString("utf8",C);this.lastTotal=O;var H=w.length-(O-this.lastNeed);return w.copy(this.lastChar,0,H),w.toString("utf8",C,H)}function y(w){var C=w&&w.length?this.write(w):"";return this.lastNeed?C+"�":C}function A(w,C){if((w.length-C)%2===0){var O=w.toString("utf16le",C);if(O){var H=O.charCodeAt(O.length-1);if(H>=55296&&H<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1],O.slice(0,-1)}return O}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=w[w.length-1],w.toString("utf16le",C,w.length-1)}function d(w){var C=w&&w.length?this.write(w):"";if(this.lastNeed){var O=this.lastTotal-this.lastNeed;return C+this.lastChar.toString("utf16le",0,O)}return C}function S(w,C){var O=(w.length-C)%3;return O===0?w.toString("base64",C):(this.lastNeed=3-O,this.lastTotal=3,O===1?this.lastChar[0]=w[w.length-1]:(this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1]),w.toString("base64",C,w.length-O))}function R(w){var C=w&&w.length?this.write(w):"";return this.lastNeed?C+this.lastChar.toString("base64",0,3-this.lastNeed):C}function M(w){return w.toString(this.encoding)}function T(w){return w&&w.length?this.write(w):""}return Ru}var Tu,Zf;function mh(){if(Zf)return Tu;Zf=1;var r=hs().codes.ERR_STREAM_PREMATURE_CLOSE;function t(c){var h=!1;return function(){if(!h){h=!0;for(var p=arguments.length,x=new Array(p),b=0;b<p;b++)x[b]=arguments[b];c.apply(this,x)}}}function n(){}function s(c){return c.setHeader&&typeof c.abort=="function"}function a(c,h,p){if(typeof h=="function")return a(c,null,h);h||(h={}),p=t(p||n);var x=h.readable||h.readable!==!1&&c.readable,b=h.writable||h.writable!==!1&&c.writable,y=function(){c.writable||d()},A=c._writableState&&c._writableState.finished,d=function(){b=!1,A=!0,x||p.call(c)},S=c._readableState&&c._readableState.endEmitted,R=function(){x=!1,S=!0,b||p.call(c)},M=function(O){p.call(c,O)},T=function(){var O;if(x&&!S)return(!c._readableState||!c._readableState.ended)&&(O=new r),p.call(c,O);if(b&&!A)return(!c._writableState||!c._writableState.ended)&&(O=new r),p.call(c,O)},w=function(){c.req.on("finish",d)};return s(c)?(c.on("complete",d),c.on("abort",T),c.req?w():c.on("request",w)):b&&!c._writableState&&(c.on("end",y),c.on("close",y)),c.on("end",R),c.on("finish",d),h.error!==!1&&c.on("error",M),c.on("close",T),function(){c.removeListener("complete",d),c.removeListener("abort",T),c.removeListener("request",w),c.req&&c.req.removeListener("finish",d),c.removeListener("end",y),c.removeListener("close",y),c.removeListener("finish",d),c.removeListener("end",R),c.removeListener("error",M),c.removeListener("close",T)}}return Tu=a,Tu}var Au,Jf;function qv(){if(Jf)return Au;Jf=1;var r;function t(O,H,F){return H=n(H),H in O?Object.defineProperty(O,H,{value:F,enumerable:!0,configurable:!0,writable:!0}):O[H]=F,O}function n(O){var H=s(O,"string");return typeof H=="symbol"?H:String(H)}function s(O,H){if(typeof O!="object"||O===null)return O;var F=O[Symbol.toPrimitive];if(F!==void 0){var q=F.call(O,H||"default");if(typeof q!="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(H==="string"?String:Number)(O)}var a=mh(),c=Symbol("lastResolve"),h=Symbol("lastReject"),p=Symbol("error"),x=Symbol("ended"),b=Symbol("lastPromise"),y=Symbol("handlePromise"),A=Symbol("stream");function d(O,H){return{value:O,done:H}}function S(O){var H=O[c];if(H!==null){var F=O[A].read();F!==null&&(O[b]=null,O[c]=null,O[h]=null,H(d(F,!1)))}}function R(O){Ce.nextTick(S,O)}function M(O,H){return function(F,q){O.then(function(){if(H[x]){F(d(void 0,!0));return}H[y](F,q)},q)}}var T=Object.getPrototypeOf(function(){}),w=Object.setPrototypeOf((r={get stream(){return this[A]},next:function(){var H=this,F=this[p];if(F!==null)return Promise.reject(F);if(this[x])return Promise.resolve(d(void 0,!0));if(this[A].destroyed)return new Promise(function($,K){Ce.nextTick(function(){H[p]?K(H[p]):$(d(void 0,!0))})});var q=this[b],ie;if(q)ie=new Promise(M(q,this));else{var G=this[A].read();if(G!==null)return Promise.resolve(d(G,!1));ie=new Promise(this[y])}return this[b]=ie,ie}},t(r,Symbol.asyncIterator,function(){return this}),t(r,"return",function(){var H=this;return new Promise(function(F,q){H[A].destroy(null,function(ie){if(ie){q(ie);return}F(d(void 0,!0))})})}),r),T),C=function(H){var F,q=Object.create(w,(F={},t(F,A,{value:H,writable:!0}),t(F,c,{value:null,writable:!0}),t(F,h,{value:null,writable:!0}),t(F,p,{value:null,writable:!0}),t(F,x,{value:H._readableState.endEmitted,writable:!0}),t(F,y,{value:function(G,$){var K=q[A].read();K?(q[b]=null,q[c]=null,q[h]=null,G(d(K,!1))):(q[c]=G,q[h]=$)},writable:!0}),F));return q[b]=null,a(H,function(ie){if(ie&&ie.code!=="ERR_STREAM_PREMATURE_CLOSE"){var G=q[h];G!==null&&(q[b]=null,q[c]=null,q[h]=null,G(ie)),q[p]=ie;return}var $=q[c];$!==null&&(q[b]=null,q[c]=null,q[h]=null,$(d(void 0,!0))),q[x]=!0}),H.on("readable",R.bind(null,q)),q};return Au=C,Au}var bu,Qf;function Kv(){return Qf||(Qf=1,bu=function(){throw new Error("Readable.from is not available in the browser")}),bu}var Cu,ed;function fg(){if(ed)return Cu;ed=1,Cu=$;var r;$.ReadableState=G,Bi.EventEmitter;var t=function(U,me){return U.listeners(me).length},n=ag(),s=Kl.Buffer,a=(typeof Gt<"u"?Gt:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function c(N){return s.from(N)}function h(N){return s.isBuffer(N)||N instanceof a}var p=cr(),x;p&&p.debuglog?x=p.debuglog("stream"):x=function(){};var b=$v(),y=ug(),A=cg(),d=A.getHighWaterMark,S=hs().codes,R=S.ERR_INVALID_ARG_TYPE,M=S.ERR_STREAM_PUSH_AFTER_EOF,T=S.ERR_METHOD_NOT_IMPLEMENTED,w=S.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,C,O,H;Sn()($,n);var F=y.errorOrDestroy,q=["error","close","destroy","pause","resume"];function ie(N,U,me){if(typeof N.prependListener=="function")return N.prependListener(U,me);!N._events||!N._events[U]?N.on(U,me):Array.isArray(N._events[U])?N._events[U].unshift(me):N._events[U]=[me,N._events[U]]}function G(N,U,me){r=r||us(),N=N||{},typeof me!="boolean"&&(me=U instanceof r),this.objectMode=!!N.objectMode,me&&(this.objectMode=this.objectMode||!!N.readableObjectMode),this.highWaterMark=d(this,N,"readableHighWaterMark",me),this.buffer=new b,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=N.emitClose!==!1,this.autoDestroy=!!N.autoDestroy,this.destroyed=!1,this.defaultEncoding=N.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,N.encoding&&(C||(C=Xf().StringDecoder),this.decoder=new C(N.encoding),this.encoding=N.encoding)}function $(N){if(r=r||us(),!(this instanceof $))return new $(N);var U=this instanceof r;this._readableState=new G(N,this,U),this.readable=!0,N&&(typeof N.read=="function"&&(this._read=N.read),typeof N.destroy=="function"&&(this._destroy=N.destroy)),n.call(this)}Object.defineProperty($.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(U){this._readableState&&(this._readableState.destroyed=U)}}),$.prototype.destroy=y.destroy,$.prototype._undestroy=y.undestroy,$.prototype._destroy=function(N,U){U(N)},$.prototype.push=function(N,U){var me=this._readableState,_e;return me.objectMode?_e=!0:typeof N=="string"&&(U=U||me.defaultEncoding,U!==me.encoding&&(N=s.from(N,U),U=""),_e=!0),K(this,N,U,!1,_e)},$.prototype.unshift=function(N){return K(this,N,null,!0,!1)};function K(N,U,me,_e,Se){x("readableAddChunk",U);var Pe=N._readableState;if(U===null)Pe.reading=!1,we(N,Pe);else{var je;if(Se||(je=Q(Pe,U)),je)F(N,je);else if(Pe.objectMode||U&&U.length>0)if(typeof U!="string"&&!Pe.objectMode&&Object.getPrototypeOf(U)!==s.prototype&&(U=c(U)),_e)Pe.endEmitted?F(N,new w):Y(N,Pe,U,!0);else if(Pe.ended)F(N,new M);else{if(Pe.destroyed)return!1;Pe.reading=!1,Pe.decoder&&!me?(U=Pe.decoder.write(U),Pe.objectMode||U.length!==0?Y(N,Pe,U,!1):Re(N,Pe)):Y(N,Pe,U,!1)}else _e||(Pe.reading=!1,Re(N,Pe))}return!Pe.ended&&(Pe.length<Pe.highWaterMark||Pe.length===0)}function Y(N,U,me,_e){U.flowing&&U.length===0&&!U.sync?(U.awaitDrain=0,N.emit("data",me)):(U.length+=U.objectMode?1:me.length,_e?U.buffer.unshift(me):U.buffer.push(me),U.needReadable&&le(N)),Re(N,U)}function Q(N,U){var me;return!h(U)&&typeof U!="string"&&U!==void 0&&!N.objectMode&&(me=new R("chunk",["string","Buffer","Uint8Array"],U)),me}$.prototype.isPaused=function(){return this._readableState.flowing===!1},$.prototype.setEncoding=function(N){C||(C=Xf().StringDecoder);var U=new C(N);this._readableState.decoder=U,this._readableState.encoding=this._readableState.decoder.encoding;for(var me=this._readableState.buffer.head,_e="";me!==null;)_e+=U.write(me.data),me=me.next;return this._readableState.buffer.clear(),_e!==""&&this._readableState.buffer.push(_e),this._readableState.length=_e.length,this};var se=1073741824;function ae(N){return N>=se?N=se:(N--,N|=N>>>1,N|=N>>>2,N|=N>>>4,N|=N>>>8,N|=N>>>16,N++),N}function ve(N,U){return N<=0||U.length===0&&U.ended?0:U.objectMode?1:N!==N?U.flowing&&U.length?U.buffer.head.data.length:U.length:(N>U.highWaterMark&&(U.highWaterMark=ae(N)),N<=U.length?N:U.ended?U.length:(U.needReadable=!0,0))}$.prototype.read=function(N){x("read",N),N=parseInt(N,10);var U=this._readableState,me=N;if(N!==0&&(U.emittedReadable=!1),N===0&&U.needReadable&&((U.highWaterMark!==0?U.length>=U.highWaterMark:U.length>0)||U.ended))return x("read: emitReadable",U.length,U.ended),U.length===0&&U.ended?he(this):le(this),null;if(N=ve(N,U),N===0&&U.ended)return U.length===0&&he(this),null;var _e=U.needReadable;x("need readable",_e),(U.length===0||U.length-N<U.highWaterMark)&&(_e=!0,x("length less than watermark",_e)),U.ended||U.reading?(_e=!1,x("reading or ended",_e)):_e&&(x("do read"),U.reading=!0,U.sync=!0,U.length===0&&(U.needReadable=!0),this._read(U.highWaterMark),U.sync=!1,U.reading||(N=ve(me,U)));var Se;return N>0?Se=J(N,U):Se=null,Se===null?(U.needReadable=U.length<=U.highWaterMark,N=0):(U.length-=N,U.awaitDrain=0),U.length===0&&(U.ended||(U.needReadable=!0),me!==N&&U.ended&&he(this)),Se!==null&&this.emit("data",Se),Se};function we(N,U){if(x("onEofChunk"),!U.ended){if(U.decoder){var me=U.decoder.end();me&&me.length&&(U.buffer.push(me),U.length+=U.objectMode?1:me.length)}U.ended=!0,U.sync?le(N):(U.needReadable=!1,U.emittedReadable||(U.emittedReadable=!0,oe(N)))}}function le(N){var U=N._readableState;x("emitReadable",U.needReadable,U.emittedReadable),U.needReadable=!1,U.emittedReadable||(x("emitReadable",U.flowing),U.emittedReadable=!0,Ce.nextTick(oe,N))}function oe(N){var U=N._readableState;x("emitReadable_",U.destroyed,U.length,U.ended),!U.destroyed&&(U.length||U.ended)&&(N.emit("readable"),U.emittedReadable=!1),U.needReadable=!U.flowing&&!U.ended&&U.length<=U.highWaterMark,V(N)}function Re(N,U){U.readingMore||(U.readingMore=!0,Ce.nextTick(ce,N,U))}function ce(N,U){for(;!U.reading&&!U.ended&&(U.length<U.highWaterMark||U.flowing&&U.length===0);){var me=U.length;if(x("maybeReadMore read 0"),N.read(0),me===U.length)break}U.readingMore=!1}$.prototype._read=function(N){F(this,new T("_read()"))},$.prototype.pipe=function(N,U){var me=this,_e=this._readableState;switch(_e.pipesCount){case 0:_e.pipes=N;break;case 1:_e.pipes=[_e.pipes,N];break;default:_e.pipes.push(N);break}_e.pipesCount+=1,x("pipe count=%d opts=%j",_e.pipesCount,U);var Se=(!U||U.end!==!1)&&N!==Ce.stdout&&N!==Ce.stderr,Pe=Se?Qe:Lt;_e.endEmitted?Ce.nextTick(Pe):me.once("end",Pe),N.on("unpipe",je);function je(Wt,ht){x("onunpipe"),Wt===me&&ht&&ht.hasUnpiped===!1&&(ht.hasUnpiped=!0,wt())}function Qe(){x("onend"),N.end()}var pe=Oe(me);N.on("drain",pe);var gt=!1;function wt(){x("cleanup"),N.removeListener("close",Le),N.removeListener("finish",rt),N.removeListener("drain",pe),N.removeListener("error",fe),N.removeListener("unpipe",je),me.removeListener("end",Qe),me.removeListener("end",Lt),me.removeListener("data",He),gt=!0,_e.awaitDrain&&(!N._writableState||N._writableState.needDrain)&&pe()}me.on("data",He);function He(Wt){x("ondata");var ht=N.write(Wt);x("dest.write",ht),ht===!1&&((_e.pipesCount===1&&_e.pipes===N||_e.pipesCount>1&&be(_e.pipes,N)!==-1)&&!gt&&(x("false write response, pause",_e.awaitDrain),_e.awaitDrain++),me.pause())}function fe(Wt){x("onerror",Wt),Lt(),N.removeListener("error",fe),t(N,"error")===0&&F(N,Wt)}ie(N,"error",fe);function Le(){N.removeListener("finish",rt),Lt()}N.once("close",Le);function rt(){x("onfinish"),N.removeListener("close",Le),Lt()}N.once("finish",rt);function Lt(){x("unpipe"),me.unpipe(N)}return N.emit("pipe",me),_e.flowing||(x("pipe resume"),me.resume()),N};function Oe(N){return function(){var me=N._readableState;x("pipeOnDrain",me.awaitDrain),me.awaitDrain&&me.awaitDrain--,me.awaitDrain===0&&t(N,"data")&&(me.flowing=!0,V(N))}}$.prototype.unpipe=function(N){var U=this._readableState,me={hasUnpiped:!1};if(U.pipesCount===0)return this;if(U.pipesCount===1)return N&&N!==U.pipes?this:(N||(N=U.pipes),U.pipes=null,U.pipesCount=0,U.flowing=!1,N&&N.emit("unpipe",this,me),this);if(!N){var _e=U.pipes,Se=U.pipesCount;U.pipes=null,U.pipesCount=0,U.flowing=!1;for(var Pe=0;Pe<Se;Pe++)_e[Pe].emit("unpipe",this,{hasUnpiped:!1});return this}var je=be(U.pipes,N);return je===-1?this:(U.pipes.splice(je,1),U.pipesCount-=1,U.pipesCount===1&&(U.pipes=U.pipes[0]),N.emit("unpipe",this,me),this)},$.prototype.on=function(N,U){var me=n.prototype.on.call(this,N,U),_e=this._readableState;return N==="data"?(_e.readableListening=this.listenerCount("readable")>0,_e.flowing!==!1&&this.resume()):N==="readable"&&!_e.endEmitted&&!_e.readableListening&&(_e.readableListening=_e.needReadable=!0,_e.flowing=!1,_e.emittedReadable=!1,x("on readable",_e.length,_e.reading),_e.length?le(this):_e.reading||Ce.nextTick(X,this)),me},$.prototype.addListener=$.prototype.on,$.prototype.removeListener=function(N,U){var me=n.prototype.removeListener.call(this,N,U);return N==="readable"&&Ce.nextTick(Me,this),me},$.prototype.removeAllListeners=function(N){var U=n.prototype.removeAllListeners.apply(this,arguments);return(N==="readable"||N===void 0)&&Ce.nextTick(Me,this),U};function Me(N){var U=N._readableState;U.readableListening=N.listenerCount("readable")>0,U.resumeScheduled&&!U.paused?U.flowing=!0:N.listenerCount("data")>0&&N.resume()}function X(N){x("readable nexttick read 0"),N.read(0)}$.prototype.resume=function(){var N=this._readableState;return N.flowing||(x("resume"),N.flowing=!N.readableListening,ne(this,N)),N.paused=!1,this};function ne(N,U){U.resumeScheduled||(U.resumeScheduled=!0,Ce.nextTick(ue,N,U))}function ue(N,U){x("resume",U.reading),U.reading||N.read(0),U.resumeScheduled=!1,N.emit("resume"),V(N),U.flowing&&!U.reading&&N.read(0)}$.prototype.pause=function(){return x("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(x("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function V(N){var U=N._readableState;for(x("flow",U.flowing);U.flowing&&N.read()!==null;);}$.prototype.wrap=function(N){var U=this,me=this._readableState,_e=!1;N.on("end",function(){if(x("wrapped end"),me.decoder&&!me.ended){var je=me.decoder.end();je&&je.length&&U.push(je)}U.push(null)}),N.on("data",function(je){if(x("wrapped data"),me.decoder&&(je=me.decoder.write(je)),!(me.objectMode&&je==null)&&!(!me.objectMode&&(!je||!je.length))){var Qe=U.push(je);Qe||(_e=!0,N.pause())}});for(var Se in N)this[Se]===void 0&&typeof N[Se]=="function"&&(this[Se]=function(Qe){return function(){return N[Qe].apply(N,arguments)}}(Se));for(var Pe=0;Pe<q.length;Pe++)N.on(q[Pe],this.emit.bind(this,q[Pe]));return this._read=function(je){x("wrapped _read",je),_e&&(_e=!1,N.resume())},this},typeof Symbol=="function"&&($.prototype[Symbol.asyncIterator]=function(){return O===void 0&&(O=qv()),O(this)}),Object.defineProperty($.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty($.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty($.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(U){this._readableState&&(this._readableState.flowing=U)}}),$._fromList=J,Object.defineProperty($.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function J(N,U){if(U.length===0)return null;var me;return U.objectMode?me=U.buffer.shift():!N||N>=U.length?(U.decoder?me=U.buffer.join(""):U.buffer.length===1?me=U.buffer.first():me=U.buffer.concat(U.length),U.buffer.clear()):me=U.buffer.consume(N,U.decoder),me}function he(N){var U=N._readableState;x("endReadable",U.endEmitted),U.endEmitted||(U.ended=!0,Ce.nextTick(ge,U,N))}function ge(N,U){if(x("endReadableNT",N.endEmitted,N.length),!N.endEmitted&&N.length===0&&(N.endEmitted=!0,U.readable=!1,U.emit("end"),N.autoDestroy)){var me=U._writableState;(!me||me.autoDestroy&&me.finished)&&U.destroy()}}typeof Symbol=="function"&&($.from=function(N,U){return H===void 0&&(H=Kv()),H($,N,U)});function be(N,U){for(var me=0,_e=N.length;me<_e;me++)if(N[me]===U)return me;return-1}return Cu}var Ou,td;function dg(){if(td)return Ou;td=1,Ou=p;var r=hs().codes,t=r.ERR_METHOD_NOT_IMPLEMENTED,n=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,c=us();Sn()(p,c);function h(y,A){var d=this._transformState;d.transforming=!1;var S=d.writecb;if(S===null)return this.emit("error",new n);d.writechunk=null,d.writecb=null,A!=null&&this.push(A),S(y);var R=this._readableState;R.reading=!1,(R.needReadable||R.length<R.highWaterMark)&&this._read(R.highWaterMark)}function p(y){if(!(this instanceof p))return new p(y);c.call(this,y),this._transformState={afterTransform:h.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,y&&(typeof y.transform=="function"&&(this._transform=y.transform),typeof y.flush=="function"&&(this._flush=y.flush)),this.on("prefinish",x)}function x(){var y=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(A,d){b(y,A,d)}):b(this,null,null)}p.prototype.push=function(y,A){return this._transformState.needTransform=!1,c.prototype.push.call(this,y,A)},p.prototype._transform=function(y,A,d){d(new t("_transform()"))},p.prototype._write=function(y,A,d){var S=this._transformState;if(S.writecb=d,S.writechunk=y,S.writeencoding=A,!S.transforming){var R=this._readableState;(S.needTransform||R.needReadable||R.length<R.highWaterMark)&&this._read(R.highWaterMark)}},p.prototype._read=function(y){var A=this._transformState;A.writechunk!==null&&!A.transforming?(A.transforming=!0,this._transform(A.writechunk,A.writeencoding,A.afterTransform)):A.needTransform=!0},p.prototype._destroy=function(y,A){c.prototype._destroy.call(this,y,function(d){A(d)})};function b(y,A,d){if(A)return y.emit("error",A);if(d!=null&&y.push(d),y._writableState.length)throw new a;if(y._transformState.transforming)throw new s;return y.push(null)}return Ou}var _u,id;function Yv(){if(id)return _u;id=1,_u=t;var r=dg();Sn()(t,r);function t(n){if(!(this instanceof t))return new t(n);r.call(this,n)}return t.prototype._transform=function(n,s,a){a(null,n)},_u}var Iu,rd;function Xv(){if(rd)return Iu;rd=1;var r;function t(d){var S=!1;return function(){S||(S=!0,d.apply(void 0,arguments))}}var n=hs().codes,s=n.ERR_MISSING_ARGS,a=n.ERR_STREAM_DESTROYED;function c(d){if(d)throw d}function h(d){return d.setHeader&&typeof d.abort=="function"}function p(d,S,R,M){M=t(M);var T=!1;d.on("close",function(){T=!0}),r===void 0&&(r=mh()),r(d,{readable:S,writable:R},function(C){if(C)return M(C);T=!0,M()});var w=!1;return function(C){if(!T&&!w){if(w=!0,h(d))return d.abort();if(typeof d.destroy=="function")return d.destroy();M(C||new a("pipe"))}}}function x(d){d()}function b(d,S){return d.pipe(S)}function y(d){return!d.length||typeof d[d.length-1]!="function"?c:d.pop()}function A(){for(var d=arguments.length,S=new Array(d),R=0;R<d;R++)S[R]=arguments[R];var M=y(S);if(Array.isArray(S[0])&&(S=S[0]),S.length<2)throw new s("streams");var T,w=S.map(function(C,O){var H=O<S.length-1,F=O>0;return p(C,H,F,function(q){T||(T=q),q&&w.forEach(x),!H&&(w.forEach(x),M(T))})});return S.reduce(b)}return Iu=A,Iu}var Mu,nd;function fs(){if(nd)return Mu;nd=1,Mu=n;var r=Bi.EventEmitter,t=Sn();t(n,r),n.Readable=fg(),n.Writable=hg(),n.Duplex=us(),n.Transform=dg(),n.PassThrough=Yv(),n.finished=mh(),n.pipeline=Xv(),n.Stream=n;function n(){r.call(this)}return n.prototype.pipe=function(s,a){var c=this;function h(S){s.writable&&s.write(S)===!1&&c.pause&&c.pause()}c.on("data",h);function p(){c.readable&&c.resume&&c.resume()}s.on("drain",p),!s._isStdio&&(!a||a.end!==!1)&&(c.on("end",b),c.on("close",y));var x=!1;function b(){x||(x=!0,s.end())}function y(){x||(x=!0,typeof s.destroy=="function"&&s.destroy())}function A(S){if(d(),r.listenerCount(this,"error")===0)throw S}c.on("error",A),s.on("error",A);function d(){c.removeListener("data",h),s.removeListener("drain",p),c.removeListener("end",b),c.removeListener("close",y),c.removeListener("error",A),s.removeListener("error",A),c.removeListener("end",d),c.removeListener("close",d),s.removeListener("close",d)}return c.on("end",d),c.on("close",d),s.on("close",d),s.emit("pipe",c),s},Mu}var al={exports:{}},Du,sd;function Zv(){if(sd)return Du;sd=1;var r=1e3,t=r*60,n=t*60,s=n*24,a=s*7,c=s*365.25;Du=function(y,A){A=A||{};var d=typeof y;if(d==="string"&&y.length>0)return h(y);if(d==="number"&&isFinite(y))return A.long?x(y):p(y);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(y))};function h(y){if(y=String(y),!(y.length>100)){var A=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(y);if(A){var d=parseFloat(A[1]),S=(A[2]||"ms").toLowerCase();switch(S){case"years":case"year":case"yrs":case"yr":case"y":return d*c;case"weeks":case"week":case"w":return d*a;case"days":case"day":case"d":return d*s;case"hours":case"hour":case"hrs":case"hr":case"h":return d*n;case"minutes":case"minute":case"mins":case"min":case"m":return d*t;case"seconds":case"second":case"secs":case"sec":case"s":return d*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function p(y){var A=Math.abs(y);return A>=s?Math.round(y/s)+"d":A>=n?Math.round(y/n)+"h":A>=t?Math.round(y/t)+"m":A>=r?Math.round(y/r)+"s":y+"ms"}function x(y){var A=Math.abs(y);return A>=s?b(y,A,s,"day"):A>=n?b(y,A,n,"hour"):A>=t?b(y,A,t,"minute"):A>=r?b(y,A,r,"second"):y+" ms"}function b(y,A,d,S){var R=A>=d*1.5;return Math.round(y/d)+" "+S+(R?"s":"")}return Du}var Lu,od;function Jv(){if(od)return Lu;od=1;function r(t){s.debug=s,s.default=s,s.coerce=b,s.disable=h,s.enable=c,s.enabled=p,s.humanize=Zv(),s.destroy=y,Object.keys(t).forEach(A=>{s[A]=t[A]}),s.names=[],s.skips=[],s.formatters={};function n(A){let d=0;for(let S=0;S<A.length;S++)d=(d<<5)-d+A.charCodeAt(S),d|=0;return s.colors[Math.abs(d)%s.colors.length]}s.selectColor=n;function s(A){let d,S=null,R,M;function T(...w){if(!T.enabled)return;const C=T,O=Number(new Date),H=O-(d||O);C.diff=H,C.prev=d,C.curr=O,d=O,w[0]=s.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let F=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(ie,G)=>{if(ie==="%%")return"%";F++;const $=s.formatters[G];if(typeof $=="function"){const K=w[F];ie=$.call(C,K),w.splice(F,1),F--}return ie}),s.formatArgs.call(C,w),(C.log||s.log).apply(C,w)}return T.namespace=A,T.useColors=s.useColors(),T.color=s.selectColor(A),T.extend=a,T.destroy=s.destroy,Object.defineProperty(T,"enabled",{enumerable:!0,configurable:!1,get:()=>S!==null?S:(R!==s.namespaces&&(R=s.namespaces,M=s.enabled(A)),M),set:w=>{S=w}}),typeof s.init=="function"&&s.init(T),T}function a(A,d){const S=s(this.namespace+(typeof d>"u"?":":d)+A);return S.log=this.log,S}function c(A){s.save(A),s.namespaces=A,s.names=[],s.skips=[];let d;const S=(typeof A=="string"?A:"").split(/[\s,]+/),R=S.length;for(d=0;d<R;d++)S[d]&&(A=S[d].replace(/\*/g,".*?"),A[0]==="-"?s.skips.push(new RegExp("^"+A.slice(1)+"$")):s.names.push(new RegExp("^"+A+"$")))}function h(){const A=[...s.names.map(x),...s.skips.map(x).map(d=>"-"+d)].join(",");return s.enable(""),A}function p(A){if(A[A.length-1]==="*")return!0;let d,S;for(d=0,S=s.skips.length;d<S;d++)if(s.skips[d].test(A))return!1;for(d=0,S=s.names.length;d<S;d++)if(s.names[d].test(A))return!0;return!1}function x(A){return A.toString().substring(2,A.toString().length-2).replace(/\.\*\?$/,"*")}function b(A){return A instanceof Error?A.stack||A.message:A}function y(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}return Lu=r,Lu}var ld;function ds(){return ld||(ld=1,function(r,t){var n={};t.formatArgs=a,t.save=c,t.load=h,t.useColors=s,t.storage=p(),t.destroy=(()=>{let b=!1;return()=>{b||(b=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function s(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let b;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(b=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(b[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(b){if(b[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+b[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const y="color: "+this.color;b.splice(1,0,y,"color: inherit");let A=0,d=0;b[0].replace(/%[a-zA-Z%]/g,S=>{S!=="%%"&&(A++,S==="%c"&&(d=A))}),b.splice(d,0,y)}t.log=console.debug||console.log||(()=>{});function c(b){try{b?t.storage.setItem("debug",b):t.storage.removeItem("debug")}catch{}}function h(){let b;try{b=t.storage.getItem("debug")}catch{}return!b&&typeof Ce<"u"&&"env"in Ce&&(b=n.DEBUG),b}function p(){try{return localStorage}catch{}}r.exports=Jv()(t);const{formatters:x}=r.exports;x.j=function(b){try{return JSON.stringify(b)}catch(y){return"[UnexpectedJSONParseError]: "+y.message}}}(al,al.exports)),al.exports}var Pu,ad;function Qv(){if(ad)return Pu;ad=1;const r=fs(),t=cr(),n=ds()("serialport/stream"),s=Object.freeze([5,6,7,8]),a=Object.freeze([1,1.5,2]),c=Object.freeze(["none","even","mark","odd","space"]),h=Object.freeze(["xon","xoff","xany","rtscts"]),p=Object.freeze({autoOpen:!0,endOnClose:!1,baudRate:9600,dataBits:8,hupcl:!0,lock:!0,parity:"none",rtscts:!1,stopBits:1,xany:!1,xoff:!1,xon:!1,highWaterMark:64*1024}),x=Object.freeze({brk:!1,cts:!1,dtr:!0,dts:!1,rts:!0});function b(d){const S=At.allocUnsafe(d);return S.used=0,S}function y(d,S,R){if(!(this instanceof y))return new y(d,S,R);S instanceof Function&&(R=S,S={});const M={...p,...S};r.Duplex.call(this,{highWaterMark:M.highWaterMark});const T=M.binding||y.Binding;if(!T)throw new TypeError('"Bindings" is invalid pass it as `options.binding` or set it on `SerialPort.Binding`');if(!d)throw new TypeError(`"path" is not defined: ${d}`);if(M.baudrate)throw new TypeError('"baudrate" is an unknown option, did you mean "baudRate"?');if(typeof M.baudRate!="number")throw new TypeError(`"baudRate" must be a number: ${M.baudRate}`);if(s.indexOf(M.dataBits)===-1)throw new TypeError(`"databits" is invalid: ${M.dataBits}`);if(a.indexOf(M.stopBits)===-1)throw new TypeError(`"stopbits" is invalid: ${M.stopbits}`);if(c.indexOf(M.parity)===-1)throw new TypeError(`"parity" is invalid: ${M.parity}`);h.forEach(C=>{if(typeof M[C]!="boolean")throw new TypeError(`"${C}" is not boolean: ${M[C]}`)});const w=new T({bindingOptions:M.bindingOptions});Object.defineProperties(this,{binding:{enumerable:!0,value:w},path:{enumerable:!0,value:d},settings:{enumerable:!0,value:M}}),this.opening=!1,this.closing=!1,this._pool=b(this.settings.highWaterMark),this._kMinPoolSpace=128,this.settings.autoOpen&&this.open(R)}t.inherits(y,r.Duplex),Object.defineProperties(y.prototype,{isOpen:{enumerable:!0,get(){return this.binding.isOpen&&!this.closing}},baudRate:{enumerable:!0,get(){return this.settings.baudRate}}}),y.prototype._error=function(d,S){S?S.call(this,d):this.emit("error",d)},y.prototype._asyncError=function(d,S){Ce.nextTick(()=>this._error(d,S))},y.prototype.open=function(d){if(this.isOpen)return this._asyncError(new Error("Port is already open"),d);if(this.opening)return this._asyncError(new Error("Port is opening"),d);this.opening=!0,n("opening",`path: ${this.path}`),this.binding.open(this.path,this.settings).then(()=>{n("opened",`path: ${this.path}`),this.opening=!1,this.emit("open"),d&&d.call(this,null)},S=>{this.opening=!1,n("Binding #open had an error",S),this._error(S,d)})},y.prototype.update=function(d,S){if(typeof d!="object")throw TypeError('"options" is not an object');if(!this.isOpen)return n("update attempted, but port is not open"),this._asyncError(new Error("Port is not open"),S);const R={...p,...d};this.settings.baudRate=R.baudRate,n("update",`baudRate: ${R.baudRate}`),this.binding.update(this.settings).then(()=>{n("binding.update","finished"),S&&S.call(this,null)},M=>(n("binding.update","error",M),this._error(M,S)))};const A=y.prototype.write;return y.prototype.write=function(d,S,R){return Array.isArray(d)&&(d=At.from(d)),A.call(this,d,S,R)},y.prototype._write=function(d,S,R){if(!this.isOpen)return this.once("open",function(){this._write(d,S,R)});n("_write",`${d.length} bytes of data`),this.binding.write(d).then(()=>{n("binding.write","write finished"),R(null)},M=>{n("binding.write","error",M),M.canceled||this._disconnected(M),R(M)})},y.prototype._writev=function(d,S){n("_writev",`${d.length} chunks of data`);const R=d.map(M=>M.chunk);this._write(At.concat(R),null,S)},y.prototype._read=function(d){if(!this.isOpen){n("_read","queueing _read for after open"),this.once("open",()=>{this._read(d)});return}(!this._pool||this._pool.length-this._pool.used<this._kMinPoolSpace)&&(n("_read","discarding the read buffer pool because it is below kMinPoolSpace"),this._pool=b(this.settings.highWaterMark));const S=this._pool,R=Math.min(S.length-S.used,d),M=S.used;n("_read","reading",{start:M,toRead:R}),this.binding.read(S,M,R).then(({bytesRead:T})=>{if(n("binding.read","finished",{bytesRead:T}),T===0){n("binding.read","Zero bytes read closing readable stream"),this.push(null);return}S.used+=T,this.push(S.slice(M,M+T))},T=>{n("binding.read","error",T),T.canceled||this._disconnected(T),this._read(d)})},y.prototype._disconnected=function(d){if(!this.isOpen){n("disconnected aborted because already closed",d);return}n("disconnected",d),d.disconnected=!0,this.close(null,d)},y.prototype.close=function(d,S){if(S=S||null,!this.isOpen)return n("close attempted, but port is not open"),this._asyncError(new Error("Port is not open"),d);this.closing=!0,n("#close"),this.binding.close().then(()=>{this.closing=!1,n("binding.close","finished"),this.emit("close",S),this.settings.endOnClose&&this.emit("end"),d&&d.call(this,S)},R=>(this.closing=!1,n("binding.close","had an error",R),this._error(R,d)))},y.prototype.set=function(d,S){if(typeof d!="object")throw TypeError('"options" is not an object');if(!this.isOpen)return n("set attempted, but port is not open"),this._asyncError(new Error("Port is not open"),S);const R={...x,...d};n("#set",R),this.binding.set(R).then(()=>{n("binding.set","finished"),S&&S.call(this,null)},M=>(n("binding.set","had an error",M),this._error(M,S)))},y.prototype.get=function(d){if(!this.isOpen)return n("get attempted, but port is not open"),this._asyncError(new Error("Port is not open"),d);n("#get"),this.binding.get().then(S=>{n("binding.get","finished"),d&&d.call(this,null,S)},S=>(n("binding.get","had an error",S),this._error(S,d)))},y.prototype.flush=function(d){if(!this.isOpen)return n("flush attempted, but port is not open"),this._asyncError(new Error("Port is not open"),d);n("#flush"),this.binding.flush().then(()=>{n("binding.flush","finished"),d&&d.call(this,null)},S=>(n("binding.flush","had an error",S),this._error(S,d)))},y.prototype.drain=function(d){if(n("drain"),!this.isOpen)return n("drain queuing on port open"),this.once("open",()=>{this.drain(d)});this.binding.drain().then(()=>{n("binding.drain","finished"),d&&d.call(this,null)},S=>(n("binding.drain","had an error",S),this._error(S,d)))},y.list=async function(d){if(n(".list"),!y.Binding)throw new TypeError("No Binding set on `SerialPort.Binding`");if(d)throw new TypeError("SerialPort.list no longer takes a callback and only returns a promise");return y.Binding.list()},Pu=y,Pu}var eo={exports:{}};function ey(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ul={exports:{}},Nu,ud;function pg(){if(ud)return Nu;ud=1;function r(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function t(a,c){for(var h="",p=0,x=-1,b=0,y,A=0;A<=a.length;++A){if(A<a.length)y=a.charCodeAt(A);else{if(y===47)break;y=47}if(y===47){if(!(x===A-1||b===1))if(x!==A-1&&b===2){if(h.length<2||p!==2||h.charCodeAt(h.length-1)!==46||h.charCodeAt(h.length-2)!==46){if(h.length>2){var d=h.lastIndexOf("/");if(d!==h.length-1){d===-1?(h="",p=0):(h=h.slice(0,d),p=h.length-1-h.lastIndexOf("/")),x=A,b=0;continue}}else if(h.length===2||h.length===1){h="",p=0,x=A,b=0;continue}}c&&(h.length>0?h+="/..":h="..",p=2)}else h.length>0?h+="/"+a.slice(x+1,A):h=a.slice(x+1,A),p=A-x-1;x=A,b=0}else y===46&&b!==-1?++b:b=-1}return h}function n(a,c){var h=c.dir||c.root,p=c.base||(c.name||"")+(c.ext||"");return h?h===c.root?h+p:h+a+p:p}var s={resolve:function(){for(var c="",h=!1,p,x=arguments.length-1;x>=-1&&!h;x--){var b;x>=0?b=arguments[x]:(p===void 0&&(p=Ce.cwd()),b=p),r(b),b.length!==0&&(c=b+"/"+c,h=b.charCodeAt(0)===47)}return c=t(c,!h),h?c.length>0?"/"+c:"/":c.length>0?c:"."},normalize:function(c){if(r(c),c.length===0)return".";var h=c.charCodeAt(0)===47,p=c.charCodeAt(c.length-1)===47;return c=t(c,!h),c.length===0&&!h&&(c="."),c.length>0&&p&&(c+="/"),h?"/"+c:c},isAbsolute:function(c){return r(c),c.length>0&&c.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var c,h=0;h<arguments.length;++h){var p=arguments[h];r(p),p.length>0&&(c===void 0?c=p:c+="/"+p)}return c===void 0?".":s.normalize(c)},relative:function(c,h){if(r(c),r(h),c===h||(c=s.resolve(c),h=s.resolve(h),c===h))return"";for(var p=1;p<c.length&&c.charCodeAt(p)===47;++p);for(var x=c.length,b=x-p,y=1;y<h.length&&h.charCodeAt(y)===47;++y);for(var A=h.length,d=A-y,S=b<d?b:d,R=-1,M=0;M<=S;++M){if(M===S){if(d>S){if(h.charCodeAt(y+M)===47)return h.slice(y+M+1);if(M===0)return h.slice(y+M)}else b>S&&(c.charCodeAt(p+M)===47?R=M:M===0&&(R=0));break}var T=c.charCodeAt(p+M),w=h.charCodeAt(y+M);if(T!==w)break;T===47&&(R=M)}var C="";for(M=p+R+1;M<=x;++M)(M===x||c.charCodeAt(M)===47)&&(C.length===0?C+="..":C+="/..");return C.length>0?C+h.slice(y+R):(y+=R,h.charCodeAt(y)===47&&++y,h.slice(y))},_makeLong:function(c){return c},dirname:function(c){if(r(c),c.length===0)return".";for(var h=c.charCodeAt(0),p=h===47,x=-1,b=!0,y=c.length-1;y>=1;--y)if(h=c.charCodeAt(y),h===47){if(!b){x=y;break}}else b=!1;return x===-1?p?"/":".":p&&x===1?"//":c.slice(0,x)},basename:function(c,h){if(h!==void 0&&typeof h!="string")throw new TypeError('"ext" argument must be a string');r(c);var p=0,x=-1,b=!0,y;if(h!==void 0&&h.length>0&&h.length<=c.length){if(h.length===c.length&&h===c)return"";var A=h.length-1,d=-1;for(y=c.length-1;y>=0;--y){var S=c.charCodeAt(y);if(S===47){if(!b){p=y+1;break}}else d===-1&&(b=!1,d=y+1),A>=0&&(S===h.charCodeAt(A)?--A===-1&&(x=y):(A=-1,x=d))}return p===x?x=d:x===-1&&(x=c.length),c.slice(p,x)}else{for(y=c.length-1;y>=0;--y)if(c.charCodeAt(y)===47){if(!b){p=y+1;break}}else x===-1&&(b=!1,x=y+1);return x===-1?"":c.slice(p,x)}},extname:function(c){r(c);for(var h=-1,p=0,x=-1,b=!0,y=0,A=c.length-1;A>=0;--A){var d=c.charCodeAt(A);if(d===47){if(!b){p=A+1;break}continue}x===-1&&(b=!1,x=A+1),d===46?h===-1?h=A:y!==1&&(y=1):h!==-1&&(y=-1)}return h===-1||x===-1||y===0||y===1&&h===x-1&&h===p+1?"":c.slice(h,x)},format:function(c){if(c===null||typeof c!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof c);return n("/",c)},parse:function(c){r(c);var h={root:"",dir:"",base:"",ext:"",name:""};if(c.length===0)return h;var p=c.charCodeAt(0),x=p===47,b;x?(h.root="/",b=1):b=0;for(var y=-1,A=0,d=-1,S=!0,R=c.length-1,M=0;R>=b;--R){if(p=c.charCodeAt(R),p===47){if(!S){A=R+1;break}continue}d===-1&&(S=!1,d=R+1),p===46?y===-1?y=R:M!==1&&(M=1):y!==-1&&(M=-1)}return y===-1||d===-1||M===0||M===1&&y===d-1&&y===A+1?d!==-1&&(A===0&&x?h.base=h.name=c.slice(1,d):h.base=h.name=c.slice(A,d)):(A===0&&x?(h.name=c.slice(1,y),h.base=c.slice(1,d)):(h.name=c.slice(A,y),h.base=c.slice(A,d)),h.ext=c.slice(y,d)),A>0?h.dir=c.slice(0,A-1):x&&(h.dir="/"),h},sep:"/",delimiter:":",win32:null,posix:null};return s.posix=s,Nu=s,Nu}var Bu,cd;function ty(){if(cd)return Bu;cd=1;var r=pg().sep||"/";Bu=t;function t(n){if(typeof n!="string"||n.length<=7||n.substring(0,7)!="file://")throw new TypeError("must pass in a file:// URI to convert to a file path");var s=decodeURI(n.substring(7)),a=s.indexOf("/"),c=s.substring(0,a),h=s.substring(a+1);return c=="localhost"&&(c=""),c&&(c=r+r+c),h=h.replace(/^(.+)\|/,"$1:"),r=="\\"&&(h=h.replace(/\//g,"\\")),/^.+\:/.test(h)||(h=r+h),c+h}return Bu}var hd;function Yl(){return hd||(hd=1,function(r,t){var n={},s=So,a=pg(),c=ty(),h=a.join,p=a.dirname,x=s.accessSync&&function(A){try{s.accessSync(A)}catch{return!1}return!0}||s.existsSync||a.existsSync,b={arrow:n.NODE_BINDINGS_ARROW||" → ",compiled:n.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:Ce.platform,arch:Ce.arch,nodePreGyp:"node-v"+Ce.versions.modules+"-"+Ce.platform+"-"+Ce.arch,version:Ce.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","addon-build","release","install-root","bindings"],["module_root","addon-build","debug","install-root","bindings"],["module_root","addon-build","default","install-root","bindings"],["module_root","lib","binding","nodePreGyp","bindings"]]};function y(A){typeof A=="string"?A={bindings:A}:A||(A={}),Object.keys(b).map(function(O){O in A||(A[O]=b[O])}),A.module_root||(A.module_root=t.getRoot(t.getFileName())),a.extname(A.bindings)!=".node"&&(A.bindings+=".node");for(var d=typeof __webpack_require__=="function"?__non_webpack_require__:ey,S=[],R=0,M=A.try.length,T,w,C;R<M;R++){T=h.apply(null,A.try[R].map(function(O){return A[O]||O})),S.push(T);try{return w=A.path?d.resolve(T):d(T),A.path||(w.path=T),w}catch(O){if(O.code!=="MODULE_NOT_FOUND"&&O.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(O.message))throw O}}throw C=new Error(`Could not locate the bindings file. Tried:
`+S.map(function(O){return A.arrow+O}).join(`
`)),C.tries=S,C}r.exports=t=y,t.getFileName=function(d){var S=Error.prepareStackTrace,R=Error.stackTraceLimit,M={},T;Error.stackTraceLimit=10,Error.prepareStackTrace=function(C,O){for(var H=0,F=O.length;H<F;H++)if(T=O[H].getFileName(),T!==__filename)if(d){if(T!==d)return}else return},Error.captureStackTrace(M),M.stack,Error.prepareStackTrace=S,Error.stackTraceLimit=R;var w="file://";return T.indexOf(w)===0&&(T=c(T)),T},t.getRoot=function(d){for(var S=p(d),R;;){if(S==="."&&(S=Ce.cwd()),x(h(S,"package.json"))||x(h(S,"node_modules")))return S;if(R===S)throw new Error('Could not find module root given file: "'+d+'". Do you have a `package.json` file? ');R=S,S=h(S,"..")}}}(ul,ul.exports)),ul.exports}var Fu,fd;function vh(){if(fd)return Fu;fd=1;const r=ds()("serialport/binding-abstract");class t{static async list(){r("list")}constructor(s={}){if(typeof s!="object")throw new TypeError('"options" is not an object')}async open(s,a){if(!s)throw new TypeError('"path" is not a valid port');if(typeof a!="object")throw new TypeError('"options" is not an object');if(r("open"),this.isOpen)throw new Error("Already open")}async close(){if(r("close"),!this.isOpen)throw new Error("Port is not open")}async read(s,a,c){if(!At.isBuffer(s))throw new TypeError('"buffer" is not a Buffer');if(typeof a!="number"||isNaN(c))throw new TypeError(`"offset" is not an integer got "${isNaN(c)?"NaN":typeof a}"`);if(typeof c!="number"||isNaN(c))throw new TypeError(`"length" is not an integer got "${isNaN(c)?"NaN":typeof c}"`);if(r("read"),s.length<a+c)throw new Error("buffer is too small");if(!this.isOpen)throw new Error("Port is not open")}async write(s){if(!At.isBuffer(s))throw new TypeError('"buffer" is not a Buffer');if(r("write",s.length,"bytes"),!this.isOpen)throw r("write","error port is not open"),new Error("Port is not open")}async update(s){if(typeof s!="object")throw TypeError('"options" is not an object');if(typeof s.baudRate!="number")throw new TypeError('"options.baudRate" is not a number');if(r("update"),!this.isOpen)throw new Error("Port is not open")}async set(s){if(typeof s!="object")throw new TypeError('"options" is not an object');if(r("set"),!this.isOpen)throw new Error("Port is not open")}async get(){if(r("get"),!this.isOpen)throw new Error("Port is not open")}async getBaudRate(){if(r("getbaudRate"),!this.isOpen)throw new Error("Port is not open")}async flush(){if(r("flush"),!this.isOpen)throw new Error("Port is not open")}async drain(){if(r("drain"),!this.isOpen)throw new Error("Port is not open")}}return Fu=t,Fu}var Gu,dd;function iy(){if(dd)return Gu;dd=1;const r=[/USB\\(?:.+)\\(.+)/,/FTDIBUS\\(?:.+)\+(.+?)A?\\.+/];return Gu=function(t){if(!t)return null;for(const n of r){const s=t.match(n);if(s)return s[1]}return null},Gu}var Wu,pd;function yh(){if(pd)return Wu;pd=1;let r=!1;return Wu={wrapWithHiddenComName:async n=>(await n).map(a=>{const c={...a};return Object.defineProperties(c,{comName:{get(){return r||(r=!0,console.warn('"PortInfo.comName" has been deprecated. You should now use "PortInfo.path". The property will be removed in the next major release.')),c.path},enumerable:!1}})})},Wu}var Uu,gd;function ry(){if(gd)return Uu;gd=1;const r=Yl()("bindings.node"),t=vh(),{promisify:n}=cr(),s=iy(),a=n(r.list),c=n(r.open),h=n(r.close),p=n(r.read),x=n(r.write),b=n(r.update),y=n(r.set),A=n(r.get),d=n(r.getBaudRate),S=n(r.drain),R=n(r.flush),{wrapWithHiddenComName:M}=yh();class T extends t{static async list(){const C=await a();return M(C.map(O=>{if(O.pnpId&&!O.serialNumber){const H=s(O.pnpId);if(H)return{...O,serialNumber:H}}return O}))}constructor(C={}){super(C),this.bindingOptions={...C.bindingOptions},this.fd=null,this.writeOperation=null}get isOpen(){return this.fd!==null}async open(C,O){await super.open(C,O),this.openOptions={...this.bindingOptions,...O};const H=await c(C,this.openOptions);this.fd=H}async close(){await super.close();const C=this.fd;return this.fd=null,h(C)}async read(C,O,H){await super.read(C,O,H);try{return{bytesRead:await p(this.fd,C,O,H),buffer:C}}catch(F){throw this.isOpen||(F.canceled=!0),F}}async write(C){return this.writeOperation=super.write(C).then(async()=>{C.length!==0&&(await x(this.fd,C),this.writeOperation=null)}),this.writeOperation}async update(C){return await super.update(C),b(this.fd,C)}async set(C){return await super.set(C),y(this.fd,C)}async get(){return await super.get(),A(this.fd)}async getBaudRate(){return await super.get(),d(this.fd)}async drain(){return await super.drain(),await this.writeOperation,S(this.fd)}async flush(){return await super.flush(),R(this.fd)}}return Uu=T,Uu}var ku,xd;function gg(){if(xd)return ku;xd=1;const t=ds()("serialport/bindings/poller"),n=Bi,s=Yl()("bindings.node").Poller,a={UV_READABLE:1,UV_WRITABLE:2,UV_DISCONNECT:4};function c(p,x){if(p){t("error",p),this.emit("readable",p),this.emit("writable",p),this.emit("disconnect",p);return}x&a.UV_READABLE&&(t('received "readable"'),this.emit("readable",null)),x&a.UV_WRITABLE&&(t('received "writable"'),this.emit("writable",null)),x&a.UV_DISCONNECT&&(t('received "disconnect"'),this.emit("disconnect",null))}class h extends n{constructor(x,b=s){t("Creating poller"),super(),this.poller=new b(x,c.bind(this))}once(x,b){switch(x){case"readable":this.poll(a.UV_READABLE);break;case"writable":this.poll(a.UV_WRITABLE);break;case"disconnect":this.poll(a.UV_DISCONNECT);break}return super.once(x,b)}poll(x){x=x||0,x&a.UV_READABLE&&t('Polling for "readable"'),x&a.UV_WRITABLE&&t('Polling for "writable"'),x&a.UV_DISCONNECT&&t('Polling for "disconnect"'),this.poller.poll(x)}stop(){t("Stopping poller"),this.poller.stop(),this.emitCanceled()}destroy(){t("Destroying poller"),this.poller.destroy(),this.emitCanceled()}emitCanceled(){const x=new Error("Canceled");x.canceled=!0,this.emit("readable",x),this.emit("writable",x),this.emit("disconnect",x)}}return h.EVENTS=a,ku=h,ku}var Hu,md;function xg(){if(md)return Hu;md=1;const r=So,n=ds()("serialport/bindings/unixRead"),{promisify:s}=cr(),a=s(r.read),c=p=>new Promise((x,b)=>{p.poller.once("readable",y=>y?b(y):x())}),h=async({binding:p,buffer:x,offset:b,length:y,fsReadAsync:A=a})=>{if(n("Starting read"),!p.isOpen){const d=new Error("Port is not open");throw d.canceled=!0,d}try{const{bytesRead:d}=await A(p.fd,x,b,y,null);return d===0?h({binding:p,buffer:x,offset:b,length:y,fsReadAsync:A}):(n("Finished read",d,"bytes"),{bytesRead:d,buffer:x})}catch(d){if(n("read error",d),d.code==="EAGAIN"||d.code==="EWOULDBLOCK"||d.code==="EINTR"){if(!p.isOpen){const R=new Error("Port is not open");throw R.canceled=!0,R}return n("waiting for readable because of code:",d.code),await c(p),h({binding:p,buffer:x,offset:b,length:y,fsReadAsync:A})}throw(d.code==="EBADF"||d.code==="ENXIO"||d.code==="UNKNOWN"||d.errno===-1)&&(d.canceled=!0,n("disconnecting",d)),d}};return Hu=h,Hu}var zu,vd;function mg(){if(vd)return zu;vd=1;const r=So,n=ds()("serialport/bindings/unixWrite"),{promisify:s}=cr(),a=s(r.write),c=p=>new Promise((x,b)=>{p.poller.once("writable",y=>y?b(y):x())}),h=async({binding:p,buffer:x,offset:b=0,fsWriteAsync:y=a})=>{const A=x.length-b;if(n("Starting write",x.length,"bytes offset",b,"bytesToWrite",A),!p.isOpen)throw new Error("Port is not open");try{const{bytesWritten:d}=await y(p.fd,x,b,A);if(n("write returned: wrote",d,"bytes"),d+b<x.length){if(!p.isOpen)throw new Error("Port is not open");return h({binding:p,buffer:x,offset:d+b,fsWriteAsync:y})}n("Finished writing",d+b,"bytes")}catch(d){if(n("write errored",d),d.code==="EAGAIN"||d.code==="EWOULDBLOCK"||d.code==="EINTR"){if(!p.isOpen)throw new Error("Port is not open");return n("waiting for writable because of code:",d.code),await c(p),h({binding:p,buffer:x,offset:b,fsWriteAsync:y})}throw(d.code==="EBADF"||d.code==="ENXIO"||d.code==="UNKNOWN"||d.errno===-1)&&(d.disconnect=!0,n("disconnecting",d)),n("error",d),d}};return zu=h,zu}var $u,yd;function ny(){if(yd)return $u;yd=1;const{promisify:r}=cr(),t=Yl()("bindings.node"),n=vh(),s=gg(),a=xg(),c=mg(),{wrapWithHiddenComName:h}=yh(),p=Object.freeze({vmin:1,vtime:0}),x=r(t.list),b=r(t.open),y=r(t.close),A=r(t.update),d=r(t.set),S=r(t.get),R=r(t.getBaudRate),M=r(t.drain),T=r(t.flush);class w extends n{static list(){return h(x())}constructor(O={}){super(O),this.bindingOptions={...p,...O.bindingOptions},this.fd=null,this.writeOperation=null}get isOpen(){return this.fd!==null}async open(O,H){await super.open(O,H),this.openOptions={...this.bindingOptions,...H};const F=await b(O,this.openOptions);this.fd=F,this.poller=new s(F)}async close(){await super.close();const O=this.fd;return this.poller.stop(),this.poller.destroy(),this.poller=null,this.openOptions=null,this.fd=null,y(O)}async read(O,H,F){return await super.read(O,H,F),a({binding:this,buffer:O,offset:H,length:F})}async write(O){return this.writeOperation=super.write(O).then(async()=>{O.length!==0&&(await c({binding:this,buffer:O}),this.writeOperation=null)}),this.writeOperation}async update(O){return await super.update(O),A(this.fd,O)}async set(O){return await super.set(O),d(this.fd,O)}async get(){return await super.get(),S(this.fd)}async getBaudRate(){return await super.get(),R(this.fd)}async drain(){return await super.drain(),await this.writeOperation,M(this.fd)}async flush(){return await super.flush(),T(this.fd)}}return $u=w,$u}var ju,Ed;function vg(){if(Ed)return ju;Ed=1;const{Transform:r}=fs();class t extends r{constructor(s={}){if(super(s),s.delimiter===void 0)throw new TypeError('"delimiter" is not a bufferable object');if(s.delimiter.length===0)throw new TypeError('"delimiter" has a 0 or undefined length');this.includeDelimiter=s.includeDelimiter!==void 0?s.includeDelimiter:!1,this.delimiter=At.from(s.delimiter),this.buffer=At.alloc(0)}_transform(s,a,c){let h=At.concat([this.buffer,s]),p;for(;(p=h.indexOf(this.delimiter))!==-1;)this.push(h.slice(0,p+(this.includeDelimiter?this.delimiter.length:0))),h=h.slice(p+this.delimiter.length);this.buffer=h,c()}_flush(s){this.push(this.buffer),this.buffer=At.alloc(0),s()}}return ju=t,ju}var Vu,wd;function yg(){if(wd)return Vu;wd=1;const r=vg();class t extends r{constructor(s){const a={delimiter:At.from(`
`,"utf8"),encoding:"utf8",...s};typeof a.delimiter=="string"&&(a.delimiter=At.from(a.delimiter,a.encoding)),super(a)}}return Vu=t,Vu}var qu,Sd;function sy(){if(Sd)return qu;Sd=1;const r=So,t=yg();function n(p){return/(tty(S|WCH|ACM|USB|AMA|MFD|O|XRUSB)|rfcomm)/.test(p)&&p}function s(p){return{DEVNAME:"path",ID_VENDOR_ENC:"manufacturer",ID_SERIAL_SHORT:"serialNumber",ID_VENDOR_ID:"vendorId",ID_MODEL_ID:"productId",DEVLINKS:"pnpId"}[p.toUpperCase()]}function a(p){return p.replace(/\\x([a-fA-F0-9]{2})/g,(x,b)=>String.fromCharCode(parseInt(b,16)))}function c(p,x){if(p==="pnpId"){const b=x.match(/\/by-id\/([^\s]+)/);return b&&b[1]||void 0}return p==="manufacturer"?a(x):/^0x/.test(x)?x.substr(2):x}function h(){return new Promise((p,x)=>{const b=[],y=r.spawn("udevadm",["info","-e"]),A=y.stdout.pipe(new t);y.on("close",R=>R&&x(new Error(`Error listing ports udevadm exited with error code: ${R}`))),y.on("error",x),A.on("error",x);let d={},S=!1;A.on("data",R=>{const M=R.slice(0,1),T=R.slice(3);if(M==="P"){d={manufacturer:void 0,serialNumber:void 0,pnpId:void 0,locationId:void 0,vendorId:void 0,productId:void 0},S=!1;return}if(!S){if(M==="N"){n(T)?b.push(d):S=!0;return}if(M==="E"){const w=T.match(/^(.+)=(.*)/);if(!w)return;const C=s(w[1]);if(!C)return;d[C]=c(C,w[2])}}}),A.on("finish",()=>p(b))})}return qu=h,qu}var Ku,Rd;function oy(){if(Rd)return Ku;Rd=1;const{promisify:r}=cr(),t=Yl()("bindings.node"),n=vh(),s=sy(),a=gg(),c=xg(),h=mg(),{wrapWithHiddenComName:p}=yh(),x=Object.freeze({vmin:1,vtime:0}),b=r(t.open),y=r(t.close),A=r(t.update),d=r(t.set),S=r(t.get),R=r(t.getBaudRate),M=r(t.drain),T=r(t.flush);class w extends n{static list(){return p(s())}constructor(O={}){super(O),this.bindingOptions={...x,...O.bindingOptions},this.fd=null,this.writeOperation=null}get isOpen(){return this.fd!==null}async open(O,H){await super.open(O,H),this.openOptions={...this.bindingOptions,...H};const F=await b(O,this.openOptions);this.fd=F,this.poller=new a(F)}async close(){await super.close();const O=this.fd;return this.poller.stop(),this.poller.destroy(),this.poller=null,this.openOptions=null,this.fd=null,y(O)}async read(O,H,F){return await super.read(O,H,F),c({binding:this,buffer:O,offset:H,length:F})}async write(O){return this.writeOperation=super.write(O).then(async()=>{O.length!==0&&(await h({binding:this,buffer:O}),this.writeOperation=null)}),this.writeOperation}async update(O){return await super.update(O),A(this.fd,O)}async set(O){return await super.set(O),d(this.fd,O)}async get(){return await super.get(),S(this.fd)}async getBaudRate(){return await super.get(),R(this.fd)}async drain(){return await super.drain(),await this.writeOperation,M(this.fd)}async flush(){return await super.flush(),T(this.fd)}}return Ku=w,Ku}var Td;function ly(){if(Td)return eo.exports;Td=1;const r=ds()("serialport/bindings");switch(Ce.platform){case"win32":r("loading WindowsBinding"),eo.exports=ry();break;case"darwin":r("loading DarwinBinding"),eo.exports=ny();break;default:r("loading LinuxBinding"),eo.exports=oy()}return eo.exports}var Yu,Ad;function ay(){if(Ad)return Yu;Ad=1;const{Transform:r}=fs();class t extends r{constructor(s={}){if(super(s),typeof s.length!="number")throw new TypeError('"length" is not a number');if(s.length<1)throw new TypeError('"length" is not greater than 0');this.length=s.length,this.position=0,this.buffer=At.alloc(this.length)}_transform(s,a,c){let h=0;for(;h<s.length;)this.buffer[this.position]=s[h],h++,this.position++,this.position===this.length&&(this.push(this.buffer),this.buffer=At.alloc(this.length),this.position=0);c()}_flush(s){this.push(this.buffer.slice(0,this.position)),this.buffer=At.alloc(this.length),s()}}return Yu=t,Yu}var Xu,bd;function uy(){if(bd)return Xu;bd=1;const{Transform:r}=fs();class t extends r{constructor(s=50){super(),this.array=[],this.cursor=0,this.lastByteFetchTime=0,this.maxDelayBetweenBytesMs=s}_transform(s,a,c){if(this.maxDelayBetweenBytesMs>0){const h=Date.now();h-this.lastByteFetchTime>this.maxDelayBetweenBytesMs&&(this.array=[],this.cursor=0),this.lastByteFetchTime=h}for(this.cursor+=s.length,Array.from(s).map(h=>this.array.push(h));this.cursor>1&&this.cursor>=this.array[1]+5;){const h=this.array[1]+5,p=At.from(this.array.slice(0,h));this.array=this.array.slice(p.length,this.array.length),this.cursor-=h,this.push(p)}c()}}return Xu=t,Xu}var Zu,Cd;function cy(){if(Cd)return Zu;Cd=1;const{Transform:r}=fs();class t extends r{constructor(s={}){if(s.delimiter===void 0)throw new TypeError('"delimiter" is not a bufferable object');if(s.delimiter.length===0)throw new TypeError('"delimiter" has a 0 or undefined length');super(s),this.delimiter=At.from(s.delimiter),this.readOffset=0,this.ready=!1}_transform(s,a,c){if(this.ready)return this.push(s),c();const h=this.delimiter;let p=0;for(;this.readOffset<h.length&&p<s.length;)h[this.readOffset]===s[p]?this.readOffset++:this.readOffset=0,p++;if(this.readOffset===h.length){this.ready=!0,this.emit("ready");const x=s.slice(p);x.length>0&&this.push(x)}c()}}return Zu=t,Zu}var Ju,Od;function hy(){if(Od)return Ju;Od=1;const{Transform:r}=fs();class t extends r{constructor(s){const a={encoding:"utf8",...s};if(a.regex===void 0)throw new TypeError('"options.regex" must be a regular expression pattern or object');a.regex instanceof RegExp||(a.regex=new RegExp(a.regex)),super(a),this.regex=a.regex,this.data=""}_transform(s,a,c){const p=(this.data+s).split(this.regex);this.data=p.pop(),p.forEach(x=>{this.push(x)}),c()}_flush(s){this.push(this.data),this.data="",s()}}return Ju=t,Ju}var Qu,_d;function fy(){return _d||(_d=1,Qu={ByteLength:ay(),CCTalk:uy(),Delimiter:vg(),Readline:yg(),Ready:cy(),Regex:hy()}),Qu}var ec,Id;function Eg(){if(Id)return ec;Id=1;const r=Qv(),t=ly(),n=fy();return r.Binding=t,r.parsers=n,ec=r,ec}var tc,Md;function wg(){return Md||(Md=1,tc={to7BitArray(r){let t=0,n=0;const s=[];for(let a of r)t===0?(s.push(a&127),t++,n=a>>7):(s.push(a<<t&127|n),t===6?(s.push(a>>1),t=0):(t++,n=a>>8-t));return t>0&&s.push(n),s},from7BitArray(r){const t=r.length*7>>3,n=[];for(let s=0;s<t;s++){const a=s<<3,c=a/7>>>0,h=a%7;n[s]=r[c]>>h|r[c+1]<<7-h&255}return n}}),tc}var ic,Dd;function dy(){if(Dd)return ic;Dd=1;const r=wg(),t={crc8(n){let s=0;for(let a of n)for(let c=8;c;c--){const h=(s^a)&1;s>>=1,h&&(s^=140),a>>=1}return s},readDevices(n){const s=r.from7BitArray(n),a=[];for(let c=0;c<s.length;c+=8){const h=s.slice(c,c+8);if(h.length!==8)continue;t.crc8(h.slice(0,7))!==h[7]&&console.error("ROM invalid!"),a.push(h)}return a}};return ic=t,ic}var rc,Ld;function Sg(){if(Ld)return rc;Ld=1;var r={};const t=Bi,n=wg(),s=dy(),a=new Map,c=105,h=106,p=224,x=107,b=108,y=144,A=247,d=111,S=120,R=119,M=118,T=24,w=65,C=115,O=16,H=67,F=8,q=1,ie=69,G=68,$=66,K=64,Y=60,Q=32,se=244,ae=109,ve=110,we=117,le=121,oe=192,Re=208,ce=249,Oe=122,Me=112,X=96,ne=16,ue=32,V=48,J=64,he=80,ge=96,be=112,N=240,U=114,me=98,_e=113,Se=255,Pe=128,je=Symbol("sendOneWireSearch"),Qe=Symbol("sendOneWireRequest"),pe={[ce](m){m.version.major=m.buffer[1],m.version.minor=m.buffer[2],m.emit("reportversion")},[p](m){const g=m.buffer[0]&15,I=m.buffer[1]|m.buffer[2]<<7;m.pins[m.analogPins[g]]&&(m.pins[m.analogPins[g]].value=I),m.emit(`analog-read-${g}`,I),m.emit("analog-read",{pin:g,value:I})},[y](m){const g=m.buffer[0]&15,I=m.buffer[1]|m.buffer[2]<<7;for(let L=0;L<8;L++){const j=8*g+L,re=m.pins[j],Te=1<<L;if(re&&(re.mode===m.MODES.INPUT||re.mode===m.MODES.PULLUP)){re.value=I>>(L&7)&1,re.value?m.ports[g]|=Te:m.ports[g]&=~Te;let{value:Be}=re;m.emit(`digital-read-${j}`,Be),m.emit("digital-read",{pin:j,value:Be})}}}},gt={[le](m){const g=m.buffer.length-2,I=At.alloc(Math.round((g-4)/2));let L=0,j=0;for(let re=4;re<g;re+=2)L=(m.buffer[re]&127|(m.buffer[re+1]&127)<<7)&255,I.writeUInt8(L,j++);m.firmware={name:I.toString(),version:{major:m.buffer[2],minor:m.buffer[3]}},m.emit("queryfirmware")},[b](m){const g=Object.keys(m.MODES).map(Te=>m.MODES[Te]);let I,L,j=0;function re(Te){return g.reduce((Be,Fe)=>(Te&1<<Fe&&Be.push(Fe),Be),[])}if(!m.pins.length)for(let Te=2,Be=0;Te<m.buffer.length-1;Te++){if(m.buffer[Te]===127){m.pins.push({supportedModes:re(j),mode:void 0,value:0,report:1}),j=0,Be=0;continue}Be===0&&(I=m.buffer[Te],L=(1<<m.buffer[Te+1])-1,j|=1<<I,I===m.MODES.ANALOG&&m.RESOLUTION.ADC===null&&(m.RESOLUTION.ADC=L),I===m.MODES.PWM&&m.RESOLUTION.PWM===null&&(m.RESOLUTION.PWM=L)),Be^=1}m.emit("capability-query")},[ve](m){let g=m.buffer[2];m.pins[g].mode=m.buffer[3],m.pins[g].state=m.buffer[4],m.buffer.length>6&&(m.pins[g].state|=m.buffer[5]<<7),m.buffer.length>7&&(m.pins[g].state|=m.buffer[6]<<14),m.emit(`pin-state-${g}`)},[h](m){let g=0,I;for(let L=2;L<m.buffer.length-1;L++)I=m.buffer[L],m.pins[g].analogChannel=I,I!==127&&m.analogPins.push(g),g++;m.emit("analog-mapping-query")},[R](m){const g=[],I=m.buffer[2]&127|(m.buffer[3]&127)<<7,L=m.buffer[4]&127|(m.buffer[5]&127)<<7;for(let j=6,re=m.buffer.length-1;j<re;j+=2)g.push(m.buffer[j]|m.buffer[j+1]<<7);m.emit(`I2C-reply-${I}-${L}`,g)},[C](m){const g=m.buffer[2];gt[g]&&gt[g](m)},[$](m){const g=m.buffer[3],I=m.buffer.slice(4,m.buffer.length-1);m.emit(`1-wire-search-reply-${g}`,s.readDevices(I))},[ie](m){const g=m.buffer[3],I=m.buffer.slice(4,m.buffer.length-1);m.emit(`1-wire-search-alarms-reply-${g}`,s.readDevices(I))},[H](m){const g=m.buffer.slice(4,m.buffer.length-1),I=n.from7BitArray(g),L=I[1]<<8|I[0];m.emit(`1-wire-read-reply-${L}`,I.slice(2))},[_e](m){m.emit("string",At.from(m.buffer.slice(2,-1)).toString().replace(/\0/g,""))},[we](m){const g=m.buffer[2]&127|(m.buffer[3]&127)<<7,I=[m.buffer[4]&127|(m.buffer[5]&127)<<7,m.buffer[6]&127|(m.buffer[7]&127)<<7,m.buffer[8]&127|(m.buffer[9]&127)<<7,m.buffer[10]&127|(m.buffer[11]&127)<<7],L=(I[0]<<24)+(I[1]<<16)+(I[2]<<8)+I[3];m.emit(`ping-read-${g}`,L)},[U](m){const g=m.buffer[2];m.emit(`stepper-done-${g}`,!0)},[me](m){const g=m.buffer[2],I=m.buffer[3],L=g===6||g===10?Lt(m.buffer.slice(4,9)):null;g===6&&m.emit(`stepper-position-${I}`,L),g===10&&m.emit(`stepper-done-${I}`,L),g===36&&m.emit(`multi-stepper-done-${I}`)},[X](m){const g=m.buffer[2]&N,I=m.buffer[2]&15,L=[];if(g===J){for(let j=3,re=m.buffer.length;j<re-1;j+=2)L.push(m.buffer[j+1]<<7|m.buffer[j]);m.emit(`serial-data-${I}`,L)}}};let wt=null;class He extends t{constructor(g,I,L){super(),(typeof I=="function"||typeof I>"u")&&(L=I,I={});const j=this,Te=Object.assign({},{reportVersionTimeout:5e3,samplingInterval:19,serialport:{baudRate:57600,highWaterMark:256}},I);if(this.isReady=!1,this.MODES={INPUT:0,OUTPUT:1,ANALOG:2,PWM:3,SERVO:4,SHIFT:5,I2C:6,ONEWIRE:7,STEPPER:8,SERIAL:10,PULLUP:11,IGNORE:127,PING_READ:117,UNKOWN:16},this.I2C_MODES={WRITE:0,READ:1,CONTINUOUS_READ:2,STOP_READING:3},this.STEPPER={TYPE:{DRIVER:1,TWO_WIRE:2,THREE_WIRE:3,FOUR_WIRE:4},STEP_SIZE:{WHOLE:0,HALF:1},RUN_STATE:{STOP:0,ACCEL:1,DECEL:2,RUN:3},DIRECTION:{CCW:0,CW:1}},this.SERIAL_MODES={CONTINUOUS_READ:0,STOP_READING:1},this.SERIAL_PORT_IDs={HW_SERIAL0:0,HW_SERIAL1:1,HW_SERIAL2:2,HW_SERIAL3:3,SW_SERIAL0:8,SW_SERIAL1:9,SW_SERIAL2:16,SW_SERIAL3:17,DEFAULT:8},this.SERIAL_PIN_TYPES={RES_RX0:0,RES_TX0:1,RES_RX1:2,RES_TX1:3,RES_RX2:4,RES_TX2:5,RES_RX3:6,RES_TX3:7},this.RESOLUTION={ADC:null,DAC:null,PWM:null},this.HIGH=1,this.LOW=0,this.pins=[],this.ports=Array(16).fill(0),this.analogPins=[],this.version={},this.firmware={},this.buffer=[],this.versionReceived=!1,this.name="Firmata",this.settings=Te,this.pending=0,this.digitalPortQueue=0,typeof g=="object")this.transport=g;else{if(!wt)throw new Error("Missing Default Transport");this.transport=new wt(g,Te.serialport)}this.transport.on("close",Fe=>{if(Fe&&Fe.disconnect&&Fe.disconnected){this.emit("disconnect");return}this.emit("close")}),this.transport.on("open",Fe=>{this.emit("open",Fe),this.emit("connect",Fe)}),this.transport.on("error",Fe=>{!this.isReady&&typeof L=="function"?L(Fe):this.emit("error",Fe)}),this.transport.on("data",Fe=>{for(let Xe=0;Xe<Fe.length;Xe++){let $e=Fe[Xe];if(!(this.buffer.length===0&&$e===0)){this.buffer.push($e);let tt=this.buffer[0],Pt=this.buffer[this.buffer.length-1];if(tt===N&&Pt===A){let ut=gt[this.buffer[1]];ut&&this.versionReceived&&ut(this),this.buffer.length=0}else if(tt===N&&this.buffer.length>0){let ut=Fe[Xe];ut>127&&(this.buffer.length=0,this.buffer.push(ut))}else if(tt!==N){let ut=tt<N?tt&N:tt;ut!==ce&&ut!==p&&ut!==y&&(this.buffer.length=0)}if(this.buffer.length===3&&tt!==N){let ut=tt<N?tt&N:tt;pe[ut]?((this.versionReceived||tt===ce)&&(this.versionReceived=!0,pe[ut](this)),this.buffer.length=0):this.buffer.length=0}}}}),this.reportVersionTimeoutId=setTimeout(()=>{this.versionReceived===!1&&(this.reportVersion(function(){}),this.queryFirmware(function(){}))},Te.reportVersionTimeout);function Be(){j.isReady=!0,j.emit("ready"),typeof L=="function"&&L()}this.once("reportversion",()=>{clearTimeout(this.reportVersionTimeoutId),this.versionReceived=!0,this.once("queryfirmware",()=>{if(I.samplingInterval!==void 0&&this.setSamplingInterval(I.samplingInterval),Te.skipCapabilities){if(this.analogPins=Te.analogPins||this.analogPins,this.pins=Te.pins||this.pins,!this.pins.length)for(var Fe=0;Fe<(Te.pinCount||Pe);Fe++){var Xe=[],$e=this.analogPins.indexOf(Fe);$e<0&&($e=127),this.pins.push({supportedModes:Xe,analogChannel:$e})}this.RESOLUTION.ADC=1023,this.RESOLUTION.PWM=255,Be()}else this.queryCapabilities(()=>{this.queryAnalogMapping(Be)})})})}reportVersion(g){this.once("reportversion",g),fe(this,[ce])}queryFirmware(g){this.once("queryfirmware",g),fe(this,[N,le,A])}analogRead(g,I){this.reportAnalogPin(g,1),this.addListener(`analog-read-${g}`,I)}pwmWrite(g,I){let L;this.pins[g].value=I,g>15?(L=[N,d,g,I&127,I>>7&127],I>16384&&(L[L.length]=I>>14&127),I>2097152&&(L[L.length]=I>>21&127),I>268435456&&(L[L.length]=I>>28&127),L[L.length]=A):L=[p|g,I&127,I>>7&127],fe(this,L)}servoConfig(g,I,L){if(typeof g=="object"&&g!==null){let j=g;g=j.pin,I=j.min,L=j.max}if(typeof g>"u")throw new Error("servoConfig: pin must be specified");if(typeof I>"u")throw new Error("servoConfig: min must be specified");if(typeof L>"u")throw new Error("servoConfig: max must be specified");this.pins[g].mode=this.MODES.SERVO,fe(this,[N,Me,g,I&127,I>>7&127,L&127,L>>7&127,A])}servoWrite(...g){this.analogWrite(...g)}pinMode(g,I){I===this.MODES.ANALOG?this.pins[this.analogPins[g]].mode=I:(this.pins[g].mode=I,fe(this,[se,g,I]))}digitalWrite(g,I,L){let j=this.updateDigitalPort(g,I);L?this.digitalPortQueue|=1<<j:this.writeDigitalPort(j)}updateDigitalPort(g,I){const L=g>>3,j=1<<(g&7);return this.pins[g].value=I,I?this.ports[L]|=j:this.ports[L]&=~j,L}flushDigitalPorts(){for(let g=0;g<this.ports.length;g++)this.digitalPortQueue>>g&&this.writeDigitalPort(g);this.digitalPortQueue=0}writeDigitalPort(g){fe(this,[y|g,this.ports[g]&127,this.ports[g]>>7&127])}digitalRead(g,I){this.reportDigitalPin(g,1),this.addListener(`digital-read-${g}`,I)}queryCapabilities(g){this.once("capability-query",g),fe(this,[N,x,A])}queryAnalogMapping(g){this.once("analog-mapping-query",g),fe(this,[N,c,A])}queryPinState(g,I){this.once(`pin-state-${g}`,I),fe(this,[N,ae,g,A])}sendString(g){const I=At.from(`${g}\0`,"utf8"),L=[];L.push(N,_e);for(let j=0,re=I.length;j<re;j++)L.push(I[j]&127,I[j]>>7&127);L.push(A),fe(this,L)}sendI2CConfig(g){return this.i2cConfig(g)}i2cConfig(g){let I=a.get(this),L;return I||(I={},a.set(this,I)),typeof g=="number"?L=g:typeof g=="object"&&g!==null&&(L=Number(g.delay),typeof g.address<"u"&&(I[g.address]||(I[g.address]={stopTX:!0})),typeof g.settings<"u"&&Object.assign(I[g.address],g.settings)),I.delay=L=L||0,Le(this,[N,S,L&255,L>>8&255,A]),this}sendI2CWriteRequest(g,I){const L=[];I=I||[],L.push(N,M,g,this.I2C_MODES.WRITE<<3);for(let j=0,re=I.length;j<re;j++)L.push(I[j]&127,I[j]>>7&127);L.push(A),Le(this,L)}i2cWrite(g,I,L){const j=[N,M,g,this.I2C_MODES.WRITE<<3];if(arguments.length===3&&!Array.isArray(I)&&!Array.isArray(L))return this.i2cWriteReg(g,I,L);arguments.length===2&&(Array.isArray(I)?(L=I.slice(),I=L.shift()):L=[]);const re=At.from([I].concat(L));for(var Te=0,Be=re.length;Te<Be;Te++)j.push(re[Te]&127,re[Te]>>7&127);return j.push(A),Le(this,j),this}i2cWriteReg(g,I,L){return Le(this,[N,M,g,this.I2C_MODES.WRITE<<3,I&127,I>>7&127,L&127,L>>7&127,A]),this}sendI2CReadRequest(g,I,L){Le(this,[N,M,g,this.I2C_MODES.READ<<3,I&127,I>>7&127,A]),this.once(`I2C-reply-${g}-0`,L)}i2cRead(g,I,L,j){arguments.length===3&&typeof I=="number"&&typeof L=="function"&&(j=L,L=I,I=null);const re=[N,M,g,this.I2C_MODES.CONTINUOUS_READ<<3];let Te=`I2C-reply-${g}-`;return I!==null?re.push(I&127,I>>7&127):I=0,Te+=I,re.push(L&127,L>>7&127,A),this.on(Te,j),Le(this,re),this}i2cStop(g){g!=null&&(typeof g=="number"&&(g={address:g}),fe(this,[N,M,g.address,this.I2C_MODES.STOP_READING<<3,A]),Object.keys(this._events).forEach(I=>{I.startsWith(`I2C-reply-${g.address}`)&&this.removeAllListeners(I)}))}i2cReadOnce(g,I,L,j){arguments.length===3&&typeof I=="number"&&typeof L=="function"&&(j=L,L=I,I=null);const re=[N,M,g,this.I2C_MODES.READ<<3];let Te=`I2C-reply-${g}-`;return I!==null?re.push(I&127,I>>7&127):I=0,Te+=I,re.push(L&127,L>>7&127,A),this.once(Te,j),Le(this,re),this}sendOneWireConfig(g,I){fe(this,[N,C,w,g,I?1:0,A])}sendOneWireSearch(g,I){this[je](K,`1-wire-search-reply-${g}`,g,I)}sendOneWireAlarmsSearch(g,I){this[je](G,`1-wire-search-alarms-reply-${g}`,g,I)}[je](g,I,L,j){fe(this,[N,C,g,L,A]);const re=setTimeout(()=>{j(new Error("1-Wire device search timeout - are you running ConfigurableFirmata?"))},5e3);this.once(I,Te=>{clearTimeout(re),j(null,Te)})}sendOneWireRead(g,I,L,j){const re=Math.floor(Math.random()*255),Te=setTimeout(()=>{j(new Error("1-Wire device read timeout - are you running ConfigurableFirmata?"))},5e3);this[Qe](g,F,I,L,re,null,null,`1-wire-read-reply-${re}`,Be=>{clearTimeout(Te),j(null,Be)})}sendOneWireReset(g){this[Qe](g,q)}sendOneWireWrite(g,I,L){this[Qe](g,Q,I,null,null,null,Array.isArray(L)?L:[L])}sendOneWireDelay(g,I){this[Qe](g,O,null,null,null,I)}sendOneWireWriteAndRead(g,I,L,j,re){const Te=Math.floor(Math.random()*255),Be=setTimeout(()=>{re(new Error("1-Wire device read timeout - are you running ConfigurableFirmata?"))},5e3);this[Qe](g,Q|F,I,j,Te,null,Array.isArray(L)?L:[L],`1-wire-read-reply-${Te}`,Fe=>{clearTimeout(Be),re(null,Fe)})}[Qe](g,I,L,j,re,Te,Be,Fe,Xe){const $e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];(L||j||re||Te||Be)&&(I=I|Y),L&&$e.splice(...[0,8].concat(L)),j&&($e[8]=j&255,$e[9]=j>>8&255),re&&($e[10]=re&255,$e[11]=re>>8&255),Te&&($e[12]=Te&255,$e[13]=Te>>8&255,$e[14]=Te>>16&255,$e[15]=Te>>24&255),Be&&$e.push(...Be);const tt=[N,C,I,g,...n.to7BitArray($e),A];fe(this,tt),Fe&&Xe&&this.once(Fe,Xe)}setSamplingInterval(g){const I=g<10?10:g>65535?65535:g;this.settings.samplingInterval=I,fe(this,[N,Oe,I&127,I>>7&127,A])}getSamplingInterval(){return this.settings.samplingInterval}reportAnalogPin(g,I){(I===0||I===1)&&(this.pins[this.analogPins[g]].report=I,fe(this,[oe|g,I]))}reportDigitalPin(g,I){const L=g>>3;(I===0||I===1)&&(this.pins[g].report=I,fe(this,[Re|L,I]))}pingRead(g,I){if(!this.pins[g.pin].supportedModes.includes(we))throw new Error("Please upload PingFirmata to the board");const{pin:L,value:j,pulseOut:re=0,timeout:Te=1e6}=g;fe(this,[N,we,L,j,...He.encode([re>>24&255,re>>16&255,re>>8&255,re&255]),...He.encode([Te>>24&255,Te>>16&255,Te>>8&255,Te&255]),A]),this.once(`ping-read-${L}`,I)}accelStepperConfig(g){let{deviceNum:I,invertPins:L,motorPin1:j,motorPin2:re,motorPin3:Te,motorPin4:Be,enablePin:Fe,stepSize:Xe=this.STEPPER.STEP_SIZE.WHOLE,type:$e=this.STEPPER.TYPE.FOUR_WIRE}=g;const tt=[N,me,0,I];let Pt=($e&7)<<4|(Xe&7)<<1,ut=0;typeof Fe<"u"&&(Pt=Pt|1),tt.push(Pt),["stepPin","motorPin1","directionPin","motorPin2","motorPin3","motorPin4","enablePin"].forEach(ji=>{typeof g[ji]<"u"&&tt.push(g[ji])}),Array.isArray(L)&&(L.includes(j)&&(ut|=1),L.includes(re)&&(ut|=2),L.includes(Te)&&(ut|=4),L.includes(Be)&&(ut|=8),L.includes(Fe)&&(ut|=16)),tt.push(ut,A),fe(this,tt)}accelStepperZero(g){fe(this,[N,me,1,g,A])}accelStepperStep(g,I,L){fe(this,[N,me,2,g,...rt(I),A]),L&&this.once(`stepper-done-${g}`,L)}accelStepperTo(g,I,L){fe(this,[N,me,3,g,...rt(I),A]),L&&this.once(`stepper-done-${g}`,L)}accelStepperEnable(g,I=!0){fe(this,[N,me,4,g,I&1,A])}accelStepperStop(g){fe(this,[N,me,5,g,A])}accelStepperReportPosition(g,I){fe(this,[N,me,6,g,A]),I&&this.once(`stepper-position-${g}`,I)}accelStepperAcceleration(g,I){fe(this,[N,me,8,g,...ht(I),A])}accelStepperSpeed(g,I){fe(this,[N,me,9,g,...ht(I),A])}multiStepperConfig(g){fe(this,[N,me,32,g.groupNum,...g.devices,A])}multiStepperTo(g,I,L){if(g<0||g>5)throw new RangeError(`Invalid "groupNum": ${g}. Expected "groupNum" between 0-5`);fe(this,[N,me,33,g,...I.reduce((j,re)=>j.concat(...rt(re)),[]),A]),L&&this.once(`multi-stepper-done-${g}`,L)}multiStepperStop(g){if(g<0||g>5)throw new RangeError(`Invalid "groupNum": ${g}. Expected "groupNum" between 0-5`);fe(this,[N,me,35,g,A])}stepperConfig(g,I,L,j,re,Te,Be){fe(this,[N,U,0,g,I,L&127,L>>7&127,j,re,...I===this.STEPPER.TYPE.FOUR_WIRE?[Te,Be]:[],A])}stepperStep(g,I,L,j,re,Te,Be){typeof re=="function"&&(Be=re,re=0,Te=0),fe(this,[N,U,1,g,I,L&127,L>>7&127,L>>14&127,j&127,j>>7&127,...re>0||Te>0?[re&127,re>>7&127,Te&127,Te>>7&127]:[],A]),Be&&this.once(`stepper-done-${g}`,Be)}serialConfig(g){let I,L,j,re;if(typeof g=="object"&&g!==null&&(I=g.portId,L=g.baud,j=g.rxPin,re=g.txPin),typeof I>"u")throw new Error("portId must be specified, see SERIAL_PORT_IDs for options.");L=L||57600;const Te=[N,X,ne|I,L&127,L>>7&127,L>>14&127];if(I>7&&typeof j<"u"&&typeof re<"u")Te.push(j,re);else if(I>7)throw new Error("Both RX and TX pins must be defined when using Software Serial.");Te.push(A),fe(this,Te)}serialWrite(g,I){const L=[N,X,ue|g];for(let j=0,re=I.length;j<re;j++)L.push(I[j]&127,I[j]>>7&127);L.push(A),I.length>0&&fe(this,L)}serialRead(g,I,L){const j=[N,X,V|g,this.SERIAL_MODES.CONTINUOUS_READ];arguments.length===2&&typeof I=="function"?L=I:j.push(I&127,I>>7&127),j.push(A),fe(this,j),this.on(`serial-data-${g}`,L)}serialStop(g){fe(this,[N,X,V|g,this.SERIAL_MODES.STOP_READING,A]),this.removeAllListeners(`serial-data-${g}`)}serialClose(g){fe(this,[N,X,he|g,A])}serialFlush(g){fe(this,[N,X,ge|g,A])}serialListen(g){g<8||fe(this,[N,X,be|g,A])}sysexResponse(g,I){if(He.SYSEX_RESPONSE[g])throw new Error(`${g} is not an available SYSEX_RESPONSE byte`);return He.SYSEX_RESPONSE[g]=L=>I.call(L,L.buffer.slice(2,-1)),this}clearSysexResponse(g){He.SYSEX_RESPONSE[g]&&delete He.SYSEX_RESPONSE[g]}sysexCommand(g){if(!g||!g.length)throw new Error("Sysex Command cannot be empty");return fe(this,[N,...g.slice(),A]),this}reset(){fe(this,[Se])}static isAcceptablePort(g){return!!/usb|acm|^com/i.test(g.path)}static requestPort(g){if(!wt||wt&&typeof wt.list!="function"){Ce.nextTick(()=>{g(new Error("No Transport provided"),null)});return}wt.list().then(I=>{const L=I.find(j=>He.isAcceptablePort(j)&&j);L?g(null,L):g(new Error("No Acceptable Port Found"),null)}).catch(I=>{g(I,null)})}static encode(g){const I=[],L=g.length;for(let j=0;j<L;j++)I.push(g[j]&127,g[j]>>7&127);return I}static decode(g){const I=[];if(g.length%2!==0)throw new Error("Firmata.decode(data) called with odd number of data bytes");for(;g.length;){const L=g.shift(),j=g.shift();I.push(L|j<<7)}return I}}He.prototype.analogWrite=He.prototype.pwmWrite,He.Board=He,He.SYSEX_RESPONSE=gt,He.MIDI_RESPONSE=pe;function fe(m,g){m.pending++,m.transport.write(At.from(g),()=>m.pending--)}function Le(m,g){const I=a.get(m);if(!I)throw new Error("I2C is not enabled for this board. To enable, call the i2cConfig() method.");if(g[1]===M){const L=g[2];I[L]||(I[L]={stopTX:!0}),g[3]&T&&(g[3]|=+!I[L].stopTX<<6)}fe(m,g)}function rt(m){const g=m<0;m=Math.abs(m);const I=[m&127,m>>7&127,m>>14&127,m>>21&127,m>>28&7];return g&&(I[I.length-1]|=8),I}function Lt(m){let g=m[0]&127|(m[1]&127)<<7|(m[2]&127)<<14|(m[3]&127)<<21|(m[4]&7)<<28;return m[4]>>3&&(g*=-1),g}const Wt=Math.pow(2,23);function ht(m){const g=m<0?1:0;m=Math.abs(m);const I=Math.floor(Math.log10(m));let L=0+I;for(m/=Math.pow(10,I);!Number.isInteger(m)&&m<Wt;)L-=1,m*=10;for(;m>Wt;)L+=1,m/=10;return m=Math.trunc(m),L+=11,[m&127,m>>7&127,m>>14&127,m>>21&3|(L&15)<<2|(g&1)<<6]}function Ne(m){const g=(m[3]>>2&15)-11,I=m[3]>>6&1;let L=m[0]|m[1]<<7|m[2]<<14|(m[3]&3)<<21;return I&&(L*=-1),L*Math.pow(10,g)}if(r.IS_TEST_MODE){let m=null;He.test={i2cPeripheralSettings(g){return a.get(g)},get i2cActive(){return a},set transport(g){m=wt,wt=g},restoreTransport(){wt=m},encode32BitSignedInteger:rt,decode32BitSignedInteger:Lt,encodeCustomFloat:ht,decodeCustomFloat:Ne,writeToTransport:fe,symbols:{SYM_sendOneWireRequest:Qe,SYM_sendOneWireSearch:je}}}const B=function(m){return wt=m,He};return B.Firmata=He,rc=B,rc}var nc,Pd;function py(){if(Pd)return nc;Pd=1;var r={};const t=Bi;class n extends t{constructor(p){super(),this.isOpen=!0,this.baudRate=0,this.path=p}write(p){At.isBuffer(p)&&(p=Array.from(p)),this.lastWrite=p,this.emit("write",p)}static list(){return Promise.resolve([])}}n.SerialPort=n;let s,a,c;try{r.IS_TEST_MODE?s=n:(c=Eg(),s=c)}catch(h){a=h}if(s==null)if(r.IS_TEST_MODE)s=n;else throw console.log("It looks like serialport didn't install properly."),console.log("More information can be found here https://serialport.io/docs/guide-installation"),console.log(`The result of requiring the package is: ${c}`),console.log(a),"Missing serialport dependency";return nc=s,nc}var sc,Nd;function gy(){return Nd||(Nd=1,sc=Sg()(py())),sc}const Rg={micro(r){const t=Ce.hrtime();let n=0,s;for(;r>n;)s=Ce.hrtime(t),n=(s[0]*1e9+s[1])/1e3},milli(r){Rg.micro(r*1e3)}};var xy=Rg,oc,Bd;function Zr(){if(Bd)return oc;Bd=1;var r={};const t=ot(),n=Ct,s=xy,a=Et,c=new Map,h=new Map;class p extends n{constructor(){super(),this.HIGH=1,this.LOW=0,this.isReady=!1,this.MODES={},this.pins=[],this.analogPins=[]}}const x={DEFAULT:{initialize:{value(){throw new Error("Expander expects a valid controller")}}},MCP23017:{ADDRESSES:{value:[32]},REGISTER:{value:{IODIRA:0,GPPUA:12,GPIOA:18,OLATA:20,IODIRB:1,GPPUB:13,GPIOB:19,OLATB:21}},initialize:{value(d){const S=c.get(this);S.iodir=[255,255],S.olat=[255,255],S.gpio=[255,255],S.gppu=[0,0],this.address=d.address||this.ADDRESSES[0],d.address=this.address,this.io.i2cConfig(d),this.io.i2cWrite(this.address,[this.REGISTER.IODIRA,S.iodir[this.REGISTER.IODIRA]]),this.io.i2cWrite(this.address,[this.REGISTER.IODIRB,S.iodir[this.REGISTER.IODIRB]]),Object.assign(this.MODES,this.io.MODES);for(let R=0;R<16;R++)this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:0,value:0,report:0,analogChannel:127}),this.pinMode(R,this.MODES.OUTPUT),this.digitalWrite(R,this.LOW);this.name="MCP23017",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(d){return d}},pinMode:{value(d,S){const R=c.get(this),M=d;let T=0,w=null;d<8?T=this.REGISTER.IODIRA:(T=this.REGISTER.IODIRB,d-=8),w=R.iodir[T],S===this.io.MODES.INPUT?w|=1<<d:w&=~(1<<d),this.pins[M].mode=S,this.io.i2cWrite(this.address,[T,w]),R.iodir[T]=w}},digitalWrite:{value(d,S){const R=c.get(this),M=d;let T=0,w=0,C=0;d<8?(T=this.REGISTER.IODIRA,C=this.REGISTER.GPIOA):(T=this.REGISTER.IODIRB,C=this.REGISTER.GPIOB,d-=8),w=R.olat[T],S===this.io.HIGH?w|=1<<d:w&=~(1<<d),this.pins[M].report=0,this.pins[M].value=S,this.io.i2cWrite(this.address,[C,w]),R.olat[T]=w,R.gpio[T]=w}},pullUp:{value(d,S){const R=c.get(this);let M=0,T=0,w=0;d<8?(M=this.REGISTER.IODIRA,w=this.REGISTER.GPPUA):(M=this.REGISTER.IODIRB,w=this.REGISTER.GPPUB,d-=8),T=R.gppu[M],S===this.io.HIGH?T|=1<<d:T&=~(1<<d),this.io.i2cWrite(this.address,[w,T]),R.gppu[M]=T}},digitalRead:{value(d,S){const R=d;let M=0;d<8?M=this.REGISTER.GPIOA:(M=this.REGISTER.GPIOB,d-=8),this.pins[R].report=1,this.on(`digital-read-${R}`,S),this.io.i2cRead(this.address,M,1,T=>{const C=T[0]>>d&1;this.pins[R].value=C,this.emit(`digital-read-${R}`,C)})}}},MCP23008:{ADDRESSES:{value:[32]},REGISTER:{value:{IODIR:0,GPPU:6,GPIO:9,OLAT:10}},initialize:{value(d){const S=c.get(this);S.iodir=[255],S.olat=[255],S.gpio=[255],S.gppu=[0],this.address=d.address||this.ADDRESSES[0],d.address=this.address,this.io.i2cConfig(d),this.io.i2cWrite(this.address,[this.REGISTER.IODIR,S.iodir[this.REGISTER.IODIR]]),Object.assign(this.MODES,this.io.MODES);for(let R=0;R<8;R++)this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:0,value:0,report:0,analogChannel:127}),this.pinMode(R,this.MODES.OUTPUT),this.digitalWrite(R,this.LOW);this.name="MCP23008",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(d){return d}},pinMode:{value(d,S){const R=c.get(this),M=d,T=this.REGISTER.IODIR;let w=R.iodir[T];S===this.io.MODES.INPUT?w|=1<<d:w&=~(1<<d),this.pins[M].mode=S,this.io.i2cWrite(this.address,[T,w]),R.iodir[T]=w}},digitalWrite:{value(d,S){const R=c.get(this),M=d,T=this.REGISTER.IODIR,w=this.REGISTER.GPIO;let C=R.olat[T];S===this.io.HIGH?C|=1<<d:C&=~(1<<d),this.pins[M].report=0,this.pins[M].value=S,this.io.i2cWrite(this.address,[w,C]),R.olat[T]=C,R.gpio[T]=C}},pullUp:{value(d,S){const R=c.get(this),M=this.REGISTER.IODIR,T=this.REGISTER.GPPU;let w=R.gppu[M];S===this.io.HIGH?w|=1<<d:w&=~(1<<d),this.io.i2cWrite(this.address,[T,w]),R.gppu[M]=w}},digitalRead:{value(d,S){const R=d,M=this.REGISTER.GPIO;this.pins[R].report=1,this.on(`digital-read-${d}`,S),this.io.i2cRead(this.address,M,1,T=>{const C=T[0]>>d&1;this.pins[R].value=C,this.emit(`digital-read-${d}`,C)})}}},PCF8574:{ADDRESSES:{value:[32]},REGISTER:{},initialize:{value(d){const S=c.get(this);S.port=0,S.ddr=0,S.pins=0,this.address=d.address||this.ADDRESSES[0],d.address=this.address,this.io.i2cConfig(d),Object.assign(this.MODES,this.io.MODES);for(let R=0;R<8;R++)this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:1,value:0,report:0,analogChannel:127}),this.pinMode(R,this.MODES.OUTPUT),this.digitalWrite(R,this.LOW);this.name="PCF8574",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(d){return d}},pinMode:{value(d,S){const R=c.get(this),M=d;let T=R.port,w=R.ddr;const C=R.pins;S===this.MODES.INPUT?(w&=~(1<<d),T&=~(1<<d)):(w|=1<<d,T&=~(1<<d)),this.pins[M].mode=S,R.port=T,R.ddr=w,this.io.i2cWrite(this.address,C&~w|T)}},digitalWrite:{value(d,S){const R=c.get(this),M=d;let T=R.port;const w=R.ddr,C=R.pins;S?T|=1<<d:T&=~(1<<d),this.pins[M].report=0,this.pins[M].value=S,R.port=T,this.io.i2cWrite(this.address,C&~w|T)}},digitalRead:{value(d,S){const R=c.get(this),M=d;this.pins[M].report=1,this.on(`digital-read-${d}`,S),this.io.i2cRead(this.address,1,T=>{const w=T[0],C=w>>d&1;R.pins=w,this.pins[M].value=C,this.emit(`digital-read-${d}`,C)})}}},PCF8575:{ADDRESSES:{value:[32]},REGISTER:{},initialize:{value(d){const S=c.get(this);S.port=[0,1],S.gpio=[0,0],this.address=d.address||this.ADDRESSES[0],d.address=this.address,this.io.i2cConfig(d),Object.assign(this.MODES,this.io.MODES);for(let R=0;R<16;R++)this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:1,value:0,report:0,analogChannel:127}),this.pinMode(R,this.MODES.OUTPUT),this.digitalWrite(R,this.LOW);this.io.i2cWrite(this.address,S.gpio),this.name="PCF8575",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(d){return d}},pinMode:{value(d,S){const R=d;this.pins[R].mode=S}},digitalWrite:{value(d,S){const R=c.get(this),M=d;let T;d<8?T=0:(T=1,d-=8),S===this.io.HIGH?R.gpio[T]|=1<<d:R.gpio[T]&=~(1<<d),this.pins[M].report=0,this.pins[M].value=S,this.io.i2cWrite(this.address,R.gpio)}},digitalRead:{value(d,S){const R=d;let M;d<8?M=0:(M=1,d-=8),this.pins[R].report=1,this.on(`digital-read-${d}`,S),this.io.i2cRead(this.address,2,T=>{const C=T[M]>>d&1;this.pins[R].value=C,this.emit(`digital-read-${d}`,C)})}}},PCA9685:{ADDRESSES:{value:[64]},REGISTER:{value:{MODE1:0,PRESCALE:254,BASE:6}},initialize:{value(d){const S=c.get(this);S.frequency=a.constrain(d.frequency||1526,24,1526),this.address=d.address||this.ADDRESSES[0],this.pwmRange=d.pwmRange||[0,4095],Object.defineProperties(this,{prescale:{get(){return Math.round(25e6/(4096*S.frequency))-1}},frequency:{get(){return S.frequency}}}),d.address=this.address,this.io.i2cConfig(d),this.io.i2cWriteReg(this.address,this.REGISTER.MODE1,0),this.io.i2cWriteReg(this.address,this.REGISTER.MODE1,16),this.io.i2cWriteReg(this.address,this.REGISTER.PRESCALE,this.prescale),this.io.i2cWriteReg(this.address,this.REGISTER.MODE1,0),s.micro(5),this.io.i2cWriteReg(this.address,this.REGISTER.MODE1,160),Object.assign(this.MODES,this.io.MODES);for(let R=0;R<16;R++)this.pins.push({supportedModes:[this.MODES.OUTPUT,this.MODES.PWM,this.MODES.SERVO],mode:0,value:0,report:0,analogChannel:127}),this.pinMode(R,this.MODES.OUTPUT),this.digitalWrite(R,this.LOW);this.name="PCA9685",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(d){return this.io.name.includes("Tessel 2")?d-1:d}},pinMode:{value(d,S){if(this.pins[d]===void 0)throw new RangeError(`Invalid PCA9685 pin: ${d}`);this.pins[d].mode=S}},digitalWrite:{value(d,S){this.pwmWrite(d,S?255:0)}},analogWrite:{value(d,S){this.pwmWrite(d,S)}},servoWrite:{value(d,S){let R;S<544?(S=a.constrain(S,0,180),R=a.map(S,0,180,this.pwmRange[0]/4,this.pwmRange[1]/4)):R=S/4,R|=0,this.io.i2cWrite(this.address,[this.REGISTER.BASE+4*d,0,0,R,R>>8])}},pwmWrite:{value(d,S){if(this.pins[d]===void 0)throw new RangeError(`Invalid PCA9685 pin: ${d}`);S=a.constrain(S,0,255);let R=0,M=this.pwmRange[1]*S/255;S===0&&(R=0,M=4096),S===255&&(R=4096,M=0),this.io.i2cWrite(this.address,[this.REGISTER.BASE+4*d,R,R>>8,M,M>>8]),this.pins[d].value=S}}},PCF8591:{ADDRESSES:{value:[72]},REGISTER:{},initialize:{value(d){const S=c.get(this);S.control=69,S.reading=!1,this.address=d.address||this.ADDRESSES[0],d.address=this.address,this.io.i2cConfig(d),Object.assign(this.MODES,this.io.MODES);for(let R=0;R<4;R++)this.pins.push({supportedModes:[this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:R});this.analogPins.push(0,1,2,3),this.io.i2cWrite(this.address,S.control),this.name="PCF8591",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(d){return typeof d=="string"&&d[0]==="A"?+d.slice(1):d}},pinMode:{value(d,S){this.pins[d].mode=S}},analogRead:{value(d,S){const R=c.get(this),M=d;this.pins[M].report=1,this.on(`analog-read-${d}`,S),R.reading||(R.reading=!0,this.io.i2cRead(this.address,4,T=>{let w;for(let C=0;C<4;C++)w=T[C]<<2,this.pins[C].value=w,this.pins[C].report&&this.emit(`analog-read-${C}`,w)}))}}},MUXSHIELD2:{initialize:{value(){const d=c.get(this);d.select=[2,4,6,7],d.ios=[null,10,11,12],d.io=[null,14,15,16],d.aio=[null,0,1,2],d.outMode=8,d.pinMap={},d.rowReading=[!1,!1,!1],d.rowMode=[null,null,null],d.rowValues=[0,0,0],Object.assign(this.MODES,{INPUT:0,OUTPUT:1,ANALOG:2}),this.io.pinMode(d.select[0],this.MODES.OUTPUT),this.io.pinMode(d.select[1],this.MODES.OUTPUT),this.io.pinMode(d.select[2],this.MODES.OUTPUT),this.io.pinMode(d.select[3],this.MODES.OUTPUT),this.io.pinMode(d.outMode,this.MODES.OUTPUT),this.io.digitalWrite(d.outMode,this.LOW),this.io.pinMode(d.ios[1],this.MODES.OUTPUT),this.io.pinMode(d.ios[2],this.MODES.OUTPUT),this.io.pinMode(d.ios[3],this.MODES.OUTPUT);let S=1,R=16,M=0;for(let T=0;T<48;T++)(T&R)===R&&(S++,R*=2,M=0),d.pinMap[`IO${S}-${M}`]=T,this.pins.push({row:S,index:M,supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT,this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:T}),this.analogPins.push(T),M++;this.name="MUXSHIELD2",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(d){return d}},pinMode:{value(d,S){const R=c.get(this),M=R.pinMap[d];if(M===void 0)throw new Error(`MUXSHIELD2: Invalid Pin number or name: ${d}`);const T=this.pins[M].row,w=T-1,C=R.rowMode[w];if(C===S)return this;if(C!==null&&C!==S)throw new Error("MUXSHIELD2: Cannot set mixed modes per IO row.");R.rowMode[w]=S;for(let F=0;F<16;F++)this.pins[w+F].mode=S;const O=R.io[T],H=R.ios[T];S===this.MODES.INPUT&&this.io.pinMode(O,this.MODES.INPUT),S===this.MODES.OUTPUT&&(this.io.pinMode(O,this.MODES.OUTPUT),this.io.digitalWrite(H,this.HIGH))}},digitalWrite:{value(d,S){const R=c.get(this),M=R.pinMap[d];if(M===void 0)throw new Error(`MUXSHIELD2: Invalid Pin number or name: ${d}`);const T=this.pins[M].row,w=T-1;let C=R.rowValues[w];const H=(T-1)*16,F=M-H;S?C|=1<<F:C&=~(1<<F),this.io.digitalWrite(R.select[3],this.LOW),this.io.digitalWrite(R.outMode,this.HIGH);const q=R.select[T-1],ie=R.io[T];for(let G=15;G>=0;G--)this.io.digitalWrite(q,this.LOW),this.io.digitalWrite(ie,C>>G&1),this.io.digitalWrite(q,this.HIGH);this.io.digitalWrite(R.select[3],this.HIGH),this.io.digitalWrite(R.outMode,this.LOW),this.pins[M].value=S,R.rowValues[w]=C}},digitalRead:{value(d,S){this.ioRead("digital",d,S)}},analogRead:{value(d,S){this.ioRead("analog",d,S)}},ioRead:{value(d,S,R){const M=c.get(this),T=M.pinMap[S];if(T===void 0)throw new Error(`MUXSHIELD2: Invalid Pin number or name: ${S}`);this.on(`${d}-read-${T}`,R);const w=d==="analog",O=this.pins[T].row-1,H=O*16,F=T-H;this.pins[T].report=1,this.pins[T].channel=F,this.pins[T].ioPin=w?O:O+14;const q=()=>{const $=q.lastPinIndex+1;for(let K=$;K<this.pins.length;K++)if(this.pins[K].report===1)return q.lastPinIndex=K,q.lastPinIndex;return q.lastPinIndex=-1,q()};q.lastPinIndex=-1;const ie=$=>{const K=q.lastPinIndex,Y=this.pins[K];this.emit(`${d}-read-${K}`,$),this.io.removeListener(`${d}-read-${Y.ioPin}`,ie),setTimeout(G,10)};var G=()=>{const $=q(),K=this.pins[$];this.select(K.channel),w?(this.io.pinMode(K.ioPin,this.io.MODES.ANALOG),this.io.analogRead(K.ioPin,ie)):this.io.digitalRead(K.ioPin,ie)};M.rowReading[O]||(M.rowReading[O]=!0,G())}},select:{value(d){const S=c.get(this);this.io.digitalWrite(S.outMode,this.LOW),this.io.digitalWrite(S.select[0],d&1),this.io.digitalWrite(S.select[1],(d&3)>>1),this.io.digitalWrite(S.select[2],(d&7)>>2),this.io.digitalWrite(S.select[3],(d&15)>>3)}}},GROVEPI:{ADDRESSES:{value:[4]},REGISTER:{},COMMANDS:{value:{DIGITAL_READ:1,DIGITAL_WRITE:2,ANALOG_READ:3,ANALOG_WRITE:4,PIN_MODE:5,PING_READ:7}},initialize:{value(d){const S=c.get(this);S.isReading=!1,S.pinMap={D2:2,D3:3,D4:4,D5:5,D6:6,D7:7,D8:8,A0:14,A1:15,A2:16},this.isPwm=M=>{const T=typeof M=="number"?M:parseInt(M[1]);return T===3||T===5||T===6},this.address=d.address||this.ADDRESSES[0],d.address=this.address,this.io.i2cConfig(d),Object.assign(this.MODES,this.io.MODES);let R;for(let M=0;M<17;M++)R=127,M<=1||M>=9&&M<14?this.pins.push({supportedModes:[],mode:0,value:0,report:0,analogChannel:R}):(this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:0,value:0,report:0,analogChannel:R}),this.isPwm(M)&&this.pins[M].supportedModes.push(this.MODES.PWM),M>=14&&M<=17?(this.pins[M].analogChannel=M-14,this.pins[M].supportedModes.push(this.MODES.ANALOG),this.analogPins.push(M),this.pinMode(`A${this.pins[M].analogChannel}`,this.MODES.ANALOG)):(this.pinMode(`D${M}`,this.MODES.OUTPUT),this.digitalWrite(`D${M}`,this.LOW)));this.name="GROVEPI",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(d){return d}},pinMode:{value(d,S){const M=c.get(this).pinMap[d];S===this.io.MODES.INPUT||S===this.io.MODES.ANALOG?this.pins[M].mode=0:this.pins[M].mode=1,this.io.i2cWrite(this.address,[this.COMMANDS.PIN_MODE,M,this.pins[M].mode,0])}},digitalWrite:{value(d,S){const M=c.get(this).pinMap[d];S=S?1:0,this.io.i2cWrite(this.address,[this.COMMANDS.DIGITAL_WRITE,M,S,0]),this.pins[M].value=S}},ioRead:{value(d,S,R){const M=c.get(this),T=M.pinMap[d],w=S==="analog",C=w?3:1,O=w?this.COMMANDS.ANALOG_READ:this.COMMANDS.DIGITAL_READ;this.on(`${S}-read-${T}`,R),this.pins[T].report=1,this.pins[T].command=O,this.pins[T].type=S,this.pins[T].length=C;const H=()=>{const ie=H.lastPinIndex+1;for(let G=ie;G<this.pins.length;G++)if(this.pins[G].report===1)return H.lastPinIndex=G,H.lastPinIndex;return H.lastPinIndex=-1,H()};H.lastPinIndex=-1;const F=(ie,G)=>{const $=this.pins[ie];let K=!0;$.type==="digital"&&this.pins[ie].value===G&&(K=!1),this.pins[ie].value=G,K&&this.emit(`${$.type}-read-${ie}`,G),setTimeout(q,1)};var q=()=>{const ie=H(),G=this.pins[ie],$=G.type==="analog";this.io.i2cWrite(this.address,[G.command,ie,0,0]),this.io.i2cReadOnce(this.address,G.length,K=>{let Y;$?Y=(K[1]<<8)+K[2]:Y=K[0],F(ie,Y)})};M.isReading||(M.isReading=!0,q())}},digitalRead:{value(d,S){this.ioRead(d,"digital",S)}},analogRead:{value(d,S){this.ioRead(d,"analog",S)}},pingRead:{value({pin:d},S){const M=c.get(this).pinMap[d];this.io.i2cWrite(this.address,[this.COMMANDS.PING_READ,M,0,0]),setTimeout(()=>{this.once(`ping-read-${d}`,S),this.io.i2cReadOnce(this.address,3,T=>{const w=Math.round(((T[1]<<8)+T[2])*29*2);this.pins[M].value=w,this.emit(`ping-read-${d}`,w)})},200)}},analogWrite:{value(d,S){this.pwmWrite(d,S)}},pwmWrite:{writable:!0,value(d,S){const M=c.get(this).pinMap[d];S=a.constrain(S,0,255),this.io.i2cWrite(this.address,[this.COMMANDS.ANALOG_WRITE,M,S,0]),this.pins[M].value=S}}},"74HC595":{initialize:{value({pins:d}){const S=c.get(this);if(!d.data)throw new Error("Expected pins.data");if(!d.clock)throw new Error("Expected pins.clock");if(!d.latch)throw new Error("Expected pins.latch");S.data=d.data,S.clock=d.clock,S.latch=d.latch,S.value=0,Object.assign(this.MODES,this.io.MODES),this.pins=[];for(let R=0;R<8;R++)this.pins.push({supportedModes:[this.MODES.OUTPUT],mode:1,value:0,report:0,analogChannel:127});this.portWrite(0,S.value),this.name="74HC595",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(d){return d}},pinMode:{value(d,S){this.pins[d].mode=S}},digitalWrite:{value(d,S){const R=c.get(this);S?R.value|=1<<d:R.value&=~(1<<d),this.pins[d].value=S,this.portWrite(0,R.value)}},portWrite:{writable:!0,configurable:!0,value(d,S){const R=c.get(this);R.value=S,this.board.digitalWrite(R.latch,this.io.LOW),this.board.shiftOut(R.data,R.clock,!0,R.value),this.board.digitalWrite(R.latch,this.io.HIGH);for(let M=0;M<8;M++)this.pins[M].value=R.value>>M&1}}},CD74HC4067:{ADDRESSES:{value:[10,11,12,13]},REGISTER:{},initialize:{value(d){const S=c.get(this);S.reading=!1,this.address=d.address||this.ADDRESSES[0],d.address=this.address,this.io.i2cConfig(d),Object.assign(this.MODES,this.io.MODES);for(let R=0;R<16;R++)this.pins.push({supportedModes:[this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:R}),this.analogPins.push(R);this.name="CD74HC4067",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(d){return typeof d=="string"&&d[0]==="A"?+d.slice(1):d}},pinMode:{value(d,S){this.pins[d].mode=S}},analogRead:{value(d,S){const R=c.get(this),M=d;this.pins[M].report=1,this.on(`analog-read-${d}`,S),this.io.i2cWrite(this.address,M,1),R.reading||(R.reading=!0,this.io.i2cRead(this.address,32,T=>{let w;for(let C=0;C<16;C++){const O=C*2;w=(T[O]<<8)+T[O+1],this.pins[C].value=w,this.pins[C].report&&this.emit(`analog-read-${C}`,w)}}))}}},LIS3DH:{ADDRESSES:{value:[24]},REGISTER:{value:{OUT_ADC1_L:8,OUT_X_L:40,CTRL_REG1:32,CTRL_REG2:33,CTRL_REG3:34,CTRL_REG4:35,CTRL_REG5:36,TEMP_CFG_REG:31}},initialize:{value(d){const S=c.get(this);S.reading=!1,this.address=d.address||this.ADDRESSES[0],d.address=this.address,this.io.i2cConfig(d);let R=7;R=R&-241|112,this.io.i2cWrite(this.address,this.REGISTER.CTRL_REG1,R),this.io.i2cWrite(this.address,this.REGISTER.CTRL_REG4,136),this.io.i2cWrite(this.address,this.REGISTER.CTRL_REG3,16),Object.assign(this.MODES,this.io.MODES);for(let M=0;M<4;M++)M===0?this.pins.push({supportedModes:[],mode:0,value:0,report:0,analogChannel:127}):(this.pins.push({supportedModes:[this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:M}),this.analogPins.push(M));this.name="LIS3DH",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(d){return typeof d=="string"&&d[0]==="A"?+d.slice(1):d}},pinMode:{value(d,S){this.pins[d].mode=S}},analogRead:{value(d,S){const R=c.get(this),M=d;this.pins[M].report=1,this.on(`analog-read-${d}`,S),R.reading||(R.reading=!0,this.io.i2cWrite(this.address,this.REGISTER.TEMP_CFG_REG,128),this.io.i2cRead(this.address,this.REGISTER.OUT_ADC1_L|128,6,T=>{this.pins[1].value=a.scale(a.int16(T[1],T[0]),-32512,32512,1023,0),this.pins[2].value=a.scale(a.int16(T[3],T[2]),-32512,32512,1023,0),this.pins[3].value=a.scale(a.int16(T[5],T[4]),-32512,32512,1023,0);for(let w=1;w<4;w++)this.pins[w].report&&this.emit(`analog-read-${w}`,this.pins[w].value)}))}},i2cConfig:{value(...d){return this.io.i2cConfig.apply(this.io,d)}},i2cWrite:{value(...d){return this.io.i2cWrite.apply(this.io,d)}},i2cWriteReg:{value(...d){return this.io.i2cWriteReg.apply(this.io,d)}},i2cRead:{value(...d){return this.io.i2cRead.apply(this.io,d)}},i2cReadOnce:{value(...d){return this.io.i2cReadOnce.apply(this.io,d)}}},ADS1115:{ADDRESSES:{value:[72,73,74,75]},REGISTER:{value:{CONFIG:1,READ:0,PIN:[193,209,225,241],PIN_DATA:131}},initialize:{value(d){const S=c.get(this);S.reading=!1,this.address=d.address||this.ADDRESSES[0],d.address=this.address,this.io.i2cConfig(d),Object.assign(this.MODES,this.io.MODES);for(let R=0;R<4;R++)this.pins.push({supportedModes:[this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:R}),this.analogPins.push(R);this.name="ADS1115",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value(d){return typeof d=="string"&&d[0]==="A"?+d.slice(1):d}},pinMode:{value(d,S){this.pins[d].mode=S}},analogRead:{value(d,S){const R=c.get(this);this.pins[d].report=1;let M=!1;if(this.on(`analog-read-${d}`,S),!R.reading){R.reading=!0;const T=()=>{setTimeout(()=>{M=!0},8)};this.io.i2cWrite(this.address,this.REGISTER.CONFIG,[this.REGISTER.PIN[d],this.REGISTER.PIN_DATA]),T(),this.io.i2cRead(this.address,this.REGISTER.READ,2,w=>{if(M){M=!1;const C=d===this.pins.length-1?0:d+1;this.io.i2cWrite(this.address,this.REGISTER.CONFIG,[this.REGISTER.PIN[C],this.REGISTER.PIN_DATA]);const O=(w[0]<<8)+w[1];this.pins[d].value=O,this.pins[d].report&&this.emit(`analog-read-${d}`,O),d=C,T()}})}}}}};x.CD74HCT4067=x.CD74HC4067,x["74HC4067"]=x.CD74HC4067,x.PCF8574A=Object.assign({},x.PCF8574,{ADDRESSES:{value:[56]}});const b=Object.keys(t.prototype);Object.keys(x).forEach(d=>{b.forEach(S=>{x[d][S]===void 0&&(x[d][S]={writable:!0,configurable:!0,value(){throw new Error(`Expander:${d} does not support ${S}`)}})})});const y=["74HC595"];class A extends p{constructor(S){super();let R="Expander cannot reuse an active address",M=null,T;if(typeof S=="string"&&(T=S),t.Component.call(this,S=t.Options(S),{normalizePin:!1,requestPin:!1}),y.includes(S.controller)&&typeof this.address>"u"&&(this.address=a.uid()),M=h.get(this.address),M)throw this.bus&&M.bus!==void 0&&M.bus===this.bus&&(R+=" on this bus"),new Error(R);typeof S.controller>"u"&&T&&(S.controller=T),t.Controller.call(this,x,S),c.set(this,{}),typeof this.initialize=="function"&&this.initialize(S),h.set(this.address,this)}}return A.get=d=>{if(!d.address||!d.controller)throw new Error("Expander.get(...) requires an address and controller");if(d.address!==void 0&&(d.address=Number(d.address)),Number.isNaN(d.address))throw new Error("Expander.get(...) expects address to be a number");if(typeof d.controller!="string")throw new Error("Expander.get(...) expects controller name to be a string");const S=h.get(d.address);return S&&S.name===d.controller.toUpperCase()?S:new A(d)},A.byAddress=d=>h.get(d),A.byController=d=>{let S=null;return h.forEach(R=>{R.name===d.toUpperCase()&&(S=R)}),S},A.hasController=d=>x[d]!==void 0,r.IS_TEST_MODE&&(A.Controllers=x,A.purge=()=>{c.clear(),h.clear()}),oc=A,oc}var lc,Fd;function ot(){if(Fd)return lc;Fd=1;var r={};const t=Ct,n=fm,s=pi,a=Et,c=Qp,h=eg,p=Ym;let x=!!r.IS_TEST_MODE,b;const y=[],A=/usb|acm|^com/i,d="undefined",S={used:[],attempts:[],detect(C){let F;parseFloat(Ce.versions.nw)>=.13?F=zv():F=Eg(),F.list().then(q=>{const ie=q.reduce((G,$)=>{let K=!0;return A.test($.path)||(K=!1),S.used.includes($.path)&&(K=!1),K&&G.push($.path),G},[]);if(!ie.length){if(x&&this.abort)return;if(S.attempts[S.used.length]||(S.attempts[S.used.length]=0,this.info("Board","Looking for connected device")),S.attempts[S.used.length]++,S.attempts[S.used.length]>10){this.fail("Board","No connected device found");return}setTimeout(()=>{S.detect.call(this,C)},400);return}this.info("Available",n.grey(ie)),C.call(this,ie[0])})},connect(C,O){const H=gy().Board;let F=null,q,ie,G,$;typeof C=="object"&&C.path?(G=C.path,this.info(C.transport||"SerialPort",n.grey(G))):G=C,S.used.push(G);try{q=new H(C,K=>{K&&(F=K),O.call(this,F,F?"error":"ready",q)}),q.name="Firmata",q.defaultLed=13,q.port=G,ie=!0}catch(K){F=K}F&&(F=F.message||F),$=ie?"connect":"error",O.call(this,F,$,q)}};class R extends t{constructor(O={}){super();const H={};let F=!1;Object.assign(this,O),this.timer=null,this.isConnected=!1,this.isReady=!1,this.io=this.io||null,this.register=[],this.occupied=[],this.Drivers={},this.id||(this.id=a.uid()),typeof this.debug===d&&(this.debug=!0),typeof this.repl===d&&(this.repl=!0),typeof this.sigint===d&&(this.sigint=!0),this.pins=null,this.repl&&(c.ref?(H[this.id]=this,c.ref.on("ready",function(){c.ref.inject(H)}),this.repl=c.ref):(H[this.id]=H.board=this,this.repl=new c(H))),O.io?(this.io=O.io,this.isReady=O.io.isReady,this.transport=this.io.transport||null,this.port=this.io.name,this.pins=R.Pins(this),this.RESOLUTION=Object.assign({ADC:1023,DAC:null,PWM:255},this.io.RESOLUTION||{})):this.port&&O.port?S.connect.call(this,this.port,M):S.detect.call(this,function(q){S.connect.call(this,q,M)}),!O.port&&this.io!==null&&(this.info("Available",n.grey(this.io.name||"unknown")),["connect","ready"].forEach(q=>{this.io.once(q,()=>{q==="ready"&&!this.isConnected?F=!0:M.call(this,null,q,this.io),q==="connect"&&F&&M.call(this,null,"ready",this.io)}),this.io.isReady&&Ce.nextTick(()=>this.io.emit(q))})),this.once("ready",()=>{const q=Ce.hrtime();this.millis=function(){return Ce.hrtime(q)[1]/1e6},["close","disconnect","error","string"].forEach(ie=>{this.io.on(ie,G=>this.emit(ie,G))})}),y.push(this)}}function M(C,O,H){let F=!1;this.io||(this.io=H),O==="error"&&C&&C.message&&(F=!0,this.error("Error",C.message)),O==="connect"&&(this.isConnected=!0,this.port=H.port||H.name,this.info("Connected",n.grey(this.port)),x||(this.timer=setTimeout(()=>{this.error("Device or Firmware Error",`A timeout occurred while connecting to the Board. 

Please check that you've properly flashed the board with the correct firmware.
See: https://github.com/rwaldron/johnny-five/wiki/Getting-Started#trouble-shooting

If connecting to a Leonardo or Leonardo clone, press the 'Reset' button on the board, wait approximately 11 seconds for complete reset, then run your program again.`),this.emit("error",new Error("A timeout occurred while connecting to the Board."))},this.timeout||1e4))),O==="ready"&&(this.timer&&clearTimeout(this.timer),this.isReady=!0,this.pins=R.Pins(this),this.MODES=this.io.MODES,typeof H.debug!==d&&H.debug===!1&&(this.debug=!1),typeof H.repl!==d&&H.repl===!1&&(this.repl=!1),this.repl&&this.repl.initialize(()=>this.emit("ready")),H.name!=="Mock"&&this.sigint&&Ce.on("SIGINT",()=>{this.emit("exit"),this.warn("Board","Closing.");const ie=setTimeout(()=>{Ce.reallyExit()},1e3),G=setInterval(()=>{this.io.pending||(clearInterval(G),clearTimeout(ie),Ce.nextTick(Ce.reallyExit))},1)}),this.RESOLUTION=Object.assign({ADC:1023,DAC:null,PWM:255},H.RESOLUTION||{})),this.repl?O==="connect"&&this.emit(O,C):F||this.emit(O,C)}["digitalWrite","analogWrite","analogRead","digitalRead","pinMode","queryPinState","stepperConfig","stepperStep","sendI2CConfig","sendI2CWriteRequest","sendI2CReadRequest","i2cConfig","i2cWrite","i2cWriteReg","i2cRead","i2cReadOnce","pwmWrite","servoConfig","servoWrite","sysexCommand","sysexResponse","serialConfig","serialWrite","serialRead","serialStop","serialClose","serialFlush","serialListen"].forEach(function(C){R.prototype[C]=function(){return this.io[C].apply(this.io,arguments),this}}),R.prototype.snapshot=function(C){const O=this.snapshot.blacklist,H=this.snapshot.special,F=typeof C=="function";return this.register.reduce((q,ie)=>(typeof ie.components===d&&q.push(Object.getOwnPropertyNames(ie).reduce((G,$)=>{const K=ie[$];if(!O.includes($)&&typeof K!="function")if(F){const Y=C($,K,ie);Y!==void 0&&(G[$]=Y)}else G[$]=H[$]?H[$](K):K;return G},Object.create(null))),q),[])},R.prototype.serialize=function(C){return JSON.stringify(this.snapshot(C))},R.prototype.snapshot.blacklist=["board","io","_events","_eventsCount","state"],R.prototype.samplingInterval=function(C){if(this.io.setSamplingInterval)this.io.setSamplingInterval(C);else throw new Error("This IO plugin does not implement an interval adjustment method");return this},R.prototype.snapshot.special={mode:function(C){return["INPUT","OUTPUT","ANALOG","PWM","SERVO"][C]||"unknown"}},R.prototype.shiftOut=function(C,O,H,F){arguments.length===3&&(F=H,H=!0);for(let q=0;q<8;q++)this.io.digitalWrite(O,0),H?this.io.digitalWrite(C,!!(F&1<<7-q)|0):this.io.digitalWrite(C,!!(F&1<<q)|0),this.io.digitalWrite(O,1)};const T={specials:["error","fail","warn","info"],colors:{log:"white",error:"red",fail:"inverse",warn:"yellow",info:"cyan"}};R.prototype.log=function(){var C=Array.from(arguments);T.specials.includes(C[0])||C.unshift("log");var O=C.shift(),H=C.shift(),F=C.shift(),q=T.colors[O],ie=Date.now(),G={type:O,timestamp:ie,class:H,message:"",data:null};typeof C[C.length-1]=="object"&&(G.data=C.pop()),F+=" "+C.join(", "),G.message=F.trim(),this.debug&&console.log([n.grey(ie),n.magenta(H),n[q](F),C.join(", ")].join(" ")),this.emit(O,G),this.emit("message",G)},T.specials.forEach(function(C){R.prototype[C]=function(){var O=[].slice.call(arguments);O.unshift(C),this.log.apply(this,O)}}),R.prototype.wait=function(C,O){return setTimeout(O,C),this},R.prototype.loop=function(C,O){var H=function(){O(function(){clearInterval(F)})},F=setInterval(H,C);return this},R.map=a.map,R.fmap=a.fmap,R.constrain=a.constrain,R.range=a.range,R.uid=a.uid,R.mount=function(C){var O=typeof C=="number"&&C,H;return C&&C.board?C.board:typeof O=="number"?(H=y[O],H||null):y.length?y[0]:null},R.Component=function(C,O){typeof C===d&&(C={}),typeof O===d&&(O={}),this.board=R.mount(C),this.io=this.board.io,this.id=C.id||R.uid(),this.custom=C.custom||{};var H;if(typeof C.pin=="number"||typeof C.pin=="string")H=[C.pin];else if(Array.isArray(C.pins))H=C.pins.slice();else if(typeof C.pins=="object"&&C.pins!==null){var F=C.pins||C.pin;H=[];for(var q in F)H.push(F[q])}C.controller&&(typeof C.controller=="string"&&(C.controller=C.controller.replace(/-/g,"")),b||(b=Zr()),b.hasController(C.controller)&&(O={normalizePin:!1,requestPin:!1})),O=R.Component.initialization(O),O.normalizePin&&(C=R.Pins.normalize(C,this.board)),typeof C.pins!==d&&(this.pins=C.pins||[]),typeof C.pin!==d&&(this.pin=C.pin),typeof C.emitter!==d&&(this.emitter=C.emitter),typeof C.address!==d&&(this.address=C.address),typeof C.controller!==d&&(this.controller=C.controller),typeof C.bus!==d&&(this.bus=C.bus),this.board.register.push(this)},R.Component.initialization=function(C){var O={requestPin:!0,normalizePin:!0};return Object.assign({},O,C)},R.Controller=function(C,O){let H;if(typeof O.controller=="string"?H=C[O.controller]||C[O.controller.toUpperCase()]:H=O.controller||C.DEFAULT||null,H===null)throw new Error("No Valid Controller Found");let F=H.requirements&&H.requirements.value;F&&F.options&&Object.keys(F.options).forEach(function(q){if(typeof O[q]===d||typeof O[q]!==F.options[q].typeof){if(F.options[q].throws)throw new Error(F.options[q].message);this.board.warn(this.constructor.name,F.options[q].message)}},this),Object.defineProperties(this,H)},R.Pins=p,R.Options=function(C){return new h(C)},Object.defineProperty(R,"cache",{get(){return y}}),R.Event=function(C){if(typeof C===d)throw new Error("Board.Event missing Event object");this.type=C.type||"data",this.target=C.target||null,Object.assign(this,C)};class w extends s{constructor(O){let H;if(Array.isArray(O)&&(H=O.slice(),O={ports:H}),!Array.isArray(O)&&typeof O=="object"&&O.ports!==void 0&&(H=O.ports),!Array.isArray(H))throw new Error("Expected ports to be an array");typeof O.debug===d&&(O.debug=!0),typeof O.repl===d&&(O.repl=!0);const F={},q=H.some(({repl:K})=>K===!1),ie=H.some(({debug:K})=>K===!1),G=H.map(K=>{let Y;return typeof K=="string"?(Y={},A.test(K)?Y.port=K:Y.id=K):Y=K,Y.repl=!1,new R(Y)});super(G),this.debug=O.debug,this.repl=O.repl,ie&&(this.debug=!1),q&&(this.repl=!1);const $=this.map((K,Y)=>(F[K.id]=K,new Promise(Q=>{this[Y].on("error",se=>this.emit("error",se)),this[Y].on("fail",se=>this.emit("fail",se)),this[Y].on("ready",()=>Q(this[Y]))})));Promise.all($).then(()=>{this.each(K=>{K.info("Board ID: ",n.green(K.id))}),this.repl?(this.repl=new c(Object.assign({},F,{board:this})),this.repl.initialize(()=>this.emit("ready",F))):this.emit("ready",F)}).catch(K=>{console.error(n.red(K))})}static get type(){return R}}return s.installMethodForwarding(w.prototype,R.prototype),Object.assign(w.prototype,t.prototype),w.prototype.byId=function(C){for(var O=0;O<this.length;O++)if(this[O].id===C)return this[O];return null},w.prototype.log=R.prototype.log,T.specials.forEach(function(C){w.prototype[C]=function(){var O=[].slice.call(arguments);O.unshift(C),this.log.apply(this,O)}}),x&&(S.purge=function(){S.used.length=0},R.Serial=S,R.purge=function(){R.Pins.normalize.clear(),c.isActive=!1,c.isBlocked=!0,c.ref=null,y.length=0},R.testMode=function(C){if(arguments.length)x=C;else return x}),R.Array=w,R.Collection=w,lc=R,lc}var ac,Gd;function Tg(){if(Gd)return ac;Gd=1;var r={};const t=ot(),n=Ct,{toFixed:s}=Et,a=new Map,c={MPL3115A2:{requirements:{value:{options:{elevation:{throws:!1,message:"Missing `elevation` option. Without a specified base `elevation`, the altitude measurement will be inaccurate. Use the meters value shown on whatismyelevation.com",typeof:"number"}}}},initialize:{value(p,x){const{Drivers:b}=Ue();b.get(this.board,"MPL3115A2",p).on("data",({altitude:y})=>x(y))}},toMeters:{writable:!0,value(p){return s(p,1)}}},MS5611:{initialize:{value(p,x){const{Drivers:b}=Ue();b.get(this.board,"MS5611",p).on("data",({altitude:y})=>x(y))}},toMeters:{writable:!0,value(p){return s(p,2)}}},BMP180:{initialize:{value(p,x){const{Drivers:b}=Ue();b.get(this.board,"BMP180",p).on("data",({altitude:y})=>x(y))}},toMeters:{writable:!0,value(p){return s(p,2)}}},BMP280:{initialize:{value(p,x){const{Drivers:b}=Ue();b.get(this.board,"BMP280",p).on("data",({altitude:y})=>x(y))}},toMeters:{writable:!0,value(p){return s(p,3)}}},BME280:{initialize:{value(p,x){const{Drivers:b}=Ue();b.get(this.board,"BME280",p).on("data",({altitude:y})=>x(y))}},toMeters:{writable:!0,value(p){return s(p,3)}}}};c.BMP085=c["BMP-085"]=c.BMP180;class h extends n{constructor(x){super(),t.Component.call(this,x=t.Options(x)),t.Controller.call(this,c,x);const b={},y=x.freq||25;let A=null,d=null;this.toMeters||(this.toMeters=x.toMeters||(R=>R)),a.set(this,b);const S={meters:{get(){return this.toMeters(d)}},feet:{get(){return s(this.meters*3.28084,2)}}};S.m=S.meters,S.ft=S.feet,Object.defineProperties(this,S),typeof this.initialize=="function"&&this.initialize(x,R=>d=R),setInterval(()=>{if(d==null)return;const R={};R.m=R.meters=this.meters,R.ft=R.feet=this.feet,this.emit("data",R),this.meters!==A&&(A=this.meters,this.emit("change",R))},y)}}return r.IS_TEST_MODE&&(h.Controllers=c,h.purge=function(){a.clear()}),ac=h,ac}var uc,Wd;function Ag(){if(Wd)return uc;Wd=1;var r={};const t=ot(),n=Ct,{toFixed:s}=Et,a={MPL115A2:{initialize:{value(h,p){const{Drivers:x}=Ue();x.get(this.board,"MPL115A2",h).on("data",({pressure:b})=>p(b))}},toPressure:{value(h){return s(65/1023*h+50,2)}}},MPL3115A2:{initialize:{value(h,p){const{Drivers:x}=Ue();x.get(this.board,"MPL3115A2",h).on("data",({pressure:b})=>p(b))}},toPressure:{value(h){const x=h/4/3377*3.39;return s(x,4)}}},BMP180:{initialize:{value(h,p){const{Drivers:x}=Ue();x.get(this.board,"BMP180",h).on("data",({pressure:b})=>p(b))}},toPressure:{value(h){return s(h/1e3,3)}}},BMP280:{initialize:{value(h,p){const{Drivers:x}=Ue();x.get(this.board,"BMP280",h).on("data",({pressure:b})=>p(b))}},toPressure:{value(h){return s(h/1e3,5)}}},BME280:{initialize:{value(h,p){const{Drivers:x}=Ue();x.get(this.board,"BME280",h).on("data",({pressure:b})=>p(b))}},toPressure:{value(h){return s(h/1e3,5)}}},MS5611:{initialize:{value(h,p){const{Drivers:x}=Ue();x.get(this.board,"MS5611",h).on("data",({pressure:b})=>p(b))}},toPressure:{value(h){return s(h/1e3,4)}}}};a.BMP085=a.BMP180;class c extends n{constructor(p){super(),t.Component.call(this,p=t.Options(p)),t.Controller.call(this,a,p);const x=p.freq||25;let b=null,y=null;this.toPressure||(this.toPressure=p.toPressure||(A=>A)),typeof this.initialize=="function"&&this.initialize(p,A=>{y=A}),Object.defineProperties(this,{pressure:{get(){return this.toPressure(y)}}}),setInterval(()=>{if(y===null)return;const A={pressure:this.pressure};this.emit("data",A),this.pressure!==b&&(b=this.pressure,this.emit("change",A))},x)}}return r.IS_TEST_MODE&&(c.Controllers=a,c.purge=function(){}),uc=c,uc}var cc,Ud;function bg(){if(Ud)return cc;Ud=1;var r={};const t=ot(),n=Ct,s=Et,a=s.sum,c=s.toFixed,h=new Map,p=["x","y","z"],x={ANALOG:{initialize:{value(y,A){const d=y.pins||[];let S,R;const M=h.get(this),T={};if(y.sensitivity===void 0)throw new Error("Expected a Sensitivity");S=y.sensitivity,R=y.resolution||4.88,M.K=R/S,d.forEach(function(w,C){this.io.pinMode(w,this.io.MODES.ANALOG),this.io.analogRead(w,O=>{const H=p[C];T[H]=O,A(T)})},this)}},toNormal:{value(y){return y>>2}},toDegreesPerSecond:{value(y,A){const d=this.toNormal(y),S=this.toNormal(A),R=h.get(this);return(d-S)*R.K|0}}},MPU6050:{initialize:{value(y,A){const d=Ue(),S=h.get(this),R=d.Drivers.get(this.board,"MPU6050",y);S.sensitivity=y.sensitivity||131,R.on("data",({gyro:M})=>{A(M)})}},toNormal:{value(y){return(y>>11)+127}},toDegreesPerSecond:{value(y,A){const d=h.get(this);return c((y-A)/d.sensitivity,4)}}},BNO055:{initialize:{value(y,A){const d=Ue(),S=h.get(this),R=d.Drivers.get(this.board,"BNO055",y);S.sensitivity=16,R.on("data",({gyro:M})=>{A(M)})}},toNormal:{value(y){return y}},toDegreesPerSecond:{value(y){const A=h.get(this);return c(y/A.sensitivity,4)}}}};x.DEFAULT=x.ANALOG;class b extends n{constructor(A){super();let d=!1;const S=100,R={x:{angle:0,value:0,previous:0,calibration:[],stash:[0,0,0,0,0],center:0,hasValue:!1},y:{angle:0,value:0,previous:0,calibration:[],stash:[0,0,0,0,0],center:0,hasValue:!1},z:{angle:0,value:0,previous:0,calibration:[],stash:[0,0,0,0,0],center:0,hasValue:!1}};t.Component.call(this,A=t.Options(A)),t.Controller.call(this,x,A),this.toNormal||(this.toNormal=A.toNormal||(M=>M)),this.toDegreesPerSecond||(this.toDegreesPerSecond=A.toDegreesPerSecond||(M=>M)),h.set(this,R),typeof this.initialize=="function"&&this.initialize(A,M=>{let T=!1;Object.keys(M).forEach(w=>{const C=M[w],O=R[w];O.previous=O.value,O.stash.shift(),O.stash.push(C),O.hasValue=!0,O.value=a(O.stash)/5|0,!d&&R.x.calibration.length===S&&R.y.calibration.length===S&&(this.z===void 0||R.z.calibration.length===S)?(d=!0,R.x.center=a(R.x.calibration)/S|0,R.y.center=a(R.y.calibration)/S|0,R.z.center=a(R.z.calibration)/S|0,R.x.calibration.length=0,R.y.calibration.length=0,R.z.calibration.length=0):O.calibration.length<S&&O.calibration.push(C),O.previous!==O.value&&(T=!0)}),d&&(R.x.angle+=this.rate.x/100,R.y.angle+=this.rate.y/100,R.z.angle+=this.rate.z/100,this.emit("data",{x:this.x,y:this.y,z:this.z}),T&&this.emit("change",{x:this.x,y:this.y,z:this.z}))}),Object.defineProperties(this,{isCalibrated:{get(){return d},set(M){typeof M=="boolean"&&(d=M)}},pitch:{get(){return{rate:c(this.rate.y,2),angle:c(R.y.angle,2)}}},roll:{get(){return{rate:c(this.rate.x,2),angle:c(R.x.angle,2)}}},yaw:{get(){return{rate:this.z!==void 0?c(this.rate.z,2):0,angle:this.z!==void 0?c(R.z.angle,2):0}}},x:{get(){return c(this.toNormal(R.x.value),4)}},y:{get(){return c(this.toNormal(R.y.value),4)}},z:{get(){return R.z.hasValue?c(this.toNormal(R.z.value),4):void 0}},rate:{get(){const M=this.toDegreesPerSecond(R.x.value,R.x.center),T=this.toDegreesPerSecond(R.y.value,R.y.center),w=R.z.hasValue?this.toDegreesPerSecond(R.z.value,R.z.center):0;return{x:M,y:T,z:w}}}})}recalibrate(){this.isCalibrated=!1}}return Object.defineProperties(b,{TK_4X:{value:.67},TK_1X:{value:.167}}),r.IS_TEST_MODE&&(b.Controllers=x,b.purge=()=>{h.clear()}),cc=b,cc}var hc,kd;function Cg(){if(kd)return hc;kd=1;var r={};const t=ot(),n=Ct,s=Et,a=new Map,{toFixed:c,POW_2_14:h,POW_2_16:p}=s,x=!0,b={SHT31D:{initialize:{value(A,d){const{Drivers:S}=Ue();S.get(this.board,"SHT31D",A).on("data",({humidity:R})=>d(R))}},toRelativeHumidity:{writable:x,value(A){return c(100*(A/(p-1)),2)}}},HTU21D:{initialize:{value(A,d){const{Drivers:S}=Ue();S.get(this.board,"HTU21D",A).on("data",({humidity:R})=>d(R))}},toRelativeHumidity:{writable:x,value(A){return c(-6+125*(A/p),2)}}},HIH6130:{initialize:{value(A,d){const{Drivers:S}=Ue();S.get(this.board,"HIH6130",A).on("data",({humidity:R})=>d(R))}},toRelativeHumidity:{writable:x,value(A){return c(A/(h-1)*100,2)}}},DHT_I2C_NANO_BACKPACK:{initialize:{value(A,d){const{Drivers:S}=Ue();S.get(this.board,"DHT_I2C_NANO_BACKPACK",A).on("data",({humidity:R})=>d(R))}},toRelativeHumidity:{writable:x,value(A){return c(A/100,1)}}},TH02:{initialize:{value(A,d){const{Drivers:S}=Ue();S.get(this.board,"TH02",A).on("data",({humidity:R})=>d(R))}},toRelativeHumidity:{writable:x,value(A){return A>100&&(A=0),c(A||0,2)}}},SI7020:{initialize:{value(A,d){const{Drivers:S}=Ue();S.get(this.board,"SI7020",A).on("data",({humidity:R})=>d(R))}},toRelativeHumidity:{writable:x,value(A){return c(125*A/p-6,2)}}},BME280:{initialize:{value(A,d){const{Drivers:S}=Ue();S.get(this.board,"BME280",A).on("data",({humidity:R})=>d(R))}},toRelativeHumidity:{writable:x,value(A){return c(A/1024,3)}}}};b.DHT11_I2C_NANO_BACKPACK=b.DHT_I2C_NANO_BACKPACK,b.DHT21_I2C_NANO_BACKPACK=b.DHT_I2C_NANO_BACKPACK,b.DHT22_I2C_NANO_BACKPACK=b.DHT_I2C_NANO_BACKPACK,b.SI7021=b.SI7020;class y extends n{constructor(d){super();const S=d.freq||25;let R=null,M=null;t.Component.call(this,d=t.Options(d)),t.Controller.call(this,b,d),a.set(this,{}),this.toRelativeHumidity||(this.toRelativeHumidity=d.toRelativeHumidity||(w=>w));const T={relativeHumidity:{get(){return this.toRelativeHumidity(M)}}};T.RH=T.relativeHumidity,Object.defineProperties(this,T),typeof this.initialize=="function"&&this.initialize(d,w=>{M=w}),setInterval(()=>{if(M==null||Number.isNaN(this.relativeHumidity))return;const w={};w.RH=w.relativeHumidity=this.relativeHumidity,this.emit("data",w),this.relativeHumidity!==R&&(R=this.relativeHumidity,this.emit("change",w))},S)}}return r.IS_TEST_MODE&&(y.Controllers=b,y.purge=()=>{a.clear()}),hc=y,hc}var fc,Hd;function Og(){if(Hd)return fc;Hd=1;var r={};const t=ot(),n=Ct,{int16:s,RAD_TO_DEG:a,TAU:c}=Et,h=new Map,p={HMC5883L:{REGISTER:{value:{CRA:0,CRB:1,MODE:2,READ:3}},initialize:{value(y,A){const d=h.get(this),S=y.address||30,R=6;d.scale=1,Object.assign(d,new x.Scale(y.gauss||.88)),y.address=S,this.io.i2cConfig(y),this.io.i2cWrite(S,this.REGISTER.CRA,112),this.io.i2cWrite(S,this.REGISTER.CRB,64),this.io.i2cWrite(S,this.REGISTER.MODE,0),this.io.i2cRead(S,this.REGISTER.READ,R,M=>{A({x:s(M[0],M[1]),y:s(M[4],M[5]),z:s(M[2],M[3])})})}},toScaledHeading:{value({x:y,y:A}){const d=h.get(this);return b(y*d.scale,A*d.scale)}}},HMC6352:{REGISTER:{value:{READ:65}},initialize:{value(y,A){const d=h.get(this),S=y.address||33,R=2;d.scale=1,y.delay=10,y.address=S,this.io.i2cConfig(y),this.io.i2cWrite(S,this.REGISTER.READ),this.io.i2cRead(S,this.REGISTER.READ,R,M=>{A({x:((M[0]<<8)+M[1])/10|0,y:null,z:null})})}},toScaledHeading:{value({x:y}){const A=h.get(this);return y*A.scale}}},BNO055:{initialize:{value(y,A){const S=Ue().Drivers.get(this.board,"BNO055",y),R=h.get(this);R.sensitivity=16,S.on("data",({magnetometer:M})=>{A(M)})}},toScaledHeading:{value(y){const A=h.get(this),d=y.x/A.sensitivity,S=y.y/A.sensitivity;return b(d,S)}}},MAG3110:{REGISTER:{value:{STATUS:0,READ:1,OFFSETS:9,CTRL_REG1:16,CTRL_REG2:17}},initialize:{value(y,A){const d=h.get(this),S=14;let R=!1,M;d.isCalibrated=!1,d.isPreCalibrated=!1,d.hasEmittedCalibration=!1,d.measurements=20,d.offsets={x:0,y:0,z:0},d.accum={x:{offset:null,high:0,low:0},y:{offset:null,high:0,low:0},z:{offset:null,high:0,low:0}},y.delay=2,y.address=S,y.offsets&&(d.isCalibrated=!0,d.isPreCalibrated=!0,Array.isArray(y.offsets)&&(M=y.offsets.slice(),y.offsets={x:M[0],y:M[1],z:M[2]}),d.accum.x.low=y.offsets.x[0],d.accum.x.high=y.offsets.x[1],d.accum.x.offset=(d.accum.x.low+d.accum.x.high)/2,d.accum.y.low=y.offsets.y[0],d.accum.y.high=y.offsets.y[1],d.accum.y.offset=(d.accum.y.low+d.accum.y.high)/2,d.accum.z.low=y.offsets.z[0],d.accum.z.high=y.offsets.z[1],d.accum.z.offset=(d.accum.z.low+d.accum.z.high)/2),this.io.i2cConfig(y),this.io.i2cWrite(S,this.REGISTER.CTRL_REG2,128),this.io.i2cWrite(S,this.REGISTER.CTRL_REG1,1);const T={x:0,y:0,z:0},w=()=>{this.io.i2cReadOnce(S,this.REGISTER.STATUS,1,C=>{!R&&(C[0]===15||C[0]===255)?(R=!0,this.io.i2cReadOnce(S,this.REGISTER.READ,6,O=>{let H=0;R=!1,T.x=s(O[0],O[1]),T.y=s(O[2],O[3]),T.z=s(O[4],O[5]),d.isCalibrated||(d.accum.x.offset===null&&(d.accum.x.offset=T.x,d.accum.x.low=T.x,d.accum.x.high=T.x),d.accum.y.offset===null&&(d.accum.y.offset=T.y,d.accum.y.low=T.y,d.accum.y.high=T.y),d.accum.x.low=Math.min(d.accum.x.low,T.x),d.accum.x.high=Math.max(d.accum.x.high,T.x),d.accum.x.offset=Math.trunc((d.accum.x.low+d.accum.x.high)/2),d.accum.y.low=Math.min(d.accum.y.low,T.y),d.accum.y.high=Math.max(d.accum.y.high,T.y),d.accum.y.offset=Math.trunc((d.accum.y.low+d.accum.y.high)/2),d.accum.z.low=Math.min(d.accum.z.low,T.z),d.accum.z.high=Math.max(d.accum.z.high,T.z),d.accum.z.offset=Math.trunc((d.accum.z.low+d.accum.z.high)/2),--d.measurements,d.measurements||(d.isCalibrated=!0)),d.isCalibrated&&(d.hasEmittedCalibration||(d.hasEmittedCalibration=!0,d.offsets.x=d.accum.x.offset,d.offsets.y=d.accum.y.offset,d.offsets.z=d.accum.z.offset,this.io.i2cWrite(S,this.REGISTER.OFFSETS,[d.offsets.x>>7,d.offsets.x<<1&255,d.offsets.y>>7,d.offsets.y<<1&255,d.offsets.z>>7,d.offsets.z<<1&255]),this.emit("calibrated",{x:[d.accum.x.low,d.accum.x.high],y:[d.accum.y.low,d.accum.y.high],z:[d.accum.z.low,d.accum.z.high]})),H=Math.floor(1e3/80),A(T)),setTimeout(w,H)})):w()})};w()}},calibrate:{value(y){const A=h.get(this);A.isCalibrated=!1,A.measurements=y}},toScaledHeading:{value({y,x:A}){const d=h.get(this),S={x:1/(d.accum.x.high-d.accum.x.low),y:1/(d.accum.y.high-d.accum.y.low)};let R=Math.atan2(-y*S.y,A*S.x);return R<0&&(R+=c),Math.trunc(R*a)}}},LSM303C:{initialize:{value(y,A){Ue().Drivers.get(this.board,"LSM303C",y).on("data",({magnetometer:R})=>{A(R)})}},toScaledHeading:{value({x:y,y:A}){return b(y,A)}}}};class x extends n{constructor(A){super(),t.Component.call(this,A=t.Options(A));const d=A.freq||25;let S={x:null,y:null,z:null};const R={x:0,y:0,z:0,scale:0,register:0,heading:0};t.Controller.call(this,p,A),this.toScaledHeading||(this.toScaledHeading=A.toScaledHeading||(M=>M)),h.set(this,R),typeof this.initialize=="function"&&this.initialize(A,M=>S=M),setInterval(()=>{if(S.x===null)return;let M=!1;R.x=S.x,R.y=S.y,R.z=S.z;const T=this.heading;T!==R.heading&&(R.heading=T,M=!0),this.emit("data",{heading:T}),M&&this.emit("change",{heading:T})},d),Object.defineProperties(this,{bearing:{get(){const M=x.Points.length,T=this.heading;let w;for(let C=0;C<M;C++)if(w=x.Points[C],T>=w.low&&T<=w.high)return{name:w.name,abbr:w.abbr,low:w.low,high:w.high,heading:T}}},raw:{get(){return{x:S.x,y:S.y,z:S.z}}},heading:{get(){return this.toScaledHeading(S)}}})}}x.Scale=class{constructor(y){y===.88?(this.register=0,this.scale=.73):y===1.3?(this.register=1,this.scale=.92):y===1.9?(this.register=2,this.scale=1.22):y===2.5?(this.register=3,this.scale=1.52):y===4?(this.register=4,this.scale=2.27):y===4.7?(this.register=5,this.scale=2.56):y===5.6?(this.register=6,this.scale=3.03):y===8.1?(this.register=7,this.scale=4.35):(this.register=0,this.scale=1),this.register=this.register<<5}};function b(y,A){let d=Math.atan2(A,y);return d<0&&(d+=c),d>c&&(d-=c),d*a}return x.Points=[{name:"North",abbr:"N",low:354.38,high:360},{name:"North",abbr:"N",low:0,high:5.62},{name:"North by East",abbr:"NbE",low:5.63,high:16.87},{name:"North-NorthEast",abbr:"NNE",low:16.88,high:28.12},{name:"NorthEast by North",abbr:"NEbN",low:28.13,high:39.37},{name:"NorthEast",abbr:"NE",low:39.38,high:50.62},{name:"NorthEast by East",abbr:"NEbE",low:50.63,high:61.87},{name:"East-NorthEast",abbr:"ENE",low:61.88,high:73.12},{name:"East by North",abbr:"EbN",low:73.13,high:84.37},{name:"East",abbr:"E",low:84.38,high:95.62},{name:"East by South",abbr:"EbS",low:95.63,high:106.87},{name:"East-SouthEast",abbr:"ESE",low:106.88,high:118.12},{name:"SouthEast by East",abbr:"SEbE",low:118.13,high:129.37},{name:"SouthEast",abbr:"SE",low:129.38,high:140.62},{name:"SouthEast by South",abbr:"SEbS",low:140.63,high:151.87},{name:"South-SouthEast",abbr:"SSE",low:151.88,high:163.12},{name:"South by East",abbr:"SbE",low:163.13,high:174.37},{name:"South",abbr:"S",low:174.38,high:185.62},{name:"South by West",abbr:"SbW",low:185.63,high:196.87},{name:"South-SouthWest",abbr:"SSW",low:196.88,high:208.12},{name:"SouthWest by South",abbr:"SWbS",low:208.13,high:219.37},{name:"SouthWest",abbr:"SW",low:219.38,high:230.62},{name:"SouthWest by West",abbr:"SWbW",low:230.63,high:241.87},{name:"West-SouthWest",abbr:"WSW",low:241.88,high:253.12},{name:"West by South",abbr:"WbS",low:253.13,high:264.37},{name:"West",abbr:"W",low:264.38,high:275.62},{name:"West by North",abbr:"WbN",low:275.63,high:286.87},{name:"West-NorthWest",abbr:"WNW",low:286.88,high:298.12},{name:"NorthWest by West",abbr:"NWbW",low:298.13,high:309.37},{name:"NorthWest",abbr:"NW",low:309.38,high:320.62},{name:"NorthWest by North",abbr:"NWbN",low:320.63,high:331.87},{name:"North-NorthWest",abbr:"NNW",low:331.88,high:343.12},{name:"North by West",abbr:"NbW",low:343.13,high:354.37}],Object.freeze(x.Points),r.IS_TEST_MODE&&(x.Controllers=p,x.purge=()=>{h.clear()}),fc=x,fc}var dc,zd;function _g(){if(zd)return dc;zd=1;var r={};const t=ot(),n=Ct,s=new Map,a={BNO055:{initialize:{value(h,p){Ue().Drivers.get(this.board,"BNO055",h).on("data",y=>{p(y)})}},toScaledEuler:{value({euler:h}){return{heading:h.heading/16,roll:h.roll/16,pitch:h.pitch/16}}},toScaledQuarternion:{value({quarternion:h}){return{w:h.w*(1/16384),x:h.x*(1/16384),y:h.y*(1/16384),z:h.z*(1/16384)}}},calibration:{get(){return s.get(this).calibration}},isCalibrated:{get(){return(this.calibration>>6&3)===3}}}};class c extends n{constructor(p){super(),t.Component.call(this,p=t.Options(p)),t.Controller.call(this,a,p);const x=p.freq||25,b={euler:{heading:0,roll:0,pitch:0},quarternion:{w:0,x:0,y:0,z:0},calibration:0};let y=null;s.set(this,b),this.toScaledQuarternion||(this.toScaledQuarternion=p.toScaledQuarternion||(A=>A)),this.toScaledEuler||(this.toScaledEuler=p.toScaledEuler||(A=>A)),typeof this.initialize=="function"&&this.initialize(p,A=>y=A),setInterval(()=>{if(y===null)return;let A=!1,d=!1;["heading","roll","pitch"].forEach(R=>{b.euler[R]!==y.orientation.euler[R]&&(A=!0),b.euler[R]=y.orientation.euler[R]}),["w","x","y","z"].forEach(R=>{b.quarternion[R]!==y.orientation.quarternion[R]&&(A=!0),b.quarternion[R]=y.orientation.quarternion[R]}),y.calibration&&(b.calibration!==y.calibration&&(d=!0),b.calibration=y.calibration);const S={euler:this.euler,quarternion:this.quarternion,calibration:this.calibration};this.emit("data",S),A&&this.emit("change",S),d&&this.emit("calibration",this.calibration)},x)}get euler(){return this.toScaledEuler(s.get(this))}get quarternion(){return this.toScaledQuarternion(s.get(this))}}return r.IS_TEST_MODE&&(c.Controllers=a,c.purge=()=>{s.clear()}),dc=c,dc}const my=Ct;let vy=class extends my{constructor(){super()}within(t,n,s){let a;if(typeof t=="number"&&(a=t,t=[0,a]),!Array.isArray(t))throw new Error("within expected a range array");return typeof n=="function"&&(s=n,n="value"),typeof this[n]>"u"?this:(this.on("data",()=>{const c=this[n];c>=t[0]&&c<=t[1]&&s.call(this,null,c)}),this)}};var Xl=vy,pc,$d;function Ig(){if($d)return pc;$d=1;var r={};const t=ot(),n=Bi,s=Xl,{toFixed:a,POW_2_16:c}=Et,{log:h,round:p,trunc:x}=Math,b=273.15;function y(T,w){const C=T.pin;this.io.pinMode(C,this.io.MODES.ANALOG),this.io.analogRead(C,O=>{w.call(this,O)})}const A=new Map,d={MAX31850K:{initialize:{value(T,w){const C={TEMPERATURE_FAMILY:59,CONVERT_TEMPERATURE_COMMAND:68,READ_SCRATCHPAD_COMMAND:190,READ_COUNT:9},O=w.pin,H=w.freq||100,F=q=>{let ie=0;for(let G=6;G>0;G--)ie=ie*256+q[G];return ie};T.io.sendOneWireConfig(O,!0),T.io.sendOneWireSearch(O,(q,ie)=>{if(q){this.emit("error",q);return}if(this.devices=ie.filter(K=>K[0]===C.TEMPERATURE_FAMILY,this),ie.length===0){this.emit("error",new Error("FAILED TO FIND TEMPERATURE DEVICE"));return}this.devices.forEach(K=>{this.emit("initialized",F(K))});let G=()=>this.addresses?this.devices.filter(function(K){const Y=F(K);return this.addresses.includes(Y)},this):[this.devices[0]],$=()=>{let K,Y=G(),Q=G();Q.forEach(ve=>{T.io.sendOneWireReset(O),T.io.sendOneWireWrite(O,ve,C.CONVERT_TEMPERATURE_COMMAND)});let se=ve=>{let we;if(Y.length===0)return ve();we=Y.pop(),T.io.sendOneWireReset(O),T.io.sendOneWireWriteAndRead(O,we,C.READ_SCRATCHPAD_COMMAND,C.READ_COUNT,(le,oe)=>{if(!oe[0]&&(Y.push(we),oe[1]!==0))return ve();se(ve)})},ae=()=>{let ve;if(Q.length===0){setTimeout($,H);return}ve=Q.pop(),T.io.sendOneWireReset(O),T.io.sendOneWireWriteAndRead(O,ve,C.READ_SCRATCHPAD_COMMAND,C.READ_COUNT,(we,le)=>{if(we){this.emit("error",we);return}K=le[1]<<8|le[0],this.emit("data",F(ve),K),ae()})};se(ae)};$()})}},register:{value(T){this.addresses||(this.addresses=[]),this.addresses.push(T)}}},DS18B20:{initialize:{value(T,w){const C={TEMPERATURE_FAMILY:40,CONVERT_TEMPERATURE_COMMAND:68,READ_SCRATCHPAD_COMMAND:190,READ_COUNT:2},O=w.pin,H=w.freq||100;let F,q,ie;F=G=>{let $,K=0;for($=6;$>0;$--)K=K*256+G[$];return K},T.io.sendOneWireConfig(O,!0),T.io.sendOneWireSearch(O,(G,$)=>{if(G){this.emit("error",G);return}if(this.devices=$.filter(K=>K[0]===C.TEMPERATURE_FAMILY,this),$.length===0){this.emit("error",new Error("FAILED TO FIND TEMPERATURE DEVICE"));return}this.devices.forEach(K=>{this.emit("initialized",F(K))}),q=()=>{let K,Y;this.addresses?K=this.devices.filter(function(Q){const se=F(Q);return this.addresses.includes(se)},this):K=[this.devices[0]],K.forEach(Q=>{T.io.sendOneWireReset(O),T.io.sendOneWireWrite(O,Q,C.CONVERT_TEMPERATURE_COMMAND)}),T.io.sendOneWireDelay(O,1),ie=()=>{let Q;if(K.length===0){setTimeout(q,H);return}Q=K.pop(),T.io.sendOneWireReset(O),T.io.sendOneWireWriteAndRead(O,Q,C.READ_SCRATCHPAD_COMMAND,C.READ_COUNT,(se,ae)=>{if(se){this.emit("error",se);return}Y=ae[1]<<8|ae[0],this.emit("data",F(Q),Y),ie()})},ie()},q()})}},register:{value(T){this.addresses||(this.addresses=[]),this.addresses.push(T)}}}};d.get=(T,w,C)=>{let O,H;A.has(T)||A.set(T,{}),O=A.get(T);const F=`${w}_${C.pin}`;return O[F]||(H=new n,Object.defineProperties(H,d[w]),H.initialize(T,C),O[F]=H),O[F]},d.clear=()=>{A.clear()};const S={ANALOG:{initialize:{value:y}},LM35:{initialize:{value:y},toCelsius:{value(T){const w=this.aref*1e3*T/1023;return p(w/10)}}},LM335:{initialize:{value:y},toCelsius:{value(T){const w=this.aref*1e3*T/1023;return p(w/10-b)}}},TMP36:{initialize:{value:y},toCelsius:{value(T){const w=this.aref*1e3*T/1023;return p(w/10-50)}}},TMP102:{ADDRESSES:{value:[72]},initialize:{value(T,w){const{Drivers:C}=Ue(),O=C.addressResolver(this,T);this.io.i2cConfig(T),this.io.i2cRead(O,0,2,H=>{let F=(H[0]<<8|H[1])>>4;F&2048&&(F|=63488),F=F>>15?((F^65535)+1)*-1:F,w(F)})}},toCelsius:{value(T){return a(T/16,1)}}},MAX31850K:{initialize:{value(T,w){const C=R.get(this),O=T.address,H=d.get(this.board,"MAX31850K",T);O?(C.address=O,H.register(O)):(H.addressless&&this.emit("error","You cannot have more than one MAX31850K without an address"),H.addressless=!0),H.once("initialized",F=>{C.address||(C.address=F)}),H.on("data",(F,q)=>{(!O||F===O)&&w(q)})}},toCelsius:{value(T){return a(T/16,2)}},address:{get(){return R.get(this).address||0}}},DS18B20:{initialize:{value(T,w){const C=R.get(this),O=T.address,H=d.get(this.board,"DS18B20",T);O?(C.address=O,H.register(O)):(H.addressless&&this.emit("error","You cannot have more than one DS18B20 without an address"),H.addressless=!0),H.once("initialized",F=>{C.address||(C.address=F)}),H.on("data",(F,q)=>{(!O||F===O)&&w(q)})}},toCelsius:{value(T){return a(T/16,4)}},address:{get(){return R.get(this).address||0}}},SHT31D:{initialize:{value(T,w){const{Drivers:C}=Ue();C.get(this.board,"SHT31D",T).on("data",({temperature:O})=>w(O))}},toCelsius:{value(T){return a(-45+175*(T/(c-1)),3)}}},HTU21D:{initialize:{value(T,w){const{Drivers:C}=Ue();C.get(this.board,"HTU21D",T).on("data",({temperature:O})=>w(O))}},toCelsius:{value(T){return a(-46.85+175.72*(T/c),2)}}},HIH6130:{initialize:{value(T,w){const{Drivers:C}=Ue();C.get(this.board,"HIH6130",T).on("data",({temperature:O})=>w(O))}},toCelsius:{value(T){return p(T/1e3)}}},DHT_I2C_NANO_BACKPACK:{initialize:{value(T,w){const{Drivers:C}=Ue();C.get(this.board,"DHT_I2C_NANO_BACKPACK",T).on("data",({temperature:O})=>w(O))}},toCelsius:{value(T){return p(T/100)}}},TH02:{initialize:{value(T,w){const{Drivers:C}=Ue();C.get(this.board,"TH02",T).on("data",({temperature:O})=>w(O))}},toCelsius:{value(T){return a(T,1)}}},MPU6050:{initialize:{value(T,w){const{Drivers:C}=Ue();C.get(this.board,"MPU6050",T).on("data",({temperature:O})=>w(O))}},toCelsius:{value(T){return p(T/340+36.53)}}},BNO055:{initialize:{value(T,w){const{Drivers:C}=Ue();C.get(this.board,"BNO055",T).on("data",({temperature:O})=>w(O))}},toCelsius:{value(T){return x(T)}}},MPL115A2:{initialize:{value(T,w){const{Drivers:C}=Ue();C.get(this.board,"MPL115A2",T).on("data",({temperature:O})=>w(O))}},toCelsius:{value(T){return x((T-498)/-5.35+25)}}},MPL3115A2:{initialize:{value(T,w){const{Drivers:C}=Ue();C.get(this.board,"MPL3115A2",T).on("data",({temperature:O})=>w(O))}},toCelsius:{value(T){return p(T/16)}}},MS5611:{initialize:{value(T,w){const{Drivers:C}=Ue();C.get(this.board,"MS5611",T).on("data",({temperature:O})=>w(O))}},toCelsius:{value(T){return a(T,2)}}},GROVE:{initialize:{value:y},toCelsius:{value(T){const F=(1023-T)*1e4/T,q=1/(h(F/1e4)/3975+1/298.15)-b;return p(q)}}},TINKERKIT:{initialize:{value:y},toCelsius:{value(T){const F=1e4*(1023/T-1),q=3950/h(F*120.6685);return p(q-b)}}},BMP180:{initialize:{value(T,w){const{Drivers:C}=Ue();C.get(this.board,"BMP180",T).on("data",({temperature:O})=>w(O))}},toCelsius:{value(T){return a(T,1)}}},BMP280:{initialize:{value(T,w){const{Drivers:C}=Ue();C.get(this.board,"BMP280",T).on("data",({temperature:O})=>w(O))}},toCelsius:{value(T){return a(T,2)}}},BME280:{initialize:{value(T,w){const{Drivers:C}=Ue();C.get(this.board,"BME280",T).on("data",({temperature:O})=>w(O))}},toCelsius:{value(T){return a(T,2)}}},SI7020:{initialize:{value(T,w){const{Drivers:C}=Ue();C.get(this.board,"SI7020",T).on("data",({temperature:O})=>w(O))}},toCelsius:{value(T){return a(175.72*T/65536-46.85,1)}}},MCP9808:{ADDRESSES:{value:[24]},initialize:{value(T,w){const{Drivers:C}=Ue(),O=C.addressResolver(this,T);this.io.i2cConfig(T),this.io.i2cRead(O,5,2,H=>{let F=((H[0]<<8|H[1])&4095)/16;F&4096&&(F-=256),w(F)})}},toCelsius:{value(T){return a(T,2)}}},LSM303C:{initialize:{value(T,w){const{Drivers:C}=Ue();C.get(this.board,"LSM303C",T).on("data",({temperature:O})=>w(O))}},toCelsius:{value(T){return a(T/8+25,1)}}}};S.BMP085=S.BMP180,S.GY521=S.MPU6050,S.SI7021=S.SI7020,S.DHT11_I2C_NANO_BACKPACK=S.DHT_I2C_NANO_BACKPACK,S.DHT21_I2C_NANO_BACKPACK=S.DHT_I2C_NANO_BACKPACK,S.DHT22_I2C_NANO_BACKPACK=S.DHT_I2C_NANO_BACKPACK,S.DEFAULT=S.ANALOG;var R=new Map;class M extends s{constructor(w){super();let C=null,O=null;t.Component.call(this,w=t.Options(w)),t.Controller.call(this,S,w);const H={enabled:typeof w.enabled>"u"?!0:w.enabled,intervalId:null,freq:w.freq||25,previousFreq:w.freq||25};R.set(this,H),this.aref=w.aref||this.io.aref||5,this.toCelsius||(this.toCelsius=w.toCelsius||(ie=>ie));const F=()=>{if(O==null)return;const ie={};ie.C=ie.celsius=this.celsius,ie.F=ie.fahrenheit=this.fahrenheit,ie.K=ie.kelvin=this.kelvin,this.emit("data",ie),this.celsius!==C&&(C=this.celsius,this.emit("change",ie))},q={celsius:{get(){return this.toCelsius(O)}},fahrenheit:{get(){return a(this.celsius*9/5+32,2)}},kelvin:{get(){return a(this.celsius+b,2)}},freq:{get(){return H.freq},set(ie){H.freq=ie,H.intervalId&&clearInterval(H.intervalId),H.freq!==null&&(H.intervalId=setInterval(F,ie))}}};q.C=q.celsius,q.F=q.fahrenheit,q.K=q.kelvin,Object.defineProperties(this,q),typeof this.initialize=="function"&&this.initialize(w,ie=>O=ie),H.enabled&&(this.freq=H.freq)}enable(){const w=R.get(this);return w.enabled||(this.freq=w.freq||w.previousFreq),this}disable(){const w=R.get(this);return w.enabled&&(w.enabled=!1,w.previousFreq=w.freq,this.freq=null),this}}return M.Drivers=d,r.IS_TEST_MODE&&(M.Controllers=S,M.purge=()=>{R.clear()}),pc=M,pc}var gc,jd;function Ue(){if(jd)return gc;jd=1;var r={};const t=ot(),n=Ct,s=Et,a=new Map,c=new Map,{int16:h,uint16:p,uint24:x,s32:b,u32:y}=s,A="accelerometer",d="altimeter",S="barometer",R="gyro",M="hygrometer",T="magnetometer",w="orientation",C="thermometer";function O(G,$){const K=a.get(this),Y=Object.create(null);for(const Q of this.components)K[Q]=new O[Q](Object.assign({controller:$.controller||G,freq:$.freq,board:this.board},$)),Y[Q]={get(){return K[Q]}},H[Q]&&(Y[H[Q]]=Y[Q]);Object.defineProperties(this,Y)}O.accelerometer=Mg(),O.altimeter=Tg(),O.barometer=Ag(),O.gyro=bg(),O.hygrometer=Cg(),O.magnetometer=Og(),O.orientation=_g(),O.thermometer=Ig();const H={thermometer:"temperature"},F={SHT31D:{ADDRESSES:{value:[68]},REGISTER:{value:{SOFT_RESET:12450,MEASURE_HIGH_REPEATABILITY:9216}},initialize:{value(G,$){const Y=G.io,Q=F.addressResolver(this,$);Y.i2cConfig($),Y.i2cWrite(Q,[this.REGISTER.SOFT_RESET>>8,this.REGISTER.SOFT_RESET&255]);const se={temperature:null,humidity:null},ae=()=>{Y.i2cWrite(Q,[this.REGISTER.MEASURE_HIGH_REPEATABILITY>>8,this.REGISTER.MEASURE_HIGH_REPEATABILITY&255]),setTimeout(()=>{Y.i2cReadOnce(Q,6,ve=>{se.temperature=p(ve[0],ve[1]),se.humidity=p(ve[3],ve[4]),this.emit("data",se),ae()})},16)};ae()}},identifier:{value(G){return`sht-31d-${F.addressResolver(F.SHT31D,G)}`}}},HTU21D:{ADDRESSES:{value:[64]},REGISTER:{value:{HUMIDITY:229,TEMPERATURE:227,SOFT_RESET:254}},initialize:{value(G,$){const K=G.io,Y=F.addressResolver(this,$);$.delay=5e4,K.i2cConfig($),K.i2cWrite(Y,this.REGISTER.SOFT_RESET);const Q={temperature:null,humidity:null};let se=0;const ae=()=>{const ve=se===0,we=ve?this.REGISTER.TEMPERATURE:this.REGISTER.HUMIDITY;K.i2cReadOnce(Y,we,2,le=>{ve?Q.temperature=p(le[0],le[1]):Q.humidity=p(le[0],le[1]),++se===2&&(se=0,this.emit("data",Q)),ae()})};ae()}},identifier:{value(G){return`htu-s1d-${F.addressResolver(F.HTU21D,G)}`}}},HIH6130:{ADDRESSES:{value:[39]},initialize:{value(G,$){const K=G.io,Y=F.addressResolver(this,$);K.i2cConfig($);const Q={humidity:null,temperature:null};let se=36.65;const ae=()=>{K.i2cWrite(Y,160,[0,0]),setTimeout(()=>{K.i2cWrite(Y,128,[0,0]),K.i2cReadOnce(Y,4,ve=>{const we=ve[0]>>6;Q.humidity=h(ve[0]&63,ve[1]),Q.temperature=h(ve[2],ve[3]>>2),we===0&&se--,we===1&&se++,this.emit("data",Q),ae()})},se)};ae()}},identifier:{value(G){return`hih6130-${F.addressResolver(F.HIH6130,G)}`}}},DHT_I2C_NANO_BACKPACK:{ADDRESSES:{value:[10]},REGISTER:{value:{READ:0}},initialize:{value(G,$){const K=G.io,Y=2;let Q=11;const se=F.addressResolver(this,$);K.i2cConfig($);const ae=/(\d{2})/.exec($.controller),ve=ae&&ae.length&&ae[0];ve&&(Q=+ve,Number.isNaN(Q)&&(Q=11));const we={temperature:null,humidity:null};K.i2cWrite(se,[Y,Q]),K.i2cRead(se,4,le=>{we.humidity=h(le[0],le[1]),we.temperature=h(le[2],le[3]),this.emit("data",we)})}},identifier:{value(G){return`dht_i2c_nano_backpack-${F.addressResolver(F.DHT_I2C_NANO_BACKPACK,G)}`}}},MPU6050:{ADDRESSES:{value:[104,105]},REGISTER:{value:{SETUP:[107,0],READ:59}},initialize:{value(G,$){const Y=G.io,Q=F.addressResolver(this,$),se={accelerometer:{},temperature:{},gyro:{}};Y.i2cConfig($),Y.i2cWrite(Q,this.REGISTER.SETUP),Y.i2cRead(Q,this.REGISTER.READ,14,ae=>{se.accelerometer={x:h(ae[0],ae[1]),y:h(ae[2],ae[3]),z:h(ae[4],ae[5])},se.temperature=h(ae[6],ae[7]),se.gyro={x:h(ae[8],ae[9]),y:h(ae[10],ae[11]),z:h(ae[12],ae[13])},this.emit("data",se)})}},identifier:{value(G){return`mpu-6050-${F.addressResolver(F.MPU6050,G)}`}}},BNO055:{ADDRESSES:{value:[40,41]},REGISTER:{value:{READ:{ACCEL:8,MAG:14,GYRO:20,EULER:26,QUARTERNION:32,TEMP:52},LENGTH:{ACCEL:6,MAG:6,GYRO:6,EULER:6,QUARTERNION:8,TEMP:1},OPR_MODE_ADDR:61,OPR_MODES:{CONFIG:0,ACCONLY:1,MAGONLY:2,GYRONLY:3,ACCMAG:4,ACCGYRO:5,MAGGYRO:6,AMG:7,IMUPLUS:8,COMPASS:9,M4G:10,NDOF_FMC_OFF:11,NDOF:12},PWR_MODE_ADDR:62,PWR_MODES:{NORMAL:0,LOW:1,SUSPEND:2},PAGE_ID_ADDR:7,PAGE_STATES:{ZERO:0},CALIBRATION:53,SYS_TRIGGER:63,UNIT_SEL_ADDR:59,AXIS_MAP_CONFIG_ADDR:65,AXIS_MAP_SIGN_ADDR:66}},initialize:{value(G,$){const K=G.io,Y=$.calibrationMask||192,Q=F.addressResolver(this,$),se={accelerometer:{x:null,y:null,z:null},gyro:{x:null,y:null,z:null},magnetometer:{x:null,y:null,z:null},orientation:{euler:{heading:null,roll:null,pitch:null},quarternion:{w:null,x:null,y:null,z:null}},temperature:null,calibration:null};K.i2cConfig($),K.i2cWriteReg(Q,this.REGISTER.OPR_MODE_ADDR,this.REGISTER.OPR_MODES.CONFIG),K.i2cWriteReg(Q,this.REGISTER.PAGE_ID_ADDR,this.REGISTER.PAGE_STATES.ZERO),K.i2cWriteReg(Q,this.REGISTER.SYS_TRIGGER,32),new Promise(ve=>{setTimeout(()=>{K.i2cWriteReg(Q,this.REGISTER.PWR_MODE_ADDR,this.REGISTER.PWR_MODES.NORMAL),K.i2cWriteReg(Q,this.REGISTER.SYS_TRIGGER,$.enableExternalCrystal?128:0);const we=$.axisMap||36;K.i2cWriteReg(Q,this.REGISTER.AXIS_MAP_CONFIG_ADDR,we);const le=$.axisSign||0;K.i2cWriteReg(Q,this.REGISTER.AXIS_MAP_SIGN_ADDR,le),setTimeout(()=>{K.i2cWriteReg(Q,this.REGISTER.OPR_MODE_ADDR,this.REGISTER.OPR_MODES.NDOF),ve()},10)},650)}).then(()=>new Promise(ve=>{const we=()=>{K.i2cReadOnce(Q,this.REGISTER.CALIBRATION,1,le=>{const oe=le[0],Re=se.calibration!==oe;se.calibration=oe,Re&&this.emit("calibration",se.calibration),(oe&Y)===Y?(this.emit("calibrated"),ve()):we()})};we()})).then(()=>{K.i2cRead(Q,this.REGISTER.READ.TEMP,2,ve=>{se.temperature=ve[0];const we=se.calibration!==ve[1];se.calibration=ve[1],this.emit("data",se),we&&this.emit("calibration",se.calibration)}),K.i2cRead(Q,this.REGISTER.READ.ACCEL,18,ve=>{se.accelerometer={x:h(ve[1],ve[0]),y:h(ve[3],ve[2]),z:h(ve[5],ve[4])},se.magnetometer={x:h(ve[7],ve[6]),y:h(ve[9],ve[8]),z:h(ve[11],ve[10])},se.gyro={x:h(ve[13],ve[12]),y:h(ve[15],ve[14]),z:h(ve[17],ve[16])},this.emit("data",se)}),K.i2cRead(Q,this.REGISTER.READ.EULER,14,ve=>{se.orientation.euler={heading:h(ve[1],ve[0]),roll:h(ve[3],ve[2]),pitch:h(ve[5],ve[4])},se.orientation.quarternion={w:h(ve[7],ve[6]),x:h(ve[9],ve[8]),y:h(ve[11],ve[10]),z:h(ve[13],ve[12])},this.emit("data",se)})})}},identifier:{value(G){return`bno055-${F.addressResolver(F.BNO055,G)}`}}},MPL115A2:{ADDRESSES:{value:[96]},REGISTER:{value:{COEFFICIENTS:4,PADC_MSB:0,CONVERT:18}},initialize:{value(G,$){const K=G.io,Y=F.addressResolver(this,$);K.i2cConfig($);const Q={pressure:null,temperature:null},se={a0:null,b1:null,b2:null,c12:null},ae=le=>{const oe=p(le[0],le[1])>>6,Re=p(le[2],le[3])>>6;Q.pressure=se.a0+(se.b1+se.c12*Re)*oe+se.b2*Re,Q.temperature=Re,this.emit("data",Q),ve()};var ve=()=>{K.i2cWriteReg(Y,this.REGISTER.CONVERT,0),K.i2cReadOnce(Y,this.REGISTER.PADC_MSB,4,ae)};new Promise(le=>{K.i2cReadOnce(Y,this.REGISTER.COEFFICIENTS,8,oe=>{const Re=h(oe[0],oe[1]),ce=h(oe[2],oe[3]),Oe=h(oe[4],oe[5]),Me=h(oe[6],oe[7])>>2;se.a0=Re/8,se.b1=ce/8192,se.b2=Oe/16384,se.c12=Me/4194304,le()})}).then(ve)}},identifier:{value(G){return`mpl115a2-${F.addressResolver(F.MPL115A2,G)}`}}},MPL3115A2:{ADDRESSES:{value:[96]},REGISTER:{value:{STATUS:0,PRESSURE:1,CONFIG:19,BAR_IN_MSB:20,BAR_IN_LSB:21,CONTROL:38}},MASK:{value:{STATUS:{PRESSURE_DATA_READ:4},CONTROL:{SBYB:1,OS128:56,ALTIMETER:128,PRESSURE:0},CONFIG:{TDEFE:1,PDEFE:2,DREM:4}}},initialize:{value(G,$){const Y=G.io;let Q=!1,se=null,ae=0;const ve=F.addressResolver(this,$);let we=0;const le={pressure:0,altitude:0,temperature:0};typeof $.elevation<"u"&&(se=$.elevation),se!==null&&se<=0&&(ae=Math.abs(se)+1,se=1);const oe=Me=>{Y.i2cReadOnce(ve,this.REGISTER.STATUS,1,X=>{X[0]&this.MASK.STATUS.PRESSURE_DATA_READ?Me():setTimeout(()=>{oe(Me)},100)})},Re=()=>{const Me=Q?this.MASK.CONTROL.PRESSURE:this.MASK.CONTROL.ALTIMETER,X=this.MASK.CONTROL.SBYB|this.MASK.CONTROL.OS128|Me;Y.i2cWrite(ve,this.REGISTER.CONTROL,X),oe(()=>{Y.i2cReadOnce(ve,this.REGISTER.PRESSURE,6,ne=>{const ue=x(ne[1],ne[2],ne[3])>>4,V=p(ne[4],ne[5])>>4;let J;if(le.temperature=V,Q)le.pressure=ue,this.emit("data",le);else{const he=ne[1],ge=ne[2],N=(ne[3]>>4)/16;J=(he<<8|ge)+N,we=(we*3+J)/4,le.altitude=we-ae}Q=!Q,Re()})})},ce=[],Oe=()=>{Y.i2cWrite(ve,this.REGISTER.CONTROL,59),Y.i2cWrite(ve,this.REGISTER.CONTROL,57),setTimeout(()=>{Y.i2cReadOnce(ve,this.REGISTER.PRESSURE,6,Me=>{const X=Me[1],ne=Me[2],V=(Me[3]>>4)/4;if(ce.push((X<<10|ne<<2)+V),ce.length===4){const he=(ce[0]+ce[1]+ce[2]+ce[3])/4/(1-se*225577e-10)**5.255;Y.i2cWrite(ve,this.REGISTER.BAR_IN_MSB,he/2>>8),Y.i2cWrite(ve,this.REGISTER.BAR_IN_LSB,he/2&255),Y.i2cWrite(ve,this.REGISTER.CONTROL,187),Y.i2cWrite(ve,this.REGISTER.CONTROL,185),setTimeout(()=>{Y.i2cReadOnce(ve,this.REGISTER.PRESSURE,6,ge=>{const be=ge[1],N=ge[2],me=(ge[3]>>4)/16;we=(be<<8|N)+me,Re()})},550)}else Oe()})},500)};Y.i2cConfig(Object.assign($,{settings:{stopTX:!0}})),Y.i2cWriteReg(ve,45,0),Y.i2cWriteReg(ve,this.REGISTER.BAR_IN_MSB,0),Y.i2cWriteReg(ve,this.REGISTER.BAR_IN_LSB,0),Y.i2cWriteReg(ve,this.REGISTER.CONFIG,this.MASK.CONFIG.TDEFE|this.MASK.CONFIG.PDEFE|this.MASK.CONFIG.DREM),se!==null?Oe():Re()}},identifier:{value(G){return`mpl3115a2-${F.addressResolver(F.MPL3115A2,G)}`}}},BMP180:{ADDRESSES:{value:[119]},REGISTER:{value:{COEFFICIENTS:170,READ:0,READ_START:244,READ_RESULT:246}},initialize:{value(G,$){const K=G.io;let Y=null,Q=0;typeof $.elevation<"u"&&(Y=$.elevation),(Y!=null&&Y<=0||Y==null)&&(Q=Math.abs(Y)+1,Y=1);const se=F.addressResolver(this,$),ae=$.mode||3,ve=[5,8,14,26][ae],we=s.constrain(ae,0,3),le={a1:null,a2:null,a3:null,a4:null,a5:null,a6:null,b1:null,b2:null,b5:null,mb:null,mc:null,md:null};K.i2cConfig($),new Promise(Re=>{K.i2cReadOnce(se,this.REGISTER.COEFFICIENTS,22,ce=>{le.a1=h(ce[0],ce[1]),le.a2=h(ce[2],ce[3]),le.a3=h(ce[4],ce[5]),le.a4=p(ce[6],ce[7]),le.a5=p(ce[8],ce[9]),le.a6=p(ce[10],ce[11]),le.b1=h(ce[12],ce[13]),le.b2=h(ce[14],ce[15]),le.mb=h(ce[16],ce[17]),le.mc=h(ce[18],ce[19]),le.md=h(ce[20],ce[21]),Re()})}).then(()=>{const Re={altitude:null,pressure:null,temperature:null};let ce=0;const Oe=()=>{const Me=ce===0,X=Me?46:52+(we<<6),ne=Me?2:3,ue=Me?5:ve;K.i2cWriteReg(se,this.REGISTER.READ_START,X),setTimeout(()=>{K.i2cReadOnce(se,this.REGISTER.READ_RESULT,ne,V=>{let J,he,ge,be,N,U,me,_e,Se,Pe,je;if(Me)he=h(V[0],V[1]),ge=(he-le.a6)*le.a5>>15,be=(le.mc<<11)/(ge+le.md)>>0,le.b5=ge+be|0,Re.temperature=(le.b5+8>>4)/10;else{he=x(V[0],V[1],V[2])>>8-we,_e=le.b5-4e3,Pe=_e*_e,je=Pe>>12,ge=le.b2*je>>11,be=le.a2*_e>>11,N=ge+be,U=((le.a1*4+N<<we)+2)/4>>0,ge=le.a3*_e>>13,be=le.b1*je>>16,N=ge+be+2>>2,me=le.a4*(N+32768)>>15,Se=(he-U)*(5e4>>we),Se<s.POW_2_31?J=Se*2/me:J=Se/me*2,J>>=0,ge=(J>>8)*(J>>8),ge=ge*3038>>16,be=-7357*J>>16,J+=ge+be+3791>>4,Re.pressure=J;const Qe=J/(1-Y*225577e-10)**5.255,pe=44330*(1-J/Qe**(1/5.255));Re.altitude=Math.round(pe-Q)}++ce===2&&(ce=0,this.emit("data",Re)),Oe()})},ue)};Oe()})}},identifier:{value(G){return`bmp180-${F.addressResolver(F.BMP180,G)}`}}},BMP280:{ADDRESSES:{value:[119]},REGISTER:{value:{COEFFICIENTS:136,CONFIG:245,MEASURE:244,PRESSURE:247,TEMPERATURE:250,RESET:224}},initialize:{value(G,$){const K=G.io;let Y=null,Q=0;typeof $.elevation<"u"&&(Y=$.elevation),(Y!=null&&Y<=0||Y==null)&&(Q=Math.abs(Y)+1,Y=1);const se=F.addressResolver(this,$),ae={T1:null,T2:null,T3:null,P1:null,P2:null,P3:null,P4:null,P5:null,P6:null,P7:null,P8:null,P9:null};K.i2cConfig($),K.i2cWrite(se,this.REGISTER.RESET,182),new Promise(we=>{K.i2cReadOnce(se,this.REGISTER.COEFFICIENTS,24,le=>{ae.T1=p(le[1],le[0]),ae.T2=h(le[3],le[2]),ae.T3=h(le[5],le[4]),ae.P1=p(le[7],le[6]),ae.P2=h(le[9],le[8]),ae.P3=h(le[11],le[10]),ae.P4=h(le[13],le[12]),ae.P5=h(le[15],le[14]),ae.P6=h(le[17],le[16]),ae.P7=h(le[19],le[18]),ae.P8=h(le[21],le[20]),ae.P9=h(le[23],le[22]),we()})}).then(()=>{K.i2cWrite(se,this.REGISTER.MEASURE,63);const we={altitude:null,pressure:null,temperature:null};K.i2cRead(se,this.REGISTER.PRESSURE,6,le=>{let oe=0,Re,ce,Oe,Me=b(x(le[0],le[1],le[2])),X=b(x(le[3],le[4],le[5]));Me>>=4,X>>=4;const ue=(X>>4)-ae.T1;if(ce=((X>>3)-(ae.T1<<1))*ae.T2>>11,Oe=(ue*ue>>12)*ae.T3>>14,Re=ce+Oe,we.temperature=(Re*5+128>>8)/100,ce=void 0,Oe=void 0,ce=b(Re>>1)-64e3,Oe=((ce>>2)*(ce>>2)>>11)*b(ae.P6),Oe+=ce*b(ae.P5)<<1,Oe=(Oe>>2)+(b(ae.P4)<<16),ce=(ae.P3*((ce>>2)*(ce>>2)>>13)>>3)+(b(ae.P2)*ce>>1)>>18,ce=(s.POW_2_15+ce)*b(ae.P1)>>15,ce===0)return 0;oe=y(b(s.POW_2_20)-Me-(Oe>>12))*3125,oe<s.POW_2_31?oe=(oe<<1>>>0)/y(ce):oe=(oe/y(ce)>>>0)*2,oe=y(oe)>>>0;const V=oe>>3;ce=b(ae.P9)*b(V*V>>13)>>12,Oe=b(oe>>2)*b(ae.P8)>>13,oe=y(b(oe)+(ce+Oe+ae.P7>>4)),we.pressure=oe;const J=oe/(1-Y*225577e-10)**5.255,he=44330*(1-oe/J**(1/5.255));we.altitude=Math.round(he-Q),this.emit("data",we)})})}},identifier:{value(G){return`bmp280-${F.addressResolver(F.BMP280,G)}`}}},BME280:{ADDRESSES:{value:[119]},REGISTER:{value:{COEFFICIENTS_TP:136,COEFFICIENTS_H:225,CONFIG:245,MEASURE_H:242,MEASURE_TP:244,PRESSURE:247,TEMPERATURE:250,HUMIDITY:253,RESET:224}},initialize:{value(G,$){const K=G.io;let Y=null,Q=0;typeof $.elevation<"u"&&(Y=$.elevation),(Y!=null&&Y<=0||Y==null)&&(Q=Math.abs(Y)+1,Y=1);const se=F.addressResolver(this,$),ae={T1:null,T2:null,T3:null,P1:null,P2:null,P3:null,P4:null,P5:null,P6:null,P7:null,P8:null,P9:null,H1:null,H2:null,H3:null,H4:null,H5:null,H6:null};K.i2cConfig($),K.i2cWrite(se,this.REGISTER.RESET,182),new Promise(we=>{Promise.all([new Promise(le=>{K.i2cReadOnce(se,136,24,oe=>{ae.T1=p(oe[1],oe[0]),ae.T2=h(oe[3],oe[2]),ae.T3=h(oe[5],oe[4]),ae.P1=p(oe[7],oe[6]),ae.P2=h(oe[9],oe[8]),ae.P3=h(oe[11],oe[10]),ae.P4=h(oe[13],oe[12]),ae.P5=h(oe[15],oe[14]),ae.P6=h(oe[17],oe[16]),ae.P7=h(oe[19],oe[18]),ae.P8=b(h(oe[21],oe[20])),ae.P9=b(h(oe[23],oe[22])),le()})}),new Promise(le=>{K.i2cReadOnce(se,161,1,oe=>{ae.H1=s.u8(oe[0]),le()})}),new Promise(le=>{K.i2cReadOnce(se,225,8,oe=>{ae.H2=b(h(oe[1],oe[0])),ae.H3=b(oe[2]),ae.H4=b(oe[3]<<4|oe[4]&15),ae.H5=b(oe[5]<<4|oe[4]>>4),ae.H6=s.s8(oe[6]),le()})})]).then(we)}).then(()=>{K.i2cWrite(se,this.REGISTER.MEASURE_H,5),K.i2cWrite(se,this.REGISTER.MEASURE_TP,183);const we={altitude:null,pressure:null,humidity:null,temperature:null},le=Date.now();K.i2cRead(se,this.REGISTER.PRESSURE,8,oe=>{if(!r.IS_TEST_MODE&&le+1e3>Date.now())return;let Re=0,ce,Oe,Me,X,ne=b(x(oe[0],oe[1],oe[2])),ue=b(x(oe[3],oe[4],oe[5]));const V=b(p(oe[6],oe[7]));ne>>=4,ue>>=4;const he=(ue>>4)-ae.T1;if(Oe=((ue>>3)-(ae.T1<<1))*ae.T2>>11,Me=(he*he>>12)*ae.T3>>14,ce=Oe+Me,we.temperature=(ce*5+128>>8)/100,Oe=void 0,Me=void 0,Oe=b(ce>>1)-64e3,Me=((Oe>>2)*(Oe>>2)>>11)*b(ae.P6),Me+=Oe*b(ae.P5)<<1,Me=(Me>>2)+(b(ae.P4)<<16),Oe=(ae.P3*((Oe>>2)*(Oe>>2)>>13)>>3)+(b(ae.P2)*Oe>>1)>>18,Oe=(s.POW_2_15+Oe)*b(ae.P1)>>15,Oe===0)return 0;Re=y(b(s.POW_2_20)-ne-(Me>>12))*3125,Re<s.POW_2_31?Re=(Re<<1>>>0)/y(Oe):Re=(Re/y(Oe)>>>0)*2,Re=y(Re)>>>0;const ge=Re>>3;Oe=b(ae.P9)*b(ge*ge>>13)>>12,Me=b(Re>>2)*ae.P8>>13,Re=y(b(Re)+(Oe+Me+ae.P7>>4)),we.pressure=Re;const be=Re/(1-Y*225577e-10)**5.255,N=44330*(1-Re/be**(1/5.255));we.altitude=Math.round(N-Q),X=b(ce-76800),X=((V<<14)-b(ae.H4<<20)-ae.H5*X+s.POW_2_14>>15)*((((X*ae.H6>>10)*((X*ae.H3>>11)+s.POW_2_15)>>10)+s.POW_2_21)*ae.H2+s.POW_2_13>>14),X-=((X>>15)*(X>>15)>>7)*b(ae.H1)>>4,X=s.constrain(X,0,419430400),we.humidity=y(X>>12),this.emit("data",we)})})}},identifier:{value(G){return`bme280-${F.addressResolver(F.BME280,G)}`}}},SI7020:{ADDRESSES:{value:[64]},REGISTER:{value:{HUMIDITY:229,TEMPERATURE:224}},initialize:{value(G,$){const K=G.io,Y=F.addressResolver(this,$);$.delay=5e4,K.i2cConfig($);const Q={temperature:null,humidity:null};K.i2cRead(Y,this.REGISTER.TEMPERATURE,2,se=>{Q.temperature=p(se[0],se[1]),this.emit("data",Q)}),K.i2cRead(Y,this.REGISTER.HUMIDITY,2,se=>{Q.humidity=p(se[0],se[1]),this.emit("data",Q)})}},identifier:{value(G){return`si7020-${F.addressResolver(F.SI7020,G)}`}}},MS5611:{ADDRESSES:{value:[119]},REGISTER:{value:{COEFFICIENTS:162,READ:0,PRESSURE:64,TEMPERATURE:80,RESET:30}},initialize:{value(G,$){const K=G.io;let Y=null,Q=0;typeof $.elevation<"u"&&(Y=$.elevation),(Y!=null&&Y<=0||Y==null)&&(Q=Math.abs(Y)+1,Y=1);const se=F.addressResolver(this,$),ae={altitude:null,pressure:null,temperature:null},ve=$.mode||5,we=[1,2,3,4,5,10][ve],le={C1:null,C2:null,C3:null,C4:null,C5:null,C6:null},oe=Object.keys(le);$.delay=we*1e3,K.i2cConfig($),K.i2cWrite(se,this.REGISTER.RESET),new Promise(ce=>{setTimeout(()=>{const Oe=oe.map((Me,X)=>{const ne=this.REGISTER.COEFFICIENTS+X*2;return new Promise(ue=>{K.i2cReadOnce(se,ne,2,V=>{le[Me]=p(V[0],V[1]),ue()})})});Promise.all(Oe).then(ce)},50)}).then(()=>{let ce=0,Oe,Me,X,ne,ue,V,J,he,ge,be;const N=()=>{const U=ce===0,me=(U?80:64)+ve;K.i2cWrite(se,me),U?(Me=0,X=0,ne=0,he=0,ge=0,be=0):(Oe=0,ue=0,V=0,J=0),setTimeout(()=>{K.i2cReadOnce(se,this.REGISTER.READ,3,_e=>{if(U)Me=x(_e[0],_e[1],_e[2]),X=Me-le.C5*s.POW_2_8,ne=2e3+X*le.C6/s.POW_2_23,ne<2e3&&(he=X**2/s.POW_2_31,ge=5*(ne-2e3)**2/2,be=5*(ne-2e3)**2/s.POW_2_2,ne<-1500&&(ge=ge+7*(ne+1500)**2,be=be+11*(ne+1500)**2/2)),ne-=he,ae.temperature=ne/100;else{Oe=x(_e[0],_e[1],_e[2]),ue=le.C2*s.POW_2_16+le.C4*X/s.POW_2_7,V=le.C1*s.POW_2_15+le.C3*X/s.POW_2_8,ue-=ge,V-=be,J=(Oe*V/s.POW_2_21-ue)/s.POW_2_15,ae.pressure=J;const Se=J/(1-Y*225577e-10)**5.255,Pe=44330*(1-J/Se**(1/5.255));ae.altitude=Pe-Q}++ce===2&&(ce=0,this.emit("data",ae)),N()})},we)};N()})}},identifier:{value(G){return`ms5611-${F.addressResolver(F.MS5611,G)}`}}},TH02:{ADDRESSES:{value:[64]},COMMAND:{value:{MEASURE_HUMIDITY:1,MEASURE_TEMPERATURE:17}},REGISTER:{value:{STATUS:0,READ:1,CONFIG:3}},initialize:{value(G,$){const K=G.io,Y=F.addressResolver(this,$),Q={temperature:null,humidity:null};let se=0;K.i2cConfig(Object.assign($,{settings:{stopTX:!0}}));const ae=()=>{const ve=se===0,we=ve?this.COMMAND.MEASURE_TEMPERATURE:this.COMMAND.MEASURE_HUMIDITY;new Promise(oe=>{K.i2cWrite(Y,this.REGISTER.CONFIG,we);const Re=()=>{K.i2cReadOnce(Y,this.REGISTER.STATUS,1,ce=>{ce[0]&1?Re():oe()})};Re()}).then(()=>{Promise.all([new Promise(oe=>{K.i2cReadOnce(Y,1,1,Re=>{oe(Re[0])})}),new Promise(oe=>{K.i2cReadOnce(Y,2,1,Re=>{oe(Re[0])})})]).then(oe=>{ve?Q.temperature=(p(oe[0],oe[1])>>2)/32-50:Q.humidity=(p(oe[0],oe[1])>>4)/16-24,++se===2&&(se=0,this.emit("data",Q)),ae()})})};ae()}},identifier:{value(G){return`th02-${F.addressResolver(F.TH02,G)}`}}},LSM303C:{ADDRESSES:{value:[29,30]},COMMAND:{value:{ACC_SETUP:[4,63,63,63],MAG_SETUP:[216,96,64,216,8,0]}},REGISTER:{value:{ACC_CTRL_SEQ:[35,32,32,32],ACC_STATUS:39,ACC_OUTX_L:40,ACC_OUTX_H:41,ACC_OUTY_L:42,ACC_OUTY_H:43,ACC_OUTZ_L:44,ACC_OUTZ_H:45,MAG_CTRL_SEQ:[32,33,36,32,35,34],MAG_STATUS:39,MAG_OUTX_L:40,MAG_OUTX_H:41,MAG_OUTY_L:42,MAG_OUTY_H:43,MAG_OUTZ_L:44,MAG_OUTZ_H:45,MAG_TEMP_OUT_L:46,MAG_TEMP_OUT_H:47}},initialize:{value(G,$){const K=.06103515625,Y=.00048828125,Q=G.io,se=this.freq||40,[ae,ve]=this.ADDRESSES,we={},le={},oe={temperature:0,magnetometer:le,accelerometer:we},Re=()=>{Q.i2cConfig(Object.assign({},$,{address:ae})),this.REGISTER.ACC_CTRL_SEQ.forEach((ue,V)=>{Q.i2cWrite(ae,ue,this.COMMAND.ACC_SETUP[V])})},ce=()=>{Q.i2cConfig(Object.assign({},$,{address:ve})),this.REGISTER.MAG_CTRL_SEQ.forEach((ue,V)=>{Q.i2cWrite(ve,ue,this.COMMAND.MAG_SETUP[V])})},Oe=ue=>{Q.i2cReadOnce(ae,this.REGISTER.ACC_OUTX_L,6,V=>{we.x=h(V[1],V[0])*K,we.y=h(V[3],V[2])*K,we.z=h(V[5],V[4])*K,ue()})},Me=ue=>{Q.i2cReadOnce(ve,this.REGISTER.MAG_OUTX_L,6,V=>{le.x=h(V[1],V[0])*Y,le.y=h(V[3],V[2])*Y,le.z=h(V[5],V[4])*Y,ue()})},X=ue=>{Q.i2cReadOnce(ve,this.REGISTER.MAG_TEMP_OUT_L,2,V=>{oe.temperature=h(V[1],V[0]),ue()})},ne=()=>{Promise.all([new Promise(Oe),new Promise(Me),new Promise(X)]).then(()=>{this.emit("data",oe),setTimeout(ne,se)})};Re(),ce(),ne()}},identifier:{value(G){return`lsm303c-${F.addressResolver(F.LSM303C,G)}`}}}};F.BMP085=F.BMP180,F.GY521=F.MPU6050,F.SI7021=F.SI7020,F.DHT11_I2C_NANO_BACKPACK=F.DHT_I2C_NANO_BACKPACK,F.DHT21_I2C_NANO_BACKPACK=F.DHT_I2C_NANO_BACKPACK,F.DHT22_I2C_NANO_BACKPACK=F.DHT_I2C_NANO_BACKPACK,F.get=(G,$,K={})=>{let Y,Q,se;return c.has(G)||c.set(G,{}),Y=c.get(G),Q=F[$].identifier.value(K),Y[Q]||(se=new n,Object.defineProperties(se,F[$]),se.initialize(G,K),Y[Q]=se),Y[Q]},F.addressResolver=(G,$)=>{const K=G.ADDRESSES,Y=$.address||(Array.isArray(K)?K[0]:K.value[0]);return $.address=Y,Y},F.clear=()=>{c.clear()};const q={MPU6050:{initialize:{value(G){O.call(this,"MPU6050",G)}},components:{value:[A,R,C]}},BNO055:{initialize:{value(G){const $=a.get(this),K="BNO055";$.calibrationMask=G.calibrationMask||192,F.get(this.board,K,G).on("calibrated",()=>this.emit("calibrated")).on("calibration",Y=>this.emit("calibration",Y)),O.call(this,K,G)}},components:{value:[A,R,T,w,C]},calibration:{get(){return this.orientation.calibration}},isCalibrated:{get(){const{calibrationMask:G}=a.get(this);return(this.orientation.calibration&G)===G}}},MPL115A2:{initialize:{value(G){O.call(this,"MPL115A2",G)}},components:{value:[S,C]}},SHT31D:{initialize:{value(G){O.call(this,"SHT31D",G)}},components:{value:[M,C]}},HTU21D:{initialize:{value(G){O.call(this,"HTU21D",G)}},components:{value:[M,C]}},HIH6130:{initialize:{value(G){O.call(this,"HIH6130",G)}},components:{value:[M,C]}},DHT_I2C_NANO_BACKPACK:{initialize:{value(G){O.call(this,"DHT_I2C_NANO_BACKPACK",G)}},components:{value:[M,C]}},MPL3115A2:{initialize:{value(G){O.call(this,"MPL3115A2",G)}},components:{value:[d,S,C]}},BMP180:{initialize:{value(G){O.call(this,"BMP180",G)}},components:{value:[d,S,C]}},BMP280:{initialize:{value(G){O.call(this,"BMP280",G)}},components:{value:[d,S,C]}},BME280:{initialize:{value(G){O.call(this,"BME280",G)}},components:{value:[d,S,M,C]}},SI7020:{initialize:{value(G){O.call(this,"SI7020",G)}},components:{value:[M,C]}},MS5611:{initialize:{value(G){O.call(this,"MS5611",G)}},components:{value:[d,S,C]}},TH02:{initialize:{value(G){O.call(this,"TH02",G)}},components:{value:[M,C]}},LSM303C:{initialize:{value(G){O.call(this,"LSM303C",G)}},components:{value:[T,C,A]}}};q.BMP085=q.BMP180,q.GY521=q.MPU6050,q.SI7021=q.SI7020,q.DHT11_I2C_NANO_BACKPACK=q.DHT_I2C_NANO_BACKPACK,q.DHT21_I2C_NANO_BACKPACK=q.DHT_I2C_NANO_BACKPACK,q.DHT22_I2C_NANO_BACKPACK=q.DHT_I2C_NANO_BACKPACK;class ie extends n{constructor($){super(),t.Component.call(this,$=t.Options($)),t.Controller.call(this,q,$);let K={};a.set(this,K),this.freq=$.freq||20,typeof this.initialize=="function"&&this.initialize($),this.isReady=!1,setInterval(()=>{this.isReady&&this.emit("data",this)},this.freq);const Y=this.components.slice();this.components&&this.components.length>0&&this.components.forEach(Q=>{this[Q]instanceof n&&this[Q].on("change",()=>{if(Y.length){const se=Y.indexOf(Q);se!==-1&&Y.splice(se,1)}!Y.length&&!this.isReady&&(this.isReady=!0),this.isReady&&this.emit("change",this,Q)})})}}return ie.Drivers=F,r.IS_TEST_MODE&&(ie.Controllers=q,ie.purge=()=>{a.clear()}),gc=ie,gc}var xc,Vd;function Mg(){if(Vd)return xc;Vd=1;var r={};const t=ot(),n=Zr(),s=Ct,{constrain:a,fma:c,int16:h,sum:p,toFixed:x,RAD_TO_DEG:b}=Et,y=new Map,A=10,d="x",S="y",R="z",M=[d,S,R];function T({zeroV:F,sensitivity:q},ie){const G=y.get(this),$={};G.zeroV=F||this.DEFAULTS.zeroV,G.sensitivity=q||this.DEFAULTS.sensitivity,this.pins.forEach(function(K,Y){this.io.pinMode(K,this.io.MODES.ANALOG),this.io.analogRead(K,Q=>{const se=M[Y];$[se]=Q,ie($)})},this)}function w(F,q){const ie=y.get(this);let G=ie.zeroV;if(Array.isArray(G)&&G.length>0){const $=M.indexOf(q);G=G[$||0]}return(F-G)/ie.sensitivity}const C={ANALOG:{DEFAULTS:{value:{zeroV:478,sensitivity:96}},initialize:{value:T},toGravity:{value:w}},MPU6050:{initialize:{value(F,q){const ie=y.get(this);ie.sensitivity=F.sensitivity||16384;const{Drivers:G}=Ue();G.get(this.board,"MPU6050",F).on("data",({accelerometer:$})=>q($))}},toGravity:{value(F){return x(F/y.get(this).sensitivity,3)}}},BNO055:{initialize:{value(F,q){const ie=y.get(this);ie.sensitivity=100;const{Drivers:G}=Ue();G.get(this.board,"BNO055",F).on("data",({accelerometer:$})=>q($))}},toGravity:{value(F){return x(F/y.get(this).sensitivity,2)}}},ADXL335:{DEFAULTS:{value:{zeroV:330,sensitivity:66.5}},initialize:{value:T},toGravity:{value(F,q){return x(w.call(this,F,q),3)}}},ADXL345:{ADDRESSES:{value:[83]},REGISTER:{value:{POWER:45,DATA_FORMAT:49,DATAX0:50}},initialize:{value(F,q){const{Drivers:ie}=Ue(),G=ie.addressResolver(this,F),$=6;this.io.i2cConfig(F),this.io.i2cWrite(G,this.REGISTER.POWER,0),this.io.i2cWrite(G,this.REGISTER.POWER,8);const K=8,Y={2:0,4:1,8:2,16:3}[F.range||2];this.io.i2cWrite(G,this.REGISTER.DATA_FORMAT,K|Y),this.io.i2cRead(G,this.REGISTER.DATAX0,$,Q=>{q({x:h(Q[1],Q[0]),y:h(Q[3],Q[2]),z:h(Q[5],Q[4])})})}},toGravity:{value(F){return x(F*.00390625,8)}}},MMA7361:{DEFAULTS:{value:{zeroV:[372,372,287],sensitivity:170}},initialize:{value(F,q){const ie=y.get(this);F.sleepPin!==void 0&&(ie.sleepPin=F.sleepPin,this.io.pinMode(ie.sleepPin,1),this.io.digitalWrite(ie.sleepPin,1)),T.call(this,F,q)}},toGravity:{value(F,q){return x(w.call(this,F,q),3)}},enabledChanged:{value(F){const q=y.get(this);q.sleepPin!==void 0&&this.io.digitalWrite(q.sleepPin,F?1:0)}}},MMA8452:{ADDRESSES:{value:[29]},REGISTER:{value:{STATUS:0,OUT_X_MSB:1,XYZ_DATA_CFG:14,PULSE_CFG:33,PULSE_SRC:34,PULSE_THSX:35,PULSE_THSY:36,PULSE_THSZ:37,PULSE_TMLT:38,PULSE_LTCY:39,PULSE_WIND:40,CTRL_REG1:42,CTRL_REG4:46,CTRL_REG5:47}},initialize:{value(F,q){const{Drivers:ie}=Ue(),G=ie.addressResolver(this,F),$=y.get(this),K=[800,400,200,100,50,12,6],Y=K.indexOf(F.odr||800),Q=F.range||2,se={2:0,4:1,8:2}[Q];F.taps=F.taps||{x:!1,y:!1,z:!0};const ae={x:F.taps.x?8:128,y:F.taps.y?8:128,z:F.taps.z?8:128};$.scale=Q;const ve={x:null,y:null,z:null};if(this.io.i2cConfig(Object.assign(F,{settings:{stopTX:!1}})),Y===-1)throw new RangeError("Invalid odr. Expected one of: 800,  400,  200,  100,  50,  12,  6");let we=8;we|=Y<<3,this.io.i2cWriteReg(G,this.REGISTER.CTRL_REG1,we),this.io.i2cWriteReg(G,this.REGISTER.XYZ_DATA_CFG,se);let le=0;ae.x&128||(le|=3,this.io.i2cWriteReg(G,this.REGISTER.PULSE_THSX,ae.x)),ae.y&128||(le|=12,this.io.i2cWriteReg(G,this.REGISTER.PULSE_THSY,ae.y)),ae.z&128||(le|=48,this.io.i2cWriteReg(G,this.REGISTER.PULSE_THSZ,ae.z)),this.io.i2cWriteReg(G,this.REGISTER.PULSE_CFG,le|64),this.io.i2cWriteReg(G,this.REGISTER.PULSE_TMLT,60/(1e3/K[Y])),this.io.i2cWriteReg(G,this.REGISTER.PULSE_LTCY,200/(1e3/K[Y])),this.io.i2cWriteReg(G,this.REGISTER.PULSE_WIND,255),we|=1,this.io.i2cWriteReg(G,this.REGISTER.CTRL_REG1,we),this.io.i2cRead(G,this.REGISTER.STATUS,7,oe=>{(oe.shift()&8)>>>3&&(ve.x=h(oe[0],oe[1])>>4,ve.y=h(oe[2],oe[3])>>4,ve.z=h(oe[4],oe[5])>>4,q(ve))}),this.io.i2cRead(G,this.REGISTER.PULSE_SRC,1,oe=>{const Re=oe[0],ce=Re&127;Re&128&&(this.emit("tap"),ce>>2&1&&(this.emit("tap:single"),ce>>3&1&&this.emit("tap:double")))})}},toGravity:{value(F){return x(F/(2048*y.get(this).scale),4)}}},MMA7660:{ADDRESSES:{value:[76]},REGISTER:{value:{XOUT:0,MODE:7,SR:8}},initialize:{value(F,q){const{Drivers:ie}=Ue(),G=ie.addressResolver(this,F),$=3,K=y.get(this);K.sensitivity=21.33,this.io.i2cConfig(F),this.io.i2cWrite(G,this.REGISTER.MODE,0),this.io.i2cWrite(G,this.REGISTER.SR,7),this.io.i2cWrite(G,this.REGISTER.MODE,1),this.io.i2cRead(G,this.REGISTER.XOUT,$,Y=>{q({x:Y[0]&63,y:Y[1]&63,z:Y[2]&63})})}},toGravity:{value(F){return x(F/y.get(this).sensitivity,3)}}},ESPLORA:{DEFAULTS:{value:{zeroV:[320,330,310],sensitivity:170}},initialize:{value(F,q){this.pins=[5,11,6],T.call(this,F,q)}},toGravity:{value(F,q){return x(w.call(this,F,q),2)}}},LIS3DH:{ADDRESSES:{value:[24]},REGISTER:{value:{OUT_X_L:40,CTRL_REG1:32,CTRL_REG2:33,CTRL_REG3:34,CTRL_REG4:35,CTRL_REG5:36,TEMP_CFG_REG:31,CLICK_CFG:56,CLICK_SRC:57,CLICK_THS:58,TIME_LIMIT:59,TIME_LATENCY:60,TIME_WINDOW:61}},initialize:{value(F,q){const ie=y.get(this),G=F.address||24;let $={2:0,4:1,8:2,16:3}[F.range||4];$===void 0&&($=1);let K=[16380,8190,4096,1365][$];K===void 0&&(K=1);let Y=[80,40,20,10][$];Y===void 0&&(Y=10),ie.divider=K,ie.expander=n.get({address:G,controller:this.controller,bus:this.bus});const Q=136|$<<4;ie.expander.i2cWrite(G,this.REGISTER.CTRL_REG4,Q),ie.expander.i2cReadOnce(G,this.REGISTER.CTRL_REG1,1,se=>{let ae=se[0];ae&=-241,ae|=96,ie.expander.i2cWrite(G,this.REGISTER.CTRL_REG1,ae),ie.expander.i2cRead(G,this.REGISTER.OUT_X_L|128,6,Re=>{q({x:h(Re[1],Re[0]),y:h(Re[3],Re[2]),z:h(Re[5],Re[4])})}),ie.expander.i2cWrite(G,this.REGISTER.CTRL_REG3,128),ie.expander.i2cWrite(G,this.REGISTER.CTRL_REG5,8),ie.expander.i2cWrite(G,this.REGISTER.CLICK_CFG,42);const ve=10,we=20,le=255;ie.expander.i2cWrite(G,this.REGISTER.CLICK_THS,Y),ie.expander.i2cWrite(G,this.REGISTER.TIME_LIMIT,ve),ie.expander.i2cWrite(G,this.REGISTER.TIME_LATENCY,we),ie.expander.i2cWrite(G,this.REGISTER.TIME_WINDOW,le);let oe=null;ie.expander.i2cRead(G,this.REGISTER.CLICK_SRC,1,Re=>{const ce=Re[0],Oe=Date.now();oe===null&&(oe=Oe-101),!(Oe<oe+100)&&ce!==0&&ce&48&&(oe=Oe,this.emit("tap"),ce&16&&this.emit("tap:single"),ce&32&&(this.emit("tap:single"),this.emit("tap:double")))})})}},toGravity:{value(F){return x(F/y.get(this).divider,3)}}},LSM303C:{initialize:{value(F,q){const{Drivers:ie}=Ue();ie.get(this.board,"LSM303C",F).on("data",({accelerometer:G})=>q(G))}},toGravity:{value(F){return x(F,2)}}}};C.TINKERKIT=C.ANALOG,C.MMA8452Q=C.MMA8452,C.DEFAULT=C.ANALOG;function O(F,q,ie){let G;return G=F*F,G=c(q,q,G),G=c(ie,ie,G),Math.sqrt(G)}class H extends s{constructor(q){super();const ie={enabled:!0,x:{value:0,previous:0,stash:[],orientation:null,inclination:null,acceleration:null,calibration:[]},y:{value:0,previous:0,stash:[],orientation:null,inclination:null,acceleration:null,calibration:[]},z:{value:0,previous:0,stash:[],orientation:null,inclination:null,acceleration:null,calibration:[]}};t.Component.call(this,q=t.Options(q)),t.Controller.call(this,C,q),this.toGravity||(this.toGravity=q.toGravity||(G=>G)),this.enabledChanged||(this.enabledChanged=()=>{}),y.set(this,ie),typeof this.initialize=="function"&&this.initialize(q,G=>{let $=!1;ie.enabled&&(Object.keys(G).forEach(K=>{const Y=G[K],Q=ie[K];if(q.autoCalibrate&&Q.calibration.length<A){const se=M.indexOf(K);Q.calibration.push(Y),Array.isArray(ie.zeroV)||(ie.zeroV=[]),ie.zeroV[se]=p(Q.calibration)/Q.calibration.length,K===R&&(ie.zeroV[se]-=ie.sensitivity)}if(Q.stash.length===0)for(let se=0;se<5;se++)Q.stash[se]=Y;Q.previous=Q.value,Q.stash.shift(),Q.stash.push(Y),Q.value=p(Q.stash)/5|0,this.acceleration!==Q.acceleration&&(Q.acceleration=this.acceleration,$=!0,this.emit("acceleration",Q.acceleration)),this.orientation!==Q.orientation&&(Q.orientation=this.orientation,$=!0,this.emit("orientation",Q.orientation)),this.inclination!==Q.inclination&&(Q.inclination=this.inclination,$=!0,this.emit("inclination",Q.inclination))}),this.emit("data",{x:ie.x.value,y:ie.y.value,z:ie.z.value}),$&&this.emit("change",{x:this.x,y:this.y,z:this.z}))}),Object.defineProperties(this,{hasAxis:{writable:!0,value(G){return ie[G]?ie[G].stash.length>0:!1}},enable:{value(){return ie.enabled=!0,this.enabledChanged(!0),this}},disable:{value(){return ie.enabled=!1,this.enabledChanged(!1),this}},zeroV:{get(){return ie.zeroV}},pitch:{get(){const G=this.x,$=this.y,K=this.z,Y=this.hasAxis(R)?Math.atan2(G,Math.hypot($,K)):Math.asin(a(G,-1,1));return x(Y*b,2)}},roll:{get(){const G=this.x,$=this.y,K=this.z,Y=this.hasAxis(R)?Math.atan2($,Math.hypot(G,K)):Math.asin(a($,-1,1));return x(Y*b,2)}},x:{get(){return this.toGravity(ie.x.value,d)}},y:{get(){return this.toGravity(ie.y.value,S)}},z:{get(){return this.hasAxis(R)?this.toGravity(ie.z.value,R):0}},acceleration:{get(){return O(this.x,this.y,this.z)}},inclination:{get(){return Math.atan2(this.y,this.x)*b}},orientation:{get(){const G=Math.abs,$=this.x,K=this.y,Y=this.hasAxis(R)?this.z:1,Q=G($),se=G(K),ae=G(Y);return Q<se&&Q<ae?$>0?1:-1:se<Q&&se<ae?K>0?2:-2:ae<Q&&ae<se?Y>0?3:-3:0}}})}}return r.IS_TEST_MODE&&(H.Controllers=C,H.purge=function(){y.clear()}),xc=H,xc}const Ll=1.70158,cl=1.70158*1.525,hl=7.5625,Yt=.5,{PI:Eh,cos:Dg,sin:yy,sqrt:Pl}=Math,at={};at.linear=r=>r;at.inQuad=r=>r*r;at.outQuad=r=>r*(2-r);at.inOutQuad=r=>(r*=2,r<1?Yt*r*r:-Yt*(--r*(r-2)-1));at.inCube=r=>r*r*r;at.outCube=r=>--r*r*r+1;at.inOutCube=r=>(r*=2,r<1?Yt*(r*r*r):Yt*((r-=2)*r*r+2));at.inQuart=r=>r*r*r*r;at.outQuart=r=>1- --r*(r*r*r);at.inOutQuart=r=>(r*=2,r<1?Yt*(r*r*r*r):-Yt*((r-=2)*(r*r*r)-2));at.inQuint=r=>r*r*r*r*r;at.outQuint=r=>--r*(r*r*r*r)+1;at.inOutQuint=r=>(r*=2,r<1?Yt*(r*r*r*r*r):Yt*((r-=2)*(r*r*r*r)+2));at.inSine=r=>1-Dg(r*Eh/2);at.outSine=r=>yy(r*Eh/2);at.inOutSine=r=>Yt*(1-Dg(Eh*r));at.inExpo=r=>r===0?0:Math.pow(1024,r-1);at.outExpo=r=>r===1?r:1-Math.pow(2,-10*r);at.inOutExpo=r=>r===0?0:r===1?1:(r*=2)<1?Yt*Math.pow(1024,r-1):Yt*(-Math.pow(2,-10*(r-1))+2);at.inCirc=r=>1-Pl(1-r*r);at.outCirc=r=>Pl(1- --r*r);at.inOutCirc=r=>(r*=2,r<1?-Yt*(Pl(1-r*r)-1):Yt*(Pl(1-(r-=2)*r)+1));at.inBack=r=>r*r*((Ll+1)*r-Ll);at.outBack=r=>--r*r*((Ll+1)*r+Ll)+1;at.inOutBack=r=>(r*=2)<1?Yt*(r*r*((cl+1)*r-cl)):Yt*((r-=2)*r*((cl+1)*r+cl)+2);at.outBounce=r=>r<1/2.75?hl*r*r:r<2/2.75?hl*(r-=1.5/2.75)*r+.75:r<2.5/2.75?hl*(r-=2.25/2.75)*r+.9375:hl*(r-=2.625/2.75)*r+.984375;at.inBounce=r=>1-at.outBounce(1-r);at.inOutBounce=r=>r<Yt?at.inBounce(r*2)*Yt:at.outBounce(r*2-1)*Yt+Yt;const Lg={};Object.keys(at).forEach(r=>{Lg[r.toLowerCase()]=at[r]});var Ey=new Proxy({},{get(r,t){return Lg[t.replace(/([a-z])([A-Z])/g,"$1$2").toLowerCase()]}}),mc,qd;function wy(){if(qd)return mc;qd=1;var r=Bi.EventEmitter,t=cr(),n=1e6,s=new r,a={},c=Date.now(),h=!1,p=Gt.setImmediate||Ce.nextTick,x=function(){var M=Ce.hrtime();return Math.floor((M[0]*1e9+M[1])/n)},b=function(){return Date.now()},y=b;function A(M){if(!(this instanceof A))return new A(M);this.called=0,this.now=this.calledAt=y(),n!==1e6&&(M.time=~~(M.time*(1e6/n))),this.isRunnable=!0,this.later=this.now+M.time,this.task=M.task,this.type=M.type,this.time=M.time,this.later>c&&(c=this.later),a[this.later]||(a[this.later]=[]),a[this.later].push(this)}t.inherits(A,r),A.deriveOp=function(M,T){return T!=="task"?T:M},A.prototype.stop=function(){this.isRunnable=!1,this.emit("stop")};function d(M){this.refs=[],this.add(M)}t.inherits(d,r),d.prototype.stop=function(){this.refs.forEach(function(M){M.stop()}),this.emit("stop")},d.prototype.add=function(M){var T,w,C,O;for(this.cumulative=this.cumulative||0;M.length;)w=M.shift(),T=Object.keys(w).reduce(A.deriveOp,""),this.cumulative+=w[T],M.length===0&&(C=w.task,w.task=H=>{C.call(this,H),this.emit("end",H),this.cumulative=0}),T==="loop"&&M.length===0?O=s.delay(this.cumulative-w[T],()=>{O=s.loop(w[T],w.task),this.refs.push(O)}):O=s[T](this.cumulative,w.task),this.refs.push(O)},s.queue=function(M){var T=new d(M);return R(),T};var S=y();function R(){h||(h=!0,s.emit("busy"));var M=y(),T=[],w=!0,C,O;for(c<=M&&(w=!1),O=S;O<=M;O++)[].push.apply(T,a[O]||[]);if(T.length){for(;T.length;)C=T.shift(),C.isRunnable&&(C.called++,C.calledAt=M,C.task.call(C,C)),C.type==="loop"&&C.isRunnable&&(w=!0,C.later=M+C.time,C.later>c&&(c=C.later),a[C.later]||(a[C.later]=[]),C.isRunnable&&a[C.later].push(C));for(O=S;O<=M;O++)delete a[O];T.length=0}S=M,w?p(R):(h=!1,s.emit("idle"))}return["loop","delay"].forEach(function(M){s[M]=function(T,w){typeof T=="function"&&(w=T,T=10);var C=new A({time:T,type:M,task:w});return h||R(),C}}),s.wait=s.defer=s.delay,s.repeat=function(M,T,w){return s.loop(T,function(C){w(C),C.called===M&&this.stop()})},s.clear=function(){h=!1,s.removeAllListeners(),a={}},s.resolution=function(M){M===.1||M===.01?(n=1e6*M,y=x):(n=1e6,y=b),S=y()},mc=s,mc}const Sy=Ct,Kd=Ey,{cloneDeep:Ry,constrain:Ty}=Et;let vc,Ay=5e3,ps=class gn extends Sy{constructor(t){super(),vc||(vc=wy()),Object.assign(this,new gn.Segment),this.defaultTarget=t||{}}enqueue(t={}){return typeof t.target>"u"&&(t.target=this.defaultTarget),this.segments.push(t),!this.paused&&!this.isRunning&&this.next(),this}next(){return this.isRunning?this:(this.isRunning=!0,this.segments.length>0?(Object.assign(this,new gn.Segment(this.segments.shift())),this.paused=this.currentSpeed===0,this.onstart&&this.onstart(),this.normalizeKeyframes(),this.reverse&&(this.currentSpeed*=-1),this.currentSpeed!==0?this.play():this.paused=!0):this.playLoop.stop(),this)}pause(){this.emit("animation:pause"),this.playLoop&&this.playLoop.stop(),this.paused=!0,this.onpause&&this.onpause()}stop(){this.emit("animation:stop"),this.segments=[],this.isRunning=!1,this.playLoop&&this.playLoop.stop(),this.onstop&&this.onstop()}speed(t){return typeof t>"u"?this.currentSpeed:(this.currentSpeed=t,this.scaledDuration=this.duration/Math.abs(this.currentSpeed),this.startTime=Date.now()-this.scaledDuration*this.progress,this.endTime=this.startTime+this.scaledDuration,this.paused||this.play(),this)}loopFunction({calledAt:t}){const n=this.calculateProgress(t),s=this.findIndices(n);this.target[gn.render](this.tweenedValue(s,n)),t>this.fallBackTime&&(this.fallBackTime=1/0,this.playLoop&&this.playLoop.stop(),this.playLoop=new gn.TemporalFallback(this)),(this.progress===1&&!this.reverse||n===this.loopback&&this.reverse)&&(this.loop||this.metronomic&&!this.reverse?(this.onloop&&this.onloop(),this.metronomic&&(this.reverse=!this.reverse),this.normalizeKeyframes(),this.progress=this.loopback,this.startTime=Date.now()-this.scaledDuration*this.progress,this.endTime=this.startTime+this.scaledDuration):(this.isRunning=!1,this.oncomplete&&Ce.nextTick(()=>this.oncomplete()),this.segments.length>0?Ce.nextTick(()=>this.next()):this.stop()))}play(){const t=Date.now();this.playLoop&&this.playLoop.stop(),this.paused=!1,this.isRunning=!0,this.scaledDuration=this.duration/Math.abs(this.currentSpeed),this.startTime=t-this.scaledDuration*this.progress,this.endTime=this.startTime+this.scaledDuration,this.fallBackTime=t+Ay,this.frameCount=0,this.fps&&(this.rate=1e3/this.fps),this.rate=this.rate|0,this.playLoop=vc.loop(this.rate,n=>this.loopFunction(n))}findIndices(t){const n={left:null,right:null};return n.right=this.cuePoints.findIndex(s=>s>=t),n.left=n.right===0?0:n.right-1,n}calculateProgress(t){let n=(t-this.startTime)/this.scaledDuration;return n>1&&(n=1),this.progress=n,this.reverse&&(n=1-n),Ty(Kd[this.easing](n),0,1)}tweenedValue(t,n){const s={duration:null,progress:null};return this.normalizedKeyFrames.map(c=>{const h={left:null,right:null};for(h.left=t.left;h.left>-1&&c[h.left]===null;h.left--);h.right=c.findIndex((y,A)=>A>=t.right&&y!==null),s.duration=this.cuePoints[h.right]-this.cuePoints[h.left],s.progress=(n-this.cuePoints[h.left])/s.duration,Number.isFinite(s.progress)||(s.progress=this.reverse?0:1);const p=c[h.left],x=c[h.right];s.progress=Kd[x.easing](s.progress);let b;return x.position?b=x.position.map((y,A)=>(y-p.position[A])*s.progress+p.position[A]):typeof x.value=="number"&&typeof p.value=="number"?b=(x.value-p.value)*s.progress+p.value:b=this.target[gn.keys].reduce((y,A)=>(y[A]=(x.value[A]-p.value[A])*s.progress+p.value[A],y),{}),b})}normalizeKeyframes(){let t,n=Ry(this.keyFrames);const s=this.cuePoints;return n=this.target[gn.normalize](n),Array.isArray(n[0])||(n=[n]),n.forEach(function(a){for(let c=a.length;c<s.length;c++)a.push(null);a.forEach((c,h,p)=>{c!==null?(typeof c!="object"&&(c={step:c,easing:"linear"}),typeof c.step<"u"&&(c.value=c.step===!1?t:t+c.step),c.easing||(c.easing="linear"),typeof c.copyValue<"u"&&(c.value=p[c.copyValue].value),c.copyFrame&&(c=p[c.copyFrame]),t=c.value):h===p.length-1?c={value:t,easing:"linear"}:c=null,p[h]=c},this)}),this.normalizedKeyFrames=n,this}};ps.keys="@@keys";ps.normalize="@@normalize";ps.render="@@render";ps.TemporalFallback=class{constructor(r){this.interval=setInterval(()=>{r.loopFunction({calledAt:Date.now()})},r.rate)}stop(){this.interval&&clearInterval(this.interval)}};ps.Segment=class{constructor(r){this.cuePoints=[0,1],this.duration=1e3,this.easing="linear",this.loop=!1,this.loopback=0,this.metronomic=!1,this.currentSpeed=1,this.progress=0,this.fps=60,this.rate=1e3/60,this.paused=!1,this.isRunning=!1,this.segments=[],this.onstart=null,this.onpause=null,this.onstop=null,this.oncomplete=null,this.onloop=null,r&&(Object.assign(this,r),r.segments&&(this.segments=r.segments.slice()))}};var gs=ps;const by=Ct;let yc;class Yd{constructor(t){this.address=t.address,this.io=t.io,this.io.i2cConfig(t)}read(t,n,s){t?this.io.i2cRead(this.address,t,n,s):this.io.i2cRead(this.address,n,s)}write(t,n){Array.isArray(n)||(n=[n]),this.io.i2cWrite(this.address,t,n)}}let Ee=class El extends by{constructor({io:t}){if(super(),yc)return yc;this.bank={a:new Yd({address:El.BANK_A,io:t}),b:new Yd({address:El.BANK_B,io:t})},yc=this}setup({bank:t,mode:n},s){this.bank[t].write(n,[s])}read(t,n,s,a){t.sensor&&t.offset&&!El.isRawSensor(t)&&(n+=t.offset),this.bank[t.bank].read(n,s,a)}write({bank:t},n,s){this.bank[t].write(n,s)}};Ee.shieldPort=r=>{const t=Ee[r];if(t===void 0)throw new Error("Invalid EVShield pin name");let n,s,a,c,h,p,x,b=!1;return r.startsWith("BA")?(n=Ee.BANK_A,a="a"):(n=Ee.BANK_B,a="b"),r.includes("M")&&(c=r.endsWith("M1")?Ee.S1:Ee.S2),r.includes("S")&&(b=r.endsWith("S1"),s=b?Ee.S1_ANALOG:Ee.S2_ANALOG,h=b?Ee.S1_MODE:Ee.S2_MODE,p=b?Ee.S1_OFFSET:Ee.S2_OFFSET,x=b?Ee.S1:Ee.S2),{address:n,analog:s,bank:a,mode:h,motor:c,offset:p,port:t,sensor:x}};Ee.isRawSensor=({analog:r})=>r===Ee.S1_ANALOG||r===Ee.S2_ANALOG;Ee.BAS1=1;Ee.BAS2=2;Ee.BBS1=3;Ee.BBS2=4;Ee.BAM1=5;Ee.BAM2=6;Ee.BBM1=7;Ee.BBM2=8;Ee.BANK_A=26;Ee.BANK_B=27;Ee.S1=1;Ee.S2=2;Ee.M1=1;Ee.M2=2;Ee.MM=3;Ee.Type_NONE=0;Ee.Type_SWITCH=1;Ee.Type_ANALOG=2;Ee.Type_I2C=9;Ee.Type_NXT_LIGHT_REFLECTED=3;Ee.Type_NXT_LIGHT=4;Ee.Type_NXT_COLOR=13;Ee.Type_NXT_COLOR_RGBRAW=4;Ee.Type_NXT_COLORRED=14;Ee.Type_NXT_COLORGREEN=15;Ee.Type_NXT_COLORBLUE=16;Ee.Type_NXT_COLORNONE=17;Ee.Type_DATABIT0_HIGH=64;Ee.S1_MODE=111;Ee.S1_ANALOG=112;Ee.S1_OFFSET=0;Ee.S2_MODE=163;Ee.S2_ANALOG=164;Ee.S2_OFFSET=52;Ee.Type_EV3_LIGHT_REFLECTED=0;Ee.Type_EV3_LIGHT=1;Ee.Type_EV3_COLOR=2;Ee.Type_EV3_COLOR_REFRAW=3;Ee.Type_EV3_COLOR_RGBRAW=4;Ee.Type_EV3_TOUCH=18;Ee.Type_EV3=19;Ee.Light=131;Ee.Bump=132;Ee.ColorMeasure=131;Ee.Proximity=131;Ee.Touch=131;Ee.Ultrasonic=129;Ee.Mode=129;Ee.Light_Bytes=2;Ee.Analog_Bytes=2;Ee.Bump_Bytes=1;Ee.ColorMeasure_Bytes=2;Ee.Proximity_Bytes=2;Ee.Touch_Bytes=1;Ee.Motor_1=1;Ee.Motor_2=2;Ee.Motor_Both=3;Ee.Motor_Next_Action_Float=0;Ee.Motor_Next_Action_Brake=1;Ee.Motor_Next_Action_BrakeHold=2;Ee.Motor_Stop=96;Ee.Motor_Reset=82;Ee.Motor_Reverse=0;Ee.Motor_Forward=1;Ee.Motor_Move_Absolute=0;Ee.Motor_Move_Relative=1;Ee.Motor_Completion_Dont_Wait=0;Ee.Motor_Completion_Wait_For=1;Ee.Speed_Full=90;Ee.Speed_Medium=60;Ee.Speed_Slow=25;Ee.CONTROL_SPEED=1;Ee.CONTROL_RAMP=2;Ee.CONTROL_RELATIVE=4;Ee.CONTROL_TACHO=8;Ee.CONTROL_BRK=16;Ee.CONTROL_ON=32;Ee.CONTROL_TIME=64;Ee.CONTROL_GO=128;Ee.STATUS_SPEED=1;Ee.STATUS_RAMP=2;Ee.STATUS_MOVING=4;Ee.STATUS_TACHO=8;Ee.STATUS_BREAK=16;Ee.STATUS_OVERLOAD=32;Ee.STATUS_TIME=64;Ee.STATUS_STALL=128;Ee.COMMAND=65;Ee.VOLTAGE=110;Ee.SETPT_M1=66;Ee.SPEED_M1=70;Ee.TIME_M1=71;Ee.CMD_B_M1=72;Ee.CMD_A_M1=73;Ee.SETPT_M2=74;Ee.SPEED_M2=78;Ee.TIME_M2=79;Ee.CMD_B_M2=80;Ee.CMD_A_M2=81;Ee.POSITION_M1=82;Ee.POSITION_M2=86;Ee.STATUS_M1=90;Ee.STATUS_M2=91;Ee.TASKS_M1=92;Ee.TASKS_M2=93;Ee.ENCODER_PID=94;Ee.SPEED_PID=100;Ee.PASS_COUNT=106;Ee.TOLERANCE=107;Ee.BTN_PRESS=218;Ee.RGB_LED=215;Ee.CENTER_RGB_LED=222;var To=Ee,Cy={};const wl=ot(),Pg=pi,Oy=Ct,rr=To,_y=Et,es=new Map,Iy=wl.Pins,My={down:["down","press"],up:["up","release"]},Ng={DEFAULT:{initialize:{value(r,t){const n=es.get(this);Iy.isFirmata(this)&&typeof r.pinValue=="string"&&r.pinValue.length>1&&r.pinValue[0]==="A"&&(r.pinValue=this.io.analogPins[+r.pinValue.slice(1)]),this.pin=Number.isNaN(+r.pinValue)?r.pinValue:+r.pinValue,this.io.pinMode(this.pin,this.io.MODES.INPUT),this.pullup&&this.io.digitalWrite(this.pin,this.io.HIGH),this.pulldown&&this.io.digitalWrite(this.pin,this.io.LOW),this.io.digitalRead(this.pin,s=>{s!==n.last&&t(s)})}},toBoolean:{writable:!0,value(r){return r===this.downValue}}},TINKERKIT:{initialize:{value(r,t){const n=es.get(this);let s=0;this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,a=>{a=a>512?1:0,a!==s&&a!==n.last&&t(a),s=a})}},toBoolean:{writable:!0,value(r){return r===this.downValue}}},EVS_EV3:{initialize:{value(r,t){const n=es.get(this);n.previous=0,n.shield=rr.shieldPort(r.pin),n.register=rr.Touch,n.ev3=new rr(Object.assign(r,{io:this.io})),n.ev3.setup(n.shield,rr.Type_EV3_TOUCH),n.ev3.read(n.shield,rr.Touch,rr.Touch_Bytes,s=>{const a=s[0];n.previous!==a&&t(a),n.previous=a})}},toBoolean:{writable:!0,value(r){return r===this.downValue}}},EVS_NXT:{initialize:{value(r,t){const n=es.get(this);n.previous=0,n.shield=rr.shieldPort(r.pin),n.ev3=new rr(Object.assign(r,{io:this.io})),n.ev3.setup(n.shield,rr.Type_ANALOG),n.ev3.read(n.shield,n.shield.analog,rr.Analog_Bytes,s=>{let a=s[0]|s[1]<<8;a=a<300?1:0,n.previous!==a&&t(a),n.previous=a})}},toBoolean:{writable:!0,value(r){return r===this.downValue}}}};class cs extends Oy{constructor(t){super();let n,s=!1,a=1,c=0;const h={interval:null,last:null},p=_y.debounce(b=>{My[b].forEach(y=>this.emit(y))},7);let x=typeof t=="object"?t.pin:t;wl.Component.call(this,t=wl.Options(t)),wl.Controller.call(this,Ng,t),t.pinValue=x,this.holdtime=t.holdtime||500,this.pullup=t.pullup||t.isPullup||!1,this.pulldown=t.pulldown||t.isPulldown||!1,s=typeof t.invert<"u"?t.invert:this.pullup||!1,s&&(a=a^1,c=c^1),h.last=c,es.set(this,h),Object.defineProperties(this,{value:{get(){return Number(this.isDown)}},invert:{get(){return s},set(b){s=b,a=s?0:1,c=s?1:0,h.last=c}},downValue:{get(){return a},set(b){a=b,c=b^1,s=!!b,h.last=c}},upValue:{get(){return c},set(b){c=b,a=b^1,s=!!b,h.last=a}},isDown:{get(){return this.toBoolean(n)}}}),typeof this.initialize=="function"&&this.initialize(t,b=>{n=b,this.isDown||(h.interval&&clearInterval(h.interval),p("up")),this.isDown&&(p("down"),h.interval=setInterval(()=>{this.isDown&&this.emit("hold")},this.holdtime)),h.last=b})}}class Bg extends Pg.Emitter{constructor(t){super(t)}get type(){return cs}}Pg.installMethodForwarding(Bg.prototype,cs.prototype);cs.Collection=Bg;Cy.IS_TEST_MODE&&(cs.Controllers=Ng,cs.purge=function(){es.clear()});var Dy=cs,Ly={};const Ec=ot(),li=To,Py=Ct,Ny=Et,ts=new Map,Fg={EVS_EV3:{initialize:{value(r,t){const n=ts.get(this);r.mode&&(r.mode=r.mode.toUpperCase()),n.mode=r.mode==="RAW"?li.Type_EV3_COLOR_RGBRAW:li.Type_EV3_COLOR,n.bytes=n.mode===li.Type_EV3_COLOR_RGBRAW?6:2,n.colors=[[],[0,0,0],[0,0,255],[0,128,0],[255,255,0],[255,0,0],[255,255,255],[139,69,19]],n.shield=li.shieldPort(r.pin),n.ev3=new li(Object.assign(r,{io:this.io})),n.ev3.setup(n.shield,li.Type_EV3),n.ev3.write(n.shield,129+n.shield.offset,n.mode),n.ev3.read(n.shield,li.ColorMeasure,n.bytes,s=>{let a="";if(n.bytes===2)a+=String(s[0]|s[1]<<8||1);else for(let c=0;c<3;c++)a+=s[c*2].toString(16).padStart(2,"0");t(a)})}},toRGB:{value(r){const t=ts.get(this);return t.mode===li.Type_EV3_COLOR?r>0&&r<8?t.colors[r]:t.colors[0]:(r=String(r),[0,0,0].map((n,s)=>parseInt(r.slice(s*2,s*2+2),16)))}}},EVS_NXT:{initialize:{value(r,t){const n=ts.get(this);if(r.mode&&(r.mode=r.mode.toUpperCase()),n.mode=r.mode==="RAW"?li.Type_NXT_COLOR_RGBRAW:li.Type_NXT_COLOR,n.bytes=n.mode===li.Type_NXT_COLOR_RGBRAW?10:1,n.mode===li.Type_NXT_COLOR_RGBRAW)throw new Error("Raw RGB is not currently supported for the NXT.");n.colors=[[],[0,0,0],[0,0,255],[0,128,0],[255,255,0],[255,0,0],[255,255,255]],n.shield=li.shieldPort(r.pin),n.ev3=new li(Object.assign(r,{io:this.io})),n.ev3.setup(n.shield,li.Type_NXT_COLOR),n.ev3.read(n.shield,112+n.shield.offset,n.bytes,s=>{let a="";n.bytes===1&&(a+=String(s[0])),t(a)})}},toRGB:{value(r){const t=ts.get(this);return t.mode===li.Type_NXT_COLOR?r>0&&r<7?t.colors[r]:t.colors[0]:(r=String(r),[0,0,0].map((n,s)=>parseInt(r.slice(s*2,s*2+2),16)))}}},ISL29125:{ADDRESSES:{value:[68]},REGISTER:{value:{RESET:0,CONFIG1:1,CONFIG2:2,CONFIG3:3,READ:9}},initialize:{value(r,t){const{Drivers:n}=Ue(),s=n.addressResolver(this,r);this.io.i2cConfig(r),this.io.i2cWriteReg(s,this.REGISTER.RESET,70),this.io.i2cWriteReg(s,this.REGISTER.CONFIG1,13),this.io.i2cWriteReg(s,this.REGISTER.CONFIG2,63),this.io.i2cWriteReg(s,this.REGISTER.CONFIG3,0),this.io.i2cRead(s,this.REGISTER.READ,6,a=>{let c="";const h=a[1]<<8|a[0],p=a[3]<<8|a[2],x=a[5]<<8|a[4],b=[p>>2,h>>2,x>>2].map(y=>Ny.constrain(y,0,255));for(let y=0;y<3;y++)c+=b[y].toString(16).padStart(2,"0");t(c)})}},toRGB:{value(r){return r=String(r),[0,0,0].map((t,n)=>parseInt(r.slice(n*2,n*2+2),16))}}}},Xd=["red","green","blue"];class Uc extends Py{constructor(t){super(),Ec.Component.call(this,t=Ec.Options(t)),Ec.Controller.call(this,Fg,t);const n={},s=t.freq||25;let a=0,c=null;ts.set(this,n),this.toRGB||(this.toRGB=t.toRGB||(h=>h)),Object.defineProperties(this,{value:{get(){return a}},rgb:{get(){return this.toRGB(a).reduce((h,p,x)=>(h[Xd[x]]=p,h),{})}}}),typeof this.initialize=="function"&&this.initialize(t,h=>{a=h}),setInterval(()=>{if(a===void 0)return;const h={rgb:this.rgb};this.emit("data",h),a!==c&&(c=a,this.emit("change",h))},s)}static hexCode(t){return t.red===void 0||t.green===void 0||t.blue===void 0?null:t.length===0?"unknown":Xd.reduce((n,s)=>n+=t[s].toString(16).padStart(2,"0"),"")}}Ly.IS_TEST_MODE&&(Uc.Controllers=Fg,Uc.purge=()=>{ts.clear()});var By=Uc,Fy={};const ao=ot(),Gy=Zr(),Wy=ao.Pins,Gg=pi,{scale:Uy,fscale:ky,constrain:Zd}=Et,Nl=new Map,Wg={PCA9685:{initialize:{value:function(r){const t=Nl.get(this);this.address=r.address||64,this.pwmRange=r.pwmRange||[1e3,2e3],this.frequency=r.frequency||50,t.expander=Gy.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),this.pin=t.expander.normalize(r.pin)}},update:{writable:!0,value:function(r){Nl.get(this).expander.servoWrite(this.pin,r)}}},DEFAULT:{initialize:{value:function(r){r.debug&&!this.board.pins.isServo(this.pin)&&ao.Pins.Error({pin:this.pin,type:"PWM",via:"Servo"}),this.io.servoConfig(this.pin,this.pwmRange[0],this.pwmRange[1])}},update:{writable:!0,value:function(r){this.io.servoWrite(this.pin,r)}}}},kc="FORWARD",Hc="FORWARD_REVERSE",Jd="FORWARD_BRAKE_REVERSE",Qd={[kc]:{device:{value:kc}},[Hc]:{device:{value:Hc}},[Jd]:{device:{value:Jd}}};class Or{constructor(t){if(!(this instanceof Or))return new Or(t);ao.Component.call(this,t=ao.Options(t));let n;typeof t.controller>"u"&&Wy.isFirmata(this)&&(typeof n=="string"&&n.length>1&&n[0]==="A"&&(n=this.io.analogPins[+n.slice(1)]),n=+n,!Number.isNaN(n)&&this.pin!==n&&(this.pin=n)),ao.Controller.call(this,Wg,t),Object.defineProperties(this,t.device&&Qd[t.device]||Qd.FORWARD),this.pwmRange=t.pwmRange||[1e3,2e3],this.neutral=t.neutral,Nl.set(this,{}),this.initialize(t);const[s,a]=this.pwmRange;if(typeof this.neutral<"u"&&this.neutral<=100&&(this.neutral=Uy(this.neutral,0,100,s,a)),typeof this.neutral>"u"&&(this.neutral=(s+a)/2),this.neutral=Zd(this.neutral,s,a),this.device===Hc&&this.neutral===s)throw new Error("Bidirectional (FORWARD_REVERSE) speed controllers require a non-zero neutral point");this.device===kc&&(this.neutral=s),this.throttle(this.neutral)}throttle(t){if(t>0&&t<=100){if(this.device!=="FORWARD")throw new Error("Bidirectional (FORWARD_REVERSE, FORWARD_*_REVERSE) speed controllers require a pulse in usec");t=ky(t,0,100,this.pwmRange[0],this.pwmRange[1])}return this.update(Zd(t,this.pwmRange[0],this.pwmRange[1])),this}brake(){return this.update(this.neutral),this}}class Ug extends Gg{constructor(t){super(t)}get type(){return Or}}Gg.installMethodForwarding(Ug.prototype,Or.prototype);Or.Collection=Ug;Fy.IS_TEST_MODE&&(Or.Controllers=Wg,Or.purge=function(){Nl.clear()});var Hy=Or,zy={};const ep=ot(),$y=Ct,kg=pi,os=new Map,go={INPUT:0,OUTPUT:1,ANALOG:2,PWM:3,SERVO:4},zc="low",$c="high",Sl="analog",jc="digital";let yi=class Rl extends $y{constructor(t){if(super(),t===void 0||typeof t=="object"&&t.addr===void 0&&t.pin===void 0)throw new Error("Pins must have a pin number");const n=typeof t=="object"?t.addr||t.pin||0:t;let s=Rl.isAnalog(t),a=!1;ep.Component.call(this,t=ep.Options(t)),t.addr=t.addr||t.pin,this.io.analogPins.includes(n)&&(s=!1,a=!0);const h=a?n:typeof t!="object"?t:t.addr,p=t.type||(s?Sl:jc),x={mode:null,last:null,value:0};os.set(this,x),Object.defineProperties(this,{type:{get(){return p}},addr:{get(){return h}},value:{get(){return x.value}},mode:{set(b){os.get(this).mode=b,this.io.pinMode(this.addr,b)},get(){return os.get(this).mode}}}),this.mode=typeof t.as<"u"?t.as:typeof t.mode<"u"?t.mode:s?2:1,this.freq=typeof t.freq<"u"?t.freq:20,(this.mode===0||this.mode===2)&&Hg(this),p===jc&&Object.defineProperties(this,{isHigh:{get(){return!!x.value}},isLow:{get(){return!x.value}}})}query(t){let n=this.addr;return this.type===Sl&&(n=this.io.analogPins[this.addr]),this.io.queryPinState(n,()=>t(this.io.pins[n])),this}high(){const t=this.type===Sl?this.board.RESOLUTION.PWM:1;return Rl.write(this,t),this.emit($c),this}low(){return Rl.write(this,0),this.emit(zc),this}};function Hg(r){const t=os.get(r);r.io[`${r.type}Read`](r.addr,n=>t.value=n),setInterval(()=>{let n,s;n=t.value?zc:$c,s=t.value?$c:zc,t.mode===go.INPUT&&(t.last===null&&(t.last=n),t.last===n&&(t.last=s,r.emit(s,t.value),r.emit("change",t.value))),r.emit("data",t.value)},r.freq)}Object.entries(go).forEach(([r,t])=>{Object.defineProperty(yi,r,{value:t})});yi.isAnalog=r=>{if(typeof r=="string"&&yi.isPrefixed(r,["I","A"]))return!0;if(typeof r=="object")return yi.isAnalog(typeof r.addr<"u"?r.addr:r.pin)};yi.isPrefixed=(r,t)=>(r=r[0],t.reduce((n,s)=>n||s===r,!1));yi.write=(r,t)=>{const n=os.get(r);n.value=t,r.mode=go.OUTPUT,r.io[`${r.type}Write`](r.addr,t),r.emit("write",null,t)};yi.read=(r,t)=>{let n=!1;r.type===jc&&r.mode!==0&&(n=!0,r.mode=go.INPUT),r.type===Sl&&r.mode!==2&&(n=!0,r.mode=go.ANALOG),n&&Hg(r),r.on("data",()=>{t.call(r,null,r.value)})};["read","write"].forEach(r=>{yi.prototype[r]=function(t){return yi[r](this,t),this}});let zg=class extends kg.Emitter{constructor(t){super(t)}get type(){return yi}};kg.installMethodForwarding(zg.prototype,yi.prototype);yi.Collection=zg;zy.IS_TEST_MODE&&(yi.purge=()=>{os.clear()});var wh=yi,jy={};const tp=ot(),Vy=Ct,qy=wh,{toFixed:ip}=Et,qr=new Map,Jn={ADAFRUIT_ULTIMATE_GPS:{receiver:{value:"FGPMMOPA6H"}}},Tl={FGPMMOPA6H:{chip:{value:"MT3339"}}},Vc={DEFAULT:{baud:{value:9600,writable:!0},configure:{value(r){Ce.nextTick(r)}}},MT3339:{baud:{value:9600,writable:!0},configure:{value(r){Ce.nextTick(r)}},frequency:{get(){return qr.get(this).frequency},set(r){const t=qr.get(this);r<10&&(r=10),t.frequency=r,this.sendCommand(`$PMTK220,${String(1e3/t.frequency)}`)}},restart:{value(r){r===!0?this.sendCommand("$PMTK103"):(this.sendCommand("$PMTK101"),setTimeout(()=>{this.sendCommand("")},1e3))}}}};class io extends Vy{constructor(t){super(),Array.isArray(t)&&(t={pins:{rx:t[0],tx:t[1],onOff:t[2]}}),typeof t.pins>"u"&&(t.pins={}),tp.Component.call(this,t=tp.Options(t));let n=t.breakout||{},s=t.receiver,a=t.chip;Jn[n]&&(!s&&Jn[n].receiver&&(s=Jn[n].receiver.value),!a&&Jn[n].chip&&(a=Jn[n].chip.value)),a||(s&&Tl[s].chip?a=Tl[s].chip.value:a="DEFAULT"),n=typeof n=="string"?Vc[n]:t.breakout,a=typeof a=="string"?Vc[a]:t.chip,s=typeof s=="string"?Tl[s]:t.receiver,a&&Object.defineProperties(this,a),s&&Object.defineProperties(this,s),n&&Object.defineProperties(this,n),this.fixed=t.fixed||6,this.baud=t.baud||this.baud;let c={sat:{},latitude:0,longitude:0,altitude:0,speed:0,course:0,frequency:1,lowPowerMode:!1};qr.set(this,c),Object.defineProperties(this,{latitude:{get(){return c.latitude}},longitude:{get(){return c.longitude}},altitude:{get(){return c.altitude}},sat:{get(){return c.sat}},speed:{get(){return c.speed}},course:{get(){return c.course}},time:{get(){return c.time}}}),this.initialize&&this.initialize(t)}initialize(t){const n=qr.get(this);n.portId=t.serialPort||t.portId||t.port||t.bus,typeof n.portId>"u"&&this.io.SERIAL_PORT_IDs&&(n.portId=this.io.SERIAL_PORT_IDs.DEFAULT),["tx","rx"].forEach(s=>{this.pins[s]&&this.io.pinMode(this.pins[s],this.io.MODES.SERIAL)}),this.pins.onOff&&(this.io.pinMode(this.pins.onOff,this.io.MODES.OUTPUT),this.onOff=new qy(this.pins.onOff)),this.io.serialConfig({portId:n.portId,baud:this.baud,rxPin:this.pins.rx,txPin:this.pins.tx}),this.configure&&this.configure(()=>{this.listen(),t.frequency&&(this.frequency=t.frequency)})}sendCommand(t){const n=qr.get(this),s=[];for(let c=0;c<t.length;++c)s[c]=t.charCodeAt(c);const a=rp(t.substring(1));s.push(42,a.charCodeAt(0),a.charCodeAt(1),13,10),this.io.serialWrite(n.portId,s)}listen(){const t=qr.get(this);let n="";this.io.serialRead(t.portId,s=>{n+=new At(s).toString("ascii");const a=n.split(`\r
`);if(a.length>1){for(let c=0;c<a.length-1;c++)this.parseNmeaSentence(a[c]);n=a[a.length-1]}})}parseNmeaSentence(t){const n=qr.get(this),s=t.split("*");if(s[1]!==rp(s[0].substring(1)))return;this.emit("sentence",t);const a=s[0].split(","),c={latitude:n.latitude,longitude:n.longitude,altitude:n.altitude,speed:n.speed,course:n.course};switch(a[0]){case"$GPGGA":n.time=a[1],n.latitude=fl(a[2],2,a[3],this.fixed),n.longitude=fl(a[4],3,a[5],this.fixed),n.altitude=Number(a[9]);break;case"$GPGSA":n.sat.satellites=a.slice(3,15),n.sat.pdop=Number(a[15]),n.sat.hdop=Number(a[16]),n.sat.vdop=Number(a[17]),this.emit("operations",t);break;case"$GPRMC":n.time=a[1],n.latitude=fl(a[3],2,a[4],this.fixed),n.longitude=fl(a[5],3,a[6],this.fixed),n.course=Number(a[8]),n.speed=ip(a[7]*.514444,this.fixed);break;case"$GPVTG":n.course=Number(a[1]),n.speed=ip(a[5]*.514444,this.fixed);break;case"$GPGSV":break;case"$PGACK":this.emit("acknowledge",t);break;default:this.emit("unknown",t);break}this.emit("data",{latitude:n.latitude,longitude:n.longitude,altitude:n.altitude,speed:n.speed,course:n.course,sat:n.sat,time:n.time}),(c.latitude!==n.latitude||c.longitude!==n.longitude||c.altitude!==n.altitude)&&this.emit("change",{latitude:n.latitude,longitude:n.longitude,altitude:n.altitude}),(c.speed!==n.speed||c.course!==n.course)&&this.emit("navigation",{speed:n.speed,course:n.course})}}function fl(r,t,n,s){if(r){let a=Number(r.substring(0,t))+Number(r.substring(t))/60;return(n==="S"||n==="W")&&(a*=-1),Number(a.toFixed(s))}else return 0}function rp(r){let t=0;for(let n=0;n<r.length;++n)t^=r.charCodeAt(n);return t=t.toString(16).toUpperCase(),t.length<2&&(t=`00${t}`.slice(-2)),t}jy.IS_TEST_MODE&&(io.Breakouts=Jn,io.Chips=Vc,io.Receivers=Tl,io.purge=()=>{qr.clear()});var Ky=io,Yy={MAPS:{MPR121QR2_SHIELD:{KEYS:{0:1,1:2,2:3,3:4,4:5,5:6,6:7,7:8,8:9},TARGETS:{256:0,32:1,4:2,128:3,16:4,2:5,64:6,8:7,1:8}},MPR121:{KEYS:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11},TARGETS:{1:0,2:1,4:2,8:3,16:4,32:5,64:6,128:7,256:8,512:9,1024:10,2048:11}},MPR121_KEYPAD:{KEYS:{0:1,1:2,2:3,3:4,4:5,5:6,6:7,7:8,8:9,9:10,10:11,11:12},TARGETS:{8:0,128:1,2048:2,4:3,64:4,1024:5,2:6,32:7,512:8,1:9,16:10,256:11}},MPR121_SHIELD:{KEYS:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11},TARGETS:{1:0,2:1,4:2,8:3,16:4,32:5,64:6,128:7,256:8,512:9,1024:10,2048:11}}},MPR121_DEFAULT_ADDRESS:90,MPR121_SOFTRESET:128,ELE0_ELE7_TOUCH_STATUS:0,ELE8_ELE11_ELEPROX_TOUCH_STATUS:1,ELE0_7_OOR_STATUS:2,ELE8_11_ELEPROX_OOR_STATUS:3,ELE0_FILTERED_DATA_LSB:4,ELE0_FILTERED_DATA_MSB:5,ELE1_FILTERED_DATA_LSB:6,ELE1_FILTERED_DATA_MSB:7,ELE2_FILTERED_DATA_LSB:8,ELE2_FILTERED_DATA_MSB:9,ELE3_FILTERED_DATA_LSB:10,ELE3_FILTERED_DATA_MSB:11,ELE4_FILTERED_DATA_LSB:12,ELE4_FILTERED_DATA_MSB:13,ELE5_FILTERED_DATA_LSB:14,ELE5_FILTERED_DATA_MSB:15,ELE6_FILTERED_DATA_LSB:16,ELE6_FILTERED_DATA_MSB:17,ELE7_FILTERED_DATA_LSB:18,ELE7_FILTERED_DATA_MSB:19,ELE8_FILTERED_DATA_LSB:20,ELE8_FILTERED_DATA_MSB:21,ELE9_FILTERED_DATA_LSB:22,ELE9_FILTERED_DATA_MSB:23,ELE10_FILTERED_DATA_LSB:24,ELE10_FILTERED_DATA_MSB:25,ELE11_FILTERED_DATA_LSB:26,ELE11_FILTERED_DATA_MSB:27,ELEPROX_FILTERED_DATA_LSB:28,ELEPROX_FILTERED_DATA_MSB:29,ELE0_BASELINE_VALUE:30,ELE1_BASELINE_VALUE:31,ELE2_BASELINE_VALUE:32,ELE3_BASELINE_VALUE:33,ELE4_BASELINE_VALUE:34,ELE5_BASELINE_VALUE:35,ELE6_BASELINE_VALUE:36,ELE7_BASELINE_VALUE:37,ELE8_BASELINE_VALUE:38,ELE9_BASELINE_VALUE:39,ELE10_BASELINE_VALUE:40,ELE11_BASELINE_VALUE:41,ELEPROX_BASELINE_VALUE:42,MHD_RISING:43,NHD_AMOUNT_RISING:44,NCL_RISING:45,FDL_RISING:46,MHD_FALLING:47,NHD_AMOUNT_FALLING:48,NCL_FALLING:49,FDL_FALLING:50,NHD_AMOUNT_TOUCHED:51,NCL_TOUCHED:52,FDL_TOUCHED:53,ELEPROX_MHD_RISING:54,ELEPROX_NHD_AMOUNT_RISING:55,ELEPROX_NCL_RISING:56,ELEPROX_FDL_RISING:57,ELEPROX_MHD_FALLING:58,ELEPROX_NHD_AMOUNT_FALLING:59,ELEPROX_FDL_FALLING:60,ELEPROX_NHD_AMOUNT_TOUCHED:62,ELEPROX_NCL_TOUCHED:63,ELEPROX_FDL_TOUCHED:64,ELE0_TOUCH_THRESHOLD:65,ELE0_RELEASE_THRESHOLD:66,ELE1_TOUCH_THRESHOLD:67,ELE1_RELEASE_THRESHOLD:68,ELE2_TOUCH_THRESHOLD:69,ELE2_RELEASE_THRESHOLD:70,ELE3_TOUCH_THRESHOLD:71,ELE3_RELEASE_THRESHOLD:72,ELE4_TOUCH_THRESHOLD:73,ELE4_RELEASE_THRESHOLD:74,ELE5_TOUCH_THRESHOLD:75,ELE5_RELEASE_THRESHOLD:76,ELE6_TOUCH_THRESHOLD:77,ELE6_RELEASE_THRESHOLD:78,ELE7_TOUCH_THRESHOLD:79,ELE7_RELEASE_THRESHOLD:80,ELE8_TOUCH_THRESHOLD:81,ELE8_RELEASE_THRESHOLD:82,ELE9_TOUCH_THRESHOLD:83,ELE9_RELEASE_THRESHOLD:84,ELE10_TOUCH_THRESHOLD:85,ELE10_RELEASE_THRESHOLD:86,ELE11_TOUCH_THRESHOLD:87,ELE11_RELEASE_THRESHOLD:88,ELEPROX_TOUCH_THRESHOLD:89,ELEPROX_RELEASE_THRESHOLD:90,DEBOUNCE_TOUCH_AND_RELEASE:91,AFE_CONFIGURATION:92,FILTER_CONFIG:93,ELECTRODE_CONFIG:94,ELE0_CURRENT:95,ELE1_CURRENT:96,ELE2_CURRENT:97,ELE3_CURRENT:98,ELE4_CURRENT:99,ELE5_CURRENT:100,ELE6_CURRENT:101,ELE7_CURRENT:102,ELE8_CURRENT:103,ELE9_CURRENT:104,ELE10_CURRENT:105,ELE11_CURRENT:106,ELEPROX_CURRENT:107,ELE0_ELE1_CHARGE_TIME:108,ELE2_ELE3_CHARGE_TIME:109,ELE4_ELE5_CHARGE_TIME:110,ELE6_ELE7_CHARGE_TIME:111,ELE8_ELE9_CHARGE_TIME:112,ELE10_ELE11_CHARGE_TIME:113,ELEPROX_CHARGE_TIME:114,GPIO_CONTROL_0:115,GPIO_CONTROL_1:116,GPIO_DATA:117,GPIO_DIRECTION:118,GPIO_ENABLE:119,GPIO_SET:120,GPIO_CLEAR:121,GPIO_TOGGLE:122,AUTO_CONFIG_CONTROL_0:123,AUTO_CONFIG_CONTROL_1:124,AUTO_CONFIG_USL:125,AUTO_CONFIG_LSL:126,AUTO_CONFIG_TARGET_LEVEL:127,TOUCH_THRESHOLD:15,RELEASE_THRESHOLD:10,NUM_CHANNELS:12},Xy={};const wc=ot(),Zy=Ct,Sh=Et,{scale:np,toFixed:sp,uint16:dl}=Sh,Ft=new Map,Jy={down:["down","press","tap","impact","hit","touch"],up:["up","release"],hold:["hold"]};function Qy(r){return r.flat?r.flat():r.reduce((t,n)=>t.concat(n),[])}function dn(r){let t=[];return r.keys&&Array.isArray(r.keys)&&(t=r.keys.slice(),t.every(Array.isArray)&&(t=Qy(t))),t}const Ei={MPR121:{ADDRESSES:{value:[90,91,92,93]},REGISTER:{value:Yy},initialize:{value(r,t){const{Drivers:n}=Ue(),s=n.addressResolver(this,r),a=Ft.get(this),c=this.REGISTER.MAPS[r.controller].KEYS,h=this.REGISTER.MAPS[r.controller].TARGETS,p=Object.keys(c).reduce((y,A)=>(y[A]=c[A],y),[]);let x=dn(r);const b=p.length;this.io.i2cConfig(r),this.io.i2cWrite(s,this.REGISTER.MPR121_SOFTRESET,99),this.io.i2cWrite(s,this.REGISTER.MHD_RISING,1),this.io.i2cWrite(s,this.REGISTER.NHD_AMOUNT_RISING,1),this.io.i2cWrite(s,this.REGISTER.NCL_RISING,0),this.io.i2cWrite(s,this.REGISTER.FDL_RISING,0),this.io.i2cWrite(s,this.REGISTER.MHD_FALLING,1),this.io.i2cWrite(s,this.REGISTER.NHD_AMOUNT_FALLING,1),this.io.i2cWrite(s,this.REGISTER.NCL_FALLING,255),this.io.i2cWrite(s,this.REGISTER.FDL_FALLING,2),this.sensitivity={press:Array(12).fill(.95),release:Array(12).fill(.975)},r.keys&&r.controller==="MPR121_SHIELD"&&(x=x.reverse()),r.sensitivity&&(Array.isArray(r.sensitivity)?r.sensitivity.forEach(function({press:y,release:A},d){typeof y<"u"&&(this.sensitivity.press[d]=y),typeof A<"u"&&(this.sensitivity.release[d]=A)},this):(typeof r.sensitivity.press<"u"&&this.sensitivity.press.fill(r.sensitivity.press),typeof r.sensitivity.release<"u"&&this.sensitivity.release.fill(r.sensitivity.release)));for(let y=0;y<12;y++)this.io.i2cWrite(s,this.REGISTER.ELE0_TOUCH_THRESHOLD+(y<<1),np(sp(1-this.sensitivity.press[y],3),0,1,0,255)),this.io.i2cWrite(s,this.REGISTER.ELE0_RELEASE_THRESHOLD+(y<<1),np(sp(1-this.sensitivity.release[y],3),0,1,0,255));this.io.i2cWrite(s,this.REGISTER.FILTER_CONFIG,19),this.io.i2cWrite(s,this.REGISTER.AFE_CONFIGURATION,128),this.io.i2cWrite(s,this.REGISTER.AUTO_CONFIG_CONTROL_0,143),this.io.i2cWrite(s,this.REGISTER.AUTO_CONFIG_USL,228),this.io.i2cWrite(s,this.REGISTER.AUTO_CONFIG_LSL,148),this.io.i2cWrite(s,this.REGISTER.AUTO_CONFIG_TARGET_LEVEL,205),this.io.i2cWrite(s,this.REGISTER.ELECTRODE_CONFIG,204),x.length||(x=Array.from(Object.assign({},c,{length:b}))),a.length=b,a.touches=pn(b),a.keys=x,a.mapping=p,a.targets=h,a.isMultitouch=!0,this.io.i2cRead(s,0,2,y=>t(dl(y[1],y[0])))}},toAlias:{value(r){return Ft.get(this).keys[r]}},toIndices:{value(r){const t=Ft.get(this),n=[];for(let s=0;s<12;s++)r&1<<s&&n.push(t.targets[r&1<<s]);return n}}},VKEY:{initialize:{value(r,t){const n=Ft.get(this),s=r.aref||this.io.aref||5,a=Sh.inRange(s,4.5,5.5),c=[1,2,3,4,5,6,7,8,9,10,11,12];let h=dn(r),p=0;h.length||(h=c),n.scale=[a?17:26,a?40:58,a?496:721],p=c.length,n.length=p,n.touches=pn(p),n.mapping=c,n.keys=h,n.isMultitouch=!1,this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,x=>t(x))}},toAlias:{value(r){return Ft.get(this).keys[r]}},toIndices:{value(r){const t=Ft.get(this),n=t.length,s=t.scale[0],a=t.scale[1],c=t.scale[2];return r<s||r>c?[]:[n-(r-s)/a|0]}}},ANALOG:{initialize:{value(r,t){let n=dn(r),s=[],a=0;if(r.length&&!n.length&&(n=Array.from({length:r.length},(b,y)=>y)),!n.length)throw new Error("Missing `keys`. Analog Keypad requires either a numeric `length` or a `keys` array.");s=n,a=s.length;const c=Ft.get(this),h=a+1,p=Math.round(1023/h),x=Array.from({length:h},(b,y)=>{const A=p*y;return Array.from({length:p-1},(d,S)=>A+S)});c.length=a,c.ranges=x,c.touches=pn(a),c.mapping=s,c.keys=n,c.isMultitouch=!0,this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,b=>t(b))}},toAlias:{value(r){return Ft.get(this).keys[r]}},toIndices:{value(r){const t=Ft.get(this);let s=t.ranges.findIndex(a=>a.includes(r));return s===t.length&&s--,s<0?[]:[s]}}},AT42QT1070:{ADDRESSES:{value:[27]},REGISTER:{value:{READ:3}},initialize:{value(r,t){const{Drivers:n}=Ue(),s=n.addressResolver(this,r),a=Ft.get(this),c=[0,1,2,3,4,5,6];let h=dn(r),p=0;h.length||(h=c),p=c.length,a.length=p,a.touches=pn(p),a.mapping=c,a.keys=h,a.isMultitouch=!0,this.io.i2cConfig(r),this.io.i2cRead(s,this.REGISTER.READ,1,x=>t(x[0]))}},toAlias:{value(r){return Ft.get(this).keys[r]}},toIndices:{value(r){const t=[];for(let n=0;n<7;n++)r&1<<n&&t.push(n);return t}}},"3X4_I2C_NANO_BACKPACK":{ADDRESSES:{value:[10,11,12,13]},initialize:{value(r,t){const{Drivers:n}=Ue(),s=n.addressResolver(this,r),a=Ft.get(this),c=[1,2,3,4,5,6,7,8,9,"*",0,"#"];let h=dn(r),p=0;h.length||(h=c),p=c.length,a.length=p,a.touches=pn(p),a.mapping=c,a.keys=h,a.isMultitouch=!0,this.io.i2cConfig(r),this.io.i2cRead(s,2,x=>t(dl(x[0],x[1])))}},toAlias:{value(r){return Ft.get(this).keys[r]}},toIndices:{value(r){const t=Ft.get(this),n=[];for(let s=0;s<t.length;s++)r&1<<s&&n.push(s);return n}}},"4X4_I2C_NANO_BACKPACK":{ADDRESSES:{value:[10,11,12,13]},initialize:{value(r,t){const{Drivers:n}=Ue(),s=n.addressResolver(this,r),a=Ft.get(this);let c=dn(r);const h=[1,2,3,"A",4,5,6,"B",7,8,9,"C","*",0,"#","D"];let p=0;c.length||(c=h),p=h.length,a.length=p,a.touches=pn(p),a.mapping=h,a.keys=c,a.isMultitouch=!0,this.io.i2cConfig(r),this.io.i2cRead(s,2,x=>t(dl(x[0],x[1])))}},toAlias:{value(r){return Ft.get(this).keys[r]}},toIndices:{value(r){const t=Ft.get(this),n=[];for(let s=0;s<t.length;s++)r&1<<s&&n.push(s);return n}}},SX1509:{ADDRESSES:{value:[10,11,12,13]},REGISTER:{value:{PULLUP:3,OPEN_DRAIN:5,DIR:7,DIR_B:14,DIR_A:15}},initialize:{value(r,t){const{Drivers:n}=Ue(),s=n.addressResolver(this,r),a=Ft.get(this);let c=dn(r);const h=[1,2,3,4,5,6,7,8,9,"*",0,"#"];let p=0;c.length||(c=h),p=h.length,a.length=p,a.touches=pn(p),a.mapping=h,a.keys=c,a.isMultitouch=!0,this.io.i2cConfig(r),this.io.i2cWriteReg(s,this.REGISTER.DIR,240),this.io.i2cWriteReg(s,this.REGISTER.OPEN_DRAIN,15),this.io.i2cWriteReg(s,this.REGISTER.PULLUP,240),this.io.i2cRead(s,2,x=>t(dl(x[0],x[1])))}},toAlias:{value(r){return Ft.get(this).keys[r]}},toIndices:{value(r){const t=Ft.get(this),n=[];for(let s=0;s<t.length;s++)r&1<<s&&n.push(s);return n}}}};Ei.MPR121QR2=Ei.MPR121;Ei.MPR121QR2_SHIELD=Ei.MPR121;Ei.MPR121_KEYPAD=Ei.MPR121;Ei.MPR121_SHIELD=Ei.MPR121;Ei.QTOUCH=Ei.AT42QT1070;Ei.DEFAULT=Ei.ANALOG;function pn(r){return Array.from({length:r},()=>({timeout:null,value:0}))}class qc extends Zy{constructor(t){super(),wc.Component.call(this,t=wc.Options(t));let n=null;const s={touches:null,timeout:null,length:null,keys:null,mapping:null,holdtime:null},a=Sh.debounce(function(c,h){const p={type:c,which:h,timestamp:Date.now()};Jy[c].forEach(function(x){this.emit(x,p)},this),this.emit("change",Object.assign({},p))},5);wc.Controller.call(this,Ei,t),s.holdtime=t.holdtime?t.holdtime:500,Ft.set(this,s),typeof this.initialize=="function"&&this.initialize(t,c=>{n=c;const h=Date.now(),p=this.toIndices(c),x=s.length,b={down:[],hold:[],up:[]};let y=null;for(let A=0;A<x;A++)y=this.toAlias(A),p.includes(A)?(s.touches[A].value===0?(s.touches[A].timeout=h+s.holdtime,b.down.push(y)):s.touches[A].value===1&&s.touches[A].timeout!==null&&h>s.touches[A].timeout&&(s.touches[A].timeout=h+s.holdtime,b.hold.push(y)),s.touches[A].value=1):(s.touches[A].value===1&&(s.touches[A].timeout=null,b.up.push(y)),s.touches[A].value=0),y=null;Object.keys(b).forEach(function(A){const d=b[A];d.length&&a.call(this,A,d)},this)}),Object.defineProperties(this,{isMultitouch:{get(){return s.isMultitouch}},value:{get(){return n}}})}}Xy.IS_TEST_MODE&&(qc.Controllers=Ei,qc.purge=()=>{Ft.clear()});var eE=qc,tE={DEFAULT:{0:[14,27,27,27,27,27,14,0],1:[2,6,14,6,6,6,6,0],2:[14,27,3,6,12,24,31,0],3:[14,27,3,14,3,27,14,0],4:[3,7,15,27,31,3,3,0],5:[31,24,30,3,3,27,14,0],6:[14,27,24,30,27,27,14,0],7:[31,3,6,12,12,12,12,0],8:[14,27,27,14,27,27,14,0],9:[14,27,27,15,3,27,14,0],10:[23,21,21,21,23,0,31,0],11:[10,10,10,10,10,0,31,0],12:[23,17,23,20,23,0,31,0],13:[23,17,19,17,23,0,31,0],14:[21,21,23,17,17,0,31,0],15:[23,20,23,17,23,0,31,0],16:[23,20,23,21,23,0,31,0],17:[23,17,18,18,18,0,31,0],18:[23,21,23,21,23,0,31,0],19:[23,21,23,17,23,0,31,0],circle:[0,14,17,17,17,14,0,0],cdot:[0,14,17,21,17,14,0,0],donut:[0,14,31,27,31,14,0,0],ball:[0,14,31,31,31,14,0,0],square:[0,31,17,17,17,31,0,0],sdot:[0,31,17,21,17,31,0,0],fbox:[0,31,31,31,31,31,0,0],sbox:[0,0,14,10,14,0,0,0],sfbox:[0,0,14,14,14,0,0,0],bigpointerright:[8,12,10,9,10,12,8,0],bigpointerleft:[2,6,10,18,10,6,2,0],arrowright:[8,12,10,9,10,12,8,0],arrowleft:[2,6,10,18,10,6,2,0],ascprogress1:[16,16,16,16,16,16,16,16],ascprogress2:[24,24,24,24,24,24,24,24],ascprogress3:[28,28,28,28,28,28,28,28],ascprogress4:[30,30,30,30,30,30,30,30],fullprogress:[31,31,31,31,31,31,31,31],descprogress1:[1,1,1,1,1,1,1,1],descprogress2:[3,3,3,3,3,3,3,3],descprogress3:[7,7,7,7,7,7,7,7],descprogress4:[15,15,15,15,15,15,15,15],ascchart1:[31,0,0,0,0,0,0,0],ascchart2:[31,31,0,0,0,0,0,0],ascchart3:[31,31,31,0,0,0,0,0],ascchart4:[31,31,31,31,0,0,0,0],ascchart5:[31,31,31,31,31,0,0,0],ascchart6:[31,31,31,31,31,31,0,0],ascchart7:[31,31,31,31,31,31,31,0],descchart1:[0,0,0,0,0,0,0,31],descchart2:[0,0,0,0,0,0,31,31],descchart3:[0,0,0,0,0,31,31,31],descchart4:[0,0,0,0,31,31,31,31],descchart5:[0,0,0,31,31,31,31,31],descchart6:[0,0,31,31,31,31,31,31],descchart7:[0,31,31,31,31,31,31,31],borderleft1:[1,1,1,1,1,1,1,1],borderleft2:[3,2,2,2,2,2,2,3],borderleft3:[7,4,4,4,4,4,4,7],borderleft4:[15,8,8,8,8,8,8,15],borderleft5:[31,16,16,16,16,16,16,31],bordertopbottom5:[31,0,0,0,0,0,0,31],borderright1:[16,16,16,16,16,16,16,16],borderright2:[24,8,8,8,8,8,8,24],borderright3:[28,4,4,4,4,4,4,28],borderright4:[30,2,2,2,2,2,2,30],borderright5:[31,1,1,1,1,1,1,31],box1:[3,3,3,0,0,0,0,0],box2:[24,24,24,0,0,0,0,0],box3:[27,27,27,0,0,0,0,0],box4:[0,0,0,0,3,3,3,0],box5:[3,3,3,0,3,3,3,0],box6:[24,24,24,0,3,3,3,0],box7:[27,27,27,0,3,3,3,0],box8:[0,0,0,0,24,24,24,0],box9:[3,3,3,0,24,24,24,0],box10:[24,24,24,0,24,24,24,0],box11:[27,27,27,0,24,24,24,0],box12:[0,0,0,0,27,27,27,0],box13:[3,3,3,0,27,27,27,0],box14:[24,24,24,0,27,27,27,0],box15:[27,27,27,0,27,27,27,0],euro:[3,4,30,8,30,8,7,0],cent:[0,0,14,17,16,21,14,8],speaker:[1,3,15,15,15,3,1,0],sound:[8,16,0,24,0,16,8,0],x:[0,27,14,4,14,27,0,0],target:[0,10,17,21,17,10,0,0],pointerright:[0,8,12,14,12,8,0,0],pointerup:[0,0,4,14,31,0,0,0],pointerleft:[0,2,6,14,6,2,0,0],pointerdown:[0,0,31,14,4,0,0,0],arrowne:[0,15,3,5,9,16,0,0],arrownw:[0,30,24,20,18,1,0,0],arrowsw:[0,1,18,20,24,30,0,0],arrowse:[0,16,9,5,3,15,0,0],dice1:[0,0,0,4,0,0,0,0],dice2:[0,16,0,0,0,1,0,0],dice3:[0,16,0,4,0,1,0,0],dice4:[0,17,0,0,0,17,0,0],dice5:[0,17,0,4,0,17,0,0],dice6:[0,17,0,17,0,17,0,0],bell:[4,14,14,14,31,0,4,0],smile:[0,10,0,17,14,0,0,0],note:[2,3,2,14,30,12,0,0],clock:[0,14,21,23,17,14,0,0],heart:[0,10,31,31,31,14,4,0],duck:[0,12,29,15,15,6,0,0],check:[0,1,3,22,28,8,0,0],retarrow:[1,1,5,9,31,8,4,0],runninga:[6,6,5,14,20,4,10,17],runningb:[6,6,4,14,14,4,10,10]}},$g={exports:{}},iE={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Al=iE,jg={};for(var Sc in Al)Al.hasOwnProperty(Sc)&&(jg[Al[Sc].join()]=Sc);var Ze=$g.exports={rgb:{channels:3},hsl:{channels:3},hsv:{channels:3},hwb:{channels:3},cmyk:{channels:4},xyz:{channels:3},lab:{channels:3},lch:{channels:3},hex:{channels:1},keyword:{channels:1},ansi16:{channels:1},ansi256:{channels:1},hcg:{channels:3}};for(var Yn in Ze)if(Ze.hasOwnProperty(Yn)){if(!("channels"in Ze[Yn]))throw new Error("missing channels property: "+Yn);var rE=Ze[Yn].channels;delete Ze[Yn].channels,Object.defineProperty(Ze[Yn],"channels",{value:rE})}Ze.rgb.hsl=function(r){var t=r[0]/255,n=r[1]/255,s=r[2]/255,a=Math.min(t,n,s),c=Math.max(t,n,s),h=c-a,p,x,b;return c===a?p=0:t===c?p=(n-s)/h:n===c?p=2+(s-t)/h:s===c&&(p=4+(t-n)/h),p=Math.min(p*60,360),p<0&&(p+=360),b=(a+c)/2,c===a?x=0:b<=.5?x=h/(c+a):x=h/(2-c-a),[p,x*100,b*100]};Ze.rgb.hsv=function(r){var t=r[0],n=r[1],s=r[2],a=Math.min(t,n,s),c=Math.max(t,n,s),h=c-a,p,x,b;return c===0?x=0:x=h/c*1e3/10,c===a?p=0:t===c?p=(n-s)/h:n===c?p=2+(s-t)/h:s===c&&(p=4+(t-n)/h),p=Math.min(p*60,360),p<0&&(p+=360),b=c/255*1e3/10,[p,x,b]};Ze.rgb.hwb=function(r){var t=r[0],n=r[1],s=r[2],a=Ze.rgb.hsl(r)[0],c=1/255*Math.min(t,Math.min(n,s));return s=1-1/255*Math.max(t,Math.max(n,s)),[a,c*100,s*100]};Ze.rgb.cmyk=function(r){var t=r[0]/255,n=r[1]/255,s=r[2]/255,a,c,h,p;return p=Math.min(1-t,1-n,1-s),a=(1-t-p)/(1-p)||0,c=(1-n-p)/(1-p)||0,h=(1-s-p)/(1-p)||0,[a*100,c*100,h*100,p*100]};Ze.rgb.keyword=function(r){return jg[r.join()]};Ze.keyword.rgb=function(r){return Al[r]};Ze.rgb.xyz=function(r){var t=r[0]/255,n=r[1]/255,s=r[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92;var a=t*.4124+n*.3576+s*.1805,c=t*.2126+n*.7152+s*.0722,h=t*.0193+n*.1192+s*.9505;return[a*100,c*100,h*100]};Ze.rgb.lab=function(r){var t=Ze.rgb.xyz(r),n=t[0],s=t[1],a=t[2],c,h,p;return n/=95.047,s/=100,a/=108.883,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,c=116*s-16,h=500*(n-s),p=200*(s-a),[c,h,p]};Ze.hsl.rgb=function(r){var t=r[0]/360,n=r[1]/100,s=r[2]/100,a,c,h,p,x;if(n===0)return x=s*255,[x,x,x];s<.5?c=s*(1+n):c=s+n-s*n,a=2*s-c,p=[0,0,0];for(var b=0;b<3;b++)h=t+1/3*-(b-1),h<0&&h++,h>1&&h--,6*h<1?x=a+(c-a)*6*h:2*h<1?x=c:3*h<2?x=a+(c-a)*(2/3-h)*6:x=a,p[b]=x*255;return p};Ze.hsl.hsv=function(r){var t=r[0],n=r[1]/100,s=r[2]/100,a,c;return s===0?[0,0,0]:(s*=2,n*=s<=1?s:2-s,c=(s+n)/2,a=2*n/(s+n),[t,a*100,c*100])};Ze.hsv.rgb=function(r){var t=r[0]/60,n=r[1]/100,s=r[2]/100,a=Math.floor(t)%6,c=t-Math.floor(t),h=255*s*(1-n),p=255*s*(1-n*c),x=255*s*(1-n*(1-c));switch(s*=255,a){case 0:return[s,x,h];case 1:return[p,s,h];case 2:return[h,s,x];case 3:return[h,p,s];case 4:return[x,h,s];case 5:return[s,h,p]}};Ze.hsv.hsl=function(r){var t=r[0],n=r[1]/100,s=r[2]/100,a,c;return c=(2-n)*s,a=n*s,a/=c<=1?c:2-c,a=a||0,c/=2,[t,a*100,c*100]};Ze.hwb.rgb=function(r){var t=r[0]/360,n=r[1]/100,s=r[2]/100,a=n+s,c,h,p,x;a>1&&(n/=a,s/=a),c=Math.floor(6*t),h=1-s,p=6*t-c,c&1&&(p=1-p),x=n+p*(h-n);var b,y,A;switch(c){default:case 6:case 0:b=h,y=x,A=n;break;case 1:b=x,y=h,A=n;break;case 2:b=n,y=h,A=x;break;case 3:b=n,y=x,A=h;break;case 4:b=x,y=n,A=h;break;case 5:b=h,y=n,A=x;break}return[b*255,y*255,A*255]};Ze.cmyk.rgb=function(r){var t=r[0]/100,n=r[1]/100,s=r[2]/100,a=r[3]/100,c,h,p;return c=1-Math.min(1,t*(1-a)+a),h=1-Math.min(1,n*(1-a)+a),p=1-Math.min(1,s*(1-a)+a),[c*255,h*255,p*255]};Ze.xyz.rgb=function(r){var t=r[0]/100,n=r[1]/100,s=r[2]/100,a,c,h;return a=t*3.2406+n*-1.5372+s*-.4986,c=t*-.9689+n*1.8758+s*.0415,h=t*.0557+n*-.204+s*1.057,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*=12.92,c=c>.0031308?1.055*Math.pow(c,1/2.4)-.055:c*=12.92,h=h>.0031308?1.055*Math.pow(h,1/2.4)-.055:h*=12.92,a=Math.min(Math.max(0,a),1),c=Math.min(Math.max(0,c),1),h=Math.min(Math.max(0,h),1),[a*255,c*255,h*255]};Ze.xyz.lab=function(r){var t=r[0],n=r[1],s=r[2],a,c,h;return t/=95.047,n/=100,s/=108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,a=116*n-16,c=500*(t-n),h=200*(n-s),[a,c,h]};Ze.lab.xyz=function(r){var t=r[0],n=r[1],s=r[2],a,c,h,p;return t<=8?(c=t*100/903.3,p=7.787*(c/100)+16/116):(c=100*Math.pow((t+16)/116,3),p=Math.pow(c/100,1/3)),a=a/95.047<=.008856?a=95.047*(n/500+p-16/116)/7.787:95.047*Math.pow(n/500+p,3),h=h/108.883<=.008859?h=108.883*(p-s/200-16/116)/7.787:108.883*Math.pow(p-s/200,3),[a,c,h]};Ze.lab.lch=function(r){var t=r[0],n=r[1],s=r[2],a,c,h;return a=Math.atan2(s,n),c=a*360/2/Math.PI,c<0&&(c+=360),h=Math.sqrt(n*n+s*s),[t,h,c]};Ze.lch.lab=function(r){var t=r[0],n=r[1],s=r[2],a,c,h;return h=s/360*2*Math.PI,a=n*Math.cos(h),c=n*Math.sin(h),[t,a,c]};Ze.rgb.ansi16=function(r){var t=r[0],n=r[1],s=r[2],a=1 in arguments?arguments[1]:Ze.rgb.hsv(r)[2];if(a=Math.round(a/50),a===0)return 30;var c=30+(Math.round(s/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return a===2&&(c+=60),c};Ze.hsv.ansi16=function(r){return Ze.rgb.ansi16(Ze.hsv.rgb(r),r[2])};Ze.rgb.ansi256=function(r){var t=r[0],n=r[1],s=r[2];if(t===n&&n===s)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;var a=16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(s/255*5);return a};Ze.ansi16.rgb=function(r){var t=r%10;if(t===0||t===7)return r>50&&(t+=3.5),t=t/10.5*255,[t,t,t];var n=(~~(r>50)+1)*.5,s=(t&1)*n*255,a=(t>>1&1)*n*255,c=(t>>2&1)*n*255;return[s,a,c]};Ze.ansi256.rgb=function(r){if(r>=232){var t=(r-232)*10+8;return[t,t,t]}r-=16;var n,s=Math.floor(r/36)/5*255,a=Math.floor((n=r%36)/6)/5*255,c=n%6/5*255;return[s,a,c]};Ze.rgb.hex=function(r){var t=((Math.round(r[0])&255)<<16)+((Math.round(r[1])&255)<<8)+(Math.round(r[2])&255),n=t.toString(16).toUpperCase();return"000000".substring(n.length)+n};Ze.hex.rgb=function(r){var t=r.toString(16).match(/[a-f0-9]{6}/i);if(!t)return[0,0,0];var n=parseInt(t[0],16),s=n>>16&255,a=n>>8&255,c=n&255;return[s,a,c]};Ze.rgb.hcg=function(r){var t=r[0]/255,n=r[1]/255,s=r[2]/255,a=Math.max(Math.max(t,n),s),c=Math.min(Math.min(t,n),s),h=a-c,p,x;return h<1?p=c/(1-h):p=0,h<=0?x=0:a===t?x=(n-s)/h%6:a===n?x=2+(s-t)/h:x=4+(t-n)/h+4,x/=6,x%=1,[x*360,h*100,p*100]};Ze.hsl.hcg=function(r){var t=r[1]/100,n=r[2]/100,s=1,a=0;return n<.5?s=2*t*n:s=2*t*(1-n),s<1&&(a=(n-.5*s)/(1-s)),[r[0],s*100,a*100]};Ze.hsv.hcg=function(r){var t=r[1]/100,n=r[2]/100,s=t*n,a=0;return s<1&&(a=(n-s)/(1-s)),[r[0],s*100,a*100]};Ze.hcg.rgb=function(r){var t=r[0]/360,n=r[1]/100,s=r[2]/100;if(n===0)return[s*255,s*255,s*255];var a=[0,0,0],c=t%1*6,h=c%1,p=1-h,x=0;switch(Math.floor(c)){case 0:a[0]=1,a[1]=h,a[2]=0;break;case 1:a[0]=p,a[1]=1,a[2]=0;break;case 2:a[0]=0,a[1]=1,a[2]=h;break;case 3:a[0]=0,a[1]=p,a[2]=1;break;case 4:a[0]=h,a[1]=0,a[2]=1;break;default:a[0]=1,a[1]=0,a[2]=p}return x=(1-n)*s,[(n*a[0]+x)*255,(n*a[1]+x)*255,(n*a[2]+x)*255]};Ze.hcg.hsv=function(r){var t=r[1]/100,n=r[2]/100,s=t+n*(1-t),a=0;return s>0&&(a=t/s),[r[0],a*100,s*100]};Ze.hcg.hsl=function(r){var t=r[1]/100,n=r[2]/100,s=n*(1-t)+.5*t,a=0;return s>0&&s<.5?a=t/(2*s):s>=.5&&s<1&&(a=t/(2*(1-s))),[r[0],a*100,s*100]};var Vg=$g.exports,Bl=Vg,op=Object.keys(Bl);function nE(){for(var r={},t=op.length,n=0;n<t;n++)r[op[n]]={distance:-1,parent:null};return r}function sE(r){var t=nE(),n=[r];for(t[r].distance=0;n.length;)for(var s=n.pop(),a=Object.keys(Bl[s]),c=a.length,h=0;h<c;h++){var p=a[h],x=t[p];x.distance===-1&&(x.distance=t[s].distance+1,x.parent=s,n.unshift(p))}return t}function oE(r,t){return function(n){return t(r(n))}}function lE(r,t){for(var n=[t[r].parent,r],s=Bl[t[r].parent][r],a=t[r].parent;t[a].parent;)n.unshift(t[a].parent),s=oE(Bl[t[a].parent][a],s),a=t[a].parent;return s.conversion=n,s}var aE=function(r){for(var t=sE(r),n={},s=Object.keys(t),a=s.length,c=0;c<a;c++){var h=s[c],p=t[h];p.parent!==null&&(n[h]=lE(h,t))}return n},qg=Vg,uE=aE,ro={},cE=Object.keys(qg);function hE(r){var t=function(n){return n==null?n:(arguments.length>1&&(n=Array.prototype.slice.call(arguments)),r(n))};return"conversion"in r&&(t.conversion=r.conversion),t}function fE(r){var t=function(n){if(n==null)return n;arguments.length>1&&(n=Array.prototype.slice.call(arguments));var s=r(n);if(typeof s=="object")for(var a=s.length,c=0;c<a;c++)s[c]=Math.round(s[c]);return s};return"conversion"in r&&(t.conversion=r.conversion),t}cE.forEach(function(r){ro[r]={},Object.defineProperty(ro[r],"channels",{value:qg[r].channels});var t=uE(r),n=Object.keys(t);n.forEach(function(s){var a=t[s];ro[r][s]=fE(a),ro[r][s].raw=hE(a)})});var dE=ro,pE={};const bl=ot(),Kc=gs,gE=Zr(),xE=dE,{constrain:Fl,map:mE}=Et,bi=new Map,uo={DEFAULT:{initialize:{value({pins:r,debug:t}){ti.colors.forEach((n,s)=>{const a=r[s];t&&!this.board.pins.isPwm(a)&&bl.Pins.Error({pin:a,type:"PWM",via:"Led.RGB"}),this.io.pinMode(a,this.io.MODES.PWM),this.pins[s]=a})}},write:{writable:!0,value(r){const t=bi.get(this);ti.colors.forEach((n,s)=>{const a=this.pins[s];let c=r[n];t.isAnode&&(c=255-Fl(c,0,255)),c=mE(c,0,255,0,this.board.RESOLUTION.PWM),this.io.analogWrite(a,c)})}}},PCA9685:{initialize:{value({address:r,pwmRange:t,frequency:n,pins:s}){const a=bi.get(this);this.address=r||64,this.pwmRange=t||[0,4095],this.frequency=n||200,a.expander=gE.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),ti.colors.forEach((c,h)=>{this.pins[h]=a.expander.normalize(s[h]),a.expander.analogWrite(this.pins[h],0)})}},write:{writable:!0,value(r){const t=bi.get(this);ti.colors.forEach((n,s)=>{const a=this.pins[s];let c=r[n];t.isAnode&&(c=255-Fl(c,0,255)),t.expander.analogWrite(a,c)})}}},BLINKM:{REGISTER:{value:{GO_TO_RGB_COLOR_NOW:110,STOP_SCRIPT:111}},initialize:{value(r){this.address=r.address||9,r.address=this.address,this.board.Drivers[this.address]||(this.io.i2cConfig(r),this.board.Drivers[this.address]={initialized:!1},this.io.i2cWrite(this.address,[this.REGISTER.STOP_SCRIPT]),this.board.Drivers[this.address].initialized=!0)}},write:{writable:!0,value({red:r,green:t,blue:n}){this.io.i2cWrite(this.address,[this.REGISTER.GO_TO_RGB_COLOR_NOW,r,t,n])}}}};uo.ESPLORA={initialize:{value(r){r.pins=[5,10,9],this.pins=[],uo.DEFAULT.initialize.value.call(this,r)}},write:uo.DEFAULT.write};let ti=class Tr{constructor(t){Array.isArray(t)?t={pins:t}:typeof t.pins=="object"&&!Array.isArray(t.pins)&&(t.pins=[t.pins.red,t.pins.green,t.pins.blue]),bl.Component.call(this,t=bl.Options(t)),bl.Controller.call(this,uo,t);const n={red:255,green:255,blue:255,intensity:100,isAnode:t.isAnode||!1,interval:null,values:{red:255,green:255,blue:255}};bi.set(this,n),Object.defineProperties(this,{isOn:{get(){return Tr.colors.some(s=>n[s]>0)}},isRunning:{get(){return!!n.interval}},isAnode:{get(){return n.isAnode}},values:{get(){return Object.assign({},n.values)}},update:{value(s){const a=bi.get(this);s=s||this.color(),a.values=Tr.ToScaledRGB(a.intensity,s),this.write(a.values),Object.assign(a,s)}}}),this.initialize(t),this.off()}color(t,n,s){const a=bi.get(this);let c;if(arguments.length===0)return c=this.isOn?a:a.prev,Tr.colors.reduce((p,x)=>(p[x]=Math.round(c[x]),p),{});const h=Tr.ToRGB(t,n,s);return Tr.colors.forEach(p=>{let x=h[p];if(x==null)throw new Error(`Led.RGB.color: invalid color ([${[h.red,h.green,h.blue].join(",")}])`);x=Fl(x,0,255),h[p]=x}),this.update(h),this}on(){const t=bi.get(this);let n;return this.isOn||(n=t.prev||{red:255,green:255,blue:255},t.prev=null,this.update(n)),this}off(){const t=bi.get(this);return this.isOn&&(t.prev=Tr.colors.reduce((n,s)=>(n[s]=t[s],n),{}),this.update({red:0,green:0,blue:0})),this}blink(t,n){const s=bi.get(this);return this.stop(),typeof t=="function"&&(n=t,t=null),s.interval=setInterval(()=>{this.toggle(),typeof n=="function"&&n()},t||100),this}toggle(){return this[this.isOn?"off":"on"]()}stop(){const t=bi.get(this);return t.interval&&clearInterval(t.interval),t.animation&&t.animation.stop(),t.interval=null,this}intensity(t){const n=bi.get(this);return arguments.length===0?n.intensity:(n.intensity=Fl(t,0,100),this.update(),this)}[Kc.normalize](t){const n=bi.get(this);return t[0]===null&&(t[0]=n.values),t.reduce((s,a)=>{const c=a;let h={},p=null,x=n.intensity;if(a!==null){if(typeof c=="number")throw new Error("RGB LEDs expect a complete keyFrame object or hexadecimal string value");typeof c=="string"&&(p=c),Array.isArray(c)?p=c:typeof c=="object"&&(typeof c.color<"u"?p=c.color:p=c),typeof a.intensity=="number"&&(x=a.intensity,delete a.intensity),h.easing=a.easing||"linear",h.value=Tr.ToScaledRGB(x,Tr.ToRGB(p))}else h=a;return s.push(h),s},[])}[Kc.render](t){return this.color(t[0])}};ti.prototype[Kc.keys]=ti.colors;ti.colors=["red","green","blue"];ti.ToScaledRGB=(r,t)=>{const n=r/100;return ti.colors.reduce((s,a)=>(s[a]=Math.round(t[a]*n),s),{})};ti.ToRGB=(r,t,n)=>{let s={},a=0,c;if(typeof r<"u"&&(a|=4),typeof t<"u"&&(a|=2),typeof n<"u"&&(a|=1),(a|4)===4){if(c=r,c==null)throw new Error(`Invalid color (${c})`);if(Array.isArray(c))s={red:c[0],green:c[1],blue:c[2]};else if(typeof c=="object")s={red:c.red,green:c.green,blue:c.blue};else if(typeof c=="string")if(/^#?[0-9A-Fa-f]{6}$/.test(c))c.length===7&&c[0]==="#"&&(c=c.slice(1)),s={red:parseInt(c.slice(0,2),16),green:parseInt(c.slice(2,4),16),blue:parseInt(c.slice(4,6),16)};else if(/^rgb/.test(c)){const h=c.match(/^rgba?\(([^)]+)\)$/)[1].split(/[\s,]+/);lp(h[0])&&h.forEach((p,x)=>{x<=2&&(h[x]=Math.round(parseInt(p,10)/100*255))}),s={red:parseInt(h[0],10),green:parseInt(h[1],10),blue:parseInt(h[2],10)},h.length>3&&(lp(h[3])&&(h[3]=parseInt(h[3],10)/100),s=ti.ToScaledRGB(100*parseFloat(h[3]),s))}else return ti.ToRGB(xE.keyword.rgb(c.toLowerCase()))}else s={red:r,green:t,blue:n};return s};function lp(r){return typeof r=="string"&&r.endsWith("%")}ti.prototype.strobe=ti.prototype.blink;pE.IS_TEST_MODE&&(ti.Controllers=uo,ti.purge=()=>{bi.clear()});var Rh=ti,Rc=ot(),Yc=wh,Cl=tE,vE=Rh;const Mt=new Map;function Xc(r){const t=Ce.hrtime();let n,s=0;for(;r>s;)n=Ce.hrtime(t),s=(n[0]*1e9+n[1])/1e3}function Pi(r){Xc(r*1e3)}let yE=class{constructor(t,n){this.address=t,this.mask=255,this.memory=0,this.io=n}pinMode(t,n){n===1?this.mask&=~(1<<t):this.mask|=1<<t}portMode(t){this.mask=t===0?255:0}portWrite(t){this.memory=t&~this.mask,this.io.i2cWrite(this.address,this.memory)}};const Ol={DEFAULT:{SHIFT_LEFT:4,CLEAR:1,HOME:2,ENTRY:4,DISPLAY:8,DIMENSIONS:32,CURSORSHIFT:16,SETCGRAMADDR:64,SETDDRAMADDR:128,DATA:64,COMMAND:128,ENTRYRIGHT:0,ENTRYLEFT:2,ENTRYSHIFTINCREMENT:1,ENTRYSHIFTDECREMENT:0,DISPLAYON:4,DISPLAYOFF:0,CURSORON:2,CURSOROFF:0,BLINKON:1,BLINKOFF:0,DISPLAYMOVE:8,CURSORMOVE:0,MOVERIGHT:4,MOVELEFT:0,BITMODE:{4:0,8:16},LINE:{1:0,2:8},DOTS:{"5x10":4,"5x8":0},BACKLIGHT_ON:8,BACKLIGHT_OFF:0,MEMORYLIMIT:8,EN:4,RW:2,RS:1,D4:4,D5:5,D6:6,D7:7}},Ci={JHD1313M1:{REGISTER:{value:Ol.DEFAULT},CHARS:{value:Cl.DEFAULT},initialize:{value(r){this.address={lcd:r.address||62,rgb:98},r.address=this.address,this.io.i2cConfig(r),this.lines=r.lines||2,this.rows=r.rows||2,this.cols=r.cols||16,this.dots=r.dots||"5x8";const n={display:this.REGISTER.DISPLAY|this.REGISTER.DISPLAYON|this.REGISTER.CURSOROFF|this.REGISTER.BLINKOFF,characters:{},index:this.REGISTER.MEMORYLIMIT-1,backlight:{polarity:1,pin:null,value:null}};Mt.set(this,n);{const s=this.REGISTER.DIMENSIONS|this.REGISTER.LINE[2];Pi(50),this.command(s),Pi(5),this.command(s),this.command(s),this.command(s),Pi(5),this.command(this.REGISTER.ENTRY|this.REGISTER.ENTRYLEFT|this.REGISTER.ENTRYSHIFTDECREMENT),this.on(),this.clear(),this.home()}this.bgOn(),r.color?this.bgColor(r.color):this.bgColor("black")}},clear:{value(){return this.command(this.REGISTER.CLEAR)}},setCursor:{value(r,t){return this.command(t===0?r|128:r|192)}},autoscroll:{value(){const r=Mt.get(this);return r.display=this.REGISTER.ENTRYLEFT|this.REGISTER.ENTRYSHIFTINCREMENT,this.command(this.REGISTER.ENTRY|r.display),this}},bgColor:{value(r,t,n){const s=vE.ToRGB(r,t,n),a=this.address.rgb;return this.io.i2cWrite(a,[0,0]),this.io.i2cWrite(a,[1,0]),this.io.i2cWrite(a,[4,s.red]),this.io.i2cWrite(a,[3,s.green]),this.io.i2cWrite(a,[2,s.blue]),this}},bgOn:{value(){return this.io.i2cWrite(this.address.rgb,[this.REGISTER.BACKLIGHT_ON,170]),this}},bgOff:{value(){return this.io.i2cWrite(this.address.rgb,[this.REGISTER.BACKLIGHT_ON,0]),this}},command:{value(r,t){return arguments.length===1&&(t=r,r=this.REGISTER.COMMAND),r===this.REGISTER.DATA?this.send(t):this.writeBits(this.REGISTER.COMMAND,t)}},send:{value(r){return this.writeBits(this.REGISTER.DATA,r)}},writeBits:{value(r,t){return this.io.i2cWrite(this.address.lcd,[r,t]),this}},hilo:{value(r){r.call(this)}}},PCF8574:{REGISTER:{value:Object.assign({},Ol.DEFAULT,{COMMAND:0,DATA:1,BACKLIGHT_ON:255,BACKLIGHT_OFF:0})},CHARS:{value:Cl.DEFAULT},initialize:{value(r){this.bitMode=r.bitMode||4,this.lines=r.lines||2,this.rows=r.rows||2,this.cols=r.cols||16,this.dots=r.dots||"5x8",r.address||(r.address=["PCF8574A","PCF8574AT"].includes(r.controller)?63:39),this.io.i2cConfig(r),this.address={lcd:r.address},this.expander=new yE(this.address.lcd,this.io),this.expander.portMode(this.io.MODES.OUTPUT),this.expander.portWrite(0);const t=r.backlight||{polarity:0,pin:3};t.pin=typeof t.pin>"u"?3:t.pin,t.polarity=typeof t.polarity>"u"?0:t.polarity;const n=this.REGISTER.BITMODE[this.bitMode]|this.REGISTER.LINE[this.lines]|this.REGISTER.DOTS[this.dots],s=this.REGISTER.DISPLAY|this.REGISTER.DISPLAYON|this.REGISTER.CURSOROFF|this.REGISTER.BLINKOFF,a=this.REGISTER.ENTRYLEFT|this.REGISTER.ENTRYSHIFTDECREMENT,c={display:s,characters:{},index:this.REGISTER.MEMORYLIMIT-1,backlight:{polarity:t.polarity,pinMask:1<<t.pin,statusMask:0},data:[1<<this.REGISTER.D4,1<<this.REGISTER.D5,1<<this.REGISTER.D6,1<<this.REGISTER.D7]};Mt.set(this,c);let h=3<<this.REGISTER.SHIFT_LEFT;this.expander.portWrite(h),this.pulse(h),Pi(4),this.expander.portWrite(h),this.pulse(h),Pi(4),this.expander.portWrite(h),this.pulse(h),h=2<<this.REGISTER.SHIFT_LEFT,this.expander.portWrite(h),this.pulse(h),this.command(this.REGISTER.DIMENSIONS|n),this.command(c.display),c.display=a,this.command(this.REGISTER.ENTRY|c.display),this.on(),this.clear(),this.backlight()}},clear:{value(){return this.command(this.REGISTER.CLEAR),Pi(2),this}},backlight:{value(r){const t=Mt.get(this);let n;return r=typeof r>"u"?255:r,t.backlight.pinMask!==0&&(t.backlight.polarity===0&&r>0||t.backlight.polarity===1&&r===0?n=255:n=0,t.backlight.statusMask=t.backlight.pinMask&n,this.expander.portWrite(t.backlight.statusMask)),this}},createChar:{value(r,t){const n=Mt.get(this);let s;typeof r=="number"?s=r&7:(s=n.index,n.index--,n.index===-1&&(n.index=this.REGISTER.MEMORYLIMIT-1)),this.command(this.REGISTER.SETCGRAMADDR|s<<3);{Pi(1);for(let a=0;a<8;a++)this.command(this.REGISTER.DATA,t[a]),Pi(1)}return n.characters[r]=s,s}},noBacklight:{value(){this.backlight(0)}},on:{value(){const r=Mt.get(this);return r.display|=this.REGISTER.DISPLAYON,this.command(this.REGISTER.DISPLAY|r.display),this}},off:{value(){const r=Mt.get(this);return r.display&=~this.REGISTER.DISPLAYON,this.command(this.REGISTER.DISPLAY|r.display),this}},hilo:{value(r){r.call(this)}},command:{value(r,t){return arguments.length===1&&(t=r,r=this.REGISTER.COMMAND),this.send(r,t),this}},send:{writable:!0,value(r,t){return this.writeBits(r,t>>4),this.writeBits(r,t&15),this}},writeBits:{writable:!0,value(r,t){const n=Mt.get(this);let s=0;for(let a=0;a<4;a++)(t&1)===1&&(s|=n.data[a]),t=t>>1;return r===this.REGISTER.DATA&&(r=this.REGISTER.RS),s|=r|n.backlight.statusMask,this.pulse(s),this}},pulse:{writable:!0,value(r){this.expander.portWrite(r|this.REGISTER.EN),this.expander.portWrite(r&~this.REGISTER.EN)}}},PARALLEL:{REGISTER:{value:Ol.DEFAULT},CHARS:{value:Cl.DEFAULT},initialize:{value(r){this.bitMode=r.bitMode||4,this.lines=r.lines||2,this.rows=r.rows||2,this.cols=r.cols||16,this.dots=r.dots||"5x8",Array.isArray(r.pins)?this.pins={rs:r.pins[0],en:r.pins[1],data:[r.pins[5],r.pins[4],r.pins[3],r.pins[2]]}:this.pins=r.pins;const t=this.REGISTER.DISPLAY|this.REGISTER.DISPLAYON,n={display:t,characters:{},index:this.REGISTER.MEMORYLIMIT-1,backlight:{polarity:1,pin:null,value:null}};if(Mt.set(this,n),r.pins.forEach(function(s){this.io.pinMode(s,1)},this),this.io.digitalWrite(this.pins.rs,this.io.LOW),this.io.digitalWrite(this.pins.en,this.io.LOW),r.backlight){if(typeof r.backlight=="number"){const s=r.backlight;r.backlight={pin:s}}r.backlight.pin&&(n.backlight.pin=new Yc({pin:r.backlight.pin,board:this.board}),n.backlight.pin.high())}this.command(3),Pi(4),this.command(3),Pi(4),this.command(3),this.bitMode===4&&this.command(2),this.command(this.REGISTER.LINE[this.lines]|this.REGISTER.DOTS[this.dots]),this.command(t),this.clear(),this.home()}}}};Ci.LCM1602=Ci.LCD1602=Ci.LCM1602IIC=Ci.LCD2004=Ci.PCF8574A=Ci.PCF8574AT=Ci.PCF8574T=Ci.PCF8574;Ci.MJKDZ=Object.assign({},Ci.PCF8574,{REGISTER:{value:Object.assign({},Ol.DEFAULT,{SHIFT_LEFT:0,COMMAND:0,DATA:6,EN:16,RW:5,RS:6,D4:0,D5:1,D6:2,D7:3})},writeBits:{writable:!0,value(r,t){const n=Mt.get(this);let s=0;for(let a=0;a<4;a++)(t&1)===1&&(s|=n.data[a]),t=t>>1;return r===this.REGISTER.DATA&&(r=1<<this.REGISTER.RS),s|=r|n.backlight.statusMask,this.pulse(s),this}}});Ci.DEFAULT=Ci.PARALLEL;class Zl{constructor(t){Rc.Component.call(this,t=Rc.Options(t)),Rc.Controller.call(this,Ci,t),this.ctype=t.controller,this.initialize&&this.initialize(t),Object.defineProperties(this,{characters:{get(){return Object.assign({},Mt.get(this).characters)}}})}command(t,n){return typeof n>"u"&&(n=t,t=128),this.bitMode===4&&this.send(n>>4),this.send(n),this}send(t){let n=0,s={4:8,8:128}[this.bitMode];for(;s>0;s=s>>1)this.io.digitalWrite(this.pins.data[n],this.io[t&s?"HIGH":"LOW"]),n++;return this.io.digitalWrite(this.pins.en,this.io.LOW),this.io.digitalWrite(this.pins.en,this.io.HIGH),Xc(1),this.io.digitalWrite(this.pins.en,this.io.LOW),Xc(37),this}hilo(t){this.io.digitalWrite(this.pins.rs,this.io.HIGH),t.call(this),this.io.digitalWrite(this.pins.rs,this.io.LOW)}print(t,n){let s,a,c,h;return t=`${t}`,n=n||{},s=Mt.get(this),a=n.dontProcessSpecials||!1,c=!a&&ap.test(t),t.length===1?this.hilo(function(){this.command(this.REGISTER.DATA,t.charCodeAt(0))}):c?(h=t.replace(ap,(p,x)=>{const b=s.characters[x];return typeof b=="number"?String.fromCharCode(b):p}),this.print(h,{dontProcessSpecials:!0})):this.hilo(function(){Array.from(t).forEach(function(p){this.command(this.REGISTER.DATA,p.charCodeAt(0))},this)}),this}write(t){return this.hilo.call(this,function(){this.command(this.REGISTER.DATA,t)}),this}clear(){return this.command(this.REGISTER.CLEAR),Pi(2),this}home(){return this.command(this.REGISTER.HOME),Pi(2),this}setCursor(t,n){const s=[0,64,20,84];return this.command(this.REGISTER.SETDDRAMADDR|t+s[n]),this}backlight(t){const n=Mt.get(this);return t=typeof t>"u",n.backlight.pin instanceof Yc&&(t?n.backlight.pin.high():n.backlight.pin.low()),t?n.display|=this.REGISTER.DISPLAYON:n.display&=~this.REGISTER.DISPLAYON,this.command(n.display),this}noBacklight(){const t=Mt.get(this);return t.backlight.pin instanceof Yc&&t.backlight.pin.high(),this.backlight(!1)}on(){const t=Mt.get(this);return t.display|=this.REGISTER.DISPLAYON,this.command(t.display),this}off(){const t=Mt.get(this);return t.display&=~this.REGISTER.DISPLAYON,this.command(t.display),this}cursor(t,n){if(typeof n<"u"&&typeof t<"u")return this.setCursor(n,t);const s=Mt.get(this);return s.display|=this.REGISTER.CURSORON,this.command(s.display),this}noCursor(){const t=Mt.get(this);return t.display&=~this.REGISTER.CURSORON,this.command(t.display),this}blink(){const t=Mt.get(this);return t.display|=this.REGISTER.BLINKON,this.command(t.display),this}noBlink(){const t=Mt.get(this);return t.display&=~this.REGISTER.BLINKON,this.command(t.display),this}autoscroll(){const t=Mt.get(this);return t.display|=this.REGISTER.ENTRYSHIFTINCREMENT,this.command(this.REGISTER.ENTRY|t.display),this}noAutoscroll(){const t=Mt.get(this);return t.display&=~this.REGISTER.ENTRYSHIFTINCREMENT,this.command(this.REGISTER.ENTRY|t.display),this}createChar(t,n){const s=Mt.get(this);let a;return typeof t=="number"?a=t&7:(a=s.index,s.index--,s.index===-1&&(s.index=this.REGISTER.MEMORYLIMIT-1)),this.command(this.REGISTER.SETCGRAMADDR|a<<3),this.hilo(function(){for(let c=0;c<8;c++)this.command(this.REGISTER.DATA,n[c])}),s.characters[t]=a,a}useChar(t){const n=Mt.get(this);if(typeof n.characters[t]>"u"){const s=this.createChar(t,this.CHARS[t]);for(const a in n.characters)if(t!==a&&n.characters[a]===s){delete n.characters[a];break}n.characters[t]=s}return this}}const ap=/:(\w+):/g;Zl.POSITIVE=0;Zl.NEGATIVE=1;Zl.Characters=Cl;var EE=Zl,wE={};const En=ot(),pl=gs,SE=Zr(),{constrain:RE,map:TE,scale:up}=Et,AE=En.Pins,Jt=new Map,Kg={PCA9685:{initialize:{value({address:r,pwmRange:t,frequency:n,pin:s}){const a=Jt.get(this);this.address=r||64,this.pwmRange=t||[0,4095],this.frequency=n||200,a.expander=SE.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),this.pin=a.expander.normalize(s),a.mode=this.io.MODES.PWM}},update:{writable:!0,value(r){const t=Jt.get(this),n=typeof r<"u"?r:t.value,s=t.isAnode?255-En.constrain(n,0,255):n;this.write(s)}},write:{writable:!0,value(r){Jt.get(this).expander.analogWrite(this.pin,r)}}},DEFAULT:{initialize:{value({pin:r},t){const n=Jt.get(this),s=AE.isFirmata(this);let a;s&&typeof t=="string"&&t.length>1&&t[0]==="A"&&(t=this.io.analogPins[+t.slice(1)]),a=this.io.defaultLed||13,t=+t,s&&this.io.analogPins.includes(t)?(this.pin=t,n.mode=this.io.MODES.OUTPUT):(this.pin=typeof r>"u"?a:r,n.mode=this.io.MODES[this.board.pins.isPwm(this.pin)?"PWM":"OUTPUT"]),this.io.pinMode(this.pin,n.mode)}},update:{writable:!0,value(r){const t=Jt.get(this),n=typeof r<"u"?r:t.value;let s=t.isAnode?255-En.constrain(n,0,255):n;s=TE(s,0,255,0,this.board.RESOLUTION.PWM),s!==this.io.LOW&&s!==this.io.HIGH&&this.mode!==this.io.MODES.PWM&&En.Pins.Error({pin:this.pin,type:"PWM",via:"Led"}),t.mode===this.io.MODES.OUTPUT&&(s=n),this.write(s)}},write:{writable:!0,value(r){const t=Jt.get(this);t.mode===this.io.MODES.OUTPUT&&this.io.digitalWrite(this.pin,r),t.mode===this.io.MODES.PWM&&this.io.analogWrite(this.pin,r)}}}};let xo=class{constructor(t){const n=typeof t=="object"?t.pin:t;En.Component.call(this,t=En.Options(t)),En.Controller.call(this,Kg,t);const s={isAnode:t.isAnode,isOn:!1,isRunning:!1,value:null,direction:1,mode:null,intensity:0,interval:null};Jt.set(this,s),Object.defineProperties(this,{value:{get(){return s.value}},mode:{get(){return s.mode}},isOn:{get(){return!!s.value}},isRunning:{get(){return s.isRunning}},animation:{get(){return s.animation}}}),typeof this.initialize=="function"&&this.initialize(t,n)}on(){const t=Jt.get(this);return t.mode===this.io.MODES.OUTPUT&&(t.value=this.io.HIGH),t.mode===this.io.MODES.PWM&&(t.value===null&&(t.value=255),t.interval||(t.value=255),t.value===0&&(t.value=255)),this.update(),this}off(){const t=Jt.get(this);return t.value=0,this.update(),this}toggle(){return this[this.isOn?"off":"on"]()}brightness(t){const n=Jt.get(this);return n.value=t,this.update(),this}intensity(t){const n=Jt.get(this);return arguments.length===0?n.intensity:(n.intensity=RE(t,0,100),this.brightness(up(n.intensity,0,100,0,255)))}[pl.normalize](t){const n=Jt.get(this);return t[0]===null&&(t[0]={value:n.value||0}),t.map(s=>(s!==null&&(typeof s=="number"?s={value:s}:(typeof s.brightness=="number"&&(s.value=s.brightness,delete s.brightness),typeof s.intensity=="number"&&(s.value=up(s.intensity,0,100,0,255),delete s.intensity)),s.easing||(s.easing="linear")),s))}[pl.render](t){const n=Jt.get(this);return n.value=t[0],this.update()}pulse(t,n){const s=Jt.get(this);this.stop();const a={duration:typeof t=="number"?t:1e3,keyFrames:[0,255],metronomic:!0,loop:!0,easing:"inOutSine",onloop(){typeof n=="function"&&n()}};return typeof t=="object"&&Object.assign(a,t),typeof t=="function"&&(n=t),s.isRunning=!0,s.animation=s.animation||new pl(this),s.animation.enqueue(a),this}fade(t,n,s){const a=Jt.get(this);this.stop();const c={duration:typeof n=="number"?n:1e3,keyFrames:[null,typeof t=="number"?t:255],easing:"outSine",oncomplete(){a.isRunning=!1,typeof s=="function"&&s()}};return typeof t=="object"&&Object.assign(c,t),typeof t=="function"&&(s=t),typeof n=="object"&&Object.assign(c,n),typeof n=="function"&&(s=n),a.isRunning=!0,a.animation=a.animation||new pl(this),a.animation.enqueue(c),this}fadeIn(t,n){return this.fade(255,t||1e3,n)}fadeOut(t,n){return this.fade(0,t||1e3,n)}blink(t,n){const s=Jt.get(this);return this.stop(),typeof t=="function"&&(n=t,t=null),s.isRunning=!0,s.interval=setInterval(()=>{this.toggle(),typeof n=="function"&&n()},t||100),this}stop(){const t=Jt.get(this);return t.interval&&clearInterval(t.interval),t.animation&&t.animation.stop(),t.interval=null,t.isRunning=!1,this}};xo.prototype.strobe=xo.prototype.blink;wE.IS_TEST_MODE&&(xo.Controllers=Kg,xo.purge=function(){Jt.clear()});var Yg=xo;const is=gs,Th=Yg,Ah=pi;class Jl extends Ah{constructor(t){super(t)}get type(){return Th}[is.normalize](t){return t.map((n,s)=>n!==null?this[s][is.normalize](n):n)}[is.render](t){return this.each((n,s)=>n[is.render]([t[s]]))}}Ah.installMethodForwarding(Jl.prototype,Th.prototype,{skip:[is.normalize,is.render]});Ah.installCallbackReconciliation(Jl.prototype,["pulse","fade","fadeIn","fadeOut","blink"]);Th.Collection=Jl;var bE=Jl;const vn=gs,bh=pi,Ch=Rh;class Ql extends bh{constructor(t){super(t)}get type(){return Ch}[vn.normalize](t){return t.map((n,s)=>n!==null?this[s][vn.normalize](n):n)}[vn.render](t){return this.each((n,s)=>n[vn.render]([t[s]]))}}bh.installMethodForwarding(Ql.prototype,Ch.prototype,{skip:[vn.normalize,vn.render]});bh.installCallbackReconciliation(Ql.prototype,["blink"]);Ql.prototype[vn.keys]=Ch.colors;var CE=Ql,OE={MATRIX_CHARS:{" ":[0,0,0,0,0,0,0,0],"!":[4,4,4,4,0,0,4,0],'"':[10,10,10,0,0,0,0,0],"#":[10,10,31,10,31,10,10,0],$:[4,15,20,14,5,30,4,0],"%":[24,25,2,4,8,19,3,0],"&":[12,18,20,8,21,18,13,0],"'":[12,4,8,0,0,0,0,0],"(":[2,4,8,8,8,4,2,0],")":[8,4,2,2,2,4,8,0],"*":[0,4,21,14,21,4,0,0],"+":[0,4,4,31,4,4,0,0],",":[0,0,0,0,12,4,8,0],"-":[0,0,0,31,0,0,0,0],".":[0,0,0,0,0,12,12,0],"/":[0,1,2,4,8,16,0,0],"[":[14,8,8,8,8,8,14,0],"\\":[0,16,8,4,2,1,0,0],"]":[14,2,2,2,2,2,14,0],"^":[4,10,17,0,0,0,0,0],_:[0,0,0,0,0,0,31,0],"`":[16,8,4,0,0,0,0,0],":":[0,12,12,0,12,12,0,0],";":[0,12,12,0,12,4,8,0],"<":[2,4,8,16,8,4,2,0],"=":[0,0,31,0,31,0,0,0],">":[8,4,2,1,2,4,8,0],"?":[14,17,1,2,4,0,4,0],"@":[14,17,1,13,21,21,14,0],"{":[2,4,4,8,4,4,2,0],"|":[4,4,4,0,4,4,4,0],"}":[8,4,4,2,4,4,8,0],"~":[8,21,2,0,0,0,0,0],0:[14,17,19,21,25,17,14,0],1:[4,12,4,4,4,4,14,0],2:[14,17,1,2,4,8,31,0],3:[31,2,4,2,1,17,14,0],4:[2,6,10,18,31,2,2,0],5:[31,16,30,1,1,17,14,0],6:[6,8,16,30,17,17,14,0],7:[31,1,2,4,4,4,4,0],8:[30,17,17,14,17,17,14,0],9:[14,17,17,15,1,2,12,0],A:[8,20,34,62,34,34,34,34],B:[60,34,34,62,34,34,60,0],C:[60,64,64,64,64,64,60,0],D:[124,66,66,66,66,66,124,0],E:[124,64,64,124,64,64,64,124],F:[124,64,64,124,64,64,64,64],G:[60,64,64,64,64,68,68,60],H:[68,68,68,124,68,68,68,68],I:[124,16,16,16,16,16,16,124],J:[60,8,8,8,8,8,72,48],K:[0,36,40,48,32,48,40,36],L:[64,64,64,64,64,64,64,124],M:[129,195,165,153,129,129,129,129],N:[0,66,98,82,74,70,66,0],O:[60,66,66,66,66,66,66,60],P:[60,34,34,34,60,32,32,32],Q:[28,34,34,34,34,38,34,29],R:[60,34,34,34,60,36,34,33],S:[0,30,32,32,62,2,2,60],T:[0,62,8,8,8,8,8,8],U:[66,66,66,66,66,66,34,28],V:[66,66,66,66,66,66,36,24],W:[0,73,73,73,73,42,28,0],X:[0,65,34,20,8,20,34,65],Y:[65,34,20,8,8,8,8,8],Z:[0,127,2,4,8,16,32,127],a:[0,0,14,1,15,17,15,0],b:[16,16,22,25,17,17,30,0],c:[0,0,14,17,16,17,14,0],d:[1,1,13,19,17,17,15,0],e:[0,0,14,17,31,16,14,0],f:[2,5,4,14,4,4,4,0],g:[0,13,19,19,13,1,14,0],h:[16,16,22,25,17,17,17,0],i:[4,0,12,4,4,4,14,0],j:[2,0,6,2,2,18,12,0],k:[8,8,9,10,12,10,9,0],l:[12,4,4,4,4,4,14,0],m:[0,0,26,21,21,21,21,0],n:[0,0,22,25,17,17,17,0],o:[0,0,14,17,17,17,14,0],p:[0,22,25,25,22,16,16,0],q:[0,13,19,19,13,1,1,0],r:[0,0,22,25,16,16,16,0],s:[0,0,15,16,30,1,31,0],t:[8,8,28,8,8,9,6,0],u:[0,0,18,18,18,18,13,0],v:[0,0,17,17,17,10,4,0],w:[0,0,17,17,21,21,10,0],x:[0,0,17,10,4,10,17,0],y:[0,0,17,17,19,13,1,14],z:[0,0,31,2,4,8,31,0],euro:[14,16,124,32,124,32,16,14],cent:[0,60,66,64,64,82,60,32],angryface:[0,102,102,0,24,36,66,129],circle:[60,66,129,129,129,129,66,60],cdot:[60,66,129,153,153,129,66,60],donut:[60,126,255,231,231,255,126,60],equality:[0,255,255,0,0,255,255,0],ball:[60,126,255,255,255,255,126,60],thinsquare:[255,129,129,129,129,129,129,255],thicksquare:[255,255,195,195,195,195,255,255],centeredsquare1:[0,0,60,60,60,60,0,0],centeredsquare2:[0,0,60,60,60,60,0,0],arrowright:[0,4,6,255,255,6,4,0],arrowleft:[0,32,96,255,255,96,32,0],note:[4,6,7,4,60,124,124,56],clock:[60,82,145,145,143,129,66,60],heartoutline:[102,153,129,129,66,36,24,0],heartfull:[102,255,255,255,126,60,24,0],thincheck:[0,0,1,2,4,136,80,32],thickcheck:[0,1,3,6,140,216,112,32],speaker:[3,7,63,63,63,63,7,3],sound:[0,64,128,0,192,0,128,64],xbig:[195,231,126,60,60,126,231,195],target:[60,126,195,219,219,195,126,60],bell:[24,60,60,60,60,126,0,24],smile:[0,102,102,0,0,129,66,60],frown:[0,102,102,0,0,60,66,129],winkright:[0,96,102,0,0,129,66,60],winkleft:[0,6,102,0,0,129,66,60],blink:[0,0,102,0,0,129,66,60],laughing:[0,102,102,0,255,129,66,60],tongueout:[0,102,102,0,0,126,10,4],expressionless:[0,102,102,0,0,255,0,0],ascprogress1:[128,128,128,128,128,128,128,128],ascprogress2:[192,192,192,192,192,192,192,192],ascprogress3:[224,224,224,224,224,224,224,224],ascprogress4:[240,240,240,240,240,240,240,240],ascprogress5:[248,248,248,248,248,248,248,248],ascprogress6:[252,252,252,252,252,252,252,252],ascprogress7:[254,254,254,254,254,254,254,254],fullprogress:[255,255,255,255,255,255,255,255],descprogress1:[127,127,127,127,127,127,127,127],descprogress2:[63,63,63,63,63,63,63,63],descprogress3:[31,31,31,31,31,31,31,31],descprogress4:[15,15,15,15,15,15,15,15],descprogress5:[7,7,7,7,7,7,7,7],descprogress6:[3,3,3,3,3,3,3,3],descprogress7:[1,1,1,1,1,1,1,1],ascchart1:[255,0,0,0,0,0,0,0],ascchart2:[255,255,0,0,0,0,0,0],ascchart3:[255,255,255,0,0,0,0,0],ascchart4:[255,255,255,255,0,0,0,0],ascchart5:[255,255,255,255,255,0,0,0],ascchart6:[255,255,255,255,255,255,0,0],ascchart7:[255,255,255,255,255,255,255,0],ascchart8:[255,255,255,255,255,255,255,255],descchart1:[0,255,255,255,255,255,255,255],descchart2:[0,0,255,255,255,255,255,255],descchart3:[0,0,0,255,255,255,255,255],descchart4:[0,0,0,0,255,255,255,255],descchart5:[0,0,0,0,0,255,255,255],descchart6:[0,0,0,0,0,0,255,255],descchart7:[0,0,0,0,0,0,0,255],descchart8:[0,0,0,0,0,0,0,0],borderleft1:[1,1,1,1,1,1,1,1],borderleft2:[3,2,2,2,2,2,2,3],borderleft3:[7,4,4,4,4,4,4,7],borderleft4:[15,8,8,8,8,8,8,15],borderleft5:[31,16,16,16,16,16,16,31],borderleft6:[63,32,32,32,32,32,32,63],borderleft7:[127,64,64,64,64,64,64,127],borderleft8:[255,128,128,128,128,128,128,255],bordertopbottom5:[255,0,0,0,0,0,0,255],borderright1:[128,128,128,128,128,128,128,128],borderright2:[192,64,64,64,64,64,64,192],borderright3:[224,32,32,32,32,32,32,224],borderright4:[240,16,16,16,16,16,16,240],borderright5:[248,8,8,8,8,8,8,248],borderright6:[252,4,4,4,4,4,4,252],borderright7:[254,2,2,2,2,2,2,254],borderright8:[255,1,1,1,1,1,1,255],box1:[224,224,224,0,0,0,0,0],box2:[7,7,7,0,0,0,0,0],box3:[231,231,231,0,0,0,0,0],box4:[0,0,0,0,0,7,7,7],box5:[7,7,7,0,0,7,7,7],box6:[224,224,224,0,0,7,7,7],box7:[231,231,231,0,0,7,7,7],box8:[0,0,0,0,0,224,224,224],box9:[7,7,7,0,0,224,224,224],box10:[224,224,224,0,0,224,224,224],box11:[231,231,231,0,0,224,224,224],box12:[0,0,0,0,0,231,231,231],box13:[7,7,7,0,0,231,231,231],box14:[224,224,224,0,0,231,231,231],box15:[231,231,231,0,0,231,231,231],checkerboard1:[170,85,170,85,170,85,170,85],checkerboard2:[85,170,85,170,85,170,85,170],checkerboard3:[93,234,87,186,85,238,85,187],checkerboard4:[204,51,51,204,204,51,51,204],checkerboard5:[204,204,51,51,204,204,51,51],checkerboard6:[51,204,204,51,51,204,204,51],checkerboard7:[51,51,204,204,51,51,204,204],pointerright:[32,48,56,60,60,56,48,32],pointerup:[0,0,24,60,126,255,0,0],pointerleft:[4,12,28,60,60,28,12,4],pointerdown:[0,0,255,126,60,24,0,0],arrowne:[0,62,6,10,18,34,64,128],arrownw:[0,124,96,80,72,68,2,1],arrowsw:[1,2,68,72,80,96,124,0],arrowse:[128,64,34,18,10,6,62,0],dice1:[0,0,0,24,24,0,0,0],dice2:[192,192,0,0,0,0,3,3],dice3:[192,192,0,24,24,0,3,3],dice4:[195,195,0,0,0,0,195,195],dice5:[195,195,0,24,24,0,195,195],dice6:[195,195,0,195,195,0,195,195],outlinedplus1:[60,36,231,129,129,231,36,60],outlinedplus2:[255,231,231,129,129,231,231,255],twoboxes1:[240,144,144,240,15,9,9,15],twoboxes2:[240,144,144,254,18,18,30,0],twoboxes3:[240,144,188,244,36,60,0,0],twoboxes4:[240,248,216,248,120,0,0,0],twoboxes5:[15,9,9,15,240,144,144,240],fourboxes:[255,153,153,255,255,153,153,255],chain1:[240,248,216,248,120,0,0,0],chain2:[240,144,188,244,47,61,9,15]},SPECIAL_CHARS:{0:[60,102,102,102,102,102,102,60],1:[24,56,120,24,24,24,24,24],2:[60,102,6,12,24,48,96,126],3:[60,102,6,28,6,6,102,60],4:[14,30,54,102,102,126,6,6],5:[126,96,96,124,6,6,102,60],6:[60,102,96,124,102,102,102,60],7:[126,126,6,12,24,24,24,24],8:[60,102,102,60,102,102,102,60],9:[60,102,102,62,6,6,102,60],10:[94,82,82,82,82,94,0,255],11:[36,36,36,36,36,36,0,255],12:[94,66,68,72,80,94,0,255],13:[94,66,78,66,66,94,0,255],14:[82,82,94,66,66,66,0,255],15:[94,80,94,66,66,94,0,255],16:[94,80,94,82,82,94,0,255],17:[94,66,68,72,72,72,0,255],18:[94,82,94,82,82,94,0,255],19:[94,82,94,66,66,94,0,255]},DIGIT_CHARS:{0:126,1:48,2:109,3:121,4:51,5:91,6:95,7:112,8:127,9:123," ":0,".":128,":":255,"!":176,A:119,a:125,B:127,b:31,C:78,c:13,D:126,d:61,E:79,e:111,F:71,f:71,G:94,g:123,H:55,h:23,I:48,i:16,J:60,j:56,K:55,k:23,L:14,l:6,M:85,m:85,N:21,n:21,O:126,o:29,P:103,p:103,Q:115,q:115,R:119,r:5,S:91,s:91,T:70,t:15,U:62,u:28,V:39,v:35,W:63,w:43,X:37,x:37,Y:59,y:51,Z:109,z:109}},_E={};const gl=ot(),mo=OE,Oh=new Map;let Ye=class Ar{constructor(t){gl.Component.call(this,t=gl.Options(t)),gl.Controller.call(this,Xg,t),this.digitOrder=1,this.isMatrix||(this.colon=t.colon||!1);const n=t.devices||(t.addresses?t.addresses.length:1);this.memory=Array(64).fill(0),t.dims=t.dims||Ar.MATRIX_DIMENSIONS["8x8"],typeof t.dims=="string"&&(t.dims=Ar.MATRIX_DIMENSIONS[t.dims]),Array.isArray(t.dims)&&(t.dims={rows:t.dims[0],columns:t.dims[1]});const s={devices:n,digits:t.digits||8,isMatrix:!!t.isMatrix,isBicolor:!!t.isBicolor,rows:t.dims.rows,columns:t.dims.columns};if(!(s.columns===8||s.columns===16)||!(s.rows===8||s.rows===16)||s.columns+s.rows===32)throw new Error("Invalid matrix dimensions specified: must be 8x8, 16x8 or 8x16");Object.defineProperties(this,{devices:{get(){return s.devices}},digits:{get(){return s.digits}},isMatrix:{get(){return s.isMatrix}},isBicolor:{get(){return s.isBicolor}},rows:{get(){return s.rows}},columns:{get(){return s.columns}}}),Oh.set(this,s),this.initialize(t)}each(t){for(let n=0;n<this.devices;n++)t.call(this,n)}on(t){return typeof t>"u"?this.each(function(n){this.on(n)}):this.send(t,this.OP.SHUTDOWN||Ar.OP.SHUTDOWN,1),this}off(t){return typeof t>"u"?this.each(function(n){this.off(n)}):this.send(t,this.OP.SHUTDOWN||Ar.OP.SHUTDOWN,0),this}digit(t,n,s){let a,c,h,p,x,b=!1;return arguments.length<3?(a=Array.from(arguments),this.each(function(y){this.digit.apply(this,(a.unshift(y),a))}),this):this.isMatrix?(this.draw.apply(this,arguments),this):(c=t*this.digits,p=String(s),n=Number(n),h=n,this.digitOrder===-1&&(h=this.digits-h-1),p.length===2&&p[1]==="."&&(b=!0,p=p[0]),x=Ar.DIGIT_CHARS[p],x||(x=Math.abs(Number(p))),b&&(x=x|Ar.DIGIT_CHARS["."]),this.memory[c+h]=x,this.sendDigit(t,h,x),this)}print(t,n){const s=/([0-9A-Za-z][.]|[0-9A-Za-z:]|[\s])/g;let a;if(n=n||{device:0},this.isMatrix)throw new Error("Led.Matrix does not yet support the print method");return typeof t!="string"&&(t=String(t)),a=t.match(s),this.colon&&a.length>2&&a[2]!==":"&&a[2]!==" "&&a.splice(2,0," "),(a||[]).forEach(function(c,h){this.digit(n.device,h,c)},this),this}brightness(t,n){return arguments.length===1?(n=t,this.each(function(s){this.brightness(s,n)})):this.send(t,this.OP.BRIGHTNESS||Ar.OP.BRIGHTNESS,gl.map(n,0,100,0,15)),this}column(t,n,s){let a;if(!this.isMatrix)throw new Error("The `column` method is only supported for Matrix devices");if(arguments.length===2)s=n,n=t,this.each(function(c){this.column(c,n,s)});else for(let c=0;c<this.rows;c++)a=s>>this.rows-1-c,a=a&1,this.led(t,c,n,a);return this}draw(t,n){let s;if(arguments.length===1)n=t,this.each(function(a){this.draw(a,n)});else if(this.isMatrix){if(Array.isArray(n)?s=n:s=mo.MATRIX_CHARS[n],s!==void 0){if(s.length!==this.rows&&s.length!==this.columns)throw new Error(`Invalid character: ${s}`);const a=s.length;for(let c=0;c<this.rows-a;c++)s.push(0);s.forEach(function(c,h){this.row(t,h,c)},this)}}else this.digit.apply(this,arguments);return this}device(t){const n={};return Object.keys(Ar.prototype).forEach(s=>{n[s]=this[s].bind(this,t)}),Object.getOwnPropertyNames(this).forEach(s=>{this[s]&&typeof this[s]=="function"&&(n[s]=this[s].bind(this,t))}),n}},_l=new Set([112,113,114,115,116,117,118,119]);const Xg={HT16K33:{OP:{value:{SHUTDOWN:32,BRIGHTNESS:224,BLINK:128}},initialize:{writable:!0,value(r){const t=Oh.get(this),n=Array.from(_l);if(n.length===0)throw new Error("There are no available HT16K33 controller addresses");this.addresses=r.addresses||(r.address?[r.address]:null),this.addresses===null&&(this.addresses=n.slice(0,t.devices)),this.addresses.forEach(s=>{if(!_l.has(s))throw new Error(`Invalid HT16K33 controller address: ${s}`);_l.delete(s)}),this.rotation=r.rotation||1,this.columns===16&&!r.rotation&&(this.rotation=0),this.buffer=Array(this.rows).fill([]),this.isMatrix||(this.colon=!0),r.addresses=this.addresses,this.io.i2cConfig(r),this.each(function(s){this.on(s),this.blink(s,!1),this.brightness(s,100),this.clear(s)})}},blink:{writable:!0,value(r,t){if(arguments.length===1)t=r,this.each(function(n){this.blink(n,t)});else{let n=null;switch(t){case!1:n=0;break;case"slow":n=6;break;case"normal":n=4;break;case"fast":n=2;break}if(n==null)return;this.send(r,this.OP.BLINK|1,n)}return this}},clear:{writable:!0,value(r){let t;if(typeof r>"u")this.each(function(n){this.clear(n)});else{t=r*this.columns;for(let n=0;n<this.rows;n++)this.memory[t+n]=0,this.buffer[r][n]=0;this.writeDisplay(r)}return this}},led:{writable:!0,value(r,t,n,s){if(arguments.length===3)return s=n,n=t,t=r,this.each(function(a){this.led(a,t,n,s)}),this;{let a=n,c=t,h,p=this.rows,x=this.columns;if(c<0||c>=p)return this;if(a<0||a>=x)return this;switch(this.rotation){case 1:x=this.rows,p=this.columns,h=a,a=c,c=h,a=x-a-1;break;case 2:a=x-a-1,c=p-c-1;break;case 3:x=this.rows,p=this.columns,h=a,a=c,c=h,c=p-c-1;break}this.isBicolor?s===Ye.COLORS.GREEN?(this.buffer[r][c]|=1<<a,this.buffer[r][c]&=~(1<<a+8)):s===Ye.COLORS.YELLOW?this.buffer[r][c]|=1<<a+8|1<<a:s===Ye.COLORS.RED?(this.buffer[r][c]|=1<<a+8,this.buffer[r][c]&=~(1<<a)):this.buffer[r][c]&=~(1<<a)&~(1<<a+8):(x===8&&p===8&&(a+=x-1,a%=x),s?this.buffer[r][c]|=1<<a:this.buffer[r][c]&=~(1<<a)),this.writeDisplay(r)}return this}},writeDisplay:{writable:!0,value(r){const t=[0];for(let n=0;n<8;n++)t.push(this.buffer[r][n]&255),t.push(this.buffer[r][n]>>8);this.io.i2cWrite(this.addresses[r],t)}},row:{writable:!0,value(r,t,n){if(!this.isMatrix)throw new Error("The `row` method is only supported for Matrix devices");if(typeof n=="number"&&(n=`0000000000000000${parseInt(n,10).toString(2)}`.substr(0-this.columns,this.columns)),arguments.length===2)n=t,t=r,this.each(function(s){this.row(s,t,n)});else for(let s=0;s<this.columns;s++)this.led(r,t,s,parseInt(n[s],10));return this}},scanLimit:{writable:!0,value(){throw new Error("The `scanLimit` method is not implemented for HT16K33 devices")}},send:{writable:!0,value(r,t,n){if(arguments.length!==3)throw new Error("The `send` method expects three arguments: device, opcode, data");return this.io.i2cWrite(this.addresses[r],[t|n]),this}},sendDigit:{writable:!0,value(r,t,n){return n>0&&n<255&&(n=`00000000${n.toString(2)}`.slice(-8).split(""),n=n.shift()+n.reverse().join(""),n=parseInt(n,2)),this.buffer[r][t]=n,this.writeDisplay(r),this}}},DEFAULT:{OP:{value:{}},initialize:{writable:!0,value({pins:r}){this.pins={data:r.data,clock:r.clock,cs:r.cs||r.latch},["data","clock","cs"].forEach(function(t){this.io.pinMode(this.pins[t],this.io.MODES.OUTPUT)},this),this.digitOrder=-1,this.digitOrder=-1;for(let t=0;t<this.devices;t++)this.isMatrix&&this.send(t,Ye.OP.DECODING,0),this.send(t,Ye.OP.BRIGHTNESS,3),this.send(t,Ye.OP.SCANLIMIT,7),this.send(t,Ye.OP.SHUTDOWN,1),this.send(t,Ye.OP.DISPLAYTEST,0),this.clear(t),this.on(t);return this}},clear:{writable:!0,value(r){let t;if(typeof r>"u")this.each(function(n){this.clear(n)});else{t=r*8;for(let n=0;n<8;n++)this.memory[t+n]=0,this.send(r,n+1,0)}return this}},sendDigit:{writable:!0,value(r,t,n){return this.send(r,t+1,n),this}},led:{writable:!0,value(r,t,n,s){let a,c;return arguments.length===3?(s=n,n=t,t=r,this.each(function(h){this.led(h,t,n,s)})):(a=r*this.columns,c=128>>n,s?this.memory[a+t]=this.memory[a+t]|c:(c=~c,this.memory[a+t]=this.memory[a+t]&c),this.send(r,t+1,this.memory[a+t])),this}},row:{writable:!0,value(r,t,n){if(!this.isMatrix)throw new Error("The `row` method is only supported for Matrix devices");let s;return typeof n=="string"&&(n=parseInt(n,2)),arguments.length===2?(n=t,t=r,this.each(function(a){this.row(a,t,n)})):(s=r*this.columns,this.memory[s+t]=n,this.send(r,t+1,this.memory[s+t])),this}},scanLimit:{writable:!0,value(r,t){return arguments.length===1?(t=r,this.each(function(n){this.scanLimit(n,t)})):this.send(r,Ye.OP.SCANLIMIT,t),this}},send:{writable:!0,value(r,t,n){if(arguments.length!==3)throw new Error("`send` expects three arguments: device, opcode, data");const s=r*2,a=this.devices*2,c=[];if(r<this.devices){for(let h=0;h<a;h++)c[h]=0;c[s+1]=t,c[s]=n,this.io.digitalWrite(this.pins.cs,this.io.LOW);for(let h=a;h>0;h--)this.board.shiftOut(this.pins.data,this.pins.clock,c[h-1]);this.io.digitalWrite(this.pins.cs,this.io.HIGH)}return this}}}};Ye.DEFAULTS={DECODING:0,BRIGHTNESS:3,SCANLIMIT:7,SHUTDOWN:1,DISPLAYTEST:0};Object.freeze(Ye.DEFAULTS);Ye.OP={};Ye.OP.NOOP=0;Ye.OP.DIGIT0=1;Ye.OP.DIGIT1=2;Ye.OP.DIGIT2=3;Ye.OP.DIGIT3=4;Ye.OP.DIGIT4=5;Ye.OP.DIGIT5=6;Ye.OP.DIGIT6=7;Ye.OP.DIGIT7=8;Ye.OP.DECODEMODE=9;Ye.OP.INTENSITY=10;Ye.OP.SCANLIMIT=11;Ye.OP.SHUTDOWN=12;Ye.OP.DISPLAYTEST=15;Ye.OP.BRIGHTNESS=Ye.OP.INTENSITY;Ye.OP.DECODING=Ye.OP.DECODEMODE;Ye.OP.DISPLAY=Ye.OP.DISPLAYTEST;Ye.OP.POWERDOWN=Ye.OP.SHUTDOWN;Object.freeze(Ye.OP);Ye.COLORS={RED:1,YELLOW:2,GREEN:3};Ye.DIRECTIONS={UP:1,RIGHT:2,DOWN:3,LEFT:4,1:"UP",2:"RIGHT",3:"DOWN",4:"LEFT"};Object.freeze(Ye.DIRECTIONS);const cp=[[224,160,160,160,160,160,224,0],[64,192,64,64,64,64,224,0],[224,32,32,224,128,128,224,0],[224,32,32,96,32,32,224,0],[32,96,160,224,32,32,32,0],[224,128,128,224,32,32,224,0],[224,128,128,224,160,160,224,0],[224,32,32,32,32,32,32,0],[224,160,160,64,160,160,224,0],[224,160,160,224,32,32,224,0]];let Tc="";for(let r=0;r<10;r++)for(let t=0;t<10;t++){Tc=`${r}${t}`,mo.MATRIX_CHARS[Tc]=[];for(let n=0;n<8;n++)mo.MATRIX_CHARS[Tc][n]=cp[r][n]|cp[t][n]>>>4}Ye.MATRIX_DIMENSIONS={"16x8":{rows:16,columns:8},"8x16":{rows:8,columns:16},"8x8":{rows:8,columns:8}};Ye.MATRIX_CHARS=mo.MATRIX_CHARS;Ye.DIGIT_CHARS=mo.DIGIT_CHARS;_E.IS_TEST_MODE&&(Ye.Controllers=Xg,Ye.purge=()=>{_l=new Set([112,113,114,115,116,117,118,119]),Oh.clear()});var _h=Ye;const hp=_h;class IE extends hp{constructor(t){t.isMatrix=!0,super(t)}static get CHARS(){return hp.MATRIX_CHARS}}var ME=IE;const fp=_h;class DE extends fp{constructor(t){t.isMatrix=!1,super(t)}static get CHARS(){return fp.DIGIT_CHARS}}var LE=DE;const xs=Yg;xs.Collection=bE;xs.RGB=Rh;xs.RGB.Collection=CE;xs.Matrix=ME;xs.Digits=LE;var Zg=xs,PE={};const Ac=ot(),Li=To,NE=Xl,{uint16:bc,toFixed:to,scale:xl}=Et,Gl=new Map,co={DEFAULT:{initialize:{value(r,t){this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,t)}},toIntensityLevel:{value(r){return to(xl(r,0,1023,0,100)/100,2)}}},EVS_EV3:{initialize:{value(r,t){const n=Gl.get(this);r.mode&&(r.mode=r.mode.toUpperCase()),n.mode=r.mode==="REFLECTED"?Li.Type_EV3_LIGHT_REFLECTED:Li.Type_EV3_LIGHT,n.shield=Li.shieldPort(r.pin),n.ev3=new Li(Object.assign(r,{io:this.io})),n.ev3.setup(n.shield,Li.Type_EV3),n.ev3.write(n.shield,129+n.shield.offset,n.mode),n.ev3.read(n.shield,Li.Light,Li.Light_Bytes,s=>{const a=s[0]|s[1]<<8;t(a)})}},toIntensityLevel:{value(r){return to(r/100,2)}}},EVS_NXT:{initialize:{value(r,t){const n=Gl.get(this);r.mode&&(r.mode=r.mode.toUpperCase()),n.mode=r.mode==="REFLECTED"?Li.Type_NXT_LIGHT_REFLECTED:Li.Type_NXT_LIGHT,n.shield=Li.shieldPort(r.pin),n.ev3=new Li(Object.assign(r,{io:this.io})),n.ev3.setup(n.shield,n.mode),n.ev3.read(n.shield,n.shield.analog,Li.Analog_Bytes,s=>{t(s[0]|s[1]<<8)})}},toIntensityLevel:{value(r){return to(xl(r,0,1023,100,0)/100,2)}}},TSL2561:{ADDRESSES:{value:[41,57,73]},REGISTER:{value:{CONTROL:0,TIMING:1,READ:44}},initialize:{value(r,t){const n=ue=>ue|128,{Drivers:s}=Ue(),a=s.addressResolver(this,r);this.io.i2cConfig(r),this.io.i2cWriteReg(a,n(this.REGISTER.CONTROL),3);const c=14,h=9,p=64,x=498,b=446,y=128,A=532,d=721,S=192,R=575,M=891,T=256,w=624,C=1022,O=312,H=367,F=508,q=410,ie=210,G=251,$=666,K=24,Y=18,Q=666,se=0,ae=0,ve=0,we=16,le=[13,101,402],oe=[15,120,450],Re=[29975,4071,65536];let ce=we,Oe=0,Me=le[Oe],X=0;Object.defineProperties(this,{gain:{get(){return ce},set(ue){if(ue!==ve&&ue!==we)throw new RangeError("Invalid gain. Expected one of: 0, 16");ce=ue,this.io.i2cWriteReg(a,n(this.REGISTER.TIMING),Oe|ce)}},integration:{get(){return Me},set(ue){if(Oe=le.indexOf(ue),Oe===-1)throw new RangeError("Invalid integration. Expected one of: 13, 101, 402");Me=ue,this.io.i2cWriteReg(a,n(this.REGISTER.TIMING),Oe|ce)}},lux:{get(){return X}}}),this.gain=ce,this.integration=Me;const ne=()=>{setTimeout(()=>{this.io.i2cReadOnce(a,n(this.REGISTER.READ),4,ue=>{let V=bc(ue[1],ue[0]),J=bc(ue[3],ue[2]),he=0,ge=0,be=Re[Oe];ce||(be=be<<4),V=V*be>>10,J=J*be>>10;let N=0;V&&(N=(J<<h+1)/V),N=Math.round(N);const U=N+1>>1;U>=0&&U<=p?(he=x,ge=b):U<=y?(he=A,ge=d):U<=S?(he=R,ge=M):U<=T?(he=w,ge=C):U<=O?(he=H,ge=F):U<=q?(he=ie,ge=G):U<=$?(he=K,ge=Y):U>Q&&(he=se,ge=ae);let me=V*he-J*ge;me<0&&(me=0),me+=1<<c-1,X=me>>>c,t(X),ne()})},oe[Oe])};ne()}},toLux:{value(r){return r}},toIntensityLevel:{value(r){return to(xl(r,0,17e3,0,100)/100,2)}}},BH1750:{ADDRESSES:{value:[35,92]},initialize:{value(r,t){const{Drivers:n}=Ue(),s=n.addressResolver(this,r),a=r.mode||16;this.io.i2cConfig(r),this.io.i2cWrite(s,a);const c=()=>{setTimeout(()=>{this.io.i2cReadOnce(s,2,h=>{t(bc(h[0],h[1])),c()})},120)};c()}},toLux:{value(r){return Math.round(r/1.2)}},toIntensityLevel:{value(r){return to(xl(r/1.2,0,65535,0,100)/100,2)}}}};co.ALSPT19=co["ALS-PT19"]=co.DEFAULT;class Zc extends NE{constructor(t){super(),Ac.Component.call(this,t=Ac.Options(t)),Ac.Controller.call(this,co,t);let n=0,s=0,{freq:a=25}=t;Gl.set(this,{}),this.toIntensityLevel||(this.toIntensityLevel=t.toIntensityLevel||(h=>h)),this.toLux||(this.toLux=t.toLux||(h=>h)),Object.defineProperties(this,{value:{get(){return n}},level:{get(){return this.toIntensityLevel(n)}}}),typeof this.initialize=="function"&&this.initialize(t,h=>n=h),typeof this.lux>"u"&&Object.defineProperty(this,"lux",{get(){return this.toLux(n)}});const c={level:0,lux:0};setInterval(()=>{c.level=this.level,c.lux=this.lux,this.emit("data",c),n!==s&&(s=n,this.emit("change",c))},a)}}PE.IS_TEST_MODE&&(Zc.Controllers=co,Zc.purge=function(){Gl.clear()});var BE=Zc,FE={};const Cc=ot(),GE=Ct,{constrain:dp,fscale:pp}=Et,Wl=new Map,gp=["x","y"];class WE{constructor({pins:t,io:n}){this.pins=t,this.io=n,this.io.pinMode(this.pins[0],this.io.MODES.OUTPUT),this.io.pinMode(this.pins[1],this.io.MODES.OUTPUT),this.io.pinMode(this.pins[2],this.io.MODES.OUTPUT),this.io.pinMode(this.pins[3],this.io.MODES.OUTPUT)}select(t){this.io.digitalWrite(this.pins[0],t&1?this.io.HIGH:this.io.LOW),this.io.digitalWrite(this.pins[1],t&2?this.io.HIGH:this.io.LOW),this.io.digitalWrite(this.pins[2],t&4?this.io.HIGH:this.io.LOW),this.io.digitalWrite(this.pins[3],t&8?this.io.HIGH:this.io.LOW)}}const Ul={ANALOG:{initialize:{value({pins:r},t){const n={x:null,y:null};r.forEach((s,a)=>{this.io.pinMode(s,this.io.MODES.ANALOG),this.io.analogRead(s,c=>{n[gp[a]]=c,n.x!==null&&n.y!==null&&(t({x:n.x,y:n.y}),n.x=null,n.y=null)})})}},toAxis:{value(r,t){const n=Wl.get(this);return dp(pp(r-n[t].zeroV,-511,511,-1,1),-1,1)}}},ESPLORA:{initialize:{value(r,t){const n=new WE({pins:[18,19,20,21],io:this.io}),s=[11,12];let a=1;const c={x:null,y:null};this.io.pinMode(4,this.io.MODES.ANALOG);const h=x=>{c[gp[a]]=x,c.x!==null&&c.y!==null&&(t({x:c.x,y:c.y}),c.x=null,c.y=null),this.io.removeListener("analog-read-4",h),setTimeout(p,10)};var p=()=>{n.select(s[a^=1]),this.io.analogRead(4,h)};p()}},toAxis:{value(r,t){const n=Wl.get(this);return dp(pp(r-n[t].zeroV,-511,511,-1,1),-1,1)}}}};Ul.DEFAULT=Ul.ANALOG;class Jc extends GE{constructor(t){super(),Cc.Component.call(this,t=Cc.Options(t)),Cc.Controller.call(this,Ul,t),this.toAxis||(this.toAxis=t.toAxis||(s=>s));const n={x:{invert:!1,value:0,previous:0,zeroV:0,calibrated:!1},y:{invert:!1,value:0,previous:0,zeroV:0,calibrated:!1}};n.x.zeroV=t.zeroV===void 0?0:t.zeroV.x||0,n.y.zeroV=t.zeroV===void 0?0:t.zeroV.y||0,n.x.invert=t.invertX||t.invert||!1,n.y.invert=t.invertY||t.invert||!1,Wl.set(this,n),typeof this.initialize=="function"&&this.initialize(t,s=>{let a=!1;const c={x:null,y:null};Object.keys(s).forEach(h=>{const p=s[h],x=n[h];x.value=p,n[h].calibrated||(n[h].calibrated=!0,n[h].zeroV=p,a=!0),c[h]=this[h];const b=Math.abs(c[h]),y=Math.abs(x.previous);(b<y||b>y)&&(a=!0),x.previous=c[h]}),this.emit("data",{x:c.x,y:c.y}),a&&this.emit("change",{x:c.x,y:c.y})}),Object.defineProperties(this,{x:{get(){return this.toAxis(n.x.value,"x")*(n.x.invert?-1:1)}},y:{get(){return this.toAxis(n.y.value,"y")*(n.y.invert?-1:1)}}})}}FE.IS_TEST_MODE&&(Jc.Controllers=Ul,Jc.purge=()=>{Wl.clear()});var UE=Jc,kE={};const Oc=ot(),Jg=pi,HE=Ct,vo=new Map;function zE({pin:r},t){const n=vo.get(this);this.io.pinMode(r,this.io.MODES.ANALOG),setTimeout(()=>{n.isCalibrated=!0,this.emit("calibrated")},10),this.io.analogRead(r,t)}const xp={value:zE},bt={PIR:{initialize:{value(r,t){const n=vo.get(this),s=typeof r.calibrationDelay<"u"?r.calibrationDelay:2e3;this.io.pinMode(r.pin,this.io.MODES.INPUT),setTimeout(()=>{n.isCalibrated=!0,this.emit("calibrated")},s),this.io.digitalRead(r.pin,t)}},toBoolean:{value(r){return!!r}}},GP2Y0D805Z0F:{ADDRESSES:{value:[38]},initialize:{value(r,t){const{Drivers:n}=Ue(),s=n.addressResolver(this,r),a=vo.get(this);setTimeout(()=>{a.isCalibrated=!0,this.emit("calibrated")},10),this.io.i2cConfig(r),this.io.i2cWriteReg(s,3,254),this.io.i2cWrite(s,[0]),this.io.i2cRead(s,1,c=>{t(c[0]&2)})}},toBoolean:{value(r){return r===0}}},GP2Y0D810Z0F:{initialize:xp,toBoolean:{value(r){return r>>9===0}}},GP2Y0A60SZLF:{initialize:xp,toBoolean:{value(r){return r>>9===1}}}};bt.GP2Y0D815Z0F=bt.GP2Y0D810Z0F;bt["HC-SR501"]=bt.PIR;bt.HCSR501=bt.PIR;bt["0D805"]=bt.GP2Y0D805Z0F;bt[805]=bt.GP2Y0D805Z0F;bt["0D810"]=bt.GP2Y0D810Z0F;bt[810]=bt.GP2Y0D810Z0F;bt["0D815"]=bt.GP2Y0D815Z0F;bt[815]=bt.GP2Y0D815Z0F;bt["0A60SZLF"]=bt.GP2Y0A60SZLF;bt["60SZLF"]=bt.GP2Y0A60SZLF;bt.DEFAULT=bt.PIR;class wn extends HE{constructor(t){super(),Oc.Component.call(this,t=Oc.Options(t)),Oc.Controller.call(this,bt,t);let n=!1;const s=t.freq||25,a={value:!1,isCalibrated:!1};vo.set(this,a),Object.defineProperties(this,{detectedMotion:{get(){return this.toBoolean(a.value)}},isCalibrated:{get(){return a.isCalibrated}}}),typeof this.initialize=="function"&&this.initialize(t,c=>a.value=c),setInterval(()=>{let c=!1;const h={timestamp:Date.now(),detectedMotion:this.detectedMotion,isCalibrated:a.isCalibrated};a.isCalibrated&&this.detectedMotion&&!n&&this.emit("motionstart",h),a.isCalibrated&&!this.detectedMotion&&n&&this.emit("motionend",h),n!==this.detectedMotion&&(c=!0),this.emit("data",h),c&&this.emit("change",h),n=this.detectedMotion},s)}}wn.Collection=class extends Jg.Emitter{constructor(r){super(r)}get type(){return wn}};Jg.installMethodForwarding(wn.Collection.prototype,wn.prototype);kE.IS_TEST_MODE&&(wn.Controllers=bt,wn.purge=()=>{vo.clear()});var $E=wn,Qg={};const mp=ot(),Xn=Et,e1=pi,jE=Xl,Vr=new Map;function VE(r){const t=r.sort((a,c)=>a-c),n=t.length,s=Math.floor(n/2);return n%2?t[s]:(t[s-1]+t[s])/2}let Ao=class extends jE{constructor(t){super();let n=1023,s=null,a=-1;const c=[];mp.Component.call(this,t=mp.Options(t)),t.type||(t.type="analog"),this.io.RESOLUTION&&this.io.RESOLUTION.ADC&&this.io.RESOLUTION.ADC!==n&&(n=this.io.RESOLUTION.ADC),this.mode=t.type==="digital"?this.io.MODES.INPUT:this.io.MODES.ANALOG,this.io.pinMode(this.pin,this.mode);const h={enabled:typeof t.enabled>"u"?!0:t.enabled,booleanBarrier:t.type==="digital"?0:null,intervalId:null,scale:null,value:0,median:0,freq:t.freq||25,previousFreq:t.freq||25};Vr.set(this,h),this.range=t.range||[0,n],this.limit=t.limit||null,this.threshold=t.threshold===void 0?1:t.threshold,this.isScaled=!1,this.io[`${t.type}Read`](this.pin,x=>{s=x,t.type!=="digital"&&c.push(s)});const p=()=>{let x;if(t.type==="digital"){this.emit("data",s),a!==s&&(this.emit("change",s),a=s);return}c.length>0&&(h.median=VE(c));const b=Math.round(h.median);this.emit("data",b),(h.median<=a-this.threshold||h.median>=a+this.threshold)&&(this.emit("change",b),a=h.median),this.limit&&(h.median<=this.limit[0]&&(x="lower"),h.median>=this.limit[1]&&(x="upper"),x&&(this.emit("limit",{boundary:x,value:b}),this.emit(`limit:${x}`,b))),c.length=0};Object.defineProperties(this,{raw:{get(){return s}},analog:{get(){return t.type==="digital"?s:s===null?0:Xn.map(this.raw,0,n,0,255)|0}},constrained:{get(){return t.type==="digital"?s:s===null?0:Xn.constrain(this.raw,0,255)}},boolean:{get(){const x=Vr.get(this);let b=x.booleanBarrier;const y=x.scale||[0,n];return b===null&&(b=y[0]+(y[1]-y[0])/2),this.value>b}},scaled:{get(){let x,b;return h.scale&&s!==null?t.type==="digital"?h.scale[s]:(x=Xn.fmap(s,this.range[0],this.range[1],h.scale[0],h.scale[1]),b=Xn.constrain(x,h.scale[0],h.scale[1]),b):this.constrained}},freq:{get(){return h.freq},set(x){h.freq=x,h.intervalId&&clearInterval(h.intervalId),h.freq!==null&&(h.intervalId=setInterval(p,x))}},value:{get(){return h.scale?(this.isScaled=!0,this.scaled):s}},resolution:{get(){return n}}}),Qg.IS_TEST_MODE&&Object.defineProperties(this,{state:{get(){return Vr.get(this)}}}),h.enabled&&(this.freq=h.freq)}enable(){const t=Vr.get(this);return t.enabled||(this.freq=t.freq||t.previousFreq),this}disable(){const t=Vr.get(this);return t.enabled&&(t.enabled=!1,t.previousFreq=t.freq,this.freq=null),this}scale(t,n){return this.isScaled=!0,Vr.get(this).scale=Array.isArray(t)?t:[t,n],this}scaleTo(t,n){const s=Array.isArray(t)?t:[t,n];return Xn.map(this.raw,0,this.resolution,s[0],s[1])}fscaleTo(t,n){const s=Array.isArray(t)?t:[t,n];return Xn.fmap(this.raw,0,this.resolution,s[0],s[1])}booleanAt(t){return Vr.get(this).booleanBarrier=t,this}};class t1 extends e1.Emitter{constructor(t){super(t)}get type(){return Ao}}e1.installMethodForwarding(t1.prototype,Ao.prototype);Ao.Collection=t1;Qg.IS_TEST_MODE&&(Ao.purge=()=>{Vr.clear()});var Ih=Ao,qE={};const vp=ot(),Mh=pi,no=new Map,_c={cathode:[63,6,91,79,102,109,125,7,127,103],anode:[64,121,36,48,25,18,2,120,0,24]};let ms=class Qc{constructor(t){if(!(this instanceof Qc))return new Qc(t);Array.isArray(t)?t={pins:{data:t[0],clock:t[1],latch:t[2],reset:t.length===4?t[3]:null}}:typeof t.pins=="object"&&Array.isArray(t.pins)&&(t.pins={data:t.pins[0],clock:t.pins[1],latch:t.pins[2],reset:t.pins.length===4?t.pins[3]:null}),vp.Component.call(this,t=vp.Options(t)),this.size=t.size||1,this.pins.reset=typeof t.pins.reset<"u"?t.pins.reset:null;const n=typeof t.isAnode<"u"?t.isAnode:!1,s=n?255:0,a={isAnode:n,value:new Array(this.size).fill(s),encoded:_c[n?"anode":"cathode"],clear:s};no.set(this,a),Object.defineProperties(this,{isAnode:{get(){return n}},value:{get(){return a.value}}})}display(t){const n=no.get(this);let s;if(typeof t=="number")return this.display(String(t));if(typeof t=="string"){const a=t.match(/([0-9]{1}\.*)/g);a&&a.length&&(s=a.map(c=>c.length===1?n.encoded[c]|128:n.encoded[c[0]]))}return this.send(s),n.value=s,this}send(t){const n=no.get(this);let s=Array.from(arguments);return s.length===1&&(s=[t]),Array.isArray(t)&&(s=t),this.io.digitalWrite(this.pins.latch,this.io.LOW),s.forEach(function(a){if(typeof a=="string"&&(a=a.charCodeAt(0)),this.isAnode&&a!==255&&!n.encoded.includes(a)&&!n.encoded.includes(a&-129)){const c=_c.anode.findIndex(h=>h===a);c!==-1&&(a=_c.cathode[c])}this.board.shiftOut(this.pins.data,this.pins.clock,!0,a)},this),this.io.digitalWrite(this.pins.latch,this.io.HIGH),n.value=s,this}clear(){const t=no.get(this);return this.send(Array(this.size).fill(t.clear))}reset(){if(this.pins.reset===null)throw new Error("ShiftRegister was not initialized with a reset pin");return this.io.digitalWrite(this.pins.clock,this.io.LOW),this.io.digitalWrite(this.pins.reset,this.io.LOW),this.io.digitalWrite(this.pins.clock,this.io.HIGH),this.io.digitalWrite(this.pins.reset,this.io.HIGH),this}};class Dh extends Mh{constructor(t){super(t)}get type(){return ms}}Mh.installMethodForwarding(Dh.prototype,ms.prototype);Mh.installMethodForwarding(Dh.prototype,ms.prototype);ms.Collection=Dh;qE.IS_TEST_MODE&&(ms.purge=()=>{no.clear()});var i1=ms,KE={};const ho=ot(),r1=pi,YE=Ct,Rr=To,yp=Zr(),n1=Et,XE=Ih,ZE=i1,Kt=new Map,rs=new Map;function s1(r){return["clock","data","latch"].reduce((t,n)=>`${t}.${r[n]}`,"")}function Ep(r,t,n){return n?r|=1<<t:r&=~(1<<t)}function JE(r,t){const n=s1(r.settings.register),s=rs.get(r.board)[n];let a=s.value;const c=Kt.get(r).bits,h=t!=="reverse";a=Ep(a,c.a,h),a=Ep(a,c.b,!h),s.value!==a&&s.send(a)}const yo={DEFAULT:{},ShiftRegister:{initialize:{value({register:r,bits:t}){const n=s1(r);if(!t||t.a===void 0||t.b===void 0)throw new Error("ShiftRegister Motors MUST contain HBRIDGE bits {a, b}");Kt.get(this).bits=t,rs.has(this.board)||rs.set(this.board,{}),rs.get(this.board)[n]||(rs.get(this.board)[n]=new ZE({board:this.board,pins:r})),this.io.pinMode(this.pins.pwm,this.io.MODES.PWM)}},dir:{value(r){return this.stop(),JE(this,r.name),this.direction=r,Ce.nextTick(()=>this.emit(r.name)),this}}},PCA9685:{initialize:{value({address:r,pwmRange:t,frequency:n}){const s=Kt.get(this);this.address=r||64,this.pwmRange=t||[0,4080],this.frequency=n||50,s.expander=yp.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),Object.keys(this.pins).forEach(a=>{this.pins[a]=s.expander.normalize(this.pins[a])})}},setPWM:{writable:!0,value(r,t){Kt.get(this).expander.analogWrite(r,t)}},setPin:{writable:!0,value(r,t){Kt.get(this).expander.digitalWrite(r,t)}}},PCA9685_Hybrid:{initialize:{value({address:r,pwmRange:t,frequency:n}){const s=Kt.get(this);this.address=r||64,this.pwmRange=t||[0,4080],this.frequency=n||50,s.expander=yp.get({address:this.address,controller:"PCA9685",bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),this.pins.pwm=s.expander.normalize(this.pins.pwm)}},setPWM:{writable:!0,value(r,t){Kt.get(this).expander.analogWrite(r,t)}}},EVS_EV3:{initialize:{value(r){const t=Kt.get(this);t.shield=Rr.shieldPort(r.pin),t.ev3=new Rr(Object.assign(r,{io:this.io})),this.settings.pins={pwm:r.pin,dir:r.pin}}},setPWM:{value(r,t){const n=Kt.get(this),s=n.shield.motor===Rr.M1?Rr.SPEED_M1:Rr.SPEED_M2;let a=n1.scale(t,0,255,0,100)|0;if(t===0)n.ev3.write(n.shield,Rr.COMMAND,Rr.Motor_Reset);else{this.direction.value||(a=-a);const c=[a,0,0,Rr.CONTROL_SPEED|Rr.CONTROL_GO];n.ev3.write(n.shield,s,c)}}},setPin:{value(r,t){this.setPWM(this.pin,t)}},validatePins:{value(){if(typeof this.settings.pin>"u")throw new Error("Pin must be defined")}}},GROVE_I2C_MOTOR_DRIVER:{REGISTER:{value:{ADDRESS:15}},COMMANDS:{value:{SET_SPEED:130,SET_PWM_FREQUENCY:132,SET_DIRECTION:170,NOOP:1}},initialize:{value(r){const t=Kt.get(this);let n=Kt.get("GROVE_I2C_MOTOR_DRIVER");n||(n={direction:{A:1,B:1},speed:{A:0,B:0}},Kt.set("GROVE_I2C_MOTOR_DRIVER",n)),t.shared=n,t.pin=r.pin.toUpperCase(),this.settings.pins={pwm:r.pin,dir:r.pin},this.address=r.address||this.REGISTER.ADDRESS,r.address=this.address,this.io.i2cConfig(r)}},setPWM:{value(r,t){const n=Kt.get(this),s=ho.constrain(t,0,255)|0;n.shared.speed[n.pin]=s,this.io.i2cWrite(this.address,[this.COMMANDS.SET_SPEED,n.shared.speed.A,n.shared.speed.B])}},setPin:{value(r,t){const n=Kt.get(this);n.shared.direction[n.pin]=t?1:2;const s=n.shared.direction.A&3,c=(n.shared.direction.B&3)<<2|s;this.io.i2cWrite(this.address,[this.COMMANDS.SET_DIRECTION,c,this.COMMANDS.NOOP])}},validatePins:{value(){if(typeof this.settings.pin>"u")throw new Error("Pin must be defined")}}}};yo.EVS_NXT=yo.EVS_EV3;const QE={NONDIRECTIONAL:{pins:{get(){return this.settings.pin?{pwm:this.settings.pin}:this.settings.pins||{}}},dir:{writable:!0,configurable:!0,value(r){return r=r||this.speed(),this}},resume:{value(){const r=this.speed();return this.speed({speed:r}),this}}},DIRECTIONAL:{pins:{get(){return Array.isArray(this.settings.pins)?{pwm:this.settings.pins[0],dir:this.settings.pins[1]}:this.settings.pins}},dir:{writable:!0,configurable:!0,value(r){return this.stop(),this.setPin(this.pins.dir,r.value),this.direction=r,Ce.nextTick(()=>this.emit(r.name)),this}}},CDIR:{pins:{get(){return Array.isArray(this.settings.pins)?{pwm:this.settings.pins[0],dir:this.settings.pins[1],cdir:this.settings.pins[2]}:this.settings.pins}},dir:{value(r){return this.stop(),this.direction=r,this.setPin(this.pins.cdir,1^r.value),this.setPin(this.pins.dir,r.value),Ce.nextTick(()=>this.emit(r.name)),this}},brake:{value(r){return this.speed({speed:0,saveSpeed:!1}),this.setPin(this.pins.dir,1,127),this.setPin(this.pins.cdir,1,128,127),this.speed({speed:255,saveSpeed:!1,braking:!0}),Ce.nextTick(()=>this.emit("brake")),r&&this.board.wait(r,()=>this.stop()),this}}}};class Ht extends YE{constructor(t){super();var n,s;ho.Component.call(this,t=ho.Options(t)),this.settings=t,typeof this.settings.device>"u"&&(this.settings.device="DIRECTIONAL",typeof this.settings.pins>"u"&&typeof this.settings.register!="object"&&(this.settings.device="NONDIRECTIONAL"),this.settings.pins&&(Array.isArray(this.settings.pins)?this.settings.device=["NONDIRECTIONAL","DIRECTIONAL","CDIR"][this.settings.pins.length-1]:(typeof this.settings.pins.dir>"u"?this.settings.device="NONDIRECTIONAL":this.settings.device="DIRECTIONAL",typeof this.settings.pins.cdir<"u"&&(this.settings.device="CDIR")))),typeof this.settings.controller=="string"&&(this.settings.controller.startsWith("EVS")||this.settings.controller.startsWith("GROVE_I2C"))&&(this.settings.device="DIRECTIONAL"),n=typeof this.settings.device=="string"?QE[this.settings.device]:this.settings.device,this.threshold=typeof this.settings.threshold<"u"?this.settings.threshold:30,this.invertPWM=typeof this.settings.invertPWM<"u"?this.settings.invertPWM:!1,Object.defineProperties(this,n),this.settings.register&&(this.settings.controller="ShiftRegister"),this.settings.controller&&(typeof this.settings.controller=="string"?yo[this.settings.controller]:this.settings.controller,ho.Controller.call(this,yo,t)),this.settings.current&&(this.settings.current.board=this.board,this.current=new XE(this.settings.current)),s={isOn:!1,currentSpeed:typeof this.settings.speed<"u"?this.settings.speed:128,braking:!1,enabled:!1},Kt.set(this,s),Object.defineProperties(this,{isOn:{get:function(){return s.isOn}},currentSpeed:{get:function(){return s.currentSpeed}},braking:{get:function(){return s.braking}},enabled:{get:function(){return s.enabled}}}),this.direction={value:1},this.initialize&&this.initialize(t),this.validatePins(),this.enable(),this.dir(this.direction)}}Ht.prototype.initialize=function(){this.io.pinMode(this.pins.pwm,this.io.MODES.PWM),["dir","cdir","brake","enable"].forEach(r=>{typeof this.pins[r]<"u"&&this.io.pinMode(this.pins[r],this.io.MODES.OUTPUT)})};Ht.prototype.setPin=function(r,t){this.io.digitalWrite(r,t)};Ht.prototype.setPWM=function(r,t){this.io.analogWrite(r,n1.map(t,0,255,0,this.board.RESOLUTION.PWM))};Ht.prototype.speed=function(r){var t=Kt.get(this);return typeof r>"u"?t.currentSpeed:(typeof r=="number"&&(r={speed:r}),r.speed=ho.constrain(r.speed,0,255),r.saveSpeed=typeof r.saveSpeed<"u"?r.saveSpeed:!0,r.speed<this.threshold&&(r.speed=0),t.isOn=r.speed!==0,r.saveSpeed&&(t.currentSpeed=r.speed),r.braking&&(t.braking=!0),this.invertPWM&&this.direction.value===1&&(r.speed^=255),this.setPWM(this.pins.pwm,r.speed),this)};Ht.prototype.start=function(r){return this.pins.brake&&this.braking&&this.setPin(this.pins.brake,0),r=typeof r<"u"?r:this.speed(),this.speed({speed:r,braking:!1}),r>0&&Ce.nextTick(()=>this.emit("start")),this};Ht.prototype.stop=function(){return this.speed({speed:0,saveSpeed:!1}),Ce.nextTick(()=>this.emit("stop")),this};Ht.prototype.brake=function(r){if(typeof this.pins.brake>"u")this.board.io.name!=="Mock"&&console.log("Non-braking motor type"),this.stop();else if(this.setPin(this.pins.brake,1),this.setPin(this.pins.dir,1),this.speed({speed:255,saveSpeed:!1,braking:!0}),Ce.nextTick(()=>this.emit("brake")),r){var t=this;this.board.wait(r,function(){t.resume()})}return this};Ht.prototype.release=function(){return this.resume(),Ce.nextTick(()=>this.emit("release")),this};Ht.prototype.resume=function(){var r=this.speed();return this.dir(this.direction),this.start(r),this};Ht.prototype.enable=function(){var r=Kt.get(this);typeof this.pins.enable<"u"&&!r.enabled&&(this.setPin(this.pins.enable,1),r.enabled=!0)};Ht.prototype.disable=function(){var r=Kt.get(this);typeof this.pins.enable<"u"&&r.enabled&&(this.setPin(this.pins.enable,0),r.enabled=!1)};Ht.prototype.validatePins=function(){if(typeof this.pins.pwm>"u")throw new Error("PWM pin must be defined");if(typeof this.pins.dir>"u"&&this.settings.device!=="NONDIRECTIONAL")throw new Error("DIR pin must be defined");if(this.settings.device==="CDIR"&&typeof this.pins.cdir>"u")throw new Error("CDIR pin must be defined for three wire motors")};[{name:"forward",abbr:"fwd",value:1},{name:"reverse",abbr:"rev",value:0}].forEach(r=>{Ht.prototype[r.name]=Ht.prototype[r.abbr]=function(t){return this.dir(r),this.start(t),this}});Ht.SHIELD_CONFIGS={ADAFRUIT_V1:{M1:{pins:{pwm:11},register:{data:8,clock:4,latch:12},bits:{a:2,b:3}},M2:{pins:{pwm:3},register:{data:8,clock:4,latch:12},bits:{a:1,b:4}},M3:{pins:{pwm:6},register:{data:8,clock:4,latch:12},bits:{a:5,b:7}},M4:{pins:{pwm:5},register:{data:8,clock:4,latch:12},bits:{a:0,b:6}}},ADAFRUIT_V2:{M1:{pins:{pwm:8,dir:9,cdir:10},address:96,controller:"PCA9685"},M2:{pins:{pwm:13,dir:12,cdir:11},address:96,controller:"PCA9685"},M3:{pins:{pwm:2,dir:3,cdir:4},address:96,controller:"PCA9685"},M4:{pins:{pwm:7,dir:6,cdir:5},address:96,controller:"PCA9685"}},SEEED_STUDIO:{A:{pins:{pwm:9,dir:8,cdir:11}},B:{pins:{pwm:10,dir:12,cdir:13}}},FREETRONICS_HBRIDGE:{A:{pins:{pwm:6,dir:4,cdir:7}},B:{pins:{pwm:5,dir:3,cdir:2}}},ARDUINO_MOTOR_SHIELD_R3_1:{A:{pins:{pwm:3,dir:12}},B:{pins:{pwm:11,dir:13}}},ARDUINO_MOTOR_SHIELD_R3_2:{A:{pins:{pwm:3,dir:12,brake:9}},B:{pins:{pwm:11,dir:13,brake:8}}},ARDUINO_MOTOR_SHIELD_R3_3:{A:{pins:{pwm:3,dir:12,brake:9,current:"A0"}},B:{pins:{pwm:11,dir:13,brake:8,current:"A1"}}},DF_ROBOT:{A:{pins:{pwm:6,dir:7}},B:{pins:{pwm:5,dir:4}}},NKC_ELECTRONICS_KIT:{A:{pins:{pwm:9,dir:12}},B:{pins:{pwm:10,dir:13}}},RUGGED_CIRCUITS:{A:{pins:{pwm:3,dir:12}},B:{pins:{pwm:11,dir:13}}},SPARKFUN_ARDUMOTO:{A:{pins:{pwm:3,dir:12}},B:{pins:{pwm:11,dir:13}}},POLOLU_DRV8835_SHIELD:{M1:{pins:{pwm:9,dir:7}},M2:{pins:{pwm:10,dir:8}}},POLOLU_VNH5019_SHIELD:{M1:{pins:{pwm:9,dir:2,cdir:4,enable:6}},M2:{pins:{pwm:10,dir:7,cdir:8,enable:12}}},MICRO_MAGICIAN_V2:{A:{pins:{pwm:6,dir:8},invertPWM:!0},B:{pins:{pwm:5,dir:7},invertPWM:!0}},SPARKFUN_LUDUS:{A:{pins:{pwm:3,dir:4,cdir:5}},B:{pins:{pwm:6,dir:7,cdir:8}}},SPARKFUN_DUAL_HBRIDGE_EDISON_BLOCK:{A:{pins:{pwm:20,dir:33,cdir:46,enable:47}},B:{pins:{pwm:14,dir:48,cdir:36,enable:47}}},PICAR_V:{A:{controller:"PCA9685_Hybrid",pins:{pwm:4,dir:"GPIO17"}},B:{controller:"PCA9685_Hybrid",pins:{pwm:5,dir:"GPIO27"}}}};class o1 extends r1{constructor(t){super(t)}get type(){return Ht}}r1.installMethodForwarding(o1.prototype,Ht.prototype);Ht.Collection=o1;KE.IS_TEST_MODE&&(Ht.Controllers=yo,Ht.purge=function(){Kt.clear(),rs.clear()});var e2=Ht;function vs(r){var t=Ce.version,n=t.split(".")[0];n=n.split("v")[1];var s=t.split(".")[1];n==0&&s<10&&(console.log("Error: Please update to the latest version of node! This library requires 0.10.x or later"),Ce.exit(0)),this.intervalT1=null,this.timeOutT1=null,this.intervalCount=1,this.deferredInterval=!1,this.deferredTimeout=!1,this.deferredTimeoutRef=null,this.deferredIntervalRef=null,this.timeoutCallbackRef=null,this.intervalCallbackRef=null,this.timeoutImmediateRef=null,this.intervalImmediateRef=null,this.intervalErrorChecked=!1,this.intervalType="",r&&(this.logging=!0)}vs.prototype.time=function(r,t,n,s){if(s){var a=Ce.hrtime();t?(t.push(function(){var h=Ce.hrtime(a);n=="s"?s(h[0]+h[1]/1e9):n=="m"?s(h[0]/1e3+h[1]/1e6):n=="u"?s(h[0]/1e6+h[1]/1e3):n=="n"?s(h[0]/1e9+h[1]):s(h)}),r.apply(null,t)):r(function(){var h=Ce.hrtime(a);n=="s"?s(h[0]+h[1]/1e9):n=="m"?s(h[0]/1e3+h[1]/1e6):n=="u"?s(h[0]/1e6+h[1]/1e3):n=="n"?s(h[0]/1e9+h[1]):s(h)})}else{var a=Ce.hrtime();t?r.apply(null,t):r();var c=Ce.hrtime(a);return n=="s"?c[0]+c[1]/1e9:n=="m"?c[0]/1e3+c[1]/1e6:n=="u"?c[0]/1e6+c[1]/1e3:n=="n"?c[0]/1e9+c[1]:Ce.hrtime(a)}};vs.prototype.setInterval=function(r,t,n,s){this.intervalErrorChecked||(r?typeof r!="function"&&(console.log("Task argument to setInterval must be a function reference"),Ce.exit(1)):(console.log("A task function must be specified to setInterval"),Ce.exit(1)),n?typeof n!="string"&&(console.log("Interval argument to setInterval must be a string specified as an integer followed by 's' for seconds, 'm' for milli, 'u' for micro, and 'n' for nanoseconds. Ex. 2u"),Ce.exit(1)):(console.log("An interval argument must be specified"),Ce.exit(1)),s&&(typeof s!="function"?(console.log("Callback argument to setInterval must be a function reference"),Ce.exit(1)):this.intervalCallbackRef=s),this.intervalType=n[n.length-1],this.intervalType=="s"?this.intervalTime=n.slice(0,n.length-1)*1e9:this.intervalType=="m"?this.intervalTime=n.slice(0,n.length-1)*1e6:this.intervalType=="u"?this.intervalTime=n.slice(0,n.length-1)*1e3:this.intervalType=="n"?this.intervalTime=n.slice(0,n.length-1):(console.log("Error with argument: "+n+': Incorrect interval format. Format is an integer followed by "s" for seconds, "m" for milli, "u" for micro, and "n" for nanoseconds. Ex. 2u'),Ce.exit(1)),this.intervalErrorChecked=!0);var a=this;this.intervalTime>0?(this.intervalT1==null&&(this.intervalT1=Ce.hrtime()),this.intervalTime*this.intervalCount>8e15&&(this.intervalT1=Ce.hrtime(),this.intervalCount=1),this.difArray=Ce.hrtime(this.intervalT1),this.difTime=this.difArray[0]*1e9+this.difArray[1],this.difTime<this.intervalTime*this.intervalCount?this.intervalTime>25e6?this.deferredInterval==!1?(this.deferredInterval=!0,msDelay=(this.intervalTime-25e6)/1e6,this.deferredIntervalRef=setTimeout(function(){a.setInterval(r,t,n,s)},msDelay)):(this.deferredIntervalRef=null,this.intervalImmediateRef=setImmediate(function(){a.setInterval(r,t,n,s)})):this.intervalImmediateRef=setImmediate(function(){a.setInterval(r,t,n,s)}):(this.intervalImmediateRef=null,this.logging&&console.log("nanotimer log: cycle time at - "+this.difTime),t?r.apply(null,t):r(),this.intervalT1&&(this.intervalCount++,this.deferredInterval=!1,this.intervalImmediateRef=setImmediate(function(){a.setInterval(r,t,n,s)})))):(this.intervalT1==null&&(this.intervalT1=Ce.hrtime(),this.intervalContinue=!0),this.intervalContinue==!0?(t?r.apply(null,t):r(),setImmediate(function(){a.setInterval(r,t,n,s)})):(this.intervalT1=null,this.intervalCount=1,s()))};vs.prototype.setTimeout=function(r,t,n,s){r?typeof r!="function"&&(console.log("Task argument to setTimeout must be a function reference"),Ce.exit(1)):(console.log("A task function must be specified to setTimeout"),Ce.exit(1)),n?typeof n!="string"&&(console.log("Delay argument to setTimeout must be a string specified as an integer followed by 's' for seconds, 'm' for milli, 'u' for micro, and 'n' for nanoseconds. Ex. 2u"),Ce.exit(1)):(console.log("A delay argument must be specified"),Ce.exit(1)),s&&(typeof s!="function"?(console.log("Callback argument to setTimeout must be a function reference"),Ce.exit(1)):this.timeoutCallbackRef=s);var a=this,c=n[n.length-1];if(c=="s")var h=n.slice(0,n.length-1)*1e9;else if(c=="m")var h=n.slice(0,n.length-1)*1e6;else if(c=="u")var h=n.slice(0,n.length-1)*1e3;else if(c=="n")var h=n.slice(0,n.length-1);else console.log("Error with argument: "+n+': Incorrect delay format. Format is an integer followed by "s" for seconds, "m" for milli, "u" for micro, and "n" for nanoseconds. Ex. 2u'),Ce.exit(1);this.timeOutT1==null&&(this.timeOutT1=Ce.hrtime());var p=Ce.hrtime(this.timeOutT1),x=p[0]*1e9+p[1];if(x<h)h>25e6?this.deferredTimeout==!1?(this.deferredTimeout=!0,msDelay=(h-25e6)/1e6,this.deferredTimeoutRef=setTimeout(function(){a.setTimeout(r,t,n,s)},msDelay)):(this.deferredTimeoutRef=null,this.timeoutImmediateRef=setImmediate(function(){a.setTimeout(r,t,n,s)})):this.timeoutImmediateRef=setImmediate(function(){a.setTimeout(r,t,n,s)});else if(this.timeoutImmediateRef=null,this.timeOutT1=null,this.deferredTimeout=!1,this.logging==!0&&console.log("nanotimer log: actual wait - "+x),t?r.apply(null,t):r(),s){var b={waitTime:x};s(b)}};vs.prototype.clearInterval=function(){this.deferredIntervalRef&&(clearTimeout(this.deferredIntervalRef),this.deferredInterval=!1),this.intervalImmediateRef&&clearImmediate(this.intervalImmediateRef),this.intervalT1=null,this.intervalCount=1,this.intervalErrorChecked=!1,this.intervalCallbackRef&&this.intervalCallbackRef()};vs.prototype.clearTimeout=function(){if(this.deferredTimeoutRef){clearTimeout(this.deferredTimeoutRef);var r=Ce.hrtime(this.timeOutT1),t=r[0]*1e9+r[1];this.deferredTimeout=!1}if(this.timeoutImmediateRef&&clearImmediate(this.timeoutImmediateRef),this.timeOutT1=null,this.timeoutCallbackRef){var n={waitTime:t};this.timeoutCallbackRef(n)}};var t2=vs;const Ic=ot(),i2=t2,l1=1e6,ls=new Map;let eh=4;function Mc(r){return r.timer&&(r.timer.clearInterval(),delete r.timer),r}const r2={DEFAULT:{initialize:{writable:!0,value(){this.io.pinMode(this.pin,this.io.MODES.OUTPUT)}},tone:{writable:!0,value(r,t){if(isNaN(r)||isNaN(t))throw new Error("Piezo.tone: invalid tone or duration");Mc(this),this.timer=new i2;let n=1;return this.timer.setInterval(()=>{n=n===1?0:1,this.io.digitalWrite(this.pin,n),this.timer.difTime/1e6>t&&Mc(this)},null,`${r}u`,()=>{}),this}},noTone:{writable:!0,value(){return this.io.digitalWrite(this.pin,0),Mc(this)}}},I2C_BACKPACK:{ADDRESSES:{value:[10]},REGISTER:{value:{NO_TONE:0,TONE:1}},initialize:{writable:!0,value(r){const{Drivers:t}=Ue(),n=t.addressResolver(this,r),s=ls.get(this);this.io.i2cConfig(r),s.address=n}},tone:{writable:!0,value(r,t){const n=ls.get(this);if(isNaN(r)||isNaN(t))throw new Error("Piezo.tone: invalid tone or duration");return this.io.i2cWrite(n.address,[this.REGISTER.TONE,this.pin,r>>8&255,r&255,t>>24&255,t>>16&255,t>>8&255,t&255]),this}},noTone:{writable:!0,value(){const r=ls.get(this);return this.io.i2cWrite(r.address,[this.REGISTER.NO_TONE,this.pin]),this}}}};class Dt{constructor(t){Ic.Component.call(this,t=Ic.Options(t)),Ic.Controller.call(this,r2,t);const n={isPlaying:!1,timeout:null,address:null};ls.set(this,n),Object.defineProperties(this,{isPlaying:{get(){return n.isPlaying}}}),typeof this.initialize=="function"&&this.initialize(t)}note(t,n){return this.frequency(Dt.Parsers.hzFromInput(t),n)}tone(t,n){return this.frequency(Dt.ToFrequency(t),n)}frequency(t,n){return this.tone(Dt.ToTone(t),n)}play(t,n){typeof t!="object"&&(t={song:t}),typeof t.song=="string"&&(t.song=Dt.ToSong(t.song,t.beats)),t.song&&!Array.isArray(t.song)&&(t.song=[t.song]);const s=ls.get(this),a=t.tempo||250,c=Math.round(6e4/a),h=t.song||[];let p,x=0;const b=()=>{if(x===h.length){s.isPlaying=!1,typeof n=="function"&&n(t);return}const y=h[x],A=Dt.Parsers.hzFromInput(y);p=Dt.Parsers.beatFromNote(y)*c,x++,A===null?this.noTone():this.frequency(A,p),s.timeout=setTimeout(b,p)};return s.isPlaying=!0,b(),this}off(){return this.noTone()}stop(){const t=ls.get(this);return t.timeout&&(clearTimeout(t.timeout),t.timeout=null),this}}Dt.Notes={c0:16,"c#0":17,d0:18,"d#0":19,e0:21,f0:22,"f#0":23,g0:25,"g#0":26,a0:28,"a#0":29,b0:31,c1:33,"c#1":35,d1:37,"d#1":39,e1:41,f1:44,"f#1":47,g1:49,"g#1":52,a1:55,"a#1":58,b1:62,c2:65,"c#2":69,d2:73,"d#2":78,e2:82,f2:87,"f#2":93,g2:98,"g#2":104,a2:110,"a#2":117,b2:124,c3:131,"c#3":139,d3:147,"d#3":156,e3:165,f3:175,"f#3":185,g3:196,"g#3":208,a3:220,"a#3":233,b3:247,c4:262,"c#4":277,d4:294,"d#4":311,e4:330,f4:349,"f#4":370,g4:392,"g#4":415,a4:440,"a#4":466,b4:494,c5:523,"c#5":554,d5:587,"d#5":622,e5:659,f5:698,"f#5":740,g5:784,"g#5":831,a5:880,"a#5":932,b5:988,c6:1047,"c#6":1109,d6:1175,"d#6":1245,e6:1319,f6:1397,"f#6":1480,g6:1568,"g#6":1661,a6:1760,"a#6":1865,b6:1976,c7:2093,"c#7":2217,d7:2349,"d#7":2489,e7:2637,f7:2794,"f#7":2960,g7:3136,"g#7":3322,a7:3520,"a#7":3729,b7:3951,c8:4186,"c#8":4435,d8:4699,"d#8":4978,e8:5274,f8:5588,"f#8":5920,g8:6272,"g#8":6645,a8:7040,"a#8":7459,b8:7902};Dt.Frequencies=Object.keys(Dt.Notes).reduce((r,t)=>(r[Dt.Notes[t]]=t,r),{});Dt.Parsers={};Dt.Parsers.hzFromInput=r=>{let t=r;return Array.isArray(r)&&(t=r[0]),typeof t=="number"&&Dt.Frequencies[t]||(typeof t=="string"&&(t=t.toLowerCase().trim(),(t.endsWith("#")||t.length===1)&&(t+=eh),t=Dt.Notes[t]||null),isNaN(t)&&(t=null)),t};Dt.Parsers.beatFromNote=r=>{let t=1;return Array.isArray(r)&&r[1]!==void 0&&(t=r[1]),t};Dt.isValidOctave=r=>typeof r=="number"&&r>=0&&r<=8;Dt.defaultOctave=r=>(Dt.isValidOctave(r)&&(eh=r),eh);Dt.ToFrequency=r=>{const n=r/l1*2;return Math.round(1/n)};Dt.ToTone=r=>{const n=1/r/2;return Math.round(n*l1)};Dt.ToSong=(r,t=1)=>{const n=r.split(" "),s=[];let a,c;for(;n.length;)a=n.shift(),/^[0-9]+$/.test(a)&&(a=parseInt(a,10)),c=s[s.length-1],c&&c[0]===a?c[1]+=t:s.push([a,t]);return s};var n2=Dt,s2={};const Il=ot(),a1=pi,nr=To,o2=Et,l2=Xl,a2=Il.Pins,sr=o2.toFixed,kl=new Map;function jr(r,t){this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,n=>{t.call(this,n)})}const Je={GP2Y0A21YK:{initialize:{value:jr},toCm:{value(r){return sr(12343.85*r**-1.15,2)}}},GP2D120XJ00F:{initialize:{value:jr},toCm:{value(r){return sr(2914/(r+5)-1,2)}}},GP2Y0A02YK0F:{initialize:{value:jr},toCm:{value(r){return sr(10650.08*r**-.935-10,2)}}},GP2Y0A41SK0F:{initialize:{value:jr},toCm:{value(r){return sr(2076/(r-11),2)}}},GP2Y0A710K0F:{initialize:{value:jr},toCm:{value(r){return sr(38631e4*r**-2.463343,0)}}},SRF10:{ADDRESSES:{value:[112]},initialize:{value(r,t){const{Drivers:n}=Ue(),s=n.addressResolver(this,r),a=65;this.io.i2cConfig(r),this.io.i2cWrite(s,[1,16]),this.io.i2cWrite(s,[2,255]);const c=()=>{this.io.i2cWrite(s,[0,81]),setTimeout(()=>{this.io.i2cWrite(s,[2]),this.io.i2cReadOnce(s,2,h=>t(h[0]<<8|h[1])),c()},a)};c()}},toCm:{value(r){return r}}},MB1000:{initialize:{value:jr},toCm:{value(r){return sr(r/2*2.54,2)}}},MB1003:{initialize:{value:jr},toCm:{value(r){return sr(r/2,1)}}},MB1230:{initialize:{value:jr},toCm:{value(r){return r>>0}}},HCSR04:{initialize:{value(r,t){let n=r.pinValue;const s=65;a2.isFirmata(this)&&(typeof n=="string"&&n.length>1&&n[0]==="A"&&(n=this.io.analogPins[+n.slice(1)]),n=+n,this.io.analogPins.includes(n)&&(r.pin=n),this.pin=r.pin);const a={pin:r.pin,value:this.io.HIGH,pulseOut:5},c=()=>{this.io.pingRead(a,h=>{t(h),setTimeout(c,s)})};c()}},toCm:{value(r){return sr(r/29.1/2,1)}}},HCSR04I2CBACKPACK:{ADDRESSES:{value:[39]},initialize:{value(r,t){const{Drivers:n}=Ue(),s=n.addressResolver(this,r),a=90;this.io.i2cConfig(r),typeof r.pin>"u"&&(this.pin=8);const c=()=>{this.io.i2cReadOnce(s,2,h=>{t((h[0]<<8)+h[1]),setTimeout(c,a)})};c()}},toCm:{value(r){return sr(r/29.1/2,1)}}},LIDARLITE:{ADDRESSES:{value:[98]},REGISTER:{value:{ENABLE:0,READ:143}},initialize:{value(r,t){const{Drivers:n}=Ue(),s=n.addressResolver(this,r);this.io.i2cConfig(r);const a=()=>{this.io.i2cWrite(s,this.REGISTER.ENABLE,4),setTimeout(()=>{this.io.i2cReadOnce(s,this.REGISTER.READ,2,c=>{t((c[0]<<8)+c[1]),a()})},20)};a()}},toCm:{value(r){return r>>0}}},EVS_EV3_IR:{initialize:{value(r,t){const n=kl.get(this);n.shield=nr.shieldPort(r.pin),n.ev3=new nr(Object.assign(r,{io:this.io})),n.ev3.setup(n.shield,nr.Type_EV3),n.ev3.read(n.shield,nr.Proximity,nr.Proximity_Bytes,s=>t(s[0]|s[1]<<8))}},toCm:{value(r){return r}}},EVS_EV3_US:{initialize:{value(r,t){const n=kl.get(this);n.shield=nr.shieldPort(r.pin),n.ev3=new nr(Object.assign(r,{io:this.io})),n.ev3.setup(n.shield,nr.Type_EV3),n.ev3.read(n.shield,nr.Proximity,nr.Proximity_Bytes,s=>t(s[0]|s[1]<<8))}},toCm:{value(r){return r/10}}}};Je["2Y0A21"]=Je.GP2Y0A21YK;Je["2D120X"]=Je.GP2D120XJ00F;Je["2Y0A02"]=Je.GP2Y0A02YK0F;Je["0A41"]=Je.GP2Y0A41SK0F;Je["0A21"]=Je.GP2Y0A21YK;Je["0A02"]=Je.GP2Y0A02YK0F;Je["41SK0F"]=Je.GP2Y0A41SK0F;Je["21YK"]=Je.GP2Y0A21YK;Je["2YK0F"]=Je.GP2Y0A02YK0F;Je.MB1010=Je.MB1000;Je["LV-MaxSonar-EZ"]=Je.MB1000;Je["LV-MaxSonar-EZ0"]=Je.MB1000;Je["LV-MaxSonar-EZ1"]=Je.MB1010;Je["HRLV-MaxSonar-EZ0"]=Je.MB1003;Je["XL-MaxSonar-EZ3"]=Je.MB1230;["HC-SR04","SR04","SRF05","SRF06","PARALLAXPING","SEEEDPING","GROVEPING","PING_PULSE_IN","ULTRASONIC_PING"].forEach(r=>{Je[r]=Je.HCSR04});["HCSR04-I2C-BACKPACK","HC-SR04-I2C-BACKPACK","SR04-I2C-BACKPACK","SR04I2CBACKPACK","PINGI2CBACKPACK","PING-I2C-BACKPACK","HCSR04_I2C_BACKPACK","HC_SR04_I2C_BACKPACK","SR04_I2C_BACKPACK","SR04I2CBACKPACK","PINGI2CBACKPACK","PING_I2C_BACKPACK"].forEach(r=>{Je[r]=Je.HCSR04I2CBACKPACK});Je["LIDAR-Lite"]=Je.LIDARLITE;Je.DEFAULT=Je.GP2Y0A21YK;class Xr extends l2{constructor(t){super();const n=typeof t=="object"?t.pin:t;Il.Component.call(this,t=Il.Options(t)),Il.Controller.call(this,Je,t);const s={},a=t.freq||25;let c=0,h=0;this.toCm||(this.toCm=t.toCm||(p=>p)),kl.set(this,s),Object.defineProperties(this,{centimeters:{get(){return this.toCm(c)}},cm:{get(){return this.centimeters}},inches:{get(){return sr(this.centimeters*.39,2)}},in:{get(){return this.inches}}}),typeof this.initialize=="function"&&(t.pinValue=n,this.initialize(t,p=>c=p)),setInterval(()=>{if(c===void 0)return;const p={cm:this.cm,centimeters:this.centimeters,in:this.in,inches:this.inches};this.emit("data",p),c!==h&&(h=c,this.emit("change",p))},a)}}Xr.Collection=class extends a1.Emitter{constructor(r){super(r)}get type(){return Xr}};a1.installMethodForwarding(Xr.Collection.prototype,Xr.prototype);Xr.Controllers=Object.keys(Je);s2.IS_TEST_MODE&&(Xr.Controllers=Je,Xr.purge=()=>{kl.clear()});var u2=Xr;const Dc=ot(),c2=Ct,wp=Et,h2=Zg,f2=Ih,th=0,Eo=1e3,d2=200,p2=50,Kr=new Map,g2={DEFAULT:{initialize:{value(r){if(typeof r.emitter>"u")throw new Error("Emitter pin is required");if(!r.pins||r.pins.length===0)throw new Error("Pins must be defined");const t=Kr.get(this);t.emitter=new h2({board:this.board,pin:r.emitter}),t.sensorStates=r.pins.map(n=>{const s=new f2({board:this.board,freq:t.freq,pin:n}),a={sensor:s,rawValue:0,dataReceived:!1};return s.on("data",c=>{x2(this,a,c)}),a})}}}};function x2(r,t,n){const s=Kr.get(r);t.dataReceived=!0,t.rawValue=n,s.sensorStates.every(({dataReceived:c})=>c)&&(r.emit("data",r.raw),s.autoCalibrate&&u1(s.calibration,r.raw),r.isCalibrated&&(r.emit("calibratedData",r.values),r.emit("line",r.line)),s.sensorStates.forEach(c=>{c.dataReceived=!1}))}function u1(r,t){t.forEach((n,s)=>{(r.min[s]===void 0||n<r.min[s])&&(r.min[s]=n),(r.max[s]===void 0||n>r.max[s])&&(r.max[s]=n)})}function Sp(r,t){return r&&r.max&&r.max.length===t.length&&r.min&&r.min.length===t.length}function m2(r){return r.raw.map((t,n)=>wp.constrain(wp.scale(t,r.calibration.min[n],r.calibration.max[n],th,Eo),th,Eo))}function c1(r){return(r.sensors.length-1)*Eo}function v2(r,t){const n=Kr.get(r);let s=!1,a=0,c=0;if(t=!!t,r.values.forEach((h,p)=>{h=t?Eo-h:h,h>d2&&(s=!0),h>p2&&(a+=h*p*Eo,c+=h)}),!s){const h=c1(r)+1,p=h/2;return n.lastLine<p?0:h}return n.lastLine=Math.floor(a/c)}class y2 extends c2{constructor(t){super(),Dc.Component.call(this,t=Dc.Options(t)),Dc.Controller.call(this,g2,t);const{autoCalibrate:n=!1,freq:s=25}=t,a={autoCalibrate:n,freq:s,lastLine:0,isOn:!1,calibration:{min:[],max:[]}};Kr.set(this,a),typeof this.initialize=="function"&&this.initialize(t),Object.defineProperties(this,{isOn:{get(){return a.emitter.isOn}},isCalibrated:{get(){return Sp(this.calibration,this.sensors)}},isOnLine:{get(){const c=this.line;return c>th&&c<c1(this)}},sensors:{get(){return a.sensorStates.map(({sensor:c})=>c)}},calibration:{get(){return a.calibration}},raw:{get(){return a.sensorStates.map(({rawValue:c})=>c)}},values:{get(){return this.isCalibrated?m2(this):this.raw}},line:{get(){return this.isCalibrated?v2(this):0}}})}enable(){return Kr.get(this).emitter.on(),this}disable(){return Kr.get(this).emitter.off(),this}calibrate(){return this.once("data",t=>{u1(Kr.get(this).calibration,t),this.emit("calibrated")}),this}calibrateUntil(t){const n=()=>{this.calibrate(),this.once("calibrated",()=>{t()||n()})};return n(),this}loadCalibration(t){if(!Sp(t,this.sensors))throw new Error("Calibration data not properly set: {min: [], max: []}");return Kr.get(this).calibration=t,this}}var E2=y2,w2={};const ih=ot(),h1=pi,S2=ih.Pins,so=new Map;class bo{constructor(t){const n=typeof t=="object"?t.pin:t;ih.Component.call(this,t=ih.Options(t)),t.type=t.type||"NO";const s={isInverted:t.type==="NC",isClosed:!1,value:null};so.set(this,s),Object.defineProperties(this,{value:{get(){return Number(this.isClosed)}},type:{get(){return s.isInverted?"NC":"NO"}},isClosed:{get(){return s.isClosed}}}),S2.isFirmata(this)&&typeof n=="string"&&n[0]==="A"&&(this.pin=this.io.analogPins[+n.slice(1)],this.io.pinMode(this.pin,this.io.MODES.OUTPUT))}close(){const t=so.get(this);return this.io.digitalWrite(this.pin,t.isInverted?this.io.LOW:this.io.HIGH),t.isClosed=!0,this}open(){const t=so.get(this);return this.io.digitalWrite(this.pin,t.isInverted?this.io.HIGH:this.io.LOW),t.isClosed=!1,this}toggle(){return so.get(this).isClosed?this.open():this.close(),this}}class f1 extends h1{constructor(t){super(t)}get type(){return bo}}h1.installMethodForwarding(f1.prototype,bo.prototype);bo.Collection=f1;w2.IS_TEST_MODE&&(bo.purge=()=>{so.clear()});var R2=bo,T2={};const fo=ot(),A2=fo.Pins,b2=Zr(),d1=pi,C2=Ct,Hl=Et,Yr=gs,as=new Map,zl={PCA9685:{initialize:{value({address:r,pwmRange:t,frequency:n,pin:s}){const a=as.get(this);this.address=r||64,this.pwmRange=t||[450,1850],this.frequency=n||50,a.expander=b2.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),this.pin=a.expander.normalize(s)}},update:{writable:!0,value(r){as.get(this).expander.servoWrite(this.pin,r)}}},Standard:{initialize:{value({debug:r,pwmRange:t}){r&&!this.board.pins.isServo(this.pin)&&fo.Pins.Error({pin:this.pin,type:"PWM",via:"Servo"}),Array.isArray(t)?this.io.servoConfig(this.pin,t[0],t[1]):this.io.pinMode(this.pin,this.mode)}},update:{writable:!0,value(r){if(this.last&&this.last.degrees===r)return this;let t=Hl.map(r,this.degreeRange[0],this.degreeRange[1],this.pwmRange[0],this.pwmRange[1]);t|=0,this.io.servoWrite(this.pin,t)}}}};zl.DEFAULT=zl.Standard;class $i extends C2{constructor(t){super();const n=[];let s=typeof t=="object"?t.pin:t;fo.Component.call(this,t=fo.Options(t)),this.degreeRange=t.degreeRange||[0,180],this.pwmRange=t.pwmRange||[600,2400],this.range=t.range||this.degreeRange,this.deadband=t.deadband||[90,90],this.fps=t.fps||100,this.offset=t.offset||0,this.range=t.range||[0-this.offset,180-this.offset],this.mode=this.io.MODES.SERVO,this.interval=null,this.value=null,this.type=t.type||"standard",t.isInverted&&console.warn("The 'isInverted' property has been renamed 'invert'"),this.invert=t.isInverted||t.invert||!1,typeof t.controller>"u"&&A2.isFirmata(this)&&(typeof s=="string"&&s.length>1&&s[0]==="A"&&(s=this.io.analogPins[+s.slice(1)]),s=+s,!Number.isNaN(s)&&this.pin!==s&&(this.pin=s)),fo.Controller.call(this,zl,t),as.set(this,{history:n}),Object.defineProperties(this,{history:{get(){return n.slice(-5)}},last:{get(){return n[n.length-1]}},position:{get(){return n.length?n[n.length-1].degrees:-1}}}),this.initialize(t),typeof t.startAt<"u"?(this.startAt=t.startAt,this.to(t.startAt)):this.startAt=(this.degreeRange[1]-this.degreeRange[0])/2+this.degreeRange[0],t.center&&this.center(),t.type==="continuous"&&this.stop()}to(t,n,s){const a=as.get(this),c={};if(typeof t=="object")Object.assign(c,t),c.duration=t.duration||t.interval||1e3,c.cuePoints=t.cuePoints||[0,1],c.keyFrames=t.keyFrames||[null,{value:typeof t.degrees=="number"?t.degrees:this.startAt}],c.oncomplete=()=>{Ce.nextTick(()=>{typeof t.oncomplete=="function"&&t.oncomplete(),this.emit("move:complete")})},a.isRunning=!0,a.animation=a.animation||new Yr(this),a.animation.enqueue(c);else{const h=t;t=Hl.constrain(t,this.range[0],this.range[1]),typeof n<"u"?(c.duration=n,c.keyFrames=[null,{degrees:t}],c.fps=s||this.fps,this.to(c)):(this.value=t,t+=this.offset,this.invert&&(t=Hl.map(t,this.degreeRange[0],this.degreeRange[1],this.degreeRange[1],this.degreeRange[0])),this.update(t),a.history.length>5&&a.history.shift(),a.history.push({timestamp:Date.now(),degrees:t,target:h}))}return this}step(t,n){return this.to(this.last.target+t,n)}move(t,n){return console.warn("Servo.prototype.move has been renamed to Servo.prototype.to"),this.to(t,n)}min(t,n){return this.to(this.range[0],t,n)}max(t,n){return this.to(this.range[1],t,n)}center(t,n){return this.to(Math.abs((this.range[0]+this.range[1])/2),t,n)}home(){return this.to(this.startAt)}sweep(t){const n={keyFrames:[{value:this.range[0]},{value:this.range[1]}],metronomic:!0,loop:!0,easing:"inOutSine"};return Array.isArray(t)?n.keyFrames=Rp(t):typeof t=="object"&&t!==null&&(Object.assign(n,t),Array.isArray(n.range)&&(n.keyFrames=Rp(n.range))),this.to(n)}stop(){const t=as.get(this);return t.animation&&t.animation.stop(),this.type==="continuous"?this.to(this.deadband.reduce((n,s)=>Math.round((n+s)/2))):clearInterval(this.interval),this}}$i.prototype[Yr.normalize]=function(r){const t=this.last?this.last.target:this.startAt;return r[0]===null&&(r[0]={value:t}),typeof r[0]=="number"&&(r[0]={value:t+r[0]}),r.map(n=>(n!==null&&(typeof n=="number"?n={step:n}:(typeof n.degrees=="number"&&(n.value=n.degrees,delete n.degrees),typeof n.copyDegrees=="number"&&(n.copyValue=n.copyDegrees,delete n.copyDegrees)),n.easing||(n.easing="linear")),n))};$i.prototype[Yr.render]=function(r){return this.to(r[0])};function Rp(r){return r.map(t=>({value:t}))}["clockWise","cw","counterClockwise","ccw"].forEach(r=>{$i.prototype[r]=function(t){let n;return t=t===void 0?1:t,this.type!=="continuous"&&this.board.error("Servo",`Servo.prototype.${r} is only available for continuous servos`),r==="cw"||r==="clockWise"?n=[t,0,1,this.deadband[1]+1,this.range[1]]:n=[t,0,1,this.deadband[0]-1,this.range[0]],this.to(Hl.scale.apply(null,n)|0)}});$i.Continuous=class extends $i{constructor(r){const t={};typeof r=="object"?Object.assign(t,r):t.pin=r,t.type="continuous",super(t)}};class ea extends d1{constructor(t){super(t)}get type(){return $i}[Yr.normalize](t){return t.map((n,s)=>{if(n!==null&&Array.isArray(n)){let a=this[s];a instanceof ea&&(a=a[0]);const c=a.last?a.last.target:a.startAt;return n[0]===null&&(n[0]={value:c}),Array.isArray(n)&&n[0]===null&&(t[s][0]={value:c}),this[s][Yr.normalize](n)}return n&&typeof n.degrees=="number"&&(n.value=n.degrees,delete n.degrees),n})}[Yr.render](t){return this.each((n,s)=>n.to(t[s]))}}d1.installMethodForwarding(ea.prototype,$i.prototype,{skip:[Yr.normalize,Yr.render]});$i.Collection=ea;T2.IS_TEST_MODE&&($i.Controllers=zl,$i.purge=()=>{as.clear()});var O2=$i;const Tp=ot(),_2=Et,oo=new Map,ml=new Map,Ap=_2.TAU,bp=6;class xn{constructor(t){this.rpm=180,this.direction=-1,this.speed=0,this.accel=0,this.decel=0,this.stepper=t}move(t,n,s,a,c,h){this.stepper.io.stepperStep.apply(this.stepper.io,[this.stepper.id,n,t,s,a,c,h])}}xn.PROPERTIES=["rpm","direction","speed","accel","decel"];xn.DEFAULTS=[180,-1,0,0,0];function I2(r){let t=0;for(r=r.slice();r.length;)this[`motor${++t}`]=r.shift()}function M2({pins:r,MODES:t}){return r.some(({supportedModes:n})=>n.includes(t.STEPPER))}class zi{constructor(t){const n=[];let s;if(Tp.Component.call(this,t=Tp.Options(t)),!M2(this.io))throw new Error("Stepper is not supported");if(!t.pins)throw new Error("Stepper requires a `pins` object or array");if(!t.stepsPerRev)throw new Error("Stepper requires a `stepsPerRev` number value");if(ml.set(this.board,ml.get(this.board)||[]),this.id=ml.get(this.board).length,this.id>=bp)throw new Error(`Stepper cannot exceed max steppers (${bp})`);if(Array.isArray(this.pins)){if(this.pins.length===2&&!t.type)throw new Error("Stepper requires a `type` number value (DRIVER, TWO_WIRE)");t.type===zi.TYPE.DRIVER?this.pins={step:this.pins[0],dir:this.pins[1]}:this.pins=new I2(this.pins)}if(t.type||(this.pins.dir?t.type=zi.TYPE.DRIVER:this.pins.motor3?t.type=zi.TYPE.FOUR_WIRE:t.type=zi.TYPE.TWO_WIRE),n.push(this.id,t.type,t.stepsPerRev),t.type===zi.TYPE.DRIVER){if(typeof this.pins.dir>"u"||typeof this.pins.step>"u")throw new Error("Stepper.TYPE.DRIVER expects: `pins.dir`, `pins.step`");n.push(this.pins.dir,this.pins.step)}if(t.type===zi.TYPE.TWO_WIRE){if(typeof this.pins.motor1>"u"||typeof this.pins.motor2>"u")throw new Error("Stepper.TYPE.TWO_WIRE expects: `pins.motor1`, `pins.motor2`");n.push(this.pins.motor1,this.pins.motor2)}if(t.type===zi.TYPE.FOUR_WIRE){if(typeof this.pins.motor1>"u"||typeof this.pins.motor2>"u"||typeof this.pins.motor3>"u"||typeof this.pins.motor4>"u")throw new Error("Stepper.TYPE.FOUR_WIRE expects: `pins.motor1`, `pins.motor2`, `pins.motor3`, `pins.motor4`");n.push(this.pins.motor1,this.pins.motor2,this.pins.motor3,this.pins.motor4)}n.slice(3).forEach(a=>{this.io.pinMode(a,this.io.MODES.STEPPER)}),this.io.stepperConfig.apply(this.io,n),ml.get(this.board).push(this),s=xn.PROPERTIES.reduce((a,c,h)=>(a[c]=typeof t[c]<"u"?t[c]:xn.DEFAULTS[h],a),{isRunning:!1,type:t.type,pins:this.pins}),oo.set(this,s),Object.defineProperties(this,{type:{get(){return s.type}},pins:{get(){return s.pins}}})}rpm(t){const n=oo.get(this);return typeof t>"u"?n.rpm:(n.rpm=t,n.speed=Math.round(t*Ap*100/60),this)}speed(t){const n=oo.get(this);return typeof t>"u"?n.speed:(n.speed=t,n.rpm=Math.round(t/Ap/100*60),this)}ccw(){return this.direction(0)}cw(){return this.direction(1)}step(t,n){let s,a,c,h,p;s=typeof t=="object"?t.steps||0:Math.floor(t),a=new xn(this),c=oo.get(this),h=[],p=!0;function x(b){p=!1,n&&n(b)}return h.push(s),typeof t=="object"&&xn.PROPERTIES.forEach(b=>{typeof t[b]<"u"&&this[b](t[b])}),c.speed||(this.rpm(c.rpm),a.speed=this.speed()),xn.PROPERTIES.slice(1).forEach(b=>{h.push(a[b]=this[b]())}),s===0&&x(new Error("Must set a number of steps when calling `step()`")),a.direction<0&&x(new Error("Must set a direction before calling `step()`")),p&&(c.isRunning=!0,h.push(b=>{c.isRunning=!1,n(null,b)}),a.move.apply(a,h)),this}}Object.defineProperties(zi,{TYPE:{value:Object.freeze({DRIVER:1,TWO_WIRE:2,FOUR_WIRE:4})},RUNSTATE:{value:Object.freeze({STOP:0,ACCEL:1,DECEL:2,RUN:3})},DIRECTION:{value:Object.freeze({CCW:0,CW:1})}});["direction","accel","decel"].forEach(r=>{zi.prototype[r]=function(t){const n=oo.get(this);return typeof t>"u"?n[r]:(n[r]=t,this)}});var D2=zi;const Cp=ot(),p1=pi,L2=Ct,P2=Et;class ta extends L2{constructor(t){super(),Cp.Component.call(this,t=Cp.Options(t));const n=P2.debounce(x=>this.emit(x,this),5);t.type=t.type||"NO";const s=t.type==="NO";let a=null,c=typeof t.invert<"u"?t.invert:s||!1,h=1,p=0;c&&(h^=1,p^=1),this.io.pinMode(this.pin,this.io.MODES.INPUT),s&&this.io.digitalWrite(this.pin,this.io.HIGH),this.io.digitalRead(this.pin,x=>{a=x,n.call(this,this.isOpen?"open":"close")}),Object.defineProperties(this,{value:{get(){return Number(this.isOpen)}},invert:{get(){return c},set(x){c=x,h=c?0:1,p=c?1:0}},closeValue:{get(){return h},set(x){h=x,p=x^1}},openValue:{get(){return p},set(x){p=x,h=x^1}},isOpen:{get(){return a===p}},isClosed:{get(){return a===h}}})}}class g1 extends p1.Emitter{constructor(t){super(t)}get type(){return ta}}p1.installMethodForwarding(g1.prototype,ta.prototype);ta.Collection=g1;var N2=ta;sh.exports;(function(r){r.exports={Accelerometer:Mg(),Animation:gs,Altimeter:Tg(),Barometer:Ag(),Board:ot(),Button:Dy,Color:By,Collection:pi,Compass:Og(),ESC:Hy,Expander:Zr(),Fn:Et,GPS:Ky,Gyro:bg(),Hygrometer:Cg(),SIP:Ue(),Keypad:eE,LCD:EE,Led:Zg,LedControl:_h,Light:BE,Joystick:UE,Motion:$E,Motor:e2,Orientation:_g(),Piezo:n2,Pin:wh,Proximity:u2,ReflectanceArray:E2,Relay:R2,Repl:Qp,Sensor:Ih,Servo:O2,ShiftRegister:i1,Stepper:D2,Switch:N2,Thermometer:Ig()},r.exports.Board.Virtual=function(t){let n;return t instanceof r.exports.Expander?n={io:t}:n=t,new r.exports.Board(Object.assign({},{repl:!1,debug:!1,sigint:!1},n))},r.exports.Sensor.Analog=r.exports.Sensor,r.exports.Sensor.Digital=function(t){let n,s="digital";return typeof t=="number"||typeof t=="string"?(n=t,t={type:s,pin:n}):t.type=s,new r.exports.Sensor(t)},r.exports.IMU=r.exports.SIP,r.exports.Multi=r.exports.SIP,r.exports.Luxmeter=r.exports.Light,r.exports.Magnetometer=r.exports.Compass,r.exports.Ping=r.exports.Proximity,r.exports.Sonar=r.exports.Proximity,r.exports.Boards=r.exports.Board.Collection,r.exports.Buttons=r.exports.Button.Collection,r.exports.ESCs=r.exports.ESC.Collection,r.exports.Leds=r.exports.Led.Collection,r.exports.Led.RGBs=r.exports.Led.RGB.Collection,r.exports.Motors=r.exports.Motor.Collection,r.exports.Pins=r.exports.Pin.Collection,r.exports.Relays=r.exports.Relay.Collection,r.exports.Sensors=r.exports.Sensor.Collection,r.exports.Servos=r.exports.Servo.Collection,r.exports.Switches=r.exports.Switch.Collection,r.exports.Touchpad=r.exports.Keypad})(sh);var x1=sh.exports;const B2=$l(x1);rh.five=B2;function F2(r){console.log("handleIOReady");const t=rh.board=new x1.Board({io:r,repl:!1});t.on("message",n=>{console.log("board message: ",n)}),t.on("ready",()=>{console.log("johnny five in browser !!!!")}),t.on("error",console.error)}var G2=Sg();const{EventEmitter:W2}=Bi;class U2 extends W2{constructor(t,n){super(n),this.options=n||{},this.browser=!0,this.path=this.options.path,this.isOpen=!1,this.port=null,this.writer=null,this.reader=null,this.baudRate=this.options.baudRate,this.requestOptions=this.options.requestOptions||{},this.options.autoOpen&&this.open()}list(t){return navigator.serial.getPorts().then(n=>{if(t)return t(null,n)}).catch(n=>{if(t)return t(n)})}open(t){window.navigator.serial.requestPort(this.requestOptions).then(n=>{if(this.port=n,!this.isOpen)return this.port.open({baudRate:this.baudRate||57600})}).then(()=>this.writer=this.port.writable.getWriter()).then(()=>this.reader=this.port.readable.getReader()).then(async()=>{for(this.emit("open"),this.isOpen=!0,t(null);this.port.readable.locked;)try{const{value:n,done:s}=await this.reader.read();if(s)break;this.emit("data",At.from(n))}catch(n){console.error(n)}}).catch(n=>{t(n)})}async close(t){try{await this.reader.releaseLock(),await this.writer.releaseLock(),await this.port.close(),this.isOpen=!1}catch(n){if(t)return t(n);throw n}t&&t(null)}async set(t={},n){try{const s={};Object.prototype.hasOwnProperty.call(t,"dtr")&&(s.dataTerminalReady=t.dtr),Object.prototype.hasOwnProperty.call(t,"rts")&&(s.requestToSend=t.rts),Object.prototype.hasOwnProperty.call(t,"brk")&&(s.break=t.brk),Object.keys(s).length>0&&await this.port.setSignals(s)}catch(s){if(n)return n(s);throw s}if(n)return n(null)}write(t,n){if(this.writer.write(t),n)return n(null)}async read(t){let n;try{n=await this.reader.read()}catch(s){if(t)return t(s);throw s}t&&t(null,n)}flush(t){if(console.warn("flush method is a NOP right now"),t)return t(null)}drain(t){if(console.warn("drain method is a NOP right now"),t)return t(null)}}var k2=U2;const H2=$l(k2),z2=r=>{console.log("serialport callback"),r!=null&&console.error("serialError: ",r)},Op=new H2(null,{autoOpen:!1,callback:z2}),$2=r=>{try{Op.open(V2);const t=new G2.Firmata(Op,j2);t.once("ready",r(t))}catch(t){console.log("error: ",t)}};function j2(r){console.log("firmata callback"),r!=null&&console.log("argF: ",r)}const V2=r=>{console.log("serialport callback2"),r!=null&&console.error("serialError2: ",r)};function q2(r){console.log("handleStart");try{$2(r)}catch(t){console.log(t)}}function K2(){q2(F2)}const m1=new nh;m1.add(window.location,"reload");m1.add({init:K2},"init");var Y2=Ce.hrtime||Z2,Qn=Gt.performance||{},X2=Qn.now||Qn.mozNow||Qn.msNow||Qn.oNow||Qn.webkitNow||function(){return new Date().getTime()};function Z2(r){var t=X2.call(Qn)*.001,n=Math.floor(t),s=Math.floor(t%1*1e9);return r&&(n=n-r[0],s=s-r[1],s<0&&(n--,s+=1e9)),[n,s]}const J2=$l(Y2);Ce.hrtime=J2;var v1={exports:{}};(function(r,t){var n=n||{};n.scope={},n.findInternal=function(s,a,c){s instanceof String&&(s=String(s));for(var h=s.length,p=0;p<h;p++){var x=s[p];if(a.call(c,x,p,s))return{i:p,v:x}}return{i:-1,v:void 0}},n.ASSUME_ES5=!1,n.ASSUME_NO_NATIVE_MAP=!1,n.ASSUME_NO_NATIVE_SET=!1,n.SIMPLE_FROUND_POLYFILL=!1,n.ISOLATE_POLYFILLS=!1,n.FORCE_POLYFILL_PROMISE=!1,n.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,n.defineProperty=n.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(s,a,c){return s==Array.prototype||s==Object.prototype||(s[a]=c.value),s},n.getGlobal=function(s){s=[typeof globalThis=="object"&&globalThis,s,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gt=="object"&&Gt];for(var a=0;a<s.length;++a){var c=s[a];if(c&&c.Math==Math)return c}throw Error("Cannot find global object")},n.global=n.getGlobal(Gt),n.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",n.TRUST_ES6_POLYFILLS=!n.ISOLATE_POLYFILLS||n.IS_SYMBOL_NATIVE,n.polyfills={},n.propertyToPolyfillSymbol={},n.POLYFILL_PREFIX="$jscp$",n.polyfill=function(s,a,c,h){a&&(n.ISOLATE_POLYFILLS?n.polyfillIsolated(s,a,c,h):n.polyfillUnisolated(s,a,c,h))},n.polyfillUnisolated=function(s,a,c,h){for(c=n.global,s=s.split("."),h=0;h<s.length-1;h++){var p=s[h];if(!(p in c))return;c=c[p]}s=s[s.length-1],h=c[s],a=a(h),a!=h&&a!=null&&n.defineProperty(c,s,{configurable:!0,writable:!0,value:a})},n.polyfillIsolated=function(s,a,c,h){var p=s.split(".");s=p.length===1,h=p[0],h=!s&&h in n.polyfills?n.polyfills:n.global;for(var x=0;x<p.length-1;x++){var b=p[x];if(!(b in h))return;h=h[b]}p=p[p.length-1],c=n.IS_SYMBOL_NATIVE&&c==="es6"?h[p]:null,a=a(c),a!=null&&(s?n.defineProperty(n.polyfills,p,{configurable:!0,writable:!0,value:a}):a!==c&&(n.propertyToPolyfillSymbol[p]===void 0&&(c=1e9*Math.random()>>>0,n.propertyToPolyfillSymbol[p]=n.IS_SYMBOL_NATIVE?n.global.Symbol(p):n.POLYFILL_PREFIX+c+"$"+p),n.defineProperty(h,n.propertyToPolyfillSymbol[p],{configurable:!0,writable:!0,value:a})))},n.polyfill("Array.prototype.find",function(s){return s||function(a,c){return n.findInternal(this,a,c).v}},"es6","es3"),function(s,a){r.exports=a()}(Gt,function(){function s(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function a(e){for(var i=e.childNodes.length;0<i;--i)e.removeChild(e.firstChild);return e}function c(e,i){return a(e).appendChild(i)}function h(e,i,l,o){if(e=document.createElement(e),l&&(e.className=l),o&&(e.style.cssText=o),typeof i=="string")e.appendChild(document.createTextNode(i));else if(i)for(l=0;l<i.length;++l)e.appendChild(i[l]);return e}function p(e,i,l,o){return e=h(e,i,l,o),e.setAttribute("role","presentation"),e}function x(e,i){if(i.nodeType==3&&(i=i.parentNode),e.contains)return e.contains(i);do if(i.nodeType==11&&(i=i.host),i==e)return!0;while(i=i.parentNode)}function b(e){try{var i=e.activeElement}catch{i=e.body||null}for(;i&&i.shadowRoot&&i.shadowRoot.activeElement;)i=i.shadowRoot.activeElement;return i}function y(e,i){var l=e.className;s(i).test(l)||(e.className+=(l?" ":"")+i)}function A(e,i){e=e.split(" ");for(var l=0;l<e.length;l++)e[l]&&!s(e[l]).test(i)&&(i+=" "+e[l]);return i}function d(e){return e.display.wrapper.ownerDocument}function S(e){var i=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,i)}}function R(e,i,l){i||(i={});for(var o in e)!e.hasOwnProperty(o)||l===!1&&i.hasOwnProperty(o)||(i[o]=e[o]);return i}function M(e,i,l,o,u){for(i==null&&(i=e.search(/[^\s\u00a0]/),i==-1&&(i=e.length)),o=o||0,u=u||0;;){var f=e.indexOf("	",o);if(0>f||f>=i)return u+(i-o);u+=f-o,u+=l-u%l,o=f+1}}function T(e,i){for(var l=0;l<e.length;++l)if(e[l]==i)return l;return-1}function w(e,i,l){for(var o=0,u=0;;){var f=e.indexOf("	",o);f==-1&&(f=e.length);var v=f-o;if(f==e.length||u+v>=i)return o+Math.min(v,i-u);if(u+=f-o,u+=l-u%l,o=f+1,u>=i)return o}}function C(e){for(;Qo.length<=e;)Qo.push(O(Qo)+" ");return Qo[e]}function O(e){return e[e.length-1]}function H(e,i){for(var l=[],o=0;o<e.length;o++)l[o]=i(e[o],o);return l}function F(e,i,l){for(var o=0,u=l(i);o<e.length&&l(e[o])<=u;)o++;e.splice(o,0,i)}function q(){}function ie(e,i){return Object.create?e=Object.create(e):(q.prototype=e,e=new q),i&&R(i,e),e}function G(e){return/\w/.test(e)||""<e&&(e.toUpperCase()!=e.toLowerCase()||tx.test(e))}function $(e,i){return i?-1<i.source.indexOf("\\w")&&G(e)?!0:i.test(e):G(e)}function K(e){for(var i in e)if(e.hasOwnProperty(i)&&e[i])return!1;return!0}function Y(e){return 768<=e.charCodeAt(0)&&ix.test(e)}function Q(e,i,l){for(;(0>l?0<i:i<e.length)&&Y(e.charAt(i));)i+=l;return i}function se(e,i,l){for(var o=i>l?-1:1;;){if(i==l)return i;var u=(i+l)/2;if(u=0>o?Math.ceil(u):Math.floor(u),u==i)return e(u)?i:l;e(u)?l=u:i=u+o}}function ae(e,i,l,o){if(!e)return o(i,l,"ltr",0);for(var u=!1,f=0;f<e.length;++f){var v=e[f];(v.from<l&&v.to>i||i==l&&v.to==i)&&(o(Math.max(v.from,i),Math.min(v.to,l),v.level==1?"rtl":"ltr",f),u=!0)}u||o(i,l,"ltr")}function ve(e,i,l){var o;Hs=null;for(var u=0;u<e.length;++u){var f=e[u];if(f.from<i&&f.to>i)return u;f.to==i&&(f.from!=f.to&&l=="before"?o=u:Hs=u),f.from==i&&(f.from!=f.to&&l!="before"?o=u:Hs=u)}return o??Hs}function we(e,i){var l=e.order;return l==null&&(l=e.order=rx(e.text,i)),l}function le(e,i,l){if(e.removeEventListener)e.removeEventListener(i,l,!1);else if(e.detachEvent)e.detachEvent("on"+i,l);else{var o=(e=e._handlers)&&e[i];o&&(l=T(o,l),-1<l&&(e[i]=o.slice(0,l).concat(o.slice(l+1))))}}function oe(e,i){var l=e._handlers&&e._handlers[i]||el;if(l.length)for(var o=Array.prototype.slice.call(arguments,2),u=0;u<l.length;++u)l[u].apply(null,o)}function Re(e,i,l){return typeof i=="string"&&(i={type:i,preventDefault:function(){this.defaultPrevented=!0}}),oe(e,l||i.type,e,i),ue(i)||i.codemirrorIgnore}function ce(e){var i=e._handlers&&e._handlers.cursorActivity;if(i){e=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]);for(var l=0;l<i.length;++l)T(e,i[l])==-1&&e.push(i[l])}}function Oe(e,i){return 0<(e._handlers&&e._handlers[i]||el).length}function Me(e){e.prototype.on=function(i,l){Ve(this,i,l)},e.prototype.off=function(i,l){le(this,i,l)}}function X(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function ne(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function ue(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==0}function V(e){X(e),ne(e)}function J(e){var i=e.which;return i==null&&(e.button&1?i=1:e.button&2?i=3:e.button&4&&(i=2)),Di&&e.ctrlKey&&i==1&&(i=3),i}function he(e,i){2<arguments.length&&(i.dependencies=Array.prototype.slice.call(arguments,2)),Aa[e]=i}function ge(e){if(typeof e=="string"&&zn.hasOwnProperty(e))e=zn[e];else if(e&&typeof e.name=="string"&&zn.hasOwnProperty(e.name)){var i=zn[e.name];typeof i=="string"&&(i={name:i}),e=ie(i,e),e.name=i.name}else{if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return ge("application/xml");if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return ge("application/json")}return typeof e=="string"?{name:e}:e||{name:"null"}}function be(e,i){i=ge(i);var l=Aa[i.name];if(!l)return be(e,"text/plain");if(e=l(e,i),$n.hasOwnProperty(i.name)){l=$n[i.name];for(var o in l)l.hasOwnProperty(o)&&(e.hasOwnProperty(o)&&(e["_"+o]=e[o]),e[o]=l[o])}if(e.name=i.name,i.helperType&&(e.helperType=i.helperType),i.modeProps)for(var u in i.modeProps)e[u]=i.modeProps[u];return e}function N(e,i){e=$n.hasOwnProperty(e)?$n[e]:$n[e]={},R(i,e)}function U(e,i){if(i===!0)return i;if(e.copyState)return e.copyState(i);e={};for(var l in i){var o=i[l];o instanceof Array&&(o=o.concat([])),e[l]=o}return e}function me(e,i){for(var l;e.innerMode&&(l=e.innerMode(i),!(!l||l.mode==e));)i=l.state,e=l.mode;return l||{mode:e,state:i}}function _e(e,i,l){return e.startState?e.startState(i,l):!0}function Se(e,i){if(i-=e.first,0>i||i>=e.size)throw Error("There is no line "+(i+e.first)+" in the document.");for(;!e.lines;)for(var l=0;;++l){var o=e.children[l],u=o.chunkSize();if(i<u){e=o;break}i-=u}return e.lines[i]}function Pe(e,i,l){var o=[],u=i.line;return e.iter(i.line,l.line+1,function(f){f=f.text,u==l.line&&(f=f.slice(0,l.ch)),u==i.line&&(f=f.slice(i.ch)),o.push(f),++u}),o}function je(e,i,l){var o=[];return e.iter(i,l,function(u){o.push(u.text)}),o}function Qe(e,i){if(i-=e.height)for(;e;e=e.parent)e.height+=i}function pe(e){if(e.parent==null)return null;var i=e.parent;e=T(i.lines,e);for(var l=i.parent;l;i=l,l=l.parent)for(var o=0;l.children[o]!=i;++o)e+=l.children[o].chunkSize();return e+i.first}function gt(e,i){var l=e.first;e:do{for(var o=0;o<e.children.length;++o){var u=e.children[o],f=u.height;if(i<f){e=u;continue e}i-=f,l+=u.chunkSize()}return l}while(!e.lines);for(o=0;o<e.lines.length&&(u=e.lines[o].height,!(i<u));++o)i-=u;return l+o}function wt(e,i){return i>=e.first&&i<e.first+e.size}function He(e,i){return String(e.lineNumberFormatter(i+e.firstLineNumber))}function fe(e,i,l){if(l===void 0&&(l=null),!(this instanceof fe))return new fe(e,i,l);this.line=e,this.ch=i,this.sticky=l}function Le(e,i){return e.line-i.line||e.ch-i.ch}function rt(e,i){return e.sticky==i.sticky&&Le(e,i)==0}function Lt(e){return fe(e.line,e.ch)}function Wt(e,i){return 0>Le(e,i)?i:e}function ht(e,i){return 0>Le(e,i)?e:i}function Ne(e,i){if(i.line<e.first)return fe(e.first,0);var l=e.first+e.size-1;return i.line>l?fe(l,Se(e,l).text.length):(e=Se(e,i.line).text.length,l=i.ch,i=l==null||l>e?fe(i.line,e):0>l?fe(i.line,0):i,i)}function B(e,i){for(var l=[],o=0;o<i.length;o++)l[o]=Ne(e,i[o]);return l}function m(e,i,l,o){var u=[e.state.modeGen],f={};Fe(e,i.text,e.doc.mode,l,function(_,P){return u.push(_,P)},f,o);var v=l.state;o=function(_){l.baseTokens=u;var P=e.state.overlays[_],W=1,Z=0;l.state=!0,Fe(e,i.text,P.mode,l,function(ee,te){for(var ye=W;Z<ee;){var De=u[W];De>ee&&u.splice(W,1,ee,u[W+1],De),W+=2,Z=Math.min(ee,De)}if(te)if(P.opaque)u.splice(ye,W-ye,ee,"overlay "+te),W=ye+2;else for(;ye<W;ye+=2)ee=u[ye+1],u[ye+1]=(ee?ee+" ":"")+"overlay "+te},f),l.state=v,l.baseTokens=null,l.baseTokenPos=1};for(var E=0;E<e.state.overlays.length;++E)o(E);return{styles:u,classes:f.bgClass||f.textClass?f:null}}function g(e,i,l){if(!i.styles||i.styles[0]!=e.state.modeGen){var o=I(e,pe(i)),u=i.text.length>e.options.maxHighlightLength&&U(e.doc.mode,o.state),f=m(e,i,o);u&&(o.state=u),i.stateAfter=o.save(!u),i.styles=f.styles,f.classes?i.styleClasses=f.classes:i.styleClasses&&(i.styleClasses=null),l===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return i.styles}function I(e,i,l){var o=e.doc,u=e.display;if(!o.mode.startState)return new ir(o,!0,i);var f=Xe(e,i,l),v=f>o.first&&Se(o,f-1).stateAfter,E=v?ir.fromSaved(o,v,f):new ir(o,_e(o.mode),f);return o.iter(f,i,function(_){L(e,_.text,E);var P=E.line;_.stateAfter=P==i-1||P%5==0||P>=u.viewFrom&&P<u.viewTo?E.save():null,E.nextLine()}),l&&(o.modeFrontier=E.line),E}function L(e,i,l,o){var u=e.doc.mode;for(e=new Ut(i,e.options.tabSize,l),e.start=e.pos=o||0,i==""&&j(u,l.state);!e.eol();)re(u,e,l.state),e.start=e.pos}function j(e,i){if(e.blankLine)return e.blankLine(i);if(e.innerMode&&(e=me(e,i),e.mode.blankLine))return e.mode.blankLine(e.state)}function re(e,i,l,o){for(var u=0;10>u;u++){o&&(o[0]=me(e,l).mode);var f=e.token(i,l);if(i.pos>i.start)return f}throw Error("Mode "+e.name+" failed to advance stream.")}function Te(e,i,l,o){var u=e.doc,f=u.mode;i=Ne(u,i);var v=Se(u,i.line);l=I(e,i.line,l),e=new Ut(v.text,e.options.tabSize,l);var E;for(o&&(E=[]);(o||e.pos<i.ch)&&!e.eol();){e.start=e.pos;var _=re(f,e,l.state);o&&E.push(new U0(e,_,U(u.mode,l.state)))}return o?E:new U0(e,_,l.state)}function Be(e,i){if(e)for(;;){var l=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!l)break;e=e.slice(0,l.index)+e.slice(l.index+l[0].length);var o=l[1]?"bgClass":"textClass";i[o]==null?i[o]=l[2]:new RegExp("(?:^|\\s)"+l[2]+"(?:$|\\s)").test(i[o])||(i[o]+=" "+l[2])}return e}function Fe(e,i,l,o,u,f,v){var E=l.flattenSpans;E==null&&(E=e.options.flattenSpans);var _=0,P=null,W=new Ut(i,e.options.tabSize,o),Z=e.options.addModeClass&&[null];for(i==""&&Be(j(l,o.state),f);!W.eol();){if(W.pos>e.options.maxHighlightLength){E=!1,v&&L(e,i,o,W.pos),W.pos=i.length;var ee=null}else ee=Be(re(l,W,o.state,Z),f);if(Z){var te=Z[0].name;te&&(ee="m-"+(ee?te+" "+ee:te))}if(!E||P!=ee){for(;_<W.start;)_=Math.min(W.start,_+5e3),u(_,P);P=ee}W.start=W.pos}for(;_<W.pos;)e=Math.min(W.pos,_+5e3),u(e,P),_=e}function Xe(e,i,l){for(var o,u,f=e.doc,v=l?-1:i-(e.doc.mode.innerMode?1e3:100);i>v;--i){if(i<=f.first)return f.first;var E=Se(f,i-1),_=E.stateAfter;if(_&&(!l||i+(_ instanceof tl?_.lookAhead:0)<=f.modeFrontier))return i;E=M(E.text,null,e.options.tabSize),(u==null||o>E)&&(u=i-1,o=E)}return u}function $e(e,i){if(e.modeFrontier=Math.min(e.modeFrontier,i),!(e.highlightFrontier<i-10)){for(var l=e.first,o=i-1;o>l;o--){var u=Se(e,o).stateAfter;if(u&&(!(u instanceof tl)||o+u.lookAhead<i)){l=o+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,l)}}function tt(e,i,l){this.marker=e,this.from=i,this.to=l}function Pt(e,i){if(e)for(var l=0;l<e.length;++l){var o=e[l];if(o.marker==i)return o}}function ut(e,i){if(i.full)return null;var l=wt(e,i.from.line)&&Se(e,i.from.line).markedSpans,o=wt(e,i.to.line)&&Se(e,i.to.line).markedSpans;if(!l&&!o)return null;e=i.from.ch;var u=i.to.ch,f=Le(i.from,i.to)==0,v;if(l)for(var E=0;E<l.length;++E){var _=l[E],P=_.marker;if(_.from==null||(P.inclusiveLeft?_.from<=e:_.from<e)||!(_.from!=e||P.type!="bookmark"||f&&_.marker.insertLeft)){var W=_.to==null||(P.inclusiveRight?_.to>=e:_.to>e);(v||(v=[])).push(new tt(P,_.from,W?null:_.to))}}l=v;var Z;if(o)for(v=0;v<o.length;++v)E=o[v],_=E.marker,(E.to==null||(_.inclusiveRight?E.to>=u:E.to>u)||E.from==u&&_.type=="bookmark"&&(!f||E.marker.insertLeft))&&(P=E.from==null||(_.inclusiveLeft?E.from<=u:E.from<u),(Z||(Z=[])).push(new tt(_,P?null:E.from-u,E.to==null?null:E.to-u)));if(o=i.text.length==1,u=O(i.text).length+(o?e:0),l)for(f=0;f<l.length;++f)v=l[f],v.to==null&&(E=Pt(Z,v.marker),E?o&&(v.to=E.to==null?null:E.to+u):v.to=e);if(Z)for(e=0;e<Z.length;++e)f=Z[e],f.to!=null&&(f.to+=u),f.from==null?Pt(l,f.marker)||(f.from=u,o&&(l||(l=[])).push(f)):(f.from+=u,o&&(l||(l=[])).push(f));if(l&&(l=ji(l)),Z&&Z!=l&&(Z=ji(Z)),e=[l],!o){i=i.text.length-2;var ee;if(0<i&&l)for(o=0;o<l.length;++o)l[o].to==null&&(ee||(ee=[])).push(new tt(l[o].marker,null,null));for(l=0;l<i;++l)e.push(ee);e.push(Z)}return e}function ji(e){for(var i=0;i<e.length;++i){var l=e[i];l.from!=null&&l.from==l.to&&l.marker.clearWhenEmpty!==!1&&e.splice(i--,1)}return e.length?e:null}function Fi(e,i,l){var o=null;if(e.iter(i.line,l.line+1,function(W){if(W.markedSpans)for(var Z=0;Z<W.markedSpans.length;++Z){var ee=W.markedSpans[Z].marker;!ee.readOnly||o&&T(o,ee)!=-1||(o||(o=[])).push(ee)}}),!o)return null;for(e=[{from:i,to:l}],i=0;i<o.length;++i){l=o[i];for(var u=l.find(0),f=0;f<e.length;++f){var v=e[f];if(!(0>Le(v.to,u.from)||0<Le(v.from,u.to))){var E=[f,1],_=Le(v.from,u.from),P=Le(v.to,u.to);(0>_||!l.inclusiveLeft&&!_)&&E.push({from:v.from,to:u.from}),(0<P||!l.inclusiveRight&&!P)&&E.push({from:u.to,to:v.to}),e.splice.apply(e,E),f+=E.length-3}}}return e}function Rn(e){var i=e.markedSpans;if(i){for(var l=0;l<i.length;++l)i[l].marker.detachLine(e);e.markedSpans=null}}function Ir(e,i){if(i){for(var l=0;l<i.length;++l)i[l].marker.attachLine(e);e.markedSpans=i}}function Gi(e,i){var l=e.lines.length-i.lines.length;if(l!=0)return l;l=e.find();var o=i.find(),u=Le(l.from,o.from)||(e.inclusiveLeft?-1:0)-(i.inclusiveLeft?-1:0);return u?-u:(l=Le(l.to,o.to)||(e.inclusiveRight?1:0)-(i.inclusiveRight?1:0))?l:i.id-e.id}function It(e,i){if(e=wr&&e.markedSpans,e){for(var l,o=0;o<e.length;++o)if(l=e[o],l.marker.collapsed&&(i?l.from:l.to)==null&&(!u||0>Gi(u,l.marker)))var u=l.marker}return u}function hr(e,i,l,o,u){if(e=Se(e,i),e=wr&&e.markedSpans)for(i=0;i<e.length;++i){var f=e[i];if(f.marker.collapsed){var v=f.marker.find(0),E=Le(v.from,l)||(f.marker.inclusiveLeft?-1:0)-(u.inclusiveLeft?-1:0),_=Le(v.to,o)||(f.marker.inclusiveRight?1:0)-(u.inclusiveRight?1:0);if(!(0<=E&&0>=_||0>=E&&0<=_)&&(0>=E&&(f.marker.inclusiveRight&&u.inclusiveLeft?0<=Le(v.to,l):0<Le(v.to,l))||0<=E&&(f.marker.inclusiveRight&&u.inclusiveLeft?0>=Le(v.from,o):0>Le(v.from,o))))return!0}}}function ai(e){for(var i;i=It(e,!0);)e=i.find(-1,!0).line;return e}function Mr(e,i){e=Se(e,i);var l=ai(e);return e==l?i:pe(l)}function Tn(e,i){if(i>e.lastLine())return i;var l=Se(e,i);if(!ui(e,l))return i;for(;e=It(l,!1);)l=e.find(1,!0).line;return pe(l)+1}function ui(e,i){var l=wr&&i.markedSpans;if(l){for(var o,u=0;u<l.length;++u)if(o=l[u],o.marker.collapsed&&(o.from==null||!o.marker.widgetNode&&o.from==0&&o.marker.inclusiveLeft&&ii(e,i,o)))return!0}}function ii(e,i,l){if(l.to==null)return i=l.marker.find(1,!0),ii(e,i.line,Pt(i.line.markedSpans,l.marker));if(l.marker.inclusiveRight&&l.to==i.text.length)return!0;for(var o,u=0;u<i.markedSpans.length;++u)if(o=i.markedSpans[u],o.marker.collapsed&&!o.marker.widgetNode&&o.from==l.to&&(o.to==null||o.to!=l.from)&&(o.marker.inclusiveLeft||l.marker.inclusiveRight)&&ii(e,i,o))return!0}function gi(e){e=ai(e);for(var i=0,l=e.parent,o=0;o<l.lines.length;++o){var u=l.lines[o];if(u==e)break;i+=u.height}for(e=l.parent;e;l=e,e=l.parent)for(o=0;o<e.children.length&&(u=e.children[o],u!=l);++o)i+=u.height;return i}function Vi(e){if(e.height==0)return 0;for(var i=e.text.length,l,o=e;l=It(o,!0);)l=l.find(0,!0),o=l.from.line,i+=l.from.ch-l.to.ch;for(o=e;l=It(o,!1);)e=l.find(0,!0),i-=o.text.length-e.from.ch,o=e.to.line,i+=o.text.length-e.to.ch;return i}function Jr(e){var i=e.display;e=e.doc,i.maxLine=Se(e,e.first),i.maxLineLength=Vi(i.maxLine),i.maxLineChanged=!0,e.iter(function(l){var o=Vi(l);o>i.maxLineLength&&(i.maxLineLength=o,i.maxLine=l)})}function Qr(e,i){return!e||/^\s*$/.test(e)?null:(i=i.addModeClass?ax:lx,i[e]||(i[e]=e.replace(/\S+/g,"cm-$&")))}function An(e,i){var l=p("span",null,null,si?"padding-right: .1px":null);l={pre:p("pre",[l],"CodeMirror-line"),content:l,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")},i.measure={};for(var o=0;o<=(i.rest?i.rest.length:0);o++){var u=o?i.rest[o-1]:i.line,f=void 0;l.pos=0,l.addToken=qi;var v=e.display.measure;if(Sa!=null)v=Sa;else{var E=c(v,document.createTextNode("AخA")),_=Ws(E,0,1).getBoundingClientRect();E=Ws(E,1,2).getBoundingClientRect(),a(v),v=_&&_.left!=_.right?Sa=3>E.right-_.right:!1}v&&(f=we(u,e.doc.direction))&&(l.addToken=bn(l.addToken,f)),l.map=[];var P=i!=e.display.externalMeasured&&pe(u);e:{var W=E=_=v=void 0,Z=void 0,ee=void 0,te=void 0;f=l,P=g(e,u,P);var ye=u.markedSpans,De=u.text,qe=0;if(ye)for(var $t=De.length,ke=0,xt=1,ft="",mt=0;;){if(mt==ke){Z=W=E=ee="",_=v=null,mt=1/0;for(var St=[],et=void 0,vt=0;vt<ye.length;++vt){var lt=ye[vt],dt=lt.marker;if(dt.type=="bookmark"&&lt.from==ke&&dt.widgetNode)St.push(dt);else if(lt.from<=ke&&(lt.to==null||lt.to>ke||dt.collapsed&&lt.to==ke&&lt.from==ke)){if(lt.to!=null&&lt.to!=ke&&mt>lt.to&&(mt=lt.to,W=""),dt.className&&(Z+=" "+dt.className),dt.css&&(ee=(ee?ee+";":"")+dt.css),dt.startStyle&&lt.from==ke&&(E+=" "+dt.startStyle),dt.endStyle&&lt.to==mt&&(et||(et=[])).push(dt.endStyle,lt.to),dt.title&&((v||(v={})).title=dt.title),dt.attributes)for(var oi in dt.attributes)(v||(v={}))[oi]=dt.attributes[oi];dt.collapsed&&(!_||0>Gi(_.marker,dt))&&(_=lt)}else lt.from>ke&&mt>lt.from&&(mt=lt.from)}if(et)for(vt=0;vt<et.length;vt+=2)et[vt+1]==mt&&(W+=" "+et[vt]);if(!_||_.from==ke)for(et=0;et<St.length;++et)fr(f,0,St[et]);if(_&&(_.from||0)==ke){if(fr(f,(_.to==null?$t+1:_.to)-ke,_.marker,_.from==null),_.to==null)break e;_.to==ke&&(_=!1)}}if(ke>=$t)break;for(St=Math.min($t,mt);;){if(ft){if(et=ke+ft.length,_||(vt=et>St?ft.slice(0,St-ke):ft,f.addToken(f,vt,te?te+Z:Z,E,ke+vt.length==mt?W:"",ee,v)),et>=St){ft=ft.slice(St-ke),ke=St;break}ke=et,E=""}ft=De.slice(qe,qe=P[xt++]),te=Qr(P[xt++],f.cm.options)}}else for(v=1;v<P.length;v+=2)f.addToken(f,De.slice(qe,qe=P[v]),Qr(P[v+1],f.cm.options))}u.styleClasses&&(u.styleClasses.bgClass&&(l.bgClass=A(u.styleClasses.bgClass,l.bgClass||"")),u.styleClasses.textClass&&(l.textClass=A(u.styleClasses.textClass,l.textClass||""))),l.map.length==0&&(u=l.map,f=u.push,v=l.content,_=v.appendChild,E=e.display.measure,wa==null&&(W=h("span","​"),c(E,h("span",[W,document.createTextNode("x")])),E.firstChild.offsetHeight!=0&&(wa=1>=W.offsetWidth&&2<W.offsetHeight&&!(st&&8>Tt))),E=wa?h("span","​"):h("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px"),E.setAttribute("cm-text",""),f.call(u,0,0,_.call(v,E))),o==0?(i.measure.map=l.map,i.measure.cache={}):((i.measure.maps||(i.measure.maps=[])).push(l.map),(i.measure.caches||(i.measure.caches=[])).push({}))}return si&&(oi=l.content.lastChild,/\bcm-tab\b/.test(oi.className)||oi.querySelector&&oi.querySelector(".cm-tab"))&&(l.content.className="cm-tab-wrap-hack"),oe(e,"renderLine",e,i.line,l.pre),l.pre.className&&(l.textClass=A(l.pre.className,l.textClass||"")),l}function Wi(e){var i=h("span","•","cm-invalidchar");return i.title="\\u"+e.charCodeAt(0).toString(16),i.setAttribute("aria-label",i.title),i}function qi(e,i,l,o,u,f,v){if(i){if(e.splitSpaces){var E=e.trailingSpace;if(1<i.length&&!/  /.test(i))E=i;else{for(var _="",P=0;P<i.length;P++){var W=i.charAt(P);W!=" "||!E||P!=i.length-1&&i.charCodeAt(P+1)!=32||(W=" "),_+=W,E=W==" "}E=_}}else E=i;if(_=E,P=e.cm.state.specialChars,W=!1,P.test(i)){E=document.createDocumentFragment();for(var Z=0;;){P.lastIndex=Z;var ee=P.exec(i),te=ee?ee.index-Z:i.length-Z;if(te){var ye=document.createTextNode(_.slice(Z,Z+te));st&&9>Tt?E.appendChild(h("span",[ye])):E.appendChild(ye),e.map.push(e.pos,e.pos+te,ye),e.col+=te,e.pos+=te}if(!ee)break;Z+=te+1,ee[0]=="	"?(ee=e.cm.options.tabSize,ee-=e.col%ee,te=E.appendChild(h("span",C(ee),"cm-tab")),te.setAttribute("role","presentation"),te.setAttribute("cm-text","	"),e.col+=ee):(ee[0]=="\r"||ee[0]==`
`?(te=E.appendChild(h("span",ee[0]=="\r"?"␍":"␤","cm-invalidchar")),te.setAttribute("cm-text",ee[0])):(te=e.cm.options.specialCharPlaceholder(ee[0]),te.setAttribute("cm-text",ee[0]),st&&9>Tt?E.appendChild(h("span",[te])):E.appendChild(te)),e.col+=1),e.map.push(e.pos,e.pos+1,te),e.pos++}}else e.col+=i.length,E=document.createTextNode(_),e.map.push(e.pos,e.pos+i.length,E),st&&9>Tt&&(W=!0),e.pos+=i.length;if(e.trailingSpace=_.charCodeAt(i.length-1)==32,l||o||u||W||f||v){if(i=l||"",o&&(i+=o),u&&(i+=u),o=h("span",[E],i,f),v)for(var De in v)v.hasOwnProperty(De)&&De!="style"&&De!="class"&&o.setAttribute(De,v[De]);return e.content.appendChild(o)}e.content.appendChild(E)}}function bn(e,i){return function(l,o,u,f,v,E,_){u=u?u+" cm-force-border":"cm-force-border";for(var P=l.pos,W=P+o.length;;){for(var Z=void 0,ee=0;ee<i.length&&(Z=i[ee],!(Z.to>P&&Z.from<=P));ee++);if(Z.to>=W)return e(l,o,u,f,v,E,_);e(l,o.slice(0,Z.to-P),u,f,null,E,_),f=null,o=o.slice(Z.to-P),P=Z.to}}}function fr(e,i,l,o){var u=!o&&l.widgetNode;u&&e.map.push(e.pos,e.pos+i,u),!o&&e.cm.display.input.needsContentAttribute&&(u||(u=e.content.appendChild(document.createElement("span"))),u.setAttribute("cm-marker",l.id)),u&&(e.cm.display.input.setUneditable(u),e.content.appendChild(u)),e.pos+=i,e.trailingSpace=!1}function Oi(e,i,l){for(var o=this.line=i,u;o=It(o,!1);)o=o.find(1,!0).line,(u||(u=[])).push(o);this.size=(this.rest=u)?pe(O(this.rest))-l+1:1,this.node=this.text=null,this.hidden=ui(e,i)}function dr(e,i,l){var o=[],u;for(u=i;u<l;)i=new Oi(e.doc,Se(e.doc,u),u),u+=i.size,o.push(i);return o}function nt(e,i){if(e=e.ownsGroup)try{var l=e.delayedCallbacks,o=0;do{for(;o<l.length;o++)l[o].call(null);for(var u=0;u<e.ops.length;u++){var f=e.ops[u];if(f.cursorActivityHandlers)for(;f.cursorActivityCalled<f.cursorActivityHandlers.length;)f.cursorActivityHandlers[f.cursorActivityCalled++].call(null,f.cm)}}while(o<l.length)}finally{Vn=null,i(e)}}function Rt(e,i){var l=e._handlers&&e._handlers[i]||el;if(l.length){var o=Array.prototype.slice.call(arguments,2);if(Vn)var u=Vn.delayedCallbacks;else zs?u=zs:(u=zs=[],setTimeout(Cn,0));for(var f=function(E){u.push(function(){return l[E].apply(null,o)})},v=0;v<l.length;++v)f(v)}}function Cn(){var e=zs;zs=null;for(var i=0;i<e.length;++i)e[i]()}function en(e,i,l,o){for(var u=0;u<i.changes.length;u++){var f=i.changes[u];if(f=="text"){f=e;var v=i,E=v.text.className,_=Ki(f,v);v.text==v.node&&(v.node=_.pre),v.text.parentNode.replaceChild(_.pre,v.text),v.text=_.pre,_.bgClass!=v.bgClass||_.textClass!=v.textClass?(v.bgClass=_.bgClass,v.textClass=_.textClass,Yi(f,v)):E&&(v.text.className=E)}else if(f=="gutter")tn(e,i,l,o);else if(f=="class")Yi(e,i);else if(f=="widget"){f=e,v=i,E=o,v.alignable&&(v.alignable=null),_=s("CodeMirror-linewidget");for(var P=v.node.firstChild,W;P;P=W)W=P.nextSibling,_.test(P.className)&&v.node.removeChild(P);Zi(f,v,E)}}i.changes=null}function pr(e){return e.node==e.text&&(e.node=h("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),st&&8>Tt&&(e.node.style.zIndex=2)),e.node}function Ki(e,i){var l=e.display.externalMeasured;return l&&l.line==i.line?(e.display.externalMeasured=null,i.measure=l.measure,l.built):An(e,i)}function Yi(e,i){var l=i.bgClass?i.bgClass+" "+(i.line.bgClass||""):i.line.bgClass;if(l&&(l+=" CodeMirror-linebackground"),i.background)l?i.background.className=l:(i.background.parentNode.removeChild(i.background),i.background=null);else if(l){var o=pr(i);i.background=o.insertBefore(h("div",null,l),o.firstChild),e.display.input.setUneditable(i.background)}i.line.wrapClass?pr(i).className=i.line.wrapClass:i.node!=i.text&&(i.node.className=""),i.text.className=(i.textClass?i.textClass+" "+(i.line.textClass||""):i.line.textClass)||""}function tn(e,i,l,o){if(i.gutter&&(i.node.removeChild(i.gutter),i.gutter=null),i.gutterBackground&&(i.node.removeChild(i.gutterBackground),i.gutterBackground=null),i.line.gutterClass){var u=pr(i);i.gutterBackground=h("div",null,"CodeMirror-gutter-background "+i.line.gutterClass,"left: "+(e.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px; width: "+o.gutterTotalWidth+"px"),e.display.input.setUneditable(i.gutterBackground),u.insertBefore(i.gutterBackground,i.text)}if(u=i.line.gutterMarkers,e.options.lineNumbers||u){var f=pr(i),v=i.gutter=h("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px");if(v.setAttribute("aria-hidden","true"),e.display.input.setUneditable(v),f.insertBefore(v,i.text),i.line.gutterClass&&(v.className+=" "+i.line.gutterClass),!e.options.lineNumbers||u&&u["CodeMirror-linenumbers"]||(i.lineNumber=v.appendChild(h("div",He(e.options,l),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+o.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),u)for(i=0;i<e.display.gutterSpecs.length;++i)l=e.display.gutterSpecs[i].className,(f=u.hasOwnProperty(l)&&u[l])&&v.appendChild(h("div",[f],"CodeMirror-gutter-elt","left: "+o.gutterLeft[l]+"px; width: "+o.gutterWidth[l]+"px"))}}function Xi(e,i,l,o){var u=Ki(e,i);return i.text=i.node=u.pre,u.bgClass&&(i.bgClass=u.bgClass),u.textClass&&(i.textClass=u.textClass),Yi(e,i),tn(e,i,l,o),Zi(e,i,o),i.node}function Zi(e,i,l){if(Dr(e,i.line,i,l,!0),i.rest)for(var o=0;o<i.rest.length;o++)Dr(e,i.rest[o],i,l,!1)}function Dr(e,i,l,o,u){if(i.widgets){var f=pr(l),v=0;for(i=i.widgets;v<i.length;++v){var E=i[v],_=h("div",[E.node],"CodeMirror-linewidget"+(E.className?" "+E.className:""));E.handleMouseEvents||_.setAttribute("cm-ignore-events","true");var P=E,W=_,Z=o;if(P.noHScroll){(l.alignable||(l.alignable=[])).push(W);var ee=Z.wrapperWidth;W.style.left=Z.fixedPos+"px",P.coverGutter||(ee-=Z.gutterTotalWidth,W.style.paddingLeft=Z.gutterTotalWidth+"px"),W.style.width=ee+"px"}P.coverGutter&&(W.style.zIndex=5,W.style.position="relative",P.noHScroll||(W.style.marginLeft=-Z.gutterTotalWidth+"px")),e.display.input.setUneditable(_),u&&E.above?f.insertBefore(_,l.gutter||l.text):f.appendChild(_),Rt(E,"redraw")}}}function D(e){if(e.height!=null)return e.height;var i=e.doc.cm;if(!i)return 0;if(!x(document.body,e.node)){var l="position: relative;";e.coverGutter&&(l+="margin-left: -"+i.display.gutters.offsetWidth+"px;"),e.noHScroll&&(l+="width: "+i.display.wrapper.clientWidth+"px;"),c(i.display.measure,h("div",[e.node],null,l))}return e.height=e.node.parentNode.offsetHeight}function z(e,i){for(i=i.target||i.srcElement;i!=e.wrapper;i=i.parentNode)if(!i||i.nodeType==1&&i.getAttribute("cm-ignore-events")=="true"||i.parentNode==e.sizer&&i!=e.mover)return!0}function xe(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Ie(e){if(e.cachedPaddingH)return e.cachedPaddingH;var i=c(e.measure,h("pre","x","CodeMirror-line-like"));return i=window.getComputedStyle?window.getComputedStyle(i):i.currentStyle,i={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)},isNaN(i.left)||isNaN(i.right)||(e.cachedPaddingH=i),i}function ze(e){return 50-e.display.nativeBarWidth}function Ke(e){return e.display.scroller.clientWidth-ze(e)-e.display.barWidth}function Ot(e){return e.display.scroller.clientHeight-ze(e)-e.display.barHeight}function Lr(e,i,l){if(e.line==i)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var o=0;o<e.rest.length;o++)if(e.rest[o]==i)return{map:e.measure.maps[o],cache:e.measure.caches[o]};for(i=0;i<e.rest.length;i++)if(pe(e.rest[i])>l)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}}function ys(e,i){if(i>=e.display.viewFrom&&i<e.display.viewTo)return e.display.view[Ii(e,i)];if((e=e.display.externalMeasured)&&i>=e.lineN&&i<e.lineN+e.size)return e}function gr(e,i){var l=pe(i),o=ys(e,l);if(o&&!o.text?o=null:o&&o.changes&&(en(e,o,l,_n(e)),e.curOp.forceUpdate=!0),!o){var u=ai(i);o=pe(u),u=e.display.externalMeasured=new Oi(e.doc,u,o),u.lineN=o,o=u.built=An(e,u),u.text=o.pre,c(e.display.lineMeasure,o.pre),o=u}return e=Lr(o,i,l),{line:i,view:o,rect:null,map:e.map,cache:e.cache,before:e.before,hasHeights:!1}}function wi(e,i,l,o,u){i.before&&(l=-1);var f=l+(o||"");if(i.cache.hasOwnProperty(f))e=i.cache[f];else{if(i.rect||(i.rect=i.view.text.getBoundingClientRect()),!i.hasHeights){var v=i.view,E=i.rect,_=e.options.lineWrapping,P=_&&Ke(e);if(!v.measure.heights||_&&v.measure.width!=P){var W=v.measure.heights=[];if(_)for(v.measure.width=P,v=v.text.firstChild.getClientRects(),_=0;_<v.length-1;_++){P=v[_];var Z=v[_+1];2<Math.abs(P.bottom-Z.bottom)&&W.push((P.bottom+Z.top)/2-E.top)}W.push(E.bottom-E.top)}i.hasHeights=!0}if(W=o,v=Co(i.map,l,W),o=v.node,E=v.start,_=v.end,l=v.collapse,o.nodeType==3){for(var ee=0;4>ee;ee++){for(;E&&Y(i.line.text.charAt(v.coverStart+E));)--E;for(;v.coverStart+_<v.coverEnd&&Y(i.line.text.charAt(v.coverStart+_));)++_;if(st&&9>Tt&&E==0&&_==v.coverEnd-v.coverStart)var te=o.parentNode.getBoundingClientRect();else{if(te=Ws(o,E,_).getClientRects(),_=H0,W=="left")for(P=0;P<te.length&&(_=te[P]).left==_.right;P++);else for(P=te.length-1;0<=P&&(_=te[P]).left==_.right;P--);te=_}if(te.left||te.right||E==0)break;_=E,--E,l="right"}st&&11>Tt&&((ee=!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI)||(Ta!=null?ee=Ta:(W=c(e.display.measure,h("span","x")),ee=W.getBoundingClientRect(),W=Ws(W,0,1).getBoundingClientRect(),ee=Ta=1<Math.abs(ee.left-W.left)),ee=!ee),ee||(ee=screen.logicalXDPI/screen.deviceXDPI,W=screen.logicalYDPI/screen.deviceYDPI,te={left:te.left*ee,right:te.right*ee,top:te.top*W,bottom:te.bottom*W}))}else 0<E&&(l=W="right"),te=e.options.lineWrapping&&1<(ee=o.getClientRects()).length?ee[W=="right"?ee.length-1:0]:o.getBoundingClientRect();for(!(st&&9>Tt)||E||te&&(te.left||te.right)||(te=(te=o.parentNode.getClientRects()[0])?{left:te.left,right:te.left+Ji(e.display),top:te.top,bottom:te.bottom}:H0),o=te.top-i.rect.top,E=te.bottom-i.rect.top,ee=(o+E)/2,W=i.view.measure.heights,v=0;v<W.length-1&&!(ee<W[v]);v++);l={left:(l=="right"?te.right:te.left)-i.rect.left,right:(l=="left"?te.left:te.right)-i.rect.left,top:v?W[v-1]:0,bottom:W[v]},te.left||te.right||(l.bogus=!0),e.options.singleCursorHeightPerLine||(l.rtop=o,l.rbottom=E),e=l,e.bogus||(i.cache[f]=e)}return{left:e.left,right:e.right,top:u?e.rtop:e.top,bottom:u?e.rbottom:e.bottom}}function Co(e,i,l){for(var o,u,f,v,E,_,P=0;P<e.length;P+=3)if(E=e[P],_=e[P+1],i<E?(u=0,f=1,v="left"):i<_?(u=i-E,f=u+1):(P==e.length-3||i==_&&e[P+3]>i)&&(f=_-E,u=f-1,i>=_&&(v="right")),u!=null){if(o=e[P+2],E==_&&l==(o.insertLeft?"left":"right")&&(v=l),l=="left"&&u==0)for(;P&&e[P-2]==e[P-3]&&e[P-1].insertLeft;)o=e[(P-=3)+2],v="left";if(l=="right"&&u==_-E)for(;P<e.length-3&&e[P+3]==e[P+4]&&!e[P+5].insertLeft;)o=e[(P+=3)+2],v="right";break}return{node:o,start:u,end:f,collapse:v,coverStart:E,coverEnd:_}}function Oo(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var i=0;i<e.rest.length;i++)e.measure.caches[i]={}}function _o(e){e.display.externalMeasure=null,a(e.display.lineMeasure);for(var i=0;i<e.display.view.length;i++)Oo(e.display.view[i])}function Pr(e){_o(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Io(e){return kr&&Zo?-(e.body.getBoundingClientRect().left-parseInt(getComputedStyle(e.body).marginLeft)):e.defaultView.pageXOffset||(e.documentElement||e.body).scrollLeft}function Mo(e){return kr&&Zo?-(e.body.getBoundingClientRect().top-parseInt(getComputedStyle(e.body).marginTop)):e.defaultView.pageYOffset||(e.documentElement||e.body).scrollTop}function Nr(e){e=ai(e).widgets;var i=0;if(e)for(var l=0;l<e.length;++l)e[l].above&&(i+=D(e[l]));return i}function Ui(e,i,l,o,u){return u||(u=Nr(i),l.top+=u,l.bottom+=u),o=="line"||(o||(o="local"),i=gi(i),i=o=="local"?i+e.display.lineSpace.offsetTop:i-e.display.viewOffset,(o=="page"||o=="window")&&(u=e.display.lineSpace.getBoundingClientRect(),i+=u.top+(o=="window"?0:Mo(d(e))),e=u.left+(o=="window"?0:Io(d(e))),l.left+=e,l.right+=e),l.top+=i,l.bottom+=i),l}function Es(e,i,l){if(l=="div")return i;var o=i.left;return i=i.top,l=="page"?(o-=Io(d(e)),i-=Mo(d(e))):l!="local"&&l||(l=e.display.sizer.getBoundingClientRect(),o+=l.left,i+=l.top),e=e.display.lineSpace.getBoundingClientRect(),{left:o-e.left,top:i-e.top}}function _i(e,i,l,o,u){o||(o=Se(e.doc,i.line));var f=o;return i=i.ch,o=wi(e,gr(e,o),i,u),Ui(e,f,o,l)}function Si(e,i,l,o,u,f){function v(ee,te){return ee=wi(e,u,ee,te?"right":"left",f),te?ee.left=ee.right:ee.right=ee.left,Ui(e,o,ee,l)}function E(ee,te,ye){return v(ye?ee-1:ee,_[te].level==1!=ye)}o=o||Se(e.doc,i.line),u||(u=gr(e,o));var _=we(o,e.doc.direction),P=i.ch;if(i=i.sticky,P>=o.text.length?(P=o.text.length,i="before"):0>=P&&(P=0,i="after"),!_)return v(i=="before"?P-1:P,i=="before");var W=ve(_,P,i),Z=Hs;return W=E(P,W,i=="before"),Z!=null&&(W.other=E(P,Z,i!="before")),W}function Do(e,i){var l=0;return i=Ne(e.doc,i),e.options.lineWrapping||(l=Ji(e.display)*i.ch),i=Se(e.doc,i.line),e=gi(i)+e.display.lineSpace.offsetTop,{left:l,right:l,top:e,bottom:e+i.height}}function ws(e,i,l,o,u){return e=fe(e,i,l),e.xRel=u,o&&(e.outside=o),e}function Ss(e,i,l){var o=e.doc;if(l+=e.display.viewOffset,0>l)return ws(o.first,0,null,-1,-1);var u=gt(o,l),f=o.first+o.size-1;if(u>f)return ws(o.first+o.size-1,Se(o,f).text.length,null,1,1);0>i&&(i=0);for(var v=Se(o,u);;){f=xr(e,v,u,i,l);var E=void 0,_=f.ch+(0<f.xRel||0<f.outside?1:0);if(v=wr&&v.markedSpans)for(var P=0;P<v.length;++P){var W=v[P];W.marker.collapsed&&(W.from==null||W.from<_)&&(W.to==null||W.to>_)&&(!E||0>Gi(E,W.marker))&&(E=W.marker)}if(!E||(f=E.find(1),f.line==u))return f;v=Se(o,u=f.line)}}function Lo(e,i,l,o){o-=Nr(i),i=i.text.length;var u=se(function(f){return wi(e,l,f-1).bottom<=o},i,0);return i=se(function(f){return wi(e,l,f).top>o},u,i),{begin:u,end:i}}function Po(e,i,l,o){return l||(l=gr(e,i)),o=Ui(e,i,wi(e,l,o),"line").top,Lo(e,i,l,o)}function On(e,i,l,o){return e.bottom<=l?!1:e.top>l?!0:(o?e.left:e.right)>i}function xr(e,i,l,o,u){u-=gi(i);var f=gr(e,i),v=Nr(i),E=0,_=i.text.length,P=!0,W=we(i,e.doc.direction);W&&(W=(e.options.lineWrapping?No:ia)(e,i,l,f,W,o,u),E=(P=W.level!=1)?W.from:W.to-1,_=P?W.to:W.from-1);var Z=null,ee=null;W=se(function(ye){var De=wi(e,f,ye);return De.top+=v,De.bottom+=v,On(De,o,u,!1)?(De.top<=u&&De.left<=o&&(Z=ye,ee=De),!0):!1},E,_);var te=!1;return ee?(E=o-ee.left<ee.right-o,P=E==P,W=Z+(P?0:1),P=P?"after":"before",E=E?ee.left:ee.right):(P||W!=_&&W!=E||W++,P=W==0?"after":W==i.text.length?"before":wi(e,f,W-(P?1:0)).bottom+v<=u==P?"after":"before",te=Si(e,fe(l,W,P),"line",i,f),E=te.left,te=u<te.top?-1:u>=te.bottom?1:0),W=Q(i.text,W,1),ws(l,W,P,te,o-E)}function ia(e,i,l,o,u,f,v){var E=se(function(W){W=u[W];var Z=W.level!=1;return On(Si(e,fe(l,Z?W.to:W.from,Z?"before":"after"),"line",i,o),f,v,!0)},0,u.length-1),_=u[E];if(0<E){var P=_.level!=1;P=Si(e,fe(l,P?_.from:_.to,P?"after":"before"),"line",i,o),On(P,f,v,!0)&&P.top>v&&(_=u[E-1])}return _}function No(e,i,l,o,u,f,v){v=Lo(e,i,o,v),l=v.begin,v=v.end,/\s/.test(i.text.charAt(v-1))&&v--;for(var E=i=null,_=0;_<u.length;_++){var P=u[_];if(!(P.from>=v||P.to<=l)){var W=wi(e,o,P.level!=1?Math.min(v,P.to)-1:Math.max(l,P.from)).right;W=W<f?f-W+1e9:W-f,(!i||E>W)&&(i=P,E=W)}}return i||(i=u[u.length-1]),i.from<l&&(i={from:l,to:i.to,level:i.level}),i.to>v&&(i={from:i.from,to:v,level:i.level}),i}function Br(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(un==null){un=h("pre",null,"CodeMirror-line-like");for(var i=0;49>i;++i)un.appendChild(document.createTextNode("x")),un.appendChild(h("br"));un.appendChild(document.createTextNode("x"))}return c(e.measure,un),i=un.offsetHeight/50,3<i&&(e.cachedTextHeight=i),a(e.measure),i||1}function Ji(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var i=h("span","xxxxxxxxxx"),l=h("pre",[i],"CodeMirror-line-like");return c(e.measure,l),i=i.getBoundingClientRect(),i=(i.right-i.left)/10,2<i&&(e.cachedCharWidth=i),i||10}function _n(e){for(var i=e.display,l={},o={},u=i.gutters.clientLeft,f=i.gutters.firstChild,v=0;f;f=f.nextSibling,++v){var E=e.display.gutterSpecs[v].className;l[E]=f.offsetLeft+f.clientLeft+u,o[E]=f.clientWidth}return{fixedPos:Rs(i),gutterTotalWidth:i.gutters.offsetWidth,gutterLeft:l,gutterWidth:o,wrapperWidth:i.wrapper.clientWidth}}function Rs(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Bo(e){var i=Br(e.display),l=e.options.lineWrapping,o=l&&Math.max(5,e.display.scroller.clientWidth/Ji(e.display)-3);return function(u){if(ui(e.doc,u))return 0;var f=0;if(u.widgets)for(var v=0;v<u.widgets.length;v++)u.widgets[v].height&&(f+=u.widgets[v].height);return l?f+(Math.ceil(u.text.length/o)||1)*i:f+i}}function In(e){var i=e.doc,l=Bo(e);i.iter(function(o){var u=l(o);u!=o.height&&Qe(o,u)})}function mr(e,i,l,o){var u=e.display;if(!l&&(i.target||i.srcElement).getAttribute("cm-not-content")=="true")return null;l=u.lineSpace.getBoundingClientRect();try{var f=i.clientX-l.left,v=i.clientY-l.top}catch{return null}i=Ss(e,f,v);var E;return o&&0<i.xRel&&(E=Se(e.doc,i.line).text).length==i.ch&&(o=M(E,E.length,e.options.tabSize)-E.length,i=fe(i.line,Math.max(0,Math.round((f-Ie(e.display).left)/Ji(e.display))-o))),i}function Ii(e,i){if(i>=e.display.viewTo||(i-=e.display.viewFrom,0>i))return null;e=e.display.view;for(var l=0;l<e.length;l++)if(i-=e[l].size,0>i)return l}function Qt(e,i,l,o){i==null&&(i=e.doc.first),l==null&&(l=e.doc.first+e.doc.size),o||(o=0);var u=e.display;if(o&&l<u.viewTo&&(u.updateLineNumbers==null||u.updateLineNumbers>i)&&(u.updateLineNumbers=i),e.curOp.viewChanged=!0,i>=u.viewTo)wr&&Mr(e.doc,i)<u.viewTo&&Qi(e);else if(l<=u.viewFrom)wr&&Tn(e.doc,l+o)>u.viewFrom?Qi(e):(u.viewFrom+=o,u.viewTo+=o);else if(i<=u.viewFrom&&l>=u.viewTo)Qi(e);else if(i<=u.viewFrom){var f=Mn(e,l,l+o,1);f?(u.view=u.view.slice(f.index),u.viewFrom=f.lineN,u.viewTo+=o):Qi(e)}else if(l>=u.viewTo)(f=Mn(e,i,i,-1))?(u.view=u.view.slice(0,f.index),u.viewTo=f.lineN):Qi(e);else{f=Mn(e,i,i,-1);var v=Mn(e,l,l+o,1);f&&v?(u.view=u.view.slice(0,f.index).concat(dr(e,f.lineN,v.lineN)).concat(u.view.slice(v.index)),u.viewTo+=o):Qi(e)}(e=u.externalMeasured)&&(l<e.lineN?e.lineN+=o:i<e.lineN+e.size&&(u.externalMeasured=null))}function Mi(e,i,l){e.curOp.viewChanged=!0;var o=e.display,u=e.display.externalMeasured;u&&i>=u.lineN&&i<u.lineN+u.size&&(o.externalMeasured=null),i<o.viewFrom||i>=o.viewTo||(e=o.view[Ii(e,i)],e.node!=null&&(e=e.changes||(e.changes=[]),T(e,l)==-1&&e.push(l)))}function Qi(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Mn(e,i,l,o){var u=Ii(e,i),f=e.display.view;if(!wr||l==e.doc.first+e.doc.size)return{index:u,lineN:l};for(var v=e.display.viewFrom,E=0;E<u;E++)v+=f[E].size;if(v!=i){if(0<o){if(u==f.length-1)return null;i=v+f[u].size-i,u++}else i=v-i;l+=i}for(;Mr(e.doc,l)!=l;){if(u==(0>o?0:f.length-1))return null;l+=o*f[u-(0>o?1:0)].size,u+=o}return{index:u,lineN:l}}function k(e){e=e.display.view;for(var i=0,l=0;l<e.length;l++){var o=e[l];o.hidden||o.node&&!o.changes||++i}return i}function de(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Ae(e,i){i===void 0&&(i=!0);var l=e.doc,o={},u=o.cursors=document.createDocumentFragment(),f=o.selection=document.createDocumentFragment(),v=e.options.$customCursor;v&&(i=!0);for(var E=0;E<l.sel.ranges.length;E++)if(i||E!=l.sel.primIndex){var _=l.sel.ranges[E];if(!(_.from().line>=e.display.viewTo||_.to().line<e.display.viewFrom)){var P=_.empty();if(v){var W=v(e,_);W&&Ge(e,W,u)}else(P||e.options.showCursorWhenSelecting)&&Ge(e,_.head,u);P||ri(e,_,f)}}return o}function Ge(e,i,l){var o=Si(e,i,"div",null,null,!e.options.singleCursorHeightPerLine),u=l.appendChild(h("div"," ","CodeMirror-cursor"));u.style.left=o.left+"px",u.style.top=o.top+"px",u.style.height=Math.max(0,o.bottom-o.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)&&(i=_i(e,i,"div",null,null),i=i.right-i.left,u.style.width=(0<i?i:e.defaultCharWidth())+"px"),o.other&&(e=l.appendChild(h("div"," ","CodeMirror-cursor CodeMirror-secondarycursor")),e.style.display="",e.style.left=o.other.left+"px",e.style.top=o.other.top+"px",e.style.height=.85*(o.other.bottom-o.other.top)+"px")}function Nt(e,i){return e.top-i.top||e.left-i.left}function ri(e,i,l){function o(te,ye,De,qe){0>ye&&(ye=0),ye=Math.round(ye),qe=Math.round(qe),E.appendChild(h("div",null,"CodeMirror-selected","position: absolute; left: "+te+`px;
                             top: `+ye+"px; width: "+(De??W-te)+`px;
                             height: `+(qe-ye)+"px"))}function u(te,ye,De){function qe(et,vt){return _i(e,fe(te,et),"div",ke,vt)}function $t(et,vt,lt){return et=Po(e,ke,null,et),vt=vt=="ltr"==(lt=="after")?"left":"right",lt=lt=="after"?et.begin:et.end-(/\s/.test(ke.text.charAt(et.end-1))?2:1),qe(lt,vt)[vt]}var ke=Se(v,te),xt=ke.text.length,ft,mt,St=we(ke,v.direction);return ae(St,ye||0,De??xt,function(et,vt,lt,dt){var oi=lt=="ltr",fi=qe(et,oi?"left":"right"),Ai=qe(vt-1,oi?"right":"left"),hn=ye==null&&et==0,fn=De==null&&vt==xt,_a=dt==0;dt=!St||dt==St.length-1,3>=Ai.top-fi.top?(vt=(Z?hn:fn)&&_a?P:(oi?fi:Ai).left,o(vt,fi.top,((Z?fn:hn)&&dt?W:(oi?Ai:fi).right)-vt,fi.bottom)):(oi?(oi=Z&&hn&&_a?P:fi.left,hn=Z?W:$t(et,lt,"before"),et=Z?P:$t(vt,lt,"after"),fn=Z&&fn&&dt?W:Ai.right):(oi=Z?$t(et,lt,"before"):P,hn=!Z&&hn&&_a?W:fi.right,et=!Z&&fn&&dt?P:Ai.left,fn=Z?$t(vt,lt,"after"):W),o(oi,fi.top,hn-oi,fi.bottom),fi.bottom<Ai.top&&o(P,fi.bottom,null,Ai.top),o(et,Ai.top,fn-et,Ai.bottom)),(!ft||0>Nt(fi,ft))&&(ft=fi),0>Nt(Ai,ft)&&(ft=Ai),(!mt||0>Nt(fi,mt))&&(mt=fi),0>Nt(Ai,mt)&&(mt=Ai)}),{start:ft,end:mt}}var f=e.display,v=e.doc,E=document.createDocumentFragment(),_=Ie(e.display),P=_.left,W=Math.max(f.sizerWidth,Ke(e)-f.sizer.offsetLeft)-_.right,Z=v.direction=="ltr";if(f=i.from(),i=i.to(),f.line==i.line)u(f.line,f.ch,i.ch);else{var ee=Se(v,f.line);_=Se(v,i.line),_=ai(ee)==ai(_),f=u(f.line,f.ch,_?ee.text.length+1:null).end,i=u(i.line,_?0:null,i.ch).start,_&&(f.top<i.top-2?(o(f.right,f.top,null,f.bottom),o(P,i.top,i.left,i.bottom)):o(f.right,f.top,i.left-f.right,f.bottom)),f.bottom<i.top&&o(P,f.bottom,null,i.top)}l.appendChild(E)}function Ri(e){if(e.state.focused){var i=e.display;clearInterval(i.blinker);var l=!0;i.cursorDiv.style.visibility="",0<e.options.cursorBlinkRate?i.blinker=setInterval(function(){e.hasFocus()||vr(e),i.cursorDiv.style.visibility=(l=!l)?"":"hidden"},e.options.cursorBlinkRate):0>e.options.cursorBlinkRate&&(i.cursorDiv.style.visibility="hidden")}}function ei(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||er(e))}function Dn(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&vr(e))},100)}function er(e,i){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),e.options.readOnly!="nocursor"&&(e.state.focused||(oe(e,"focus",e,i),e.state.focused=!0,y(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),si&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Ri(e))}function vr(e,i){e.state.delayingBlurEvent||(e.state.focused&&(oe(e,"blur",e,i),e.state.focused=!1,an(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function rn(e){for(var i=e.display,l=i.lineDiv.offsetTop,o=Math.max(0,i.scroller.getBoundingClientRect().top),u=i.lineDiv.getBoundingClientRect().top,f=0,v=0;v<i.view.length;v++){var E=i.view[v],_=e.options.lineWrapping,P=0;if(!E.hidden){if(u+=E.line.height,st&&8>Tt){_=E.node.offsetTop+E.node.offsetHeight;var W=_-l;l=_}else{var Z=E.node.getBoundingClientRect();W=Z.bottom-Z.top,!_&&E.text.firstChild&&(P=E.text.firstChild.getBoundingClientRect().right-Z.left-1)}if(_=E.line.height-W,(.005<_||-.005>_)&&(u<o&&(f-=_),Qe(E.line,W),Ts(E.line),E.rest))for(W=0;W<E.rest.length;W++)Ts(E.rest[W]);P>e.display.sizerWidth&&(P=Math.ceil(P/Ji(e.display)),P>e.display.maxLineLength&&(e.display.maxLineLength=P,e.display.maxLine=E.line,e.display.maxLineChanged=!0))}}2<Math.abs(f)&&(i.scroller.scrollTop+=f)}function Ts(e){if(e.widgets)for(var i=0;i<e.widgets.length;++i){var l=e.widgets[i],o=l.node.parentNode;o&&(l.height=o.offsetHeight)}}function Fr(e,i,l){var o=l&&l.top!=null?Math.max(0,l.top):e.scroller.scrollTop;o=Math.floor(o-e.lineSpace.offsetTop);var u=l&&l.bottom!=null?l.bottom:o+e.wrapper.clientHeight;if(o=gt(i,o),u=gt(i,u),l&&l.ensure){var f=l.ensure.from.line;l=l.ensure.to.line,f<o?(o=f,u=gt(i,gi(Se(i,f))+e.wrapper.clientHeight)):Math.min(l,i.lastLine())>=u&&(o=gt(i,gi(Se(i,l))-e.wrapper.clientHeight),u=l)}return{from:o,to:Math.max(u,o+1)}}function Gr(e,i){var l=e.display,o=Br(e.display);0>i.top&&(i.top=0);var u=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:l.scroller.scrollTop,f=Ot(e),v={};i.bottom-i.top>f&&(i.bottom=i.top+f);var E=e.doc.height+xe(l),_=i.top<o;return o=i.bottom>E-o,i.top<u?v.scrollTop=_?0:i.top:i.bottom>u+f&&(f=Math.min(i.top,(o?E:i.bottom)-f),f!=u&&(v.scrollTop=f)),u=e.options.fixedGutter?0:l.gutters.offsetWidth,f=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:l.scroller.scrollLeft-u,e=Ke(e)-l.gutters.offsetWidth,(l=i.right-i.left>e)&&(i.right=i.left+e),10>i.left?v.scrollLeft=0:i.left<f?v.scrollLeft=Math.max(0,i.left+u-(l?0:10)):i.right>e+f-3&&(v.scrollLeft=i.right+(l?0:10)-e),v}function Fo(e,i){i!=null&&(Go(e),e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+i)}function Ln(e){Go(e);var i=e.getCursor();e.curOp.scrollToPos={from:i,to:i,margin:e.options.cursorScrollMargin}}function As(e,i,l){i==null&&l==null||Go(e),i!=null&&(e.curOp.scrollLeft=i),l!=null&&(e.curOp.scrollTop=l)}function Go(e){var i=e.curOp.scrollToPos;if(i){e.curOp.scrollToPos=null;var l=Do(e,i.from),o=Do(e,i.to);Lh(e,l,o,i.margin)}}function Lh(e,i,l,o){i=Gr(e,{left:Math.min(i.left,l.left),top:Math.min(i.top,l.top)-o,right:Math.max(i.right,l.right),bottom:Math.max(i.bottom,l.bottom)+o}),As(e,i.scrollLeft,i.scrollTop)}function bs(e,i){2>Math.abs(e.doc.scrollTop-i)||(Er||na(e,{top:i}),Ph(e,i,!0),Er&&na(e),Os(e,100))}function Ph(e,i,l){i=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,i)),(e.display.scroller.scrollTop!=i||l)&&(e.doc.scrollTop=i,e.display.scrollbars.setScrollTop(i),e.display.scroller.scrollTop!=i&&(e.display.scroller.scrollTop=i))}function nn(e,i,l,o){i=Math.max(0,Math.min(i,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(l?i==e.doc.scrollLeft:2>Math.abs(e.doc.scrollLeft-i))&&!o||(e.doc.scrollLeft=i,Gh(e),e.display.scroller.scrollLeft!=i&&(e.display.scroller.scrollLeft=i),e.display.scrollbars.setScrollLeft(i))}function Cs(e){var i=e.display,l=i.gutters.offsetWidth,o=Math.round(e.doc.height+xe(e.display));return{clientHeight:i.scroller.clientHeight,viewHeight:i.wrapper.clientHeight,scrollWidth:i.scroller.scrollWidth,clientWidth:i.scroller.clientWidth,viewWidth:i.wrapper.clientWidth,barLeft:e.options.fixedGutter?l:0,docHeight:o,scrollHeight:o+ze(e)+i.barHeight,nativeBarWidth:i.nativeBarWidth,gutterWidth:l}}function Pn(e,i){i||(i=Cs(e));var l=e.display.barWidth,o=e.display.barHeight;for(Nh(e,i),i=0;4>i&&l!=e.display.barWidth||o!=e.display.barHeight;i++)l!=e.display.barWidth&&e.options.lineWrapping&&rn(e),Nh(e,Cs(e)),l=e.display.barWidth,o=e.display.barHeight}function Nh(e,i){var l=e.display,o=l.scrollbars.update(i);l.sizer.style.paddingRight=(l.barWidth=o.right)+"px",l.sizer.style.paddingBottom=(l.barHeight=o.bottom)+"px",l.heightForcer.style.borderBottom=o.bottom+"px solid transparent",o.right&&o.bottom?(l.scrollbarFiller.style.display="block",l.scrollbarFiller.style.height=o.bottom+"px",l.scrollbarFiller.style.width=o.right+"px"):l.scrollbarFiller.style.display="",o.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(l.gutterFiller.style.display="block",l.gutterFiller.style.height=o.bottom+"px",l.gutterFiller.style.width=i.gutterWidth+"px"):l.gutterFiller.style.display=""}function Bh(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&an(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new z0[e.options.scrollbarStyle](function(i){e.display.wrapper.insertBefore(i,e.display.scrollbarFiller),Ve(i,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),i.setAttribute("cm-not-content","true")},function(i,l){l=="horizontal"?nn(e,i):bs(e,i)},e),e.display.scrollbars.addClass&&y(e.display.wrapper,e.display.scrollbars.addClass)}function sn(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ux,markArrays:null},e=e.curOp,Vn?Vn.ops.push(e):e.ownsGroup=Vn={ops:[e],delayedCallbacks:[]}}function on(e){(e=e.curOp)&&nt(e,function(i){for(var l=0;l<i.ops.length;l++)i.ops[l].cm.curOp=null;for(i=i.ops,l=0;l<i.length;l++){var o=i[l],u=o.cm,f=u.display,v=u.display;!v.scrollbarsClipped&&v.scroller.offsetWidth&&(v.nativeBarWidth=v.scroller.offsetWidth-v.scroller.clientWidth,v.heightForcer.style.height=ze(u)+"px",v.sizer.style.marginBottom=-v.nativeBarWidth+"px",v.sizer.style.borderRightWidth=ze(u)+"px",v.scrollbarsClipped=!0),o.updateMaxLine&&Jr(u),o.mustUpdate=o.viewChanged||o.forceUpdate||o.scrollTop!=null||o.scrollToPos&&(o.scrollToPos.from.line<f.viewFrom||o.scrollToPos.to.line>=f.viewTo)||f.maxLineChanged&&u.options.lineWrapping,o.update=o.mustUpdate&&new il(u,o.mustUpdate&&{top:o.scrollTop,ensure:o.scrollToPos},o.forceUpdate)}for(l=0;l<i.length;l++)o=i[l],o.updatedDisplay=o.mustUpdate&&ra(o.cm,o.update);for(l=0;l<i.length;l++)o=i[l],u=o.cm,f=u.display,o.updatedDisplay&&rn(u),o.barMeasure=Cs(u),f.maxLineChanged&&!u.options.lineWrapping&&(v=f.maxLine.text.length,v=wi(u,gr(u,f.maxLine),v,void 0),o.adjustWidthTo=v.left+3,u.display.sizerWidth=o.adjustWidthTo,o.barMeasure.scrollWidth=Math.max(f.scroller.clientWidth,f.sizer.offsetLeft+o.adjustWidthTo+ze(u)+u.display.barWidth),o.maxScrollLeft=Math.max(0,f.sizer.offsetLeft+o.adjustWidthTo-Ke(u))),(o.updatedDisplay||o.selectionChanged)&&(o.preparedSelection=f.input.prepareSelection());for(l=0;l<i.length;l++)o=i[l],u=o.cm,o.adjustWidthTo!=null&&(u.display.sizer.style.minWidth=o.adjustWidthTo+"px",o.maxScrollLeft<u.doc.scrollLeft&&nn(u,Math.min(u.display.scroller.scrollLeft,o.maxScrollLeft),!0),u.display.maxLineChanged=!1),f=o.focus&&o.focus==b(d(u)),o.preparedSelection&&u.display.input.showSelection(o.preparedSelection,f),(o.updatedDisplay||o.startHeight!=u.doc.height)&&Pn(u,o.barMeasure),o.updatedDisplay&&oa(u,o.barMeasure),o.selectionChanged&&Ri(u),u.state.focused&&o.updateInput&&u.display.input.reset(o.typing),f&&ei(o.cm);for(l=0;l<i.length;l++){var E=void 0;if(o=i[l],u=o.cm,f=u.display,v=u.doc,o.updatedDisplay&&Fh(u,o.update),f.wheelStartX==null||o.scrollTop==null&&o.scrollLeft==null&&!o.scrollToPos||(f.wheelStartX=f.wheelStartY=null),o.scrollTop!=null&&Ph(u,o.scrollTop,o.forceScroll),o.scrollLeft!=null&&nn(u,o.scrollLeft,!0,!0),o.scrollToPos){var _=Ne(v,o.scrollToPos.from),P=Ne(v,o.scrollToPos.to),W=o.scrollToPos.margin;W==null&&(W=0),u.options.lineWrapping||_!=P||(P=_.sticky=="before"?fe(_.line,_.ch+1,"before"):_,_=_.ch?fe(_.line,_.sticky=="before"?_.ch-1:_.ch,"after"):_);for(var Z=0;5>Z;Z++){var ee=!1;E=Si(u,_);var te=P&&P!=_?Si(u,P):E;E={left:Math.min(E.left,te.left),top:Math.min(E.top,te.top)-W,right:Math.max(E.left,te.left),bottom:Math.max(E.bottom,te.bottom)+W},te=Gr(u,E);var ye=u.doc.scrollTop,De=u.doc.scrollLeft;if(te.scrollTop!=null&&(bs(u,te.scrollTop),1<Math.abs(u.doc.scrollTop-ye)&&(ee=!0)),te.scrollLeft!=null&&(nn(u,te.scrollLeft),1<Math.abs(u.doc.scrollLeft-De)&&(ee=!0)),!ee)break}P=E,Re(u,"scrollCursorIntoView")||(W=u.display,Z=W.sizer.getBoundingClientRect(),_=null,ee=W.wrapper.ownerDocument,0>P.top+Z.top?_=!0:P.bottom+Z.top>(ee.defaultView.innerHeight||ee.documentElement.clientHeight)&&(_=!1),_==null||J1||(P=h("div","​",null,`position: absolute;
                         top: `+(P.top-W.viewOffset-u.display.lineSpace.offsetTop)+`px;
                         height: `+(P.bottom-P.top+ze(u)+W.barHeight)+`px;
                         left: `+P.left+"px; width: "+Math.max(2,P.right-P.left)+"px;"),u.display.lineSpace.appendChild(P),P.scrollIntoView(_),u.display.lineSpace.removeChild(P)))}if(P=o.maybeHiddenMarkers,_=o.maybeUnhiddenMarkers,P)for(W=0;W<P.length;++W)P[W].lines.length||oe(P[W],"hide");if(_)for(P=0;P<_.length;++P)_[P].lines.length&&oe(_[P],"unhide");f.wrapper.offsetHeight&&(v.scrollTop=u.display.scroller.scrollTop),o.changeObjs&&oe(u,"changes",u,o.changeObjs),o.update&&o.update.finish()}})}function xi(e,i){if(e.curOp)return i();sn(e);try{return i()}finally{on(e)}}function Vt(e,i){return function(){if(e.curOp)return i.apply(e,arguments);sn(e);try{return i.apply(e,arguments)}finally{on(e)}}}function ni(e){return function(){if(this.curOp)return e.apply(this,arguments);sn(this);try{return e.apply(this,arguments)}finally{on(this)}}}function qt(e){return function(){var i=this.cm;if(!i||i.curOp)return e.apply(this,arguments);sn(i);try{return e.apply(this,arguments)}finally{on(i)}}}function Os(e,i){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(i,S(E1,e))}function E1(e){var i=e.doc;if(!(i.highlightFrontier>=e.display.viewTo)){var l=+new Date+e.options.workTime,o=I(e,i.highlightFrontier),u=[];i.iter(o.line,Math.min(i.first+i.size,e.display.viewTo+500),function(f){if(o.line>=e.display.viewFrom){var v=f.styles,E=f.text.length>e.options.maxHighlightLength?U(i.mode,o.state):null,_=m(e,f,o,!0);for(E&&(o.state=E),f.styles=_.styles,E=f.styleClasses,(_=_.classes)?f.styleClasses=_:E&&(f.styleClasses=null),_=!v||v.length!=f.styles.length||E!=_&&(!E||!_||E.bgClass!=_.bgClass||E.textClass!=_.textClass),E=0;!_&&E<v.length;++E)_=v[E]!=f.styles[E];_&&u.push(o.line),f.stateAfter=o.save()}else f.text.length<=e.options.maxHighlightLength&&L(e,f.text,o),f.stateAfter=o.line%5==0?o.save():null;if(o.nextLine(),+new Date>l)return Os(e,e.options.workDelay),!0}),i.highlightFrontier=o.line,i.modeFrontier=Math.max(i.modeFrontier,o.line),u.length&&xi(e,function(){for(var f=0;f<u.length;f++)Mi(e,u[f],"text")})}}function ra(e,i){var l=e.display,o=e.doc;if(i.editorIsHidden)return Qi(e),!1;if(!i.force&&i.visible.from>=l.viewFrom&&i.visible.to<=l.viewTo&&(l.updateLineNumbers==null||l.updateLineNumbers>=l.viewTo)&&l.renderedView==l.view&&k(e)==0)return!1;Wh(e)&&(Qi(e),i.dims=_n(e));var u=o.first+o.size,f=Math.max(i.visible.from-e.options.viewportMargin,o.first),v=Math.min(u,i.visible.to+e.options.viewportMargin);return l.viewFrom<f&&20>f-l.viewFrom&&(f=Math.max(o.first,l.viewFrom)),l.viewTo>v&&20>l.viewTo-v&&(v=Math.min(u,l.viewTo)),wr&&(f=Mr(e.doc,f),v=Tn(e.doc,v)),o=f!=l.viewFrom||v!=l.viewTo||l.lastWrapHeight!=i.wrapperHeight||l.lastWrapWidth!=i.wrapperWidth,u=e.display,u.view.length==0||f>=u.viewTo||v<=u.viewFrom?(u.view=dr(e,f,v),u.viewFrom=f):(u.viewFrom>f?u.view=dr(e,f,u.viewFrom).concat(u.view):u.viewFrom<f&&(u.view=u.view.slice(Ii(e,f))),u.viewFrom=f,u.viewTo<v?u.view=u.view.concat(dr(e,u.viewTo,v)):u.viewTo>v&&(u.view=u.view.slice(0,Ii(e,v)))),u.viewTo=v,l.viewOffset=gi(Se(e.doc,l.viewFrom)),e.display.mover.style.top=l.viewOffset+"px",v=k(e),!o&&v==0&&!i.force&&l.renderedView==l.view&&(l.updateLineNumbers==null||l.updateLineNumbers>=l.viewTo)?!1:(e.hasFocus()?f=null:(f=b(d(e)))&&x(e.display.lineDiv,f)?(f={activeElt:f},window.getSelection&&(u=d(e).defaultView.getSelection(),u.anchorNode&&u.extend&&x(e.display.lineDiv,u.anchorNode)&&(f.anchorNode=u.anchorNode,f.anchorOffset=u.anchorOffset,f.focusNode=u.focusNode,f.focusOffset=u.focusOffset))):f=null,4<v&&(l.lineDiv.style.display="none"),w1(e,l.updateLineNumbers,i.dims),4<v&&(l.lineDiv.style.display=""),l.renderedView=l.view,(v=f)&&v.activeElt&&v.activeElt!=b(v.activeElt.ownerDocument)&&(v.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(v.activeElt.nodeName)&&v.anchorNode&&x(document.body,v.anchorNode)&&x(document.body,v.focusNode)&&(u=v.activeElt.ownerDocument,f=u.defaultView.getSelection(),u=u.createRange(),u.setEnd(v.anchorNode,v.anchorOffset),u.collapse(!1),f.removeAllRanges(),f.addRange(u),f.extend(v.focusNode,v.focusOffset))),a(l.cursorDiv),a(l.selectionDiv),l.gutters.style.height=l.sizer.style.minHeight=0,o&&(l.lastWrapHeight=i.wrapperHeight,l.lastWrapWidth=i.wrapperWidth,Os(e,400)),l.updateLineNumbers=null,!0)}function Fh(e,i){for(var l=i.viewport,o=!0;;o=!1){if(o&&e.options.lineWrapping&&i.oldDisplayWidth!=Ke(e))o&&(i.visible=Fr(e.display,e.doc,l));else if(l&&l.top!=null&&(l={top:Math.min(e.doc.height+xe(e.display)-Ot(e),l.top)}),i.visible=Fr(e.display,e.doc,l),i.visible.from>=e.display.viewFrom&&i.visible.to<=e.display.viewTo)break;if(!ra(e,i))break;rn(e),o=Cs(e),de(e),Pn(e,o),oa(e,o),i.force=!1}i.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(i.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function na(e,i){if(i=new il(e,i),ra(e,i)){rn(e),Fh(e,i);var l=Cs(e);de(e),Pn(e,l),oa(e,l),i.finish()}}function w1(e,i,l){function o(ee){var te=ee.nextSibling;return si&&Di&&e.display.currentWheelTarget==ee?ee.style.display="none":ee.parentNode.removeChild(ee),te}var u=e.display,f=e.options.lineNumbers,v=u.lineDiv,E=v.firstChild,_=u.view;u=u.viewFrom;for(var P=0;P<_.length;P++){var W=_[P];if(!W.hidden)if(W.node&&W.node.parentNode==v){for(;E!=W.node;)E=o(E);E=f&&i!=null&&i<=u&&W.lineNumber,W.changes&&(-1<T(W.changes,"gutter")&&(E=!1),en(e,W,u,l)),E&&(a(W.lineNumber),W.lineNumber.appendChild(document.createTextNode(He(e.options,u)))),E=W.node.nextSibling}else{var Z=Xi(e,W,u,l);v.insertBefore(Z,E)}u+=W.size}for(;E;)E=o(E)}function sa(e){e.sizer.style.marginLeft=e.gutters.offsetWidth+"px",Rt(e,"gutterChanged",e)}function oa(e,i){e.display.sizer.style.minHeight=i.docHeight+"px",e.display.heightForcer.style.top=i.docHeight+"px",e.display.gutters.style.height=i.docHeight+e.display.barHeight+ze(e)+"px"}function Gh(e){var i=e.display,l=i.view;if(i.alignWidgets||i.gutters.firstChild&&e.options.fixedGutter){for(var o=Rs(i)-i.scroller.scrollLeft+e.doc.scrollLeft,u=i.gutters.offsetWidth,f=o+"px",v=0;v<l.length;v++)if(!l[v].hidden){e.options.fixedGutter&&(l[v].gutter&&(l[v].gutter.style.left=f),l[v].gutterBackground&&(l[v].gutterBackground.style.left=f));var E=l[v].alignable;if(E)for(var _=0;_<E.length;_++)E[_].style.left=f}e.options.fixedGutter&&(i.gutters.style.left=o+u+"px")}}function Wh(e){if(!e.options.lineNumbers)return!1;var i=e.doc;i=He(e.options,i.first+i.size-1);var l=e.display;if(i.length!=l.lineNumChars){var o=l.measure.appendChild(h("div",[h("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),u=o.firstChild.offsetWidth;return o=o.offsetWidth-u,l.lineGutter.style.width="",l.lineNumInnerWidth=Math.max(u,l.lineGutter.offsetWidth-o)+1,l.lineNumWidth=l.lineNumInnerWidth+o,l.lineNumChars=l.lineNumInnerWidth?i.length:-1,l.lineGutter.style.width=l.lineNumWidth+"px",sa(e.display),!0}return!1}function la(e,i){for(var l=[],o=!1,u=0;u<e.length;u++){var f=e[u],v=null;if(typeof f!="string"&&(v=f.style,f=f.className),f=="CodeMirror-linenumbers")if(i)o=!0;else continue;l.push({className:f,style:v})}return i&&!o&&l.push({className:"CodeMirror-linenumbers",style:null}),l}function Uh(e){var i=e.gutters,l=e.gutterSpecs;a(i),e.lineGutter=null;for(var o=0;o<l.length;++o){var u=l[o],f=u.className;u=u.style;var v=i.appendChild(h("div",null,"CodeMirror-gutter "+f));u&&(v.style.cssText=u),f=="CodeMirror-linenumbers"&&(e.lineGutter=v,v.style.width=(e.lineNumWidth||1)+"px")}i.style.display=l.length?"":"none",sa(e)}function _s(e){Uh(e.display),Qt(e),Gh(e)}function S1(e,i,l,o){this.input=l,this.scrollbarFiller=h("div",null,"CodeMirror-scrollbar-filler"),this.scrollbarFiller.setAttribute("cm-not-content","true"),this.gutterFiller=h("div",null,"CodeMirror-gutter-filler"),this.gutterFiller.setAttribute("cm-not-content","true"),this.lineDiv=p("div",null,"CodeMirror-code"),this.selectionDiv=h("div",null,null,"position: relative; z-index: 1"),this.cursorDiv=h("div",null,"CodeMirror-cursors"),this.measure=h("div",null,"CodeMirror-measure"),this.lineMeasure=h("div",null,"CodeMirror-measure"),this.lineSpace=p("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");var u=p("div",[this.lineSpace],"CodeMirror-lines");this.mover=h("div",[u],null,"position: relative"),this.sizer=h("div",[this.mover],"CodeMirror-sizer"),this.sizerWidth=null,this.heightForcer=h("div",null,null,"position: absolute; height: 50px; width: 1px;"),this.gutters=h("div",null,"CodeMirror-gutters"),this.lineGutter=null,this.scroller=h("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll"),this.scroller.setAttribute("tabIndex","-1"),this.wrapper=h("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror"),kr&&105<=G0&&(this.wrapper.style.clipPath="inset(0px)"),this.wrapper.setAttribute("translate","no"),st&&8>Tt&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0),si||Er&&Gs||(this.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(this.wrapper):e(this.wrapper)),this.reportedViewFrom=this.reportedViewTo=this.viewFrom=this.viewTo=i.first,this.view=[],this.externalMeasured=this.renderedView=null,this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0,this.updateLineNumbers=null,this.nativeBarWidth=this.barHeight=this.barWidth=0,this.scrollbarsClipped=!1,this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null,this.alignWidgets=!1,this.maxLine=this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null,this.maxLineLength=0,this.maxLineChanged=!1,this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null,this.shift=!1,this.activeTouch=this.selForContextMenu=null,this.gutterSpecs=la(o.gutters,o.lineNumbers),Uh(this),l.init(this)}function kh(e){var i=e.wheelDeltaX,l=e.wheelDeltaY;return i==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(i=e.detail),l==null&&e.detail&&e.axis==e.VERTICAL_AXIS?l=e.detail:l==null&&(l=e.wheelDelta),{x:i,y:l}}function R1(e){return e=kh(e),e.x*=Sr,e.y*=Sr,e}function Hh(e,i){kr&&G0==102&&(e.display.chromeScrollHack==null?e.display.sizer.style.pointerEvents="none":clearTimeout(e.display.chromeScrollHack),e.display.chromeScrollHack=setTimeout(function(){e.display.chromeScrollHack=null,e.display.sizer.style.pointerEvents=""},100));var l=kh(i),o=l.x;l=l.y;var u=Sr;i.deltaMode===0&&(o=i.deltaX,l=i.deltaY,u=1);var f=e.display,v=f.scroller,E=v.scrollWidth>v.clientWidth,_=v.scrollHeight>v.clientHeight;if(o&&E||l&&_){if(l&&Di&&si){E=i.target;var P=f.view;e:for(;E!=v;E=E.parentNode)for(var W=0;W<P.length;W++)if(P[W].node==E){e.display.currentWheelTarget=E;break e}}!o||Er||Hi||u==null?(l&&u!=null&&(u*=l,_=e.doc.scrollTop,E=_+f.wrapper.clientHeight,0>u?_=Math.max(0,_+u-50):E=Math.min(e.doc.height,E+u+50),na(e,{top:_,bottom:E})),20>rl&&i.deltaMode!==0&&(f.wheelStartX==null?(f.wheelStartX=v.scrollLeft,f.wheelStartY=v.scrollTop,f.wheelDX=o,f.wheelDY=l,setTimeout(function(){if(f.wheelStartX!=null){var Z=v.scrollLeft-f.wheelStartX,ee=v.scrollTop-f.wheelStartY;Z=ee&&f.wheelDY&&ee/f.wheelDY||Z&&f.wheelDX&&Z/f.wheelDX,f.wheelStartX=f.wheelStartY=null,Z&&(Sr=(Sr*rl+Z)/(rl+1),++rl)}},200)):(f.wheelDX+=o,f.wheelDY+=l))):(l&&_&&bs(e,Math.max(0,v.scrollTop+l*u)),nn(e,Math.max(0,v.scrollLeft+o*u)),(!l||l&&_)&&X(i),f.wheelStartX=null)}}function ki(e,i,l){e=e&&e.options.selectionsMayTouch,l=i[l],i.sort(function(_,P){return Le(_.from(),P.from())}),l=T(i,l);for(var o=1;o<i.length;o++){var u=i[o],f=i[o-1],v=Le(f.to(),u.from());if(e&&!u.empty()?0<v:0<=v){v=ht(f.from(),u.from());var E=Wt(f.to(),u.to());u=f.empty()?u.from()==u.head:f.from()==f.head,o<=l&&--l,i.splice(--o,2,new ct(u?E:v,u?v:E))}}return new Ti(i,l)}function yr(e,i){return new Ti([new ct(e,i||e)],0)}function Wr(e){return e.text?fe(e.from.line+e.text.length-1,O(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function zh(e,i){if(0>Le(e,i.from))return e;if(0>=Le(e,i.to))return Wr(i);var l=e.line+i.text.length-(i.to.line-i.from.line)-1,o=e.ch;return e.line==i.to.line&&(o+=Wr(i).ch-i.to.ch),fe(l,o)}function aa(e,i){for(var l=[],o=0;o<e.sel.ranges.length;o++){var u=e.sel.ranges[o];l.push(new ct(zh(u.anchor,i),zh(u.head,i)))}return ki(e.cm,l,e.sel.primIndex)}function $h(e,i,l){return e.line==i.line?fe(l.line,e.ch-i.ch+l.ch):fe(l.line+(e.line-i.line),e.ch)}function ua(e){e.doc.mode=be(e.options,e.doc.modeOption),Is(e)}function Is(e){e.doc.iter(function(i){i.stateAfter&&(i.stateAfter=null),i.styles&&(i.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Os(e,100),e.state.modeGen++,e.curOp&&Qt(e)}function jh(e,i){return i.from.ch==0&&i.to.ch==0&&O(i.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function ca(e,i,l,o){function u(ye,De,qe){ye.text=De,ye.stateAfter&&(ye.stateAfter=null),ye.styles&&(ye.styles=null),ye.order!=null&&(ye.order=null),Rn(ye),Ir(ye,qe),De=o?o(ye):1,De!=ye.height&&Qe(ye,De),Rt(ye,"change",ye,i)}function f(ye,De){for(var qe=[];ye<De;++ye)qe.push(new jn(_[ye],l?l[ye]:null,o));return qe}var v=i.from,E=i.to,_=i.text,P=Se(e,v.line),W=Se(e,E.line),Z=O(_),ee=l?l[_.length-1]:null,te=E.line-v.line;i.full?(e.insert(0,f(0,_.length)),e.remove(_.length,e.size-_.length)):jh(e,i)?(E=f(0,_.length-1),u(W,W.text,ee),te&&e.remove(v.line,te),E.length&&e.insert(v.line,E)):P==W?_.length==1?u(P,P.text.slice(0,v.ch)+Z+P.text.slice(E.ch),ee):(te=f(1,_.length-1),te.push(new jn(Z+P.text.slice(E.ch),ee,o)),u(P,P.text.slice(0,v.ch)+_[0],l?l[0]:null),e.insert(v.line+1,te)):_.length==1?(u(P,P.text.slice(0,v.ch)+_[0]+W.text.slice(E.ch),l?l[0]:null),e.remove(v.line+1,te)):(u(P,P.text.slice(0,v.ch)+_[0],l?l[0]:null),u(W,Z+W.text.slice(E.ch),ee),ee=f(1,_.length-1),1<te&&e.remove(v.line+1,te-1),e.insert(v.line+1,ee)),Rt(e,"change",e,i)}function Ur(e,i,l){function o(u,f,v){if(u.linked)for(var E=0;E<u.linked.length;++E){var _=u.linked[E];if(_.doc!=f){var P=v&&_.sharedHist;(!l||P)&&(i(_.doc,P),o(_.doc,u,P))}}}o(e,null,!0)}function Vh(e,i){if(i.cm)throw Error("This document is already in use.");e.doc=i,i.cm=e,In(e),ua(e),qh(e),e.options.direction=i.direction,e.options.lineWrapping||Jr(e),e.options.mode=i.modeOption,Qt(e)}function qh(e){(e.doc.direction=="rtl"?y:an)(e.display.lineDiv,"CodeMirror-rtl")}function T1(e){xi(e,function(){qh(e),Qt(e)})}function Wo(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function ha(e,i){var l={from:Lt(i.from),to:Wr(i),text:Pe(e,i.from,i.to)};return Xh(e,l,i.from.line,i.to.line+1),Ur(e,function(o){return Xh(o,l,i.from.line,i.to.line+1)},!0),l}function Kh(e){for(;e.length&&O(e).ranges;)e.pop()}function Yh(e,i,l,o){var u=e.history;u.undone.length=0;var f=+new Date,v;if(v=u.lastOp==o||u.lastOrigin==i.origin&&i.origin&&(i.origin.charAt(0)=="+"&&u.lastModTime>f-(e.cm?e.cm.options.historyEventDelay:500)||i.origin.charAt(0)=="*")){if(u.lastOp==o){Kh(u.done);var E=O(u.done)}else u.done.length&&!O(u.done).ranges?E=O(u.done):1<u.done.length&&!u.done[u.done.length-2].ranges?(u.done.pop(),E=O(u.done)):E=void 0;v=E}if(v){var _=O(E.changes);Le(i.from,i.to)==0&&Le(i.from,_.to)==0?_.to=Wr(i):E.changes.push(ha(e,i))}else for((E=O(u.done))&&E.ranges||Uo(e.sel,u.done),E={changes:[ha(e,i)],generation:u.generation},u.done.push(E);u.done.length>u.undoDepth;)u.done.shift(),u.done[0].ranges||u.done.shift();u.done.push(l),u.generation=++u.maxGeneration,u.lastModTime=u.lastSelTime=f,u.lastOp=u.lastSelOp=o,u.lastOrigin=u.lastSelOrigin=i.origin,_||oe(e,"historyAdded")}function Uo(e,i){var l=O(i);l&&l.ranges&&l.equals(e)||i.push(e)}function Xh(e,i,l,o){var u=i["spans_"+e.id],f=0;e.iter(Math.max(e.first,l),Math.min(e.first+e.size,o),function(v){v.markedSpans&&((u||(u=i["spans_"+e.id]={}))[f]=v.markedSpans),++f})}function Zh(e,i){var l;if(l=i["spans_"+e.id]){for(var o=[],u=0;u<i.text.length;++u){var f=o,v=f.push,E=void 0,_=l[u];if(_){for(var P=0;P<_.length;++P)_[P].marker.explicitlyCleared?E||(E=_.slice(0,P)):E&&E.push(_[P]);E=E?E.length?E:null:_}else E=null;v.call(f,E)}l=o}else l=null;if(e=ut(e,i),!l)return e;if(!e)return l;for(i=0;i<l.length;++i)if(o=l[i],u=e[i],o&&u)e:for(f=0;f<u.length;++f){for(v=u[f],E=0;E<o.length;++E)if(o[E].marker==v.marker)continue e;o.push(v)}else u&&(l[i]=u);return l}function Nn(e,i,l){for(var o=[],u=0;u<e.length;++u){var f=e[u];if(f.ranges)o.push(l?Ti.prototype.deepCopy.call(f):f);else{f=f.changes;var v=[];o.push({changes:v});for(var E=0;E<f.length;++E){var _=f[E],P;if(v.push({from:_.from,to:_.to,text:_.text}),i)for(var W in _)(P=W.match(/^spans_(\d+)$/))&&-1<T(i,Number(P[1]))&&(O(v)[W]=_[W],delete _[W])}}}return o}function fa(e,i,l,o){return o?(e=e.anchor,l&&(o=0>Le(i,e),o!=0>Le(l,e)?(e=i,i=l):o!=0>Le(i,l)&&(i=l)),new ct(e,i)):new ct(l||i,i)}function ko(e,i,l,o,u){u==null&&(u=e.cm&&(e.cm.display.shift||e.extend)),Zt(e,new Ti([fa(e.sel.primary(),i,l,u)],0),o)}function Jh(e,i,l){for(var o=[],u=e.cm&&(e.cm.display.shift||e.extend),f=0;f<e.sel.ranges.length;f++)o[f]=fa(e.sel.ranges[f],i[f],null,u);i=ki(e.cm,o,e.sel.primIndex),Zt(e,i,l)}function da(e,i,l,o){var u=e.sel.ranges.slice(0);u[i]=l,Zt(e,ki(e.cm,u,e.sel.primIndex),o)}function A1(e,i,l){return l={ranges:i.ranges,update:function(o){this.ranges=[];for(var u=0;u<o.length;u++)this.ranges[u]=new ct(Ne(e,o[u].anchor),Ne(e,o[u].head))},origin:l&&l.origin},oe(e,"beforeSelectionChange",e,l),e.cm&&oe(e.cm,"beforeSelectionChange",e.cm,l),l.ranges!=i.ranges?ki(e.cm,l.ranges,l.ranges.length-1):i}function Qh(e,i,l){var o=e.history.done,u=O(o);u&&u.ranges?(o[o.length-1]=i,Ho(e,i,l)):Zt(e,i,l)}function Zt(e,i,l){Ho(e,i,l),i=e.sel;var o=e.cm?e.cm.curOp.id:NaN,u=e.history,f=l&&l.origin,v;if(!(v=o==u.lastSelOp)&&(v=f&&u.lastSelOrigin==f)&&!(v=u.lastModTime==u.lastSelTime&&u.lastOrigin==f)){v=O(u.done);var E=f.charAt(0);v=E=="*"||E=="+"&&v.ranges.length==i.ranges.length&&v.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}v?u.done[u.done.length-1]=i:Uo(i,u.done),u.lastSelTime=+new Date,u.lastSelOrigin=f,u.lastSelOp=o,l&&l.clearRedo!==!1&&Kh(u.undone)}function Ho(e,i,l){(Oe(e,"beforeSelectionChange")||e.cm&&Oe(e.cm,"beforeSelectionChange"))&&(i=A1(e,i,l));var o=l&&l.bias||(0>Le(i.primary().head,e.sel.primary().head)?-1:1);e0(e,i0(e,i,o,!0)),l&&l.scroll===!1||!e.cm||e.cm.getOption("readOnly")=="nocursor"||Ln(e.cm)}function e0(e,i){i.equals(e.sel)||(e.sel=i,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,ce(e.cm)),Rt(e,"cursorActivity",e))}function t0(e){e0(e,i0(e,e.sel,null,!1))}function i0(e,i,l,o){for(var u,f=0;f<i.ranges.length;f++){var v=i.ranges[f],E=i.ranges.length==e.sel.ranges.length&&e.sel.ranges[f],_=zo(e,v.anchor,E&&E.anchor,l,o);E=v.head==v.anchor?_:zo(e,v.head,E&&E.head,l,o),(u||_!=v.anchor||E!=v.head)&&(u||(u=i.ranges.slice(0,f)),u[f]=new ct(_,E))}return u?ki(e.cm,u,i.primIndex):i}function Bn(e,i,l,o,u){var f=Se(e,i.line);if(f.markedSpans)for(var v=0;v<f.markedSpans.length;++v){var E=f.markedSpans[v],_=E.marker,P="selectLeft"in _?!_.selectLeft:_.inclusiveLeft,W="selectRight"in _?!_.selectRight:_.inclusiveRight;if((E.from==null||(P?E.from<=i.ch:E.from<i.ch))&&(E.to==null||(W?E.to>=i.ch:E.to>i.ch))){if(u&&(oe(_,"beforeCursorEnter"),_.explicitlyCleared))if(f.markedSpans){--v;continue}else break;if(_.atomic)return l&&(v=_.find(0>o?1:-1),E=void 0,(0>o?W:P)&&(v=r0(e,v,-o,v&&v.line==i.line?f:null)),v&&v.line==i.line&&(E=Le(v,l))&&(0>o?0>E:0<E))?Bn(e,v,i,o,u):(l=_.find(0>o?-1:1),(0>o?P:W)&&(l=r0(e,l,o,l.line==i.line?f:null)),l?Bn(e,l,i,o,u):null)}}return i}function zo(e,i,l,o,u){return o=o||1,i=Bn(e,i,l,o,u)||!u&&Bn(e,i,l,o,!0)||Bn(e,i,l,-o,u)||!u&&Bn(e,i,l,-o,!0),i||(e.cantEdit=!0,fe(e.first,0))}function r0(e,i,l,o){return 0>l&&i.ch==0?i.line>e.first?Ne(e,fe(i.line-1)):null:0<l&&i.ch==(o||Se(e,i.line)).text.length?i.line<e.first+e.size-1?fe(i.line+1,0):null:new fe(i.line,i.ch+l)}function n0(e){e.setSelection(fe(e.firstLine(),0),fe(e.lastLine()),tr)}function s0(e,i,l){var o={canceled:!1,from:i.from,to:i.to,text:i.text,origin:i.origin,cancel:function(){return o.canceled=!0}};return l&&(o.update=function(u,f,v,E){u&&(o.from=Ne(e,u)),f&&(o.to=Ne(e,f)),v&&(o.text=v),E!==void 0&&(o.origin=E)}),oe(e,"beforeChange",e,o),e.cm&&oe(e.cm,"beforeChange",e.cm,o),o.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:o.from,to:o.to,text:o.text,origin:o.origin}}function Fn(e,i,l){if(e.cm){if(!e.cm.curOp)return Vt(e.cm,Fn)(e,i,l);if(e.cm.state.suppressEdits)return}if(!((Oe(e,"beforeChange")||e.cm&&Oe(e.cm,"beforeChange"))&&(i=s0(e,i,!0),!i)))if(l=k0&&!l&&Fi(e,i.from,i.to))for(var o=l.length-1;0<=o;--o)o0(e,{from:l[o].from,to:l[o].to,text:o?[""]:i.text,origin:i.origin});else o0(e,i)}function o0(e,i){if(i.text.length!=1||i.text[0]!=""||Le(i.from,i.to)!=0){var l=aa(e,i);Yh(e,i,l,e.cm?e.cm.curOp.id:NaN),Ms(e,i,l,ut(e,i));var o=[];Ur(e,function(u,f){f||T(o,u.history)!=-1||(c0(u.history,i),o.push(u.history)),Ms(u,i,null,ut(u,i))})}}function $o(e,i,l){var o=e.cm&&e.cm.state.suppressEdits;if(!o||l){for(var u=e.history,f,v=e.sel,E=i=="undo"?u.done:u.undone,_=i=="undo"?u.undone:u.done,P=0;P<E.length&&(f=E[P],l?!f.ranges||f.equals(e.sel):f.ranges);P++);if(P!=E.length){for(u.lastOrigin=u.lastSelOrigin=null;;)if(f=E.pop(),f.ranges){if(Uo(f,_),l&&!f.equals(e.sel)){Zt(e,f,{clearRedo:!1});return}v=f}else{if(o){E.push(f);return}break}var W=[];Uo(v,_),_.push({changes:W,generation:u.generation}),u.generation=f.generation||++u.maxGeneration;var Z=Oe(e,"beforeChange")||e.cm&&Oe(e.cm,"beforeChange");for(l=function(ee){var te=f.changes[ee];if(te.origin=i,Z&&!s0(e,te,!1))return E.length=0,{};W.push(ha(e,te));var ye=ee?aa(e,te):O(E);Ms(e,te,ye,Zh(e,te)),!ee&&e.cm&&e.cm.scrollIntoView({from:te.from,to:Wr(te)});var De=[];Ur(e,function(qe,$t){$t||T(De,qe.history)!=-1||(c0(qe.history,te),De.push(qe.history)),Ms(qe,te,null,Zh(qe,te))})},o=f.changes.length-1;0<=o;--o)if(u=l(o))return u.v}}}function l0(e,i){if(i!=0&&(e.first+=i,e.sel=new Ti(H(e.sel.ranges,function(u){return new ct(fe(u.anchor.line+i,u.anchor.ch),fe(u.head.line+i,u.head.ch))}),e.sel.primIndex),e.cm)){Qt(e.cm,e.first,e.first-i,i);for(var l=e.cm.display,o=l.viewFrom;o<l.viewTo;o++)Mi(e.cm,o,"gutter")}}function Ms(e,i,l,o){if(e.cm&&!e.cm.curOp)return Vt(e.cm,Ms)(e,i,l,o);if(i.to.line<e.first)l0(e,i.text.length-1-(i.to.line-i.from.line));else if(!(i.from.line>e.lastLine())){if(i.from.line<e.first){var u=i.text.length-1-(e.first-i.from.line);l0(e,u),i={from:fe(e.first,0),to:fe(i.to.line+u,i.to.ch),text:[O(i.text)],origin:i.origin}}u=e.lastLine(),i.to.line>u&&(i={from:i.from,to:fe(u,Se(e,u).text.length),text:[i.text[0]],origin:i.origin}),i.removed=Pe(e,i.from,i.to),l||(l=aa(e,i)),e.cm?b1(e.cm,i,o):ca(e,i,o),Ho(e,l,tr),e.cantEdit&&zo(e,fe(e.firstLine(),0))&&(e.cantEdit=!1)}}function b1(e,i,l){var o=e.doc,u=e.display,f=i.from,v=i.to,E=!1,_=f.line;e.options.lineWrapping||(_=pe(ai(Se(o,f.line))),o.iter(_,v.line+1,function(P){if(P==u.maxLine)return E=!0})),-1<o.sel.contains(i.from,i.to)&&ce(e),ca(o,i,l,Bo(e)),e.options.lineWrapping||(o.iter(_,f.line+i.text.length,function(P){var W=Vi(P);W>u.maxLineLength&&(u.maxLine=P,u.maxLineLength=W,u.maxLineChanged=!0,E=!1)}),E&&(e.curOp.updateMaxLine=!0)),$e(o,f.line),Os(e,400),l=i.text.length-(v.line-f.line)-1,i.full?Qt(e):f.line!=v.line||i.text.length!=1||jh(e.doc,i)?Qt(e,f.line,v.line+1,l):Mi(e,f.line,"text"),l=Oe(e,"changes"),((o=Oe(e,"change"))||l)&&(i={from:f,to:v,text:i.text,removed:i.removed,origin:i.origin},o&&Rt(e,"change",e,i),l&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(i)),e.display.selForContextMenu=null}function Gn(e,i,l,o,u){o||(o=l),0>Le(o,l)&&(o=[o,l],l=o[0],o=o[1]),typeof i=="string"&&(i=e.splitLines(i)),Fn(e,{from:l,to:o,text:i,origin:u})}function a0(e,i,l,o){l<e.line?e.line+=o:i<e.line&&(e.line=i,e.ch=0)}function u0(e,i,l,o){for(var u=0;u<e.length;++u){var f=e[u],v=!0;if(f.ranges)for(f.copied||(f=e[u]=f.deepCopy(),f.copied=!0),v=0;v<f.ranges.length;v++)a0(f.ranges[v].anchor,i,l,o),a0(f.ranges[v].head,i,l,o);else{for(var E=0;E<f.changes.length;++E){var _=f.changes[E];if(l<_.from.line)_.from=fe(_.from.line+o,_.from.ch),_.to=fe(_.to.line+o,_.to.ch);else if(i<=_.to.line){v=!1;break}}v||(e.splice(0,u+1),u=0)}}}function c0(e,i){var l=i.from.line,o=i.to.line;i=i.text.length-(o-l)-1,u0(e.done,l,o,i),u0(e.undone,l,o,i)}function Ds(e,i,l,o){var u=i,f=i;return typeof i=="number"?f=Se(e,Math.max(e.first,Math.min(i,e.first+e.size-1))):u=pe(i),u==null?null:(o(f,u)&&e.cm&&Mi(e.cm,u,l),f)}function Ls(e){this.lines=e,this.parent=null;for(var i=0,l=0;l<e.length;++l)e[l].parent=this,i+=e[l].height;this.height=i}function Ps(e){this.children=e;for(var i=0,l=0,o=0;o<e.length;++o){var u=e[o];i+=u.chunkSize(),l+=u.height,u.parent=this}this.size=i,this.height=l,this.parent=null}function C1(e,i,l,o){var u=new js(e,l,o),f=e.cm;return f&&u.noHScroll&&(f.display.alignWidgets=!0),Ds(e,i,"widget",function(v){var E=v.widgets||(v.widgets=[]);return u.insertAt==null?E.push(u):E.splice(Math.min(E.length,Math.max(0,u.insertAt)),0,u),u.line=v,f&&!ui(e,v)&&(E=gi(v)<e.scrollTop,Qe(v,v.height+D(u)),E&&Fo(f,u.height),f.curOp.forceUpdate=!0),!0}),f&&Rt(f,"lineWidgetAdded",f,u,typeof i=="number"?i:pe(i)),u}function Wn(e,i,l,o,u){if(o&&o.shared)return O1(e,i,l,o,u);if(e.cm&&!e.cm.curOp)return Vt(e.cm,Wn)(e,i,l,o,u);var f=new zr(e,u);if(u=Le(i,l),o&&R(o,f,!1),0<u||u==0&&f.clearWhenEmpty!==!1)return f;if(f.replacedWith&&(f.collapsed=!0,f.widgetNode=p("span",[f.replacedWith],"CodeMirror-widget"),o.handleMouseEvents||f.widgetNode.setAttribute("cm-ignore-events","true"),o.insertLeft&&(f.widgetNode.insertLeft=!0)),f.collapsed){if(hr(e,i.line,i,l,f)||i.line!=l.line&&hr(e,l.line,i,l,f))throw Error("Inserting collapsed marker partially overlapping an existing one");wr=!0}f.addToHistory&&Yh(e,{from:i,to:l,origin:"markText"},e.sel,NaN);var v=i.line,E=e.cm,_;if(e.iter(v,l.line+1,function(P){E&&f.collapsed&&!E.options.lineWrapping&&ai(P)==E.display.maxLine&&(_=!0),f.collapsed&&v!=i.line&&Qe(P,0);var W=new tt(f,v==i.line?i.ch:null,v==l.line?l.ch:null),Z=e.cm&&e.cm.curOp;(Z=Z&&window.WeakSet&&(Z.markedSpans||(Z.markedSpans=new WeakSet)))&&P.markedSpans&&Z.has(P.markedSpans)?P.markedSpans.push(W):(P.markedSpans=P.markedSpans?P.markedSpans.concat([W]):[W],Z&&Z.add(P.markedSpans)),W.marker.attachLine(P),++v}),f.collapsed&&e.iter(i.line,l.line+1,function(P){ui(e,P)&&Qe(P,0)}),f.clearOnEnter&&Ve(f,"beforeCursorEnter",function(){return f.clear()}),f.readOnly&&(k0=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),f.collapsed&&(f.id=++$0,f.atomic=!0),E){if(_&&(E.curOp.updateMaxLine=!0),f.collapsed)Qt(E,i.line,l.line+1);else if(f.className||f.startStyle||f.endStyle||f.css||f.attributes||f.title)for(o=i.line;o<=l.line;o++)Mi(E,o,"text");f.atomic&&t0(E.doc),Rt(E,"markerAdded",E,f)}return f}function O1(e,i,l,o,u){o=R(o),o.shared=!1;var f=[Wn(e,i,l,o,u)],v=f[0],E=o.widgetNode;return Ur(e,function(_){E&&(o.widgetNode=E.cloneNode(!0)),f.push(Wn(_,Ne(_,i),Ne(_,l),o,u));for(var P=0;P<_.linked.length;++P)if(_.linked[P].isParent)return;v=O(f)}),new Vs(f,v)}function h0(e){return e.findMarks(fe(e.first,0),e.clipPos(fe(e.lastLine())),function(i){return i.parent})}function _1(e){for(var i=function(o){o=e[o];var u=[o.primary.doc];Ur(o.primary.doc,function(E){return u.push(E)});for(var f=0;f<o.markers.length;f++){var v=o.markers[f];T(u,v.doc)==-1&&(v.parent=null,o.markers.splice(f--,1))}},l=0;l<e.length;l++)i(l)}function I1(e){var i=this;if(f0(i),!Re(i,e)&&!z(i.display,e)){X(e),st&&(j0=+new Date);var l=mr(i,e,!0),o=e.dataTransfer.files;if(l&&!i.isReadOnly())if(o&&o.length&&window.FileReader&&window.File)for(var u=o.length,f=Array(u),v=0,E=function(){++v==u&&Vt(i,function(){l=Ne(i.doc,l);var W={from:l,to:l,text:i.doc.splitLines(f.filter(function(Z){return Z!=null}).join(i.doc.lineSeparator())),origin:"paste"};Fn(i.doc,W),Qh(i.doc,yr(Ne(i.doc,l),Ne(i.doc,Wr(W))))})()},_=function(W,Z){if(i.options.allowDropFileTypes&&T(i.options.allowDropFileTypes,W.type)==-1)E();else{var ee=new FileReader;ee.onerror=function(){return E()},ee.onload=function(){var te=ee.result;/[\x00-\x08\x0e-\x1f]{2}/.test(te)||(f[Z]=te),E()},ee.readAsText(W)}},P=0;P<o.length;P++)_(o[P],P);else if(i.state.draggingText&&-1<i.doc.sel.contains(l))i.state.draggingText(e),setTimeout(function(){return i.display.input.focus()},20);else try{if(_=e.dataTransfer.getData("Text")){if(i.state.draggingText&&!i.state.draggingText.copy&&(P=i.listSelections()),Ho(i.doc,yr(l,l)),P)for(o=0;o<P.length;++o)Gn(i.doc,"",P[o].anchor,P[o].head,"drag");i.replaceSelection(_,"around","paste"),i.display.input.focus()}}catch{}}}function f0(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function d0(e){if(document.getElementsByClassName){for(var i=document.getElementsByClassName("CodeMirror"),l=[],o=0;o<i.length;o++){var u=i[o].CodeMirror;u&&l.push(u)}l.length&&l[0].operation(function(){for(var f=0;f<l.length;f++)e(l[f])})}}function M1(){var e;Ve(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,d0(D1)},100))}),Ve(window,"blur",function(){return d0(vr)})}function D1(e){var i=e.display;i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.scrollbarsClipped=!1,e.setSize()}function L1(e){var i=e.split(/-(?!$)/);e=i[i.length-1];for(var l,o,u,f,v=0;v<i.length-1;v++){var E=i[v];if(/^(cmd|meta|m)$/i.test(E))f=!0;else if(/^a(lt)?$/i.test(E))l=!0;else if(/^(c|ctrl|control)$/i.test(E))o=!0;else if(/^s(hift)?$/i.test(E))u=!0;else throw Error("Unrecognized modifier name: "+E)}return l&&(e="Alt-"+e),o&&(e="Ctrl-"+e),f&&(e="Cmd-"+e),u&&(e="Shift-"+e),e}function P1(e){var i={},l;for(l in e)if(e.hasOwnProperty(l)){var o=e[l];if(!/^(name|fallthrough|(de|at)tach)$/.test(l)){if(o!="...")for(var u=H(l.split(" "),L1),f=0;f<u.length;f++){if(f==u.length-1)var v=u.join(" "),E=o;else v=u.slice(0,f+1).join(" "),E="...";var _=i[v];if(!_)i[v]=E;else if(_!=E)throw Error("Inconsistent bindings for "+v)}delete e[l]}}for(var P in i)e[P]=i[P];return e}function Un(e,i,l,o){i=jo(i);var u=i.call?i.call(e,o):i[e];if(u===!1)return"nothing";if(u==="...")return"multi";if(u!=null&&l(u))return"handled";if(i.fallthrough){if(Object.prototype.toString.call(i.fallthrough)!="[object Array]")return Un(e,i.fallthrough,l,o);for(u=0;u<i.fallthrough.length;u++){var f=Un(e,i.fallthrough[u],l,o);if(f)return f}}}function p0(e){return e=typeof e=="string"?e:$r[e.keyCode],e=="Ctrl"||e=="Alt"||e=="Shift"||e=="Mod"}function g0(e,i,l){var o=e;return i.altKey&&o!="Alt"&&(e="Alt-"+e),(W0?i.metaKey:i.ctrlKey)&&o!="Ctrl"&&(e="Ctrl-"+e),(W0?i.ctrlKey:i.metaKey)&&o!="Mod"&&(e="Cmd-"+e),!l&&i.shiftKey&&o!="Shift"&&(e="Shift-"+e),e}function x0(e,i){if(Hi&&e.keyCode==34&&e.char)return!1;var l=$r[e.keyCode];return l==null||e.altGraphKey?!1:(e.keyCode==3&&e.code&&(l=e.code),g0(l,e,i))}function jo(e){return typeof e=="string"?Ys[e]:e}function kn(e,i){for(var l=e.doc.sel.ranges,o=[],u=0;u<l.length;u++){for(var f=i(l[u]);o.length&&0>=Le(f.from,O(o).to);){var v=o.pop();if(0>Le(v.from,f.from)){f.from=v.from;break}}o.push(f)}xi(e,function(){for(var E=o.length-1;0<=E;E--)Gn(e.doc,"",o[E].from,o[E].to,"+delete");Ln(e)})}function pa(e,i,l){return i=Q(e.text,i+l,l),0>i||i>e.text.length?null:i}function ga(e,i,l){return e=pa(e,i.ch,l),e==null?null:new fe(i.line,e,0>l?"after":"before")}function xa(e,i,l,o,u){if(e&&(i.doc.direction=="rtl"&&(u=-u),e=we(l,i.doc.direction))){e=0>u?O(e):e[0];var f=0>u==(e.level==1)?"after":"before";if(0<e.level||i.doc.direction=="rtl"){var v=gr(i,l),E=0>u?l.text.length-1:0,_=wi(i,v,E).top;E=se(function(P){return wi(i,v,P).top==_},0>u==(e.level==1)?e.from:e.to-1,E),f=="before"&&(E=pa(l,E,1))}else E=0>u?e.to:e.from;return new fe(o,E,f)}return new fe(o,0>u?l.text.length:0,0>u?"before":"after")}function N1(e,i,l,o){var u=we(i,e.doc.direction);if(!u)return ga(i,l,o);l.ch>=i.text.length?(l.ch=i.text.length,l.sticky="before"):0>=l.ch&&(l.ch=0,l.sticky="after");var f=ve(u,l.ch,l.sticky),v=u[f];if(e.doc.direction=="ltr"&&v.level%2==0&&(0<o?v.to>l.ch:v.from<l.ch))return ga(i,l,o);var E=function(te,ye){return pa(i,te instanceof fe?te.ch:te,ye)},_,P=function(te){return e.options.lineWrapping?(_=_||gr(e,i),Po(e,i,_,te)):{begin:0,end:i.text.length}},W=P(l.sticky=="before"?E(l,-1):l.ch);if(e.doc.direction=="rtl"||v.level==1){var Z=v.level==1==0>o,ee=E(l,Z?1:-1);if(ee!=null&&(Z?ee<=v.to&&ee<=W.end:ee>=v.from&&ee>=W.begin))return new fe(l.line,ee,Z?"before":"after")}return v=function(te,ye,De){for(var qe=function(ft,mt){return mt?new fe(l.line,E(ft,1),"before"):new fe(l.line,ft,"after")};0<=te&&te<u.length;te+=ye){var $t=u[te],ke=0<ye==($t.level!=1),xt=ke?De.begin:E(De.end,-1);if($t.from<=xt&&xt<$t.to||(xt=ke?$t.from:E($t.to,-1),De.begin<=xt&&xt<De.end))return qe(xt,ke)}},(f=v(f+o,o,W))?f:(W=0<o?W.end:E(W.begin,-1),W==null||0<o&&W==i.text.length||!(f=v(0<o?0:u.length-1,o,P(W)))?null:f)}function m0(e,i){var l=Se(e.doc,i),o=ai(l);return o!=l&&(i=pe(o)),xa(!0,e,o,i,1)}function v0(e,i){var l=m0(e,i.line),o=Se(e.doc,l.line);return e=we(o,e.doc.direction),e&&e[0].level!=0?l:(o=Math.max(l.ch,o.text.search(/\S/)),fe(l.line,i.line==l.line&&i.ch<=o&&i.ch?0:o,l.sticky))}function Vo(e,i,l){if(typeof i=="string"&&(i=Xs[i],!i))return!1;e.display.input.ensurePolled();var o=e.display.shift,u=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),l&&(e.display.shift=!1),u=i(e)!=Jo}finally{e.display.shift=o,e.state.suppressEdits=!1}return u}function Ns(e,i,l,o){var u=e.state.keySeq;if(u){if(p0(i))return"handled";if(/'$/.test(i)?e.state.keySeq=null:hx.set(50,function(){e.state.keySeq==u&&(e.state.keySeq=null,e.display.input.reset())}),y0(e,u+" "+i,l,o))return!0}return y0(e,i,l,o)}function y0(e,i,l,o){e:{for(var u=0;u<e.state.keyMaps.length;u++){var f=Un(i,e.state.keyMaps[u],o,e);if(f){o=f;break e}}o=e.options.extraKeys&&Un(i,e.options.extraKeys,o,e)||Un(i,e.options.keyMap,o,e)}return o=="multi"&&(e.state.keySeq=i),o=="handled"&&Rt(e,"keyHandled",e,i,l),(o=="handled"||o=="multi")&&(X(l),Ri(e)),!!o}function E0(e,i){var l=x0(i,!0);return l?i.shiftKey&&!e.state.keySeq?Ns(e,"Shift-"+l,i,function(o){return Vo(e,o,!0)})||Ns(e,l,i,function(o){if(typeof o=="string"?/^go[A-Z]/.test(o):o.motion)return Vo(e,o)}):Ns(e,l,i,function(o){return Vo(e,o)}):!1}function B1(e,i,l){return Ns(e,"'"+l+"'",i,function(o){return Vo(e,o,!0)})}function w0(e){if((!e.target||e.target==this.display.input.getField())&&(this.curOp.focus=b(d(this)),!Re(this,e))){st&&11>Tt&&e.keyCode==27&&(e.returnValue=!1);var i=e.keyCode;this.display.shift=i==16||e.shiftKey;var l=E0(this,e);Hi&&(ba=l?i:null,!l&&i==88&&!ox&&(Di?e.metaKey:e.ctrlKey)&&this.replaceSelection("",null,"cut")),Er&&!Di&&!l&&i==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),i!=18||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||F1(this)}}function F1(e){function i(o){o.keyCode!=18&&o.altKey||(an(l,"CodeMirror-crosshair"),le(document,"keyup",i),le(document,"mouseover",i))}var l=e.display.lineDiv;y(l,"CodeMirror-crosshair"),Ve(document,"keyup",i),Ve(document,"mouseover",i)}function S0(e){e.keyCode==16&&(this.doc.sel.shift=!1),Re(this,e)}function R0(e){if(!(e.target&&e.target!=this.display.input.getField()||z(this.display,e)||Re(this,e)||e.ctrlKey&&!e.altKey||Di&&e.metaKey)){var i=e.keyCode,l=e.charCode;Hi&&i==ba?(ba=null,X(e)):(!Hi||e.which&&!(10>e.which)||!E0(this,e))&&(i=String.fromCharCode(l??i),i!="\b"&&!B1(this,e,i)&&this.display.input.onKeyPress(e))}}function G1(e,i){var l=+new Date;return Js&&Js.compare(l,e,i)?(Zs=Js=null,"triple"):Zs&&Zs.compare(l,e,i)?(Js=new Ca(l,e,i),Zs=null,"double"):(Zs=new Ca(l,e,i),Js=null,"single")}function T0(e){var i=this.display;if(!(Re(this,e)||i.activeTouch&&i.input.supportsTouch())){if(i.input.ensurePolled(),i.shift=e.shiftKey,z(i,e))si||(i.scroller.draggable=!1,setTimeout(function(){return i.scroller.draggable=!0},100));else if(!qo(this,e,"gutterClick",!0)){var l=mr(this,e),o=J(e),u=l?G1(l,o):"single";d(this).defaultView.focus(),o==1&&this.state.selectingText&&this.state.selectingText(e),(!l||!W1(this,o,l,u,e))&&(o==1?l?U1(this,l,u,e):(e.target||e.srcElement)==i.scroller&&X(e):o==2?(l&&ko(this.doc,l),setTimeout(function(){return i.input.focus()},20)):o==3&&(ya?this.display.input.onContextMenu(e):Dn(this)))}}}function W1(e,i,l,o,u){var f="Click";return o=="double"?f="Double"+f:o=="triple"&&(f="Triple"+f),Ns(e,g0((i==1?"Left":i==2?"Middle":"Right")+f,u),u,function(v){if(typeof v=="string"&&(v=Xs[v]),!v)return!1;var E=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),E=v(e,l)!=Jo}finally{e.state.suppressEdits=!1}return E})}function U1(e,i,l,o){st?setTimeout(S(ei,e),0):e.curOp.focus=b(d(e));var u=e.getOption("configureMouse");u=u?u(e,l,o):{},u.unit==null&&(u.unit=(Q1?o.shiftKey&&o.metaKey:o.altKey)?"rectangle":l=="single"?"char":l=="double"?"word":"line"),(u.extend==null||e.doc.extend)&&(u.extend=e.doc.extend||o.shiftKey),u.addNew==null&&(u.addNew=Di?o.metaKey:o.ctrlKey),u.moveOnDrag==null&&(u.moveOnDrag=!(Di?o.altKey:o.ctrlKey));var f=e.doc.sel,v;e.options.dragDrop&&nx&&!e.isReadOnly()&&l=="single"&&-1<(v=f.contains(i))&&(0>Le((v=f.ranges[v]).from(),i)||0<i.xRel)&&(0<Le(v.to(),i)||0>i.xRel)?k1(e,o,i,u):H1(e,o,i,u)}function k1(e,i,l,o){var u=e.display,f=!1,v=Vt(e,function(P){si&&(u.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Dn(e)),le(u.wrapper.ownerDocument,"mouseup",v),le(u.wrapper.ownerDocument,"mousemove",E),le(u.scroller,"dragstart",_),le(u.scroller,"drop",v),f||(X(P),o.addNew||ko(e.doc,l,null,null,o.extend),si&&!Xo||st&&Tt==9?setTimeout(function(){u.wrapper.ownerDocument.body.focus({preventScroll:!0}),u.input.focus()},20):u.input.focus())}),E=function(P){f=f||10<=Math.abs(i.clientX-P.clientX)+Math.abs(i.clientY-P.clientY)},_=function(){return f=!0};si&&(u.scroller.draggable=!0),e.state.draggingText=v,v.copy=!o.moveOnDrag,Ve(u.wrapper.ownerDocument,"mouseup",v),Ve(u.wrapper.ownerDocument,"mousemove",E),Ve(u.scroller,"dragstart",_),Ve(u.scroller,"drop",v),e.state.delayingBlurEvent=!0,setTimeout(function(){return u.input.focus()},20),u.scroller.dragDrop&&u.scroller.dragDrop()}function A0(e,i,l){return l=="char"?new ct(i,i):l=="word"?e.findWordAt(i):l=="line"?new ct(fe(i.line,0),Ne(e.doc,fe(i.line+1,0))):(e=l(e,i),new ct(e.from,e.to))}function H1(e,i,l,o){function u(ke){if(Le(te,ke)!=0)if(te=ke,o.unit=="rectangle"){var xt=[],ft=e.options.tabSize,mt=M(Se(_,l.line).text,l.ch,ft),St=M(Se(_,ke.line).text,ke.ch,ft),et=Math.min(mt,St);mt=Math.max(mt,St),St=Math.min(l.line,ke.line);for(var vt=Math.min(e.lastLine(),Math.max(l.line,ke.line));St<=vt;St++){var lt=Se(_,St).text,dt=w(lt,et,ft);et==mt?xt.push(new ct(fe(St,dt),fe(St,dt))):lt.length>dt&&xt.push(new ct(fe(St,dt),fe(St,w(lt,mt,ft))))}xt.length||xt.push(new ct(l,l)),Zt(_,ki(e,P.ranges.slice(0,Z).concat(xt),Z),{origin:"*mouse",scroll:!1}),e.scrollIntoView(ke)}else xt=ee,et=A0(e,ke,o.unit),ke=xt.anchor,0<Le(et.anchor,ke)?(ft=et.head,ke=ht(xt.from(),et.anchor)):(ft=et.anchor,ke=Wt(xt.to(),et.head)),xt=P.ranges.slice(0),xt[Z]=z1(e,new ct(Ne(_,ke),ft)),Zt(_,ki(e,xt,Z),Ea)}function f(ke){var xt=++De,ft=mr(e,ke,!0,o.unit=="rectangle");if(ft)if(Le(ft,te)!=0){e.curOp.focus=b(d(e)),u(ft);var mt=Fr(E,_);(ft.line>=mt.to||ft.line<mt.from)&&setTimeout(Vt(e,function(){De==xt&&f(ke)}),150)}else{var St=ke.clientY<ye.top?-20:ke.clientY>ye.bottom?20:0;St&&setTimeout(Vt(e,function(){De==xt&&(E.scroller.scrollTop+=St,f(ke))}),50)}}function v(ke){e.state.selectingText=!1,De=1/0,ke&&(X(ke),E.input.focus()),le(E.wrapper.ownerDocument,"mousemove",qe),le(E.wrapper.ownerDocument,"mouseup",$t),_.history.lastSelOrigin=null}st&&Dn(e);var E=e.display,_=e.doc;X(i);var P=_.sel,W=P.ranges;if(o.addNew&&!o.extend)var Z=_.sel.contains(l),ee=-1<Z?W[Z]:new ct(l,l);else ee=_.sel.primary(),Z=_.sel.primIndex;o.unit=="rectangle"?(o.addNew||(ee=new ct(l,l)),l=mr(e,i,!0,!0),Z=-1):(i=A0(e,l,o.unit),ee=o.extend?fa(ee,i.anchor,i.head,o.extend):i),o.addNew?Z==-1?(Z=W.length,Zt(_,ki(e,W.concat([ee]),Z),{scroll:!1,origin:"*mouse"})):1<W.length&&W[Z].empty()&&o.unit=="char"&&!o.extend?(Zt(_,ki(e,W.slice(0,Z).concat(W.slice(Z+1)),0),{scroll:!1,origin:"*mouse"}),P=_.sel):da(_,Z,ee,Ea):(Z=0,Zt(_,new Ti([ee],0),Ea),P=_.sel);var te=l,ye=E.wrapper.getBoundingClientRect(),De=0,qe=Vt(e,function(ke){ke.buttons!==0&&J(ke)?f(ke):v(ke)}),$t=Vt(e,v);e.state.selectingText=$t,Ve(E.wrapper.ownerDocument,"mousemove",qe),Ve(E.wrapper.ownerDocument,"mouseup",$t)}function z1(e,i){var l=i.anchor,o=i.head,u=Se(e.doc,l.line);if(Le(l,o)==0&&l.sticky==o.sticky||(u=we(u),!u))return i;var f=ve(u,l.ch,l.sticky),v=u[f];if(v.from!=l.ch&&v.to!=l.ch)return i;var E=f+(v.from==l.ch==(v.level!=1)?0:1);return E==0||E==u.length?i:(o.line!=l.line?e=0<(o.line-l.line)*(e.doc.direction=="ltr"?1:-1):(e=ve(u,o.ch,o.sticky),f=e-f||(o.ch-l.ch)*(v.level==1?-1:1),e=e==E-1||e==E?0>f:0<f),u=u[E+(e?-1:0)],u=(E=e==(u.level==1))?u.from:u.to,E=E?"after":"before",l.ch==u&&l.sticky==E?i:new ct(new fe(l.line,u,E),o))}function qo(e,i,l,o){if(i.touches)var u=i.touches[0].clientX,f=i.touches[0].clientY;else try{u=i.clientX,f=i.clientY}catch{return!1}if(u>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;o&&X(i),o=e.display;var v=o.lineDiv.getBoundingClientRect();if(f>v.bottom||!Oe(e,l))return ue(i);for(f-=v.top-o.viewOffset,v=0;v<e.display.gutterSpecs.length;++v){var E=o.gutters.childNodes[v];if(E&&E.getBoundingClientRect().right>=u)return u=gt(e.doc,f),oe(e,l,e,u,e.display.gutterSpecs[v].className,i),ue(i)}}function b0(e,i){var l;(l=z(e.display,i))||(l=Oe(e,"gutterContextMenu")?qo(e,i,"gutterContextMenu",!1):!1),!l&&!Re(e,i,"contextmenu")&&!ya&&e.display.input.onContextMenu(i)}function C0(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Pr(e)}function $1(e,i,l){!i!=!(l&&l!=qn)&&(l=e.display.dragFunctions,i=i?Ve:le,i(e.display.scroller,"dragstart",l.start),i(e.display.scroller,"dragenter",l.enter),i(e.display.scroller,"dragover",l.over),i(e.display.scroller,"dragleave",l.leave),i(e.display.scroller,"drop",l.drop))}function j1(e){e.options.lineWrapping?(y(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(an(e.display.wrapper,"CodeMirror-wrap"),Jr(e)),In(e),Qt(e),Pr(e),setTimeout(function(){return Pn(e)},100)}function _t(e,i){var l=this;if(!(this instanceof _t))return new _t(e,i);this.options=i=i?R(i):{},R(q0,i,!1);var o=i.value;typeof o=="string"?o=new hi(o,i.mode,null,i.lineSeparator,i.direction):i.mode&&(o.modeOption=i.mode),this.doc=o;var u=new _t.inputStyles[i.inputStyle](this);e=this.display=new S1(e,o,u,i),e.wrapper.CodeMirror=this,C0(this),i.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Bh(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Hr,keySeq:null,specialChars:null},i.autofocus&&!Gs&&e.input.focus(),st&&11>Tt&&setTimeout(function(){return l.display.input.reset(!0)},20),V1(this),V0||(M1(),V0=!0),sn(this),this.curOp.forceUpdate=!0,Vh(this,o),i.autofocus&&!Gs||this.hasFocus()?setTimeout(function(){l.hasFocus()&&!l.state.focused&&er(l)},20):vr(this);for(var f in sl)sl.hasOwnProperty(f)&&sl[f](this,i[f],qn);for(Wh(this),i.finishInit&&i.finishInit(this),o=0;o<Oa.length;++o)Oa[o](this);on(this),si&&i.lineWrapping&&getComputedStyle(e.lineDiv).textRendering=="optimizelegibility"&&(e.lineDiv.style.textRendering="auto")}function V1(e){function i(){o.activeTouch&&(u=setTimeout(function(){return o.activeTouch=null},1e3),f=o.activeTouch,f.end=+new Date)}function l(E,_){if(_.left==null)return!0;var P=_.left-E.left;return E=_.top-E.top,400<P*P+E*E}var o=e.display;Ve(o.scroller,"mousedown",Vt(e,T0)),st&&11>Tt?Ve(o.scroller,"dblclick",Vt(e,function(E){if(!Re(e,E)){var _=mr(e,E);!_||qo(e,E,"gutterClick",!0)||z(e.display,E)||(X(E),E=e.findWordAt(_),ko(e.doc,E.anchor,E.head))}})):Ve(o.scroller,"dblclick",function(E){return Re(e,E)||X(E)}),Ve(o.scroller,"contextmenu",function(E){return b0(e,E)}),Ve(o.input.getField(),"contextmenu",function(E){o.scroller.contains(E.target)||b0(e,E)});var u,f={end:0};Ve(o.scroller,"touchstart",function(E){var _;(_=!Re(e,E))&&(E.touches.length!=1?_=!1:(_=E.touches[0],_=1>=_.radiusX&&1>=_.radiusY),_=!_),_&&!qo(e,E,"gutterClick",!0)&&(o.input.ensurePolled(),clearTimeout(u),_=+new Date,o.activeTouch={start:_,moved:!1,prev:300>=_-f.end?f:null},E.touches.length==1&&(o.activeTouch.left=E.touches[0].pageX,o.activeTouch.top=E.touches[0].pageY))}),Ve(o.scroller,"touchmove",function(){o.activeTouch&&(o.activeTouch.moved=!0)}),Ve(o.scroller,"touchend",function(E){var _=o.activeTouch;if(_&&!z(o,E)&&_.left!=null&&!_.moved&&300>new Date-_.start){var P=e.coordsChar(o.activeTouch,"page");_=!_.prev||l(_,_.prev)?new ct(P,P):!_.prev.prev||l(_,_.prev.prev)?e.findWordAt(P):new ct(fe(P.line,0),Ne(e.doc,fe(P.line+1,0))),e.setSelection(_.anchor,_.head),e.focus(),X(E)}i()}),Ve(o.scroller,"touchcancel",i),Ve(o.scroller,"scroll",function(){o.scroller.clientHeight&&(bs(e,o.scroller.scrollTop),nn(e,o.scroller.scrollLeft,!0),oe(e,"scroll",e))}),Ve(o.scroller,"mousewheel",function(E){return Hh(e,E)}),Ve(o.scroller,"DOMMouseScroll",function(E){return Hh(e,E)}),Ve(o.wrapper,"scroll",function(){return o.wrapper.scrollTop=o.wrapper.scrollLeft=0}),o.dragFunctions={enter:function(E){Re(e,E)||V(E)},over:function(E){if(!Re(e,E)){var _=mr(e,E);if(_){var P=document.createDocumentFragment();Ge(e,_,P),e.display.dragCursor||(e.display.dragCursor=h("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),c(e.display.dragCursor,P)}V(E)}},start:function(E){if(st&&(!e.state.draggingText||100>+new Date-j0))V(E);else if(!Re(e,E)&&!z(e.display,E)&&(E.dataTransfer.setData("Text",e.getSelection()),E.dataTransfer.effectAllowed="copyMove",E.dataTransfer.setDragImage&&!Xo)){var _=h("img",null,null,"position: fixed; left: 0; top: 0;");_.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Hi&&(_.width=_.height=1,e.display.wrapper.appendChild(_),_._top=_.offsetTop),E.dataTransfer.setDragImage(_,0,0),Hi&&_.parentNode.removeChild(_)}},drop:Vt(e,I1),leave:function(E){Re(e,E)||f0(e)}};var v=o.input.getField();Ve(v,"keyup",function(E){return S0.call(e,E)}),Ve(v,"keydown",Vt(e,w0)),Ve(v,"keypress",Vt(e,R0)),Ve(v,"focus",function(E){return er(e,E)}),Ve(v,"blur",function(E){return vr(e,E)})}function Bs(e,i,l,o){var u=e.doc,f;l==null&&(l="add"),l=="smart"&&(u.mode.indent?f=I(e,i).state:l="prev");var v=e.options.tabSize,E=Se(u,i),_=M(E.text,null,v);E.stateAfter&&(E.stateAfter=null);var P=E.text.match(/^\s*/)[0];if(!o&&!/\S/.test(E.text)){var W=0;l="not"}else if(l=="smart"&&(W=u.mode.indent(f,E.text.slice(P.length),E.text),W==Jo||150<W)){if(!o)return;l="prev"}if(l=="prev"?W=i>u.first?M(Se(u,i-1).text,null,v):0:l=="add"?W=_+e.options.indentUnit:l=="subtract"?W=_-e.options.indentUnit:typeof l=="number"&&(W=_+l),W=Math.max(0,W),l="",o=0,e.options.indentWithTabs)for(e=Math.floor(W/v);e;--e)o+=v,l+="	";if(o<W&&(l+=C(W-o)),l!=P)return Gn(u,l,fe(i,0),fe(i,P.length),"+input"),E.stateAfter=null,!0;for(v=0;v<u.sel.ranges.length;v++)if(E=u.sel.ranges[v],E.head.line==i&&E.head.ch<P.length){i=fe(i,P.length),da(u,v,new ct(i,i));break}}function ma(e,i,l,o,u){var f=e.doc;e.display.shift=!1,o||(o=f.sel);var v=+new Date-200,E=u=="paste"||e.state.pasteIncoming>v,_=Ra(i),P=null;if(E&&1<o.ranges.length)if(mi&&mi.text.join(`
`)==i){if(o.ranges.length%mi.text.length==0){P=[];for(var W=0;W<mi.text.length;W++)P.push(f.splitLines(mi.text[W]))}}else _.length==o.ranges.length&&e.options.pasteLinesPerSelection&&(P=H(_,function(De){return[De]}));W=e.curOp.updateInput;for(var Z=o.ranges.length-1;0<=Z;Z--){var ee=o.ranges[Z],te=ee.from(),ye=ee.to();ee.empty()&&(l&&0<l?te=fe(te.line,te.ch-l):e.state.overwrite&&!E?ye=fe(ye.line,Math.min(Se(f,ye.line).text.length,ye.ch+O(_).length)):E&&mi&&mi.lineWise&&mi.text.join(`
`)==_.join(`
`)&&(te=ye=fe(te.line,0))),ee={from:te,to:ye,text:P?P[Z%P.length]:_,origin:u||(E?"paste":e.state.cutIncoming>v?"cut":"+input")},Fn(e.doc,ee),Rt(e,"inputRead",e,ee)}i&&!E&&_0(e,i),Ln(e),2>e.curOp.updateInput&&(e.curOp.updateInput=W),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function O0(e,i){var l=e.clipboardData&&e.clipboardData.getData("Text");if(l)return e.preventDefault(),i.isReadOnly()||i.options.disableInput||!i.hasFocus()||xi(i,function(){return ma(i,l,0,null,"paste")}),!0}function _0(e,i){if(e.options.electricChars&&e.options.smartIndent)for(var l=e.doc.sel,o=l.ranges.length-1;0<=o;o--){var u=l.ranges[o];if(!(100<u.head.ch||o&&l.ranges[o-1].head.line==u.head.line)){var f=e.getModeAt(u.head),v=!1;if(f.electricChars){for(var E=0;E<f.electricChars.length;E++)if(-1<i.indexOf(f.electricChars.charAt(E))){v=Bs(e,u.head.line,"smart");break}}else f.electricInput&&f.electricInput.test(Se(e.doc,u.head.line).text.slice(0,u.head.ch))&&(v=Bs(e,u.head.line,"smart"));v&&Rt(e,"electricInput",e,u.head.line)}}}function I0(e){for(var i=[],l=[],o=0;o<e.doc.sel.ranges.length;o++){var u=e.doc.sel.ranges[o].head.line;u={anchor:fe(u,0),head:fe(u+1,0)},l.push(u),i.push(e.getRange(u.anchor,u.head))}return{text:i,ranges:l}}function M0(e,i,l,o){e.setAttribute("autocorrect",l?"":"off"),e.setAttribute("autocapitalize",o?"":"off"),e.setAttribute("spellcheck",!!i)}function D0(){var e=h("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),i=h("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return si?e.style.width="1000px":e.setAttribute("wrap","off"),Fs&&(e.style.border="1px solid black"),M0(e),i}function va(e,i,l,o,u){function f(De){if(o=="codepoint"){var qe=_.text.charCodeAt(i.ch+(0<l?0:-1));qe=isNaN(qe)?null:new fe(i.line,Math.max(0,Math.min(_.text.length,i.ch+l*((0<l?55296<=qe&&56320>qe:56320<=qe&&57343>qe)?2:1))),-l)}else qe=u?N1(e.cm,_,i,l):ga(_,i,l);if(qe==null)if((De=!De)&&(De=i.line+P,De<e.first||De>=e.first+e.size?De=!1:(i=new fe(De,i.ch,i.sticky),De=_=Se(e,De))),De)i=xa(u,e.cm,_,i.line,P);else return!1;else i=qe;return!0}var v=i,E=l,_=Se(e,i.line),P=u&&e.direction=="rtl"?-l:l;if(o=="char"||o=="codepoint")f();else if(o=="column")f(!0);else if(o=="word"||o=="group")for(var W=null,Z=o=="group",ee=e.cm&&e.cm.getHelper(i,"wordChars"),te=!0;!(0>l)||f(!te);te=!1){var ye=_.text.charAt(i.ch)||`
`;if(ye=$(ye,ee)?"w":Z&&ye==`
`?"n":!Z||/\s/.test(ye)?null:"p",!Z||te||ye||(ye="s"),W&&W!=ye){0>l&&(l=1,f(),i.sticky="after");break}if(ye&&(W=ye),0<l&&!f(!te))break}return E=zo(e,i,v,E,!0),rt(v,E)&&(E.hitSide=!0),E}function L0(e,i,l,o){var u=e.doc,f=i.left;if(o=="page"){var v=Math.min(e.display.wrapper.clientHeight,d(e).defaultView.innerHeight||u(e).documentElement.clientHeight);v=Math.max(v-.5*Br(e.display),3),v=(0<l?i.bottom:i.top)+l*v}else o=="line"&&(v=0<l?i.bottom+3:i.top-3);for(;i=Ss(e,f,v),!!i.outside;){if(0>l?0>=v:v>=u.height){i.hitSide=!0;break}v+=5*l}return i}function P0(e,i){var l=ys(e,i.line);if(!l||l.hidden)return null;var o=Se(e.doc,i.line);return l=Lr(l,o,i.line),e=we(o,e.doc.direction),o="left",e&&(o=ve(e,i.ch)%2?"right":"left"),i=Co(l.map,i.ch,o),i.offset=i.collapse=="right"?i.end:i.start,i}function q1(e){for(;e;e=e.parentNode)if(/CodeMirror-gutter-wrapper/.test(e.className))return!0;return!1}function Hn(e,i){return i&&(e.bad=!0),e}function K1(e,i,l,o,u){function f(te){return function(ye){return ye.id==te}}function v(){W&&(P+=Z,ee&&(P+=Z),W=ee=!1)}function E(te){te&&(v(),P+=te)}function _(te){if(te.nodeType==1){var ye=te.getAttribute("cm-text");if(ye)E(ye);else{ye=te.getAttribute("cm-marker");var De;if(ye)te=e.findMarks(fe(o,0),fe(u+1,0),f(+ye)),te.length&&(De=te[0].find(0))&&E(Pe(e.doc,De.from,De.to).join(Z));else if(te.getAttribute("contenteditable")!="false"&&(De=/^(pre|div|p|li|table|br)$/i.test(te.nodeName),/^br$/i.test(te.nodeName)||te.textContent.length!=0)){for(De&&v(),ye=0;ye<te.childNodes.length;ye++)_(te.childNodes[ye]);/^(pre|p)$/i.test(te.nodeName)&&(ee=!0),De&&(W=!0)}}}else te.nodeType==3&&E(te.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(var P="",W=!1,Z=e.doc.lineSeparator(),ee=!1;_(i),i!=l;)i=i.nextSibling,ee=!1;return P}function Ko(e,i,l){if(i==e.display.lineDiv){var o=e.display.lineDiv.childNodes[l];if(!o)return Hn(e.clipPos(fe(e.display.viewTo-1)),!0);i=null,l=0}else for(o=i;;o=o.parentNode){if(!o||o==e.display.lineDiv)return null;if(o.parentNode&&o.parentNode==e.display.lineDiv)break}for(var u=0;u<e.display.view.length;u++){var f=e.display.view[u];if(f.node==o)return Y1(f,i,l)}}function Y1(e,i,l){function o(W,Z,ee){for(var te=-1;te<(P?P.length:0);te++)for(var ye=0>te?_.map:P[te],De=0;De<ye.length;De+=3){var qe=ye[De+2];if(qe==W||qe==Z)return Z=pe(0>te?e.line:e.rest[te]),te=ye[De]+ee,(0>ee||qe!=W)&&(te=ye[De+(ee?1:0)]),fe(Z,te)}}var u=e.text.firstChild,f=!1;if(!i||!x(u,i))return Hn(fe(pe(e.line),0),!0);if(i==u&&(f=!0,i=u.childNodes[l],l=0,!i))return l=e.rest?O(e.rest):e.line,Hn(fe(pe(l),l.text.length),f);var v=i.nodeType==3?i:null,E=i;for(v||i.childNodes.length!=1||i.firstChild.nodeType!=3||(v=i.firstChild,l&&(l=v.nodeValue.length));E.parentNode!=u;)E=E.parentNode;var _=e.measure,P=_.maps;if(i=o(v,E,l))return Hn(i,f);for(u=E.nextSibling,v=v?v.nodeValue.length-l:0;u;u=u.nextSibling){if(i=o(u,u.firstChild,0))return Hn(fe(i.line,i.ch-v),f);v+=u.textContent.length}for(E=E.previousSibling;E;E=E.previousSibling){if(i=o(E,E.firstChild,-1))return Hn(fe(i.line,i.ch+l),f);l+=E.textContent.length}}var ci=navigator.userAgent,N0=navigator.platform,Er=/gecko\/\d/i.test(ci),B0=/MSIE \d/.test(ci),F0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ci),Yo=/Edge\/(\d+)/.exec(ci),st=B0||F0||Yo,Tt=st&&(B0?document.documentMode||6:+(Yo||F0)[1]),si=!Yo&&/WebKit\//.test(ci),X1=si&&/Qt\/\d+\.\d+/.test(ci),kr=!Yo&&/Chrome\/(\d+)/.exec(ci),G0=kr&&+kr[1],Hi=/Opera\//.test(ci),Xo=/Apple Computer/.test(navigator.vendor),Z1=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(ci),J1=/PhantomJS/.test(ci),Fs=Xo&&(/Mobile\/\w+/.test(ci)||2<navigator.maxTouchPoints),Zo=/Android/.test(ci),Gs=Fs||Zo||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(ci),Di=Fs||/Mac/.test(N0),Q1=/\bCrOS\b/.test(ci),ex=/win/i.test(N0),ln=Hi&&ci.match(/Version\/(\d*\.\d*)/);ln&&(ln=Number(ln[1])),ln&&15<=ln&&(Hi=!1,si=!0);var W0=Di&&(X1||Hi&&(ln==null||12.11>ln)),ya=Er||st&&9<=Tt,an=function(e,i){var l=e.className;if(i=s(i).exec(l)){var o=l.slice(i.index+i[0].length);e.className=l.slice(0,i.index)+(o?i[1]+o:"")}},Ws=document.createRange?function(e,i,l,o){var u=document.createRange();return u.setEnd(o||e,l),u.setStart(e,i),u}:function(e,i,l){var o=document.body.createTextRange();try{o.moveToElementText(e.parentNode)}catch{return o}return o.collapse(!0),o.moveEnd("character",l),o.moveStart("character",i),o},Us=function(e){e.select()};Fs?Us=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:st&&(Us=function(e){try{e.select()}catch{}});var Hr=function(){this.f=this.id=null,this.time=0,this.handler=S(this.onTimeout,this)};Hr.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},Hr.prototype.set=function(e,i){this.f=i,i=+new Date+e,(!this.id||i<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=i)};var Jo={toString:function(){return"CodeMirror.Pass"}},tr={scroll:!1},Ea={origin:"*mouse"},ks={origin:"+move"},Qo=[""],tx=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,ix=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,Hs=null,rx=function(){function e(v,E,_){this.level=v,this.from=E,this.to=_}var i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,l=/[stwN]/,o=/[LRr]/,u=/[Lb1n]/,f=/[1n]/;return function(v,E){var _=E=="ltr"?"L":"R";if(v.length==0||E=="ltr"&&!i.test(v))return!1;for(var P=v.length,W=[],Z=0;Z<P;++Z){var ee=W,te=ee.push,ye=v.charCodeAt(Z);ye=247>=ye?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(ye):1424<=ye&&1524>=ye?"R":1536<=ye&&1785>=ye?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(ye-1536):1774<=ye&&2220>=ye?"r":8192<=ye&&8203>=ye?"w":ye==8204?"b":"L",te.call(ee,ye)}for(Z=0,ee=_;Z<P;++Z)te=W[Z],te=="m"?W[Z]=ee:ee=te;for(Z=0,ee=_;Z<P;++Z)te=W[Z],te=="1"&&ee=="r"?W[Z]="n":o.test(te)&&(ee=te,te=="r"&&(W[Z]="R"));for(Z=1,ee=W[0];Z<P-1;++Z)te=W[Z],te=="+"&&ee=="1"&&W[Z+1]=="1"?W[Z]="1":te!=","||ee!=W[Z+1]||ee!="1"&&ee!="n"||(W[Z]=ee),ee=te;for(Z=0;Z<P;++Z)if(ee=W[Z],ee==",")W[Z]="N";else if(ee=="%"){for(ee=Z+1;ee<P&&W[ee]=="%";++ee);for(te=Z&&W[Z-1]=="!"||ee<P&&W[ee]=="1"?"1":"N";Z<ee;++Z)W[Z]=te;Z=ee-1}for(Z=0,ee=_;Z<P;++Z)te=W[Z],ee=="L"&&te=="1"?W[Z]="L":o.test(te)&&(ee=te);for(ee=0;ee<P;++ee)if(l.test(W[ee])){for(Z=ee+1;Z<P&&l.test(W[Z]);++Z);for(te=(ee?W[ee-1]:_)=="L",te=te==((Z<P?W[Z]:_)=="L")?te?"L":"R":_;ee<Z;++ee)W[ee]=te;ee=Z-1}_=[];var De;for(Z=0;Z<P;)if(u.test(W[Z])){for(ee=Z,++Z;Z<P&&u.test(W[Z]);++Z);_.push(new e(0,ee,Z))}else{var qe=Z;for(ee=_.length,te=E=="rtl"?1:0,++Z;Z<P&&W[Z]!="L";++Z);for(ye=qe;ye<Z;)if(f.test(W[ye])){for(qe<ye&&(_.splice(ee,0,new e(1,qe,ye)),ee+=te),qe=ye,++ye;ye<Z&&f.test(W[ye]);++ye);_.splice(ee,0,new e(2,qe,ye)),ee+=te,qe=ye}else++ye;qe<Z&&_.splice(ee,0,new e(1,qe,Z))}return E=="ltr"&&(_[0].level==1&&(De=v.match(/^\s+/))&&(_[0].from=De[0].length,_.unshift(new e(0,0,De[0].length))),O(_).level==1&&(De=v.match(/\s+$/))&&(O(_).to-=De[0].length,_.push(new e(0,P-De[0].length,P)))),E=="rtl"?_.reverse():_}}(),el=[],Ve=function(e,i,l){e.addEventListener?e.addEventListener(i,l,!1):e.attachEvent?e.attachEvent("on"+i,l):(e=e._handlers||(e._handlers={}),e[i]=(e[i]||el).concat(l))},nx=function(){if(st&&9>Tt)return!1;var e=h("div");return"draggable"in e||"dragDrop"in e}(),wa,Sa,Ra=`

b`.split(/\n/).length!=3?function(e){for(var i=0,l=[],o=e.length;i<=o;){var u=e.indexOf(`
`,i);u==-1&&(u=e.length);var f=e.slice(i,e.charAt(u-1)=="\r"?u-1:u),v=f.indexOf("\r");v!=-1?(l.push(f.slice(0,v)),i+=v+1):(l.push(f),i=u+1)}return l}:function(e){return e.split(/\r\n?|\n/)},sx=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){try{var i=e.ownerDocument.selection.createRange()}catch{}return i&&i.parentElement()==e?i.compareEndPoints("StartToEnd",i)!=0:!1},ox=function(){var e=h("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),Ta=null,Aa={},zn={},$n={},Ut=function(e,i,l){this.pos=this.start=0,this.string=e,this.tabSize=i||8,this.lineStart=this.lastColumnPos=this.lastColumnValue=0,this.lineOracle=l};Ut.prototype.eol=function(){return this.pos>=this.string.length},Ut.prototype.sol=function(){return this.pos==this.lineStart},Ut.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ut.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ut.prototype.eat=function(e){var i=this.string.charAt(this.pos);if(typeof e=="string"?i==e:i&&(e.test?e.test(i):e(i)))return++this.pos,i},Ut.prototype.eatWhile=function(e){for(var i=this.pos;this.eat(e););return this.pos>i},Ut.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Ut.prototype.skipToEnd=function(){this.pos=this.string.length},Ut.prototype.skipTo=function(e){if(e=this.string.indexOf(e,this.pos),-1<e)return this.pos=e,!0},Ut.prototype.backUp=function(e){this.pos-=e},Ut.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=M(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?M(this.string,this.lineStart,this.tabSize):0)},Ut.prototype.indentation=function(){return M(this.string,null,this.tabSize)-(this.lineStart?M(this.string,this.lineStart,this.tabSize):0)},Ut.prototype.match=function(e,i,l){if(typeof e=="string"){var o=function(f){return l?f.toLowerCase():f},u=this.string.substr(this.pos,e.length);if(o(u)==o(e))return i!==!1&&(this.pos+=e.length),!0}else return(e=this.string.slice(this.pos).match(e))&&0<e.index?null:(e&&i!==!1&&(this.pos+=e[0].length),e)},Ut.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ut.prototype.hideFirstChars=function(e,i){this.lineStart+=e;try{return i()}finally{this.lineStart-=e}},Ut.prototype.lookAhead=function(e){var i=this.lineOracle;return i&&i.lookAhead(e)},Ut.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var tl=function(e,i){this.state=e,this.lookAhead=i},ir=function(e,i,l,o){this.state=i,this.doc=e,this.line=l,this.maxLookAhead=o||0,this.baseTokens=null,this.baseTokenPos=1};ir.prototype.lookAhead=function(e){var i=this.doc.getLine(this.line+e);return i!=null&&e>this.maxLookAhead&&(this.maxLookAhead=e),i},ir.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var i=this.baseTokens[this.baseTokenPos+1];return{type:i&&i.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},ir.prototype.nextLine=function(){this.line++,0<this.maxLookAhead&&this.maxLookAhead--},ir.fromSaved=function(e,i,l){return i instanceof tl?new ir(e,U(e.mode,i.state),l,i.lookAhead):new ir(e,U(e.mode,i),l)},ir.prototype.save=function(e){return e=e!==!1?U(this.doc.mode,this.state):this.state,0<this.maxLookAhead?new tl(e,this.maxLookAhead):e};var U0=function(e,i,l){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=i||null,this.state=l},k0=!1,wr=!1,jn=function(e,i,l){this.text=e,Ir(this,i),this.height=l?l(this):1};jn.prototype.lineNo=function(){return pe(this)},Me(jn);var lx={},ax={},Vn=null,zs=null,H0={left:0,right:0,top:0,bottom:0},un,cn=function(e,i,l){this.cm=l;var o=this.vert=h("div",[h("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),u=this.horiz=h("div",[h("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");o.tabIndex=u.tabIndex=-1,e(o),e(u),Ve(o,"scroll",function(){o.clientHeight&&i(o.scrollTop,"vertical")}),Ve(u,"scroll",function(){u.clientWidth&&i(u.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,st&&8>Tt&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};cn.prototype.update=function(e){var i=e.scrollWidth>e.clientWidth+1,l=e.scrollHeight>e.clientHeight+1,o=e.nativeBarWidth;return l?(this.vert.style.display="block",this.vert.style.bottom=i?o+"px":"0",this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+(e.viewHeight-(i?o:0)))+"px"):(this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0"),i?(this.horiz.style.display="block",this.horiz.style.right=l?o+"px":"0",this.horiz.style.left=e.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+(e.viewWidth-e.barLeft-(l?o:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&0<e.clientHeight&&(o==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:l?o:0,bottom:i?o:0}},cn.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},cn.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},cn.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=Di&&!Z1?"12px":"18px",this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Hr,this.disableVert=new Hr},cn.prototype.enableZeroWidthBar=function(e,i,l){function o(){var u=e.getBoundingClientRect();(l=="vert"?document.elementFromPoint(u.right-1,(u.top+u.bottom)/2):document.elementFromPoint((u.right+u.left)/2,u.bottom-1))!=e?e.style.visibility="hidden":i.set(1e3,o)}e.style.visibility="",i.set(1e3,o)},cn.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var $s=function(){};$s.prototype.update=function(){return{bottom:0,right:0}},$s.prototype.setScrollLeft=function(){},$s.prototype.setScrollTop=function(){},$s.prototype.clear=function(){};var z0={native:cn,null:$s},ux=0,il=function(e,i,l){var o=e.display;this.viewport=i,this.visible=Fr(o,e.doc,i),this.editorIsHidden=!o.wrapper.offsetWidth,this.wrapperHeight=o.wrapper.clientHeight,this.wrapperWidth=o.wrapper.clientWidth,this.oldDisplayWidth=Ke(e),this.force=l,this.dims=_n(e),this.events=[]};il.prototype.signal=function(e,i){Oe(e,i)&&this.events.push(arguments)},il.prototype.finish=function(){for(var e=0;e<this.events.length;e++)oe.apply(null,this.events[e])};var rl=0,Sr=null;st?Sr=-.53:Er?Sr=15:kr?Sr=-.7:Xo&&(Sr=-1/3);var Ti=function(e,i){this.ranges=e,this.primIndex=i};Ti.prototype.primary=function(){return this.ranges[this.primIndex]},Ti.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var i=0;i<this.ranges.length;i++){var l=this.ranges[i],o=e.ranges[i];if(!rt(l.anchor,o.anchor)||!rt(l.head,o.head))return!1}return!0},Ti.prototype.deepCopy=function(){for(var e=[],i=0;i<this.ranges.length;i++)e[i]=new ct(Lt(this.ranges[i].anchor),Lt(this.ranges[i].head));return new Ti(e,this.primIndex)},Ti.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},Ti.prototype.contains=function(e,i){i||(i=e);for(var l=0;l<this.ranges.length;l++){var o=this.ranges[l];if(0<=Le(i,o.from())&&0>=Le(e,o.to()))return l}return-1};var ct=function(e,i){this.anchor=e,this.head=i};ct.prototype.from=function(){return ht(this.anchor,this.head)},ct.prototype.to=function(){return Wt(this.anchor,this.head)},ct.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Ls.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,i){for(var l=e,o=e+i;l<o;++l){var u=this.lines[l];this.height-=u.height;var f=u;f.parent=null,Rn(f),Rt(u,"delete")}this.lines.splice(e,i)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,i,l){for(this.height+=l,this.lines=this.lines.slice(0,e).concat(i).concat(this.lines.slice(e)),e=0;e<i.length;++e)i[e].parent=this},iterN:function(e,i,l){for(i=e+i;e<i;++e)if(l(this.lines[e]))return!0}},Ps.prototype={chunkSize:function(){return this.size},removeInner:function(e,i){this.size-=i;for(var l=0;l<this.children.length;++l){var o=this.children[l],u=o.chunkSize();if(e<u){var f=Math.min(i,u-e),v=o.height;if(o.removeInner(e,f),this.height-=v-o.height,u==f&&(this.children.splice(l--,1),o.parent=null),(i-=f)==0)break;e=0}else e-=u}25>this.size-i&&(1<this.children.length||!(this.children[0]instanceof Ls))&&(e=[],this.collapse(e),this.children=[new Ls(e)],this.children[0].parent=this)},collapse:function(e){for(var i=0;i<this.children.length;++i)this.children[i].collapse(e)},insertInner:function(e,i,l){this.size+=i.length,this.height+=l;for(var o=0;o<this.children.length;++o){var u=this.children[o],f=u.chunkSize();if(e<=f){if(u.insertInner(e,i,l),u.lines&&50<u.lines.length){for(i=e=u.lines.length%25+25;i<u.lines.length;)l=new Ls(u.lines.slice(i,i+=25)),u.height-=l.height,this.children.splice(++o,0,l),l.parent=this;u.lines=u.lines.slice(0,e),this.maybeSpill()}break}e-=f}},maybeSpill:function(){if(!(10>=this.children.length)){var e=this;do{var i=e.children.splice(e.children.length-5,5);if(i=new Ps(i),e.parent){e.size-=i.size,e.height-=i.height;var l=T(e.parent.children,e);e.parent.children.splice(l+1,0,i)}else l=new Ps(e.children),l.parent=e,e.children=[l,i],e=l;i.parent=e.parent}while(10<e.children.length);e.parent.maybeSpill()}},iterN:function(e,i,l){for(var o=0;o<this.children.length;++o){var u=this.children[o],f=u.chunkSize();if(e<f){if(f=Math.min(i,f-e),u.iterN(e,f,l))return!0;if((i-=f)==0)break;e=0}else e-=f}}};var js=function(e,i,l){if(l)for(var o in l)l.hasOwnProperty(o)&&(this[o]=l[o]);this.doc=e,this.node=i};js.prototype.clear=function(){var e=this.doc.cm,i=this.line.widgets,l=this.line,o=pe(l);if(o!=null&&i){for(var u=0;u<i.length;++u)i[u]==this&&i.splice(u--,1);i.length||(l.widgets=null);var f=D(this);Qe(l,Math.max(0,l.height-f)),e&&(xi(e,function(){var v=-f;gi(l)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Fo(e,v),Mi(e,o,"widget")}),Rt(e,"lineWidgetCleared",e,this,o))}},js.prototype.changed=function(){var e=this,i=this.height,l=this.doc.cm,o=this.line;this.height=null;var u=D(this)-i;u&&(ui(this.doc,o)||Qe(o,o.height+u),l&&xi(l,function(){l.curOp.forceUpdate=!0,gi(o)<(l.curOp&&l.curOp.scrollTop||l.doc.scrollTop)&&Fo(l,u),Rt(l,"lineWidgetChanged",l,e,pe(o))}))},Me(js);var $0=0,zr=function(e,i){this.lines=[],this.type=i,this.doc=e,this.id=++$0};zr.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,i=e&&!e.curOp;if(i&&sn(e),Oe(this,"clear")){var l=this.find();l&&Rt(this,"clear",l.from,l.to)}for(var o=l=null,u=0;u<this.lines.length;++u){var f=this.lines[u],v=Pt(f.markedSpans,this);e&&!this.collapsed?Mi(e,pe(f),"text"):e&&(v.to!=null&&(o=pe(f)),v.from!=null&&(l=pe(f)));for(var E=f,_=void 0,P=f.markedSpans,W=v,Z=0;Z<P.length;++Z)P[Z]!=W&&(_||(_=[])).push(P[Z]);E.markedSpans=_,v.from==null&&this.collapsed&&!ui(this.doc,f)&&e&&Qe(f,Br(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(u=0;u<this.lines.length;++u)f=ai(this.lines[u]),v=Vi(f),v>e.display.maxLineLength&&(e.display.maxLine=f,e.display.maxLineLength=v,e.display.maxLineChanged=!0);l!=null&&e&&this.collapsed&&Qt(e,l,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&t0(e.doc)),e&&Rt(e,"markerCleared",e,this,l,o),i&&on(e),this.parent&&this.parent.clear()}},zr.prototype.find=function(e,i){e==null&&this.type=="bookmark"&&(e=1);for(var l,o,u=0;u<this.lines.length;++u){var f=this.lines[u],v=Pt(f.markedSpans,this);if(v.from!=null&&(l=fe(i?f:pe(f),v.from),e==-1))return l;if(v.to!=null&&(o=fe(i?f:pe(f),v.to),e==1))return o}return l&&{from:l,to:o}},zr.prototype.changed=function(){var e=this,i=this.find(-1,!0),l=this,o=this.doc.cm;i&&o&&xi(o,function(){var u=i.line,f=pe(i.line);(f=ys(o,f))&&(Oo(f),o.curOp.selectionChanged=o.curOp.forceUpdate=!0),o.curOp.updateMaxLine=!0,ui(l.doc,u)||l.height==null||(f=l.height,l.height=null,(f=D(l)-f)&&Qe(u,u.height+f)),Rt(o,"markerChanged",o,e)})},zr.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var i=this.doc.cm.curOp;i.maybeHiddenMarkers&&T(i.maybeHiddenMarkers,this)!=-1||(i.maybeUnhiddenMarkers||(i.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},zr.prototype.detachLine=function(e){this.lines.splice(T(this.lines,e),1),!this.lines.length&&this.doc.cm&&(e=this.doc.cm.curOp,(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this))},Me(zr);var Vs=function(e,i){for(this.markers=e,this.primary=i,i=0;i<e.length;++i)e[i].parent=this};Vs.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Rt(this,"clear")}},Vs.prototype.find=function(e,i){return this.primary.find(e,i)},Me(Vs);var cx=0,hi=function(e,i,l,o,u){if(!(this instanceof hi))return new hi(e,i,l,o,u);l==null&&(l=0),Ps.call(this,[new Ls([new jn("",null)])]),this.first=l,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=l,l=fe(l,0),this.sel=yr(l),this.history=new Wo(null),this.id=++cx,this.modeOption=i,this.lineSep=o,this.direction=u=="rtl"?"rtl":"ltr",this.extend=!1,typeof e=="string"&&(e=this.splitLines(e)),ca(this,{from:l,to:l,text:e}),Zt(this,yr(l),tr)};hi.prototype=ie(Ps.prototype,{constructor:hi,iter:function(e,i,l){l?this.iterN(e-this.first,i-e,l):this.iterN(this.first,this.first+this.size,e)},insert:function(e,i){for(var l=0,o=0;o<i.length;++o)l+=i[o].height;this.insertInner(e-this.first,i,l)},remove:function(e,i){this.removeInner(e-this.first,i)},getValue:function(e){var i=je(this,this.first,this.first+this.size);return e===!1?i:i.join(e||this.lineSeparator())},setValue:qt(function(e){var i=fe(this.first,0),l=this.first+this.size-1;Fn(this,{from:i,to:fe(l,Se(this,l).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&As(this.cm,0,0),Zt(this,yr(i),tr)}),replaceRange:function(e,i,l,o){i=Ne(this,i),l=l?Ne(this,l):i,Gn(this,e,i,l,o)},getRange:function(e,i,l){return e=Pe(this,Ne(this,e),Ne(this,i)),l===!1?e:l===""?e.join(""):e.join(l||this.lineSeparator())},getLine:function(e){return(e=this.getLineHandle(e))&&e.text},getLineHandle:function(e){if(wt(this,e))return Se(this,e)},getLineNumber:function(e){return pe(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=Se(this,e)),ai(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Ne(this,e)},getCursor:function(e){var i=this.sel.primary();return e==null||e=="head"?i.head:e=="anchor"?i.anchor:e=="end"||e=="to"||e===!1?i.to():i.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:qt(function(e,i,l){e=Ne(this,typeof e=="number"?fe(e,i||0):e),Zt(this,yr(e,null),l)}),setSelection:qt(function(e,i,l){var o=Ne(this,e);e=Ne(this,i||e),Zt(this,yr(o,e),l)}),extendSelection:qt(function(e,i,l){ko(this,Ne(this,e),i&&Ne(this,i),l)}),extendSelections:qt(function(e,i){Jh(this,B(this,e),i)}),extendSelectionsBy:qt(function(e,i){e=H(this.sel.ranges,e),Jh(this,B(this,e),i)}),setSelections:qt(function(e,i,l){if(e.length){for(var o=[],u=0;u<e.length;u++)o[u]=new ct(Ne(this,e[u].anchor),Ne(this,e[u].head||e[u].anchor));i==null&&(i=Math.min(e.length-1,this.sel.primIndex)),Zt(this,ki(this.cm,o,i),l)}}),addSelection:qt(function(e,i,l){var o=this.sel.ranges.slice(0);o.push(new ct(Ne(this,e),Ne(this,i||e))),Zt(this,ki(this.cm,o,o.length-1),l)}),getSelection:function(e){for(var i=this.sel.ranges,l,o=0;o<i.length;o++){var u=Pe(this,i[o].from(),i[o].to());l=l?l.concat(u):u}return e===!1?l:l.join(e||this.lineSeparator())},getSelections:function(e){for(var i=[],l=this.sel.ranges,o=0;o<l.length;o++){var u=Pe(this,l[o].from(),l[o].to());e!==!1&&(u=u.join(e||this.lineSeparator())),i[o]=u}return i},replaceSelection:function(e,i,l){for(var o=[],u=0;u<this.sel.ranges.length;u++)o[u]=e;this.replaceSelections(o,i,l||"+input")},replaceSelections:qt(function(e,i,l){for(var o=[],u=this.sel,f=0;f<u.ranges.length;f++){var v=u.ranges[f];o[f]={from:v.from(),to:v.to(),text:this.splitLines(e[f]),origin:l}}if(e=i&&i!="end"){for(e=[],u=l=fe(this.first,0),f=0;f<o.length;f++){var E=o[f];v=$h(E.from,l,u);var _=$h(Wr(E),l,u);l=E.to,u=_,i=="around"?(E=this.sel.ranges[f],E=0>Le(E.head,E.anchor),e[f]=new ct(E?_:v,E?v:_)):e[f]=new ct(v,v)}e=new Ti(e,this.sel.primIndex)}for(i=e,e=o.length-1;0<=e;e--)Fn(this,o[e]);i?Qh(this,i):this.cm&&Ln(this.cm)}),undo:qt(function(){$o(this,"undo")}),redo:qt(function(){$o(this,"redo")}),undoSelection:qt(function(){$o(this,"undo",!0)}),redoSelection:qt(function(){$o(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,i=0,l=0,o=0;o<e.done.length;o++)e.done[o].ranges||++i;for(o=0;o<e.undone.length;o++)e.undone[o].ranges||++l;return{undo:i,redo:l}},clearHistory:function(){var e=this;this.history=new Wo(this.history),Ur(this,function(i){return i.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Nn(this.history.done),undone:Nn(this.history.undone)}},setHistory:function(e){var i=this.history=new Wo(this.history);i.done=Nn(e.done.slice(0),null,!0),i.undone=Nn(e.undone.slice(0),null,!0)},setGutterMarker:qt(function(e,i,l){return Ds(this,e,"gutter",function(o){var u=o.gutterMarkers||(o.gutterMarkers={});return u[i]=l,!l&&K(u)&&(o.gutterMarkers=null),!0})}),clearGutter:qt(function(e){var i=this;this.iter(function(l){l.gutterMarkers&&l.gutterMarkers[e]&&Ds(i,l,"gutter",function(){return l.gutterMarkers[e]=null,K(l.gutterMarkers)&&(l.gutterMarkers=null),!0})})}),lineInfo:function(e){if(typeof e=="number"){if(!wt(this,e))return null;var i=e;if(e=Se(this,e),!e)return null}else if(i=pe(e),i==null)return null;return{line:i,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:qt(function(e,i,l){return Ds(this,e,i=="gutter"?"gutter":"class",function(o){var u=i=="text"?"textClass":i=="background"?"bgClass":i=="gutter"?"gutterClass":"wrapClass";if(o[u]){if(s(l).test(o[u]))return!1;o[u]+=" "+l}else o[u]=l;return!0})}),removeLineClass:qt(function(e,i,l){return Ds(this,e,i=="gutter"?"gutter":"class",function(o){var u=i=="text"?"textClass":i=="background"?"bgClass":i=="gutter"?"gutterClass":"wrapClass",f=o[u];if(f)if(l==null)o[u]=null;else{var v=f.match(s(l));if(!v)return!1;var E=v.index+v[0].length;o[u]=f.slice(0,v.index)+(v.index&&E!=f.length?" ":"")+f.slice(E)||null}else return!1;return!0})}),addLineWidget:qt(function(e,i,l){return C1(this,e,i,l)}),removeLineWidget:function(e){e.clear()},markText:function(e,i,l){return Wn(this,Ne(this,e),Ne(this,i),l,l&&l.type||"range")},setBookmark:function(e,i){return i={replacedWith:i&&(i.nodeType==null?i.widget:i),insertLeft:i&&i.insertLeft,clearWhenEmpty:!1,shared:i&&i.shared,handleMouseEvents:i&&i.handleMouseEvents},e=Ne(this,e),Wn(this,e,e,i,"bookmark")},findMarksAt:function(e){e=Ne(this,e);var i=[],l=Se(this,e.line).markedSpans;if(l)for(var o=0;o<l.length;++o){var u=l[o];(u.from==null||u.from<=e.ch)&&(u.to==null||u.to>=e.ch)&&i.push(u.marker.parent||u.marker)}return i},findMarks:function(e,i,l){e=Ne(this,e),i=Ne(this,i);var o=[],u=e.line;return this.iter(e.line,i.line+1,function(f){if(f=f.markedSpans)for(var v=0;v<f.length;v++){var E=f[v];E.to!=null&&u==e.line&&e.ch>=E.to||E.from==null&&u!=e.line||E.from!=null&&u==i.line&&E.from>=i.ch||l&&!l(E.marker)||o.push(E.marker.parent||E.marker)}++u}),o},getAllMarks:function(){var e=[];return this.iter(function(i){if(i=i.markedSpans)for(var l=0;l<i.length;++l)i[l].from!=null&&e.push(i[l].marker)}),e},posFromIndex:function(e){var i,l=this.first,o=this.lineSeparator().length;return this.iter(function(u){if(u=u.text.length+o,u>e)return i=e,!0;e-=u,++l}),Ne(this,fe(l,i))},indexFromPos:function(e){e=Ne(this,e);var i=e.ch;if(e.line<this.first||0>e.ch)return 0;var l=this.lineSeparator().length;return this.iter(this.first,e.line,function(o){i+=o.text.length+l}),i},copy:function(e){var i=new hi(je(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return i.scrollTop=this.scrollTop,i.scrollLeft=this.scrollLeft,i.sel=this.sel,i.extend=!1,e&&(i.history.undoDepth=this.history.undoDepth,i.setHistory(this.getHistory())),i},linkedDoc:function(e){e||(e={});var i=this.first,l=this.first+this.size;for(e.from!=null&&e.from>i&&(i=e.from),e.to!=null&&e.to<l&&(l=e.to),i=new hi(je(this,i,l),e.mode||this.modeOption,i,this.lineSep,this.direction),e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],e=h0(this),l=0;l<e.length;l++){var o=e[l],u=o.find(),f=i.clipPos(u.from);u=i.clipPos(u.to),Le(f,u)&&(f=Wn(i,f,u,o.primary,o.primary.type),o.markers.push(f),f.parent=o)}return i},unlinkDoc:function(e){if(e instanceof _t&&(e=e.doc),this.linked){for(var i=0;i<this.linked.length;++i)if(this.linked[i].doc==e){this.linked.splice(i,1),e.unlinkDoc(this),_1(h0(this));break}}if(e.history==this.history){var l=[e.id];Ur(e,function(o){return l.push(o.id)},!0),e.history=new Wo(null),e.history.done=Nn(this.history.done,l),e.history.undone=Nn(this.history.undone,l)}},iterLinkedDocs:function(e){Ur(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Ra(e)},lineSeparator:function(){return this.lineSep||`
`},setDirection:qt(function(e){e!="rtl"&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(i){return i.order=null}),this.cm&&T1(this.cm))})}),hi.prototype.eachLine=hi.prototype.iter;for(var j0=0,V0=!1,$r={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},qs=0;10>qs;qs++)$r[qs+48]=$r[qs+96]=String(qs);for(var nl=65;90>=nl;nl++)$r[nl]=String.fromCharCode(nl);for(var Ks=1;12>=Ks;Ks++)$r[Ks+111]=$r[Ks+63235]="F"+Ks;var Ys={basic:{Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},pcDefault:{"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},emacsy:{"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},macDefault:{"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]}};Ys.default=Di?Ys.macDefault:Ys.pcDefault;var Xs={selectAll:n0,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),tr)},killLine:function(e){return kn(e,function(i){if(i.empty()){var l=Se(e.doc,i.head.line).text.length;return i.head.ch==l&&i.head.line<e.lastLine()?{from:i.head,to:fe(i.head.line+1,0)}:{from:i.head,to:fe(i.head.line,l)}}return{from:i.from(),to:i.to()}})},deleteLine:function(e){return kn(e,function(i){return{from:fe(i.from().line,0),to:Ne(e.doc,fe(i.to().line+1,0))}})},delLineLeft:function(e){return kn(e,function(i){return{from:fe(i.from().line,0),to:i.from()}})},delWrappedLineLeft:function(e){return kn(e,function(i){var l=e.charCoords(i.head,"div").top+5;return{from:e.coordsChar({left:0,top:l},"div"),to:i.from()}})},delWrappedLineRight:function(e){return kn(e,function(i){var l=e.charCoords(i.head,"div").top+5;return l=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:l},"div"),{from:i.from(),to:l}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(fe(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(fe(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(i){return m0(e,i.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(i){return v0(e,i.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(i){i=i.head.line;for(var l=Se(e.doc,i),o=l,u;u=It(o,!1);)o=u.find(1,!0).line;return o!=l&&(i=pe(o)),xa(!0,e,l,i,-1)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(i){return i=e.cursorCoords(i.head,"div").top+5,e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div")},ks)},goLineLeft:function(e){return e.extendSelectionsBy(function(i){return i=e.cursorCoords(i.head,"div").top+5,e.coordsChar({left:0,top:i},"div")},ks)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(i){var l=e.cursorCoords(i.head,"div").top+5;return l=e.coordsChar({left:0,top:l},"div"),l.ch<e.getLine(l.line).search(/\S/)?v0(e,i.head):l},ks)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("	")},insertSoftTab:function(e){for(var i=[],l=e.listSelections(),o=e.options.tabSize,u=0;u<l.length;u++){var f=l[u].from();f=M(e.getLine(f.line),f.ch,o),i.push(C(o-f%o))}e.replaceSelections(i)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return xi(e,function(){for(var i=e.listSelections(),l=[],o=0;o<i.length;o++)if(i[o].empty()){var u=i[o].head,f=Se(e.doc,u.line).text;if(f){if(u.ch==f.length&&(u=new fe(u.line,u.ch-1)),0<u.ch)u=new fe(u.line,u.ch+1),e.replaceRange(f.charAt(u.ch-1)+f.charAt(u.ch-2),fe(u.line,u.ch-2),u,"+transpose");else if(u.line>e.doc.first){var v=Se(e.doc,u.line-1).text;v&&(u=new fe(u.line,1),e.replaceRange(f.charAt(0)+e.doc.lineSeparator()+v.charAt(v.length-1),fe(u.line-1,v.length-1),u,"+transpose"))}}l.push(new ct(u,u))}e.setSelections(l)})},newlineAndIndent:function(e){return xi(e,function(){for(var i=e.listSelections(),l=i.length-1;0<=l;l--)e.replaceRange(e.doc.lineSeparator(),i[l].anchor,i[l].head,"+input");for(i=e.listSelections(),l=0;l<i.length;l++)e.indentLine(i[l].from().line,null,!0);Ln(e)})},openLine:function(e){return e.replaceSelection(`
`,"start")},toggleOverwrite:function(e){return e.toggleOverwrite()}},hx=new Hr,ba=null,Ca=function(e,i,l){this.time=e,this.pos=i,this.button=l};Ca.prototype.compare=function(e,i,l){return this.time+400>e&&Le(i,this.pos)==0&&l==this.button};var Zs,Js,qn={toString:function(){return"CodeMirror.Init"}},q0={},sl={};_t.defaults=q0,_t.optionHandlers=sl;var Oa=[];_t.defineInitHook=function(e){return Oa.push(e)};var mi=null,pt=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Hr,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};pt.prototype.init=function(e){function i(E){for(E=E.target;E;E=E.parentNode){if(E==v)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(E.className))break}return!1}function l(E){if(i(E)&&!Re(f,E)){if(f.somethingSelected())mi={lineWise:!1,text:f.getSelections()},E.type=="cut"&&f.replaceSelection("",null,"cut");else if(f.options.lineWiseCopyCut){var _=I0(f);mi={lineWise:!0,text:_.text},E.type=="cut"&&f.operation(function(){f.setSelections(_.ranges,0,tr),f.replaceSelection("",null,"cut")})}else return;if(E.clipboardData){E.clipboardData.clearData();var P=mi.text.join(`
`);if(E.clipboardData.setData("Text",P),E.clipboardData.getData("Text")==P){E.preventDefault();return}}var W=D0();E=W.firstChild,f.display.lineSpace.insertBefore(W,f.display.lineSpace.firstChild),E.value=mi.text.join(`
`);var Z=b(v.ownerDocument);Us(E),setTimeout(function(){f.display.lineSpace.removeChild(W),Z.focus(),Z==v&&u.showPrimarySelection()},50)}}var o=this,u=this,f=u.cm,v=u.div=e.lineDiv;v.contentEditable=!0,M0(v,f.options.spellcheck,f.options.autocorrect,f.options.autocapitalize),Ve(v,"paste",function(E){!i(E)||Re(f,E)||O0(E,f)||11>=Tt&&setTimeout(Vt(f,function(){return o.updateFromDOM()}),20)}),Ve(v,"compositionstart",function(E){o.composing={data:E.data,done:!1}}),Ve(v,"compositionupdate",function(E){o.composing||(o.composing={data:E.data,done:!1})}),Ve(v,"compositionend",function(E){o.composing&&(E.data!=o.composing.data&&o.readFromDOMSoon(),o.composing.done=!0)}),Ve(v,"touchstart",function(){return u.forceCompositionEnd()}),Ve(v,"input",function(){o.composing||o.readFromDOMSoon()}),Ve(v,"copy",l),Ve(v,"cut",l)},pt.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},pt.prototype.prepareSelection=function(){var e=Ae(this.cm,!1);return e.focus=b(this.div.ownerDocument)==this.div,e},pt.prototype.showSelection=function(e,i){e&&this.cm.display.view.length&&((e.focus||i)&&this.showPrimarySelection(),this.showMultipleSelections(e))},pt.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},pt.prototype.showPrimarySelection=function(){var e=this.getSelection(),i=this.cm,l=i.doc.sel.primary(),o=l.from();if(l=l.to(),i.display.viewTo==i.display.viewFrom||o.line>=i.display.viewTo||l.line<i.display.viewFrom)e.removeAllRanges();else{var u=Ko(i,e.anchorNode,e.anchorOffset),f=Ko(i,e.focusNode,e.focusOffset);if(!u||u.bad||!f||f.bad||Le(ht(u,f),o)!=0||Le(Wt(u,f),l)!=0)if(u=i.display.view,o=o.line>=i.display.viewFrom&&P0(i,o)||{node:u[0].measure.map[2],offset:0},l=l.line<i.display.viewTo&&P0(i,l),l||(l=u[u.length-1].measure,l=l.maps?l.maps[l.maps.length-1]:l.map,l={node:l[l.length-1],offset:l[l.length-2]-l[l.length-3]}),o&&l){u=e.rangeCount&&e.getRangeAt(0);try{var v=Ws(o.node,o.offset,l.offset,l.node)}catch{}v&&(!Er&&i.state.focused?(e.collapse(o.node,o.offset),v.collapsed||(e.removeAllRanges(),e.addRange(v))):(e.removeAllRanges(),e.addRange(v)),u&&e.anchorNode==null?e.addRange(u):Er&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}},pt.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},pt.prototype.showMultipleSelections=function(e){c(this.cm.display.cursorDiv,e.cursors),c(this.cm.display.selectionDiv,e.selection)},pt.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},pt.prototype.selectionInEditor=function(){var e=this.getSelection();return e.rangeCount?(e=e.getRangeAt(0).commonAncestorContainer,x(this.div,e)):!1},pt.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&(this.selectionInEditor()&&b(this.div.ownerDocument)==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},pt.prototype.blur=function(){this.div.blur()},pt.prototype.getField=function(){return this.div},pt.prototype.supportsTouch=function(){return!0},pt.prototype.receivedFocus=function(){function e(){l.cm.state.focused&&(l.pollSelection(),l.polling.set(l.cm.options.pollInterval,e))}var i=this,l=this;this.selectionInEditor()?setTimeout(function(){return i.pollSelection()},20):xi(this.cm,function(){return l.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,e)},pt.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},pt.prototype.pollSelection=function(){if(this.readDOMTimeout==null&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),i=this.cm;if(Zo&&kr&&this.cm.display.gutterSpecs.length&&q1(e.anchorNode))this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();else if(!this.composing){this.rememberSelection();var l=Ko(i,e.anchorNode,e.anchorOffset),o=Ko(i,e.focusNode,e.focusOffset);l&&o&&xi(i,function(){Zt(i.doc,yr(l,o),tr),(l.bad||o.bad)&&(i.curOp.selectionChanged=!0)})}}},pt.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,i=e.display,l=e.doc.sel.primary(),o=l.from(),u=l.to();if(o.ch==0&&o.line>e.firstLine()&&(o=fe(o.line-1,Se(e.doc,o.line-1).length)),u.ch==Se(e.doc,u.line).text.length&&u.line<e.lastLine()&&(u=fe(u.line+1,0)),o.line<i.viewFrom||u.line>i.viewTo-1)return!1;var f;o.line==i.viewFrom||(f=Ii(e,o.line))==0?(l=pe(i.view[0].line),f=i.view[0].node):(l=pe(i.view[f].line),f=i.view[f-1].node.nextSibling);var v=Ii(e,u.line);if(v==i.view.length-1?(u=i.viewTo-1,i=i.lineDiv.lastChild):(u=pe(i.view[v+1].line)-1,i=i.view[v+1].node.previousSibling),!f)return!1;for(i=e.doc.splitLines(K1(e,f,i,l,u)),f=Pe(e.doc,fe(l,0),fe(u,Se(e.doc,u).text.length));1<i.length&&1<f.length;)if(O(i)==O(f))i.pop(),f.pop(),u--;else if(i[0]==f[0])i.shift(),f.shift(),l++;else break;var E=0;v=0;for(var _=i[0],P=f[0],W=Math.min(_.length,P.length);E<W&&_.charCodeAt(E)==P.charCodeAt(E);)++E;for(_=O(i),P=O(f),W=Math.min(_.length-(i.length==1?E:0),P.length-(f.length==1?E:0));v<W&&_.charCodeAt(_.length-v-1)==P.charCodeAt(P.length-v-1);)++v;if(i.length==1&&f.length==1&&l==o.line)for(;E&&E>o.ch&&_.charCodeAt(_.length-v-1)==P.charCodeAt(P.length-v-1);)E--,v++;if(i[i.length-1]=_.slice(0,_.length-v).replace(/^\u200b+/,""),i[0]=i[0].slice(E).replace(/\u200b+$/,""),o=fe(l,E),l=fe(u,f.length?O(f).length-v:0),1<i.length||i[0]||Le(o,l))return Gn(e.doc,i,o,l,"+input"),!0},pt.prototype.ensurePolled=function(){this.forceCompositionEnd()},pt.prototype.reset=function(){this.forceCompositionEnd()},pt.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},pt.prototype.readFromDOMSoon=function(){var e=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing)if(e.composing.done)e.composing=null;else return;e.updateFromDOM()},80))},pt.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||xi(this.cm,function(){return Qt(e.cm)})},pt.prototype.setUneditable=function(e){e.contentEditable="false"},pt.prototype.onKeyPress=function(e){e.charCode==0||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Vt(this.cm,ma)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0))},pt.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!="nocursor")},pt.prototype.onContextMenu=function(){},pt.prototype.resetPosition=function(){},pt.prototype.needsContentAttribute=!0;var Bt=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new Hr,this.hasSelection=!1,this.composing=null,this.resetting=!1};Bt.prototype.init=function(e){function i(v){if(!Re(u,v)){if(u.somethingSelected())mi={lineWise:!1,text:u.getSelections()};else if(u.options.lineWiseCopyCut){var E=I0(u);mi={lineWise:!0,text:E.text},v.type=="cut"?u.setSelections(E.ranges,null,tr):(o.prevInput="",f.value=E.text.join(`
`),Us(f))}else return;v.type=="cut"&&(u.state.cutIncoming=+new Date)}}var l=this,o=this,u=this.cm;this.createField(e);var f=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),Fs&&(f.style.width="0px"),Ve(f,"input",function(){st&&9<=Tt&&l.hasSelection&&(l.hasSelection=null),o.poll()}),Ve(f,"paste",function(v){Re(u,v)||O0(v,u)||(u.state.pasteIncoming=+new Date,o.fastPoll())}),Ve(f,"cut",i),Ve(f,"copy",i),Ve(e.scroller,"paste",function(v){if(!z(e,v)&&!Re(u,v))if(f.dispatchEvent){var E=new Event("paste");E.clipboardData=v.clipboardData,f.dispatchEvent(E)}else u.state.pasteIncoming=+new Date,o.focus()}),Ve(e.lineSpace,"selectstart",function(v){z(e,v)||X(v)}),Ve(f,"compositionstart",function(){var v=u.getCursor("from");o.composing&&o.composing.range.clear(),o.composing={start:v,range:u.markText(v,u.getCursor("to"),{className:"CodeMirror-composing"})}}),Ve(f,"compositionend",function(){o.composing&&(o.poll(),o.composing.range.clear(),o.composing=null)})},Bt.prototype.createField=function(e){this.wrapper=D0(),this.textarea=this.wrapper.firstChild},Bt.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Bt.prototype.prepareSelection=function(){var e=this.cm,i=e.display,l=e.doc,o=Ae(e);if(e.options.moveInputWithCursor){e=Si(e,l.sel.primary().head,"div"),l=i.wrapper.getBoundingClientRect();var u=i.lineDiv.getBoundingClientRect();o.teTop=Math.max(0,Math.min(i.wrapper.clientHeight-10,e.top+u.top-l.top)),o.teLeft=Math.max(0,Math.min(i.wrapper.clientWidth-10,e.left+u.left-l.left))}return o},Bt.prototype.showSelection=function(e){var i=this.cm.display;c(i.cursorDiv,e.cursors),c(i.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Bt.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing&&e)){var i=this.cm;this.resetting=!0,i.somethingSelected()?(this.prevInput="",e=i.getSelection(),this.textarea.value=e,i.state.focused&&Us(this.textarea),st&&9<=Tt&&(this.hasSelection=e)):e||(this.prevInput=this.textarea.value="",st&&9<=Tt&&(this.hasSelection=null)),this.resetting=!1}},Bt.prototype.getField=function(){return this.textarea},Bt.prototype.supportsTouch=function(){return!1},Bt.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!Gs||b(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch{}},Bt.prototype.blur=function(){this.textarea.blur()},Bt.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Bt.prototype.receivedFocus=function(){this.slowPoll()},Bt.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Bt.prototype.fastPoll=function(){function e(){l.poll()||i?(l.pollingFast=!1,l.slowPoll()):(i=!0,l.polling.set(60,e))}var i=!1,l=this;l.pollingFast=!0,l.polling.set(20,e)},Bt.prototype.poll=function(){var e=this,i=this.cm,l=this.textarea,o=this.prevInput;if(this.contextMenuPending||this.resetting||!i.state.focused||sx(l)&&!o&&!this.composing||i.isReadOnly()||i.options.disableInput||i.state.keySeq)return!1;var u=l.value;if(u==o&&!i.somethingSelected())return!1;if(st&&9<=Tt&&this.hasSelection===u||Di&&/[\uf700-\uf7ff]/.test(u))return i.display.input.reset(),!1;if(i.doc.sel==i.display.selForContextMenu){var f=u.charCodeAt(0);if(f!=8203||o||(o="​"),f==8666)return this.reset(),this.cm.execCommand("undo")}var v=0;for(f=Math.min(o.length,u.length);v<f&&o.charCodeAt(v)==u.charCodeAt(v);)++v;return xi(i,function(){ma(i,u.slice(v),o.length-v,null,e.composing?"*compose":null),1e3<u.length||-1<u.indexOf(`
`)?l.value=e.prevInput="":e.prevInput=u,e.composing&&(e.composing.range.clear(),e.composing.range=i.markText(e.composing.start,i.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Bt.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Bt.prototype.onKeyPress=function(){st&&9<=Tt&&(this.hasSelection=null),this.fastPoll()},Bt.prototype.onContextMenu=function(e){function i(){if(v.selectionStart!=null){var te=u.somethingSelected(),ye="​"+(te?v.value:"");v.value="⇚",v.value=ye,o.prevInput=te?"":"​",v.selectionStart=1,v.selectionEnd=ye.length,f.selForContextMenu=u.doc.sel}}function l(){if(o.contextMenuPending==l&&(o.contextMenuPending=!1,o.wrapper.style.cssText=W,v.style.cssText=P,st&&9>Tt&&f.scrollbars.setScrollTop(f.scroller.scrollTop=_),v.selectionStart!=null)){(!st||st&&9>Tt)&&i();var te=0,ye=function(){f.selForContextMenu==u.doc.sel&&v.selectionStart==0&&0<v.selectionEnd&&o.prevInput=="​"?Vt(u,n0)(u):10>te++?f.detectingSelectAll=setTimeout(ye,500):(f.selForContextMenu=null,f.input.reset())};f.detectingSelectAll=setTimeout(ye,200)}}var o=this,u=o.cm,f=u.display,v=o.textarea;o.contextMenuPending&&o.contextMenuPending();var E=mr(u,e),_=f.scroller.scrollTop;if(E&&!Hi){u.options.resetSelectionOnContextMenu&&u.doc.sel.contains(E)==-1&&Vt(u,Zt)(u.doc,yr(E),tr);var P=v.style.cssText,W=o.wrapper.style.cssText;if(E=o.wrapper.offsetParent.getBoundingClientRect(),o.wrapper.style.cssText="position: static",v.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(e.clientY-E.top-5)+"px; left: "+(e.clientX-E.left-5)+`px;
      z-index: 1000; background: `+(st?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`,si)var Z=v.ownerDocument.defaultView.scrollY;if(f.input.focus(),si&&v.ownerDocument.defaultView.scrollTo(null,Z),f.input.reset(),u.somethingSelected()||(v.value=o.prevInput=" "),o.contextMenuPending=l,f.selForContextMenu=u.doc.sel,clearTimeout(f.detectingSelectAll),st&&9<=Tt&&i(),ya){V(e);var ee=function(){le(window,"mouseup",ee),setTimeout(l,20)};Ve(window,"mouseup",ee)}else setTimeout(l,50)}},Bt.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=e=="nocursor",this.textarea.readOnly=!!e},Bt.prototype.setUneditable=function(){},Bt.prototype.needsContentAttribute=!1,function(e){function i(o,u,f,v){e.defaults[o]=u,f&&(l[o]=v?function(E,_,P){P!=qn&&f(E,_,P)}:f)}var l=e.optionHandlers;e.defineOption=i,e.Init=qn,i("value","",function(o,u){return o.setValue(u)},!0),i("mode",null,function(o,u){o.doc.modeOption=u,ua(o)},!0),i("indentUnit",2,ua,!0),i("indentWithTabs",!1),i("smartIndent",!0),i("tabSize",4,function(o){Is(o),Pr(o),Qt(o)},!0),i("lineSeparator",null,function(o,u){if(o.doc.lineSep=u){var f=[],v=o.doc.first;o.doc.iter(function(_){for(var P=0;;){var W=_.text.indexOf(u,P);if(W==-1)break;P=W+u.length,f.push(fe(v,W))}v++});for(var E=f.length-1;0<=E;E--)Gn(o.doc,u,f[E],fe(f[E].line,f[E].ch+u.length))}}),i("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(o,u,f){o.state.specialChars=new RegExp(u.source+(u.test("	")?"":"|	"),"g"),f!=qn&&o.refresh()}),i("specialCharPlaceholder",Wi,function(o){return o.refresh()},!0),i("electricChars",!0),i("inputStyle",Gs?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor")},!0),i("spellcheck",!1,function(o,u){return o.getInputField().spellcheck=u},!0),i("autocorrect",!1,function(o,u){return o.getInputField().autocorrect=u},!0),i("autocapitalize",!1,function(o,u){return o.getInputField().autocapitalize=u},!0),i("rtlMoveVisually",!ex),i("wholeLineUpdateBefore",!0),i("theme","default",function(o){C0(o),_s(o)},!0),i("keyMap","default",function(o,u,f){u=jo(u),(f=f!=qn&&jo(f))&&f.detach&&f.detach(o,u),u.attach&&u.attach(o,f||null)}),i("extraKeys",null),i("configureMouse",null),i("lineWrapping",!1,j1,!0),i("gutters",[],function(o,u){o.display.gutterSpecs=la(u,o.options.lineNumbers),_s(o)},!0),i("fixedGutter",!0,function(o,u){o.display.gutters.style.left=u?Rs(o.display)+"px":"0",o.refresh()},!0),i("coverGutterNextToScrollbar",!1,function(o){return Pn(o)},!0),i("scrollbarStyle","native",function(o){Bh(o),Pn(o),o.display.scrollbars.setScrollTop(o.doc.scrollTop),o.display.scrollbars.setScrollLeft(o.doc.scrollLeft)},!0),i("lineNumbers",!1,function(o,u){o.display.gutterSpecs=la(o.options.gutters,u),_s(o)},!0),i("firstLineNumber",1,_s,!0),i("lineNumberFormatter",function(o){return o},_s,!0),i("showCursorWhenSelecting",!1,de,!0),i("resetSelectionOnContextMenu",!0),i("lineWiseCopyCut",!0),i("pasteLinesPerSelection",!0),i("selectionsMayTouch",!1),i("readOnly",!1,function(o,u){u=="nocursor"&&(vr(o),o.display.input.blur()),o.display.input.readOnlyChanged(u)}),i("screenReaderLabel",null,function(o,u){o.display.input.screenReaderLabelChanged(u===""?null:u)}),i("disableInput",!1,function(o,u){u||o.display.input.reset()},!0),i("dragDrop",!0,$1),i("allowDropFileTypes",null),i("cursorBlinkRate",530),i("cursorScrollMargin",0),i("cursorHeight",1,de,!0),i("singleCursorHeightPerLine",!0,de,!0),i("workTime",100),i("workDelay",100),i("flattenSpans",!0,Is,!0),i("addModeClass",!1,Is,!0),i("pollInterval",100),i("undoDepth",200,function(o,u){return o.doc.history.undoDepth=u}),i("historyEventDelay",1250),i("viewportMargin",10,function(o){return o.refresh()},!0),i("maxHighlightLength",1e4,Is,!0),i("moveInputWithCursor",!0,function(o,u){u||o.display.input.resetPosition()}),i("tabindex",null,function(o,u){return o.display.input.getField().tabIndex=u||""}),i("autofocus",null),i("direction","ltr",function(o,u){return o.doc.setDirection(u)},!0),i("phrases",null)}(_t),function(e){var i=e.optionHandlers,l=e.helpers={};e.prototype={constructor:e,focus:function(){d(this).defaultView.focus(),this.display.input.focus()},setOption:function(o,u){var f=this.options,v=f[o];(f[o]!=u||o=="mode")&&(f[o]=u,i.hasOwnProperty(o)&&Vt(this,i[o])(this,u,v),oe(this,"optionChange",this,o))},getOption:function(o){return this.options[o]},getDoc:function(){return this.doc},addKeyMap:function(o,u){this.state.keyMaps[u?"push":"unshift"](jo(o))},removeKeyMap:function(o){for(var u=this.state.keyMaps,f=0;f<u.length;++f)if(u[f]==o||u[f].name==o)return u.splice(f,1),!0},addOverlay:ni(function(o,u){var f=o.token?o:e.getMode(this.options,o);if(f.startState)throw Error("Overlays may not be stateful.");F(this.state.overlays,{mode:f,modeSpec:o,opaque:u&&u.opaque,priority:u&&u.priority||0},function(v){return v.priority}),this.state.modeGen++,Qt(this)}),removeOverlay:ni(function(o){for(var u=this.state.overlays,f=0;f<u.length;++f){var v=u[f].modeSpec;if(v==o||typeof o=="string"&&v.name==o){u.splice(f,1),this.state.modeGen++,Qt(this);break}}}),indentLine:ni(function(o,u,f){typeof u!="string"&&typeof u!="number"&&(u=u==null?this.options.smartIndent?"smart":"prev":u?"add":"subtract"),wt(this.doc,o)&&Bs(this,o,u,f)}),indentSelection:ni(function(o){for(var u=this.doc.sel.ranges,f=-1,v=0;v<u.length;v++){var E=u[v];if(E.empty())E.head.line>f&&(Bs(this,E.head.line,o,!0),f=E.head.line,v==this.doc.sel.primIndex&&Ln(this));else{var _=E.from();E=E.to();var P=Math.max(f,_.line);for(f=Math.min(this.lastLine(),E.line-(E.ch?0:1))+1,E=P;E<f;++E)Bs(this,E,o);E=this.doc.sel.ranges,_.ch==0&&u.length==E.length&&0<E[v].from().ch&&da(this.doc,v,new ct(_,E[v].to()),tr)}}}),getTokenAt:function(o,u){return Te(this,o,u)},getLineTokens:function(o,u){return Te(this,fe(o),u,!0)},getTokenTypeAt:function(o){o=Ne(this.doc,o);var u=g(this,Se(this.doc,o.line)),f=0,v=(u.length-1)/2;if(o=o.ch,o==0)u=u[2];else for(;;){var E=f+v>>1;if((E?u[2*E-1]:0)>=o)v=E;else if(u[2*E+1]<o)f=E+1;else{u=u[2*E+2];break}}return f=u?u.indexOf("overlay "):-1,0>f?u:f==0?null:u.slice(0,f-1)},getModeAt:function(o){var u=this.doc.mode;return u.innerMode?e.innerMode(u,this.getTokenAt(o).state).mode:u},getHelper:function(o,u){return this.getHelpers(o,u)[0]},getHelpers:function(o,u){var f=[];if(!l.hasOwnProperty(u))return f;var v=l[u];if(o=this.getModeAt(o),typeof o[u]=="string")v[o[u]]&&f.push(v[o[u]]);else if(o[u])for(var E=0;E<o[u].length;E++){var _=v[o[u][E]];_&&f.push(_)}else o.helperType&&v[o.helperType]?f.push(v[o.helperType]):v[o.name]&&f.push(v[o.name]);for(u=0;u<v._global.length;u++)E=v._global[u],E.pred(o,this)&&T(f,E.val)==-1&&f.push(E.val);return f},getStateAfter:function(o,u){var f=this.doc;return o=Math.max(f.first,Math.min(o??f.first+f.size-1,f.first+f.size-1)),I(this,o+1,u).state},cursorCoords:function(o,u){var f=this.doc.sel.primary();return o=o==null?f.head:typeof o=="object"?Ne(this.doc,o):o?f.from():f.to(),Si(this,o,u||"page")},charCoords:function(o,u){return _i(this,Ne(this.doc,o),u||"page")},coordsChar:function(o,u){return o=Es(this,o,u||"page"),Ss(this,o.left,o.top)},lineAtHeight:function(o,u){return o=Es(this,{top:o,left:0},u||"page").top,gt(this.doc,o+this.display.viewOffset)},heightAtLine:function(o,u,f){var v=!1;if(typeof o=="number"){var E=this.doc.first+this.doc.size-1;o<this.doc.first?o=this.doc.first:o>E&&(o=E,v=!0),o=Se(this.doc,o)}return Ui(this,o,{top:0,left:0},u||"page",f||v).top+(v?this.doc.height-gi(o):0)},defaultTextHeight:function(){return Br(this.display)},defaultCharWidth:function(){return Ji(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(o,u,f,v,E){var _=this.display;o=Si(this,Ne(this.doc,o));var P=o.bottom,W=o.left;if(u.style.position="absolute",u.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(u),_.sizer.appendChild(u),v=="over")P=o.top;else if(v=="above"||v=="near"){var Z=Math.max(_.wrapper.clientHeight,this.doc.height),ee=Math.max(_.sizer.clientWidth,_.lineSpace.clientWidth);(v=="above"||o.bottom+u.offsetHeight>Z)&&o.top>u.offsetHeight?P=o.top-u.offsetHeight:o.bottom+u.offsetHeight<=Z&&(P=o.bottom),W+u.offsetWidth>ee&&(W=ee-u.offsetWidth)}u.style.top=P+"px",u.style.left=u.style.right="",E=="right"?(W=_.sizer.clientWidth-u.offsetWidth,u.style.right="0px"):(E=="left"?W=0:E=="middle"&&(W=(_.sizer.clientWidth-u.offsetWidth)/2),u.style.left=W+"px"),f&&(o=Gr(this,{left:W,top:P,right:W+u.offsetWidth,bottom:P+u.offsetHeight}),o.scrollTop!=null&&bs(this,o.scrollTop),o.scrollLeft!=null&&nn(this,o.scrollLeft))},triggerOnKeyDown:ni(w0),triggerOnKeyPress:ni(R0),triggerOnKeyUp:S0,triggerOnMouseDown:ni(T0),execCommand:function(o){if(Xs.hasOwnProperty(o))return Xs[o].call(null,this)},triggerElectric:ni(function(o){_0(this,o)}),findPosH:function(o,u,f,v){var E=1;0>u&&(E=-1,u=-u),o=Ne(this.doc,o);for(var _=0;_<u&&(o=va(this.doc,o,E,f,v),!o.hitSide);++_);return o},moveH:ni(function(o,u){var f=this;this.extendSelectionsBy(function(v){return f.display.shift||f.doc.extend||v.empty()?va(f.doc,v.head,o,u,f.options.rtlMoveVisually):0>o?v.from():v.to()},ks)}),deleteH:ni(function(o,u){var f=this.doc;this.doc.sel.somethingSelected()?f.replaceSelection("",null,"+delete"):kn(this,function(v){var E=va(f,v.head,o,u,!1);return 0>o?{from:E,to:v.head}:{from:v.head,to:E}})}),findPosV:function(o,u,f,v){var E=1;0>u&&(E=-1,u=-u);var _=Ne(this.doc,o);for(o=0;o<u&&(_=Si(this,_,"div"),v==null?v=_.left:_.left=v,_=L0(this,_,E,f),!_.hitSide);++o);return _},moveV:ni(function(o,u){var f=this,v=this.doc,E=[],_=!this.display.shift&&!v.extend&&v.sel.somethingSelected();if(v.extendSelectionsBy(function(W){if(_)return 0>o?W.from():W.to();var Z=Si(f,W.head,"div");W.goalColumn!=null&&(Z.left=W.goalColumn),E.push(Z.left);var ee=L0(f,Z,o,u);return u=="page"&&W==v.sel.primary()&&Fo(f,_i(f,ee,"div").top-Z.top),ee},ks),E.length)for(var P=0;P<v.sel.ranges.length;P++)v.sel.ranges[P].goalColumn=E[P]}),findWordAt:function(o){var u=Se(this.doc,o.line).text,f=o.ch,v=o.ch;if(u){var E=this.getHelper(o,"wordChars");o.sticky!="before"&&v!=u.length||!f?++v:--f;var _=u.charAt(f);for(_=$(_,E)?function(P){return $(P,E)}:/\s/.test(_)?function(P){return/\s/.test(P)}:function(P){return!/\s/.test(P)&&!$(P)};0<f&&_(u.charAt(f-1));)--f;for(;v<u.length&&_(u.charAt(v));)++v}return new ct(fe(o.line,f),fe(o.line,v))},toggleOverwrite:function(o){(o==null||o!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?y(this.display.cursorDiv,"CodeMirror-overwrite"):an(this.display.cursorDiv,"CodeMirror-overwrite"),oe(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==b(d(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:ni(function(o,u){As(this,o,u)}),getScrollInfo:function(){var o=this.display.scroller;return{left:o.scrollLeft,top:o.scrollTop,height:o.scrollHeight-ze(this)-this.display.barHeight,width:o.scrollWidth-ze(this)-this.display.barWidth,clientHeight:Ot(this),clientWidth:Ke(this)}},scrollIntoView:ni(function(o,u){o==null?(o={from:this.doc.sel.primary().head,to:null},u==null&&(u=this.options.cursorScrollMargin)):typeof o=="number"?o={from:fe(o,0),to:null}:o.from==null&&(o={from:o,to:null}),o.to||(o.to=o.from),o.margin=u||0,o.from.line!=null?(Go(this),this.curOp.scrollToPos=o):Lh(this,o.from,o.to,o.margin)}),setSize:ni(function(o,u){var f=this,v=function(_){return typeof _=="number"||/^\d+$/.test(String(_))?_+"px":_};o!=null&&(this.display.wrapper.style.width=v(o)),u!=null&&(this.display.wrapper.style.height=v(u)),this.options.lineWrapping&&_o(this);var E=this.display.viewFrom;this.doc.iter(E,this.display.viewTo,function(_){if(_.widgets){for(var P=0;P<_.widgets.length;P++)if(_.widgets[P].noHScroll){Mi(f,E,"widget");break}}++E}),this.curOp.forceUpdate=!0,oe(this,"refresh",this)}),operation:function(o){return xi(this,o)},startOperation:function(){return sn(this)},endOperation:function(){return on(this)},refresh:ni(function(){var o=this.display.cachedTextHeight;Qt(this),this.curOp.forceUpdate=!0,Pr(this),As(this,this.doc.scrollLeft,this.doc.scrollTop),sa(this.display),(o==null||.5<Math.abs(o-Br(this.display))||this.options.lineWrapping)&&In(this),oe(this,"refresh",this)}),swapDoc:ni(function(o){var u=this.doc;return u.cm=null,this.state.selectingText&&this.state.selectingText(),Vh(this,o),Pr(this),this.display.input.reset(),As(this,o.scrollLeft,o.scrollTop),this.curOp.forceScroll=!0,Rt(this,"swapDoc",this,u),u}),phrase:function(o){var u=this.options.phrases;return u&&Object.prototype.hasOwnProperty.call(u,o)?u[o]:o},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Me(e),e.registerHelper=function(o,u,f){l.hasOwnProperty(o)||(l[o]=e[o]={_global:[]}),l[o][u]=f},e.registerGlobalHelper=function(o,u,f,v){e.registerHelper(o,u,v),l[o]._global.push({pred:f,val:v})}}(_t);var fx="iter insert remove copy getEditor constructor".split(" "),Qs;for(Qs in hi.prototype)hi.prototype.hasOwnProperty(Qs)&&0>T(fx,Qs)&&(_t.prototype[Qs]=function(e){return function(){return e.apply(this.doc,arguments)}}(hi.prototype[Qs]));return Me(hi),_t.inputStyles={textarea:Bt,contenteditable:pt},_t.defineMode=function(e){_t.defaults.mode||e=="null"||(_t.defaults.mode=e),he.apply(this,arguments)},_t.defineMIME=function(e,i){zn[e]=i},_t.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),_t.defineMIME("text/plain","null"),_t.defineExtension=function(e,i){_t.prototype[e]=i},_t.defineDocExtension=function(e,i){hi.prototype[e]=i},_t.fromTextArea=function(e,i){function l(){e.value=E.getValue()}if(i=i?R(i):{},i.value=e.value,!i.tabindex&&e.tabIndex&&(i.tabindex=e.tabIndex),!i.placeholder&&e.placeholder&&(i.placeholder=e.placeholder),i.autofocus==null){var o=b(e.ownerDocument);i.autofocus=o==e||e.getAttribute("autofocus")!=null&&o==document.body}if(e.form&&(Ve(e.form,"submit",l),!i.leaveSubmitMethodAlone)){var u=e.form,f=u.submit;try{var v=u.submit=function(){l(),u.submit=f,u.submit(),u.submit=v}}catch{}}i.finishInit=function(_){_.save=l,_.getTextArea=function(){return e},_.toTextArea=function(){_.toTextArea=isNaN,l(),e.parentNode.removeChild(_.getWrapperElement()),e.style.display="",e.form&&(le(e.form,"submit",l),i.leaveSubmitMethodAlone||typeof e.form.submit!="function"||(e.form.submit=f))}},e.style.display="none";var E=_t(function(_){return e.parentNode.insertBefore(_,e.nextSibling)},i);return E},function(e){e.off=le,e.on=Ve,e.wheelEventPixels=R1,e.Doc=hi,e.splitLines=Ra,e.countColumn=M,e.findColumn=w,e.isWordChar=G,e.Pass=Jo,e.signal=oe,e.Line=jn,e.changeEnd=Wr,e.scrollbarModel=z0,e.Pos=fe,e.cmpPos=Le,e.modes=Aa,e.mimeModes=zn,e.resolveMode=ge,e.getMode=be,e.modeExtensions=$n,e.extendMode=N,e.copyState=U,e.startState=_e,e.innerMode=me,e.commands=Xs,e.keyMap=Ys,e.keyName=x0,e.isModifierKey=p0,e.lookupKey=Un,e.normalizeKeyMap=P1,e.StringStream=Ut,e.SharedTextMarker=Vs,e.TextMarker=zr,e.LineWidget=js,e.e_preventDefault=X,e.e_stopPropagation=ne,e.e_stop=V,e.addClass=y,e.contains=x,e.rmClass=an,e.keyNames=$r}(_t),_t.version="5.65.9",_t})})(v1);var y1=v1.exports;const Q2=$l(y1);(function(r,t){(function(n){n(y1)})(function(n){n.defineMode("javascript",function(s,a){var c,h,p;function x(D,z,xe){return Ki=D,Yi=xe,z}function b(D,z){var xe=D.next();if(xe=='"'||xe=="'")return z.tokenize=y(xe),z.tokenize(D,z);if(xe=="."&&D.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return x("number","number");if(xe=="."&&D.match(".."))return x("spread","meta");if(/[\[\]{}\(\),;:\.]/.test(xe))return x(xe);if(xe=="="&&D.eat(">"))return x("=>","operator");if(xe=="0"&&D.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return x("number","number");if(/\d/.test(xe))return D.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),x("number","number");if(xe=="/"){if(D.eat("*"))return z.tokenize=A,A(D,z);if(D.eat("/"))return D.skipToEnd(),x("comment","comment");if(Wi(D,z,1)){e:for(var Ie=z=!1;(xe=D.next())!=null;){if(!z){if(xe=="/"&&!Ie)break e;xe=="["?Ie=!0:Ie&&xe=="]"&&(Ie=!1)}z=!z&&xe=="\\"}return D.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),x("regexp","string-2")}return D.eat("="),x("operator","operator",D.current())}if(xe=="`")return z.tokenize=d,d(D,z);if(xe=="#"&&D.peek()=="!")return D.skipToEnd(),x("meta","meta");if(xe=="#"&&D.eatWhile(Rt))return x("variable","property");if(xe=="<"&&D.match("!--")||xe=="-"&&D.match("->")&&!/\S/.test(D.string.slice(0,D.start)))return D.skipToEnd(),x("comment","comment");if(en.test(xe))return xe==">"&&z.lexical&&z.lexical.type==">"||(D.eat("=")?xe!="!"&&xe!="="||D.eat("="):/[<>*+\-|&?]/.test(xe)&&(D.eat(xe),xe==">"&&D.eat(xe))),xe=="?"&&D.eat(".")?x("."):x("operator","operator",D.current());if(Rt.test(xe)){if(D.eatWhile(Rt),xe=D.current(),z.lastType!="."){if(Cn.propertyIsEnumerable(xe))return D=Cn[xe],x(D.type,D.style,xe);if(xe=="async"&&D.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return x("async","keyword",xe)}return x("variable","variable",xe)}}function y(D){return function(z,xe){var Ie=!1,ze;if(fr&&z.peek()=="@"&&z.match(pr))return xe.tokenize=b,x("jsonld-keyword","meta");for(;(ze=z.next())!=null&&(ze!=D||Ie);)Ie=!Ie&&ze=="\\";return Ie||(xe.tokenize=b),x("string","string")}}function A(D,z){for(var xe=!1,Ie;Ie=D.next();){if(Ie=="/"&&xe){z.tokenize=b;break}xe=Ie=="*"}return x("comment","comment")}function d(D,z){for(var xe=!1,Ie;(Ie=D.next())!=null;){if(!xe&&(Ie=="`"||Ie=="$"&&D.eat("{"))){z.tokenize=b;break}xe=!xe&&Ie=="\\"}return x("quasi","string-2",D.current())}function S(D,z){z.fatArrowAt&&(z.fatArrowAt=null);var xe=D.string.indexOf("=>",D.start);if(!(0>xe)){if(nt){var Ie=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(D.string.slice(D.start,xe));Ie&&(xe=Ie.index)}Ie=0;var ze=!1;for(--xe;0<=xe;--xe){var Ke=D.string.charAt(xe),Ot="([{}])".indexOf(Ke);if(0<=Ot&&3>Ot){if(!Ie){++xe;break}if(--Ie==0){Ke=="("&&(ze=!0);break}}else if(3<=Ot&&6>Ot)++Ie;else if(Rt.test(Ke))ze=!0;else if(/["'\/`]/.test(Ke))for(;;--xe){if(xe==0)return;if(D.string.charAt(xe-1)==Ke&&D.string.charAt(xe-2)!="\\"){xe--;break}}else if(ze&&!Ie){++xe;break}}ze&&!Ie&&(z.fatArrowAt=xe)}}function R(D,z,xe,Ie,ze,Ke){this.indented=D,this.column=z,this.type=xe,this.prev=ze,this.info=Ke,Ie!=null&&(this.align=Ie)}function M(D,z,xe,Ie,ze){var Ke=D.cc;for(c=D,h=ze,p=null,Xi=Ke,Zi=z,D.lexical.hasOwnProperty("align")||(D.lexical.align=!0);;)if((Ke.length?Ke.pop():Oi?we:ae)(xe,Ie)){for(;Ke.length&&Ke[Ke.length-1].lex;)Ke.pop()();if(p)return p;if(xe=xe=="variable")e:if(dr){for(xe=D.localVars;xe;xe=xe.next)if(xe.name==Ie){xe=!0;break e}for(D=D.context;D;D=D.prev)for(xe=D.vars;xe;xe=xe.next)if(xe.name==Ie){xe=!0;break e}xe=void 0}else xe=!1;return xe?"variable-2":z}}function T(){for(var D=arguments.length-1;0<=D;D--)Xi.push(arguments[D])}function w(){return T.apply(null,arguments),!0}function C(D,z){for(;z;z=z.next)if(z.name==D)return!0;return!1}function O(D){var z=c;if(p="def",dr){if(z.context){if(z.lexical.info=="var"&&z.context&&z.context.block){var xe=H(D,z.context);if(xe!=null){z.context=xe;return}}else if(!C(D,z.localVars)){z.localVars=new ie(D,z.localVars);return}}a.globalVars&&!C(D,z.globalVars)&&(z.globalVars=new ie(D,z.globalVars))}}function H(D,z){return z?z.block?(D=H(D,z.prev))?D==z.prev?z:new q(D,z.vars,!0):null:C(D,z.vars)?z:new q(z.prev,new ie(D,z.vars),!1):null}function F(D){return D=="public"||D=="private"||D=="protected"||D=="abstract"||D=="readonly"}function q(D,z,xe){this.prev=D,this.vars=z,this.block=xe}function ie(D,z){this.name=D,this.next=z}function G(){c.context=new q(c.context,c.localVars,!1),c.localVars=Dr}function $(){c.context=new q(c.context,c.localVars,!0),c.localVars=null}function K(){c.localVars=c.context.vars,c.context=c.context.prev}function Y(D,z){var xe=function(){var Ie=c,ze=Ie.indented;if(Ie.lexical.type=="stat")ze=Ie.lexical.indented;else for(var Ke=Ie.lexical;Ke&&Ke.type==")"&&Ke.align;Ke=Ke.prev)ze=Ke.indented;Ie.lexical=new R(ze,h.column(),D,null,Ie.lexical,z)};return xe.lex=!0,xe}function Q(){var D=c;D.lexical.prev&&(D.lexical.type==")"&&(D.indented=D.lexical.indented),D.lexical=D.lexical.prev)}function se(D){function z(xe){return xe==D?w():D==";"||xe=="}"||xe==")"||xe=="]"?T():w(z)}return z}function ae(D,z){return D=="var"?w(Y("vardef",z),I,se(";"),Q):D=="keyword a"?w(Y("form"),oe,ae,Q):D=="keyword b"?w(Y("form"),ae,Q):D=="keyword d"?h.match(/^\s*$/,!1)?w():w(Y("stat"),ce,se(";"),Q):D=="debugger"?w(se(";")):D=="{"?w(Y("}"),$,je,Q,K):D==";"?w():D=="if"?(c.lexical.info=="else"&&c.cc[c.cc.length-1]==Q&&c.cc.pop()(),w(Y("form"),oe,ae,Q,Fe)):D=="function"?w(Pt):D=="for"?w(Y("form"),$,Xe,ae,K,Q):D=="class"||nt&&z=="interface"?(p="keyword",w(Y("form",D=="class"?D:z),Ir,Q)):D=="variable"?nt&&z=="declare"?(p="keyword",w(ae)):nt&&(z=="module"||z=="enum"||z=="type")&&h.match(/^\s*\w/,!1)?(p="keyword",z=="enum"?w(Qr):z=="type"?w(ji,se("operator"),He,se(";")):w(Y("form"),L,se("{"),Y("}"),je,Q,Q)):nt&&z=="namespace"?(p="keyword",w(Y("form"),we,ae,Q)):nt&&z=="abstract"?(p="keyword",w(ae)):w(Y("stat"),be):D=="switch"?w(Y("form"),oe,se("{"),Y("}","switch"),$,je,Q,Q,K):D=="case"?w(we,se(":")):D=="default"?w(se(":")):D=="catch"?w(Y("form"),G,ve,ae,Q,K):D=="export"?w(Y("stat"),ai,Q):D=="import"?w(Y("stat"),Tn,Q):D=="async"?w(ae):z=="@"?w(we,ae):T(Y("stat"),we,se(";"),Q)}function ve(D){if(D=="(")return w(Fi,se(")"))}function we(D,z){return Re(D,z,!1)}function le(D,z){return Re(D,z,!0)}function oe(D){return D!="("?T():w(Y(")"),ce,se(")"),Q)}function Re(D,z,xe){if(c.fatArrowAt==h.start){var Ie=xe?V:ue;if(D=="(")return w(G,Y(")"),Se(Fi,")"),Q,se("=>"),Ie,K);if(D=="variable")return T(G,L,se("=>"),Ie,K)}return Ie=xe?Me:Oe,tn.hasOwnProperty(D)?w(Ie):D=="function"?w(Pt,Ie):D=="class"||nt&&z=="interface"?(p="keyword",w(Y("form"),Rn,Q)):D=="keyword c"||D=="async"?w(xe?le:we):D=="("?w(Y(")"),ce,se(")"),Q,Ie):D=="operator"||D=="spread"?w(xe?le:we):D=="["?w(Y("]"),Jr,Q,Ie):D=="{"?Pe(U,"}",null,Ie):D=="quasi"?T(X,Ie):D=="new"?w(J(xe)):w()}function ce(D){return D.match(/[;\}\)\],]/)?T():T(we)}function Oe(D,z){return D==","?w(ce):Me(D,z,!1)}function Me(D,z,xe){var Ie=xe==0?Oe:Me,ze=xe==0?we:le;if(D=="=>")return w(G,xe?V:ue,K);if(D=="operator")return/\+\+|--/.test(z)||nt&&z=="!"?w(Ie):nt&&z=="<"&&h.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?w(Y(">"),Se(He,">"),Q,Ie):z=="?"?w(we,se(":"),ze):w(ze);if(D=="quasi")return T(X,Ie);if(D!=";"){if(D=="(")return Pe(le,")","call",Ie);if(D==".")return w(N,Ie);if(D=="[")return w(Y("]"),ce,se("]"),Q,Ie);if(nt&&z=="as")return p="keyword",w(He,Ie);if(D=="regexp")return c.lastType=p="operator",h.backUp(h.pos-h.start-1),w(ze)}}function X(D,z){return D!="quasi"?T():z.slice(z.length-2)!="${"?w(X):w(ce,ne)}function ne(D){if(D=="}")return p="string-2",c.tokenize=d,w(X)}function ue(D){return S(h,c),T(D=="{"?ae:we)}function V(D){return S(h,c),T(D=="{"?ae:le)}function J(D){return function(z){return z=="."?w(D?ge:he):z=="variable"&&nt?w(B,D?Me:Oe):T(D?le:we)}}function he(D,z){if(z=="target")return p="keyword",w(Oe)}function ge(D,z){if(z=="target")return p="keyword",w(Me)}function be(D){return D==":"?w(Q,ae):T(Oe,se(";"),Q)}function N(D){if(D=="variable")return p="property",w()}function U(D,z){if(D=="async")return p="property",w(U);if(D=="variable"||Zi=="keyword"){if(p="property",z=="get"||z=="set")return w(me);var xe;return nt&&c.fatArrowAt==h.start&&(xe=h.match(/^\s*:\s*/,!1))&&(c.fatArrowAt=h.pos+xe[0].length),w(_e)}if(D=="number"||D=="string")return p=fr?"property":Zi+" property",w(_e);if(D=="jsonld-keyword")return w(_e);if(nt&&F(z))return p="keyword",w(U);if(D=="[")return w(we,Qe,se("]"),_e);if(D=="spread")return w(le,_e);if(z=="*")return p="keyword",w(U);if(D==":")return T(_e)}function me(D){return D!="variable"?T(_e):(p="property",w(Pt))}function _e(D){if(D==":")return w(le);if(D=="(")return T(Pt)}function Se(D,z,xe){function Ie(ze,Ke){return(xe?-1<xe.indexOf(ze):ze==",")?(ze=c.lexical,ze.info=="call"&&(ze.pos=(ze.pos||0)+1),w(function(Ot,Lr){return Ot==z||Lr==z?T():T(D)},Ie)):ze==z||Ke==z?w():xe&&-1<xe.indexOf(";")?T(D):w(se(z))}return function(ze,Ke){return ze==z||Ke==z?w():T(D,Ie)}}function Pe(D,z,xe){for(var Ie=3;Ie<arguments.length;Ie++)Xi.push(arguments[Ie]);return w(Y(z,xe),Se(D,z),Q)}function je(D){return D=="}"?w():T(ae,je)}function Qe(D,z){if(nt){if(D==":")return w(He);if(z=="?")return w(Qe)}}function pe(D,z){if(nt&&(D==":"||z=="in"))return w(He)}function gt(D){if(nt&&D==":")return h.match(/^\s*\w+\s+is\b/,!1)?w(we,wt,He):w(He)}function wt(D,z){if(z=="is")return p="keyword",w()}function He(D,z){if(z=="keyof"||z=="typeof"||z=="infer"||z=="readonly")return p="keyword",w(z=="typeof"?le:He);if(D=="variable"||z=="void")return p="type",w(Ne);if(z=="|"||z=="&")return w(He);if(D=="string"||D=="number"||D=="atom")return w(Ne);if(D=="[")return w(Y("]"),Se(He,"]",","),Q,Ne);if(D=="{")return w(Y("}"),Le,Q,Ne);if(D=="(")return w(Se(ht,")"),fe,Ne);if(D=="<")return w(Se(He,">"),He);if(D=="quasi")return T(Lt,Ne)}function fe(D){if(D=="=>")return w(He)}function Le(D){return D.match(/[\}\)\]]/)?w():D==","||D==";"?w(Le):T(rt,Le)}function rt(D,z){if(D=="variable"||Zi=="keyword")return p="property",w(rt);if(z=="?"||D=="number"||D=="string")return w(rt);if(D==":")return w(He);if(D=="[")return w(se("variable"),pe,se("]"),rt);if(D=="(")return T(ut,rt);if(!D.match(/[;\}\)\],]/))return w()}function Lt(D,z){return D!="quasi"?T():z.slice(z.length-2)!="${"?w(Lt):w(He,Wt)}function Wt(D){if(D=="}")return p="string-2",c.tokenize=d,w(Lt)}function ht(D,z){return D=="variable"&&h.match(/^\s*[?:]/,!1)||z=="?"?w(ht):D==":"?w(He):D=="spread"?w(ht):T(He)}function Ne(D,z){if(z=="<")return w(Y(">"),Se(He,">"),Q,Ne);if(z=="|"||D=="."||z=="&")return w(He);if(D=="[")return w(He,se("]"),Ne);if(z=="extends"||z=="implements")return p="keyword",w(He);if(z=="?")return w(He,se(":"),He)}function B(D,z){if(z=="<")return w(Y(">"),Se(He,">"),Q,Ne)}function m(){return T(He,g)}function g(D,z){if(z=="=")return w(He)}function I(D,z){return z=="enum"?(p="keyword",w(Qr)):T(L,Qe,Te,Be)}function L(D,z){if(nt&&F(z))return p="keyword",w(L);if(D=="variable")return O(z),w();if(D=="spread")return w(L);if(D=="[")return Pe(re,"]");if(D=="{")return Pe(j,"}")}function j(D,z){return D=="variable"&&!h.match(/^\s*:/,!1)?(O(z),w(Te)):(D=="variable"&&(p="property"),D=="spread"?w(L):D=="}"?T():D=="["?w(we,se("]"),se(":"),j):w(se(":"),L,Te))}function re(){return T(L,Te)}function Te(D,z){if(z=="=")return w(le)}function Be(D){if(D==",")return w(I)}function Fe(D,z){if(D=="keyword b"&&z=="else")return w(Y("form","else"),ae,Q)}function Xe(D,z){if(z=="await")return w(Xe);if(D=="(")return w(Y(")"),$e,Q)}function $e(D){return D=="var"?w(I,tt):D=="variable"?w(tt):T(tt)}function tt(D,z){return D==")"?w():D==";"?w(tt):z=="in"||z=="of"?(p="keyword",w(we,tt)):T(we,tt)}function Pt(D,z){if(z=="*")return p="keyword",w(Pt);if(D=="variable")return O(z),w(Pt);if(D=="(")return w(G,Y(")"),Se(Fi,")"),Q,gt,ae,K);if(nt&&z=="<")return w(Y(">"),Se(m,">"),Q,Pt)}function ut(D,z){if(z=="*")return p="keyword",w(ut);if(D=="variable")return O(z),w(ut);if(D=="(")return w(G,Y(")"),Se(Fi,")"),Q,gt,K);if(nt&&z=="<")return w(Y(">"),Se(m,">"),Q,ut)}function ji(D,z){if(D=="keyword"||D=="variable")return p="type",w(ji);if(z=="<")return w(Y(">"),Se(m,">"),Q)}function Fi(D,z){return z=="@"&&w(we,Fi),D=="spread"?w(Fi):nt&&F(z)?(p="keyword",w(Fi)):nt&&D=="this"?w(Qe,Te):T(L,Qe,Te)}function Rn(D,z){return D=="variable"?Ir(D,z):Gi(D,z)}function Ir(D,z){if(D=="variable")return O(z),w(Gi)}function Gi(D,z){if(z=="<")return w(Y(">"),Se(m,">"),Q,Gi);if(z=="extends"||z=="implements"||nt&&D==",")return z=="implements"&&(p="keyword"),w(nt?He:we,Gi);if(D=="{")return w(Y("}"),It,Q)}function It(D,z){if(D=="async"||D=="variable"&&(z=="static"||z=="get"||z=="set"||nt&&F(z))&&h.match(/^\s+[\w$\xa1-\uffff]/,!1))return p="keyword",w(It);if(D=="variable"||Zi=="keyword")return p="property",w(hr,It);if(D=="number"||D=="string")return w(hr,It);if(D=="[")return w(we,Qe,se("]"),hr,It);if(z=="*")return p="keyword",w(It);if(nt&&D=="(")return T(ut,It);if(D==";"||D==",")return w(It);if(D=="}")return w();if(z=="@")return w(we,It)}function hr(D,z){return z=="!"||z=="?"?w(hr):D==":"?w(He,Te):z=="="?w(le):(D=c.lexical.prev,T(D&&D.info=="interface"?ut:Pt))}function ai(D,z){return z=="*"?(p="keyword",w(Vi,se(";"))):z=="default"?(p="keyword",w(we,se(";"))):D=="{"?w(Se(Mr,"}"),Vi,se(";")):T(ae)}function Mr(D,z){if(z=="as")return p="keyword",w(se("variable"));if(D=="variable")return T(le,Mr)}function Tn(D){return D=="string"?w():D=="("?T(we):D=="."?T(Oe):T(ui,ii,Vi)}function ui(D,z){return D=="{"?Pe(ui,"}"):(D=="variable"&&O(z),z=="*"&&(p="keyword"),w(gi))}function ii(D){if(D==",")return w(ui,ii)}function gi(D,z){if(z=="as")return p="keyword",w(ui)}function Vi(D,z){if(z=="from")return p="keyword",w(we)}function Jr(D){return D=="]"?w():T(Se(le,"]"))}function Qr(){return T(Y("form"),L,se("{"),Y("}"),Se(An,"}"),Q,Q)}function An(){return T(L,Te)}function Wi(D,z,xe){return z.tokenize==b&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(z.lastType)||z.lastType=="quasi"&&/\{\s*$/.test(D.string.slice(0,D.pos-(xe||0)))}var qi=s.indentUnit,bn=a.statementIndent,fr=a.jsonld,Oi=a.json||fr,dr=a.trackScope!==!1,nt=a.typescript,Rt=a.wordCharacters||/[\w$\xa1-\uffff]/,Cn=function(){function D(Lr){return{type:Lr,style:"keyword"}}var z=D("keyword a"),xe=D("keyword b"),Ie=D("keyword c"),ze=D("keyword d"),Ke=D("operator"),Ot={type:"atom",style:"atom"};return{if:D("if"),while:z,with:z,else:xe,do:xe,try:xe,finally:xe,return:ze,break:ze,continue:ze,new:D("new"),delete:Ie,void:Ie,throw:Ie,debugger:D("debugger"),var:D("var"),const:D("var"),let:D("var"),function:D("function"),catch:D("catch"),for:D("for"),switch:D("switch"),case:D("case"),default:D("default"),in:Ke,typeof:Ke,instanceof:Ke,true:Ot,false:Ot,null:Ot,undefined:Ot,NaN:Ot,Infinity:Ot,this:D("this"),class:D("class"),super:D("atom"),yield:Ie,export:D("export"),import:D("import"),extends:Ie,await:Ie}}(),en=/[+\-*&%=<>!?|~^@]/,pr=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Ki,Yi,tn={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0},Xi=p=c=null,Zi=h=void 0,Dr=new ie("this",new ie("arguments",null));return G.lex=$.lex=!0,K.lex=!0,Q.lex=!0,{startState:function(D){return D={tokenize:b,lastType:"sof",cc:[],lexical:new R((D||0)-qi,0,"block",!1),localVars:a.localVars,context:a.localVars&&new q(null,null,!1),indented:D||0},a.globalVars&&typeof a.globalVars=="object"&&(D.globalVars=a.globalVars),D},token:function(D,z){if(D.sol()&&(z.lexical.hasOwnProperty("align")||(z.lexical.align=!1),z.indented=D.indentation(),S(D,z)),z.tokenize!=A&&D.eatSpace())return null;var xe=z.tokenize(D,z);return Ki=="comment"?xe:(z.lastType=Ki!="operator"||Yi!="++"&&Yi!="--"?Ki:"incdec",M(z,xe,Ki,Yi,D))},indent:function(D,z){if(D.tokenize==A||D.tokenize==d)return n.Pass;if(D.tokenize!=b)return 0;var xe=z&&z.charAt(0),Ie=D.lexical,ze;if(!/^\s*else\b/.test(z))for(var Ke=D.cc.length-1;0<=Ke;--Ke){var Ot=D.cc[Ke];if(Ot==Q)Ie=Ie.prev;else if(Ot!=Fe&&Ot!=K)break}for(;!(Ie.type!="stat"&&Ie.type!="form"||xe!="}"&&(!(ze=D.cc[D.cc.length-1])||ze!=Oe&&ze!=Me||/^[,\.=+\-*:?[\(]/.test(z)));)Ie=Ie.prev;return bn&&Ie.type==")"&&Ie.prev.type=="stat"&&(Ie=Ie.prev),ze=Ie.type,Ke=xe==ze,ze=="vardef"?Ie.indented+(D.lastType=="operator"||D.lastType==","?Ie.info.length+1:0):ze=="form"&&xe=="{"?Ie.indented:ze=="form"?Ie.indented+qi:ze=="stat"?(xe=Ie.indented,D=D.lastType=="operator"||D.lastType==","||en.test(z.charAt(0))||/[,.]/.test(z.charAt(0)),xe+(D?bn||qi:0)):Ie.info!="switch"||Ke||a.doubleIndentSwitch==0?Ie.align?Ie.column+(Ke?0:1):Ie.indented+(Ke?0:qi):Ie.indented+(/^(?:case|default)\b/.test(z)?qi:2*qi)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:Oi?null:"/*",blockCommentEnd:Oi?null:"*/",blockCommentContinue:Oi?null:" * ",lineComment:Oi?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:Oi?"json":"javascript",jsonldMode:fr,jsonMode:Oi,expressionAllowed:Wi,skipExpression:function(D){M(D,"atom","atom","true",new n.StringStream("",2,null))}}}),n.registerHelper("wordChars","javascript",/[\w$]/),n.defineMIME("text/javascript","javascript"),n.defineMIME("text/ecmascript","javascript"),n.defineMIME("application/javascript","javascript"),n.defineMIME("application/x-javascript","javascript"),n.defineMIME("application/ecmascript","javascript"),n.defineMIME("application/json",{name:"javascript",json:!0}),n.defineMIME("application/x-json",{name:"javascript",json:!0}),n.defineMIME("application/manifest+json",{name:"javascript",json:!0}),n.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),n.defineMIME("text/typescript",{name:"javascript",typescript:!0}),n.defineMIME("application/typescript",{name:"javascript",typescript:!0})})})();class ew{constructor(t){const n={mode:{name:"javascript",globalVars:!0},value:"dosis",theme:"tomorrow-night-eighties",extraKeys:this.extraKeys()};this.cm=Q2.fromTextArea(t,n),window.cm=this.cm,this.cm.refresh(),this.cm.setValue(`
 
 console.log("Escapar de la pantalla") 

 toplap Bogotá ::  CTRL+enter`)}extraKeys(){return self=this,{"Ctrl-Enter":function(t){self.selectCurrentBlock(t),self.localStorageSave(t)}}}selectCurrentBlock(t){for(var n=t.getCursor(),s=n.line,a=n.line,c=t.getLine(s).trim();s>0&&c!=="";)s--,c=t.getLine(s).trim();for(c=t.getLine(a).trim();a<t.lineCount()&&c!=="";)a++,c=t.getLine(a).trim();var h={line:s,ch:0},p={line:a,ch:0},x=t.getRange(h,p);return x}localStorageSave(t){let n=t.doc.getValue(),s=JSON.stringify({code:n});localStorage.setItem(APP_NAME,s)}}const tw=document.querySelector("textarea");new ew(tw);rh.APP_NAME="org.toplap.bogota.dosis";
